/**
 * skylark-rjs - A version of rjs that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(factory,globals){var define=globals.define,require=globals.require,isAmd="function"==typeof define&&define.amd,isCmd=!isAmd&&"undefined"!=typeof exports;if(!isAmd&&!define){var map={};define=globals.define=function(e,t,n){"function"==typeof n?(map[e]={factory:n,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var n=t.split("/"),i=e.split("/");n.pop();for(var r=0;r<i.length;r++)"."!=i[r]&&(".."==i[r]?n.pop():n.push(i[r]));return n.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):map[e]={factory:null,resolved:!0,exports:n}},require=globals.require=function(e){if(!map.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=map[e];if(!module.resolved){var t=[];module.deps.forEach(function(e){t.push(require(e))}),module.exports=module.factory.apply(globals,t)||null,module.resolved=!0}return module.exports}}if(!define)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(define,require){define("skylark-langx-ns/_attach",[],function(){return function(e,t,n){"string"==typeof t&&(t=t.split("."));for(var i=t.length,r=e,s=0,o=t[s++];s<i;)r=r[o]=r[o]||{},o=t[s++];if(r[o]){if(n)throw new Error("This namespace already exists:"+t)}else r[o]=n||{};return r[o]}}),define("skylark-langx-ns/ns",["./_attach"],function(e){var t={attach:function(n,i){return e(t,n,i)}};return t}),define("skylark-langx-ns/main",["./ns"],function(e){return e}),define("skylark-langx-ns",["skylark-langx-ns/main"],function(e){return e}),define("skylark-rjs/rjs",["skylark-langx-ns"],function(e){return require.define=define,e.attach("intg.rjs",require)}),define("skylark-rjs/lang",[],function(){"use strict";var e,t,n=Object.prototype.hasOwnProperty;function i(e,t){return n.call(e,t)}return t=function(){return!1},"undefined"!=typeof java&&java.lang&&java.lang.Object&&"undefined"!=typeof importPackage&&(t=function(e){return e instanceof java.lang.Object}),e={backSlashRegExp:/\\/g,ostring:Object.prototype.toString,isArray:Array.isArray||function(t){return"[object Array]"===e.ostring.call(t)},isFunction:function(t){return"[object Function]"===e.ostring.call(t)},isRegExp:function(e){return e&&e instanceof RegExp},hasProp:i,falseProp:function(e,t){return!i(e,t)||!e[t]},getOwn:function(e,t){return i(e,t)&&e[t]},_mixin:function(e,t,n){var i;for(i in t)!t.hasOwnProperty(i)||!n&&e.hasOwnProperty(i)||(e[i]=t[i]);return e},mixin:function(t){var n,i,r,s=Array.prototype.slice.call(arguments);for(t||(t={}),s.length>2&&"boolean"==typeof arguments[s.length-1]&&(n=s.pop()),i=1,r=s.length;i<r;i++)e._mixin(t,s[i],n);return t},deepMix:function(t,n){return e.eachProp(n,function(n,i){"object"!=typeof n||!n||e.isArray(n)||e.isFunction(n)||n instanceof RegExp?t[i]=n:(t[i]||(t[i]={}),e.deepMix(t[i],n))}),t},deeplikeCopy:function(n,r){var s,o;return e.isArray(n)?(o=[],n.forEach(function(t){o.push(e.deeplikeCopy(t,r))}),o):(s=typeof n,null===n||void 0===n||"boolean"===s||"string"===s||"number"===s||e.isFunction(n)||e.isRegExp(n)||t(n)?n:(o={},e.eachProp(n,function(t,n){r&&i(r,n)||(o[n]=e.deeplikeCopy(t,r))}),o))},delegate:function(){function t(){}return function(n,i){t.prototype=n;var r=new t;return t.prototype=null,i&&e.mixin(r,i),r}}(),each:function(e,t){var n;if(e)for(n=0;n<e.length&&!t(e[n],n,e);n+=1);},eachProp:function(e,t){var n;for(n in e)if(i(e,n)&&t(e[n],n))break},bind:function(e,t){return function(){return t.apply(e,arguments)}},jsEscape:function(e){return e.replace(/(["'\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}}}),define("skylark-rjs/prim",[],function(){"use strict";var e=Object.prototype,t=e.hasOwnProperty;function n(e,n){return t.call(e,n)}function i(e,t){var n;if(e)for(n=0;n<e.length;n+=1)e[n]&&t(e[n],n,e)}function r(e){if(n(e,"e")||n(e,"v")){if(!o.hideResolutionConflict)throw new Error("Prim promise already resolved: "+JSON.stringify(e));return!1}return!0}function s(e,t){o.nextTick(function(){i(e,function(e){e(t)})})}function o(){var e,t=[],i=[];return e={callback:function(i,r){r&&e.errback(r),n(e,"v")?o.nextTick(function(){i(e.v)}):t.push(i)},errback:function(t){n(e,"e")?o.nextTick(function(){t(e.e)}):i.push(t)},finished:function(){return n(e,"e")||n(e,"v")},rejected:function(){return n(e,"e")},resolve:function(n){return r(e)&&(e.v=n,s(t,n)),e},reject:function(t){return r(e)&&(e.e=t,s(i,t)),e},start:function(t){return e.resolve(),e.promise.then(t)},promise:{then:function(t,n){var i=o();return e.callback(function(e){try{t&&"function"==typeof t&&(e=t(e)),e&&e.then?e.then(i.resolve,i.reject):i.resolve(e)}catch(e){i.reject(e)}},function(e){var t;try{n&&"function"==typeof n?(t=n(e))&&t.then?t.then(i.resolve,i.reject):i.resolve(t):i.reject(e)}catch(e){i.reject(e)}}),i.promise},fail:function(t){return e.promise.then(null,t)},end:function(){e.errback(function(e){throw e})}}}}return o.serial=function(e){var t=o().resolve().promise;return i(e,function(e){t=t.then(function(){return e()})}),t},o.nextTick="function"==typeof setImmediate?setImmediate:"undefined"!=typeof process&&process.nextTick?process.nextTick:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(e){e()},o}),define("skylark-rjs/logger",[],function(){var e={TRACE:0,INFO:1,WARN:2,ERROR:3,SILENT:4,level:0,logPrefix:"",logLevel:function(e){this.level=e},trace:function(e){this.level<=this.TRACE&&this._print(e)},info:function(e){this.level<=this.INFO&&this._print(e)},warn:function(e){this.level<=this.WARN&&this._print(e)},error:function(e){this.level<=this.ERROR&&this._print(e)},_print:function(e){this._sysPrint((this.logPrefix?this.logPrefix+" ":"")+e)},_sysPrint:function(e){var t,n;t=e,console.log(t,n)}};return e}),define("skylark-acorn/generated/astralIdentifierCodes",[],function(){"use strict";return[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239]}),define("skylark-acorn/generated/astralIdentifierStartCodes",[],function(){"use strict";return[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191]}),define("skylark-acorn/generated/nonASCIIidentifierChars",[],function(){"use strict";return"‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿"}),define("skylark-acorn/generated/nonASCIIidentifierStartChars",[],function(){"use strict";return"ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ"}),define("skylark-acorn/identifier",["./generated/astralIdentifierCodes","./generated/astralIdentifierStartCodes","./generated/nonASCIIidentifierChars","./generated/nonASCIIidentifierStartChars"],function(e,t,n,i){"use strict";const r="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",s={5:r,"5module":r+" export import",6:r+" const class extends export import super"},o=new RegExp("["+i+"]"),a=new RegExp("["+i+n+"]");function c(e,t){let n=65536;for(let i=0;i<t.length;i+=2){if((n+=t[i])>e)return!1;if((n+=t[i+1])>=e)return!0}return!1}return{reservedWords:{3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},keywords:s,keywordRelationalOperator:/^in(stanceof)?$/,isIdentifierStart:function(e,n){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&o.test(String.fromCharCode(e)):!1!==n&&c(e,t)))},isIdentifierChar:function(n,i){return n<48?36===n:n<58||!(n<65)&&(n<91||(n<97?95===n:n<123||(n<=65535?n>=170&&a.test(String.fromCharCode(n)):!1!==i&&(c(n,t)||c(n,e)))))}}}),define("skylark-acorn/tokentype",[],function(){"use strict";class e{constructor(e,t={}){this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null}}function t(t,n){return new e(t,{beforeExpr:!0,binop:n})}const n={beforeExpr:!0},i={startsExpr:!0},r={};function s(t,n={}){return n.keyword=t,r[t]=new e(t,n)}const o={num:new e("num",i),regexp:new e("regexp",i),string:new e("string",i),name:new e("name",i),privateId:new e("privateId",i),eof:new e("eof"),bracketL:new e("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new e("]"),braceL:new e("{",{beforeExpr:!0,startsExpr:!0}),braceR:new e("}"),parenL:new e("(",{beforeExpr:!0,startsExpr:!0}),parenR:new e(")"),comma:new e(",",n),semi:new e(";",n),colon:new e(":",n),dot:new e("."),question:new e("?",n),questionDot:new e("?."),arrow:new e("=>",n),template:new e("template"),invalidTemplate:new e("invalidTemplate"),ellipsis:new e("...",n),backQuote:new e("`",i),dollarBraceL:new e("${",{beforeExpr:!0,startsExpr:!0}),eq:new e("=",{beforeExpr:!0,isAssign:!0}),assign:new e("_=",{beforeExpr:!0,isAssign:!0}),incDec:new e("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new e("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:t("||",1),logicalAND:t("&&",2),bitwiseOR:t("|",3),bitwiseXOR:t("^",4),bitwiseAND:t("&",5),equality:t("==/!=/===/!==",6),relational:t("</>/<=/>=",7),bitShift:t("<</>>/>>>",8),plusMin:new e("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:t("%",10),star:t("*",10),slash:t("/",10),starstar:new e("**",{beforeExpr:!0}),coalesce:t("??",1),_break:s("break"),_case:s("case",n),_catch:s("catch"),_continue:s("continue"),_debugger:s("debugger"),_default:s("default",n),_do:s("do",{isLoop:!0,beforeExpr:!0}),_else:s("else",n),_finally:s("finally"),_for:s("for",{isLoop:!0}),_function:s("function",i),_if:s("if"),_return:s("return",n),_switch:s("switch"),_throw:s("throw",n),_try:s("try"),_var:s("var"),_const:s("const"),_while:s("while",{isLoop:!0}),_with:s("with"),_new:s("new",{beforeExpr:!0,startsExpr:!0}),_this:s("this",i),_super:s("super",i),_class:s("class",i),_extends:s("extends",n),_export:s("export"),_import:s("import",i),_null:s("null",i),_true:s("true",i),_false:s("false",i),_in:s("in",{beforeExpr:!0,binop:7}),_instanceof:s("instanceof",{beforeExpr:!0,binop:7}),_typeof:s("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:s("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:s("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})};return{TokenType:e,keywords:r,types:o}}),define("skylark-acorn/whitespace",[],function(){"use strict";const e=/\r\n?|\n|\u2028|\u2029/,t=new RegExp(e.source,"g");function n(e){return 10===e||13===e||8232===e||8233===e}return{lineBreak:e,lineBreakG:t,isNewLine:n,nextLineBreak:function(e,t,i=e.length){for(let r=t;r<i;r++){let t=e.charCodeAt(r);if(n(t))return r<i-1&&13===t&&10===e.charCodeAt(r+1)?r+2:r+1}return-1},nonASCIIwhitespace:/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,skipWhiteSpace:/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g}}),define("skylark-acorn/util",[],function(){"use strict";const{hasOwnProperty:e,toString:t}=Object.prototype,n=Object.hasOwn||((t,n)=>e.call(t,n)),i=Array.isArray||(e=>"[object Array]"===t.call(e));return{hasOwn:n,isArray:i,wordsRegexp:function(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")},codePointToString:function(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))},loneSurrogate:/[\uD800-\uDFFF]/u}}),define("skylark-acorn/locutil",["./whitespace"],function(e){"use strict";const{nextLineBreak:t}=e;class n{constructor(e,t){this.line=e,this.column=t}offset(e){return new n(this.line,this.column+e)}}return{Position:n,SourceLocation:class{constructor(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)}},getLineInfo:function(e,i){for(let r=1,s=0;;){let o=t(e,s,i);if(o<0)return new n(r,i-s);++r,s=o}}}}),define("skylark-acorn/options",["./util","./locutil"],function(e,t){"use strict";const{hasOwn:n,isArray:i}=e,{SourceLocation:r}=t,s={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};let o=!1;return{defaultOptions:s,getOptions:function(e){let t={};for(let i in s)t[i]=e&&n(e,i)?e[i]:s[i];"latest"===t.ecmaVersion?t.ecmaVersion=1e8:null==t.ecmaVersion?(!o&&"object"==typeof console&&console.warn&&(o=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009);null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5);e&&null!=e.allowHashBang||(t.allowHashBang=t.ecmaVersion>=14);if(i(t.onToken)){let e=t.onToken;t.onToken=(t=>e.push(t))}i(t.onComment)&&(t.onComment=function(e,t){return function(n,i,s,o,a,c){let u={type:n?"Block":"Line",value:i,start:s,end:o};e.locations&&(u.loc=new r(this,a,c)),e.ranges&&(u.range=[s,o]),t.push(u)}}(t,t.onComment));return t}}}),define("skylark-acorn/scopeflags",[],function(){"use strict";const e=2,t=4,n=8,i=257|e;return{SCOPE_TOP:1,SCOPE_FUNCTION:e,SCOPE_ASYNC:t,SCOPE_GENERATOR:n,SCOPE_ARROW:16,SCOPE_SIMPLE_CATCH:32,SCOPE_SUPER:64,SCOPE_DIRECT_SUPER:128,SCOPE_CLASS_STATIC_BLOCK:256,SCOPE_VAR:i,functionFlags:function(i,r){return e|(i?t:0)|(r?n:0)},BIND_NONE:0,BIND_VAR:1,BIND_LEXICAL:2,BIND_FUNCTION:3,BIND_SIMPLE_CATCH:4,BIND_OUTSIDE:5}}),define("skylark-acorn/state",["./identifier","./tokentype","./whitespace","./options","./util","./scopeflags"],function(e,t,n,i,r,s){"use strict";const{reservedWords:o,keywords:a}=e,{types:c}=t,{lineBreak:u}=n,{getOptions:f}=i,{wordsRegexp:l}=r,{SCOPE_TOP:p,SCOPE_FUNCTION:h,SCOPE_ASYNC:d,SCOPE_GENERATOR:m,SCOPE_SUPER:g,SCOPE_DIRECT_SUPER:_,SCOPE_CLASS_STATIC_BLOCK:v}=s;return{Parser:class{constructor(e,t,n){this.options=e=f(e),this.sourceFile=e.sourceFile,this.keywords=l(a[e.ecmaVersion>=6?6:"module"===e.sourceType?"5module":5]);let i="";!0!==e.allowReserved&&(i=o[e.ecmaVersion>=6?6:5===e.ecmaVersion?5:3],"module"===e.sourceType&&(i+=" await")),this.reservedWords=l(i);let r=(i?i+" ":"")+o.strict;this.reservedWordsStrict=l(r),this.reservedWordsStrictBind=l(r+" "+o.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(u).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=c.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(p),this.regexpState=null,this.privateNameStack=[]}parse(){let e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)}get inFunction(){return(this.currentVarScope().flags&h)>0}get inGenerator(){return(this.currentVarScope().flags&m)>0&&!this.currentVarScope().inClassFieldInit}get inAsync(){return(this.currentVarScope().flags&d)>0&&!this.currentVarScope().inClassFieldInit}get canAwait(){for(let e=this.scopeStack.length-1;e>=0;e--){let t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&v)return!1;if(t.flags&h)return(t.flags&d)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction}get allowSuper(){const{flags:e,inClassFieldInit:t}=this.currentThisScope();return(e&g)>0||t||this.options.allowSuperOutsideMethod}get allowDirectSuper(){return(this.currentThisScope().flags&_)>0}get treatFunctionsAsVar(){return this.treatFunctionsAsVarInScope(this.currentScope())}get allowNewDotTarget(){const{flags:e,inClassFieldInit:t}=this.currentThisScope();return(e&(h|v))>0||t}get inClassStaticBlock(){return(this.currentVarScope().flags&v)>0}static extend(...e){let t=this;for(let n=0;n<e.length;n++)t=e[n](t);return t}static parse(e,t){return new this(t,e).parse()}static parseExpressionAt(e,t,n){let i=new this(n,e,t);return i.nextToken(),i.parseExpression()}static tokenizer(e,t){return new this(t,e)}}}}),define("skylark-acorn/parseutil",["./tokentype","./state","./whitespace"],function(e,t,n){"use strict";const{types:i}=e,{Parser:r}=t,{lineBreak:s,skipWhiteSpace:o}=n,a=r.prototype,c=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;a.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){o.lastIndex=e,e+=o.exec(this.input)[0].length;let t=c.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2])){o.lastIndex=e+t[0].length;let n=o.exec(this.input),i=n.index+n[0].length,r=this.input.charAt(i);return";"===r||"}"===r||s.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(r)||"!"===r&&"="===this.input.charAt(i+1))}e+=t[0].length,o.lastIndex=e,e+=o.exec(this.input)[0].length,";"===this.input[e]&&e++}},a.eat=function(e){return this.type===e&&(this.next(),!0)},a.isContextual=function(e){return this.type===i.name&&this.value===e&&!this.containsEsc},a.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},a.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},a.canInsertSemicolon=function(){return this.type===i.eof||this.type===i.braceR||s.test(this.input.slice(this.lastTokEnd,this.start))},a.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},a.semicolon=function(){this.eat(i.semi)||this.insertSemicolon()||this.unexpected()},a.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},a.expect=function(e){this.eat(e)||this.unexpected()},a.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")};return a.checkPatternErrors=function(e,t){if(!e)return;e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");let n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")},a.checkExpressionErrors=function(e,t){if(!e)return!1;let{shorthandAssign:n,doubleProto:i}=e;if(!t)return n>=0||i>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")},a.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},a.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type},{DestructuringErrors:class{constructor(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}}}}),define("skylark-acorn/statement",["./tokentype","./state","./whitespace","./identifier","./util","./parseutil","./scopeflags"],function(e,t,n,i,r,s,o){"use strict";const{types:a}=e,{Parser:c}=t,{lineBreak:u,skipWhiteSpace:f}=n,{isIdentifierStart:l,isIdentifierChar:p,keywordRelationalOperator:h}=i,{hasOwn:d,loneSurrogate:m}=r,{DestructuringErrors:g}=s,{functionFlags:_,SCOPE_SIMPLE_CATCH:v,BIND_SIMPLE_CATCH:y,BIND_LEXICAL:b,BIND_VAR:x,BIND_FUNCTION:w,SCOPE_CLASS_STATIC_BLOCK:S,SCOPE_SUPER:k}=o,A=c.prototype;A.parseTopLevel=function(e){let exports=Object.create(null);for(e.body||(e.body=[]);this.type!==a.eof;){let t=this.parseStatement(null,!0,exports);e.body.push(t)}if(this.inModule)for(let e of Object.keys(this.undefinedExports))this.raiseRecoverable(this.undefinedExports[e].start,`Export '${e}' is not defined`);return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};const T={kind:"loop"},E={kind:"switch"};A.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;f.lastIndex=this.pos;let t=f.exec(this.input),n=this.pos+t[0].length,i=this.input.charCodeAt(n);if(91===i||92===i)return!0;if(e)return!1;if(123===i||i>55295&&i<56320)return!0;if(l(i,!0)){let e=n+1;for(;p(i=this.input.charCodeAt(e),!0);)++e;if(92===i||i>55295&&i<56320)return!0;let t=this.input.slice(n,e);if(!h.test(t))return!0}return!1},A.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;f.lastIndex=this.pos;let e,t=f.exec(this.input),n=this.pos+t[0].length;return!(u.test(this.input.slice(this.pos,n))||"function"!==this.input.slice(n,n+8)||n+8!==this.input.length&&(p(e=this.input.charCodeAt(n+8))||e>55295&&e<56320))},A.parseStatement=function(e,t,exports){let n,i=this.type,r=this.startNode();switch(this.isLet(e)&&(i=a._var,n="let"),i){case a._break:case a._continue:return this.parseBreakContinueStatement(r,i.keyword);case a._debugger:return this.parseDebuggerStatement(r);case a._do:return this.parseDoStatement(r);case a._for:return this.parseForStatement(r);case a._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(r,!1,!e);case a._class:return e&&this.unexpected(),this.parseClass(r,!0);case a._if:return this.parseIfStatement(r);case a._return:return this.parseReturnStatement(r);case a._switch:return this.parseSwitchStatement(r);case a._throw:return this.parseThrowStatement(r);case a._try:return this.parseTryStatement(r);case a._const:case a._var:return n=n||this.value,e&&"var"!==n&&this.unexpected(),this.parseVarStatement(r,n);case a._while:return this.parseWhileStatement(r);case a._with:return this.parseWithStatement(r);case a.braceL:return this.parseBlock(!0,r);case a.semi:return this.parseEmptyStatement(r);case a._export:case a._import:if(this.options.ecmaVersion>10&&i===a._import){f.lastIndex=this.pos;let e=f.exec(this.input),t=this.pos+e[0].length,n=this.input.charCodeAt(t);if(40===n||46===n)return this.parseExpressionStatement(r,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===a._import?this.parseImport(r):this.parseExport(r,exports);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(r,!0,!e);let s=this.value,o=this.parseExpression();return i===a.name&&"Identifier"===o.type&&this.eat(a.colon)?this.parseLabeledStatement(r,s,o,e):this.parseExpressionStatement(r,o)}},A.parseBreakContinueStatement=function(e,t){let n="break"===t;this.next(),this.eat(a.semi)||this.insertSemicolon()?e.label=null:this.type!==a.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());let i=0;for(;i<this.labels.length;++i){let t=this.labels[i];if(null==e.label||t.name===e.label.name){if(null!=t.kind&&(n||"loop"===t.kind))break;if(e.label&&n)break}}return i===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},A.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},A.parseDoStatement=function(e){return this.next(),this.labels.push(T),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(a._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(a.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},A.parseForStatement=function(e){this.next();let t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(T),this.enterScope(0),this.expect(a.parenL),this.type===a.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);let n=this.isLet();if(this.type===a._var||this.type===a._const||n){let i=this.startNode(),r=n?"let":this.value;return this.next(),this.parseVar(i,!0,r),this.finishNode(i,"VariableDeclaration"),(this.type===a._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===i.declarations.length?(this.options.ecmaVersion>=9&&(this.type===a._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,i)):(t>-1&&this.unexpected(t),this.parseFor(e,i))}let i=this.isContextual("let"),r=!1,s=new g,o=this.parseExpression(!(t>-1)||"await",s);return this.type===a._in||(r=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===a._in?t>-1&&this.unexpected(t):e.await=t>-1),i&&r&&this.raise(o.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(o,!1,s),this.checkLValPattern(o),this.parseForIn(e,o)):(this.checkExpressionErrors(s,!0),t>-1&&this.unexpected(t),this.parseFor(e,o))},A.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,P|(n?0:O),!1,t)},A.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(a._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},A.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(a.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},A.parseSwitchStatement=function(e){let t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(a.braceL),this.labels.push(E),this.enterScope(0);for(let n=!1;this.type!==a.braceR;)if(this.type===a._case||this.type===a._default){let i=this.type===a._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),i?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(a.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},A.parseThrowStatement=function(e){return this.next(),u.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};const C=[];A.parseCatchClauseParam=function(){const e=this.parseBindingAtom();let t="Identifier"===e.type;return this.enterScope(t?v:0),this.checkLValPattern(e,t?y:b),this.expect(a.parenR),e},A.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===a._catch){let t=this.startNode();this.next(),this.eat(a.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(a._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},A.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")},A.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(T),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},A.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},A.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},A.parseLabeledStatement=function(e,t,n,i){for(let e of this.labels)e.name===t&&this.raise(n.start,"Label '"+t+"' is already declared");let r=this.type.isLoop?"loop":this.type===a._switch?"switch":null;for(let t=this.labels.length-1;t>=0;t--){let n=this.labels[t];if(n.statementStart!==e.start)break;n.statementStart=this.start,n.kind=r}return this.labels.push({name:t,kind:r,statementStart:this.start}),e.body=this.parseStatement(i?-1===i.indexOf("label")?i+"label":i:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},A.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},A.parseBlock=function(e=!0,t=this.startNode(),n){for(t.body=[],this.expect(a.braceL),e&&this.enterScope(0);this.type!==a.braceR;){let e=this.parseStatement(null);t.body.push(e)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")},A.parseFor=function(e,t){return e.init=t,this.expect(a.semi),e.test=this.type===a.semi?null:this.parseExpression(),this.expect(a.semi),e.update=this.type===a.parenR?null:this.parseExpression(),this.expect(a.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},A.parseForIn=function(e,t){const n=this.type===a._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)&&this.raise(t.start,`${n?"for-in":"for-of"} loop variable declaration may not have an initializer`),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(a.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")},A.parseVar=function(e,t,n,i){for(e.declarations=[],e.kind=n;;){let r=this.startNode();if(this.parseVarId(r,n),this.eat(a.eq)?r.init=this.parseMaybeAssign(t):i||"const"!==n||this.type===a._in||this.options.ecmaVersion>=6&&this.isContextual("of")?i||"Identifier"===r.id.type||t&&(this.type===a._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(a.comma))break}return e},A.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,"var"===t?x:b,!1)};const P=1,O=2;function D(e,t){const n=t.key.name,i=e[n];let r="true";return"MethodDefinition"!==t.type||"get"!==t.kind&&"set"!==t.kind||(r=(t.static?"s":"i")+t.kind),"iget"===i&&"iset"===r||"iset"===i&&"iget"===r||"sget"===i&&"sset"===r||"sset"===i&&"sget"===r?(e[n]="true",!1):!!i||(e[n]=r,!1)}function I(e,t){const{computed:n,key:i}=e;return!n&&("Identifier"===i.type&&i.name===t||"Literal"===i.type&&i.value===t)}A.parseFunction=function(e,t,n,i,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===a.star&&t&O&&this.unexpected(),e.generator=this.eat(a.star)),this.options.ecmaVersion>=8&&(e.async=!!i),t&P&&(e.id=4&t&&this.type!==a.name?null:this.parseIdent(),!e.id||t&O||this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?x:b:w));let s=this.yieldPos,o=this.awaitPos,c=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(_(e.async,e.generator)),t&P||(e.id=this.type===a.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,r),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=c,this.finishNode(e,t&P?"FunctionDeclaration":"FunctionExpression")},A.parseFunctionParams=function(e){this.expect(a.parenL),e.params=this.parseBindingList(a.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},A.parseClass=function(e,t){this.next();const n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);const i=this.enterClassBody(),r=this.startNode();let s=!1;for(r.body=[],this.expect(a.braceL);this.type!==a.braceR;){const t=this.parseClassElement(null!==e.superClass);t&&(r.body.push(t),"MethodDefinition"===t.type&&"constructor"===t.kind?(s&&this.raiseRecoverable(t.start,"Duplicate constructor in the same class"),s=!0):t.key&&"PrivateIdentifier"===t.key.type&&D(i,t)&&this.raiseRecoverable(t.key.start,`Identifier '#${t.key.name}' has already been declared`))}return this.strict=n,this.next(),e.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},A.parseClassElement=function(e){if(this.eat(a.semi))return null;const t=this.options.ecmaVersion,n=this.startNode();let i="",r=!1,s=!1,o="method",c=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(a.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===a.star?c=!0:i="static"}if(n.static=c,!i&&t>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==a.star||this.canInsertSemicolon()?i="async":s=!0),!i&&(t>=9||!s)&&this.eat(a.star)&&(r=!0),!i&&!s&&!r){const e=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=e:i=e)}if(i?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=i,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===a.parenL||"method"!==o||r||s){const t=!n.static&&I(n,"constructor"),i=t&&e;t&&"method"!==o&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=t?"constructor":o,this.parseClassMethod(n,r,s,i)}else this.parseClassField(n);return n},A.isClassElementNameStart=function(){return this.type===a.name||this.type===a.privateId||this.type===a.num||this.type===a.string||this.type===a.bracketL||this.type.keyword},A.parseClassElementName=function(e){this.type===a.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)},A.parseClassMethod=function(e,t,n,i){const r=e.key;"constructor"===e.kind?(t&&this.raise(r.start,"Constructor can't be a generator"),n&&this.raise(r.start,"Constructor can't be an async method")):e.static&&I(e,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype");const s=e.value=this.parseMethod(t,n,i);return"get"===e.kind&&0!==s.params.length&&this.raiseRecoverable(s.start,"getter should have no params"),"set"===e.kind&&1!==s.params.length&&this.raiseRecoverable(s.start,"setter should have exactly one param"),"set"===e.kind&&"RestElement"===s.params[0].type&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")},A.parseClassField=function(e){if(I(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&I(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(a.eq)){const t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")},A.parseClassStaticBlock=function(e){e.body=[];let t=this.labels;for(this.labels=[],this.enterScope(S|k);this.type!==a.braceR;){let t=this.parseStatement(null);e.body.push(t)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")},A.parseClassId=function(e,t){this.type===a.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,b,!1)):(!0===t&&this.unexpected(),e.id=null)},A.parseClassSuper=function(e){e.superClass=this.eat(a._extends)?this.parseExprSubscripts(null,!1):null},A.enterClassBody=function(){const e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared},A.exitClassBody=function(){const{declared:e,used:t}=this.privateNameStack.pop();if(!this.options.checkPrivateFields)return;const n=this.privateNameStack.length,i=0===n?null:this.privateNameStack[n-1];for(let n=0;n<t.length;++n){const r=t[n];d(e,r.name)||(i?i.used.push(r):this.raiseRecoverable(r.start,`Private field '#${r.name}' must be declared in an enclosing class`))}},A.parseExportAllDeclaration=function(e,exports){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(exports,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==a.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")},A.parseExport=function(e,exports){if(this.next(),this.eat(a.star))return this.parseExportAllDeclaration(e,exports);if(this.eat(a._default))return this.checkExport(exports,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(exports,e.declaration.declarations):this.checkExport(exports,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(exports),this.eatContextual("from"))this.type!==a.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(let t of e.specifiers)this.checkUnreserved(t.local),this.checkLocalExport(t.local),"Literal"===t.local.type&&this.raise(t.local.start,"A string literal cannot be used as an exported binding without `from`.");e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},A.parseExportDeclaration=function(e){return this.parseStatement(null)},A.parseExportDefaultDeclaration=function(){let e;if(this.type===a._function||(e=this.isAsyncFunction())){let t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,4|P,!1,e)}if(this.type===a._class){let e=this.startNode();return this.parseClass(e,"nullableID")}{let e=this.parseMaybeAssign();return this.semicolon(),e}},A.checkExport=function(exports,e,t){exports&&("string"!=typeof e&&(e="Identifier"===e.type?e.name:e.value),d(exports,e)&&this.raiseRecoverable(t,"Duplicate export '"+e+"'"),exports[e]=!0)},A.checkPatternExport=function(exports,e){let t=e.type;if("Identifier"===t)this.checkExport(exports,e,e.start);else if("ObjectPattern"===t)for(let t of e.properties)this.checkPatternExport(exports,t);else if("ArrayPattern"===t)for(let t of e.elements)t&&this.checkPatternExport(exports,t);else"Property"===t?this.checkPatternExport(exports,e.value):"AssignmentPattern"===t?this.checkPatternExport(exports,e.left):"RestElement"===t?this.checkPatternExport(exports,e.argument):"ParenthesizedExpression"===t&&this.checkPatternExport(exports,e.expression)},A.checkVariableExport=function(exports,e){if(exports)for(let t of e)this.checkPatternExport(exports,t.id)},A.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},A.parseExportSpecifier=function(exports){let e=this.startNode();return e.local=this.parseModuleExportName(),e.exported=this.eatContextual("as")?this.parseModuleExportName():e.local,this.checkExport(exports,e.exported,e.exported.start),this.finishNode(e,"ExportSpecifier")},A.parseExportSpecifiers=function(exports){let e=[],t=!0;for(this.expect(a.braceL);!this.eat(a.braceR);){if(t)t=!1;else if(this.expect(a.comma),this.afterTrailingComma(a.braceR))break;e.push(this.parseExportSpecifier(exports))}return e},A.parseImport=function(e){return this.next(),this.type===a.string?(e.specifiers=C,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===a.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},A.parseImportSpecifier=function(){let e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,b),this.finishNode(e,"ImportSpecifier")},A.parseImportDefaultSpecifier=function(){let e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,b),this.finishNode(e,"ImportDefaultSpecifier")},A.parseImportNamespaceSpecifier=function(){let e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,b),this.finishNode(e,"ImportNamespaceSpecifier")},A.parseImportSpecifiers=function(){let e=[],t=!0;if(this.type===a.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(a.comma)))return e;if(this.type===a.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(a.braceL);!this.eat(a.braceR);){if(t)t=!1;else if(this.expect(a.comma),this.afterTrailingComma(a.braceR))break;e.push(this.parseImportSpecifier())}return e},A.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===a.string){const e=this.parseLiteral(this.value);return m.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)},A.adaptDirectivePrologue=function(e){for(let t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},A.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])}}),define("skylark-acorn/lval",["./tokentype","./state","./util","./scopeflags"],function(e,t,n,i){"use strict";const{types:r}=e,{Parser:s}=t,{hasOwn:o}=n,{BIND_NONE:a,BIND_OUTSIDE:c,BIND_LEXICAL:u}=i,f=s.prototype;f.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(let n of e.properties)this.toAssignable(n,t),"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token");break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},f.toAssignableList=function(e,t){let n=e.length;for(let i=0;i<n;i++){let n=e[i];n&&this.toAssignable(n,t)}if(n){let i=e[n-1];6===this.options.ecmaVersion&&t&&i&&"RestElement"===i.type&&"Identifier"!==i.argument.type&&this.unexpected(i.argument.start)}return e},f.parseSpread=function(e){let t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},f.parseRestBinding=function(){let e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==r.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},f.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case r.bracketL:let e=this.startNode();return this.next(),e.elements=this.parseBindingList(r.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case r.braceL:return this.parseObj(!0)}return this.parseIdent()},f.parseBindingList=function(e,t,n,i){let s=[],o=!0;for(;!this.eat(e);)if(o?o=!1:this.expect(r.comma),t&&this.type===r.comma)s.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===r.ellipsis){let t=this.parseRestBinding();this.parseBindingListItem(t),s.push(t),this.type===r.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}s.push(this.parseAssignableListItem(i))}return s},f.parseAssignableListItem=function(e){let t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t},f.parseBindingListItem=function(e){return e},f.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(r.eq))return n;let i=this.startNodeAt(e,t);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")},f.checkLValSimple=function(e,t=a,n){const i=t!==a;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(i?"Binding ":"Assigning to ")+e.name+" in strict mode"),i&&(t===u&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(o(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==c&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(i?"Binding":"Assigning to")+" rvalue")}},f.checkLValPattern=function(e,t=a,n){switch(e.type){case"ObjectPattern":for(let i of e.properties)this.checkLValInnerPattern(i,t,n);break;case"ArrayPattern":for(let i of e.elements)i&&this.checkLValInnerPattern(i,t,n);break;default:this.checkLValSimple(e,t,n)}},f.checkLValInnerPattern=function(e,t=a,n){switch(e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}}}),define("skylark-acorn/tokencontext",["./state","./tokentype","./whitespace"],function(e,t,n){"use strict";const{Parser:i}=e,{types:r}=t,{lineBreak:s}=n;class o{constructor(e,t,n,i,r){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=i,this.generator=!!r}}const a={b_stat:new o("{",!1),b_expr:new o("{",!0),b_tmpl:new o("${",!1),p_stat:new o("(",!1),p_expr:new o("(",!0),q_tmpl:new o("`",!0,!0,e=>e.tryReadTemplateToken()),f_stat:new o("function",!1),f_expr:new o("function",!0),f_expr_gen:new o("function",!0,!1,null,!0),f_gen:new o("function",!1,!1,null,!0)},c=i.prototype;return c.initialContext=function(){return[a.b_stat]},c.curContext=function(){return this.context[this.context.length-1]},c.braceIsBlock=function(e){let t=this.curContext();return t===a.f_expr||t===a.f_stat||(e!==r.colon||t!==a.b_stat&&t!==a.b_expr?e===r._return||e===r.name&&this.exprAllowed?s.test(this.input.slice(this.lastTokEnd,this.start)):e===r._else||e===r.semi||e===r.eof||e===r.parenR||e===r.arrow||(e===r.braceL?t===a.b_stat:e!==r._var&&e!==r._const&&e!==r.name&&!this.exprAllowed):!t.isExpr)},c.inGeneratorContext=function(){for(let e=this.context.length-1;e>=1;e--){let t=this.context[e];if("function"===t.token)return t.generator}return!1},c.updateContext=function(e){let t,n=this.type;n.keyword&&e===r.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},c.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)},r.parenR.updateContext=r.braceR.updateContext=function(){if(1===this.context.length)return void(this.exprAllowed=!0);let e=this.context.pop();e===a.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr},r.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?a.b_stat:a.b_expr),this.exprAllowed=!0},r.dollarBraceL.updateContext=function(){this.context.push(a.b_tmpl),this.exprAllowed=!0},r.parenL.updateContext=function(e){let t=e===r._if||e===r._for||e===r._with||e===r._while;this.context.push(t?a.p_stat:a.p_expr),this.exprAllowed=!0},r.incDec.updateContext=function(){},r._function.updateContext=r._class.updateContext=function(e){!e.beforeExpr||e===r._else||e===r.semi&&this.curContext()!==a.p_stat||e===r._return&&s.test(this.input.slice(this.lastTokEnd,this.start))||(e===r.colon||e===r.braceL)&&this.curContext()===a.b_stat?this.context.push(a.f_stat):this.context.push(a.f_expr),this.exprAllowed=!1},r.backQuote.updateContext=function(){this.curContext()===a.q_tmpl?this.context.pop():this.context.push(a.q_tmpl),this.exprAllowed=!1},r.star.updateContext=function(e){if(e===r._function){let e=this.context.length-1;this.context[e]===a.f_expr?this.context[e]=a.f_expr_gen:this.context[e]=a.f_gen}this.exprAllowed=!0},r.name.updateContext=function(e){let t=!1;this.options.ecmaVersion>=6&&e!==r.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t},{TokContext:o,types:a}}),define("skylark-acorn/expression",["./tokentype","./tokencontext","./state","./parseutil","./whitespace","./scopeflags"],function(e,t,n,i,r,s){"use strict";const{types:o}=e,{types:a}=t,{Parser:c}=n,{DestructuringErrors:u}=i,{lineBreak:f}=r,{functionFlags:l,SCOPE_ARROW:p,SCOPE_SUPER:h,SCOPE_DIRECT_SUPER:d,BIND_OUTSIDE:m,BIND_VAR:g}=s,_=c.prototype;_.checkPropClash=function(e,t,n){if(this.options.ecmaVersion>=9&&"SpreadElement"===e.type)return;if(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))return;let i,{key:r}=e;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}let{kind:s}=e;if(this.options.ecmaVersion>=6)return void("__proto__"===i&&"init"===s&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0));let o=t[i="$"+i];if(o){let e;(e="init"===s?this.strict&&o.init||o.get||o.set:o.init||o[s])&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0},_.parseExpression=function(e,t){let n=this.start,i=this.startLoc,r=this.parseMaybeAssign(e,t);if(this.type===o.comma){let s=this.startNodeAt(n,i);for(s.expressions=[r];this.eat(o.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return r},_.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}let i=!1,r=-1,s=-1,a=-1;t?(r=t.parenthesizedAssign,s=t.trailingComma,a=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new u,i=!0);let c=this.start,f=this.startLoc;this.type!==o.parenL&&this.type!==o.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===e);let l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,c,f)),this.type.isAssign){let n=this.startNodeAt(c,f);return n.operator=this.value,this.type===o.eq&&(l=this.toAssignable(l,!1,t)),i||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===o.eq?this.checkLValPattern(l):this.checkLValSimple(l),n.left=l,this.next(),n.right=this.parseMaybeAssign(e),a>-1&&(t.doubleProto=a),this.finishNode(n,"AssignmentExpression")}return i&&this.checkExpressionErrors(t,!0),r>-1&&(t.parenthesizedAssign=r),s>-1&&(t.trailingComma=s),l},_.parseMaybeConditional=function(e,t){let n=this.start,i=this.startLoc,r=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return r;if(this.eat(o.question)){let t=this.startNodeAt(n,i);return t.test=r,t.consequent=this.parseMaybeAssign(),this.expect(o.colon),t.alternate=this.parseMaybeAssign(e),this.finishNode(t,"ConditionalExpression")}return r},_.parseExprOps=function(e,t){let n=this.start,i=this.startLoc,r=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)?r:r.start===n&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,n,i,-1,e)},_.parseExprOp=function(e,t,n,i,r){let s=this.type.binop;if(null!=s&&(!r||this.type!==o._in)&&s>i){let a=this.type===o.logicalOR||this.type===o.logicalAND,c=this.type===o.coalesce;c&&(s=o.logicalAND.binop);let u=this.value;this.next();let f=this.start,l=this.startLoc,p=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),f,l,s,r),h=this.buildBinary(t,n,e,p,u,a||c);return(a&&this.type===o.coalesce||c&&(this.type===o.logicalOR||this.type===o.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(h,t,n,i,r)}return e},_.buildBinary=function(e,t,n,i,r,s){"PrivateIdentifier"===i.type&&this.raise(i.start,"Private identifier can only be left side of binary expression");let o=this.startNodeAt(e,t);return o.left=n,o.operator=r,o.right=i,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")},_.parseMaybeUnary=function(e,t,n,i){let r,s=this.start,a=this.startLoc;if(this.isContextual("await")&&this.canAwait)r=this.parseAwait(i),t=!0;else if(this.type.prefix){let n=this.startNode(),s=this.type===o.incDec;n.operator=this.value,n.prefix=!0,this.next(),n.argument=this.parseMaybeUnary(null,!0,s,i),this.checkExpressionErrors(e,!0),s?this.checkLValSimple(n.argument):this.strict&&"delete"===n.operator&&"Identifier"===n.argument.type?this.raiseRecoverable(n.start,"Deleting local variable in strict mode"):"delete"===n.operator&&function e(t){return"MemberExpression"===t.type&&"PrivateIdentifier"===t.property.type||"ChainExpression"===t.type&&e(t.expression)}(n.argument)?this.raiseRecoverable(n.start,"Private fields can not be deleted"):t=!0,r=this.finishNode(n,s?"UpdateExpression":"UnaryExpression")}else if(t||this.type!==o.privateId){if(r=this.parseExprSubscripts(e,i),this.checkExpressionErrors(e))return r;for(;this.type.postfix&&!this.canInsertSemicolon();){let e=this.startNodeAt(s,a);e.operator=this.value,e.prefix=!1,e.argument=r,this.checkLValSimple(r),this.next(),r=this.finishNode(e,"UpdateExpression")}}else(i||0===this.privateNameStack.length)&&this.options.checkPrivateFields&&this.unexpected(),r=this.parsePrivateIdent(),this.type!==o._in&&this.unexpected();return n||!this.eat(o.starstar)?r:t?void this.unexpected(this.lastTokStart):this.buildBinary(s,a,r,this.parseMaybeUnary(null,!1,!1,i),"**",!1)},_.parseExprSubscripts=function(e,t){let n=this.start,i=this.startLoc,r=this.parseExprAtom(e,t);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;let s=this.parseSubscripts(r,n,i,!1,t);return e&&"MemberExpression"===s.type&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s},_.parseSubscripts=function(e,t,n,i,r){let s=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start==5&&this.potentialArrowAt===e.start,o=!1;for(;;){let a=this.parseSubscript(e,t,n,i,s,o,r);if(a.optional&&(o=!0),a===e||"ArrowFunctionExpression"===a.type){if(o){const e=this.startNodeAt(t,n);e.expression=a,a=this.finishNode(e,"ChainExpression")}return a}e=a}},_.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(o.arrow)},_.parseSubscriptAsyncArrow=function(e,t,n,i){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,i)},_.parseSubscript=function(e,t,n,i,r,s,a){let c=this.options.ecmaVersion>=11,f=c&&this.eat(o.questionDot);i&&f&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");let l=this.eat(o.bracketL);if(l||f&&this.type!==o.parenL&&this.type!==o.backQuote||this.eat(o.dot)){let i=this.startNodeAt(t,n);i.object=e,l?(i.property=this.parseExpression(),this.expect(o.bracketR)):this.type===o.privateId&&"Super"!==e.type?i.property=this.parsePrivateIdent():i.property=this.parseIdent("never"!==this.options.allowReserved),i.computed=!!l,c&&(i.optional=f),e=this.finishNode(i,"MemberExpression")}else if(!i&&this.eat(o.parenL)){let i=new u,s=this.yieldPos,l=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;let h=this.parseExprList(o.parenR,this.options.ecmaVersion>=8,!1,i);if(r&&!f&&this.shouldParseAsyncArrow())return this.checkPatternErrors(i,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=s,this.awaitPos=l,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,h,a);this.checkExpressionErrors(i,!0),this.yieldPos=s||this.yieldPos,this.awaitPos=l||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;let d=this.startNodeAt(t,n);d.callee=e,d.arguments=h,c&&(d.optional=f),e=this.finishNode(d,"CallExpression")}else if(this.type===o.backQuote){(f||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");let i=this.startNodeAt(t,n);i.tag=e,i.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(i,"TaggedTemplateExpression")}return e},_.parseExprAtom=function(e,t,n){this.type===o.slash&&this.readRegexp();let i,r=this.potentialArrowAt===this.start;switch(this.type){case o._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),i=this.startNode(),this.next(),this.type!==o.parenL||this.allowDirectSuper||this.raise(i.start,"super() call outside constructor of a subclass"),this.type!==o.dot&&this.type!==o.bracketL&&this.type!==o.parenL&&this.unexpected(),this.finishNode(i,"Super");case o._this:return i=this.startNode(),this.next(),this.finishNode(i,"ThisExpression");case o.name:let s=this.start,c=this.startLoc,u=this.containsEsc,f=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!u&&"async"===f.name&&!this.canInsertSemicolon()&&this.eat(o._function))return this.overrideContext(a.f_expr),this.parseFunction(this.startNodeAt(s,c),0,!1,!0,t);if(r&&!this.canInsertSemicolon()){if(this.eat(o.arrow))return this.parseArrowExpression(this.startNodeAt(s,c),[f],!1,t);if(this.options.ecmaVersion>=8&&"async"===f.name&&this.type===o.name&&!u&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return f=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(o.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,c),[f],!0,t)}return f;case o.regexp:let l=this.value;return(i=this.parseLiteral(l.value)).regex={pattern:l.pattern,flags:l.flags},i;case o.num:case o.string:return this.parseLiteral(this.value);case o._null:case o._true:case o._false:return(i=this.startNode()).value=this.type===o._null?null:this.type===o._true,i.raw=this.type.keyword,this.next(),this.finishNode(i,"Literal");case o.parenL:let p=this.start,h=this.parseParenAndDistinguishExpression(r,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(h)&&(e.parenthesizedAssign=p),e.parenthesizedBind<0&&(e.parenthesizedBind=p)),h;case o.bracketL:return i=this.startNode(),this.next(),i.elements=this.parseExprList(o.bracketR,!0,!0,e),this.finishNode(i,"ArrayExpression");case o.braceL:return this.overrideContext(a.b_expr),this.parseObj(!1,e);case o._function:return i=this.startNode(),this.next(),this.parseFunction(i,0);case o._class:return this.parseClass(this.startNode(),!1);case o._new:return this.parseNew();case o.backQuote:return this.parseTemplate();case o._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}},_.parseExprAtomDefault=function(){this.unexpected()},_.parseExprImport=function(e){const t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");const n=this.parseIdent(!0);return this.type!==o.parenL||e?this.type===o.dot?(t.meta=n,this.parseImportMeta(t)):void this.unexpected():this.parseDynamicImport(t)},_.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(o.parenR)){const e=this.start;this.eat(o.comma)&&this.eat(o.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(e,"ImportExpression")},_.parseImportMeta=function(e){this.next();const t=this.containsEsc;return e.property=this.parseIdent(!0),"meta"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")},_.parseLiteral=function(e){let t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")},_.parseParenExpression=function(){this.expect(o.parenL);let e=this.parseExpression();return this.expect(o.parenR),e},_.shouldParseArrow=function(e){return!this.canInsertSemicolon()},_.parseParenAndDistinguishExpression=function(e,t){let n,i=this.start,r=this.startLoc,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();let a,c=this.start,f=this.startLoc,l=[],p=!0,h=!1,d=new u,m=this.yieldPos,g=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==o.parenR;){if(p?p=!1:this.expect(o.comma),s&&this.afterTrailingComma(o.parenR,!0)){h=!0;break}if(this.type===o.ellipsis){a=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===o.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,d,this.parseParenItem))}let _=this.lastTokEnd,v=this.lastTokEndLoc;if(this.expect(o.parenR),e&&this.shouldParseArrow(l)&&this.eat(o.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=m,this.awaitPos=g,this.parseParenArrowList(i,r,l,t);l.length&&!h||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(d,!0),this.yieldPos=m||this.yieldPos,this.awaitPos=g||this.awaitPos,l.length>1?((n=this.startNodeAt(c,f)).expressions=l,this.finishNodeAt(n,"SequenceExpression",_,v)):n=l[0]}else n=this.parseParenExpression();if(this.options.preserveParens){let e=this.startNodeAt(i,r);return e.expression=n,this.finishNode(e,"ParenthesizedExpression")}return n},_.parseParenItem=function(e){return e},_.parseParenArrowList=function(e,t,n,i){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,i)};const v=[];_.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");let e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(o.dot)){e.meta=t;let n=this.containsEsc;return e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}let n=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),n,i,!0,!1),this.eat(o.parenL)?e.arguments=this.parseExprList(o.parenR,this.options.ecmaVersion>=8,!1):e.arguments=v,this.finishNode(e,"NewExpression")},_.parseTemplateElement=function({isTagged:e}){let t=this.startNode();return this.type===o.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),t.value={raw:this.value,cooked:null}):t.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),t.tail=this.type===o.backQuote,this.finishNode(t,"TemplateElement")},_.parseTemplate=function({isTagged:e=!1}={}){let t=this.startNode();this.next(),t.expressions=[];let n=this.parseTemplateElement({isTagged:e});for(t.quasis=[n];!n.tail;)this.type===o.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(o.dollarBraceL),t.expressions.push(this.parseExpression()),this.expect(o.braceR),t.quasis.push(n=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(t,"TemplateLiteral")},_.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===o.name||this.type===o.num||this.type===o.string||this.type===o.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===o.star)&&!f.test(this.input.slice(this.lastTokEnd,this.start))},_.parseObj=function(e,t){let n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(o.braceR);){if(i)i=!1;else if(this.expect(o.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(o.braceR))break;const s=this.parseProperty(e,t);e||this.checkPropClash(s,r,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},_.parseProperty=function(e,t){let n,i,r,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(o.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===o.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(a.argument=this.parseMaybeAssign(!1,t),this.type===o.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(r=this.start,s=this.startLoc),e||(n=this.eat(o.star)));let c=this.containsEsc;return this.parsePropertyName(a),!e&&!c&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(i=!0,n=this.options.ecmaVersion>=9&&this.eat(o.star),this.parsePropertyName(a)):i=!1,this.parsePropertyValue(a,e,n,i,r,s,t,c),this.finishNode(a,"Property")},_.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);let t="get"===e.kind?0:1;if(e.value.params.length!==t){let t=e.value.start;"get"===e.kind?this.raiseRecoverable(t,"getter should have no params"):this.raiseRecoverable(t,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")},_.parsePropertyValue=function(e,t,n,i,r,s,a,c){(n||i)&&this.type===o.colon&&this.unexpected(),this.eat(o.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init"):this.options.ecmaVersion>=6&&this.type===o.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,i)):t||c||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===o.comma||this.type===o.braceR||this.type===o.eq?this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((n||i)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=r),e.kind="init",t?e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key)):this.type===o.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected():((n||i)&&this.unexpected(),this.parseGetterSetter(e))},_.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(o.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(o.bracketR),e.key;e.computed=!1}return e.key=this.type===o.num||this.type===o.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},_.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},_.parseMethod=function(e,t,n){let i=this.startNode(),r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=e),this.options.ecmaVersion>=8&&(i.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(l(t,i.generator)|h|(n?d:0)),this.expect(o.parenL),i.params=this.parseBindingList(o.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(i,"FunctionExpression")},_.parseArrowExpression=function(e,t,n,i){let r=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(l(n,!1)|p),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,i),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")},_.parseFunctionBody=function(e,t,n,i){let r=t&&this.type!==o.braceL,s=this.strict,a=!1;if(r)e.body=this.parseMaybeAssign(i),e.expression=!0,this.checkParams(e,!1);else{let i=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);s&&!i||(a=this.strictDirective(this.end))&&i&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");let r=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(e,!s&&!a&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,m),e.body=this.parseBlock(!1,void 0,a&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=r}this.exitScope()},_.isSimpleParamList=function(e){for(let t of e)if("Identifier"!==t.type)return!1;return!0},_.checkParams=function(e,t){let n=Object.create(null);for(let i of e.params)this.checkLValInnerPattern(i,g,t?null:n)},_.parseExprList=function(e,t,n,i){let r=[],s=!0;for(;!this.eat(e);){if(s)s=!1;else if(this.expect(o.comma),t&&this.afterTrailingComma(e))break;let a;n&&this.type===o.comma?a=null:this.type===o.ellipsis?(a=this.parseSpread(i),i&&this.type===o.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):a=this.parseMaybeAssign(!1,i),r.push(a)}return r},_.checkUnreserved=function({start:e,end:t,name:n}){if(this.inGenerator&&"yield"===n&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===n&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===n&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==n&&"await"!==n||this.raise(e,`Cannot use ${n} in class static initialization block`),this.keywords.test(n)&&this.raise(e,`Unexpected keyword '${n}'`),this.options.ecmaVersion<6&&-1!==this.input.slice(e,t).indexOf("\\"))return;const i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(n)&&(this.inAsync||"await"!==n||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,`The keyword '${n}' is reserved`))},_.parseIdent=function(e){let t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),"await"!==t.name||this.awaitIdentPos||(this.awaitIdentPos=t.start)),t},_.parseIdentNode=function(){let e=this.startNode();return this.type===o.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,"class"!==e.name&&"function"!==e.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),e},_.parsePrivateIdent=function(){const e=this.startNode();return this.type===o.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(0===this.privateNameStack.length?this.raise(e.start,`Private field '#${e.name}' must be declared in an enclosing class`):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e},_.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);let t=this.startNode();return this.next(),this.type===o.semi||this.canInsertSemicolon()||this.type!==o.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(o.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},_.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);let t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")}}),define("skylark-acorn/location",["./state","./locutil"],function(e,t){"use strict";const{Parser:n}=e,{Position:i,getLineInfo:r}=t,s=n.prototype;s.raise=function(e,t){let n=r(this.input,e);t+=" ("+n.line+":"+n.column+")";let i=new SyntaxError(t);throw i.pos=e,i.loc=n,i.raisedAt=this.pos,i},s.raiseRecoverable=s.raise,s.curPosition=function(){if(this.options.locations)return new i(this.curLine,this.pos-this.lineStart)}}),define("skylark-acorn/scope",["./state","./scopeflags"],function(e,t){"use strict";const{Parser:n}=e,{SCOPE_VAR:i,SCOPE_FUNCTION:r,SCOPE_TOP:s,SCOPE_ARROW:o,SCOPE_SIMPLE_CATCH:a,BIND_LEXICAL:c,BIND_SIMPLE_CATCH:u,BIND_FUNCTION:f}=t,l=n.prototype;l.enterScope=function(e){this.scopeStack.push(new class{constructor(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1}}(e))},l.exitScope=function(){this.scopeStack.pop()},l.treatFunctionsAsVarInScope=function(e){return e.flags&r||!this.inModule&&e.flags&s},l.declareName=function(e,t,n){let r=!1;if(t===c){const t=this.currentScope();r=t.lexical.indexOf(e)>-1||t.functions.indexOf(e)>-1||t.var.indexOf(e)>-1,t.lexical.push(e),this.inModule&&t.flags&s&&delete this.undefinedExports[e]}else if(t===u){const t=this.currentScope();t.lexical.push(e)}else if(t===f){const t=this.currentScope();r=this.treatFunctionsAsVar?t.lexical.indexOf(e)>-1:t.lexical.indexOf(e)>-1||t.var.indexOf(e)>-1,t.functions.push(e)}else for(let t=this.scopeStack.length-1;t>=0;--t){const n=this.scopeStack[t];if(n.lexical.indexOf(e)>-1&&!(n.flags&a&&n.lexical[0]===e)||!this.treatFunctionsAsVarInScope(n)&&n.functions.indexOf(e)>-1){r=!0;break}if(n.var.push(e),this.inModule&&n.flags&s&&delete this.undefinedExports[e],n.flags&i)break}r&&this.raiseRecoverable(n,`Identifier '${e}' has already been declared`)},l.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},l.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},l.currentVarScope=function(){for(let e=this.scopeStack.length-1;;e--){let t=this.scopeStack[e];if(t.flags&i)return t}},l.currentThisScope=function(){for(let e=this.scopeStack.length-1;;e--){let t=this.scopeStack[e];if(t.flags&i&&!(t.flags&o))return t}}}),define("skylark-acorn/node",["./state","./locutil"],function(e,t){"use strict";const{Parser:n}=e,{SourceLocation:i}=t;class r{constructor(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new i(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])}}const s=n.prototype;function o(e,t,n,i){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=i),this.options.ranges&&(e.range[1]=n),e}return s.startNode=function(){return new r(this,this.start,this.startLoc)},s.startNodeAt=function(e,t){return new r(this,e,t)},s.finishNode=function(e,t){return o.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},s.finishNodeAt=function(e,t,n,i){return o.call(this,e,t,n,i)},s.copyNode=function(e){let t=new r(this,e.start,this.startLoc);for(let n in e)t[n]=e[n];return t},{Node:r}}),define("skylark-acorn/unicode-property-data",["./util"],function(e){"use strict";const{wordsRegexp:t}=e,n="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",i=n+" Extended_Pictographic",r=i,s=r+" EBase EComp EMod EPres ExtPict",o=s,a={9:n,10:i,11:r,12:s,13:o,14:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},c={9:"",10:"",11:"",12:"",13:"",14:"Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji"},u="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",f="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",l=f+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",p=l+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",h=p+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",d=h+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",m={9:f,10:l,11:p,12:h,13:d,14:"Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz"},g={};function _(e){const n=g[e]={binary:t(a[e]+" "+u),binaryOfStrings:t(c[e]),nonBinary:{General_Category:t(u),Script:t(m[e])}};n.nonBinary.Script_Extensions=n.nonBinary.Script,n.nonBinary.gc=n.nonBinary.General_Category,n.nonBinary.sc=n.nonBinary.Script,n.nonBinary.scx=n.nonBinary.Script_Extensions}for(const e of[9,10,11,12,13,14])_(e);return g}),define("skylark-acorn/regexp",["./identifier","./state","./unicode-property-data","./util"],function(e,t,n,i){"use strict";const{isIdentifierStart:r,isIdentifierChar:s}=e,{Parser:o}=t,{hasOwn:a,codePointToString:c}=i,u=o.prototype;function f(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function l(e){return e>=65&&e<=90||e>=97&&e<=122}u.validateRegExpFlags=function(e){const t=e.validFlags,n=e.flags;let i=!1,r=!1;for(let s=0;s<n.length;s++){const o=n.charAt(s);-1===t.indexOf(o)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),"u"===o&&(i=!0),"v"===o&&(r=!0)}this.options.ecmaVersion>=15&&i&&r&&this.raise(e.start,"Invalid regular expression flag")},u.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},u.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(const t of e.backReferenceNames)-1===e.groupNames.indexOf(t)&&e.raise("Invalid named capture referenced")},u.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},u.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},u.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!(e.switchU?!this.regexp_eatAtom(e):!this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},u.regexp_eatAssertion=function(e){const t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){let t=!1;if(this.options.ecmaVersion>=9&&(t=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!t,!0}return e.pos=t,!1},u.regexp_eatQuantifier=function(e,t=!1){return!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},u.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},u.regexp_eatBracedQuantifier=function(e,t){const n=e.pos;if(e.eat(123)){let i=0,r=-1;if(this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue),e.eat(125)))return-1!==r&&r<i&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},u.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},u.regexp_eatReverseSolidusAtomEscape=function(e){const t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},u.regexp_eatUncapturingGroup=function(e){const t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},u.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},u.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},u.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},u.regexp_eatSyntaxCharacter=function(e){const t=e.current();return!!f(t)&&(e.lastIntValue=t,e.advance(),!0)},u.regexp_eatPatternCharacters=function(e){const t=e.pos;let n=0;for(;-1!==(n=e.current())&&!f(n);)e.advance();return e.pos!==t},u.regexp_eatExtendedPatternCharacter=function(e){const t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},u.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},u.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},u.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=c(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=c(e.lastIntValue);return!0}return!1},u.regexp_eatRegExpIdentifierStart=function(e){const t=e.pos,n=this.options.ecmaVersion>=11;let i=e.current(n);return e.advance(n),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),function(e){return r(e,!0)||36===e||95===e}(i)?(e.lastIntValue=i,!0):(e.pos=t,!1)},u.regexp_eatRegExpIdentifierPart=function(e){const t=e.pos,n=this.options.ecmaVersion>=11;let i=e.current(n);return e.advance(n),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),function(e){return s(e,!0)||36===e||95===e||8204===e||8205===e}(i)?(e.lastIntValue=i,!0):(e.pos=t,!1)},u.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},u.regexp_eatBackReference=function(e){const t=e.pos;if(this.regexp_eatDecimalEscape(e)){const n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},u.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},u.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},u.regexp_eatCControlLetter=function(e){const t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},u.regexp_eatZero=function(e){return 48===e.current()&&!d(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},u.regexp_eatControlEscape=function(e){const t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},u.regexp_eatControlLetter=function(e){const t=e.current();return!!l(t)&&(e.lastIntValue=t%32,e.advance(),!0)},u.regexp_eatRegExpUnicodeEscapeSequence=function(e,t=!1){const n=e.pos,i=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){const t=e.lastIntValue;if(i&&t>=55296&&t<=56319){const n=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){const n=e.lastIntValue;if(n>=56320&&n<=57343)return e.lastIntValue=1024*(t-55296)+(n-56320)+65536,!0}e.pos=n,e.lastIntValue=t}return!0}if(i&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&((r=e.lastIntValue)>=0&&r<=1114111))return!0;i&&e.raise("Invalid unicode escape"),e.pos=n}var r;return!1},u.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);const t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},u.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;let t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1};function p(e){return l(e)||95===e}function h(e){return p(e)||d(e)}function d(e){return e>=48&&e<=57}function m(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function g(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function _(e){return e>=48&&e<=55}return u.regexp_eatCharacterClassEscape=function(e){const t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e}(t))return e.lastIntValue=-1,e.advance(),1;let n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=80===t)||112===t)){let t;if(e.lastIntValue=-1,e.advance(),e.eat(123)&&(t=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&2===t&&e.raise("Invalid property name"),t;e.raise("Invalid property name")}return 0},u.regexp_eatUnicodePropertyValueExpression=function(e){const t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){const t=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){const n=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,t,n),1}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){const t=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,t)}return 0},u.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){a(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},u.regexp_validateUnicodePropertyNameOrValue=function(e,t){return e.unicodeProperties.binary.test(t)?1:e.switchV&&e.unicodeProperties.binaryOfStrings.test(t)?2:void e.raise("Invalid property name")},u.regexp_eatUnicodePropertyName=function(e){let t=0;for(e.lastStringValue="";p(t=e.current());)e.lastStringValue+=c(t),e.advance();return""!==e.lastStringValue},u.regexp_eatUnicodePropertyValue=function(e){let t=0;for(e.lastStringValue="";h(t=e.current());)e.lastStringValue+=c(t),e.advance();return""!==e.lastStringValue},u.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},u.regexp_eatCharacterClass=function(e){if(e.eat(91)){const t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&2===n&&e.raise("Negated character class may contain strings"),!0}return!1},u.regexp_classContents=function(e){return 93===e.current()?1:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),1)},u.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){const t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){const n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},u.regexp_eatClassAtom=function(e){const t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){const t=e.current();(99===t||_(t))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}const n=e.current();return 93!==n&&(e.lastIntValue=n,e.advance(),!0)},u.regexp_eatClassEscape=function(e){const t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},u.regexp_classSetExpression=function(e){let t,n=1;if(this.regexp_eatClassSetRange(e));else if(t=this.regexp_eatClassSetOperand(e)){2===t&&(n=2);const i=e.pos;for(;e.eatChars([38,38]);)38!==e.current()&&(t=this.regexp_eatClassSetOperand(e))?2!==t&&(n=1):e.raise("Invalid character in character class");if(i!==e.pos)return n;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(i!==e.pos)return n}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(!(t=this.regexp_eatClassSetOperand(e)))return n;2===t&&(n=2)}},u.regexp_eatClassSetRange=function(e){const t=e.pos;if(this.regexp_eatClassSetCharacter(e)){const n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){const t=e.lastIntValue;return-1!==n&&-1!==t&&n>t&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1},u.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?1:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)},u.regexp_eatNestedClass=function(e){const t=e.pos;if(e.eat(91)){const n=e.eat(94),i=this.regexp_classContents(e);if(e.eat(93))return n&&2===i&&e.raise("Negated character class may contain strings"),i;e.pos=t}if(e.eat(92)){const n=this.regexp_eatCharacterClassEscape(e);if(n)return n;e.pos=t}return null},u.regexp_eatClassStringDisjunction=function(e){const t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){const t=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return t}else e.raise("Invalid escape");e.pos=t}return null},u.regexp_classStringDisjunctionContents=function(e){let t=this.regexp_classString(e);for(;e.eat(124);)2===this.regexp_classString(e)&&(t=2);return t},u.regexp_classString=function(e){let t=0;for(;this.regexp_eatClassSetCharacter(e);)t++;return 1===t?1:2},u.regexp_eatClassSetCharacter=function(e){const t=e.pos;if(e.eat(92))return!(!this.regexp_eatCharacterEscape(e)&&!this.regexp_eatClassSetReservedPunctuator(e))||(e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1));const n=e.current();return!(n<0||n===e.lookahead()&&function(e){return 33===e||e>=35&&e<=38||e>=42&&e<=44||46===e||e>=58&&e<=64||94===e||96===e||126===e}(n))&&(!function(e){return 40===e||41===e||45===e||47===e||e>=91&&e<=93||e>=123&&e<=125}(n)&&(e.advance(),e.lastIntValue=n,!0))},u.regexp_eatClassSetReservedPunctuator=function(e){const t=e.current();return!!function(e){return 33===e||35===e||37===e||38===e||44===e||45===e||e>=58&&e<=62||64===e||96===e||126===e}(t)&&(e.lastIntValue=t,e.advance(),!0)},u.regexp_eatClassControlLetter=function(e){const t=e.current();return!(!d(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},u.regexp_eatHexEscapeSequence=function(e){const t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},u.regexp_eatDecimalDigits=function(e){const t=e.pos;let n=0;for(e.lastIntValue=0;d(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},u.regexp_eatHexDigits=function(e){const t=e.pos;let n=0;for(e.lastIntValue=0;m(n=e.current());)e.lastIntValue=16*e.lastIntValue+g(n),e.advance();return e.pos!==t},u.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){const t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){const n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},u.regexp_eatOctalDigit=function(e){const t=e.current();return _(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},u.regexp_eatFixedHexDigits=function(e,t){const n=e.pos;e.lastIntValue=0;for(let i=0;i<t;++i){const t=e.current();if(!m(t))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+g(t),e.advance()}return!0},{RegExpValidationState:class{constructor(e){this.parser=e,this.validFlags=`gim${e.options.ecmaVersion>=6?"uy":""}${e.options.ecmaVersion>=9?"s":""}${e.options.ecmaVersion>=13?"d":""}${e.options.ecmaVersion>=15?"v":""}`,this.unicodeProperties=n[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]}reset(e,t,n){const i=-1!==n.indexOf("v"),r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=r&&this.parser.options.ecmaVersion>=9)}raise(e){this.parser.raiseRecoverable(this.start,`Invalid regular expression: /${this.source}/: ${e}`)}at(e,t=!1){const n=this.source,i=n.length;if(e>=i)return-1;const r=n.charCodeAt(e);if(!t&&!this.switchU||r<=55295||r>=57344||e+1>=i)return r;const s=n.charCodeAt(e+1);return s>=56320&&s<=57343?(r<<10)+s-56613888:r}nextIndex(e,t=!1){const n=this.source,i=n.length;if(e>=i)return i;let r,s=n.charCodeAt(e);return!t&&!this.switchU||s<=55295||s>=57344||e+1>=i||(r=n.charCodeAt(e+1))<56320||r>57343?e+1:e+2}current(e=!1){return this.at(this.pos,e)}lookahead(e=!1){return this.at(this.nextIndex(this.pos,e),e)}advance(e=!1){this.pos=this.nextIndex(this.pos,e)}eat(e,t=!1){return this.current(t)===e&&(this.advance(t),!0)}eatChars(e,t=!1){let n=this.pos;for(const i of e){const e=this.at(n,t);if(-1===e||e!==i)return!1;n=this.nextIndex(n,t)}return this.pos=n,!0}}}}),define("skylark-acorn/tokenize",["./identifier","./tokentype","./state","./locutil","./regexp","./whitespace","./util"],function(e,t,n,i,r,s,o){"use strict";const{isIdentifierStart:a,isIdentifierChar:c}=e,{types:u,keywords:f}=t,{Parser:l}=n,{SourceLocation:p}=i,{RegExpValidationState:h}=r,{lineBreak:d,nextLineBreak:m,isNewLine:g,nonASCIIwhitespace:_}=s,{codePointToString:v}=o;class y{constructor(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new p(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])}}const b=l.prototype;function x(e){return"function"!=typeof BigInt?null:BigInt(e.replace(/_/g,""))}b.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new y(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},b.getToken=function(){return this.next(),new y(this)},"undefined"!=typeof Symbol&&(b[Symbol.iterator]=function(){return{next:()=>{let e=this.getToken();return{done:e.type===u.eof,value:e}}}}),b.nextToken=function(){let e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(u.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},b.readToken=function(e){return a(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},b.fullCharCodeAtPos=function(){let e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;let t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888},b.skipBlockComment=function(){let e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(let e,n=t;(e=m(this.input,n,this.pos))>-1;)++this.curLine,n=this.lineStart=e;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())},b.skipLineComment=function(e){let t=this.pos,n=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=e);for(;this.pos<this.input.length&&!g(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},b.skipSpace=function(){e:for(;this.pos<this.input.length;){let e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&_.test(String.fromCharCode(e))))break e;++this.pos}}},b.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());let n=this.type;this.type=e,this.value=t,this.updateContext(n)},b.readToken_dot=function(){let e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);let t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(u.ellipsis)):(++this.pos,this.finishToken(u.dot))},b.readToken_slash=function(){let e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(u.assign,2):this.finishOp(u.slash,1)},b.readToken_mult_modulo_exp=function(e){let t=this.input.charCodeAt(this.pos+1),n=1,i=42===e?u.star:u.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,i=u.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(u.assign,n+1):this.finishOp(i,n)},b.readToken_pipe_amp=function(e){let t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){let e=this.input.charCodeAt(this.pos+2);if(61===e)return this.finishOp(u.assign,3)}return this.finishOp(124===e?u.logicalOR:u.logicalAND,2)}return 61===t?this.finishOp(u.assign,2):this.finishOp(124===e?u.bitwiseOR:u.bitwiseAND,1)},b.readToken_caret=function(){let e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(u.assign,2):this.finishOp(u.bitwiseXOR,1)},b.readToken_plus_min=function(e){let t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!d.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(u.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(u.assign,2):this.finishOp(u.plusMin,1)},b.readToken_lt_gt=function(e){let t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(u.assign,n+1):this.finishOp(u.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(u.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},b.readToken_eq_excl=function(e){let t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(u.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(u.arrow)):this.finishOp(61===e?u.eq:u.prefix,1)},b.readToken_question=function(){const e=this.options.ecmaVersion;if(e>=11){let t=this.input.charCodeAt(this.pos+1);if(46===t){let e=this.input.charCodeAt(this.pos+2);if(e<48||e>57)return this.finishOp(u.questionDot,2)}if(63===t){if(e>=12){let e=this.input.charCodeAt(this.pos+2);if(61===e)return this.finishOp(u.assign,3)}return this.finishOp(u.coalesce,2)}}return this.finishOp(u.question,1)},b.readToken_numberSign=function(){const e=this.options.ecmaVersion;let t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),a(t,!0)||92===t))return this.finishToken(u.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+v(t)+"'")},b.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(u.parenL);case 41:return++this.pos,this.finishToken(u.parenR);case 59:return++this.pos,this.finishToken(u.semi);case 44:return++this.pos,this.finishToken(u.comma);case 91:return++this.pos,this.finishToken(u.bracketL);case 93:return++this.pos,this.finishToken(u.bracketR);case 123:return++this.pos,this.finishToken(u.braceL);case 125:return++this.pos,this.finishToken(u.braceR);case 58:return++this.pos,this.finishToken(u.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(u.backQuote);case 48:let t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(u.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+v(e)+"'")},b.finishOp=function(e,t){let n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},b.readRegexp=function(){let e,t,n=this.pos;for(;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");let i=this.input.charAt(this.pos);if(d.test(i)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===i)t=!0;else if("]"===i&&t)t=!1;else if("/"===i&&!t)break;e="\\"===i}++this.pos}let i=this.input.slice(n,this.pos);++this.pos;let r=this.pos,s=this.readWord1();this.containsEsc&&this.unexpected(r);const o=this.regexpState||(this.regexpState=new h(this));o.reset(n,i,s),this.validateRegExpFlags(o),this.validateRegExpPattern(o);let a=null;try{a=new RegExp(i,s)}catch(e){}return this.finishToken(u.regexp,{pattern:i,flags:s,value:a})},b.readInt=function(e,t,n){const i=this.options.ecmaVersion>=12&&void 0===t,r=n&&48===this.input.charCodeAt(this.pos);let s=this.pos,o=0,a=0;for(let n=0,s=null==t?1/0:t;n<s;++n,++this.pos){let t,s=this.input.charCodeAt(this.pos);if(i&&95===s)r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===a&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===n&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=s;else{if((t=s>=97?s-97+10:s>=65?s-65+10:s>=48&&s<=57?s-48:1/0)>=e)break;a=s,o=o*e+t}}return i&&95===a&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||null!=t&&this.pos-s!==t?null:o},b.readRadixNumber=function(e){let t=this.pos;this.pos+=2;let n=this.readInt(e);return null==n&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n=x(this.input.slice(t,this.pos)),++this.pos):a(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(u.num,n)},b.readNumber=function(e){let t=this.pos;e||null!==this.readInt(10,void 0,!0)||this.raise(t,"Invalid number");let n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number");let i=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&110===i){let e=x(this.input.slice(t,this.pos));return++this.pos,a(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(u.num,e)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),46!==i||n||(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),69!==i&&101!==i||n||(43!==(i=this.input.charCodeAt(++this.pos))&&45!==i||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),a(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");let r=function(e,t){if(t)return parseInt(e,8);return parseFloat(e.replace(/_/g,""))}(this.input.slice(t,this.pos),n);return this.finishToken(u.num,r)},b.readCodePoint=function(){let e,t=this.input.charCodeAt(this.pos);if(123===t){this.options.ecmaVersion<6&&this.unexpected();let t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},b.readString=function(e){let t="",n=++this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");let i=this.input.charCodeAt(this.pos);if(i===e)break;92===i?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):8232===i||8233===i?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(g(i)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(u.string,t)};const w={};return b.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==w)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},b.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw w;this.raise(e,t)},b.readTmplToken=function(){let e="",t=this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");let n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==u.template&&this.type!==u.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(u.template,e)):36===n?(this.pos+=2,this.finishToken(u.dollarBraceL)):(++this.pos,this.finishToken(u.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(g(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},b.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(u.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},b.readEscapedChar=function(e){let t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return v(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){const e=this.pos-1;this.invalidStringToken(e,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){let n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(n,8);return i>255&&(n=n.slice(0,-1),i=parseInt(n,8)),this.pos+=n.length-1,t=this.input.charCodeAt(this.pos),"0"===n&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-n.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return g(t)?"":String.fromCharCode(t)}},b.readHexChar=function(e){let t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},b.readWord1=function(){this.containsEsc=!1;let e="",t=!0,n=this.pos,i=this.options.ecmaVersion>=6;for(;this.pos<this.input.length;){let r=this.fullCharCodeAtPos();if(c(r,i))this.pos+=r<=65535?1:2;else{if(92!==r)break;{this.containsEsc=!0,e+=this.input.slice(n,this.pos);let r=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;let s=this.readCodePoint();(t?a:c)(s,i)||this.invalidStringToken(r,"Invalid Unicode escape"),e+=v(s),n=this.pos}}t=!1}return e+this.input.slice(n,this.pos)},b.readWord=function(){let e=this.readWord1(),t=u.name;return this.keywords.test(e)&&(t=f[e]),this.finishToken(t,e)},{Token:y}}),define("skylark-acorn/main",["./state","./parseutil","./statement","./lval","./expression","./location","./scope","./options","./locutil","./node","./tokentype","./tokencontext","./identifier","./tokenize","./whitespace"],function(e,t,n,i,r,s,o,a,c,u,f,l,p,h,d){"use strict";const{Parser:m}=e,{defaultOptions:g}=a,{Position:_,SourceLocation:v,getLineInfo:y}=c,{Node:b}=u,{TokenType:x,types:w,keywords:S}=f,{TokContext:k,types:A}=l,{isIdentifierChar:T,isIdentifierStart:E}=p,{Token:C}=h,{isNewLine:P,lineBreak:O,lineBreakG:D,nonASCIIwhitespace:I}=d;return m.acorn={Parser:m,version:"8.10.0",defaultOptions:g,Position:_,SourceLocation:v,getLineInfo:y,Node:b,TokenType:x,tokTypes:w,keywordTypes:S,TokContext:k,tokContexts:A,isIdentifierChar:T,isIdentifierStart:E,Token:C,isNewLine:P,lineBreak:O,lineBreakG:D,nonASCIIwhitespace:I},{version:"8.10.0",Parser:m,defaultOptions:g,Position:_,SourceLocation:v,getLineInfo:y,Node:b,TokenType:x,tokTypes:w,keywordTypes:S,TokContext:k,tokContexts:A,isIdentifierChar:T,isIdentifierStart:E,Token:C,isNewLine:P,lineBreak:O,lineBreakG:D,nonASCIIwhitespace:I,parse:function(e,t){return m.parse(e,t)},parseExpressionAt:function(e,t,n){return m.parseExpressionAt(e,t,n)},tokenizer:function(e,t){return m.tokenizer(e,t)}}}),define("skylark-acorn",["skylark-acorn/main"],function(e){return e}),define("skylark-acorn/plugins/jsx",[],function(){const e={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"},t=/^[\da-fA-F]+$/,n=/^\d+$/,i=new WeakMap;function r(e){e=e.Parser.acorn||e;let t=i.get(e);if(!t){const n=e.tokTypes,r=e.TokContext,s=e.TokenType,o=new r("<tag",!1),a=new r("</tag",!1),c=new r("<tag>...</tag>",!0,!0),u={tc_oTag:o,tc_cTag:a,tc_expr:c},f={jsxName:new s("jsxName"),jsxText:new s("jsxText",{beforeExpr:!0}),jsxTagStart:new s("jsxTagStart",{startsExpr:!0}),jsxTagEnd:new s("jsxTagEnd")};f.jsxTagStart.updateContext=function(){this.context.push(c),this.context.push(o),this.exprAllowed=!1},f.jsxTagEnd.updateContext=function(e){let t=this.context.pop();t===o&&e===n.slash||t===a?(this.context.pop(),this.exprAllowed=this.curContext()===c):this.exprAllowed=!0},t={tokContexts:u,tokTypes:f},i.set(e,t)}return t}function s(e){return e?"JSXIdentifier"===e.type?e.name:"JSXNamespacedName"===e.type?e.namespace.name+":"+e.name.name:"JSXMemberExpression"===e.type?s(e.object)+"."+s(e.property):void 0:e}function o(i){return i=i||{},function(o){return function(i,o){const a=o.acorn||require("acorn"),c=r(a),u=a.tokTypes,f=c.tokTypes,l=a.tokContexts,p=c.tokContexts.tc_oTag,h=c.tokContexts.tc_cTag,d=c.tokContexts.tc_expr,m=a.isNewLine,g=a.isIdentifierStart,_=a.isIdentifierChar;return class extends o{static get acornJsx(){return c}jsx_readToken(){let e="",t=this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated JSX contents");let n=this.input.charCodeAt(this.pos);switch(n){case 60:case 123:return this.pos===this.start?60===n&&this.exprAllowed?(++this.pos,this.finishToken(f.jsxTagStart)):this.getTokenFromCode(n):(e+=this.input.slice(t,this.pos),this.finishToken(f.jsxText,e));case 38:e+=this.input.slice(t,this.pos),e+=this.jsx_readEntity(),t=this.pos;break;case 62:case 125:this.raise(this.pos,"Unexpected token `"+this.input[this.pos]+"`. Did you mean `"+(62===n?"&gt;":"&rbrace;")+'` or `{"'+this.input[this.pos]+'"}`?');default:m(n)?(e+=this.input.slice(t,this.pos),e+=this.jsx_readNewLine(!0),t=this.pos):++this.pos}}}jsx_readNewLine(e){let t,n=this.input.charCodeAt(this.pos);return++this.pos,13===n&&10===this.input.charCodeAt(this.pos)?(++this.pos,t=e?"\n":"\r\n"):t=String.fromCharCode(n),this.options.locations&&(++this.curLine,this.lineStart=this.pos),t}jsx_readString(e){let t="",n=++this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");let i=this.input.charCodeAt(this.pos);if(i===e)break;38===i?(t+=this.input.slice(n,this.pos),t+=this.jsx_readEntity(),n=this.pos):m(i)?(t+=this.input.slice(n,this.pos),t+=this.jsx_readNewLine(!1),n=this.pos):++this.pos}return t+=this.input.slice(n,this.pos++),this.finishToken(u.string,t)}jsx_readEntity(){let i,r="",s=0,o=this.input[this.pos];"&"!==o&&this.raise(this.pos,"Entity must start with an ampersand");let a=++this.pos;for(;this.pos<this.input.length&&s++<10;){if(";"===(o=this.input[this.pos++])){"#"===r[0]?"x"===r[1]?(r=r.substr(2),t.test(r)&&(i=String.fromCharCode(parseInt(r,16)))):(r=r.substr(1),n.test(r)&&(i=String.fromCharCode(parseInt(r,10)))):i=e[r];break}r+=o}return i||(this.pos=a,"&")}jsx_readWord(){let e,t=this.pos;do{e=this.input.charCodeAt(++this.pos)}while(_(e)||45===e);return this.finishToken(f.jsxName,this.input.slice(t,this.pos))}jsx_parseIdentifier(){let e=this.startNode();return this.type===f.jsxName?e.name=this.value:this.type.keyword?e.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(e,"JSXIdentifier")}jsx_parseNamespacedName(){let e=this.start,t=this.startLoc,n=this.jsx_parseIdentifier();if(!i.allowNamespaces||!this.eat(u.colon))return n;var r=this.startNodeAt(e,t);return r.namespace=n,r.name=this.jsx_parseIdentifier(),this.finishNode(r,"JSXNamespacedName")}jsx_parseElementName(){if(this.type===f.jsxTagEnd)return"";let e=this.start,t=this.startLoc,n=this.jsx_parseNamespacedName();for(this.type!==u.dot||"JSXNamespacedName"!==n.type||i.allowNamespacedObjects||this.unexpected();this.eat(u.dot);){let i=this.startNodeAt(e,t);i.object=n,i.property=this.jsx_parseIdentifier(),n=this.finishNode(i,"JSXMemberExpression")}return n}jsx_parseAttributeValue(){switch(this.type){case u.braceL:let e=this.jsx_parseExpressionContainer();return"JSXEmptyExpression"===e.expression.type&&this.raise(e.start,"JSX attributes must only be assigned a non-empty expression"),e;case f.jsxTagStart:case u.string:return this.parseExprAtom();default:this.raise(this.start,"JSX value should be either an expression or a quoted JSX text")}}jsx_parseEmptyExpression(){let e=this.startNodeAt(this.lastTokEnd,this.lastTokEndLoc);return this.finishNodeAt(e,"JSXEmptyExpression",this.start,this.startLoc)}jsx_parseExpressionContainer(){let e=this.startNode();return this.next(),e.expression=this.type===u.braceR?this.jsx_parseEmptyExpression():this.parseExpression(),this.expect(u.braceR),this.finishNode(e,"JSXExpressionContainer")}jsx_parseAttribute(){let e=this.startNode();return this.eat(u.braceL)?(this.expect(u.ellipsis),e.argument=this.parseMaybeAssign(),this.expect(u.braceR),this.finishNode(e,"JSXSpreadAttribute")):(e.name=this.jsx_parseNamespacedName(),e.value=this.eat(u.eq)?this.jsx_parseAttributeValue():null,this.finishNode(e,"JSXAttribute"))}jsx_parseOpeningElementAt(e,t){let n=this.startNodeAt(e,t);n.attributes=[];let i=this.jsx_parseElementName();for(i&&(n.name=i);this.type!==u.slash&&this.type!==f.jsxTagEnd;)n.attributes.push(this.jsx_parseAttribute());return n.selfClosing=this.eat(u.slash),this.expect(f.jsxTagEnd),this.finishNode(n,i?"JSXOpeningElement":"JSXOpeningFragment")}jsx_parseClosingElementAt(e,t){let n=this.startNodeAt(e,t),i=this.jsx_parseElementName();return i&&(n.name=i),this.expect(f.jsxTagEnd),this.finishNode(n,i?"JSXClosingElement":"JSXClosingFragment")}jsx_parseElementAt(e,t){let n=this.startNodeAt(e,t),i=[],r=this.jsx_parseOpeningElementAt(e,t),o=null;if(!r.selfClosing){e:for(;;)switch(this.type){case f.jsxTagStart:if(e=this.start,t=this.startLoc,this.next(),this.eat(u.slash)){o=this.jsx_parseClosingElementAt(e,t);break e}i.push(this.jsx_parseElementAt(e,t));break;case f.jsxText:i.push(this.parseExprAtom());break;case u.braceL:i.push(this.jsx_parseExpressionContainer());break;default:this.unexpected()}s(o.name)!==s(r.name)&&this.raise(o.start,"Expected corresponding JSX closing tag for <"+s(r.name)+">")}let a=r.name?"Element":"Fragment";return n["opening"+a]=r,n["closing"+a]=o,n.children=i,this.type===u.relational&&"<"===this.value&&this.raise(this.start,"Adjacent JSX elements must be wrapped in an enclosing tag"),this.finishNode(n,"JSX"+a)}jsx_parseText(){let e=this.parseLiteral(this.value);return e.type="JSXText",e}jsx_parseElement(){let e=this.start,t=this.startLoc;return this.next(),this.jsx_parseElementAt(e,t)}parseExprAtom(e){return this.type===f.jsxText?this.jsx_parseText():this.type===f.jsxTagStart?this.jsx_parseElement():super.parseExprAtom(e)}readToken(e){let t=this.curContext();if(t===d)return this.jsx_readToken();if(t===p||t===h){if(g(e))return this.jsx_readWord();if(62==e)return++this.pos,this.finishToken(f.jsxTagEnd);if((34===e||39===e)&&t==p)return this.jsx_readString(e)}return 60===e&&this.exprAllowed&&33!==this.input.charCodeAt(this.pos+1)?(++this.pos,this.finishToken(f.jsxTagStart)):super.readToken(e)}updateContext(e){if(this.type==u.braceL){var t=this.curContext();t==p?this.context.push(l.b_expr):t==d?this.context.push(l.b_tmpl):super.updateContext(e),this.exprAllowed=!0}else{if(this.type!==u.slash||e!==f.jsxTagStart)return super.updateContext(e);this.context.length-=2,this.context.push(h),this.exprAllowed=!1}}}}({allowNamespaces:!1!==i.allowNamespaces,allowNamespacedObjects:!!i.allowNamespacedObjects},o)}}return Object.defineProperty(o,"tokTypes",{get:function(){return r(require("acorn")).tokTypes},configurable:!0,enumerable:!0}),o}),define("skylark-espree/lib/token-translator",[],function(){const e={Boolean:"Boolean",EOF:"<end>",Identifier:"Identifier",PrivateIdentifier:"PrivateIdentifier",Keyword:"Keyword",Null:"Null",Numeric:"Numeric",Punctuator:"Punctuator",String:"String",RegularExpression:"RegularExpression",Template:"Template",JSXIdentifier:"JSXIdentifier",JSXText:"JSXText"};function t(e,t){this._acornTokTypes=e,this._tokens=[],this._curlyBrace=null,this._code=t}return t.prototype={constructor:t,translate(t,n){const i=t.type,r=this._acornTokTypes;if(i===r.name)t.type=e.Identifier,"static"===t.value&&(t.type=e.Keyword),n.ecmaVersion>5&&("yield"===t.value||"let"===t.value)&&(t.type=e.Keyword);else if(i===r.privateId)t.type=e.PrivateIdentifier;else if(i===r.semi||i===r.comma||i===r.parenL||i===r.parenR||i===r.braceL||i===r.braceR||i===r.dot||i===r.bracketL||i===r.colon||i===r.question||i===r.bracketR||i===r.ellipsis||i===r.arrow||i===r.jsxTagStart||i===r.incDec||i===r.starstar||i===r.jsxTagEnd||i===r.prefix||i===r.questionDot||i.binop&&!i.keyword||i.isAssign)t.type=e.Punctuator,t.value=this._code.slice(t.start,t.end);else if(i===r.jsxName)t.type=e.JSXIdentifier;else if("jsxText"===i.label||i===r.jsxAttrValueToken)t.type=e.JSXText;else if(i.keyword)"true"===i.keyword||"false"===i.keyword?t.type=e.Boolean:"null"===i.keyword?t.type=e.Null:t.type=e.Keyword;else if(i===r.num)t.type=e.Numeric,t.value=this._code.slice(t.start,t.end);else if(i===r.string)n.jsxAttrValueToken?(n.jsxAttrValueToken=!1,t.type=e.JSXText):t.type=e.String,t.value=this._code.slice(t.start,t.end);else if(i===r.regexp){t.type=e.RegularExpression;const n=t.value;t.regex={flags:n.flags,pattern:n.pattern},t.value=`/${n.pattern}/${n.flags}`}return t},onToken(t,n){const i=this,r=this._acornTokTypes,s=n.tokens,o=this._tokens;function a(){s.push(function(t,n){const i=t[0],r=t[t.length-1],s={type:e.Template,value:n.slice(i.start,r.end)};i.loc&&(s.loc={start:i.loc.start,end:r.loc.end});i.range&&(s.start=i.range[0],s.end=r.range[1],s.range=[s.start,s.end]);return s}(i._tokens,i._code)),i._tokens=[]}if(t.type!==r.eof){if(t.type===r.backQuote)return this._curlyBrace&&(s.push(this.translate(this._curlyBrace,n)),this._curlyBrace=null),o.push(t),void(o.length>1&&a());if(t.type===r.dollarBraceL)return o.push(t),void a();if(t.type===r.braceR)return this._curlyBrace&&s.push(this.translate(this._curlyBrace,n)),void(this._curlyBrace=t);if(t.type===r.template||t.type===r.invalidTemplate)return this._curlyBrace&&(o.push(this._curlyBrace),this._curlyBrace=null),void o.push(t);this._curlyBrace&&(s.push(this.translate(this._curlyBrace,n)),this._curlyBrace=null),s.push(this.translate(t,n))}else this._curlyBrace&&s.push(this.translate(this._curlyBrace,n))}},t}),define("skylark-espree/lib/options",[],function(){const e=[3,5,6,7,8,9,10,11,12,13,14,15];function t(){return e[e.length-1]}return{getLatestEcmaVersion:t,getSupportedEcmaVersions:function(){return[...e]},normalizeOptions:function(n){const i=function(n="latest"){let i="latest"===n?t():n;if("number"!=typeof i)throw new Error(`ecmaVersion must be a number or "latest". Received value of type ${typeof n} instead.`);i>=2015&&(i-=2009);if(!e.includes(i))throw new Error("Invalid ecmaVersion.");return i}(n.ecmaVersion),r=function(e="script"){if("script"===e||"module"===e)return e;if("commonjs"===e)return"script";throw new Error("Invalid sourceType.")}(n.sourceType),s=!0===n.range,o=!0===n.loc;if(3!==i&&n.allowReserved)throw new Error("`allowReserved` is only supported when ecmaVersion is 3");if(void 0!==n.allowReserved&&"boolean"!=typeof n.allowReserved)throw new Error("`allowReserved`, when present, must be `true` or `false`");const a=3===i&&(n.allowReserved||"never"),c=n.ecmaFeatures||{},u="commonjs"===n.sourceType||Boolean(c.globalReturn);if("module"===r&&i<6)throw new Error("sourceType 'module' is not supported when ecmaVersion < 2015. Consider adding `{ ecmaVersion: 2015 }` to the parser options.");return Object.assign({},n,{ecmaVersion:i,sourceType:r,ranges:s,locations:o,allowReserved:a,allowReturnOutsideFunction:u})}}}),define("skylark-espree/lib/espree",["./token-translator","./options"],function(e,t){const{normalizeOptions:n}=t,i=Symbol("espree's internal state"),r=Symbol("espree's esprimaFinishNode");return()=>t=>{const s=Object.assign({},t.acorn.tokTypes);return t.acornJsx&&Object.assign(s,t.acornJsx.tokTypes),class extends t{constructor(t,r){"object"==typeof t&&null!==t||(t={}),"string"==typeof r||r instanceof String||(r=String(r));const o=t.sourceType,a=n(t),c=a.ecmaFeatures||{},u=!0===a.tokens?new e(s,r):null,f={originalSourceType:o||a.sourceType,tokens:u?[]:null,comments:!0===a.comment?[]:null,impliedStrict:!0===c.impliedStrict&&a.ecmaVersion>=5,ecmaVersion:a.ecmaVersion,jsxAttrValueToken:!1,lastToken:null,templateElements:[]};super({ecmaVersion:a.ecmaVersion,sourceType:a.sourceType,ranges:a.ranges,locations:a.locations,allowReserved:a.allowReserved,allowReturnOutsideFunction:a.allowReturnOutsideFunction,onToken:e=>{u&&u.onToken(e,f),e.type!==s.eof&&(f.lastToken=e)},onComment:(e,t,n,i,s,o)=>{if(f.comments){const a=function(e,t,n,i,r,s,o){let a;a=e?"Block":"#!"===o.slice(n,n+2)?"Hashbang":"Line";const c={type:a,value:t};"number"==typeof n&&(c.start=n,c.end=i,c.range=[n,i]);"object"==typeof r&&(c.loc={start:r,end:s});return c}(e,t,n,i,s,o,r);f.comments.push(a)}}},r),this[i]=f}tokenize(){do{this.next()}while(this.type!==s.eof);this.next();const e=this[i],t=e.tokens;return e.comments&&(t.comments=e.comments),t}finishNode(...e){const t=super.finishNode(...e);return this[r](t)}finishNodeAt(...e){const t=super.finishNodeAt(...e);return this[r](t)}parse(){const e=this[i],t=super.parse();if(t.sourceType=e.originalSourceType,e.comments&&(t.comments=e.comments),e.tokens&&(t.tokens=e.tokens),t.body.length){const[e]=t.body;t.range&&(t.range[0]=e.range[0]),t.loc&&(t.loc.start=e.loc.start),t.start=e.start}return e.lastToken&&(t.range&&(t.range[1]=e.lastToken.range[1]),t.loc&&(t.loc.end=e.lastToken.loc.end),t.end=e.lastToken.end),this[i].templateElements.forEach(e=>{const t=e.tail?1:2;e.start+=-1,e.end+=t,e.range&&(e.range[0]+=-1,e.range[1]+=t),e.loc&&(e.loc.start.column+=-1,e.loc.end.column+=t)}),t}parseTopLevel(e){return this[i].impliedStrict&&(this.strict=!0),super.parseTopLevel(e)}raise(e,n){const i=t.acorn.getLineInfo(this.input,e),r=new SyntaxError(n);throw r.index=e,r.lineNumber=i.line,r.column=i.column+1,r}raiseRecoverable(e,t){this.raise(e,t)}unexpected(e){let t="Unexpected token";if(null!==e&&void 0!==e){if(this.pos=e,this.options.locations)for(;this.pos<this.lineStart;)this.lineStart=this.input.lastIndexOf("\n",this.lineStart-2)+1,--this.curLine;this.nextToken()}this.end>this.start&&(t+=` ${this.input.slice(this.start,this.end)}`),this.raise(this.start,t)}jsx_readString(e){const t=super.jsx_readString(e);return this.type===s.string&&(this[i].jsxAttrValueToken=!0),t}[r](e){return"TemplateElement"===e.type&&this[i].templateElements.push(e),e.type.includes("Function")&&!e.generator&&(e.generator=!1),e}}}}),define("skylark-espree/lib/version",[],function(){return"main"}),define("skylark-espree/eslint-visitor-keys",[],function(){const e={ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],AwaitExpression:["argument"],BinaryExpression:["left","right"],BlockStatement:["body"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExperimentalRestProperty:["argument"],ExperimentalSpreadProperty:["argument"],ExportAllDeclaration:["exported","source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],ForStatement:["init","test","update","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportExpression:["source"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],JSXAttribute:["name","value"],JSXClosingElement:["name"],JSXClosingFragment:[],JSXElement:["openingElement","children","closingElement"],JSXEmptyExpression:[],JSXExpressionContainer:["expression"],JSXFragment:["openingFragment","children","closingFragment"],JSXIdentifier:[],JSXMemberExpression:["object","property"],JSXNamespacedName:["namespace","name"],JSXOpeningElement:["name","attributes"],JSXOpeningFragment:[],JSXSpreadAttribute:["argument"],JSXSpreadChild:["expression"],JSXText:[],LabeledStatement:["label","body"],Literal:[],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],StaticBlock:["body"],Super:[],SwitchCase:["test","consequent"],SwitchStatement:["discriminant","cases"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},t=Object.keys(e);for(const n of t)Object.freeze(e[n]);Object.freeze(e);const n=new Set(["parent","leadingComments","trailingComments"]);function i(e){return!n.has(e)&&"_"!==e[0]}return{KEYS:e,getKeys:function(e){return Object.keys(e).filter(i)},unionWith:function(t){const n=Object.assign({},e);for(const e of Object.keys(t))if(Object.prototype.hasOwnProperty.call(n,e)){const i=new Set(t[e]);for(const t of n[e])i.add(t);n[e]=Object.freeze(Array.from(i))}else n[e]=Object.freeze(Array.from(t[e]));return Object.freeze(n)}}}),define("skylark-espree/espree",["skylark-acorn","skylark-acorn/plugins/jsx","./lib/espree","./lib/version","./lib/options","./eslint-visitor-keys"],function(e,t,n,i,r,s){const{getLatestEcmaVersion:o,getSupportedEcmaVersions:a}=r,c={_regular:null,_jsx:null,get regular(){return null===this._regular&&(this._regular=e.Parser.extend(n())),this._regular},get jsx(){return null===this._jsx&&(this._jsx=e.Parser.extend(t(),n())),this._jsx},get(e){const t=Boolean(e&&e.ecmaFeatures&&e.ecmaFeatures.jsx);return t?this.jsx:this.regular}};const u=i,f=s.KEYS,l=function(){let e,t={};for(e in"function"==typeof Object.create&&(t=Object.create(null)),f)Object.hasOwnProperty.call(f,e)&&(t[e]=e);return"function"==typeof Object.freeze&&Object.freeze(t),t}(),p=o(),h=a();return{tokenize:function(e,t){const n=c.get(t);t&&!0===t.tokens||(t=Object.assign({},t,{tokens:!0}));return new n(t,e).tokenize()},parse:function(e,t){return new(c.get(t))(t,e).parse()},version:u,name:"espree",VisitorKeys:f,Syntax:l,latestEcmaVersion:p,supportedEcmaVersions:h}}),define("skylark-espree/main",["./espree"],function(e){return e}),define("skylark-espree",["skylark-espree/main"],function(e){return e}),define("skylark-rjs/esprima",["skylark-espree"],function(e){return e}),define("skylark-rjs/parse",["./esprima","./lang"],function(esprima,lang){"use strict";function arrayToString(e){var t="[";return e&&e.forEach(function(e,n){t+=(n>0?",":"")+'"'+lang.jsEscape(e)+'"'}),t+="]"}var argPropName="arguments",emptyScope={},mixin=lang.mixin,hasProp=lang.hasProp;function traverse(e,t){var n;if(e){if(!1===t.call(null,e))return!1;for(var i=0,r=Object.keys(e);i<r.length;i++)if("object"==typeof(n=e[r[i]])&&null!==n&&!1===traverse(n,t))return!1}}function traverseBroad(e,t){var n;if(e){if(!1===t.call(null,e))return!1;for(var i=0,r=Object.keys(e);i<r.length;i++)"object"==typeof(n=e[key])&&null!==n&&traverseBroad(n,t)}}function getValidDeps(e){if(e&&"ArrayExpression"===e.type&&e.elements){var t=[];return e.elements.some(function(e){"Literal"===e.type&&t.push(e.value)}),t.length?t:void 0}}function isFnExpression(e){return e&&("FunctionExpression"===e.type||"ArrowFunctionExpression"===e.type)}function parse(e,t,n,i){i=i||{};var r,s,o,a=[],c="",u=[],f=!0,l=esprima.parse(n);if(parse.recurse(l,function(t,n,r,s,o,c,l){return s||(s=[]),"define"!==t||r&&r!==e||(f=!1),r?u.push({name:r,deps:s}):a=a.concat(s),"define"===t&&c&&hasProp(l,c)?c:!!i.findNestedDependencies},i),i.insertNeedsDefine&&f&&(c+='require.needsDefine("'+e+'");'),a.length||u.length){for(r=0;r<u.length;r++)s=u[r],c&&(c+="\n"),s.name===e&&(s.deps=s.deps.concat(a),a=[]),o=arrayToString(s.deps),c+='define("'+s.name+'",'+o+");";a.length&&(c&&(c+="\n"),o=arrayToString(a),c+='define("'+e+'",'+o+");")}return c||null}return parse.traverse=traverse,parse.traverseBroad=traverseBroad,parse.isFnExpression=isFnExpression,parse.recurse=function(e,t,n,i){var r,s,o,a,c,u,f,l=n&&n.has;if(i=i||emptyScope,e)if(l&&"IfStatement"===e.type&&e.test.type&&"Literal"===e.test.type)e.test.value?this.recurse(e.consequent,t,n,i):this.recurse(e.alternate,t,n,i);else{if(!1===(o=this.parseNode(e,t,i)))return;if("string"==typeof o)return o;if("ExpressionStatement"===e.type&&e.expression&&"CallExpression"===e.expression.type&&e.expression.callee&&isFnExpression(e.expression.callee)&&(f=e.expression.callee),"UnaryExpression"===e.type&&e.argument&&"CallExpression"===e.argument.type&&e.argument.callee&&isFnExpression(e.argument.callee)&&(f=e.argument.callee),f&&f.params&&f.params.length)for(c=f.params,i=mixin({},i,!0),a=0;a<c.length;a++)"Identifier"===(u=c[a]).type&&(i[u.name]=!0);for(a=0,r=Object.keys(e);a<r.length&&("object"!=typeof(s=e[r[a]])||null===s||"string"!=typeof(o=this.recurse(s,t,n,i))||!hasProp(i,o));a++);if("string"==typeof o)return hasProp(i,o)?o:void 0}},parse.definesRequire=function(e,t){var n=!1,i=!1;return traverse(esprima.parse(t),function(e){if("Program"===e.type&&e.body&&e.body.length&&(n=e.body.some(function(e){if("VariableDeclaration"===e.type){var t=e.declarations;if(t){var n=t.some(function(e){return"VariableDeclarator"===e.type&&e.id&&"Identifier"===e.id.type&&"define"===e.id.name});if(n)return!0}}if("FunctionDeclaration"===e.type&&e.id&&"Identifier"===e.id.type&&"define"===e.id.name)return!0})),n&&parse.hasDefineAmd(e))return i=!0,!1}),n&&i},parse.getAnonDeps=function(e,t){var n="string"==typeof t?esprima.parse(t):t,i=this.findAnonDefineFactory(n);return parse.getAnonDepsFromNode(i)},parse.getAnonDepsFromNode=function(e){var t,n=[];return e&&(this.findRequireDepNames(e,n),(t=e.params&&e.params.length)&&(n=(t>1?["require","exports","module"]:["require"]).concat(n))),n},parse.isDefineNodeWithArgs=function(e){return e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"define"===e.callee.name&&e[argPropName]},parse.findAnonDefineFactory=function(e){var t;return traverse(e,function(e){var n,i;if(parse.isDefineNodeWithArgs(e)){if(isFnExpression(n=e[argPropName][0]))return t=n,!1;if(i=e[argPropName][1],"Literal"===n.type&&isFnExpression(i))return t=i,!1}}),t},parse.findConfig=function(fileContents){var jsConfig,foundConfig,stringData,foundRange,quote,quoteMatch,quoteRegExp=/(:\s|\[\s*)(['"])/,astRoot=esprima.parse(fileContents,{loc:!0});return traverse(astRoot,function(e){var t,n=parse.hasRequire(e);if(!n||"require"!==n&&"requirejs"!==n&&"requireConfig"!==n&&"requirejsConfig"!==n){if(t=parse.getRequireObjectLiteral(e))return stringData=parse.nodeToString(fileContents,t),jsConfig=stringData.value,foundRange=stringData.range,!1}else if((t=e[argPropName]&&e[argPropName][0])&&"ObjectExpression"===t.type)return stringData=parse.nodeToString(fileContents,t),jsConfig=stringData.value,foundRange=stringData.range,!1}),jsConfig&&(quoteMatch=quoteRegExp.exec(jsConfig),quote=quoteMatch&&quoteMatch[2]||'"',foundConfig=eval("("+jsConfig+")")),{config:foundConfig,range:foundRange,quote:quote}},parse.getRequireObjectLiteral=function(e){if(e.id&&"Identifier"===e.id.type&&("require"===e.id.name||"requirejs"===e.id.name)&&e.init&&"ObjectExpression"===e.init.type)return e.init},parse.renameNamespace=function(e,t){var n,i=[],r=esprima.parse(e,{loc:!0});return parse.recurse(r,function(e,t,n,r,s){return i.push(s.loc),"define"!==e},{}),i.length&&(n=e.split("\n"),i.reverse(),i.forEach(function(e){var i=e.start.column,r=e.start.line-1,s=n[r];n[r]=s.substring(0,i)+t+"."+s.substring(i,s.length)}),e=n.join("\n")),e},parse.findDependencies=function(e,t,n){var i=[],r=esprima.parse(t);return parse.recurse(r,function(e,t,n,r){r&&(i=i.concat(r))},n),i},parse.findCjsDependencies=function(e,t){var n=[];return traverse(esprima.parse(t),function(e){var t;e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"require"===e.callee.name&&e[argPropName]&&1===e[argPropName].length&&"Literal"===(t=e[argPropName][0]).type&&n.push(t.value)}),n},parse.hasDefDefine=function(e){return"FunctionDeclaration"===e.type&&e.id&&"Identifier"===e.id.type&&"define"===e.id.name},parse.hasDefineAmd=function(e){return e&&"AssignmentExpression"===e.type&&e.left&&"MemberExpression"===e.left.type&&e.left.object&&"define"===e.left.object.name&&e.left.property&&"amd"===e.left.property.name},parse.refsDefineAmd=function(e){return e&&"MemberExpression"===e.type&&e.object&&"define"===e.object.name&&"Identifier"===e.object.type&&e.property&&"amd"===e.property.name&&"Identifier"===e.property.type},parse.hasRequire=function(e){var t,n=e&&e.callee;return e&&"CallExpression"===e.type&&n&&("Identifier"!==n.type||"require"!==n.name&&"requirejs"!==n.name?"MemberExpression"===n.type&&n.object&&"Identifier"===n.object.type&&("require"===n.object.name||"requirejs"===n.object.name)&&n.property&&"config"===n.property.name&&(t=n.object.name+"Config"):t=n.name),t},parse.hasDefine=function(e){return e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"define"===e.callee.name},parse.getNamedDefine=function(e){var t;return traverse(esprima.parse(e),function(e){if(e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"define"===e.callee.name&&e[argPropName]&&e[argPropName][0]&&"Literal"===e[argPropName][0].type)return t=e[argPropName][0].value,!1}),t},parse.getAllNamedDefines=function(e,t){var n=[];return parse.recurse(esprima.parse(e),function(e,i,r,s,o,a,c){return"define"===e&&r&&(t.hasOwnProperty(r)||n.push(r)),"define"!==e||!a||!hasProp(c,a)||a},{}),n},parse.usesAmdOrRequireJs=function(e,t){var n;return traverse(esprima.parse(t),function(e){var t,i,r;parse.hasDefDefine(e)?t="declaresDefine":parse.hasDefineAmd(e)?t="defineAmd":(i=parse.hasRequire(e))?!(r=e[argPropName]&&e[argPropName][0])||"ObjectExpression"!==r.type&&"ArrayExpression"!==r.type||(t=i):parse.hasDefine(e)&&(t="define"),t&&(n||(n={}),n[t]=!0)}),n},parse.usesCommonJs=function(e,t){var n=null,i=!1;return traverse(esprima.parse(t),function(e){var t,r=e.expression||e.init;"Identifier"!==e.type||"__dirname"!==e.name&&"__filename"!==e.name?"VariableDeclarator"===e.type&&e.id&&"Identifier"===e.id.type&&"exports"===e.id.name?t="varExports":r&&"AssignmentExpression"===r.type&&r.left&&"MemberExpression"===r.left.type&&r.left.object?"module"===r.left.object.name&&r.left.property&&"exports"===r.left.property.name?t="moduleExports":"exports"===r.left.object.name&&r.left.property?t="exports":"MemberExpression"===r.left.object.type&&"module"===r.left.object.object.name&&"exports"===r.left.object.property.name&&"Identifier"===r.left.object.property.type&&(t="moduleExports"):e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"require"===e.callee.name&&e[argPropName]&&1===e[argPropName].length&&"Literal"===e[argPropName][0].type&&(t="require"):t=e.name.substring(2),t&&("varExports"===t?i=!0:"exports"===t&&i||(n||(n={}),n[t]=!0))}),n},parse.findRequireDepNames=function(e,t){traverse(e,function(e){var n;e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"require"===e.callee.name&&e[argPropName]&&1===e[argPropName].length&&"Literal"===(n=e[argPropName][0]).type&&t.push(n.value)})},parse.parseNode=function(e,t,n){var i,r,s,o,a,c,u,f,l=e&&e[argPropName],p=parse.hasRequire(e),h=!1;if("require"===p||"requirejs"===p){if((o=e[argPropName]&&e[argPropName][0])&&"ArrayExpression"!==o.type&&"ObjectExpression"===o.type&&(o=e[argPropName][1]),!(r=getValidDeps(o)))return;return t("require",null,null,r,e)}if(parse.hasDefine(e)&&l&&l.length){if(i=l[0],r=l[1],a=l[2],"ArrayExpression"===i.type?(a=r,r=i,i=null):isFnExpression(i)?(a=i,i=r=null):"Identifier"===i.type&&1===l.length&&hasProp(n,i.name)?(h=!0,a=i,i=null):"Literal"!==i.type&&(i=r=a=null),i&&"Literal"===i.type&&r&&(isFnExpression(r)?(a=r,r=null):"ObjectExpression"===r.type?r=a=null:"Identifier"===r.type&&(2===l.length?r=a=null:3===l.length&&isFnExpression(a)&&(r=null))),r&&"ArrayExpression"===r.type)r=getValidDeps(r);else if(isFnExpression(a))(s=parse.getAnonDepsFromNode(a)).length&&(r=s);else if(r||a&&!h)return;return i&&"Literal"===i.type&&(i=i.value),t("define",null,i,r,e,a&&"Identifier"===a.type?a.name:void 0,n)}if("CallExpression"===e.type&&e.callee&&isFnExpression(e.callee)&&e.callee.body&&e.callee.body.body&&1===e.callee.body.body.length&&"IfStatement"===e.callee.body.body[0].type&&(f=e.callee.body.body[0]).consequent&&f.consequent.body&&"ExpressionStatement"===(c=f.consequent.body[0]).type&&c.expression&&parse.hasDefine(c.expression)&&c.expression.arguments&&1===c.expression.arguments.length&&"Identifier"===c.expression.arguments[0].type&&(traverse(f.test,function(e){if(parse.refsDefineAmd(e))return u=!0,!1}),u))return t("define",null,null,null,c.expression,c.expression.arguments[0].name,n)},parse.nodeToString=function(e,t){var n,i=t.loc,r=e.split("\n"),s=i.start.line>1?r.slice(0,i.start.line-1).join("\n")+"\n":"",o=s+r[i.start.line-1].substring(0,i.start.column);return{value:n=i.start.line===i.end.line?r[i.start.line-1].substring(i.start.column,i.end.column):r[i.start.line-1].substring(i.start.column)+"\n"+r.slice(i.start.line,i.end.line-1).join("\n")+"\n"+r[i.end.line-1].substring(0,i.end.column),range:[o.length,o.length+n.length]}},parse.getLicenseComments=function(e,t){var n,i,r,s,o,a,c=esprima.parse(t,{comment:!0,range:!0}),u="",f={},l=-1===t.indexOf("\r")?"\n":"\r\n";if(c.comments)for(o=0;o<c.comments.length;o++){if("Line"===(n=c.comments[o]).type)if(s="//"+n.value+l,i=n,o+1>=c.comments.length)s+=l;else{for(a=o+1;a<c.comments.length&&("Line"===(r=c.comments[a]).type&&r.range[0]===i.range[1]+1);a++)s+="//"+r.value+l,i=r;s+=l,o=a-1}else s="/*"+n.value+"*/"+l+l;f[s]||-1===s.indexOf("license")&&("Block"!==n.type||0!==s.indexOf("/*!"))&&-1===s.indexOf("opyright")&&-1===s.indexOf("(c)")||(u+=s,f[s]=!0)}return u},parse}),define("skylark-rjs/pragma",["./parse","./logger"],function(parse,logger){"use strict";function Temp(){}function create(e,t){Temp.prototype=e;var n,i=new Temp;if(Temp.prototype=null,t)for(n in t)t.hasOwnProperty(n)&&!i.hasOwnProperty(n)&&(i[n]=t[n]);return i}var pragma={conditionalRegExp:/(exclude|include)Start\s*\(\s*["'](\w+)["']\s*,(.*)\)/,useStrictRegExp:/(^|[^{]\r?\n)['"]use strict['"];/g,hasRegExp:/has\s*\(\s*['"]([^'"]+)['"]\s*\)/g,configRegExp:/(^|[^\.])(requirejs|require)(\.config)\s*\(/g,nsWrapRegExp:/\/\*requirejs namespace: true \*\//,apiDefRegExp:/var requirejs,\s*require,\s*define;/,defineCheckRegExp:/typeof(\s+|\s*\(\s*)define(\s*\))?\s*===?\s*["']function["']\s*&&\s*define\s*\.\s*amd/g,defineStringCheckRegExp:/typeof\s+define\s*===?\s*["']function["']\s*&&\s*define\s*\[\s*["']amd["']\s*\]/g,defineTypeFirstCheckRegExp:/\s*["']function["']\s*==(=?)\s*typeof\s+define\s*&&\s*define\s*\.\s*amd/g,defineJQueryRegExp:/typeof\s+define\s*===?\s*["']function["']\s*&&\s*define\s*\.\s*amd\s*&&\s*define\s*\.\s*amd\s*\.\s*jQuery/g,defineHasRegExp:/typeof\s+define\s*==(=)?\s*['"]function['"]\s*&&\s*typeof\s+define\.amd\s*==(=)?\s*['"]object['"]\s*&&\s*define\.amd/g,defineTernaryRegExp:/typeof\s+define\s*===?\s*['"]function["']\s*&&\s*define\s*\.\s*amd\s*\?\s*define/,defineExistsRegExp:/\s+typeof\s+define\s*!==?\s*['"]undefined["']\s*/,defineExistsAndAmdRegExp:/typeof\s+define\s*!==?\s*['"]undefined["']\s*&&\s*define\s*\.\s*amd\s*/,amdefineRegExp:/if\s*\(\s*typeof define\s*\!==\s*['"]function['"]\s*\)\s*\{\s*[^\{\}]+amdefine[^\{\}]+\}/g,removeStrict:function(e,t){return t.useStrict?e:e.replace(pragma.useStrictRegExp,"$1")},namespace:function(e,t,n){return t&&(e=e.replace(pragma.configRegExp,"$1"+t+".$2$3("),e=(e=(e=(e=(e=(e=(e=(e=(e=parse.renameNamespace(e,t)).replace(pragma.defineTernaryRegExp,"typeof "+t+".define === 'function' && "+t+".define.amd ? "+t+".define")).replace(pragma.defineJQueryRegExp,"typeof "+t+".define === 'function' && "+t+".define.amd && "+t+".define.amd.jQuery")).replace(pragma.defineHasRegExp,"typeof "+t+".define === 'function' && typeof "+t+".define.amd === 'object' && "+t+".define.amd")).replace(pragma.defineExistsAndAmdRegExp,"typeof "+t+".define !== 'undefined' && "+t+".define.amd")).replace(pragma.defineCheckRegExp,"typeof "+t+".define === 'function' && "+t+".define.amd")).replace(pragma.defineStringCheckRegExp,"typeof "+t+".define === 'function' && "+t+".define['amd']")).replace(pragma.defineTypeFirstCheckRegExp,"'function' === typeof "+t+".define && "+t+".define.amd")).replace(pragma.defineExistsRegExp,"typeof "+t+".define !== 'undefined'"),pragma.apiDefRegExp.test(e)&&-1===e.indexOf("if (!"+t+" || !"+t+".requirejs)")&&(e="var "+t+";(function () { if (!"+t+" || !"+t+".requirejs) {\nif (!"+t+") { "+t+" = {}; } else { require = "+t+"; }\n"+e+"\n"+t+".requirejs = requirejs;"+t+".require = require;"+t+".define = define;\n}\n}());"),pragma.nsWrapRegExp.test(e)&&(e=e.replace(pragma.nsWrapRegExp,""),e="(function () {\nvar require = "+t+".require,requirejs = "+t+".requirejs,define = "+t+".define;\n"+e+"\n}());")),e},process:function(fileName,fileContents,config,onLifecycleName,pluginCollector){var foundIndex=-1,startIndex=0,lineEndIndex,conditionLine,matches,type,marker,condition,isTrue,endRegExp,endMatches,endMarkerIndex,shouldInclude,startLength,lifecycleHas,deps,i,dep,moduleName,collectorMod,lifecyclePragmas,pragmas=config.pragmas,hasConfig=config.has,kwArgs=pragmas;if(onLifecycleName&&(lifecyclePragmas=config["pragmas"+onLifecycleName],lifecycleHas=config["has"+onLifecycleName],lifecyclePragmas&&(pragmas=create(pragmas||{},lifecyclePragmas)),lifecycleHas&&(hasConfig=create(hasConfig||{},lifecycleHas))),hasConfig&&(fileContents=fileContents.replace(pragma.hasRegExp,function(e,t){return hasConfig.hasOwnProperty(t)?!!hasConfig[t]:e})),!config.skipPragmas)for(;-1!==(foundIndex=fileContents.indexOf("//>>",startIndex));)if(lineEndIndex=fileContents.indexOf("\n",foundIndex),-1===lineEndIndex&&(lineEndIndex=fileContents.length-1),startIndex=lineEndIndex+1,conditionLine=fileContents.substring(foundIndex,lineEndIndex+1),matches=conditionLine.match(pragma.conditionalRegExp),matches){type=matches[1],marker=matches[2],condition=matches[3],isTrue=!1;try{isTrue=!!eval("("+condition+")")}catch(e){throw"Error in file: "+fileName+". Conditional comment: "+conditionLine+" failed with this error: "+e}if(endRegExp=new RegExp("\\/\\/\\>\\>\\s*"+type+"End\\(\\s*['\"]"+marker+"['\"]\\s*\\)","g"),endMatches=endRegExp.exec(fileContents.substring(startIndex,fileContents.length)),!endMatches)throw"Error in file: "+fileName+". Cannot find end marker for conditional comment: "+conditionLine;endMarkerIndex=startIndex+endRegExp.lastIndex-endMatches[0].length,lineEndIndex=fileContents.indexOf("\n",endMarkerIndex),-1===lineEndIndex&&(lineEndIndex=fileContents.length-1),shouldInclude="exclude"===type&&!isTrue||"include"===type&&isTrue,startLength=startIndex-foundIndex,fileContents=fileContents.substring(0,foundIndex)+(shouldInclude?fileContents.substring(startIndex,endMarkerIndex):"")+fileContents.substring(lineEndIndex+1,fileContents.length),startIndex=foundIndex}if(config.optimizeAllPluginResources&&pluginCollector)try{if(deps=parse.findDependencies(fileName,fileContents),deps.length)for(i=0;i<deps.length;i++)dep=deps[i],-1!==dep.indexOf("!")&&(moduleName=dep.split("!")[0],collectorMod=pluginCollector[moduleName],collectorMod||(collectorMod=pluginCollector[moduleName]=[]),collectorMod.push(dep))}catch(e){logger.error("Parse error looking for plugin resources in "+fileName+", skipping.")}return config.keepAmdefine||(fileContents=fileContents.replace(pragma.amdefineRegExp,"")),"OnSave"===onLifecycleName&&config.namespace&&(fileContents=pragma.namespace(fileContents,config.namespace,onLifecycleName)),pragma.removeStrict(fileContents,config)}};return pragma}),define("skylark-uglifyjs/utils",[],function(){"use strict";function e(e){Object.defineProperty(e.prototype,"stack",{get:function(){var e=new Error(this.message);e.name=this.name;try{throw e}catch(e){return e.stack}}})}function t(e,t){this.message=e,this.defs=t}t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t.prototype.name="DefaultsError",e(t);var n=function(){function e(e,i){for(var r=[],s=0;s<e.length;s++){var o=i(e[s],s);o!==t&&(o instanceof n?r.push.apply(r,o.v):r.push(o))}return r}e.is_op=function(e){return e===t||e instanceof n},e.splice=function(e){return new n(e)};var t=e.skip={};function n(e){this.v=e}return e}();function i(){this.values=Object.create(null)}function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}return i.prototype={set:function(e,t){return"__proto__"==e?this.proto_value=t:this.values[e]=t,this},add:function(e,t){var n=this.get(e);return n?n.push(t):this.set(e,[t]),this},get:function(e){return"__proto__"==e?this.proto_value:this.values[e]},del:function(e){return"__proto__"==e?delete this.proto_value:delete this.values[e],this},has:function(e){return"__proto__"==e?"proto_value"in this:e in this.values},all:function(e){for(var t in this.values)if(!e(this.values[t],t))return!1;return!("proto_value"in this&&!e(this.proto_value,"__proto__"))},each:function(e){for(var t in this.values)e(this.values[t],t);"proto_value"in this&&e(this.proto_value,"__proto__")},size:function(){return Object.keys(this.values).length+("proto_value"in this)},map:function(e){var t=[];for(var n in this.values)t.push(e(this.values[n],n));return"proto_value"in this&&t.push(e(this.proto_value,"__proto__")),t},clone:function(){var e=new i;return this.each(function(t,n){e.set(n,t)}),e},toObject:function(){var e={};return this.each(function(t,n){e["$"+n]=t}),e}},i.fromObject=function(e){var t=new i;for(var n in e)r(e,n)&&t.set(n.slice(1),e[n]);return t},{characters:function(e){return e.split("")},member:function(e,t){return t.indexOf(e)>=0},find_if:function(e,t){for(var n=t.length;--n>=0;)if(e(t[n]))return t[n]},configure_error_stack:e,defaults:function(e,n,i){if(i)for(var s in e)if(r(e,s)&&!r(n,s))throw new t("`"+s+"` is not a supported option",n);for(var s in e)r(e,s)&&(n[s]=e[s]);return n},DefaultsError:t,noop:function(){},return_false:function(){return!1},return_true:function(){return!0},return_this:function(){return this},return_null:function(){return null},List:n,push_uniq:function(e,t){if(e.indexOf(t)<0)return e.push(t)},string_template:function(e,t){return e.replace(/\{([^{}]+)\}/g,function(e,n){var i="this"==n?t:t[n];return i instanceof AST_Node?i.print_to_string():i instanceof AST_Token?i.file+":"+i.line+","+i.col:i})},remove:function(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)},makePredicate:function(e){Array.isArray(e)||(e=e.split(" "));var t=Object.create(null);return e.forEach(function(e){t[e]=!0}),t},all:function(e,t){for(var n=e.length;--n>=0;)if(!t(e[n],n))return!1;return!0},Dictionary:i,HOP:r,DEF_BITPROPS:function(e,t){if(t.length>31)throw new Error("Too many properties: "+t.length+"\n"+t.join(", "));t.forEach(function(t,n){var i=1<<n;Object.defineProperty(e.prototype,t,{get:function(){return!!(this._bits&i)},set:function(e){e?this._bits|=i:this._bits&=~i}})})}}}),define("skylark-uglifyjs/ast",["./utils"],function(e){"use strict";const{all:t,HOP:n,List:i,MAP:r,noop:s,DEF_BITPROPS:o,return_true:a,return_this:c}=e;var u;function f(e,t,i,r){void 0===r&&(r=p);var s=t=t?t.split(/\s+/):[];r&&r.PROPS&&(t=t.concat(r.PROPS));var o=["return function AST_",e,"(props){","this._bits=0;","if(props){"];t.forEach(function(e){o.push("this.",e,"=props.",e,";")}),o.push("}");var a=Object.create(r&&r.prototype);(i.initialize||a.initialize)&&o.push("this.initialize();"),o.push("};");var c=new Function(o.join(""))();for(var u in c.prototype=a,c.prototype.CTOR=c,c.prototype.TYPE=c.TYPE=e,r&&(c.BASE=r,r.SUBCLASSES.push(c)),c.DEFMETHOD=function(e,t){this.prototype[e]=t},c.PROPS=t,c.SELF_PROPS=s,c.SUBCLASSES=[],i)n(i,u)&&(/^\$/.test(u)?c[u.substr(1)]=i[u]:c.DEFMETHOD(u,i[u]));return"undefined"!=typeof exports&&(exports["AST_"+e]=c),c}var l=f("Token","type value line col pos endline endcol endpos nlb comments_before comments_after file raw",{},null),p=f("Node","start end",{_clone:function(e){if(e){var t=this.clone();return t.transform(new Jt(function(e){if(e!==t)return e.clone(!0)}))}return new this.CTOR(this)},clone:function(e){return this._clone(e)},$documentation:"Base class of all AST nodes",$propdoc:{start:"[AST_Token] The first token of this node",end:"[AST_Token] The last token of this node"},equals:function(e){return this.TYPE==e.TYPE&&this._equals(e)},walk:function(e){e.visit(this)},_validate:function(){if("Node"==this.TYPE)throw new Error("should not instantiate AST_Node")},validate:function(){var e=this.CTOR;do{e.prototype._validate.call(this)}while(e=e.BASE)},validate_ast:function(){var e={};this.walk(new Yt(function(t){if(t.validate_visited===e)throw new Error(string_template("cannot reuse AST_{TYPE} from [{start}]",t));t.validate_visited=e}))}},null);o(p,["_optimized","_squeezed","call_only","collapse_scanning","defined","evaluating","falsy","in_arg","in_bool","is_undefined","inlined","length_read","nested","new","optional","private","pure","redundant","single_use","static","terminal","truthy","uses_eval","uses_with"]),(p.log_function=function(e,t){if("function"==typeof e){var n=Object.create(null);p.info=t?function(e,t){i("INFO: "+string_template(e,t))}:s,p.warn=function(e,t){i("WARN: "+string_template(e,t))}}else p.info=p.warn=s;function i(t){n[t]||(n[t]=!0,e(t))}})();var h=[];function d(e,n){return e.length==n.length&&t(e,function(e,t){return e.equals(n[t])})}function m(e,t){return e===t||(null==e?null==t:e instanceof p&&t instanceof p&&e.equals(t))}p.enable_validation=function(){p.disable_validation(),function e(t){if(t.SUBCLASSES.forEach(e),n(t.prototype,"transform")){var r=t.prototype.transform;t.prototype.transform=function(e,t){var n=r.call(this,e,t);if(n instanceof p)n.validate();else if(!(null===n||t&&i.is_op(n)))throw new Error("invalid transformed value: "+n);return n},h.push(function(){t.prototype.transform=r})}}(this)},p.disable_validation=function(){for(var e;e=h.pop();)e()};var g=f("Statement",null,{$documentation:"Base class of all statements",_validate:function(){if("Statement"==this.TYPE)throw new Error("should not instantiate AST_Statement")}}),_=f("Debugger",null,{$documentation:"Represents a debugger statement",_equals:a},g),v=f("Directive","quote value",{$documentation:'Represents a directive, like "use strict";',$propdoc:{quote:"[string?] the original quote character",value:"[string] The value of this directive as a plain string (it's not an AST_String!)"},_equals:function(e){return this.value==e.value},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},g),y=f("EmptyStatement",null,{$documentation:"The empty statement (empty block or simply a semicolon)",_equals:a},g);function b(e){return e instanceof g&&!(e instanceof oe)&&!(e instanceof H)}function x(e,t,n,i,r){if(n=n?"contain":"be",!(e instanceof p))throw new Error(t+" must "+n+" AST_Node");if(e instanceof Fe)throw new Error(t+" cannot "+n+" AST_DefaultValue");if(e instanceof nt)throw new Error(t+" cannot "+n+" AST_Destructured");if(e instanceof Ut&&!r)throw new Error(t+" cannot "+n+" AST_Hole");if(e instanceof We&&!i)throw new Error(t+" cannot "+n+" AST_Spread");if(b(e))throw new Error(t+" cannot "+n+" AST_Statement");if(e instanceof dt)throw new Error(t+" cannot "+n+" AST_SymbolDeclaration")}function w(e,t){x(e[t],t)}var S=f("SimpleStatement","body",{$documentation:"A statement consisting of an expression, i.e. a = 1 + 2",$propdoc:{body:"[AST_Node] an expression node (should not be instanceof AST_Statement)"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.body.walk(e)})},_validate:function(){w(this,"body")}},g),k=f("BlockScope","_var_names enclosed functions make_def parent_scope variables",{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{enclosed:"[SymbolDef*/S] a list of all symbol definitions that are accessed from this scope or any inner scopes",functions:"[Dictionary/S] like `variables`, but only lists function declarations",parent_scope:"[AST_Scope?/S] link to the parent scope",variables:"[Dictionary/S] a map of name ---\x3e SymbolDef for all variables/functions defined in this scope"},clone:function(e){var t=this._clone(e);return this.enclosed&&(t.enclosed=this.enclosed.slice()),this.functions&&(t.functions=this.functions.clone()),this.variables&&(t.variables=this.variables.clone()),t},pinned:function(){return this.resolve().pinned()},resolve:function(){return this.parent_scope.resolve()},_validate:function(){if("BlockScope"==this.TYPE)throw new Error("should not instantiate AST_BlockScope");if(null!=this.parent_scope){if(!(this.parent_scope instanceof k))throw new Error("parent_scope must be AST_BlockScope");if(!(this.resolve()instanceof B))throw new Error("must be contained within AST_Scope")}}},g);function A(e,t){e.body.forEach(function(e){e.walk(t)})}var T=f("Block","body",{$documentation:"A body of statements (usually braced)",$propdoc:{body:"[AST_Statement*] an array of statements"},_equals:function(e){return d(this.body,e.body)},walk:function(e){var t=this;e.visit(t,function(){A(t,e)})},_validate:function(){if("Block"==this.TYPE)throw new Error("should not instantiate AST_Block");this.body.forEach(function(e){if(!b(e))throw new Error("body must contain AST_Statement")})}},k),E=f("BlockStatement",null,{$documentation:"A block statement"},T),C=f("StatementWithBody","body",{$documentation:"Base class for all statements that contain one nested body: `For`, `ForIn`, `Do`, `While`, `With`",$propdoc:{body:"[AST_Statement] the body; this should always be present, even if it's an AST_EmptyStatement"},_validate:function(){if("StatementWithBody"==this.TYPE)throw new Error("should not instantiate AST_StatementWithBody");if(!b(this.body))throw new Error("body must be AST_Statement")}},k),P=f("LabeledStatement","label",{$documentation:"Statement with a label",$propdoc:{label:"[AST_Label] a label definition"},_equals:function(e){return this.label.equals(e.label)&&this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.label.walk(e),t.body.walk(e)})},clone:function(e){var t=this._clone(e);if(e){var n=t.label,i=this.label;t.walk(new Yt(function(e){if(e instanceof _e){if(!e.label||e.label.thedef!==i)return;return e.label.thedef=n,n.references.push(e),!0}if(e instanceof B)return!0}))}return t},_validate:function(){if(!(this.label instanceof At))throw new Error("label must be AST_Label")}},C),O=f("IterationStatement",null,{$documentation:"Internal class.  All loops inherit from it.",_validate:function(){if("IterationStatement"==this.TYPE)throw new Error("should not instantiate AST_IterationStatement")}},C),D=f("DWLoop","condition",{$documentation:"Base class for do/while statements",$propdoc:{condition:"[AST_Node] the loop condition.  Should not be instanceof AST_Statement"},_equals:function(e){return this.body.equals(e.body)&&this.condition.equals(e.condition)},_validate:function(){if("DWLoop"==this.TYPE)throw new Error("should not instantiate AST_DWLoop");w(this,"condition")}},O),I=f("Do",null,{$documentation:"A `do` statement",walk:function(e){var t=this;e.visit(t,function(){t.body.walk(e),t.condition.walk(e)})}},D),N=f("While",null,{$documentation:"A `while` statement",walk:function(e){var t=this;e.visit(t,function(){t.condition.walk(e),t.body.walk(e)})}},D),R=f("For","init condition step",{$documentation:"A `for` statement",$propdoc:{init:"[AST_Node?] the `for` initialization code, or null if empty",condition:"[AST_Node?] the `for` termination clause, or null if empty",step:"[AST_Node?] the `for` update clause, or null if empty"},_equals:function(e){return m(this.init,e.init)&&m(this.condition,e.condition)&&m(this.step,e.step)&&this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.init&&t.init.walk(e),t.condition&&t.condition.walk(e),t.step&&t.step.walk(e),t.body.walk(e)})},_validate:function(){if(null!=this.init){if(!(this.init instanceof p))throw new Error("init must be AST_Node");if(b(this.init)&&!(this.init instanceof Ce))throw new Error("init cannot be AST_Statement")}null!=this.condition&&w(this,"condition"),null!=this.step&&w(this,"step")}},O),L=f("ForEnumeration","init object",{$documentation:"Base class for enumeration loops, i.e. `for ... in`, `for ... of` & `for await ... of`",$propdoc:{init:"[AST_Node] the assignment target during iteration",object:"[AST_Node] the object to iterate over"},_equals:function(e){return this.init.equals(e.init)&&this.object.equals(e.object)&&this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.init.walk(e),t.object.walk(e),t.body.walk(e)})},_validate:function(){if("ForEnumeration"==this.TYPE)throw new Error("should not instantiate AST_ForEnumeration");if(this.init instanceof Ce){if(1!=this.init.definitions.length)throw new Error("init must have single declaration")}else it(this.init,function(e){if(!(e instanceof Ue||e instanceof Tt))throw new Error("init must be assignable: "+e.TYPE)});w(this,"object")}},O),M=f("ForIn",null,{$documentation:"A `for ... in` statement"},L),j=f("ForOf",null,{$documentation:"A `for ... of` statement"},L),F=f("ForAwaitOf",null,{$documentation:"A `for await ... of` statement"},j),q=f("With","expression",{$documentation:"A `with` statement",$propdoc:{expression:"[AST_Node] the `with` expression"},_equals:function(e){return this.expression.equals(e.expression)&&this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e),t.body.walk(e)})},_validate:function(){w(this,"expression")}},C),B=f("Scope","fn_defs may_call_this uses_eval uses_with",{$documentation:"Base class for all statements introducing a lambda scope",$propdoc:{uses_eval:"[boolean/S] tells whether this scope contains a direct call to the global `eval`",uses_with:"[boolean/S] tells whether this scope uses the `with` statement"},pinned:function(){return this.uses_eval||this.uses_with},resolve:c,_validate:function(){if("Scope"==this.TYPE)throw new Error("should not instantiate AST_Scope")}},T),V=f("Toplevel","globals",{$documentation:"The toplevel scope",$propdoc:{globals:"[Dictionary/S] a map of name ---\x3e SymbolDef for all undeclared names"},wrap:function(e){var t=this.body;return u.parse(["(function(exports){'$ORIG';})(typeof ",e,"=='undefined'?(",e,"={}):",e,");"].join(""),{filename:"wrap="+JSON.stringify(e)}).transform(new Jt(function(e){if(e instanceof v&&"$ORIG"==e.value)return i.splice(t)}))},enclose:function(e){"string"!=typeof e&&(e="");var t=e.indexOf(":");t<0&&(t=e.length);var n=this.body;return u.parse(["(function(",e.slice(0,t),'){"$ORIG"})(',e.slice(t+1),")"].join(""),{filename:"enclose="+JSON.stringify(e)}).transform(new Jt(function(e){if(e instanceof v&&"$ORIG"==e.value)return i.splice(n)}))}},B),z=f("ClassInitBlock",null,{$documentation:"Value for `class` static initialization blocks"},B),U=f("Lambda","argnames length_read rest safe_ids uses_arguments",{$documentation:"Base class for functions",$propdoc:{argnames:"[(AST_DefaultValue|AST_Destructured|AST_SymbolFunarg)*] array of function arguments and/or destructured literals",length_read:"[boolean/S] whether length property of this function is accessed",rest:"[(AST_Destructured|AST_SymbolFunarg)?] rest parameter, or null if absent",uses_arguments:"[boolean|number/S] whether this function accesses the arguments array"},each_argname:function(e){var t=new Yt(function(n){return n instanceof Fe?(n.name.walk(t),!0):n instanceof st?(n.value.walk(t),!0):void(n instanceof yt&&e(n))});this.argnames.forEach(function(e){e.walk(t)}),this.rest&&this.rest.walk(t)},_equals:function(e){return m(this.rest,e.rest)&&m(this.name,e.name)&&m(this.value,e.value)&&d(this.argnames,e.argnames)&&d(this.body,e.body)},walk:function(e){var t=this;e.visit(t,function(){t.name&&t.name.walk(e),t.argnames.forEach(function(t){t.walk(e)}),t.rest&&t.rest.walk(e),A(t,e)})},_validate:function(){if("Lambda"==this.TYPE)throw new Error("should not instantiate AST_Lambda");this.argnames.forEach(function(e){it(e,function(e){if(!(e instanceof yt))throw new Error("argnames must be AST_SymbolFunarg[]")},!0)}),null!=this.rest&&it(this.rest,function(e){if(!(e instanceof yt))throw new Error("rest must be AST_SymbolFunarg")})}},B),$=f("Accessor",null,{$documentation:"A getter/setter function",_validate:function(){if(null!=this.name)throw new Error("name must be null")}},U),H=f("LambdaExpression","inlined",{$documentation:"Base class for function expressions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined"},_validate:function(){if("LambdaExpression"==this.TYPE)throw new Error("should not instantiate AST_LambdaExpression")}},U);function W(e){return e instanceof G||e instanceof Y}var G=f("Arrow","value",{$documentation:"An arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(e){var t=this;e.visit(t,function(){t.argnames.forEach(function(t){t.walk(e)}),t.rest&&t.rest.walk(e),t.value?t.value.walk(e):A(t,e)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(w(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},H),Y=f("AsyncArrow","value",{$documentation:"An asynchronous arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(e){var t=this;e.visit(t,function(){t.argnames.forEach(function(t){t.walk(e)}),t.rest&&t.rest.walk(e),t.value?t.value.walk(e):A(t,e)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(w(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},H),J=f("AsyncFunction","name",{$documentation:"An asynchronous function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof xt))throw new Error("name must be AST_SymbolLambda")}},H),K=f("AsyncGeneratorFunction","name",{$documentation:"An asynchronous generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof xt))throw new Error("name must be AST_SymbolLambda")}},H),X=f("Function","name",{$documentation:"A function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof xt))throw new Error("name must be AST_SymbolLambda")}},H),Q=f("GeneratorFunction","name",{$documentation:"A generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof xt))throw new Error("name must be AST_SymbolLambda")}},H),Z=f("LambdaDefinition","inlined name",{$documentation:"Base class for function definitions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined",name:"[AST_SymbolDefun] the name of this function"},_validate:function(){if("LambdaDefinition"==this.TYPE)throw new Error("should not instantiate AST_LambdaDefinition");if(!(this.name instanceof bt))throw new Error("name must be AST_SymbolDefun")}},U),ee=f("AsyncDefun",null,{$documentation:"An asynchronous function definition"},Z),te=f("AsyncGeneratorDefun",null,{$documentation:"An asynchronous generator function definition"},Z),ne=f("Defun",null,{$documentation:"A function definition"},Z),ie=f("GeneratorDefun",null,{$documentation:"A generator function definition"},Z),re=f("Class","extends name properties",{$documentation:"Base class for class literals",$propdoc:{extends:"[AST_Node?] the super class, or null if not specified",properties:"[AST_ClassProperty*] array of class properties"},_equals:function(e){return m(this.name,e.name)&&m(this.extends,e.extends)&&d(this.properties,e.properties)},resolve:function(e){return e?this:this.parent_scope.resolve()},walk:function(e){var t=this;e.visit(t,function(){t.name&&t.name.walk(e),t.extends&&t.extends.walk(e),t.properties.forEach(function(t){t.walk(e)})})},_validate:function(){if("Class"==this.TYPE)throw new Error("should not instantiate AST_Class");null!=this.extends&&w(this,"extends"),this.properties.forEach(function(e){if(!(e instanceof ae))throw new Error("properties must contain AST_ClassProperty")})}},k),se=f("DefClass",null,{$documentation:"A class definition",$propdoc:{name:"[AST_SymbolDefClass] the name of this class"},_validate:function(){if(!(this.name instanceof wt))throw new Error("name must be AST_SymbolDefClass")}},re),oe=f("ClassExpression",null,{$documentation:"A class expression",$propdoc:{name:"[AST_SymbolClass?] the name of this class, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof St))throw new Error("name must be AST_SymbolClass")}},re),ae=f("ClassProperty","key private static value",{$documentation:"Base class for `class` properties",$propdoc:{key:"[string|AST_Node?] property name (AST_Node for computed property, null for initialization block)",private:"[boolean] whether this is a private property",static:"[boolean] whether this is a static property",value:"[AST_Node?] property value (AST_Accessor for getters/setters, AST_LambdaExpression for methods, null if not specified for fields)"},_equals:function(e){return!this.private==!e.private&&!this.static==!e.static&&m(this.key,e.key)&&m(this.value,e.value)},walk:function(e){var t=this;e.visit(t,function(){t.key instanceof p&&t.key.walk(e),t.value&&t.value.walk(e)})},_validate:function(){if("ClassProperty"==this.TYPE)throw new Error("should not instantiate AST_ClassProperty");if(this instanceof pe){if(null!=this.key)throw new Error("key must be null")}else if("string"!=typeof this.key){if(!(this.key instanceof p))throw new Error("key must be string or AST_Node");w(this,"key")}if(null!=this.value&&!(this.value instanceof p))throw new Error("value must be AST_Node")}}),ce=f("ClassField",null,{$documentation:"A `class` field",_validate:function(){null!=this.value&&w(this,"value")}},ae),ue=f("ClassGetter",null,{$documentation:"A `class` getter",_validate:function(){if(!(this.value instanceof $))throw new Error("value must be AST_Accessor")}},ae),fe=f("ClassSetter",null,{$documentation:"A `class` setter",_validate:function(){if(!(this.value instanceof $))throw new Error("value must be AST_Accessor")}},ae),le=f("ClassMethod",null,{$documentation:"A `class` method",_validate:function(){if(!(this.value instanceof H))throw new Error("value must be AST_LambdaExpression");if(W(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of class method's lambda must be null")}},ae),pe=f("ClassInit",null,{$documentation:"A `class` static initialization block",_validate:function(){if(!this.static)throw new Error("static must be true");if(!(this.value instanceof z))throw new Error("value must be AST_ClassInitBlock")},initialize:function(){this.static=!0}},ae),he=f("Jump",null,{$documentation:"Base class for “jumps” (for now that's `return`, `throw`, `break` and `continue`)",_validate:function(){if("Jump"==this.TYPE)throw new Error("should not instantiate AST_Jump")}},g),de=f("Exit","value",{$documentation:"Base class for “exits” (`return` and `throw`)",$propdoc:{value:"[AST_Node?] the value returned or thrown by this statement; could be null for AST_Return"},_equals:function(e){return m(this.value,e.value)},walk:function(e){var t=this;e.visit(t,function(){t.value&&t.value.walk(e)})},_validate:function(){if("Exit"==this.TYPE)throw new Error("should not instantiate AST_Exit")}},he),me=f("Return",null,{$documentation:"A `return` statement",_validate:function(){null!=this.value&&w(this,"value")}},de),ge=f("Throw",null,{$documentation:"A `throw` statement",_validate:function(){w(this,"value")}},de),_e=f("LoopControl","label",{$documentation:"Base class for loop control statements (`break` and `continue`)",$propdoc:{label:"[AST_LabelRef?] the label, or null if none"},_equals:function(e){return m(this.label,e.label)},walk:function(e){var t=this;e.visit(t,function(){t.label&&t.label.walk(e)})},_validate:function(){if("LoopControl"==this.TYPE)throw new Error("should not instantiate AST_LoopControl");if(null!=this.label&&!(this.label instanceof Ct))throw new Error("label must be AST_LabelRef")}},he),ve=f("Break",null,{$documentation:"A `break` statement"},_e),ye=f("Continue",null,{$documentation:"A `continue` statement"},_e),be=f("If","condition alternative",{$documentation:"A `if` statement",$propdoc:{condition:"[AST_Node] the `if` condition",alternative:"[AST_Statement?] the `else` part, or null if not present"},_equals:function(e){return this.body.equals(e.body)&&this.condition.equals(e.condition)&&m(this.alternative,e.alternative)},walk:function(e){var t=this;e.visit(t,function(){t.condition.walk(e),t.body.walk(e),t.alternative&&t.alternative.walk(e)})},_validate:function(){if(w(this,"condition"),null!=this.alternative&&!b(this.alternative))throw new Error("alternative must be AST_Statement")}},C),xe=f("Switch","expression",{$documentation:"A `switch` statement",$propdoc:{expression:"[AST_Node] the `switch` “discriminant”"},_equals:function(e){return this.expression.equals(e.expression)&&d(this.body,e.body)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e),A(t,e)})},_validate:function(){w(this,"expression"),this.body.forEach(function(e){if(!(e instanceof we))throw new Error("body must be AST_SwitchBranch[]")})}},T),we=f("SwitchBranch",null,{$documentation:"Base class for `switch` branches",_validate:function(){if("SwitchBranch"==this.TYPE)throw new Error("should not instantiate AST_SwitchBranch")}},T),Se=f("Default",null,{$documentation:"A `default` switch branch"},we),ke=f("Case","expression",{$documentation:"A `case` switch branch",$propdoc:{expression:"[AST_Node] the `case` expression"},_equals:function(e){return this.expression.equals(e.expression)&&d(this.body,e.body)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e),A(t,e)})},_validate:function(){w(this,"expression")}},we),Ae=f("Try","bcatch bfinally",{$documentation:"A `try` statement",$propdoc:{bcatch:"[AST_Catch?] the catch block, or null if not present",bfinally:"[AST_Finally?] the finally block, or null if not present"},_equals:function(e){return d(this.body,e.body)&&m(this.bcatch,e.bcatch)&&m(this.bfinally,e.bfinally)},walk:function(e){var t=this;e.visit(t,function(){A(t,e),t.bcatch&&t.bcatch.walk(e),t.bfinally&&t.bfinally.walk(e)})},_validate:function(){if(null!=this.bcatch&&!(this.bcatch instanceof Te))throw new Error("bcatch must be AST_Catch");if(null!=this.bfinally&&!(this.bfinally instanceof Ee))throw new Error("bfinally must be AST_Finally")}},T),Te=f("Catch","argname",{$documentation:"A `catch` node; only makes sense as part of a `try` statement",$propdoc:{argname:"[(AST_Destructured|AST_SymbolCatch)?] symbol for the exception, or null if not present"},_equals:function(e){return m(this.argname,e.argname)&&d(this.body,e.body)},walk:function(e){var t=this;e.visit(t,function(){t.argname&&t.argname.walk(e),A(t,e)})},_validate:function(){null!=this.argname&&it(this.argname,function(e){if(!(e instanceof kt))throw new Error("argname must be AST_SymbolCatch")})}},T),Ee=f("Finally",null,{$documentation:"A `finally` node; only makes sense as part of a `try` statement"},T),Ce=f("Definitions","definitions",{$documentation:"Base class for `var` nodes (variable declarations/initializations)",$propdoc:{definitions:"[AST_VarDef*] array of variable definitions"},_equals:function(e){return d(this.definitions,e.definitions)},walk:function(e){var t=this;e.visit(t,function(){t.definitions.forEach(function(t){t.walk(e)})})},_validate:function(){if("Definitions"==this.TYPE)throw new Error("should not instantiate AST_Definitions");if(this.definitions.length<1)throw new Error("must have at least one definition")}},g),Pe=f("Const",null,{$documentation:"A `const` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof Ie))throw new Error("definitions must be AST_VarDef[]");it(e.name,function(e){if(!(e instanceof mt))throw new Error("name must be AST_SymbolConst")})})}},Ce),Oe=f("Let",null,{$documentation:"A `let` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof Ie))throw new Error("definitions must be AST_VarDef[]");it(e.name,function(e){if(!(e instanceof _t))throw new Error("name must be AST_SymbolLet")})})}},Ce),De=f("Var",null,{$documentation:"A `var` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof Ie))throw new Error("definitions must be AST_VarDef[]");it(e.name,function(e){if(!(e instanceof vt))throw new Error("name must be AST_SymbolVar")})})}},Ce),Ie=f("VarDef","name value",{$documentation:"A variable declaration; only appears in a AST_Definitions node",$propdoc:{name:"[AST_Destructured|AST_SymbolVar] name of the variable",value:"[AST_Node?] initializer, or null of there's no initializer"},_equals:function(e){return this.name.equals(e.name)&&m(this.value,e.value)},walk:function(e){var t=this;e.visit(t,function(){t.name.walk(e),t.value&&t.value.walk(e)})},_validate:function(){null!=this.value&&w(this,"value")}}),Ne=f("ExportDeclaration","body",{$documentation:"An `export` statement",$propdoc:{body:"[AST_DefClass|AST_Definitions|AST_LambdaDefinition] the statement to export"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.body.walk(e)})},_validate:function(){if(!(this.body instanceof se||this.body instanceof Ce||this.body instanceof Z))throw new Error("body must be AST_DefClass, AST_Definitions or AST_LambdaDefinition")}},g),Re=f("ExportDefault","body",{$documentation:"An `export default` statement",$propdoc:{body:"[AST_Node] the default export"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.body.walk(e)})},_validate:function(){this.body instanceof se||this.body instanceof Z||w(this,"body")}},g),Le=f("ExportForeign","aliases keys path",{$documentation:"An `export ... from '...'` statement",$propdoc:{aliases:"[AST_String*] array of aliases to export",keys:"[AST_String*] array of keys to import",path:"[AST_String] the path to import module"},_equals:function(e){return this.path.equals(e.path)&&d(this.aliases,e.aliases)&&d(this.keys,e.keys)},_validate:function(){if(this.aliases.length!=this.keys.length)throw new Error("aliases:key length mismatch: "+this.aliases.length+" != "+this.keys.length);if(this.aliases.forEach(function(e){if(!(e instanceof Lt))throw new Error("aliases must contain AST_String")}),this.keys.forEach(function(e){if(!(e instanceof Lt))throw new Error("keys must contain AST_String")}),!(this.path instanceof Lt))throw new Error("path must be AST_String")}},g),Me=f("ExportReferences","properties",{$documentation:"An `export { ... }` statement",$propdoc:{properties:"[AST_SymbolExport*] array of aliases to export"},_equals:function(e){return d(this.properties,e.properties)},walk:function(e){var t=this;e.visit(t,function(){t.properties.forEach(function(t){t.walk(e)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof Et))throw new Error("properties must contain AST_SymbolExport")})}},g),je=f("Import","all default path properties",{$documentation:"An `import` statement",$propdoc:{all:"[AST_SymbolImport?] the imported namespace, or null if not specified",default:"[AST_SymbolImport?] the alias for default `export`, or null if not specified",path:"[AST_String] the path to import module",properties:"[(AST_SymbolImport*)?] array of aliases, or null if not specified"},_equals:function(e){return this.path.equals(e.path)&&m(this.all,e.all)&&m(this.default,e.default)&&!this.properties==!e.properties&&(!this.properties||d(this.properties,e.properties))},walk:function(e){var t=this;e.visit(t,function(){t.all&&t.all.walk(e),t.default&&t.default.walk(e),t.properties&&t.properties.forEach(function(t){t.walk(e)})})},_validate:function(){if(null!=this.all){if(!(this.all instanceof gt))throw new Error("all must be AST_SymbolImport");if(null!=this.properties)throw new Error("cannot import both * and {} in the same statement")}if(null!=this.default){if(!(this.default instanceof gt))throw new Error("default must be AST_SymbolImport");if(""!==this.default.key.value)throw new Error("invalid default key: "+this.default.key.value)}if(!(this.path instanceof Lt))throw new Error("path must be AST_String");null!=this.properties&&this.properties.forEach(function(e){if(!(e instanceof gt))throw new Error("properties must contain AST_SymbolImport")})}},g),Fe=f("DefaultValue","name value",{$documentation:"A default value declaration",$propdoc:{name:"[AST_Destructured|AST_SymbolDeclaration] name of the variable",value:"[AST_Node] value to assign if variable is `undefined`"},_equals:function(e){return this.name.equals(e.name)&&this.value.equals(e.value)},walk:function(e){var t=this;e.visit(t,function(){t.name.walk(e),t.value.walk(e)})},_validate:function(){w(this,"value")}});function qe(e,t,n,i){e[t].forEach(function(e){x(e,t,!0,n,i)})}var Be=f("Call","args expression optional pure terminal",{$documentation:"A function call expression",$propdoc:{args:"[AST_Node*] array of arguments",expression:"[AST_Node] expression to invoke as function",optional:"[boolean] whether the expression is optional chaining",pure:"[boolean/S] marker for side-effect-free call expression",terminal:"[boolean] whether the chain has ended"},_equals:function(e){return!this.optional==!e.optional&&this.expression.equals(e.expression)&&d(this.args,e.args)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e),t.args.forEach(function(t){t.walk(e)})})},_validate:function(){w(this,"expression"),qe(this,"args",!0)}}),Ve=f("New",null,{$documentation:"An object instantiation.  Derives from a function call since it has exactly the same properties",_validate:function(){if(this.optional)throw new Error("optional must be false");if(this.terminal)throw new Error("terminal must be false")}},Be),ze=f("Sequence","expressions",{$documentation:"A sequence expression (comma-separated expressions)",$propdoc:{expressions:"[AST_Node*] array of expressions (at least two)"},_equals:function(e){return d(this.expressions,e.expressions)},walk:function(e){var t=this;e.visit(t,function(){t.expressions.forEach(function(t){t.walk(e)})})},_validate:function(){if(this.expressions.length<2)throw new Error("expressions must contain multiple elements");qe(this,"expressions")}});var Ue=f("PropAccess","expression optional property terminal",{$documentation:'Base class for property access expressions, i.e. `a.foo` or `a["foo"]`',$propdoc:{expression:"[AST_Node] the “container” expression",optional:"[boolean] whether the expression is optional chaining",property:"[AST_Node|string] the property to access.  For AST_Dot this is always a plain string, while for AST_Sub it's an arbitrary AST_Node",terminal:"[boolean] whether the chain has ended"},_equals:function(e){return!this.optional==!e.optional&&m(this.property,e.property)&&this.expression.equals(e.expression)},get_property:function(){var e=this.property;return e instanceof Rt?e.value:e instanceof Ye&&"void"==e.operator&&e.expression instanceof Rt?void 0:e},_validate:function(){if("PropAccess"==this.TYPE)throw new Error("should not instantiate AST_PropAccess");w(this,"expression")}}),$e=f("Dot","quoted",{$documentation:"A dotted property access expression",$propdoc:{quoted:"[boolean] whether property is transformed from a quoted string"},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e)})},_validate:function(){if("string"!=typeof this.property)throw new Error("property must be string")}},Ue),He=f("Sub",null,{$documentation:'Index-style property access, i.e. `a["foo"]`',walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e),t.property.walk(e)})},_validate:function(){w(this,"property")}},Ue),We=f("Spread","expression",{$documentation:"Spread expression in array/object literals or function calls",$propdoc:{expression:"[AST_Node] expression to be expanded"},_equals:function(e){return this.expression.equals(e.expression)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e)})},_validate:function(){w(this,"expression")}}),Ge=f("Unary","operator expression",{$documentation:"Base class for unary expressions",$propdoc:{operator:"[string] the operator",expression:"[AST_Node] expression that this unary operator applies to"},_equals:function(e){return this.operator==e.operator&&this.expression.equals(e.expression)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e)})},_validate:function(){if("Unary"==this.TYPE)throw new Error("should not instantiate AST_Unary");if("string"!=typeof this.operator)throw new Error("operator must be string");w(this,"expression")}}),Ye=f("UnaryPrefix",null,{$documentation:"Unary prefix expression, i.e. `typeof i` or `++i`"},Ge),Je=f("UnaryPostfix",null,{$documentation:"Unary postfix expression, i.e. `i++`"},Ge),Ke=f("Binary","operator left right",{$documentation:"Binary expression, i.e. `a + b`",$propdoc:{left:"[AST_Node] left-hand side expression",operator:"[string] the operator",right:"[AST_Node] right-hand side expression"},_equals:function(e){return this.operator==e.operator&&this.left.equals(e.left)&&this.right.equals(e.right)},walk:function(e){var t=this;e.visit(t,function(){t.left.walk(e),t.right.walk(e)})},_validate:function(){if(this instanceof Qe||w(this,"left"),"string"!=typeof this.operator)throw new Error("operator must be string");w(this,"right")}}),Xe=f("Conditional","condition consequent alternative",{$documentation:"Conditional expression using the ternary operator, i.e. `a ? b : c`",$propdoc:{condition:"[AST_Node]",consequent:"[AST_Node]",alternative:"[AST_Node]"},_equals:function(e){return this.condition.equals(e.condition)&&this.consequent.equals(e.consequent)&&this.alternative.equals(e.alternative)},walk:function(e){var t=this;e.visit(t,function(){t.condition.walk(e),t.consequent.walk(e),t.alternative.walk(e)})},_validate:function(){w(this,"condition"),w(this,"consequent"),w(this,"alternative")}}),Qe=f("Assign",null,{$documentation:"An assignment expression — `a = b + 5`",_validate:function(){if(this.operator.indexOf("=")<0)throw new Error('operator must contain "="');if(this.left instanceof nt){if("="!=this.operator)throw new Error("invalid destructuring operator: "+this.operator);it(this.left,function(e){if(!(e instanceof Ue||e instanceof Tt))throw new Error("left must be assignable: "+e.TYPE)})}else if(!(this.left instanceof $t||this.left instanceof Vt||this.left instanceof Ue&&!this.left.optional||this.left instanceof Tt||this.left instanceof zt))throw new Error("left must be assignable")}},Ke),Ze=f("Await","expression",{$documentation:"An await expression",$propdoc:{expression:"[AST_Node] expression with Promise to resolve on"},_equals:function(e){return this.expression.equals(e.expression)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e)})},_validate:function(){w(this,"expression")}}),et=f("Yield","expression nested",{$documentation:"A yield expression",$propdoc:{expression:"[AST_Node?] return value for iterator, or null if undefined",nested:"[boolean] whether to iterate over expression as generator"},_equals:function(e){return!this.nested==!e.nested&&m(this.expression,e.expression)},walk:function(e){var t=this;e.visit(t,function(){t.expression&&t.expression.walk(e)})},_validate:function(){if(null!=this.expression)w(this,"expression");else if(this.nested)throw new Error("yield* must contain expression")}}),tt=f("Array","elements",{$documentation:"An array literal",$propdoc:{elements:"[AST_Node*] array of elements"},_equals:function(e){return d(this.elements,e.elements)},walk:function(e){var t=this;e.visit(t,function(){t.elements.forEach(function(t){t.walk(e)})})},_validate:function(){qe(this,"elements",!0,!0)}}),nt=f("Destructured","rest",{$documentation:"Base class for destructured literal",$propdoc:{rest:"[(AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)?] rest parameter, or null if absent"},_validate:function(){if("Destructured"==this.TYPE)throw new Error("should not instantiate AST_Destructured")}});function it(e,t,n){if(e instanceof Fe&&n)return it(e.name,t);if(e instanceof nt){if(null!=e.rest&&it(e.rest,t),e instanceof rt)return e.elements.forEach(function(e){e instanceof Ut||it(e,t,!0)});if(e instanceof ot)return e.properties.forEach(function(e){it(e.value,t,!0)})}t(e)}var rt=f("DestructuredArray","elements",{$documentation:"A destructured array literal",$propdoc:{elements:"[(AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)*] array of elements"},_equals:function(e){return m(this.rest,e.rest)&&d(this.elements,e.elements)},walk:function(e){var t=this;e.visit(t,function(){t.elements.forEach(function(t){t.walk(e)}),t.rest&&t.rest.walk(e)})}},nt),st=f("DestructuredKeyVal","key value",{$documentation:"A key: value destructured property",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef] property value"},_equals:function(e){return m(this.key,e.key)&&this.value.equals(e.value)},walk:function(e){var t=this;e.visit(t,function(){t.key instanceof p&&t.key.walk(e),t.value.walk(e)})},_validate:function(){if("string"!=typeof this.key){if(!(this.key instanceof p))throw new Error("key must be string or AST_Node");w(this,"key")}if(!(this.value instanceof p))throw new Error("value must be AST_Node")}}),ot=f("DestructuredObject","properties",{$documentation:"A destructured object literal",$propdoc:{properties:"[AST_DestructuredKeyVal*] array of properties"},_equals:function(e){return m(this.rest,e.rest)&&d(this.properties,e.properties)},walk:function(e){var t=this;e.visit(t,function(){t.properties.forEach(function(t){t.walk(e)}),t.rest&&t.rest.walk(e)})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof st))throw new Error("properties must be AST_DestructuredKeyVal[]")})}},nt),at=f("Object","properties",{$documentation:"An object literal",$propdoc:{properties:"[(AST_ObjectProperty|AST_Spread)*] array of properties"},_equals:function(e){return d(this.properties,e.properties)},walk:function(e){var t=this;e.visit(t,function(){t.properties.forEach(function(t){t.walk(e)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof ct||e instanceof We))throw new Error("properties must contain AST_ObjectProperty and/or AST_Spread only")})}}),ct=f("ObjectProperty","key value",{$documentation:"Base class for literal object properties",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_Node] property value.  For getters and setters this is an AST_Accessor."},_equals:function(e){return m(this.key,e.key)&&this.value.equals(e.value)},walk:function(e){var t=this;e.visit(t,function(){t.key instanceof p&&t.key.walk(e),t.value.walk(e)})},_validate:function(){if("ObjectProperty"==this.TYPE)throw new Error("should not instantiate AST_ObjectProperty");if("string"!=typeof this.key){if(!(this.key instanceof p))throw new Error("key must be string or AST_Node");w(this,"key")}if(!(this.value instanceof p))throw new Error("value must be AST_Node")}}),ut=f("ObjectKeyVal",null,{$documentation:"A key: value object property",_validate:function(){w(this,"value")}},ct),ft=f("ObjectMethod",null,{$documentation:"A key(){} object property",_validate:function(){if(!(this.value instanceof H))throw new Error("value must be AST_LambdaExpression");if(W(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of object method's lambda must be null")}},ut),lt=f("ObjectSetter",null,{$documentation:"An object setter property",_validate:function(){if(!(this.value instanceof $))throw new Error("value must be AST_Accessor")}},ct),pt=f("ObjectGetter",null,{$documentation:"An object getter property",_validate:function(){if(!(this.value instanceof $))throw new Error("value must be AST_Accessor")}},ct),ht=f("Symbol","scope name thedef",{$documentation:"Base class for all symbols",$propdoc:{name:"[string] name of this symbol",scope:"[AST_Scope/S] the current scope (not necessarily the definition scope)",thedef:"[SymbolDef/S] the definition of this symbol"},_equals:function(e){return this.thedef?this.thedef===e.thedef:this.name==e.name},_validate:function(){if("Symbol"==this.TYPE)throw new Error("should not instantiate AST_Symbol");if("string"!=typeof this.name)throw new Error("name must be string")}}),dt=f("SymbolDeclaration","init",{$documentation:"A declaration symbol (symbol in var, function name or argument, symbol in catch)"},ht),mt=f("SymbolConst",null,{$documentation:"Symbol defining a constant"},dt),gt=f("SymbolImport","key",{$documentation:"Symbol defined by an `import` statement",$propdoc:{key:"[AST_String] the original `export` name"},_equals:function(e){return this.name==e.name&&this.key.equals(e.key)},_validate:function(){if(!(this.key instanceof Lt))throw new Error("key must be AST_String")}},mt),_t=f("SymbolLet",null,{$documentation:"Symbol defining a lexical-scoped variable"},dt),vt=f("SymbolVar",null,{$documentation:"Symbol defining a variable"},dt),yt=f("SymbolFunarg","unused",{$documentation:"Symbol naming a function argument"},vt),bt=f("SymbolDefun",null,{$documentation:"Symbol defining a function"},dt),xt=f("SymbolLambda",null,{$documentation:"Symbol naming a function expression"},dt),wt=f("SymbolDefClass",null,{$documentation:"Symbol defining a class"},mt),St=f("SymbolClass",null,{$documentation:"Symbol naming a class expression"},mt),kt=f("SymbolCatch",null,{$documentation:"Symbol naming the exception in catch"},dt),At=f("Label","references",{$documentation:"Symbol naming a label (declaration)",$propdoc:{references:"[AST_LoopControl*] a list of nodes referring to this label"},initialize:function(){this.references=[],this.thedef=this}},ht),Tt=f("SymbolRef","fixed in_arg redef",{$documentation:"Reference to some symbol (not definition/declaration)"},ht),Et=f("SymbolExport","alias",{$documentation:"Reference in an `export` statement",$propdoc:{alias:"[AST_String] the `export` alias"},_equals:function(e){return this.name==e.name&&this.alias.equals(e.alias)},_validate:function(){if(!(this.alias instanceof Lt))throw new Error("alias must be AST_String")}},Tt),Ct=f("LabelRef",null,{$documentation:"Reference to a label symbol"},ht),Pt=f("ObjectIdentity",null,{$documentation:"Base class for `super` & `this`",_equals:a,_validate:function(){if("ObjectIdentity"==this.TYPE)throw new Error("should not instantiate AST_ObjectIdentity")}},ht),Ot=f("Super",null,{$documentation:"The `super` symbol",_validate:function(){if("super"!==this.name)throw new Error('name must be "super"')}},Pt),Dt=f("This",null,{$documentation:"The `this` symbol",_validate:function(){if("This"==this.TYPE&&"this"!==this.name)throw new Error('name must be "this"')}},Pt),It=f("NewTarget",null,{$documentation:"The `new.target` symbol",initialize:function(){this.name="new.target"},_validate:function(){if("new.target"!==this.name)throw new Error('name must be "new.target": '+this.name)}},Dt),Nt=f("Template","expressions strings tag",{$documentation:"A template literal, i.e. tag`str1${expr1}...strN${exprN}strN+1`",$propdoc:{expressions:"[AST_Node*] the placeholder expressions",strings:"[string*] the raw text segments",tag:"[AST_Node?] tag function, or null if absent"},_equals:function(e){return m(this.tag,e.tag)&&(n=this.strings,i=e.strings,n.length==i.length&&t(n,function(e,t){return e==i[t]}))&&d(this.expressions,e.expressions);var n,i},walk:function(e){var t=this;e.visit(t,function(){t.tag&&t.tag.walk(e),t.expressions.forEach(function(t){t.walk(e)})})},_validate:function(){if(this.expressions.length+1!=this.strings.length)throw new Error("malformed template with "+this.expressions.length+" placeholder(s) but "+this.strings.length+" text segment(s)");qe(this,"expressions"),this.strings.forEach(function(e){if("string"!=typeof e)throw new Error("strings must contain string")}),null!=this.tag&&w(this,"tag")}}),Rt=f("Constant",null,{$documentation:"Base class for all constants",_equals:function(e){return this.value===e.value},_validate:function(){if("Constant"==this.TYPE)throw new Error("should not instantiate AST_Constant")}}),Lt=f("String","quote value",{$documentation:"A string literal",$propdoc:{quote:"[string?] the original quote character",value:"[string] the contents of this string"},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},Rt),Mt=f("Number","value",{$documentation:"A number literal",$propdoc:{value:"[number] the numeric value"},_validate:function(){if("number"!=typeof this.value)throw new Error("value must be number");if(!isFinite(this.value))throw new Error("value must be finite");if(this.value<0)throw new Error("value cannot be negative")}},Rt),jt=f("BigInt","value",{$documentation:"A BigInt literal",$propdoc:{value:"[string] the numeric representation"},_validate:function(){if("string"!=typeof this.value)throw new Error("value must be string");if("-"==this.value[0])throw new Error("value cannot be negative")}},Rt),Ft=f("RegExp","value",{$documentation:"A regexp literal",$propdoc:{value:"[RegExp] the actual regexp"},_equals:function(e){return""+this.value==""+e.value},_validate:function(){if(!(this.value instanceof RegExp))throw new Error("value must be RegExp")}},Rt),qt=f("Atom",null,{$documentation:"Base class for atoms",_equals:a,_validate:function(){if("Atom"==this.TYPE)throw new Error("should not instantiate AST_Atom")}},Rt),Bt=f("Null",null,{$documentation:"The `null` atom",value:null},qt),Vt=f("NaN",null,{$documentation:"The impossible value",value:NaN},qt),zt=f("Undefined",null,{$documentation:"The `undefined` value",value:void 0},qt),Ut=f("Hole",null,{$documentation:"A hole in an array",value:void 0},qt),$t=f("Infinity",null,{$documentation:"The `Infinity` value",value:1/0},qt),Ht=f("Boolean",null,{$documentation:"Base class for booleans",_validate:function(){if("Boolean"==this.TYPE)throw new Error("should not instantiate AST_Boolean")}},qt),Wt=f("False",null,{$documentation:"The `false` atom",value:!1},Ht),Gt=f("True",null,{$documentation:"The `true` atom",value:!0},Ht);function Yt(e){this.callback=e,this.directives=Object.create(null),this.stack=[]}function Jt(e,t){Yt.call(this),this.before=e,this.after=t}return Yt.prototype={visit:function(e,t){this.push(e);var n=this.callback(e,t||s);!n&&t&&t(),this.pop()},parent:function(e){return this.stack[this.stack.length-2-(e||0)]},push:function(e){var t;e instanceof re?(this.directives=Object.create(this.directives),t="use strict"):e instanceof v?t=e.value:e instanceof U&&(this.directives=Object.create(this.directives)),t&&!this.directives[t]&&(this.directives[t]=e),this.stack.push(e)},pop:function(){var e=this.stack.pop();(e instanceof re||e instanceof U)&&(this.directives=Object.getPrototypeOf(this.directives))},self:function(){return this.stack[this.stack.length-1]},find_parent:function(e){for(var t=this.stack,n=t.length-1;--n>=0;){var i=t[n];if(i instanceof e)return i}},has_directive:function(e){var t=this.directives[e];if(t)return t;var n=this.stack[this.stack.length-1];if(n instanceof B)for(var i=0;i<n.body.length;++i){var r=n.body[i];if(!(r instanceof v))break;if(r.value==e)return r}},loopcontrol_target:function(e){var t=this.stack;if(e.label)for(var n=t.length;--n>=0;){var i=t[n];if(i instanceof P&&i.label.name==e.label.name)return i.body}else for(var n=t.length;--n>=0;){var i=t[n];if(i instanceof O||e instanceof ve&&i instanceof xe)return i}},in_boolean_context:function(){for(var e,t=!0,n=0,i=this.self();e=this.parent(n++);i=e){if(e instanceof Ke)switch(e.operator){case"&&":case"||":e.left===i&&(t=!1);continue;default:return!1}if(!(e instanceof Xe)){if(e instanceof D)return e.condition===i;if(e instanceof R)return e.condition===i;if(e instanceof be)return e.condition===i;if(e instanceof me){if(e.in_bool)return!0;for(;e=this.parent(n++);)if(e instanceof U){if(e.name)return!1;if("Call"!=(e=this.parent(n++)).TYPE)return!1;break}}if(e instanceof ze){if(e.tail_node()===i)continue;return!t||"d"}return e instanceof S?!t||"d":e instanceof Ye&&"!"==e.operator}if(e.condition===i)return!0}}},Jt.prototype=new Yt,function(e){function t(e,t){return i(e,function(e){return e.transform(t,!0)})}function n(e,n){e.argnames=t(e.argnames,n),e.rest&&(e.rest=e.rest.transform(n)),e.value?e.value=e.value.transform(n):e.body=t(e.body,n)}e(p,s),e(P,function(e,t){e.label=e.label.transform(t),e.body=e.body.transform(t)}),e(S,function(e,t){e.body=e.body.transform(t)}),e(T,function(e,n){e.body=t(e.body,n)}),e(I,function(e,t){e.body=e.body.transform(t),e.condition=e.condition.transform(t)}),e(N,function(e,t){e.condition=e.condition.transform(t),e.body=e.body.transform(t)}),e(R,function(e,t){e.init&&(e.init=e.init.transform(t)),e.condition&&(e.condition=e.condition.transform(t)),e.step&&(e.step=e.step.transform(t)),e.body=e.body.transform(t)}),e(L,function(e,t){e.init=e.init.transform(t),e.object=e.object.transform(t),e.body=e.body.transform(t)}),e(q,function(e,t){e.expression=e.expression.transform(t),e.body=e.body.transform(t)}),e(de,function(e,t){e.value&&(e.value=e.value.transform(t))}),e(_e,function(e,t){e.label&&(e.label=e.label.transform(t))}),e(be,function(e,t){e.condition=e.condition.transform(t),e.body=e.body.transform(t),e.alternative&&(e.alternative=e.alternative.transform(t))}),e(xe,function(e,n){e.expression=e.expression.transform(n),e.body=t(e.body,n)}),e(ke,function(e,n){e.expression=e.expression.transform(n),e.body=t(e.body,n)}),e(Ae,function(e,n){e.body=t(e.body,n),e.bcatch&&(e.bcatch=e.bcatch.transform(n)),e.bfinally&&(e.bfinally=e.bfinally.transform(n))}),e(Te,function(e,n){e.argname&&(e.argname=e.argname.transform(n)),e.body=t(e.body,n)}),e(Ce,function(e,n){e.definitions=t(e.definitions,n)}),e(Ie,function(e,t){e.name=e.name.transform(t),e.value&&(e.value=e.value.transform(t))}),e(Fe,function(e,t){e.name=e.name.transform(t),e.value=e.value.transform(t)}),e(U,function(e,n){e.name&&(e.name=e.name.transform(n)),e.argnames=t(e.argnames,n),e.rest&&(e.rest=e.rest.transform(n)),e.body=t(e.body,n)}),e(G,n),e(Y,n),e(re,function(e,n){e.name&&(e.name=e.name.transform(n)),e.extends&&(e.extends=e.extends.transform(n)),e.properties=t(e.properties,n)}),e(ae,function(e,t){e.key instanceof p&&(e.key=e.key.transform(t)),e.value&&(e.value=e.value.transform(t))}),e(Be,function(e,n){e.expression=e.expression.transform(n),e.args=t(e.args,n)}),e(ze,function(e,n){e.expressions=t(e.expressions,n)}),e(Ze,function(e,t){e.expression=e.expression.transform(t)}),e(et,function(e,t){e.expression&&(e.expression=e.expression.transform(t))}),e($e,function(e,t){e.expression=e.expression.transform(t)}),e(He,function(e,t){e.expression=e.expression.transform(t),e.property=e.property.transform(t)}),e(We,function(e,t){e.expression=e.expression.transform(t)}),e(Ge,function(e,t){e.expression=e.expression.transform(t)}),e(Ke,function(e,t){e.left=e.left.transform(t),e.right=e.right.transform(t)}),e(Xe,function(e,t){e.condition=e.condition.transform(t),e.consequent=e.consequent.transform(t),e.alternative=e.alternative.transform(t)}),e(tt,function(e,n){e.elements=t(e.elements,n)}),e(rt,function(e,n){e.elements=t(e.elements,n),e.rest&&(e.rest=e.rest.transform(n))}),e(st,function(e,t){e.key instanceof p&&(e.key=e.key.transform(t)),e.value=e.value.transform(t)}),e(ot,function(e,n){e.properties=t(e.properties,n),e.rest&&(e.rest=e.rest.transform(n))}),e(at,function(e,n){e.properties=t(e.properties,n)}),e(ct,function(e,t){e.key instanceof p&&(e.key=e.key.transform(t)),e.value=e.value.transform(t)}),e(Ne,function(e,t){e.body=e.body.transform(t)}),e(Re,function(e,t){e.body=e.body.transform(t)}),e(Me,function(e,n){e.properties=t(e.properties,n)}),e(je,function(e,n){e.all&&(e.all=e.all.transform(n)),e.default&&(e.default=e.default.transform(n)),e.properties&&(e.properties=t(e.properties,n))}),e(Nt,function(e,n){e.tag&&(e.tag=e.tag.transform(n)),e.expressions=t(e.expressions,n)})}(function(e,t){e.DEFMETHOD("transform",function(e,n){var i,r;return e.push(this),e.before&&(i=e.before(this,t,n)),void 0===i&&(t(i=this,e),e.after&&void 0!==(r=e.after(i,n))&&(i=r)),e.pop(),i})}),u={parse:null,DEFNODE:f,AST_Token:l,AST_Node:p,AST_Statement:g,AST_Debugger:_,AST_Directive:v,AST_EmptyStatement:y,AST_SimpleStatement:S,AST_BlockScope:k,AST_Block:T,AST_BlockStatement:E,AST_StatementWithBody:C,AST_LabeledStatement:P,AST_IterationStatement:O,AST_DWLoop:D,AST_Do:I,AST_While:N,AST_For:R,AST_ForEnumeration:L,AST_ForIn:M,AST_ForOf:j,AST_ForAwaitOf:F,AST_With:q,AST_Scope:B,AST_Toplevel:V,AST_ClassInitBlock:z,AST_Lambda:U,AST_Accessor:$,AST_LambdaExpression:H,AST_Arrow:G,AST_AsyncArrow:Y,AST_AsyncFunction:J,AST_Function:X,AST_GeneratorFunction:Q,AST_AsyncGeneratorFunction:K,AST_LambdaDefinition:Z,AST_AsyncDefun:ee,AST_AsyncGeneratorDefun:te,AST_Defun:ne,AST_GeneratorDefun:ie,AST_Class:re,AST_DefClass:se,AST_ClassExpression:oe,AST_ClassProperty:ae,AST_ClassField:ce,AST_ClassGetter:ue,AST_ClassSetter:fe,AST_ClassMethod:le,AST_ClassInit:pe,AST_Jump:he,AST_Exit:de,AST_Return:me,AST_Throw:ge,AST_LoopControl:_e,AST_Break:ve,AST_Continue:ye,AST_If:be,AST_Switch:xe,AST_SwitchBranch:we,AST_Default:Se,AST_Case:ke,AST_Try:Ae,AST_Catch:Te,AST_Finally:Ee,AST_Definitions:Ce,AST_Const:Pe,AST_Let:Oe,AST_Var:De,AST_VarDef:Ie,AST_ExportDeclaration:Ne,AST_ExportDefault:Re,AST_ExportForeign:Le,AST_ExportReferences:Me,AST_Import:je,AST_DefaultValue:Fe,AST_Call:Be,AST_New:Ve,AST_Sequence:ze,AST_PropAccess:Ue,AST_Dot:$e,AST_Sub:He,AST_Spread:We,AST_Unary:Ge,AST_UnaryPrefix:Ye,AST_UnaryPostfix:Je,AST_Binary:Ke,AST_Conditional:Xe,AST_Assign:Qe,AST_Await:Ze,AST_Yield:et,AST_Array:tt,AST_Destructured:nt,AST_DestructuredArray:rt,AST_DestructuredKeyVal:st,AST_DestructuredObject:ot,AST_Object:at,AST_ObjectProperty:ct,AST_ObjectKeyVal:ut,AST_ObjectMethod:ft,AST_ObjectSetter:lt,AST_ObjectGetter:pt,AST_Symbol:ht,AST_SymbolDeclaration:dt,AST_SymbolConst:mt,AST_SymbolImport:gt,AST_SymbolLet:_t,AST_SymbolVar:vt,AST_SymbolFunarg:yt,AST_SymbolDefun:bt,AST_SymbolLambda:xt,AST_SymbolDefClass:wt,AST_SymbolClass:St,AST_SymbolCatch:kt,AST_Label:At,AST_SymbolRef:Tt,AST_SymbolExport:Et,AST_LabelRef:Ct,AST_ObjectIdentity:Pt,AST_Super:Ot,AST_This:Dt,AST_NewTarget:It,AST_Template:Nt,AST_Constant:Rt,AST_String:Lt,AST_Number:Mt,AST_BigInt:jt,AST_RegExp:Ft,AST_Atom:qt,AST_Null:Bt,AST_NaN:Vt,AST_Undefined:zt,AST_Hole:Ut,AST_Infinity:$t,AST_Boolean:Ht,AST_False:Wt,AST_True:Gt,first_in_statement:function(e,t,n){for(var i,r=e.parent(-1),s=0;i=e.parent(s++);r=i){if(W(i))return t&&i.value===r;if(i instanceof Ke){if(i.left===r)continue}else if("Call"==i.TYPE){if(i.expression===r)continue}else if(i instanceof Xe){if(i.condition===r)continue}else{if(i instanceof Re)return n;if(i instanceof Ue){if(i.expression===r)continue}else if(i instanceof ze){if(i.expressions[0]===r)continue}else{if(i instanceof S)return!0;if(i instanceof Nt){if(i.tag===r)continue}else if(i instanceof Je&&i.expression===r)continue}}return!1}},root_expr:function(e){for(;e instanceof Ue;)e=e.expression;return e},is_arrow:W,is_generator:function(e){return e instanceof te||e instanceof K||e instanceof ie||e instanceof Q},walk_lambda:function(e,t){W(e)&&e.value?e.value.walk(t):A(e,t)},walk_body:A,is_statement:b,is_async:function(e){return e instanceof Y||e instanceof ee||e instanceof J||e instanceof te||e instanceof K},TreeWalker:Yt,TreeTransformer:Jt}}),define("skylark-uglifyjs/parse",["./utils","./ast"],function(e,t){"use strict";const{characters:n,defaults:i,find_if:r,makePredicate:s,set_annotation:o,configure_error_stack:a,HOP:c,all:u}=e,{AST_Accessor:f,AST_Array:l,AST_Arrow:p,AST_Assign:h,AST_AsyncFunction:d,AST_AsyncDefun:m,AST_AsyncArrow:g,AST_AsyncGeneratorFunction:_,AST_AsyncGeneratorDefun:v,AST_Await:y,AST_BigInt:b,AST_Binary:x,AST_BlockStatement:w,AST_Break:S,AST_Call:k,AST_Case:A,AST_Catch:T,AST_Chain:E,AST_ClassExpression:C,AST_ClassGetter:P,AST_ClassInit:O,AST_ClassMethod:D,AST_ClassPrivateProperty:I,AST_ClassProperty:N,AST_ClassStaticBlock:R,AST_ClassSetter:L,AST_ConciseMethod:M,AST_PrivateIn:j,AST_PrivateGetter:F,AST_PrivateMethod:q,AST_PrivateSetter:B,AST_Conditional:V,AST_Const:z,AST_Continue:U,AST_Debugger:$,AST_Default:H,AST_DefaultAssign:W,AST_DefaultValue:G,AST_DefClass:Y,AST_Definitions:J,AST_Defun:K,AST_Destructured:X,AST_DestructuredArray:Q,AST_DestructuredKeyVal:Z,AST_DestructuredObject:ee,AST_Destructuring:te,AST_Directive:ne,AST_Do:ie,AST_Dot:re,AST_DotHash:se,AST_EmptyStatement:oe,AST_Expansion:ae,AST_Export:ce,AST_ExportDeclaration:ue,AST_False:fe,AST_Finally:le,AST_For:pe,AST_ForIn:he,AST_ForOf:de,AST_Function:me,AST_Hole:ge,AST_If:_e,AST_Import:ve,AST_ImportMeta:ye,AST_IterationStatement:be,AST_Label:xe,AST_LabeledStatement:we,AST_LabelRef:Se,AST_Let:ke,AST_NameMapping:Ae,AST_New:Te,AST_NewTarget:Ee,AST_Node:Ce,AST_Null:Pe,AST_Number:Oe,AST_Object:De,AST_ObjectGetter:Ie,AST_ObjectKeyVal:Ne,AST_ObjectMethod:Re,AST_ObjectProperty:Le,AST_ObjectSetter:Me,AST_PrefixedTemplateString:je,AST_PropAccess:Fe,AST_RegExp:qe,AST_Return:Be,AST_Sequence:Ve,AST_SimpleStatement:ze,AST_Spread:Ue,AST_String:$e,AST_Sub:He,AST_Super:We,AST_Switch:Ge,AST_SymbolCatch:Ye,AST_SymbolClass:Je,AST_SymbolClassProperty:Ke,AST_SymbolConst:Xe,AST_SymbolDeclaration:Qe,AST_SymbolDefClass:Ze,AST_SymbolDefun:et,AST_SymbolExport:tt,AST_SymbolExportForeign:nt,AST_SymbolFunarg:it,AST_SymbolImport:rt,AST_SymbolImportForeign:st,AST_SymbolLambda:ot,AST_SymbolLet:at,AST_SymbolMethod:ct,AST_SymbolRef:ut,AST_SymbolVar:ft,AST_Template:lt,AST_TemplateSegment:pt,AST_TemplateString:ht,AST_This:dt,AST_SymbolPrivateProperty:mt,AST_Throw:gt,AST_Token:_t,AST_Toplevel:vt,AST_True:yt,AST_Try:bt,AST_TryBlock:xt,AST_UnaryPostfix:wt,AST_UnaryPrefix:St,AST_Var:kt,AST_VarDef:At,AST_While:Tt,AST_With:Et,AST_Yield:Ct,_INLINE:Pt,_NOINLINE:Ot,_PURE:Dt,_KEY:It,_MANGLEPROP:Nt}=t;var Rt="break case catch class const continue debugger default delete do else extends finally for function if in instanceof new return switch throw try typeof var void while with",Lt="false null true",Mt=["abstract async await boolean byte char double enum export final float goto implements import int interface let long native package private protected public short static super synchronized this throws transient volatile yield",Lt,Rt].join(" "),jt="return new delete throw else case";Rt=s(Rt),Mt=s(Mt),jt=s(jt),Lt=s(Lt);var Ft=/^0b([01]+)$/i,qt=/^0x([0-9a-f]+)$/i,Bt=/^0o?([0-7]+)$/i,Vt=s(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%","**",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=","**=",">>=","<<=",">>>=","&=","|=","^=","&&","||","??","&&=","||=","??="]),zt="\n\r\u2028\u2029",Ut="+-*&%=<>!?|~^",$t=",;:)}]",Ht="[{(,;:",Wt=Ht+"`)}]",Gt=zt+"  \t\f\v​             　\ufeff",Yt=s(n("./'\"#"+Ut+Wt+Gt));function Jt(e){return e>=48&&e<=57}function Kt(e){return!Yt[e]}function Xt(e){return/^[a-z_$][a-z0-9_$]*$/i.test(e)}function Qt(e){switch(e[0]){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"u":var t;if("{"==e[1]&&"}"==e.slice(-1))t=e.slice(2,-1);else{if(5!=e.length)return;t=e.slice(1)}var n=parseInt(t,16);if(n<0||isNaN(n))return;if(n<65536)return String.fromCharCode(n);if(n>1114111)return;return String.fromCharCode(55232+(n>>10))+String.fromCharCode(56320+(1023&n));case"v":return"\v";case"x":if(3!=e.length)return;var n=parseInt(e.slice(1),16);if(n<0||isNaN(n))return;return String.fromCharCode(n);case"\r":case"\n":return"";default:if("0"==e)return"\0";if(e[0]>="0"&&e[0]<="9")return;return e}}function Zt(e,t,n,i,r){this.message=e,this.filename=t,this.line=n,this.col=i,this.pos=r}function en(e,t,n,i,r){throw new Zt(e,t,n,i,r)}function tn(e,t,n){return e.type==t&&(null==n||e.value==n)}zt=s(n(zt)),Ut=s(n(Ut)),$t=s(n($t)),Ht=s(n(Ht)),Wt=s(n(Wt)),Gt=s(n(Gt)),Zt.prototype=Object.create(Error.prototype),Zt.prototype.constructor=Zt,Zt.prototype.name="SyntaxError",a(Zt);var nn={};function rn(e,t,n,i){var r={text:e,filename:t,pos:0,tokpos:0,line:1,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[],directives:Object.create(null),read_template:T("Unterminated template literal",function(e){for(var t="";;){var n=i();switch(n){case"\\":n+=i();break;case"`":return void e.push(t);case"$":if("{"==o())return a(),e.push(t),r.regex_allowed=!0,!0}t+=n}function i(){var e=a(!0,!0);return"\r"==e?"\n":e}})},s=!1;function o(){return r.text.charAt(r.pos)}function a(e,t){var n=r.text.charAt(r.pos++);if(e&&!n)throw nn;return zt[n]?(r.col=0,r.line++,t||(r.newline_before=!0),"\r"==n&&"\n"==o()&&(r.pos++,n="\n")):r.col++,n}function c(e){for(;e-- >0;)a()}function u(e){return r.text.substr(r.pos,e.length)==e}function f(){r.tokline=r.line,r.tokcol=r.col,r.tokpos=r.pos}function l(n,i,o){r.regex_allowed="operator"==n&&!on[i]||"keyword"==n&&jt[i]||"punc"==n&&Ht[i],"punc"==n&&"."==i?s=!0:o||(s=!1);var a={type:n,value:i,line:r.tokline,col:r.tokcol,pos:r.tokpos,endline:r.line,endcol:r.col,endpos:r.pos,nlb:r.newline_before,file:t};return/^(?:num|string|regexp)$/i.test(n)&&(a.raw=e.substring(a.pos,a.endpos)),o||(a.comments_before=r.comments_before,a.comments_after=r.comments_before=[]),r.newline_before=!1,new _t(a)}function p(){for(;Gt[o()];)a()}function h(e){en(e,t,r.tokline,r.tokcol,r.tokpos)}function d(e){return/^0[0-7_]+$/.test(e)}function m(e){var t=!1,n=!1,i=!1,r="."==e,s=function(e){var t,n="";for(;(t=o())&&e(t,n);)n+=a();return n}(function(e,s){switch(e){case"x":case"X":return!i&&(i=!0);case"e":case"E":return!!i||!t&&(t=n=!0);case"+":case"-":return n;case n=!1,".":return!(r||t||i||d(s))&&(r=!0)}return/[_0-9a-dfo]/i.test(e)});e&&(s=e+s),d(s)?E.has_directive("use strict")&&h("Legacy octal literals are not allowed in strict mode"):s=s.replace(i?/([1-9a-f]|.0)_(?=[0-9a-f])/gi:/([1-9]|.0)_(?=[0-9])/gi,"$1");var c=function(e){var t;if(t=Ft.exec(e))return parseInt(t[1],2);if(t=qt.exec(e))return parseInt(t[1],16);if(t=Bt.exec(e))return parseInt(t[1],8);var n=parseFloat(e);if(n==e)return n}(s);return isNaN(c)&&h("Invalid syntax: "+s),r||t||"n"!=o()?l("num",c):l("bigint",s.toLowerCase()+a())}function g(e){var t=a(!0,e);if(t>="0"&&t<="7")return function(e){var t=o();t>="0"&&t<="7"&&(e+=a(!0))[0]<="3"&&(t=o())>="0"&&t<="7"&&(e+=a(!0));if("0"===e)return"\0";e.length>0&&E.has_directive("use strict")&&h("Legacy octal escape sequences are not allowed in strict mode");return String.fromCharCode(parseInt(e,8))}(t);if("u"==t){var n=a(!0,e);if(t+=n,"{"!=n)t+=a(!0,e)+a(!0,e)+a(!0,e);else do{n=a(!0,e),t+=n}while("}"!=n)}else"x"==t&&(t+=a(!0,e)+a(!0,e));var i=Qt(t);return"string"!=typeof i&&h("Invalid escape sequence: \\"+t),i}var _=T("Unterminated string constant",function(e){for(var t=a(),n="";;){var i=a(!0,!0);if("\\"==i)i=g(!0);else if(zt[i])h("Unterminated string constant");else if(i==t)break;n+=i}var r=l("string",n);return r.quote=e,r});function v(e){var t,n=r.regex_allowed,i=function(){for(var e=r.text,t=r.pos;t<r.text.length;++t)if(zt[e[t]])return t;return-1}();return-1==i?(t=r.text.substr(r.pos),r.pos=r.text.length):(t=r.text.substring(r.pos,i),r.pos=i),r.col=r.tokcol+(r.pos-r.tokpos),r.comments_before.push(l(e,t,!0)),r.regex_allowed=n,E}var y=T("Unterminated multiline comment",function(){var e=r.regex_allowed,t=function(e,t){var n=r.text.indexOf(e,r.pos);if(t&&-1==n)throw nn;return n}("*/",!0),n=r.text.substring(r.pos,t).replace(/\r\n|\r|\u2028|\u2029/g,"\n");return c(n.length+2),r.comments_before.push(l("comment2",n,!0)),r.regex_allowed=e,E});function b(){for(var e,t=!1,n=!1,i="#"==o()?a():"";e=o();)if(t)"u"!=e&&h("Expecting UnicodeEscapeSequence -- uXXXX"),Kt(e=g())||h("Unicode char: "+e.charCodeAt(0)+" is not valid in identifier"),i+=e,t=!1;else if("\\"==e)n=t=!0,a();else{if(!Kt(e))break;i+=a()}if(Rt[i]&&n){var r=i.charCodeAt(0).toString(16).toUpperCase();i="\\u"+"0000".substr(r.length)+r+i.slice(1)}return i}var x=T("Unterminated regular expression",function(e){for(var t,n=!1,i=!1;t=a(!0);)if(zt[t])h("Unexpected line terminator");else if(n)e+="\\"+t,n=!1;else if("["==t)i=!0,e+=t;else if("]"==t&&i)i=!1,e+=t;else{if("/"==t&&!i)break;"\\"==t?n=!0:e+=t}var r=b();try{var s=new RegExp(e,r);return s.raw_source=e,l("regexp",s)}catch(e){h(e.message)}});function w(e){return l("operator",function e(t){if(!o())return t;var n=t+o();return Vt[n]?(a(),e(n)):t}(e||a()))}function S(){switch(a(),o()){case"/":return a(),v("comment1");case"*":return a(),y()}return r.regex_allowed?x(""):w("/")}function k(){return a(),u("..")?l("operator","."+a()+a()):Jt(o().charCodeAt(0))?m("."):l("punc",".")}function A(){var e=b();return s?l("name",e):Lt[e]?l("atom",e):Rt[e]?Vt[e]?l("operator",e):l("keyword",e):l("name",e)}function T(e,t){return function(n){try{return t(n)}catch(t){if(t!==nn)throw t;h(e)}}}function E(e){if(null!=e)return x(e);for(i&&0==r.pos&&u("#!")&&(f(),c(2),v("comment5"));;){if(p(),f(),n){if(u("\x3c!--")){c(4),v("comment3");continue}if(u("--\x3e")&&r.newline_before){c(3),v("comment4");continue}}var t=o();if(!t)return l("eof");var s=t.charCodeAt(0);switch(s){case 34:case 39:return _(t);case 46:return k();case 47:var d=S();if(d===E)continue;return d}if(Jt(s))return m();if(Wt[t])return l("punc",a());if(u("=>"))return l("punc",a()+a());if(Ut[t])return w();if(35==s||92==s||!Yt[t])return A();break}h("Unexpected character '"+t+"'")}return E.context=function(e){return e&&(r=e),r},E.add_directive=function(e){r.directives[e]=!0},E.push_directives_stack=function(){r.directives=Object.create(r.directives)},E.pop_directives_stack=function(){r.directives=Object.getPrototypeOf(r.directives)},E.has_directive=function(e){return!!r.directives[e]},E}var sn=s("typeof void delete -- ++ ! ~ - +"),on=s("-- ++"),an=s("= += -= /= *= %= **= >>= <<= >>>= &= |= ^= &&= ||= ??="),cn=function(e,t){for(var n=0;n<e.length;)for(var i=e[n++],r=0;r<i.length;r++)t[i[r]]=n;return t}([["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"],["**"]],{}),un=s("atom bigint num regexp string");function fn(e,t){t=i(t,{bare_returns:!1,expression:!1,filename:null,html5_comments:!0,module:!1,shebang:!0,strict:!1,toplevel:null},!0);var n={input:"string"==typeof e?rn(e,t.filename,t.html5_comments,t.shebang):e,in_async:!1,in_directives:!0,in_funarg:-1,in_function:0,in_generator:!1,in_loop:0,labels:[],peeked:null,prev:null,token:null};function s(e,t){return tn(n.token,e,t)}function o(){return n.peeked||(n.peeked=n.input())}function a(){return n.prev=n.token,n.peeked?(n.token=n.peeked,n.peeked=null):n.token=n.input(),n.in_directives=n.in_directives&&("string"==n.token.type||s("punc",";")),n.token}function E(){return n.prev}function I(e,t,i,r){var s=n.input.context();en(e,s.filename,null!=t?t:s.tokline,null!=i?i:s.tokcol,null!=r?r:s.tokpos)}function N(e,t){I(t,e.line,e.col)}function R(e,t){return e+(void 0===t?"":" «"+t+"»")}function M(e){null==e&&(e=n.token),N(e,"Unexpected token: "+R(e.type,e.value))}function j(e,t){if(s(e,t))return a();N(n.token,"Unexpected token: "+R(n.token.type,n.token.value)+", expected: "+R(e,t))}function F(e){return j("punc",e)}function q(e){return e.nlb||!u(e.comments_before,function(e){return!e.nlb})}function B(){return!t.strict&&(s("eof")||s("punc","}")||q(n.token))}function W(e){s("punc",";")?a():e||B()||F(";")}function te(){F("(");var e=hn();return F(")"),e}function se(e){return function(){var t=n.token,i=e.apply(null,arguments),r=E();return i.start=t,i.end=r,i}}function ae(){(s("operator","/")||s("operator","/="))&&(n.peeked=null,n.token=n.input(n.token.value.substr(1)))}n.token=a();var ce=se(function(e){switch(ae(),n.token.type){case"string":var i=n.in_directives,r=hn();if(i)if(r instanceof $e){var c=r.start.raw.slice(1,-1);n.input.add_directive(c),r.value=c}else n.in_directives=i=!1;return W(),i?new ne(r):new ze({body:r});case"num":case"bigint":case"regexp":case"operator":case"atom":return ye();case"name":switch(n.token.value){case"async":if(tn(o(),"keyword","function"))return a(),a(),s("operator","*")?(a(),nt(v)):nt(m);break;case"await":if(n.in_async)return ye();break;case"export":return e||""===t.module||M(),a(),function(){if(s("operator","*")){var e=n.token,t=e;return a(),s("name","as")&&(a(),st()||j("name"),t=n.token,a()),j("name","from"),new AST_ExportForeign({aliases:[ct(t)],keys:[ct(e)],path:pt()})}if(s("punc","{")){a();for(var i=[],r=[];st();){var e=n.token;a(),r.push(e),s("name","as")?(a(),st()||j("name"),i.push(n.token),a()):i.push(e),s("punc","}")||F(",")}return F("}"),s("name","from")?(a(),new AST_ExportForeign({aliases:i.map(ct),keys:r.map(ct),path:pt()})):(W(),new AST_ExportReferences({properties:r.map(function(e,t){tn(e,"name")||N(e,"Name expected");var n=zt(tt,e);return n.alias=ct(i[t]),n})}))}if(s("keyword","default")){a();var c=n.token,u=function(){if(s("name","async")){if(!tn(o(),"keyword","function"))return;return a(),a(),s("operator","*")?(a(),ht(v,nt(_))):ht(m,nt(d))}if(s("keyword"))switch(n.token.value){case"class":return a(),ht(Y,Le(C));case"function":return a(),s("operator","*")?(a(),ht(AST_GeneratorDefun,nt(AST_GeneratorFunction))):ht(K,nt(me))}}();return u?(u.start=c,u.end=E()):(ae(),u=hn(),W()),new AST_ExportDefault({body:u})}return new ue({body:mt()})}();case"import":var f=o();if("punc"==f.type&&/^[(.]$/.test(f.value))break;return e||""===t.module||M(),a(),function(){var e,t=null,i=Ht(rt,!0),r=null;i?(i.key=new $e({start:i.start,value:"",end:i.end}),(e=s("punc",","))&&a()):e=!s("string");if(e)if(s("operator","*")){var c=n.token;a(),j("name","as"),(t=Ht(rt)).key=ct(c)}else{for(F("{"),r=[];st();){var u;if(tn(o(),"name","as")){var c=n.token;a(),a(),(u=Ht(rt)).key=ct(c)}else(u=Ht(rt)).key=new $e({start:u.start,value:u.name,end:u.end});r.push(u),s("punc","}")||F(",")}F("}")}(t||i||r)&&j("name","from");return new ve({all:t,default:i,path:pt(),properties:r})}();case"let":if(Ot()){a();var l=It();return W(),l}break;case"yield":if(n.in_generator)return ye()}return tn(o(),"punc",":")?function(){var e=Ht(xe);u(n.labels,function(t){return t.name!=e.name})||I("Label "+e.name+" defined twice");F(":"),n.labels.push(e);var t=ce();n.labels.pop(),t instanceof be||e.references.forEach(function(t){t instanceof U&&N(t.label.start,"Continue label `"+e.name+"` must refer to IterationStatement")});return new we({body:t,label:e})}():ye();case"punc":switch(n.token.value){case"{":return new w({start:n.token,body:_t(),end:E()});case"[":case"(":case"`":return ye();case";":return n.in_directives=!1,a(),new oe;default:M()}case"keyword":switch(n.token.value){case"break":return a(),Ae(S);case"class":return a(),Le(Y);case"const":a();var l=Dt();return W(),l;case"continue":return a(),Ae(U);case"debugger":return a(),W(),new $;case"do":a();var r=dn(ce);j("keyword","while");var p=te();return W(!0),new ie({body:r,condition:p});case"while":return a(),new Tt({condition:te(),body:dn(ce)});case"for":return a(),function(){var e=s("name","await")&&a();F("(");var t=null;if(e||!s("punc",";")){var n;if(t=s("keyword","const")?(a(),Dt(!0)):s("name","let")&&Ot()?(a(),It(!0)):s("keyword","var")?(a(),Nt(!0)):hn(!0),e?(j("name","of"),n=AST_ForAwaitOf):s("operator","in")?(a(),n=he):s("name","of")&&(a(),n=de),n)return t instanceof J?(t.definitions.length>1&&N(t.start,"Only one variable declaration allowed in for..in/of loop"),n!==he&&t.definitions[0].value&&N(t.definitions[0].value.start,"No initializers allowed in for..of loop")):fn(t)||(t=ln(t))instanceof X||N(t.start,"Invalid left-hand side in for..in/of loop"),function(e,t){ae();var n=hn();return F(")"),new e({init:t,object:n,body:dn(ce)})}(n,t)}return function(e){F(";");var t=s("punc",";")?null:hn();F(";");var n=s("punc",")")?null:hn();return F(")"),new pe({init:e,condition:t,step:n,body:dn(ce)})}(t)}();case"function":return a(),s("operator","*")?(a(),nt(AST_GeneratorDefun)):nt(K);case"if":return a(),function(){var e=te(),t=ce(),n=null;s("keyword","else")&&(a(),n=ce());return new _e({condition:e,body:t,alternative:n})}();case"return":0!=n.in_function||t.bare_returns||I("'return' outside of function"),a();var c=null;return s("punc",";")?a():B()||(c=hn(),W()),new Be({value:c});case"switch":return a(),new Ge({expression:te(),body:dn(xt)});case"throw":a(),q(n.token)&&I("Illegal newline after 'throw'");var c=hn();return W(),new gt({value:c});case"try":return a(),function(){var e=_t(),t=null,i=null;if(s("keyword","catch")){var r=n.token;a();var o=null;s("punc","(")&&(a(),o=Wt(Ye),F(")")),t=new T({start:r,argname:o,body:_t(),end:E()})}if(s("keyword","finally")){var r=n.token;a(),i=new le({start:r,body:_t(),end:E()})}t||i||I("Missing catch/finally blocks");return new bt({body:e,bcatch:t,bfinally:i})}();case"var":a();var l=Nt();return W(),l;case"with":return n.input.has_directive("use strict")&&I("Strict mode may not include a with statement"),a(),new Et({expression:te(),body:ce()})}}M()});function ye(){var e=hn();return W(),new ze({body:e})}function Ae(e){var t,i=null;B()||(i=Ht(Se,!0)),null!=i?((t=r(function(e){return e.name==i.name},n.labels))||N(i.start,"Undefined label "+i.name),i.thedef=t):0==n.in_loop&&I(e.TYPE+" not inside a loop or switch"),W();var s=new e({label:i});return t&&t.references.push(s),s}function Ce(e,t){if(s("name",e)){var n=o();if(n&&!tn(n,"operator","=")&&!("punc"==n.type&&/^[(;}]$/.test(n.value)||t&&q(n)))return a()}}function Le(e){var t,i=n.in_async,r=n.in_generator;n.input.push_directives_stack(),n.input.add_directive("use strict"),t=e===Y?Ht(Ze):Ht(Je,!0);var o=null;s("keyword","extends")&&(a(),ae(),o=Lt(!0)),F("{");for(var c=[];!s("punc","}");)if(s("punc",";"))a();else{var u=n.token,f=!!Ce("static"),l=Ce("async",!0);if(s("operator","*")){a();var p=s("name")&&/^#/.test(n.token.value),h=Bt(),m=n.token,g=nt(l?_:AST_GeneratorFunction);g.start=m,g.end=E(),c.push(new D({start:u,static:f,private:p,key:h,value:g,end:E()}))}else if(f&&s("punc","{"))c.push(new O({start:u,value:new AST_ClassInitBlock({start:u,body:_t(),end:E()}),end:E()}));else{var p=s("name")&&/^#/.test(n.token.value),h=Bt();if(s("punc","(")){var v=n.token,y=nt(l?d:me);y.start=v,y.end=E(),c.push(new D({start:u,static:f,private:p,key:h,value:y,end:E()}))}else{l&&M(l);var b=null;if(s("operator","="))a(),n.in_async=!1,n.in_generator=!1,b=pn(),n.in_generator=r,n.in_async=i;else if(!s("punc",";")&&!s("punc","}")){var x=null;switch(h){case"get":x=P;break;case"set":x=L}if(x){c.push(new x({start:u,static:f,private:s("name")&&/^#/.test(n.token.value),key:Bt(),value:Ft(),end:E()}));continue}}W(),c.push(new AST_ClassField({start:u,static:f,private:p,key:h,value:b,end:E()}))}}}return a(),n.input.pop_directives_stack(),n.in_generator=r,n.in_async=i,new e({extends:o,name:t,properties:c})}function je(e){if(e instanceof l){var t=null;return e.elements[e.elements.length-1]instanceof Ue&&(t=je(e.elements.pop().expression)),new Q({start:e.start,elements:e.elements.map(je),rest:t,end:e.end})}if(e instanceof h)return new G({start:e.start,name:je(e.left),value:e.right,end:e.end});if(e instanceof G)return e.name=je(e.name),e;if(e instanceof Q)return e.elements=e.elements.map(je),e.rest&&(e.rest=je(e.rest)),e;if(e instanceof ee)return e.properties.forEach(function(e){e.value=je(e.value)}),e.rest&&(e.rest=je(e.rest)),e;if(e instanceof ge)return e;if(e instanceof De){var t=null;return e.properties[e.properties.length-1]instanceof Ue&&(t=je(e.properties.pop().expression)),new ee({start:e.start,properties:e.properties.map(function(e){return e instanceof Ne||N(e.start,"Invalid destructuring assignment"),new Z({start:e.start,key:e.key,value:je(e.value),end:e.end})}),rest:t,end:e.end})}return e instanceof it?e:e instanceof ut?new it(e):e instanceof Ct?new it({start:e.start,name:"yield",end:e.end}):void N(e.start,"Invalid arrow parameter")}function Ke(e,t,i){var r=n.in_async,o=n.in_generator;n.in_async=i,n.in_generator=!1;var a=n.in_funarg;n.in_funarg=n.in_function;var c,u,f=e.map(je),l=e.rest||null;l&&(l=je(l)),n.in_funarg=a,F("=>");var h=n.in_loop,d=n.labels;++n.in_function,n.input.push_directives_stack(),n.in_loop=0,n.labels=[],s("punc","{")?(n.in_directives=!0,c=_t(),u=null):(c=[],ae(),u=pn());var m=n.input.has_directive("use strict");n.input.pop_directives_stack(),--n.in_function,n.in_loop=h,n.labels=d,n.in_generator=o,n.in_async=r;var _=new(i?g:p)({start:t,argnames:f,rest:l,body:c,value:u,end:E()});return m&&_.each_argname(Ut),_}var nt=function(e){var i,r=n.in_async,s=n.in_generator;/Defun$/.test(e.TYPE)?(i=Ht(et),n.in_async=/^Async/.test(e.TYPE),n.in_generator=/Generator/.test(e.TYPE)):(n.in_async=/^Async/.test(e.TYPE),n.in_generator=/Generator/.test(e.TYPE),i=Ht(ot,!0)),!i||e===f||i instanceof Qe||M(E()),F("(");var o=n.in_funarg;n.in_funarg=n.in_function;var a=Mt(")",!t.strict,!1,function(){return Gt(it)});n.in_funarg=o;var c=n.in_loop,u=n.labels;++n.in_function,n.in_directives=!0,n.input.push_directives_stack(),n.in_loop=0,n.labels=[];var l=_t(),p=n.input.has_directive("use strict");n.input.pop_directives_stack(),--n.in_function,n.in_loop=c,n.labels=u,n.in_generator=s,n.in_async=r;var h=new e({name:i,argnames:a,rest:a.rest||null,body:l});return p&&(i&&Ut(i),h.each_argname(Ut)),h};function st(){return s("name")||s("string")||Xt(n.token.value)}function ct(e){return new $e({start:e,quote:e.quote,value:e.value,end:e})}function pt(){var e=n.token;return j("string"),W(),ct(e)}function ht(e,t){return t.name&&((t=new e(t)).name=new(e===Y?Ze:et)(t.name)),t}var mt=se(function(){if(s("name"))switch(n.token.value){case"async":return a(),j("keyword","function"),s("operator","*")?(a(),nt(v)):nt(m);case"let":a();var e=It();return W(),e}else if(s("keyword"))switch(n.token.value){case"class":return a(),Le(Y);case"const":a();var e=Dt();return W(),e;case"function":return a(),s("operator","*")?(a(),nt(AST_GeneratorDefun)):nt(K);case"var":a();var e=Nt();return W(),e}M()});function _t(){F("{");for(var e=[];!s("punc","}");)s("eof")&&F("}"),e.push(ce());return a(),e}function xt(){F("{");for(var e,t,i,r,o=[];!s("punc","}");)s("eof")&&F("}"),s("keyword","case")?(e&&(e.end=E()),t=[],e=new A({start:(r=n.token,a(),r),expression:hn(),body:t}),o.push(e),F(":")):s("keyword","default")?(e&&(e.end=E()),i&&I("More than one default clause in switch statement"),t=[],e=new H({start:(r=n.token,a(),F(":"),r),body:t}),o.push(e),i=e):(t||M(),t.push(ce()));return e&&(e.end=E()),a(),o}function Pt(e,t){for(var i=[];;){var r=n.token,o=Wt(e),c=null;if(s("operator","=")?(a(),c=pn(t)):!t&&(e===Xe||o instanceof X)&&I("Missing initializer in declaration"),i.push(new At({start:r,name:o,value:c,end:E()})),!s("punc",","))break;a()}return i}function Ot(){var e=o();return tn(e,"name")||tn(e,"punc","[")||tn(e,"punc","{")}var Dt=function(e){return new z({start:E(),definitions:Pt(Xe,e),end:E()})},It=function(e){return new ke({start:E(),definitions:Pt(at,e),end:E()})},Nt=function(e){return new kt({start:E(),definitions:Pt(ft,e),end:E()})};var Lt=function(e){if(s("operator","new"))return function(e){var i,r=n.token;if(j("operator","new"),s("punc",".")&&tn(o(),"name","target"))a(),a(),i=new Ee;else{var c,u=Lt(!1);s("punc","(")?(a(),c=Mt(")",!t.strict)):c=[],i=new Te({expression:u,args:c})}return i.start=r,i.end=E(),Jt(i,e)}(e);var i=n.token;if(s("punc")){switch(i.value){case"`":return Jt(Yt(null),e);case"(":if(a(),s("punc",")"))return a(),Ke([],i);var r=hn(!1,!0),c=i.comments_before.length;if([].unshift.apply(r.start.comments_before,i.comments_before),i.comments_before.length=0,i.comments_before=r.start.comments_before,i.comments_before_length=c,0==c&&i.comments_before.length>0){var u=i.comments_before[0];u.nlb||(u.nlb=i.nlb,i.nlb=!1)}i.comments_after=r.start.comments_after,r.start=i,F(")");var f=E();return f.comments_before=r.end.comments_before,f.comments_after.forEach(function(e){r.end.comments_after.push(e),e.nlb&&(n.token.nlb=!0)}),f.comments_after.length=0,f.comments_after=r.end.comments_after,r.end=f,s("punc","=>")?Ke(r instanceof Ve?r.expressions:[r],i):Jt(r,e);case"[":return Jt(jt(),e);case"{":return Jt(qt(),e)}M()}if(s("keyword"))switch(i.value){case"class":a();var l=Le(C);return l.start=i,l.end=E(),Jt(l,e);case"function":return a(),s("operator","*")?(a(),h=nt(AST_GeneratorFunction)):h=nt(me),h.start=i,h.end=E(),Jt(h,e)}if(s("name")){var p=zt(ut,i);if(a(),"async"==p.name){var h;if(s("keyword","function"))return a(),s("operator","*")?(a(),h=nt(_)):h=nt(d),h.start=i,h.end=E(),Jt(h,e);if(s("name")&&tn(o(),"punc","=>"))return i=n.token,p=zt(ut,i),a(),Ke([p],i,!0);if(s("punc","(")){var m=Jt(p,e);if(!s("punc","=>"))return m;var g=m.args;return g[g.length-1]instanceof Ue&&(g.rest=g.pop().expression),Ke(g,i,!0)}}return s("punc","=>")?Ke([p],i):Jt(p,e)}if(un[n.token.type])return Jt(function(){var e,t=n.token,i=t.value;switch(t.type){case"num":isFinite(i)?e=new Oe({value:i}):(e=new AST_Infinity,i<0&&(e=new St({operator:"-",expression:e})));break;case"bigint":e=new b({value:i});break;case"string":e=new $e({value:i,quote:t.quote});break;case"regexp":e=new qe({value:i});break;case"atom":switch(i){case"false":e=new fe;break;case"true":e=new yt;break;case"null":e=new Pe;break;default:M()}break;default:M()}return a(),e.start=e.end=t,e}(),e);M()};function Mt(e,t,i,r){r||(r=pn);for(var o=!0,c=[];!s("punc",e)&&(o?o=!1:F(","),!t||!s("punc",e));)if(i&&s("punc",","))c.push(new ge({start:n.token,end:n.token}));else if(s("operator","...")){if(r!==pn){a(),c.rest=r(),c.rest instanceof G&&N(c.rest.start,"Invalid rest parameter");break}c.push(new Ue({start:n.token,expression:(a(),r()),end:E()}))}else c.push(r());return F(e),c}var jt=se(function(){return F("["),new l({elements:Mt("]",!t.strict,!0)})}),Ft=se(function(){return nt(f)}),qt=se(function(){F("{");for(var e=!0,i=[];!s("punc","}")&&(e?e=!1:F(","),t.strict||!s("punc","}"));){var r=n.token;if(s("operator","*")){a();var c=Bt(),u=n.token,f=nt(AST_GeneratorFunction);f.start=u,f.end=E(),i.push(new Re({start:r,key:c,value:f,end:E()}))}else if(s("operator","..."))a(),i.push(new Ue({start:r,expression:pn(),end:E()}));else if(tn(o(),"operator","=")){var l=Ht(ut);a(),i.push(new Ne({start:r,key:r.value,value:new h({start:r,left:l,operator:"=",right:pn(),end:E()}),end:E()}))}else if(tn(o(),"punc",",")||tn(o(),"punc","}"))i.push(new Ne({start:r,key:r.value,value:Ht(ut),end:E()}));else{var c=Bt();if(s("punc","(")){var p=n.token,m=nt(me);m.start=p,m.end=E(),i.push(new Re({start:r,key:c,value:m,end:E()}))}else if(s("punc",":"))a(),i.push(new Ne({start:r,key:c,value:pn(),end:E()}));else{if("name"==r.type)switch(c){case"async":var g=s("operator","*")&&a();c=Bt();var p=n.token,m=nt(g?_:d);m.start=p,m.end=E(),i.push(new Re({start:r,key:c,value:m,end:E()}));continue;case"get":i.push(new Ie({start:r,key:Bt(),value:Ft(),end:E()}));continue;case"set":i.push(new Me({start:r,key:Bt(),value:Ft(),end:E()}));continue}M()}}}return a(),new De({properties:i})});function Bt(){var e=n.token;switch(e.type){case"operator":Rt[e.value]||M();case"num":case"string":case"name":case"keyword":case"atom":return a(),""+e.value;case"punc":F("[");var t=pn();return F("]"),t;default:M()}}function Vt(){var e=n.token.value;return j("name"),e}function zt(e,t){var i=t.value;switch(i){case"await":n.in_async&&M(t);break;case"super":e=We;break;case"this":e=dt;break;case"yield":n.in_generator&&M(t)}return new e({name:""+i,start:t,end:t})}function Ut(e){"arguments"!=e.name&&"eval"!=e.name&&"let"!=e.name||N(e.start,"Unexpected "+e.name+" in strict mode")}function Ht(e,t){if(!s("name"))return t||I("Name expected"),null;var i=zt(e,n.token);return n.input.has_directive("use strict")&&i instanceof Qe&&Ut(i),a(),i}function Wt(e){var i=n.token;if(s("punc","[")){a();var r=Mt("]",!t.strict,!0,function(){return Gt(e)});return new Q({start:i,elements:r,rest:r.rest||null,end:E()})}if(s("punc","{")){a();for(var c=!0,u=[],f=null;!s("punc","}")&&(c?c=!1:F(","),t.strict||!s("punc","}"));){var l=n.token;if(s("punc","[")||tn(o(),"punc",":")){var p=Bt();F(":"),u.push(new Z({start:l,key:p,value:Gt(e),end:E()}))}else{if(s("operator","...")){a(),f=Wt(e);break}var h=Ht(e);s("operator","=")&&(a(),h=new G({start:h.start,name:h,value:pn(),end:E()})),u.push(new Z({start:l,key:l.value,value:h,end:E()}))}}return F("}"),new ee({start:i,properties:u,rest:f,end:E()})}return Ht(e)}function Gt(e){var t=n.token,i=Wt(e);return s("operator","=")?(a(),new G({start:t,name:i,value:pn(),end:E()})):i}function Yt(e){for(var t=e?e.start:n.token,i=n.input.context().read_template,r=[],o=[];i(r);)a(),o.push(hn()),s("punc","}")||M();return a(),new lt({start:t,expressions:o,strings:r,tag:e,end:E()})}function Jt(e,n){for(var i=e.start,r=null;;)if(s("operator","?")&&tn(o(),"punc",".")&&(a(),a(),r=e),s("punc","[")){a();var u=hn();F("]"),e=new He({start:i,optional:r===e,expression:e,property:u,end:E()})}else if(n&&s("punc","("))a(),e=new k({start:i,optional:r===e,expression:e,args:Mt(")",!t.strict),end:E()});else if(r===e||s("punc","."))r!==e&&a(),e=new re({start:i,optional:r===e,expression:e,property:Vt(),end:E()});else{if(!s("punc","`"))break;r&&I("Invalid template on optional chain"),e=Yt(e)}if(r&&(e.terminal=!0),e instanceof k&&!e.pure)for(var i=e.start,f=i.comments_before,l=c(i,"comments_before_length")?i.comments_before_length:f.length;--l>=0;)if(/[@#]__PURE__/.test(f[l].value)){e.pure=!0;break}return e}function Kt(e){var t=n.token;if(n.in_async&&s("name","await"))return n.in_funarg===n.in_function&&I("Invalid use of await in function argument"),n.input.context().regex_allowed=!0,a(),new y({start:t,expression:Kt(e),end:E()});if(n.in_generator&&s("name","yield")){n.in_funarg===n.in_function&&I("Invalid use of yield in function argument"),n.input.context().regex_allowed=!0,a();var i=null,r=!1;return s("operator","*")?(a(),i=pn(e),r=!0):(s("punc")?$t[n.token.value]:B())||(i=pn(e)),new Ct({start:t,expression:i,nested:r,end:E()})}if(s("operator")&&sn[t.value]){a(),ae();var o=Qt(St,t,Kt(e));return o.start=t,o.end=E(),o}for(var c=Lt(!0);s("operator")&&on[n.token.value]&&!q(n.token);)(c=Qt(wt,n.token,c)).start=t,c.end=n.token,a();return c}function Qt(e,t,i){var r=t.value;switch(r){case"++":case"--":fn(i)||N(t,"Invalid use of "+r+" operator");break;case"delete":i instanceof ut&&n.input.has_directive("use strict")&&N(i.start,"Calling delete on expression not allowed in strict mode")}return new e({operator:r,expression:i})}var Zt=function(e,t,i){var r=s("operator")?n.token.value:null;"in"==r&&i&&(r=null);var o=null!=r?cn[r]:null;if(null!=o&&o>t){a();var c=Zt(Kt(i),"**"==r?o-1:o,i);return Zt(new x({start:e.start,left:e,operator:r,right:c,end:c.end}),t,i)}return e};var nn=function(e){var t=n.token,i=function(e){return Zt(Kt(e),0,e)}(e);if(s("operator","?")){a();var r=pn();return F(":"),new V({start:t,condition:i,consequent:r,alternative:pn(e),end:E()})}return i};function fn(e){return e instanceof Fe&&!e.optional||e instanceof ut}function ln(e){if(e instanceof l){var t=null;if(e.elements[e.elements.length-1]instanceof Ue&&!((t=ln(e.elements.pop().expression))instanceof X||fn(t)))return e;var n=e.elements.map(ln);return u(n,function(e){return e instanceof G||e instanceof X||e instanceof ge||fn(e)})?new Q({start:e.start,elements:n,rest:t,end:e.end}):e}if(e instanceof h){var i=ln(e.left);return i instanceof X||fn(i)?new G({start:e.start,name:i,value:e.right,end:e.end}):e}if(!(e instanceof De))return e;var t=null;if(e.properties[e.properties.length-1]instanceof Ue&&!((t=ln(e.properties.pop().expression))instanceof X||fn(t)))return e;for(var r=[],s=0;s<e.properties.length;s++){var o=e.properties[s];if(!(o instanceof Ne))return e;var a=ln(o.value);if(!(a instanceof G||a instanceof X||fn(a)))return e;r.push(new Z({start:o.start,key:o.key,value:a,end:o.end}))}return new ee({start:e.start,properties:r,rest:t,end:e.end})}function pn(e){var t=n.token,i=nn(e),r=n.token.value;if(s("operator")&&an[r]){if(fn(i)||"="==r&&(i=ln(i))instanceof X)return a(),new h({start:t,left:i,operator:r,right:pn(e),end:E()});I("Invalid assignment")}return i}function hn(e,t){for(var i=n.token,r=[];;){if(t&&s("operator","...")){a(),r.rest=Wt(it);break}if(r.push(pn(e)),!s("punc",","))break;if(a(),t&&s("punc",")")&&tn(o(),"punc","=>"))break}return 1!=r.length||r.rest?new Ve({start:i,expressions:r,end:E()}):r[0]}function dn(e){++n.in_loop;var t=e();return--n.in_loop,t}if(t.expression){ae();var mn=hn();return j("eof"),mn}return function(){var e=n.token,i=[];for(t.module&&(n.in_async=!0,n.input.add_directive("use strict")),n.input.push_directives_stack();!s("eof");)i.push(ce(!0));n.input.pop_directives_stack();var r=E()||e,o=t.toplevel;return o?(o.body=o.body.concat(i),o.end=r):o=new vt({start:e,body:i,end:r}),o}()}return t.parse=fn,{is_identifier_string:Xt,is_identifier_char:Kt,is_surrogate_pair_head:function(e){return e>=55296&&e<=56319},is_surrogate_pair_tail:function(e){return e>=56320&&e<=57343},decode_escape_sequence:Qt,tokenizer:rn,parse:fn,KEYWORDS:Rt,RESERVED_WORDS:Mt,KEYWORDS_BEFORE_EXPRESSION:jt,KEYWORDS_ATOM:Lt,UNARY_POSTFIX:on,PRECEDENCE:cn}}),define("skylark-uglifyjs/output",["./utils","./ast","./parse"],function(e,t,n){"use strict";const{defaults:i,makePredicate:r,noop:s,return_false:o,return_true:a}=e,{AST_Array:c,AST_Arrow:u,AST_AsyncArrow:f,AST_AsyncDefun:l,AST_AsyncFunction:p,AST_AsyncGeneratorDefun:h,AST_AsyncGeneratorFunction:d,AST_Assign:m,AST_Await:g,AST_BigInt:_,AST_Binary:v,AST_BlockStatement:y,AST_Break:b,AST_Call:x,AST_Case:w,AST_Catch:S,AST_Chain:k,AST_Class:A,AST_ClassExpression:T,AST_ClassField:E,AST_ClassGetter:C,AST_ClassInit:P,AST_ClassMethod:O,AST_ClassPrivateProperty:D,AST_ClassProperty:I,AST_ClassSetter:N,AST_ClassStaticBlock:R,AST_ConciseMethod:L,AST_Conditional:M,AST_Const:j,AST_Constant:F,AST_Continue:q,AST_Debugger:B,AST_Default:V,AST_DefaultAssign:z,AST_DefaultValue:U,AST_Definitions:$,AST_Defun:H,AST_Destructuring:W,AST_DestructuredArray:G,AST_DestructuredKeyVal:Y,AST_DestructuredObject:J,AST_Destructured:K,AST_Directive:X,AST_Do:Q,AST_Dot:Z,AST_DotHash:ee,AST_EmptyStatement:te,AST_Exit:ne,AST_Expansion:ie,AST_Export:re,AST_ExportDeclaration:se,AST_ExportDefault:oe,AST_ExportForeign:ae,AST_ExportReferences:ce,AST_Finally:ue,AST_For:fe,AST_ForAwaitOf:le,AST_ForEnumeration:pe,AST_ForIn:he,AST_ForOf:de,AST_Function:me,AST_GeneratorDefun:ge,AST_GeneratorFunction:_e,AST_Hole:ve,AST_If:ye,AST_Import:be,AST_ImportMeta:xe,AST_IterationStatement:we,AST_Jump:Se,AST_LabeledStatement:ke,AST_Lambda:Ae,AST_Let:Te,AST_LoopControl:Ee,AST_NameMapping:Ce,AST_New:Pe,AST_NewTarget:Oe,AST_Node:De,AST_Number:Ie,AST_Object:Ne,AST_ObjectGetter:Re,AST_ObjectKeyVal:Le,AST_ObjectMethod:Me,AST_ObjectProperty:je,AST_ObjectSetter:Fe,AST_PrefixedTemplateString:qe,AST_PropAccess:Be,AST_PrivateGetter:Ve,AST_PrivateMethod:ze,AST_PrivateSetter:Ue,AST_PrivateIn:$e,AST_RegExp:He,AST_Return:We,AST_Scope:Ge,AST_Sequence:Ye,AST_SimpleStatement:Je,AST_Spread:Ke,AST_Statement:Xe,AST_StatementWithBody:Qe,AST_String:Ze,AST_Sub:et,AST_Super:tt,AST_Switch:nt,AST_SwitchBranch:it,AST_Symbol:rt,AST_SymbolClassProperty:st,AST_SymbolExport:ot,AST_SymbolFunarg:at,AST_SymbolImport:ct,AST_SymbolMethod:ut,AST_SymbolPrivateProperty:ft,AST_SymbolRef:lt,AST_Template:pt,AST_TemplateSegment:ht,AST_TemplateString:dt,AST_This:mt,AST_Throw:gt,AST_Toplevel:_t,AST_Try:vt,AST_TryBlock:yt,AST_Unary:bt,AST_UnaryPostfix:xt,AST_UnaryPrefix:wt,AST_Var:St,AST_VarDef:kt,AST_While:At,AST_With:Tt,AST_Yield:Et,TreeWalker:Ct,is_arrow:Pt,is_generator:Ot,is_async:Dt,walk:It,walk_abort:Nt,first_in_statement:Rt,root_expr:Lt}=t,{is_identifier_char:Mt,is_identifier_string:jt,is_surrogate_pair_head:Ft,is_surrogate_pair_tail:qt,PRECEDENCE:Bt,RESERVED_WORDS:Vt}=n;function zt(e){return"comment2"==e.type&&/@preserve|@license|@cc_on/i.test(e.value)}function Ut(e){e=i(e,{annotations:!1,ascii_only:!1,beautify:!1,braces:!1,comments:!1,extendscript:!1,galio:!1,ie:!1,indent_level:4,indent_start:0,inline_script:!0,keep_quoted_props:!1,max_line_len:!1,preamble:null,preserve_line:!1,quote_keys:!1,quote_style:0,semicolons:!0,shebang:!0,source_map:null,v8:!1,webkit:!1,width:80,wrap_iife:!1},!0);var t=o;if(e.comments){var n=e.comments;if("string"==typeof e.comments&&/^\/.*\/[a-zA-Z]*$/.test(e.comments)){var c=e.comments.lastIndexOf("/");n=new RegExp(e.comments.substr(1,c-1),e.comments.substr(c+1))}t=n instanceof RegExp?function(e){return"comment5"!=e.type&&n.test(e.value)}:"function"==typeof n?function(e){return"comment5"!=e.type&&n(this,e)}:"some"===n?zt:a}function u(e){if("number"==typeof e)return new Array(e+1).join(" ");if(!e)return"";if(!/^\s*$/.test(e))throw new Error("unsupported indentation: "+JSON.stringify(""+e));return e}var f,l,p,h,d,m,g,_=0,y=1,b=u(e.indent_start),x=u(e.indent_level),w=x.length+1>>1,S=0,k=!0,A=e.source_map&&[],T=!1,E=!1,C="";function P(){f="",h=!1,d=!1,g=[];var e=m;return m="",e}P();var O=e.ascii_only?function(e,t){return t&&(e=e.replace(/[\ud800-\udbff][\udc00-\udfff]/g,function(e){return"\\u{"+(e.charCodeAt(0)-55232<<10|e.charCodeAt(1)-56320).toString(16)+"}"})),e.replace(/[\u0000-\u001f\u007f-\uffff]/g,function(e){var n=e.charCodeAt(0).toString(16);if(n.length<=2&&!t){for(;n.length<2;)n="0"+n;return"\\x"+n}for(;n.length<4;)n="0"+n;return"\\u"+n})}:function(e){for(var t="",n=0,i=0;n<e.length;n++){var r=e.charCodeAt(n);if(Ft(r)){if(qt(e.charCodeAt(n+1))){n++;continue}}else if(!qt(r))continue;t+=e.slice(i,n)+"\\u"+r.toString(16),i=n+1}return 0==i?e:t+e.slice(i)};function D(e){return"'"+e.replace(/\x27/g,"\\'")+"'"}function I(e){return'"'+e.replace(/\x22/g,'\\"')+'"'}var N=[null,D,I,function(e,t){return"'"==t?D(e):I(e)}][e.quote_style]||function(e,t,n,i){return n>i?D(e):I(e)};function R(t,n){var i=0,r=0;return t=t.replace(/[\\\b\f\n\r\v\t\x22\x27\u2028\u2029\0\ufeff]/g,function(n,s){switch(n){case'"':return++i,'"';case"'":return++r,"'";case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\v":return e.ie?"\\x0B":"\\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case"\ufeff":return"\\ufeff";case"\0":return/[0-9]/.test(t.charAt(s+1))?"\\x00":"\\0"}return n}),N(O(t),n,i,r)}var L=A?function(e,t){A.forEach(function(n){n.line+=e,n.col+=t})}:s,j=A?function(){A.forEach(function(t){e.source_map.add(t.token.file,t.line,t.col,t.token.line,t.token.col,t.name||"name"!=t.token.type?t.name:t.token.value)}),A=[]}:s;function F(e){C+=m.slice(0,S);var t=(m=m.slice(S)).length;for(L(e,t-_),y+=e,_=t;e--;)C+="\n"}var q=e.max_line_len?function(t){k?_>e.max_line_len&&De.warn("Output exceeds {max_line_len} characters",e):(_>e.max_line_len&&(F(1),k=!0),(k||t)&&j())}:s,B=r("( [ + * / - , .");function V(e,t,n){return Mt(e)&&(Mt(t)||"\\"==t)||"/"==t&&t==e||("+"==t||"-"==t)&&t==f||"--"==f&&">"==t||"!"==f&&"--"==n||"/"==e&&("in"==n||"instanceof"==n)}var z=e.beautify||e.comments||e.max_line_len||e.preserve_line||e.shebang||!e.semicolons||e.source_map||e.width?function(t){var n=t.charAt(0);T&&n&&(T=!1,"\n"!=n&&(z("\n"),$())),E&&n&&(E=!1,/[\s;})]/.test(n)||U());var i=f.slice(-1);if(d&&(d=!1,":"==i&&"}"==n||";"!=i&&(!n||";}".indexOf(n)<0))){var r=B[n];r||e.semicolons?(m+=";",_++,k||(q(),k&&!r&&";"==m&&(m="",_=0)),S==m.length-1&&S++):(q(),m+="\n",y++,_=0,/^\s+$/.test(t)&&(d=!0)),e.beautify||(h=!1)}h&&(V(i,n,t)&&(m+=" ",_++),"<"==i&&"!"==t||(h=!1)),p&&(A.push({token:p,name:l,line:y,col:_}),p=!1,k&&j()),m+=t;var s=t.split(/\r?\n/),o=s.length-1;y+=o,_+=s[0].length,o>0&&(q(),_=s[o].length),f=t}:function(e){var t=e.charAt(0),n=f.slice(-1);d&&(d=!1,(":"==n&&"}"==t||(!t||";}".indexOf(t)<0)&&";"!=n)&&(m+=";",h=!1)),h&&(V(n,t,e)&&(m+=" "),"<"==n&&"!"==e||(h=!1)),m+=e,f=e},U=e.beautify?function(){z(" ")}:function(){h=!0},$=e.beautify?function(e){T&&z("\n"),z(e?b.slice(0,-w):b)}:s,H=e.beautify?function(e){var t=b;b+=x,e(),b=t}:function(e){e()},W=e.max_line_len||e.preserve_line?function(){q(),S=m.length,k=!1}:s,G=e.beautify?function(){z("\n"),S=m.length}:W,Y=e.beautify?function(){z(";")}:function(){d=!0};var J=A?function(e,t){p=e,l=t}:s;function K(e,t){T||(!e.nlb||!t&&/(^|\n) *$/.test(m)?t&&(E=!0):T=!0)}function X(e){var t=e.value.replace(/[@#]__PURE__/g," ");return!(/^\s*$/.test(t)&&!/^\s*$/.test(e.value))&&(/comment[134]/.test(e.type)?(z("//"+t),T=!0):"comment2"==e.type&&z("/*"+t+"*/"),!0)}return{get:function(){k||q(!0);return C+m},reset:P,indent:$,should_break:e.beautify&&e.width?function(){return _>=e.width}:o,has_parens:function(){return"("==f.slice(-1)},newline:G,print:z,space:U,comma:function(){W(),z(","),W(),U()},colon:function(){z(":"),U()},last:function(){return f},semicolon:Y,force_semicolon:function(){d&&z(";");z(";")},to_utf8:O,print_name:function(e){z(O(e.toString(),!0))},print_string:e.inline_script?function(e,t){e=R(e,t).replace(/<\x2f(script)([>\/\t\n\f\r ])/gi,"<\\/$1$2"),z(e.replace(/\x3c!--/g,"\\x3c!--").replace(/--\x3e/g,"--\\x3e"))}:function(e,t){z(R(e,t))},with_indent:H,with_block:function(e,t){z("{"),G(),H(e),J(t),$(),z("}")},with_parens:function(e){z("("),W(),e(),W(),z(")")},with_square:function(e){z("["),W(),e(),W(),z("]")},add_mapping:J,option:function(t){return e[t]},prepend_comments:e.comments||e.shebang?function(n){var i,r=this;n instanceof ne?i=n.value:n instanceof Et&&(i=n.expression);var s=u(n);s||(s=[]);if(i){var o=new Ct(function(e){if(!function(e,t){if(t instanceof v)return t.left===e;if("Call"==t.TYPE)return t.expression===e;if(t instanceof M)return t.condition===e;if(t instanceof Z)return t.expression===e;if(t instanceof ne)return!0;if(t instanceof Ye)return t.expressions[0]===e;if(t instanceof et)return t.expression===e;if(t instanceof xt)return!0;if(t instanceof Et)return!0}(e,o.parent()))return!0;var t=u(e);t&&(s=s.concat(t))});o.push(n),i.walk(o)}if(1==y&&0==_){s.length>0&&e.shebang&&"comment5"==s[0].type&&(z("#!"+s.shift().value+"\n"),$());var a=e.preamble;a&&z(a.replace(/\r\n?|\u2028|\u2029|(^|\S)\s*$/g,"$1\n"))}var c=!1;(s=s.filter(t,n)).forEach(function(e,t){K(e,t),X(e)&&(c=!0)}),c&&K(n.start,!0);function u(e){var t=e.start;if(!t){if(!i)return;e.start=t=new AST_Token}var n=t.comments_before;if(!n){if(!i)return;t.comments_before=n=[]}if(n._dumped!==r)return n._dumped=r,n}}:s,append_comments:e.comments?function(e,n){var i=e.end;if(!i)return;var r=i[n?"comments_before":"comments_after"];if(!r||r._dumped===this)return;if(!(e instanceof Xe||all(r,function(e){return!/comment[134]/.test(e.type)})))return;r._dumped=this,r.filter(t,e).forEach(function(e,t){K(e,t||!n),X(e)})}:s,push_node:function(e){g.push(e)},pop_node:e.preserve_line?function(){var e=g.pop();e.start&&e.start.line>y&&F(e.start.line-y)}:function(){g.pop()},parent:function(e){return g[g.length-2-(e||0)]}}}return function(){function e(e,t){e.DEFMETHOD("_codegen",t)}var t=!1;De.DEFMETHOD("print",function(e,t){var n=this;function i(){e.prepend_comments(n),n.add_source_map(e),n._codegen(e),e.append_comments(n)}e.push_node(n),t||n.needs_parens(e)?e.with_parens(i):i(),e.pop_node()});var n=Ut({inline_script:!1,shebang:!1,width:!1});function i(e,t){e.DEFMETHOD("needs_parens",t)}function r(e){var t=e.parent();return!e.has_parens()&&Rt(e,!1,!0)?this.name||!(t instanceof oe):!!(e.option("webkit")&&t instanceof Be&&t.expression===this)||(!!(e.option("wrap_iife")&&t instanceof x&&t.expression===this)||void 0)}function a(e){return!e.has_parens()&&Rt(e,!0)}function _(e){var t=e.parent();return t instanceof v?"**"==t.operator&&t.left===this:t instanceof x?t.expression===this:t instanceof A||(t instanceof Be?t.expression===this:t instanceof pt?t.tag===this:void 0)}function k(e,t){return!!e.terminal&&((t instanceof x||t instanceof Be)&&t.expression===e)}function D(e,t){var n=t.parent();return n instanceof g||(n instanceof v?!(n instanceof m):n instanceof x?n.expression===e:n instanceof A||(n instanceof M?n.condition===e:n instanceof Be?n.expression===e:n instanceof pt?n.tag===e:n instanceof bt||void 0))}function R(e,n,i,r){var s=e.length-1,o=r,a=t;e.forEach(function(e,r){o&&(e instanceof X?"use asm"==e.value&&(t=!0):e instanceof te||(e instanceof Je&&e.body instanceof Ze&&i.force_semicolon(),o=!1)),e instanceof te||(i.indent(),e.print(i),r==s&&n||(i.newline(),n&&i.newline()))}),t=a}function L(e,t){t.print("{"),t.with_indent(function(){t.append_comments(e,!0)}),t.print("}")}function z(e,t,n){e.body.length>0?t.with_block(function(){R(e.body,!1,t,n)},e.end):L(e,t)}function H(e,t){return function(n){var i=this;n.print(e),n.space(),n.with_parens(function(){i.init.print(n),n.space(),n.print(t),n.space(),i.object.print(n)}),ft(i.body,n)}}function W(e,t){var n=e.value;"*"==n||jt(n)?t.print_name(n):t.print_string(n,e.quote)}function ee(e,t){t.with_parens(function(){e.argnames.forEach(function(e,n){n&&t.comma(),e.print(t)}),e.rest&&(e.argnames.length&&t.comma(),t.print("..."),e.rest.print(t))})}function ne(e,t){var n=1==e.argnames.length&&!e.rest&&e.argnames[0];n instanceof at&&"yield"!=n.name?n.print(t):ee(e,t),t.space(),t.print("=>"),t.space(),e.value?e.value.print(t):z(e,t,!0)}function ie(e,t){e.name&&(t.space(),e.name.print(t)),ee(e,t),t.space(),z(e,t,!0)}function re(e){e.print("async"),e.space(),e.print("function"),ie(this,e)}function xe(e){e.print("async"),e.space(),e.print("function*"),ie(this,e)}function Ee(e){e.print("function*"),ie(this,e)}function Ce(e,t){var n=e.value;Dt(n)&&(t.print("async"),t.space()),Ot(n)&&t.print("*"),tt(e,t),ie(e.value,t)}function Oe(e,t){return function(n){n.print(e);var i=this[t];i&&(n.space(),i.print(n)),n.semicolon()}}function qe(e,t){t.newline(),e.body.forEach(function(e){t.indent(),e.print(t),t.newline()})}function Ve(e){return function(t){t.print(e),t.space(),this.definitions.forEach(function(e,n){n&&t.comma(),e.print(t)});var n=t.parent();n instanceof we&&n.init===this||t.semicolon()}}function ze(e,t,n){var i=!1;n&&e.walk(new Ct(function(e){return!!i||(e instanceof v&&"in"==e.operator?i=!0:e instanceof Ge&&(!Pt(e)||!e.value)||void 0)})),e.print(t,i)}function Ue(e,t){if(t.option("annotations")&&e.pure){var n,i=0,r=e;do{if(n=r,(r=t.parent(i++))instanceof x&&r.expression===n)return}while(r instanceof Be&&r.expression===n);t.print("/*@__PURE__*/")}}function $e(e,t){t.with_parens(function(){e.args.forEach(function(e,n){n&&t.comma(),e.print(t)}),t.add_mapping(e.end)})}function Xe(e,t,n){var i=e.properties;i.length>0?t.with_block(function(){i.forEach(function(e,i){i&&(n||t.print(","),t.newline()),t.indent(),e.print(t)}),t.newline()},e.end):L(e,t)}function tt(e,t){var n=e.key;if(n instanceof De)return t.with_square(function(){n.print(t)});var i=e.start&&e.start.quote;if(t.option("quote_keys")||i&&t.option("keep_quoted_props"))t.print_string(n,i);else if(""+ +n==n&&n>=0)t.print(ht(n));else if(e.private)t.print_name(n);else{if(Vt[n]?!t.option("ie"):jt(n))return t.print_name(n),n;t.print_string(n,i)}}function st(e){return function(t){this.static&&(t.print("static"),t.space()),t.print(e),t.space(),tt(this,t),ie(this.value,t)}}function ut(e){var t=e.definition();return t&&t.mangled_name||e.name}function ft(e,t){t.option("braces")&&!(e instanceof j||e instanceof Te)?dt(e,t):e instanceof te?t.force_semicolon():(t.space(),e.print(t))}function lt(e,t){return e.args.length>0||t.option("beautify")}function ht(e){var t,n,i,r=e.toString(10).replace(/^0\./,".").replace("e+","e"),s=[r];return Math.floor(e)===e&&(e<0?s.push("-0x"+(-e).toString(16).toLowerCase()):s.push("0x"+e.toString(16).toLowerCase())),(t=/^\.0+/.exec(r))?(n=t[0].length,i=r.slice(n),s.push(i+"e-"+(i.length+n-1))):(t=/[^0]0+$/.exec(r))?(n=t[0].length-1,s.push(r.slice(0,-n)+"e"+n)):(t=/^(\d)\.(\d+)e(-?\d+)$/.exec(r))&&s.push(t[1]+t[2]+"e"+(t[3]-t[2].length)),function(e){for(var t=e[0],n=t.length,i=1;i<e.length;++i)e[i].length<n&&(t=e[i],n=t.length);return t}(s)}function dt(e,t){t.space(),e instanceof te?L(e,t):e instanceof y?e.print(t):t.with_block(function(){t.indent(),e.print(t),t.newline()},e.end)}function mt(e,t){e.forEach(function(e){e.DEFMETHOD("add_source_map",t)})}De.DEFMETHOD("print_to_string",function(e){if(e){var t=Ut(e);return this.print(t),t.get()}return this.print(n),n.reset()}),i(De,o),i(p,r),i(d,r),i(T,r),i(me,r),i(_e,r),i(Ne,a),i(g,_),i(bt,_),i(Ye,function(e){var t=e.parent();return t instanceof c||Pt(t)&&t.value===this||t instanceof g||t instanceof v||t instanceof x||t instanceof A||t instanceof I||t instanceof M||t instanceof U||t instanceof Y||t instanceof oe||t instanceof de||t instanceof je||t instanceof Be&&t.expression===this||t instanceof Ke||t instanceof pt&&t.tag===this||t instanceof bt||t instanceof kt||t instanceof Et}),i(v,function(e){var t=e.parent();if(t instanceof g)return!0;if(t instanceof v){var n=t.operator,i=Bt[n],r=this.operator,s=Bt[r];return i>s||"??"==n&&("&&"==r||"||"==r)||i==s&&this===t["**"==n?"left":"right"]}return t instanceof x?t.expression===this:t instanceof A||(t instanceof Be?t.expression===this:t instanceof pt?t.tag===this:t instanceof bt||void 0)}),i(Be,function(e){var t=e.parent();return t instanceof Pe&&t.expression===this&&"Call"==Lt(this).TYPE||k(this,t)}),i(x,function(e){var t=e.parent();if(t instanceof Pe)return t.expression===this;if(e.option("webkit")&&this.expression instanceof me&&t instanceof Be&&t.expression===this){var n=e.parent(1);if(n instanceof m&&n.left===t)return!0}return k(this,t)}),i(Pe,function(e){if(lt(this,e))return!1;var t=e.parent();return t instanceof x?t.expression===this:t instanceof Be||(t instanceof pt?t.tag===this:void 0)}),i(Ie,function(e){if(!e.option("galio"))return!1;var t=e.parent();return t instanceof Be&&t.expression===this&&/^0/.test(ht(this.value))}),i(u,function(e){return D(this,e)}),i(m,function(e){return!!D(this,e)||(e.option("v8")?this.left instanceof K:this.left instanceof J?a(e):void 0)}),i(f,function(e){return D(this,e)}),i(M,function(e){return D(this,e)||e.option("extendscript")&&e.parent()instanceof M}),i(Et,function(e){return D(this,e)}),e(X,function(e){var t=this.quote,n=this.value;switch(e.option("quote_style")){case 0:case 2:-1==n.indexOf('"')&&(t='"');break;case 1:-1==n.indexOf("'")&&(t="'")}e.print(t+n+t),e.semicolon()}),e(B,function(e){e.print("debugger"),e.semicolon()}),e(_t,function(e){R(this.body,!0,e,!0),e.print("")}),e(ke,function(e){this.label.print(e),e.colon(),this.body.print(e)}),e(Je,function(e){this.body.print(e),e.semicolon()}),e(y,function(e){z(this,e)}),e(te,function(e){e.semicolon()}),e(Q,function(e){var t=this;e.print("do"),dt(t.body,e),e.space(),e.print("while"),e.space(),e.with_parens(function(){t.condition.print(e)}),e.semicolon()}),e(At,function(e){var t=this;e.print("while"),e.space(),e.with_parens(function(){t.condition.print(e)}),ft(t.body,e)}),e(fe,function(e){var t=this;e.print("for"),e.space(),e.with_parens(function(){t.init?(t.init instanceof $?t.init.print(e):ze(t.init,e,!0),e.print(";"),e.space()):e.print(";"),t.condition?(t.condition.print(e),e.print(";"),e.space()):e.print(";"),t.step&&t.step.print(e)}),ft(t.body,e)}),e(le,H("for await","of")),e(he,H("for","in")),e(de,H("for","of")),e(Tt,function(e){var t=this;e.print("with"),e.space(),e.with_parens(function(){t.expression.print(e)}),ft(t.body,e)}),e(se,function(e){e.print("export"),e.space(),this.body.print(e)}),e(oe,function(e){e.print("export"),e.space(),e.print("default"),e.space();var t=this.body;t.print(e),t instanceof T&&!t.name||t instanceof AST_DefClass||t instanceof AST_LambdaDefinition||t instanceof AST_LambdaExpression&&!t.name&&!Pt(t)||e.semicolon()}),e(ae,function(e){var t=this;e.print("export"),e.space();var n=t.keys.length;function i(n){var i=t.aliases[n],r=t.keys[n];W(r,e),i.value!=r.value&&(e.space(),e.print("as"),e.space(),W(i,e))}0==n?L(t,e):"*"==t.keys[0].value?i(0):e.with_block(function(){e.indent(),i(0);for(var t=1;t<n;t++)e.print(","),e.newline(),e.indent(),i(t);e.newline()},t.end),e.space(),e.print("from"),e.space(),t.path.print(e),e.semicolon()}),e(ce,function(e){e.print("export"),e.space(),Xe(this,e),e.semicolon()}),e(be,function(e){e.print("import"),e.space(),this.default&&this.default.print(e),this.all&&(this.default&&e.comma(),this.all.print(e)),this.properties&&(this.default&&e.comma(),Xe(this,e)),(this.all||this.default||this.properties)&&(e.space(),e.print("from"),e.space()),this.path.print(e),e.semicolon()}),e(u,function(e){ne(this,e)}),e(f,function(e){e.print("async"),e.space(),ne(this,e)}),e(Ae,function(e){e.print("function"),ie(this,e)}),e(l,re),e(p,re),e(h,xe),e(d,xe),e(ge,Ee),e(_e,Ee),e(A,function(e){e.print("class"),this.name&&(e.space(),this.name.print(e)),this.extends&&(e.space(),e.print("extends"),e.space(),this.extends.print(e)),e.space(),Xe(this,e,!0)}),e(E,function(e){this.static&&(e.print("static"),e.space()),tt(this,e),this.value&&(e.space(),e.print("="),e.space(),this.value.print(e)),e.semicolon()}),e(C,st("get")),e(N,st("set")),e(O,function(e){this.static&&(e.print("static"),e.space()),Ce(this,e)}),e(P,function(e){e.print("static"),e.space(),z(this.value,e)}),e(We,Oe("return","value")),e(gt,Oe("throw","value")),e(b,Oe("break","label")),e(q,Oe("continue","label")),e(ye,function(e){var t=this;e.print("if"),e.space(),e.with_parens(function(){t.condition.print(e)}),t.alternative?(!function(e,t){var n=e.body;if(t.option("braces")&&!(n instanceof j||n instanceof Te)||t.option("ie")&&n instanceof Q)return dt(n,t);if(!n)return t.force_semicolon();for(;;)if(n instanceof ye){if(!n.alternative)return void dt(e.body,t);n=n.alternative}else{if(!(n instanceof Qe))break;n=n.body}ft(e.body,t)}(t,e),e.space(),e.print("else"),t.alternative instanceof ye?(e.space(),t.alternative.print(e)):ft(t.alternative,e)):ft(t.body,e)}),e(nt,function(e){var t=this;e.print("switch"),e.space(),e.with_parens(function(){t.expression.print(e)}),e.space();var n=t.body.length-1;n<0?L(t,e):e.with_block(function(){t.body.forEach(function(t,i){e.indent(!0),t.print(e),i<n&&t.body.length>0&&e.newline()})},t.end)}),e(V,function(e){e.print("default:"),qe(this,e)}),e(w,function(e){e.print("case"),e.space(),this.expression.print(e),e.print(":"),qe(this,e)}),e(vt,function(e){e.print("try"),e.space(),z(this,e),this.bcatch&&(e.space(),this.bcatch.print(e)),this.bfinally&&(e.space(),this.bfinally.print(e))}),e(S,function(e){var t=this;e.print("catch"),t.argname&&(e.space(),e.with_parens(function(){t.argname.print(e)})),e.space(),z(t,e)}),e(ue,function(e){e.print("finally"),e.space(),z(this,e)}),e(j,Ve("const")),e(Te,Ve("let")),e(St,Ve("var")),e(kt,function(e){if(this.name.print(e),this.value){e.space(),e.print("="),e.space();var t=e.parent(1),n=t instanceof fe||t instanceof pe;ze(this.value,e,n)}}),e(U,function(e){this.name.print(e),e.space(),e.print("="),e.space(),this.value.print(e)}),e(x,function(e){Ue(this,e),this.expression.print(e),this.optional&&e.print("?."),$e(this,e)}),e(Pe,function(e){Ue(this,e),e.print("new"),e.space(),this.expression.print(e),lt(this,e)&&$e(this,e)}),e(Ye,function(e){this.expressions.forEach(function(t,n){n>0&&(e.comma(),e.should_break()&&(e.newline(),e.indent())),t.print(e)})}),e(Z,function(e){var t=this,n=t.expression;n.print(e);var i=t.property;e.option("ie")&&Vt[i]||t.quoted&&e.option("keep_quoted_props")?(t.optional&&e.print("?."),e.with_square(function(){e.add_mapping(t.end),e.print_string(i)})):(n instanceof Ie&&!/[ex.)]/i.test(e.last())&&e.print("."),e.print(t.optional?"?.":"."),e.add_mapping(t.end),e.print_name(i))}),e(et,function(e){var t=this;t.expression.print(e),t.optional&&e.print("?."),e.with_square(function(){t.property.print(e)})}),e(Ke,function(e){e.print("..."),this.expression.print(e)}),e(wt,function(e){var t=this.operator,n=this.expression;e.print(t),(/^[a-z]/i.test(t)||/[+-]$/.test(t)&&n instanceof wt&&/^[+-]/.test(n.operator))&&e.space(),n.print(e)}),e(xt,function(e){this.expression.print(e),e.add_mapping(this.end),e.print(this.operator)}),e(v,function(e){this.left.print(e),e.space(),e.print(this.operator),e.space(),this.right.print(e)}),e(M,function(e){this.condition.print(e),e.space(),e.print("?"),e.space(),this.consequent.print(e),e.space(),e.colon(),this.alternative.print(e)}),e(g,function(e){e.print("await"),e.space(),this.expression.print(e)}),e(Et,function(e){e.print(this.nested?"yield*":"yield"),this.expression&&(e.space(),this.expression.print(e))}),e(c,function(e){var t=this.elements,n=t.length;e.with_square(n>0?function(){e.space(),t.forEach(function(t,i){i&&e.comma(),t.print(e),i===n-1&&t instanceof ve&&e.comma()}),e.space()}:s)}),e(G,function(e){var t=this.elements,n=t.length,i=this.rest;e.with_square(n||i?function(){e.space(),t.forEach(function(t,n){n&&e.comma(),t.print(e)}),i?(n&&e.comma(),e.print("..."),i.print(e)):t[n-1]instanceof ve&&e.comma(),e.space()}:s)}),e(Y,function(e){var t=tt(this,e),n=this.value;if(t)if(n instanceof U){if(n.name instanceof rt&&t==ut(n.name))return e.space(),e.print("="),e.space(),void n.value.print(e)}else if(n instanceof rt&&t==ut(n))return;e.colon(),n.print(e)}),e(J,function(e){var t=this.properties,n=t.length,i=this.rest;n||i?e.with_block(function(){t.forEach(function(t,n){n&&(e.print(","),e.newline()),e.indent(),t.print(e)}),i&&(n&&(e.print(","),e.newline()),e.indent(),e.print("..."),i.print(e)),e.newline()},this.end):L(this,e)}),e(Ne,function(e){Xe(this,e)}),e(Le,function(e){tt(this,e),e.colon(),this.value.print(e)}),e(Me,function(e){Ce(this,e)}),e(Re,st("get")),e(Fe,st("set")),e(rt,function(e){e.print_name(ut(this))}),e(ot,function(e){var t=ut(this);e.print_name(t);var n=this.alias;n.value!=t&&(e.space(),e.print("as"),e.space(),W(n,e))}),e(ct,function(e){var t=ut(this),n=this.key;n.value&&n.value!=t&&(W(n,e),e.space(),e.print("as"),e.space()),e.print_name(t)}),e(ve,s),e(pt,function(e){this.tag&&this.tag.print(e),e.print("`");for(var t=0;t<this.expressions.length;t++)e.print(this.strings[t]),e.print("${"),this.expressions[t].print(e),e.print("}");e.print(this.strings[t]),e.print("`")}),e(F,function(e){e.print(""+this.value)}),e(Ze,function(e){e.print_string(this.value,this.quote)}),e(Ie,function(e){var n=this.start;t&&n&&null!=n.raw?e.print(n.raw):e.print(ht(this.value))}),e(He,function(e){var t=this.value,n=t.toString(),i=n.lastIndexOf("/");t.raw_source?n="/"+t.raw_source+n.slice(i):1==i?n="/(?:)"+n.slice(i):n.indexOf("/",1)<i&&(n="/"+n.slice(1,i).replace(/\\\\|[^/]?\//g,function(e){return"\\"==e[0]?e:e.slice(0,-1)+"\\/"})+n.slice(i)),e.print(e.to_utf8(n).replace(/\\(?:\0(?![0-9])|[^\0])/g,function(e){switch(e[1]){case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\t";case"\b":return"\b";case"\f":return"\f";case"\0":return"\0";case"\v":return"\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}}).replace(/[\n\r\u2028\u2029]/g,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}}))}),mt([De,ke],s),mt([c,g,y,S,F,B,$,K,X,ue,Se,Ae,Pe,Ne,Ke,Qe,rt,nt,it,vt,wt,Et],function(e){e.add_mapping(this.start)}),mt([I,Y,je],function(e){"string"==typeof this.key&&e.add_mapping(this.start,this.key)})}(),{OutputStream:Ut}}),define("skylark-uglifyjs/scope",["./utils","./ast","./parse"],function(e,t,n){"use strict";const{defaults:i,find_if:r,keep_name:s,mergeSort:o,member:a,push_uniq:c,make_node:u,return_false:f,return_this:l,return_true:p,string_template:h,DEF_BITPROPS:d,makePredicate:m,Dictionary:g}=e,{AST_Arrow:_,AST_Assign:v,AST_AsyncArrow:y,AST_Block:b,AST_Call:x,AST_Catch:w,AST_Class:S,AST_Conditional:k,AST_DefClass:A,AST_Definitions:T,AST_DefaultValue:E,AST_Defun:C,AST_Destructuring:P,AST_Destructured:O,AST_DestructuredKeyVal:D,AST_Dot:I,AST_DotHash:N,AST_Export:R,AST_ExportDeclaration:L,AST_For:M,AST_ForIn:j,AST_ForOf:F,AST_ForEnumeration:q,AST_Function:B,AST_Import:V,AST_IterationStatement:z,AST_Label:U,AST_LabeledStatement:$,AST_LabelRef:H,AST_Lambda:W,AST_LambdaDefinition:G,AST_LambdaExpression:Y,AST_LoopControl:J,AST_NameMapping:K,AST_Node:X,AST_PropAccess:Q,AST_Scope:Z,AST_Sequence:ee,AST_String:te,AST_Sub:ne,AST_Switch:ie,AST_SwitchBranch:re,AST_Symbol:se,AST_SymbolBlockDeclaration:oe,AST_SymbolCatch:ae,AST_SymbolClass:ce,AST_SymbolConst:ue,AST_SymbolDeclaration:fe,AST_SymbolDefClass:le,AST_SymbolDefun:pe,AST_SymbolExport:he,AST_SymbolFunarg:de,AST_SymbolImport:me,AST_SymbolLambda:ge,AST_SymbolLet:_e,AST_SymbolMethod:ve,AST_SymbolRef:ye,AST_SymbolVar:be,AST_Toplevel:xe,AST_Try:we,AST_VarDef:Se,AST_With:ke,TreeWalker:Ae,walk_body:Te,walk_lambda:Ee,AST_BlockScope:Ce,AST_Unary:Pe,is_arrow:Oe}=t,{RESERVED_WORDS:De}=n;function Ie(e,t,n,i){this._bits=0,this.defun=void 0,this.eliminated=0,this.id=e,this.init=i,this.mangled_name=null,this.name=n.name,this.orig=[n],this.references=[],this.replaced=0,this.safe_ids=void 0,this.scope=t}function Ne(e){return e.orig[0]instanceof de||e.orig[1]instanceof de}Ie.prototype={forEach:function(e){this.orig.forEach(e),this.references.forEach(e)},mangle:function(e){if(!this.mangled_name){var t=this.global&&e.cache&&e.cache.props;if(t&&t.has(this.name))this.mangled_name=t.get(this.name);else if(this.unmangleable(e))Fe(this.scope,e).set(this.name,!0);else{var n=this.redefined();this.mangled_name=n?n.mangled_name||n.name:function(e,t){var n,i=e.scope,r=Fe(i,t),s=i.cname_holes,o=new g,c=[i];e.forEach(function(e){var n=e.scope;do{if(a(n,c))break;Fe(n,t).each(function(e,t){o.set(t,e)}),c.push(n)}while(n=n.parent_scope)});for(var u=0;u<s.length;u++)if(n=Be(s[u]),!o.has(n))return s.splice(u,1),r.set(n,!0),n;for(;;)if(n=Be(++i.cname),!(r.has(n)||De[n]||t.reserved.has[n])){if(!o.has(n))break;s.push(i.cname)}return r.set(n,!0),n}(this,e),t&&t.set(this.name,this.mangled_name)}}},redefined:function(){var e=this.defun;if(e){var t=this.name,n=e.variables.get(t)||e instanceof xe&&e.globals.get(t)||this.orig[0]instanceof ue&&r(function(e){return e.name==t},e.enclosed);return n&&n!==this?n.redefined()||n:void 0}},unmangleable:function(e){if(this.exported)return!0;if(this.undeclared)return!0;if(!e.eval&&this.scope.pinned())return!0;if(e.keep_fargs&&Ne(this))return!0;if(e.keep_fnames){var t=this.orig[0];if(t instanceof ce)return!0;if(t instanceof le)return!0;if(t instanceof pe)return!0;if(t instanceof ge)return!0}return!(e.toplevel||!this.global)}},d(Ie,["const_redefs","cross_loop","direct_access","exported","global","undeclared"]);var Re=m("delete ++ --");function Le(e,t){return t instanceof v?t.left===e&&e:t instanceof E?t.name===e&&e:t instanceof O?e:t instanceof D?e:t instanceof q?t.init===e&&e:t instanceof Pe?Re[t.operator]&&t.expression:void 0}function Me(e,t){e.enclosed=[],e.parent_scope=t,e.functions=new g,e.variables=new g,t&&(e.make_def=t.make_def)}function je(e,t){Me(e,t),e.uses_eval=!1,e.uses_with=!1}function Fe(e,t){var n=e.names_in_use;if(!n){e.cname=-1,e.cname_holes=[],e.names_in_use=n=new g;var i=t.cache&&t.cache.props;e.enclosed.forEach(function(e){e.unmangleable(t)&&n.set(e.name,!0),e.global&&i&&i.has(e.name)&&n.set(i.get(e.name),!0)})}return n}function qe(e){return e=i(e,{eval:!1,ie:!1,keep_fargs:!1,keep_fnames:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1}),Array.isArray(e.reserved)||(e.reserved=[]),c(e.reserved,"arguments"),e.reserved.has=m(e.reserved),e}xe.DEFMETHOD("figure_out_scope",function(e){e=i(e,{cache:null,ie:!1});var t=this,n=null,r=!1,s=0,o=t.parent_scope=null,a=new Ae(function(t,i){if(t instanceof A){var s=r;return r=a.parent()instanceof L,t.name.walk(a),r=s,f(function(){t.extends&&t.extends.walk(a),t.properties.forEach(function(e){e.walk(a)})}),!0}if(t instanceof T){var s=r;return r=a.parent()instanceof L,i(),r=s,!0}if(t instanceof G){var s=r;return r=a.parent()instanceof L,t.name.walk(a),r=s,f(function(){t.argnames.forEach(function(e){e.walk(a)}),t.rest&&t.rest.walk(a),Te(t,a)}),!0}if(t instanceof re)return t.init_vars(o),i(),!0;if(t instanceof we)return f(function(){Te(t,a)}),t.bcatch&&t.bcatch.walk(a),t.bfinally&&t.bfinally.walk(a),!0;if(t instanceof ke){var c=o;do{if((c=c.resolve()).uses_with)break;c.uses_with=!0}while(c=c.parent_scope);return f(i),!0}if(t instanceof Ce)return f(i),!0;if(t instanceof se&&(t.scope=o),t instanceof U&&(t.thedef=t,t.references=[]),t instanceof ae)o.def_variable(t).defun=n;else if(t instanceof ue){var u=o.def_variable(t);u.defun=n,r&&(u.exported=!0)}else if(t instanceof pe){var u=n.def_function(t,a.parent());r&&(u.exported=!0)}else if(t instanceof de)n.def_variable(t);else if(t instanceof ge){var u=n.def_function(t,"arguments"==t.name?void 0:n);e.ie&&"arguments"!=t.name&&(u.defun=n.parent_scope.resolve())}else if(t instanceof _e){var u=o.def_variable(t);r&&(u.exported=!0)}else if(t instanceof be){var u=n.def_variable(t,t instanceof me?void 0:null);r&&(u.exported=!0)}function f(e){t.init_vars(o);var i=n,r=o;t instanceof Z&&(n=t),o=t,e(),o=r,n=i}});t.make_def=function(e,t){return new Ie(++s,this,e,t)},t.walk(a),t.globals=new g;var u=[],a=new Ae(function(n){if(n instanceof w){if(!(n.argname instanceof O))return;return u.push(n),n.argname.walk(a),u.pop(),Te(n,a),!0}if(n instanceof W)return u.push(n),n.name&&n.name.walk(a),n.argnames.forEach(function(e){e.walk(a)}),n.rest&&n.rest.walk(a),u.pop(),Ee(n,a),!0;if(n instanceof J)return n.label&&n.label.thedef.references.push(n),!0;if(n instanceof fe){var i=n.definition();if(i.preinit=i.references.length,n instanceof ae){var r=i.redefined();if(r)for(var s=n.scope;s&&c(s.enclosed,r)&&s!==r.scope;s=s.parent_scope);}else if(n instanceof ue){var r=i.redefined();r&&(r.const_redefs=!0)}else if(i.scope!==n.scope&&(n instanceof pe||n instanceof de||n instanceof be)){n.mark_enclosed(e);var r=n.scope.find_variable(n.name);n.thedef!==r&&(n.thedef=r,r.orig.push(n),n.mark_enclosed(e))}if("arguments"!=n.name)return!0;var o=n instanceof be&&a.parent();if(o instanceof Se&&!o.value)return!0;var l=n.scope.resolve().find_variable("arguments");return l&&f(l)&&(l.scope.uses_arguments=3),!0}if(n instanceof ye){for(var p=n.name,l=n.scope.find_variable(p),h=u.length;h>0&&l&&!((h=u.lastIndexOf(l.scope,h-1))<0);){var d=l.orig[0];if(d instanceof ae||d instanceof de||d instanceof ge){n.in_arg=!0;break}l=l.scope.parent_scope.find_variable(p)}if(l){if("arguments"==p&&f(l)){var o=a.parent();Le(n,o)?l.scope.uses_arguments=3:l.scope.uses_arguments<2&&!(o instanceof Q&&o.expression===n)?l.scope.uses_arguments=2:l.scope.uses_arguments||(l.scope.uses_arguments=!0)}}else l=t.def_global(n);if("eval"==p){var o=a.parent();if("Call"==o.TYPE&&o.expression===n){var s=n.scope;do{if((s=s.resolve()).uses_eval)break;s.uses_eval=!0}while(s=s.parent_scope)}else l.undeclared&&(t.uses_eval=!0)}if(l.init instanceof G&&l.scope!==l.init.name.scope){var m=n.scope;do{if(m===l.init.name.scope)break}while(m=m.parent_scope);m||(l.init=void 0)}return n.thedef=l,n.reference(e),!0}});function f(e){return e.orig[0]instanceof de&&!(e.orig[1]instanceof de||e.orig[2]instanceof de)&&!Oe(e.scope)}function l(n,i){var r=n.name,s=n.thedef;if(!all(s.orig,function(e){return!(e instanceof ue||e instanceof _e)}))return!1;var o=i.find_variable(r);if(o){var a=o.redefined();a&&(o=a)}else o=t.globals.get(r);return o?o.orig.push(n):o=i.def_variable(n),o.undeclared&&t.variables.set(r,o),!!("arguments"==r&&f(s)&&n instanceof ge)||(s.defun=o.scope,s.forEach(function(t){t.redef=s,t.thedef=o,t.reference(e)}),!0)}t.walk(a),e.ie&&t.walk(new Ae(function(e){if(e instanceof ae){var t=e.thedef,n=t.defun;return"arguments"!=t.name&&n.name instanceof ge&&n.name.name==t.name&&(n=n.parent_scope.resolve()),l(e,n),!0}if(e instanceof ge){var t=e.thedef;return l(e,e.scope.parent_scope.resolve())?void 0!==e.thedef.init?e.thedef.init=!1:t.init&&(e.thedef.init=t.init):t.defun=void 0,!0}}))}),xe.DEFMETHOD("def_global",function(e){var t=this.globals,n=e.name;if(t.has(n))return t.get(n);var i=this.make_def(e);return i.undeclared=!0,i.global=!0,t.set(n,i),i}),Ce.DEFMETHOD("init_vars",function(e){Me(this,e)}),Z.DEFMETHOD("init_vars",function(e){je(this,e)}),_.DEFMETHOD("init_vars",function(e){return je(this,e),this}),y.DEFMETHOD("init_vars",function(e){je(this,e)}),W.DEFMETHOD("init_vars",function(e){return je(this,e),this.uses_arguments=!1,this.def_variable(new de({name:"arguments",scope:this,start:this.start,end:this.end})),this}),se.DEFMETHOD("mark_enclosed",function(e){for(var t=this.definition(),n=this.scope;n&&c(n.enclosed,t)&&(e?(e.keep_fargs&&n instanceof W&&n.each_argname(function(e){c(t.scope.enclosed,e.definition())}),e.keep_fnames&&n.functions.each(function(e){c(t.scope.enclosed,e)})):n._var_names=void 0,n!==t.scope);n=n.parent_scope);}),se.DEFMETHOD("reference",function(e){this.definition().references.push(this),this.mark_enclosed(e)}),Ce.DEFMETHOD("find_variable",function(e){return this.variables.get(e)||this.parent_scope&&this.parent_scope.find_variable(e)}),Ce.DEFMETHOD("def_function",function(e,t){var n=this.def_variable(e,t);return(!n.init||n.init instanceof G)&&(n.init=t),this.functions.set(e.name,n),n}),Ce.DEFMETHOD("def_variable",function(e,t){var n=this.variables.get(e.name);return n?(n.orig.push(e),n.init instanceof Y&&(n.init=t)):(n=this.make_def(e,t),this.variables.set(e.name,n),n.global=!this.parent_scope),e.thedef=n}),se.DEFMETHOD("unmangleable",function(e){var t=this.definition();return!t||t.unmangleable(e)}),U.DEFMETHOD("unmangleable",f),se.DEFMETHOD("definition",function(){return this.thedef}),xe.DEFMETHOD("mangle_names",function(e){if((e=qe(e)).cache&&e.cache.props){var t=Fe(this,e);e.cache.props.each(function(e){t.set(e,!0)})}var n=-1,i=[],r=new Ae(function(t,o){var a;if(t instanceof Ce){t instanceof $&&(a=n),e.webkit&&t instanceof z&&t.init instanceof AST_Let&&t.init.definitions.forEach(function(e){e.name.match_symbol(function(e){if(e instanceof _e){var t=e.definition(),n=e.scope.parent_scope,i=n.def_variable(e);e.thedef=t,n.to_mangle.push(i),t.redefined=function(){return i}}})},!0);var c=t.to_mangle=[];if(t.variables.each(function(t){(function(t){var n=t.orig[0],r=t.redefined();if(!r){if(!(n instanceof ue))return!1;var s=t.scope.resolve();if(t.scope===s)return!1;if(t.scope.parent_scope.find_variable(n.name))return!1;r=s.def_variable(n),s.to_mangle.push(r)}i.push(t),t.references.forEach(o),(n instanceof ae||n instanceof ue)&&(o(n),t.redefined=function(){return r});return!0;function o(n){n.thedef=r,n.reference(e),n.thedef=t}})(t)||c.push(t)}),o(),e.cache&&t instanceof xe&&t.globals.each(s),t instanceof C&&r.has_directive("use asm")){var u=new ye(t.name);u.scope=t,u.reference(e)}if(c.length>36){var f=c.map(function(e,t){return t}).sort(function(e,t){return c[t].references.length-c[e].references.length||e-t});c=f.slice(0,36).sort(function(e,t){return e-t}).map(function(e){return c[e]}).concat(f.slice(36).sort(function(e,t){return e-t}).map(function(e){return c[e]}))}return c.forEach(s),!(t instanceof $)||e.v8&&function(t){var n,i=0;for(;n=t.parent(i++);){if(n instanceof b)return n instanceof xe&&!e.toplevel;if(n instanceof $)return!0}}(r)||(n=a),!0}if(t instanceof U){var l;do{l=Be(++n)}while(De[l]);return t.mangled_name=l,!0}});function s(t){e.reserved.has[t.name]||t.mangle(e)}this.walk(r),i.forEach(s)}),xe.DEFMETHOD("find_colliding_names",function(e){var t=e.cache&&e.cache.props,n=Object.create(De);return e.reserved.forEach(i),this.globals.each(r),this.walk(new Ae(function(e){e instanceof Ce&&e.variables.each(r)})),n;function i(e){n[e]=!0}function r(n){var r=n.name;if(n.global&&t&&t.has(r))r=t.get(r);else if(!n.unmangleable(e))return;i(r)}}),xe.DEFMETHOD("expand_names",function(e){Be.reset(),Be.sort(),e=qe(e);var t=this.find_colliding_names(e),n=0;function i(i){if(!(i.global&&e.cache||i.unmangleable(e)||e.reserved.has[i.name])){var r=i.redefined(),s=r?r.rename||r.name:function(){var e;do{e=Be(n++)}while(t[e]);return e}();i.rename=s,i.forEach(function(e){e.definition()===i&&(e.name=s)})}}this.globals.each(i),this.walk(new Ae(function(e){e instanceof Ce&&e.variables.each(i)}))}),X.DEFMETHOD("tail_node",l),ee.DEFMETHOD("tail_node",function(){return this.expressions[this.expressions.length-1]}),xe.DEFMETHOD("compute_char_frequency",function(e){e=qe(e),Be.reset();var t=se.prototype.add_source_map;try{se.prototype.add_source_map=function(){this.unmangleable(e)||Be.consider(this.name,-1)},e.properties&&(I.prototype.add_source_map=function(){Be.consider(this.property,-1)},ne.prototype.add_source_map=function(){!function e(t){t instanceof te?Be.consider(t.value,-1):t instanceof k?(e(t.consequent),e(t.alternative)):t instanceof ee&&e(t.tail_node())}(this.property)}),Be.consider(this.print_to_string(),1)}finally{se.prototype.add_source_map=t,delete I.prototype.add_source_map,delete ne.prototype.add_source_map}Be.sort()});var Be=function(){var e=Object.create(null);function t(t){for(var n=[],i=0;i<t.length;i++){var r=t[i];n.push(r),e[r]=-.01*i}return n}var n,i,r=t("0123456789"),s=t("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_");function o(){n=null,i=Object.create(e)}function a(e,t){return i[t]-i[e]}function c(e){var t=s[e%54];for(e=Math.floor(e/54);--e>=0;e>>=6)t+=n[63&e];return t}return c.consider=function(e,t){for(var n=e.length;--n>=0;)i[e[n]]+=t},c.sort=function(){n=s.sort(a).concat(r).sort(a)},c.reset=o,o(),c}();return{base54:Be,is_lhs:Le,is_funarg:Ne,unary_side_effects:Re}}),define("skylark-uglifyjs/compress",["./utils","./ast","./output","./parse","./scope"],function(e,t,n,i,r){"use strict";const{AST_Accessor:s,AST_Array:o,AST_Arrow:a,AST_Assign:c,AST_AsyncArrow:u,AST_AsyncDefun:f,AST_AsyncFunction:l,AST_AsyncGeneratorDefun:p,AST_AsyncGeneratorFunction:h,AST_Atom:d,AST_Await:m,AST_BigInt:g,AST_Binary:_,AST_Block:v,AST_BlockScope:y,AST_BlockStatement:b,AST_Boolean:x,AST_Break:w,AST_Call:S,AST_Case:k,AST_Catch:A,AST_Chain:T,AST_Class:E,AST_ClassExpression:C,AST_ClassField:P,AST_ClassGetter:O,AST_ClassInit:D,AST_ClassInitBlock:I,AST_ClassMethod:N,AST_ClassProperty:R,AST_ClassSetter:L,AST_ClassStaticBlock:M,AST_ConciseMethod:j,AST_Conditional:F,AST_Const:q,AST_Constant:B,AST_Continue:V,AST_Debugger:z,AST_Default:U,AST_DefaultAssign:$,AST_DefaultValue:H,AST_DefClass:W,AST_Definitions:G,AST_Defun:Y,AST_Destructuring:J,AST_Destructured:K,AST_DestructuredArray:X,AST_DestructuredKeyVal:Q,AST_DestructuredObject:Z,AST_Directive:ee,AST_Do:te,AST_Dot:ne,AST_DWLoop:ie,AST_EmptyStatement:re,AST_Exit:se,AST_Expansion:oe,AST_Export:ae,AST_ExportDeclaration:ce,AST_ExportDefault:ue,AST_ExportReferences:fe,AST_False:le,AST_Finally:pe,AST_For:he,AST_ForEnumeration:de,AST_ForIn:me,AST_Function:ge,AST_Hole:_e,AST_If:ve,AST_Import:ye,AST_Infinity:be,AST_IterationStatement:xe,AST_Jump:we,AST_LabeledStatement:Se,AST_Lambda:ke,AST_LambdaDefinition:Ae,AST_LambdaExpression:Te,AST_Let:Ee,AST_LoopControl:Ce,AST_NaN:Pe,AST_New:Oe,AST_NewTarget:De,AST_Node:Ie,AST_Null:Ne,AST_Number:Re,AST_Object:Le,AST_ObjectKeyVal:Me,AST_ObjectGetter:je,AST_ObjectProperty:Fe,AST_ObjectIdentity:qe,AST_ObjectMethod:Be,AST_ObjectSetter:Ve,AST_PrefixedTemplateString:ze,AST_PropAccess:Ue,AST_RegExp:$e,AST_Return:He,AST_Scope:We,AST_Sequence:Ge,AST_SimpleStatement:Ye,AST_Spread:Je,AST_Statement:Ke,AST_String:Xe,AST_Sub:Qe,AST_Super:Ze,AST_Switch:et,AST_SwitchBranch:tt,AST_Symbol:nt,AST_SymbolCatch:it,AST_SymbolClass:rt,AST_SymbolClassProperty:st,AST_SymbolConst:ot,AST_SymbolDeclaration:at,AST_SymbolDefun:ct,AST_SymbolExport:ut,AST_SymbolFunarg:ft,AST_SymbolImport:lt,AST_SymbolLambda:pt,AST_SymbolLet:ht,AST_SymbolMethod:dt,AST_SymbolRef:mt,AST_SymbolVar:gt,AST_Template:_t,AST_TemplateString:vt,AST_This:yt,AST_Throw:bt,AST_Toplevel:xt,AST_True:wt,AST_Try:St,AST_Unary:kt,AST_UnaryPostfix:At,AST_UnaryPrefix:Tt,AST_Undefined:Et,AST_Var:Ct,AST_VarDef:Pt,AST_While:Ot,AST_With:Dt,AST_Yield:It,TreeTransformer:Nt,TreeWalker:Rt,_INLINE:Lt,_NOINLINE:Mt,_PURE:jt,first_in_statement:Ft,root_expr:qt,is_arrow:Bt,is_generator:Vt,is_statement:zt,is_async:Ut,walk_body:$t,walk_lambda:Ht}=t,{all:Wt,defaults:Gt,Dictionary:Yt,find_if:Jt,has_annotation:Kt,HOP:Xt,List:Qt,make_node:Zt,makePredicate:en,MAP:tn,member:nn,noop:rn,push_uniq:sn,regexp_source_fix:on,regexp_is_safe:an,remove:cn,return_false:un,return_null:fn,return_true:ln,return_this:pn}=e,{is_basic_identifier_string:hn,JS_Parse_Error:dn,parse:mn,PRECEDENCE:gn,decode_escape_sequence:_n,is_identifier_string:vn,UNARY_POSTFIX:yn}=i,{OutputStream:bn}=n,{base54:xn,is_lhs:wn,is_funarg:Sn,unary_side_effects:kn}=r;function An(e,t){if(!(this instanceof An))return new An(e,t);Nt.call(this,this.before,this.after),this.options=Gt(e,{annotations:!t,arguments:!t,arrows:!t,assignments:!t,awaits:!t,booleans:!t,collapse_vars:!t,comparisons:!t,conditionals:!t,dead_code:!t,default_values:!t,directives:!t,drop_console:!1,drop_debugger:!t,evaluate:!t,expression:!1,functions:!t,global_defs:!1,hoist_exports:!t,hoist_funs:!1,hoist_props:!t,hoist_vars:!1,ie:!1,if_return:!t,imports:!t,inline:!t,join_vars:!t,keep_fargs:t,keep_fnames:!1,keep_infinity:!1,loops:!t,merge_vars:!t,module:!1,negate_iife:!t,objects:!t,optional_chains:!t,passes:1,properties:!t,pure_funcs:null,pure_getters:!t&&"strict",reduce_funcs:!t,reduce_vars:!t,rests:!t,sequences:!t,side_effects:!t,spreads:!t,strings:!t,switches:!t,templates:!t,top_retain:null,toplevel:!(!e||!e.module&&!e.top_retain),typeofs:!t,unsafe:!1,unsafe_comps:!1,unsafe_Function:!1,unsafe_math:!1,unsafe_proto:!1,unsafe_regexp:!1,unsafe_undefined:!1,unused:!t,varify:!t,webkit:!1,yields:!t},!0);var n=this.options.evaluate;this.eval_threshold=/eager/.test(n)?1/0:+n;var i=this.options.global_defs;if("object"==typeof i)for(var r in i)/^@/.test(r)&&Xt(i,r)&&(i[r.slice(1)]=mn(i[r],{expression:!0}));!0===this.options.inline&&(this.options.inline=4),this.drop_fargs=this.options.keep_fargs?un:function(e,t){if(e.length_read)return!1;var n=e.name;if(!n)return t&&"Call"==t.TYPE&&t.expression===e;if(n.fixed_value()!==e)return!1;var i=n.definition();if(i.direct_access)return!1;var r=i.escaped;return r&&1!=r.depth},this.options.module&&(this.directives["use strict"]=!0);var s=this.options.pure_funcs;"function"==typeof s?this.pure_funcs=s:"string"==typeof s?this.pure_funcs=function(e){var t;return e instanceof S?t=e.expression:e instanceof _t&&(t=e.tag),!(t&&s===t.print_to_string())}:Array.isArray(s)?this.pure_funcs=function(e){var t;return e instanceof S?t=e.expression:e instanceof _t&&(t=e.tag),!(t&&nn(t.print_to_string(),s))}:this.pure_funcs=ln;var o=this.options.sequences;this.sequences_limit=1==o?800:0|o;var a=this.options.top_retain;a instanceof RegExp?this.top_retain=function(e){return a.test(e.name)}:"function"==typeof a?this.top_retain=a:a&&("string"==typeof a&&(a=a.split(/,/)),this.top_retain=function(e){return nn(e.name,a)});var c=this.options.toplevel;this.toplevel="string"==typeof c?{funcs:/funcs/.test(c),vars:/vars/.test(c)}:{funcs:c,vars:c}}return An.prototype=new Nt(function(e,t,n){if(e._squeezed)return e;var i=e instanceof We;i&&(this.option("arrows")&&Bt(e)&&e.value&&(e.body=[e.first_statement()],e.value=null),e.hoist_properties(this),e.hoist_declarations(this),e.process_returns(this)),t(e,this),t(e,this);var r=e.optimize(this);return!i||r!==e||this.has_directive("use asm")||r.pinned()||(r.drop_unused(this),r.merge_variables(this)&&r.drop_unused(this),t(r,this)),r===e&&(r._squeezed=!0),r}),An.prototype.option=function(e){return this.options[e]},An.prototype.exposed=function(e){if(e.exported)return!0;if(e.undeclared)return!0;if(!(e.global||e.scope.resolve()instanceof xt))return!1;var t=this.toplevel;return!Wt(e.orig,function(e){return t[e instanceof ct?"funcs":"vars"]})},An.prototype.compress=function(e){(e=e.resolve_defines(this)).hoist_exports(this),this.option("expression")&&e.process_expression(!0);for(var t=this.options.merge_vars,n=+this.options.passes||1,i=1/0,r=!1,s={ie:this.option("ie")},o=0;o<n;o++)if(e.figure_out_scope(s),(o>0||this.option("reduce_vars"))&&e.reset_opt_flags(this),this.options.merge_vars=t&&(r||o==n-1),e=e.transform(this),n>1){var a=0;if(e.walk(new Rt(function(){a++})),Ie.info("pass {pass}: last_count: {min_count}, count: {count}",{pass:o,min_count:i,count:a}),a<i)i=a,r=!1;else{if(r)break;r=!0}}return this.option("expression")&&e.process_expression(!1),e},function(e){function t(e,t){var n=t.get_property();if(!(n instanceof Ie)){var i;if(e instanceof o){var r=e.elements;if("length"==n)return xn(r.length,e);"number"==typeof n&&n in r&&(i=r[n])}else if(e instanceof ke){if("length"==n)return e.length_read=!0,xn(e.argnames.length,e)}else if(e instanceof Le){n=""+n;for(var s=e.properties,a=s.length;--a>=0;){var c=s[a];if(!or(c))return;i||s[a].key!==n||(i=s[a].value)}}return i instanceof mt&&i.fixed_value()||i}}function n(e,i,r,s,a,u,f){var l=i.parent(a);if(!(e.option("unsafe")&&l instanceof ne&&function(e,t){if(e instanceof x)return ri.Boolean[t];if(e instanceof Re)return ri.Number[t];if(e instanceof Xe)return ri.String[t];if("valueOf"==t)return!1;if(e instanceof o)return ri.Array[t];if(e instanceof ke)return ri.Function[t];if(e instanceof Le)return ri.Object[t];if(e instanceof $e)return ri.RegExp[t]&&!e.value.global}(s,l.property))){var p=wn(r,l);if(p)return p;if(0!=a||!s||!s.is_constant()){if(l instanceof o)return n(e,i,l,l,a+1);if(l instanceof c)switch(l.operator){case"=":return n(e,i,l,s,a+1,u,f);case"&&=":case"||=":case"??=":return n(e,i,l,l,a+1);default:return}if(l instanceof _){if(!Jn[l.operator])return;return n(e,i,l,l,a+1)}if(l instanceof S)return!u&&l.expression===r&&!l.is_expr_pure(e)&&(!(s instanceof Te)||!(l instanceof Oe)&&s.contains_this());if(l instanceof F){if(l.condition===r)return;return n(e,i,l,l,a+1)}if(l instanceof de)return l.init===r;if(l instanceof Me){if(l.value!==r)return;var h=i.parent(a+1);return n(e,i,h,h,a+2)}if(l instanceof Ue){if(l.expression!==r)return;var d=t(s,l);return(!u||f)&&n(e,i,l,d,a+1)}if(l instanceof Ge){if(l.tail_node()!==r)return;return n(e,i,l,s,a+1,u,f)}}}}function i(e){return e instanceof E||e instanceof ke}function r(e){return e instanceof E||e instanceof Y||e instanceof ge}function T(e){return"arguments"==e.name&&e.scope.uses_arguments}function M(e,t){do{if(e===t)return!1;if(t instanceof We)return!0}while(t=t.parent_scope)}function j(e,t,n){var i=e.redef||e.definition();return(!e.in_arg||!Sn(i))&&Wt(i.orig,function(e){return e instanceof ot||e instanceof ht?e instanceof lt||t&&Ii(t,e):!(n&&e instanceof pt)})}function $(e,t,n,i){return i instanceof c?"="==i.operator&&i.right===n:i instanceof S?i.expression!==n||i instanceof Oe:i instanceof P?i.value===n&&!i.static:i instanceof se?i.value===n&&t.resolve()!==e.scope.resolve():i instanceof Pt?i.value===n:void 0}function J(e,t){var n=an(mt,e);return n.fixed=t||an(Et,e),n}function oe(e,t){return function(n){var i=e(n),n=J(i,t),r=i.definition();return r.references.push(n),r.replaced++,n}}e(Ie,function(e,t){return e}),xt.DEFMETHOD("hoist_exports",function(e){if(e.option("hoist_exports")){for(var t=this.body,n=[],i=0;i<t.length;i++){var r=t[i];r instanceof ce?(t[i]=r=r.body,r instanceof G?r.definitions.forEach(function(e){e.name.match_symbol(s,!0)}):s(r.name)):r instanceof fe&&(t.splice(i--,1),[].push.apply(n,r.properties))}n.length&&t.push(an(fe,this,{properties:n}))}function s(e){if(e instanceof at){var t=an(ut,e);t.alias=an(Xe,t,{value:t.name}),n.push(t)}}}),We.DEFMETHOD("process_expression",function(e,t){var n=this,i=new Nt(function(r){if(e){if(r instanceof ee&&(r=an(Ye,r,{body:an(Xe,r)})),r instanceof Ye)return t?t(r):an(He,r,{value:r.body})}else if(r instanceof He){if(t)return t(r);var s=r.value;return s instanceof Xe?an(ee,s):an(Ye,r,{body:s||an(Tt,r,{operator:"void",expression:an(Re,r,{value:0})})})}if(r instanceof v){if(r instanceof ke){if(r!==n)return r}else if("awaits"===e&&r instanceof St&&r.bfinally)return r;for(var o=r.body.length;--o>=0;){var a=r.body[o];if(!Un(a,!0)){r.body[o]=a.transform(i);break}}}else r instanceof ve?(r.body=r.body.transform(i),r.alternative&&(r.alternative=r.alternative.transform(i))):r instanceof Dt&&(r.body=r.body.transform(i));return r});n.transform(i)}),xt.DEFMETHOD("unwrap_expression",function(){switch(this.body.length){case 0:return an(Tt,this,{operator:"void",expression:an(Re,this,{value:0})});case 1:var e=this.body[0];if(e instanceof ee)return an(Xe,e);if(e instanceof Ye)return e.body;default:return an(S,this,{expression:an(ge,this,{argnames:[],body:this.body}).init_vars(this),args:[]})}}),Ie.DEFMETHOD("wrap_expression",function(){var e=this;return zt(e)||(e=an(Ye,e,{body:e})),e instanceof xt||(e=an(xt,e,{body:[e]})),e});var ae=/^(0|[1-9][0-9]*)$/;function ze(e){e._squeezed=!1,e._optimized=!1,e instanceof y&&(e._var_names=void 0),e instanceof mt&&(e.fixed=void 0)}function st(e,t){return this.transform(new Nt(function(n,i){return n instanceof H?((n=n.clone()).name=n.name.transform(this),n):n instanceof K?(n=n.clone(),i(n,this),n):n instanceof Q?((n=n.clone()).value=n.value.transform(this),n):n.convert_symbol(e,t)}))}function dt(e,t){var n=an(e,this);return t(n,this)||n}function vt(e){var t=e.definition();t.assignments++,t.references.push(e)}function Lt(e,t){var n=new Rt(function(i){return i instanceof H?(i.value.walk(t),i.name.walk(n),!0):i instanceof Q?(i.key instanceof Ie&&i.key.walk(t),i.value.walk(n),!0):e(i)});this.walk(n)}function Mt(e){return e(this)}function jt(e,t){var n=!1,i=new Rt(function(r){return!!n||(r instanceof H?t?(r.name.walk(i),!0):n=!0:r instanceof Q?!t&&r.key instanceof Ie?n=!0:(r.value.walk(i),!0):e(r)?n=!0:void 0)});return this.walk(i),n}function Gt(e){return e instanceof p||e instanceof h}function Kt(e){var t=0,n=e.self();do{if(n.variables)return n}while(n=e.parent(t++))}function Zt(e,t,n,i,r,s){for(var o;o=e.parent(t++);n=o){if(o===i)return!1;if(s&&o instanceof ke){if(o.name||Ut(o)||Vt(o))return!0}else if(o instanceof St){if(o.bfinally&&o.bfinally!==n)return!0;if(r&&o.bcatch&&o.bcatch!==n)return!0}}return!1}!function(e){function r(e,t,n){n.assignments=0,n.bool_return=0,n.drop_return=0,n.cross_loop=!1,n.direct_access=!1,n.escaped=[],n.fixed=!n.const_redefs&&!n.scope.pinned()&&!t.exposed(n)&&!(n.init instanceof Te&&n.init!==n.scope)&&n.init,n.reassigned=0,n.recursive_refs=0,n.references=[],n.single_use=void 0}function s(e,t,n){n.variables.each(function(n){r(e,t,n)})}function a(e,t,n){n.fn_defs=[],n.variables.each(function(i){r(e,t,i);var s=i.init;s instanceof Ae&&(n.fn_defs.push(s),s.safe_ids=null),null===i.fixed?(i.safe_ids=e.safe_ids,g(e,i)):i.fixed&&(e.loop_ids[i.id]=e.in_loop,g(e,i))}),n.may_call_this=function(){n.may_call_this=n.contains_this()?ln:un},n.uses_arguments&&n.each_argname(function(e){e.definition().last_ref=!1}),t.option("ie")&&n.variables.each(function(e){var t=e.orig[0].definition();t!==e&&(t.fixed=!1)})}function u(e,t){var n=t.safe_ids;return void 0===n||n===e.safe_ids}function f(e,t){var n=e.fn_scanning;e.fn_scanning=t,t.walk(e),e.fn_scanning=n}function l(e,t){t.enclosed.forEach(function(n){if(t.variables.get(n.name)!==n&&!b(e,n)){n.single_use=!1;var i=n.fixed;"function"==typeof i&&(i=i()),i instanceof ke&&void 0!==i.safe_ids||(n.fixed=!1)}})}function p(e,t,n){var i=n.safe_ids;if(void 0!==i&&!1!==i)if(n.parent_scope.resolve().may_call_this===ln)nn(n,e.fn_visited)&&l(e,n);else if(i){var r=nn(n,e.fn_visited);i===e.safe_ids?r||f(e,n):r?l(e,n):n.safe_ids=!1}else e.fn_scanning&&e.fn_scanning!==t.scope.resolve()?n.safe_ids=!1:(n.safe_ids=e.safe_ids,f(e,n))}function h(e,t){var n=t.fn_defs,i=t.may_call_this===ln?n:n.filter(function(t){return!1===t.safe_ids||(t.safe_ids=e.safe_ids,f(e,t),!1)});m(e),i.forEach(function(t){t.safe_ids=e.safe_ids,f(e,t)}),n.forEach(function(e){e.safe_ids=void 0}),t.fn_defs=void 0,t.may_call_this=void 0}function d(e,t){var n=Object.create(e.safe_ids);t||(n.seq={}),e.safe_ids=n}function m(e){e.safe_ids=Object.getPrototypeOf(e.safe_ids)}function g(e,t){e.safe_ids[t.id]={}}function v(e,t){e.references.push(t),!1!==e.last_ref&&(e.last_ref=t)}function b(e,t){if("m"==t.single_use)return!1;var n=e.safe_ids[t.id];if(n){var i=Xt(e.safe_ids,t.id);if(!i){var r=e.safe_ids.seq;n.read?n.read!==r&&(n.read=!0):n.read=r}return null==t.fixed?!T(t)&&((!t.global||"arguments"!=t.name)&&(e.loop_ids[t.id]=null,t.fixed=an(Et,t.orig[0]),i&&(t.safe_ids=void 0),!0)):!n.assign||n.assign===e.safe_ids}return t.fixed instanceof Ae}function x(e,t,n){if(!n){if(Sn(t)&&t.scope.uses_arguments&&!e.has_directive("use strict"))return!1;if(!Wt(t.orig,function(e){return!(e instanceof ot)}))return!1}if(void 0===t.fixed)return n||Wt(t.orig,function(e){return!(e instanceof ht)});if(!1===t.fixed||0===t.fixed)return!1;var i=e.safe_ids[t.id];if(t.safe_ids)return t.safe_ids[t.id]=!1,t.safe_ids=void 0,null===t.fixed||Xt(e.safe_ids,t.id)&&!i.read;if(!Xt(e.safe_ids,t.id)){if(!i)return!1;if(i.read||e.in_loop){var r=e.find_parent(y);if(r instanceof E)return!1;if(t.scope.resolve()!==r.resolve())return!1}i.assign=!(!i.assign||i.assign===e.safe_ids)||e.safe_ids}if(null!=t.fixed&&i.read){if(i.read!==e.safe_ids.seq)return!1;if(e.loop_ids[t.id]!==e.in_loop)return!1}return b(e,t)&&Wt(t.orig,function(e){return!(e instanceof pt)})}function w(e){if(!e)return!1;if(e instanceof c){var t=e.operator;return"="==t?w(e.right):!Jn[t.slice(0,-1)]}return e instanceof Ge?w(e.tail_node()):e.is_constant()||i(e)||e instanceof qe}function k(e,n,i,r,s,a,c){var u=e.parent(a);if(!s||!s.is_constant()){if($(n,i,r,u))return n.escaped.push(u),!(c>1)||s&&s.is_constant_expression(i)||(c=1),(!n.escaped.depth||n.escaped.depth>c)&&(n.escaped.depth=c),n.scope.resolve()!==i.resolve()&&(n.escaped.cross_scope=!0),void(n.fixed&&(n.fixed.escaped=n.escaped));if(function(e,t){if(t instanceof o)return!0;if(t instanceof _)return Jn[t.operator];if(t instanceof F)return t.condition!==e;if(t instanceof Ge)return t.tail_node()===e;if(t instanceof Je)return!0}(r,u))k(e,n,i,u,u,a+1,c);else if(u instanceof Me&&u.value===r){var f=e.parent(a+1);k(e,n,i,f,f,a+2,c)}else if(u instanceof Ue&&u.expression===r&&(s=t(s,u),k(e,n,i,u,s,a+1,c+1),s))return;a>0||u instanceof S&&u.expression===r||u instanceof Ge&&u.tail_node()!==r||u instanceof Ye||u instanceof kt&&!kn[u.operator]||(n.direct_access=!0,n.fixed&&(n.fixed.direct_access=!0))}}function A(e){if(e instanceof Qe){var t=e.expression;if(t instanceof mt){var n=t.definition();if(T(n)){var i=e.property;i.is_constant()&&(i=i.value),(i instanceof Ie||ae.test(i))&&(n.reassigned++,(i instanceof Ie?n.scope.argnames:[n.scope.argnames[i]]).forEach(function(e){e instanceof ft&&(e.definition().fixed=!1)}))}}}}function C(e,t){var n,i;return function(){var r=e();return n!==r&&(n=r,i=t(r)),i}}function P(e,t,n,i,r){var s=new Rt(function(n){if(n instanceof H){ze(n),d(e,!0),n.value.walk(e),m(e);var a=i;return a&&(i=function(e,t,n){var i,r;return function(){if(r===t)return t;var s=n(),o=Ti(e,s,!0);return o instanceof Ie?r=t:i!==s&&(i=s,r=void 0===o?hn(t,[s,t.value]):s),r}}(t,n,a)),n.name.walk(s),i=a,!0}if(n instanceof X){ze(n);var c,a=i;if(n.elements.forEach(function(e,t){if(e instanceof _e)return ze(e);a&&(i=C(a,function(n){return an(Qe,e,{expression:n,property:an(Re,e,{value:t})})})),e.walk(s)}),n.rest)a&&(i=t.option("rests")&&C(a,function(e){if(!(e instanceof o))return n;for(var t=0,i=n.elements.length;t<i;t++)if(e.elements[t]instanceof Je)return n;return c||(c=an(o,n,{})),c.elements=e.elements.slice(i),c})),n.rest.walk(s);return i=a,!0}if(n instanceof Z){ze(n);var a=i;return n.properties.forEach(function(t){ze(t),t.key instanceof Ie&&(d(e),t.key.walk(e),m(e)),a&&(i=C(a,function(e){var n=t.key,i=Qe;return"string"==typeof n&&(vn(n)?i=ne:n=xn(n,t)),an(i,t,{expression:e,property:n})})),t.value.walk(s)}),n.rest&&(i=!1,n.rest.walk(s)),i=a,!0}return r(n,i,function(){for(var t=e.stack.length,i=0,r=s.stack.length-1;i<r;i++)e.stack.push(s.stack[i]);n.walk(e),e.stack.length=t}),!0});n.walk(s)}function O(e,t,n){var i=this;i.inlined=!1;var r=e.parent(),s=!Ut(i)&&!Vt(i),c=!s,u=!1;i.walk(new Rt(function(e){return c?u=!0:e instanceof He?c=!0:e instanceof We&&e!==i||void 0})),u&&d(e,s),a(e,n,i);var f=!i.uses_arguments||e.has_directive("use strict");i.argnames.forEach(function(t,s){var o=r.args[s];P(e,n,t,function(){var e=i.argnames.indexOf(t),n=e<0?o:r.args[e];return n instanceof Ge&&n.expressions.length<2&&(n=n.expressions[0]),n||an(Et,r)},_)});var l,p=i.rest;p&&P(e,n,p,n.option("rests")&&function(){return i.rest!==p?p:(l||(l=an(o,i,{})),l.elements=r.args.slice(i.argnames.length),l)},_),Ht(i,e);var m=e.safe_ids;return h(e,i),u||(e.safe_ids=m),!0;function _(t,n){var i=t.definition();n&&f&&void 0===i.fixed?(g(e,i),e.loop_ids[i.id]=e.in_loop,i.fixed=n,i.fixed.assigns=[t]):i.fixed=!1}}e(Ie,rn),e(c,function(e,t,i){var r=this,s=r.left,o=r.right,a=s instanceof mt&&s.definition(),c=a||s instanceof K;switch(r.operator){case"=":return s.equals(o)&&!s.has_side_effects(i)?(o.walk(e),function t(n){ze(n);if(n instanceof ne)t(n.expression);else if(n instanceof Qe)t(n.expression),n.property.walk(e);else if(n instanceof mt){var i=n.definition();v(i,n),i.fixed&&(n.fixed=i.fixed,n.fixed.assigns?n.fixed.assigns.push(r):n.fixed.assigns=[r])}else n.walk(e)}(s),r.redundant=!0,!0):a&&o instanceof Te?(h(),o.parent_scope.resolve().fn_defs.push(o),o.safe_ids=null,a.fixed&&r.write_only||p(e,a,o),!0):c?(o.walk(e),h(),!0):void A(s);case"&&=":case"||=":case"??=":var u=!0;default:if(!c)return A(s),y();a.assignments++;var f=a.fixed;if(n(i,e,r,r,0))return a.fixed=!1,y();var l=b(e,a);return u&&d(e,!0),o.walk(e),u&&m(e),l&&!s.in_arg&&x(e,a)?(v(a,s),g(e,a),a.single_use&&(a.single_use=!1),s.fixed=a.fixed=function(){return an(_,r,{operator:r.operator.slice(0,-1),left:J(s,f),right:r.right})},s.fixed.assigns=f&&f.assigns?f.assigns.slice():[a.orig[0]],s.fixed.assigns.push(r),s.fixed.to_binary=oe(function(e){return e.left},f)):(s.walk(e),a.fixed=!1),!0}function h(){var t=a&&Xi(e,a),c=n(i,e,r,o,0,w(o),t);P(e,i,s,function(){return r.right},function(t,n,i){if(!(t instanceof mt))return A(t),void i();var a=t.definition();a.assignments++,n&&!t.in_arg&&x(e,a)?(v(a,t),g(e,a),(s instanceof K||1==a.orig.length&&a.orig[0]instanceof ct)&&(a.single_use=!1),e.loop_ids[a.id]=e.in_loop,a.fixed=c?0:n,t.fixed=n,t.fixed.assigns=[r],k(e,a,t.scope,r,o,0,1)):(i(),a.fixed=!1)})}function y(){if(u)return s.walk(e),d(e,!0),o.walk(e),m(e),!0}}),e(_,function(e){if(Jn[this.operator])return this.left.walk(e),d(e,!0),this.right.walk(e),m(e),!0}),e(y,function(e,t,n){s(e,n,this)}),e(S,function(e,t){var n=this.expression;if(n instanceof Te){var i=jn(this);return this.args.forEach(function(t){t.walk(e),t instanceof Je&&(i=!1)}),i&&(n.reduce_vars=O),n.walk(e),i&&delete n.reduce_vars,!0}if("Call"==this.TYPE)switch(e.in_boolean_context()){case"d":var r=!0;case!0:!function e(t,n){if(t instanceof c){if("="!=t.operator)return;e(t.left,n),e(t.right,n)}else if(t instanceof _){if(!Jn[t.operator])return;e(t.left,n),e(t.right,n)}else if(t instanceof F)e(t.consequent,n),e(t.alternative,n);else if(t instanceof mt){var i=t.definition();i.bool_return++,n&&i.drop_return++}}(n,r)}n.walk(e);var s=this.optional;s&&d(e,!0),this.args.forEach(function(t){t.walk(e)}),s&&m(e);var o=n instanceof mt&&n.fixed_value();return o instanceof ke?p(e,n.definition(),o):e.find_parent(We).may_call_this(),!0}),e(E,function(e,t,n){var i=this;s(e,n,i),i.extends&&i.extends.walk(e);var r=i.properties.filter(function(t){return ze(t),t.key instanceof Ie&&(e.push(t),t.key.walk(e),e.pop()),t.value});if(i.name){var o=i.name.definition(),a=e.parent();(a instanceof ce||a instanceof ue)&&(o.single_use=!1),x(e,o,!0)?(g(e,o),e.loop_ids[o.id]=e.in_loop,o.fixed=function(){return i},o.fixed.assigns=[i],Pi(o)||(o.single_use=!1)):o.fixed=!1}return r.forEach(function(t){e.push(t),!t.static||Vn(t)&&t.value.contains_this()?(d(e),t.value.walk(e),m(e)):t.value.walk(e),e.pop()}),!0}),e(I,function(e,t,n){return d(e,!0),a(e,n,this),t(),h(e,this),!0}),e(F,function(e){return this.condition.walk(e),d(e,!0),this.consequent.walk(e),m(e),d(e,!0),this.alternative.walk(e),m(e),!0}),e(H,function(e){return d(e,!0),this.value.walk(e),m(e),this.name.walk(e),!0}),e(te,function(e){var t=e.in_loop;return e.in_loop=this,d(e),this.body.walk(e),ki(this,e.parent())&&(m(e),d(e)),this.condition.walk(e),m(e),e.in_loop=t,!0}),e(he,function(e,t,n){s(e,n,this),this.init&&this.init.walk(e);var i=e.in_loop;return e.in_loop=this,d(e),this.condition&&this.condition.walk(e),this.body.walk(e),this.step&&(ki(this,e.parent())&&(m(e),d(e)),this.step.walk(e)),m(e),e.in_loop=i,!0}),e(de,function(e,t,n){s(e,n,this),this.object.walk(e);var i=e.in_loop;e.in_loop=this,d(e);var r=this.init;return r instanceof G?r.definitions[0].name.mark_symbol(function(e){if(e instanceof at){var t=e.definition();t.assignments++,t.fixed=!1}},e):r instanceof K||r instanceof mt?r.mark_symbol(function(e){if(e instanceof mt){var t=e.definition();v(t,e),t.assignments++,e.is_immutable()||(t.fixed=!1)}},e):r.walk(e),this.body.walk(e),m(e),e.in_loop=i,!0}),e(ve,function(e){return this.condition.walk(e),d(e,!0),this.body.walk(e),m(e),this.alternative&&(d(e,!0),this.alternative.walk(e),m(e)),!0}),e(Se,function(e){return d(e,!0),this.body.walk(e),m(e),!0}),e(ke,function(e,t,n){var i=this;return!u(e,i)||(!sn(e.fn_visited,i)||(i.inlined=!1,d(e),a(e,n,i),t(),h(e,i),i.name&&k(e,i.name.definition(),i,i.name,i,0,1),!0))}),e(Ae,function(e,t,n){var i=this,r=i.name.definition(),s=e.parent();return(s instanceof ce||s instanceof ue)&&(r.single_use=!1),!u(e,i)||(!sn(e.fn_visited,i)||(i.inlined=!1,d(e),a(e,n,i),t(),h(e,i),!0))}),e(Qe,function(e){if(this.optional)return this.expression.walk(e),d(e,!0),this.property.walk(e),m(e),!0}),e(et,function(e,t,n){s(e,n,this),this.expression.walk(e);var i=!0;return this.body.forEach(function(t){t instanceof U||(t.expression.walk(e),i&&(i=!1,d(e,!0)))}),i||m(e),$t(this,e),!0}),e(tt,function(e){return d(e,!0),$t(this,e),m(e),!0}),e(it,function(){this.definition().fixed=!1}),e(lt,function(){this.definition().fixed=!1}),e(mt,function(e,t,r){var s=this,o=s.definition(),a=o.fixed||o.last_ref&&o.last_ref.fixed;v(o,s),1==o.references.length&&!o.fixed&&o.orig[0]instanceof ct&&(e.loop_ids[o.id]=e.in_loop);var c,u=Xi(e,o);switch(u&&u.enclosed.forEach(function(t){if(o!==t&&t.scope.resolve()!==u){var n=t.fixed&&t.fixed.assigns;if(n&&!(n[n.length-1]instanceof Pt)){var i=e.safe_ids[t.id];i&&(i.assign=!0)}}}),"m"==o.single_use&&o.fixed&&(o.fixed=0,o.single_use=!1),o.fixed){case 0:b(e,o)||(o.fixed=!1);case!1:var f=o.redefined();f&&M(o.scope,s.scope)&&(f.single_use=!1);break;case void 0:o.fixed=!1;break;default:if(!b(e,o)){o.fixed=!1;break}s.in_arg&&o.orig[0]instanceof pt&&(s.fixed=o.scope);var l=s.fixed_value();u?o.recursive_refs++:l&&function(e,t){return e.option("unused")&&!t.scope.pinned()&&!1!==t.single_use&&t.references.length-t.recursive_refs==1&&!(Sn(t)&&t.scope.uses_arguments)}(r,o)?(o.in_loop=e.loop_ids[o.id]!==e.in_loop,o.single_use=i(l)&&!l.pinned()&&(!o.in_loop||e.parent()instanceof S)||!o.in_loop&&o.scope===s.scope.resolve()&&l.is_constant_expression()):o.single_use=!1,n(r,e,s,l,0,w(l),u)&&(o.single_use?o.single_use="m":o.fixed=0),o.fixed&&e.loop_ids[o.id]!==e.in_loop&&(o.cross_loop=!0),k(e,o,s.scope,s,l,0,1)}s.fixed||(s.fixed=0===o.fixed?a:o.fixed),l instanceof ke&&!((c=e.parent())instanceof S&&c.expression===s)&&p(e,o,l)}),e(_t,function(e,t){var n=this.tag;if(n){if(n instanceof Te)return this.expressions.forEach(function(t){t.walk(e)}),n.walk(e),!0;n.walk(e),this.expressions.forEach(function(t){t.walk(e)});var i=n instanceof mt&&n.fixed_value();return i instanceof ke?p(e,n.definition(),i):e.find_parent(We).may_call_this(),!0}}),e(xt,function(e,t,n){return this.globals.each(function(t){r(e,n,t)}),d(e,!0),a(e,n,this),t(),h(e,this),!0}),e(St,function(e,t,n){return s(e,n,this),d(e,!0),$t(this,e),m(e),this.bcatch&&(d(e,!0),this.bcatch.walk(e),m(e)),this.bfinally&&this.bfinally.walk(e),!0}),e(kt,function(e,t){var n=this;if(yn[n.operator]){var i=n.expression;if(i instanceof mt){var r=i.definition();r.assignments++;var s=r.fixed;return b(e,r)&&!i.in_arg&&x(e,r)?(v(r,i),g(e,r),r.single_use&&(r.single_use=!1),r.fixed=function(){return an(_,n,{operator:n.operator.slice(0,-1),left:an(Tt,n,{operator:"+",expression:J(i,s)}),right:an(Re,n,{value:1})})},r.fixed.assigns=s&&s.assigns?s.assigns.slice():[],r.fixed.assigns.push(n),n instanceof Tt?i.fixed=r.fixed:(i.fixed=function(){return an(Tt,n,{operator:"+",expression:J(i,s)})},i.fixed.assigns=s&&s.assigns,i.fixed.to_prefix=oe(function(e){return e.expression},r.fixed))):(i.walk(e),r.fixed=!1),!0}A(i)}}),e(Pt,function(e,t,n){var i=this,r=i.value;if(r instanceof Te&&i.name instanceof at){o(),r.parent_scope.resolve().fn_defs.push(r),r.safe_ids=null;var s=i.name.definition();s.fixed||p(e,s,r)}else r?(r.walk(e),o()):e.parent()instanceof Ee&&o();return!0;function o(){P(e,n,i.name,function(){return i.value||an(Et,i)},function(t,n){var r=t.definition();n&&x(e,r,!0)?(g(e,r),e.loop_ids[r.id]=e.in_loop,r.fixed=n,r.fixed.assigns=[i],(t instanceof ot&&r.redefined()||!j(t)&&!Pi(r))&&(r.single_use=!1)):r.fixed=!1})}}),e(Ot,function(e,t){var n=e.in_loop;return e.in_loop=this,d(e),t(),m(e),e.in_loop=n,!0})}(function(e,t){e.DEFMETHOD("reduce_vars",t)}),xt.DEFMETHOD("reset_opt_flags",function(e){var t=new Rt(e.option("reduce_vars")?function(n,i){return ze(n),n.reduce_vars(t,i,e)}:ze);t.fn_scanning=null,t.fn_visited=[],t.in_loop=null,t.loop_ids=Object.create(null),t.safe_ids=Object.create(null),t.safe_ids.seq={},this.walk(t)}),nt.DEFMETHOD("fixed_value",function(e){var t=this.definition(),n=t.fixed;if(n)return this.fixed&&(n=this.fixed),(n instanceof Ie?n:n()).tail_node();if(!(n=0===n&&this.fixed))return n;var i=(n instanceof Ie?n:n()).tail_node();return e&&1!=t.escaped.depth&&Hi(i,!0)?i:i.is_constant()?i:void 0}),mt.DEFMETHOD("is_immutable",function(){var e=this.redef||this.definition();return e.orig[0]instanceof pt&&(1==e.orig.length||!!this.in_arg&&!(e.orig[1]instanceof ft))}),Ie.DEFMETHOD("convert_symbol",rn),H.DEFMETHOD("convert_symbol",st),K.DEFMETHOD("convert_symbol",st),at.DEFMETHOD("convert_symbol",dt),mt.DEFMETHOD("convert_symbol",dt),H.DEFMETHOD("mark_symbol",Lt),K.DEFMETHOD("mark_symbol",Lt),at.DEFMETHOD("mark_symbol",Mt),mt.DEFMETHOD("mark_symbol",Mt),Ie.DEFMETHOD("match_symbol",function(e){return e(this)}),H.DEFMETHOD("match_symbol",jt),K.DEFMETHOD("match_symbol",jt);var tn=en("Infinity NaN undefined");function on(e,t){if(e instanceof d)return!0;if(e instanceof qe)return!0;if(e instanceof Ue){if("__proto__"===e.property)return!0;if((e=e.expression)instanceof mt){if(e.is_immutable())return!1;e=e.fixed_value()}return!e||(!!e.tail_node().is_constant()||on(e,t))}if(e instanceof mt){if(e.is_immutable())return!0;var n=e.definition();return t.exposed(n)&&tn[n.name]}return!1}function an(e,t,n){return n?(n.start=t.start,n.end=t.end):n=t,new e(n)}function hn(e,t){return 1==t.length?t[0]:an(Ge,e,{expressions:t.reduce(Pn,[])})}function xn(e,t){switch(typeof e){case"string":return an(Xe,t,{value:e});case"number":return isNaN(e)?an(Pe,t):isFinite(e)?1/e<0?an(Tt,t,{operator:"-",expression:an(Re,t,{value:-e})}):an(Re,t,{value:e}):e<0?an(Tt,t,{operator:"-",expression:an(be,t)}):an(be,t);case"boolean":return an(e?wt:le,t);case"undefined":return an(Et,t);default:if(null===e)return an(Ne,t);if(e instanceof RegExp)return an($e,t,{value:e});throw new Error(string_template("Can't handle constant of type: {type}",{type:typeof e}))}}function Tn(e){return e instanceof Ue||Fn(e)&&"eval"==e.name}function En(e,t,n){var i=!1;return"Call"==e.TYPE?i=e.expression===t&&Tn(n):e instanceof _t?i=e.tag===t&&Tn(n):e instanceof Tt&&(i="delete"==e.operator||"typeof"==e.operator&&Fn(n)),i?hn(t,[an(Re,t,{value:0}),n]):n}function Cn(e,t){var n=new Yt;return e.walk(new Rt(function(e){if(e instanceof mt){var t=e.definition(),i=e.fixed;i&&n.has(t.id)?n.get(t.id)!==i&&n.set(t.id,!1):n.set(t.id,i)}})),n.size()>0&&t.walk(new Rt(function(e){if(e instanceof mt){var t=e.definition(),i=e.fixed;i&&n.has(t.id)&&n.get(t.id)!==i&&(e.fixed=!1)}})),t}function Pn(e,t){return t instanceof Ge?[].push.apply(e,t.expressions):e.push(t),e}function On(e){return e instanceof q||e instanceof W||e instanceof Ee}function Dn(e){if(e instanceof Ae){var t=e.name.definition(),n=e.name.scope;return t.scope===n||Wt(t.references,function(e){var t=e.scope;do{if(t===n)return!0}while(t=t.parent_scope)})}return!On(e)}function In(e){if(null===e)return[];if(e instanceof b)return Wt(e.body,Dn)?e.body:[e];if(e instanceof re)return[];if(zt(e))return[e];throw new Error("Can't convert thing to statement array")}function Nn(e){return null===e||(e instanceof re||e instanceof b&&0==e.body.length)}function Rn(e){return Wt(e.body,function(e){return Nn(e)||e instanceof Y||e instanceof Ct&&zn(e)})}function Ln(e){return e instanceof xe&&e.body instanceof b?e.body:e}function Mn(e){if("Call"!=e.TYPE)return!1;do{e=e.expression}while(e instanceof Ue);return e instanceof Te?!Bt(e):Mn(e)}function jn(e){var t=e.expression;if(t.name)return!1;if(!(e instanceof Oe))return!0;var n=!1;return t.walk(new Rt(function(e){return!!n||(e instanceof De?n=!0:e instanceof We&&e!==t||void 0)})),!n}function Fn(e){return e instanceof mt&&e.definition().undeclared}var qn,Bn=en("Array Boolean clearInterval clearTimeout console Date decodeURI decodeURIComponent encodeURI encodeURIComponent Error escape eval EvalError Function isFinite isNaN JSON Map Math Number parseFloat parseInt RangeError ReferenceError RegExp Object Set setInterval setTimeout String SyntaxError TypeError unescape URIError WeakMap WeakSet");function Vn(e){return e.static&&e.value&&(e instanceof P||e instanceof D)}function zn(e){return Wt(e.definitions,function(e){return!e.value})}function Un(e,t){return e instanceof W?t&&!e.extends&&Wt(e.properties,function(e){return!(e.key instanceof Ie)&&!Vn(e)}):e instanceof G?(t||e instanceof Ct)&&zn(e):e instanceof ce?Un(e.body,t):e instanceof ue?Un(e.body,t):e instanceof Ae}function $n(e,t){var n=e.lastIndexOf(t);if(n<0)return!1;for(;++n<e.length;)if(!Un(e[n],!0))return!1;return!0}function Hn(e,t){var n;if(e.init instanceof b&&(n=e.init,e.init=n.body.pop(),n.body.push(e)),e.init instanceof Y?(n||(n=an(b,e,{body:[e]})),n.body.splice(-1,0,e.init),e.init=null):e.init instanceof Ye?e.init=e.init.body:Nn(e.init)&&(e.init=null),n)return t?Qt.splice(n.body):n}function Wn(e,t){var i,a,u,f,l,p,h=C(t,function(e){return e instanceof ke});!function(){var e=t.self(),n=0;do{if(!i&&e.variables&&(i=e),e instanceof A)t.parent(n).bfinally&&(l||(l={}),l.bfinally=!0),n++;else if(e instanceof pe)n++;else if(e instanceof xe)f=!0;else{if(e instanceof We){p=e;break}e instanceof St&&(l||(l={}),e.bcatch&&(l.bcatch=!0),e.bfinally&&(l.bfinally=!0))}}while(e=t.parent(n++))}();var d,g,x=10;do{if(g=d,d=0,I(e)&&(d=1),!d&&1==g)break;if(t.option("dead_code")&&(R(e,t)&&(d=2),!d&&2==g))break;if(t.option("if_return")&&(N(e,t)&&(d=3),!d&&3==g))break;if(t.option("awaits")&&t.option("side_effects")&&(L(e,t)&&(d=4),!d&&4==g))break;if(t.option("inline")>=4&&(M(e,t)&&(d=5),!d&&5==g))break;if(t.sequences_limit>0){if(B(e,t)&&(d=6),!d&&6==g)break;if(oe(e,t)&&(d=7),!d&&7==g)break}if(t.option("join_vars")&&(be(e)&&(d=8),!d&&8==g))break;t.option("collapse_vars")&&O(e,t)&&(d=9)}while(d&&x-- >0);return e;function C(e,t){var n,i=e.self(),r=0;do{if(i instanceof A)i=e.parent(r++);else if(i instanceof Se)i=i.body;else if(i instanceof tt){var s=e.parent(r);(s.body[s.body.length-1]===i||o(i.body))&&(r++,i=s)}do{if(t(n=i))return n;i=e.parent(r++)}while(i instanceof ve)}while(n&&(i instanceof b||i instanceof A||i instanceof We||i instanceof tt||i instanceof St)&&$n(i.body,n));function o(e){for(var t=e.length;--t>=0;)if(e[t]instanceof w)return!0;return!1}}function O(e,t){if(!p.pinned()){for(var h,d,g=new Yt,x=[],w=!1,A=new Yt,C=e.length,O=new Nt(function(e,n){if(Ne)return e;if(!De)return e!==N[L]?e:++L<N.length?Xe(e,O):(De=!0,(J=(W?function e(t,n){var i=O.parent(n);if(i instanceof o)return e(i,n+1);if(i instanceof c){return le(i)?t:i.left.match_symbol(function(e){return e instanceof mt&&(re.name==e.name||W.name==e.name)})?t:i.left!==t&&Jn[r=i.operator.slice(0,-1)]?ut(i,r,n):e(i,n+1)}if(i instanceof m)return e(i,n+1);if(i instanceof _){var r;return i.left!==t&&Jn[r=i.operator]?ut(i,r,n):e(i,n+1)}if(i instanceof S)return i;if(i instanceof k)return i.expression!==t?t:e(i,n+1);if(i instanceof F)return i.condition!==t?t:e(i,n+1);if(i instanceof G)return pt(i,n+1);if(i instanceof te)return t;if(i instanceof se)return pt(i,n+1);if(i instanceof he)return i.init!==t&&i.condition!==t?t:e(i,n+1);if(i instanceof de)return i.init!==t?t:e(i,n+1);if(i instanceof ve)return i.condition!==t?t:e(i,n+1);if(i instanceof Fe){var s=O.parent(n+1);return Wt(s.properties,function(e){return e instanceof Me})?e(s,n+2):s}if(i instanceof Ue){var a=i.expression;return a===t?e(i,n+1):t}if(i instanceof Ge)return(i.tail_node()===t?e:pt)(i,n+1);if(i instanceof Ye)return pt(i,n+1);if(i instanceof Je)return e(i,n+1);if(i instanceof et)return i.expression!==t?t:e(i,n+1);if(i instanceof kt)return"delete"==i.operator?t:e(i,n+1);if(i instanceof Pt)return i.name.match_symbol(function(e){return e instanceof at&&(re.name==e.name||W.name==e.name)})?t:e(i,n+1);if(i instanceof Ot)return i.condition!==t?t:e(i,n+1);if(i instanceof It)return e(i,n+1);return null}:function e(t,n){var i=O.parent(n);if(i instanceof o)return t;if(i instanceof c)return t;if(i instanceof m)return t;if(i instanceof _)return t;if(i instanceof S)return t;if(i instanceof k)return t;if(i instanceof F)return t;if(i instanceof G)return pt(i,n+1);if(i instanceof se)return t;if(i instanceof ve)return t;if(i instanceof xe)return t;if(i instanceof Fe)return t;if(i instanceof Ue)return t;if(i instanceof Ge)return(i.tail_node()===t?e:pt)(i,n+1);if(i instanceof Ye)return pt(i,n+1);if(i instanceof Je)return t;if(i instanceof et)return t;if(i instanceof kt)return t;if(i instanceof Pt)return t;if(i instanceof It)return t;return null})(e,0))===e&&(Ne=!0),e);var i,r,a=O.parent();if(!ee&&tt(e,a)&&(ee=a),ue&&ae&&Be&&!ee&&e instanceof c&&"="!=e.operator&&e.left.equals(re))return je++,w=!0,Ie.info("Cascading {this} [{start}]",e),Be=!1,be=jt(re),e.right.transform(O),Lt(M),Ne?i=M:(Ne=!0,i=an(_,M,{operator:ue,left:re.fixed&&re.definition().fixed?re.fixed.to_binary(M):re,right:Ae})),an(c,e,{operator:"=",left:e.left,right:an(_,e,{operator:e.operator.slice(0,-1),left:i,right:e.right})});if(function(e,n){if(e===Ae)return!0;if(n instanceof he&&e!==n.init)return!0;if(e instanceof c)return"="!=e.operator&&re.equals(e.left);if(e instanceof S)return re instanceof Ue&&(!!re.equals(e.expression)&&!(Ae instanceof Te&&!Ae.contains_this()));return e instanceof E?!t.has_directive("use strict"):e instanceof z||(e instanceof Y?fe&&re.name===e.name.name:e instanceof Q?e.key instanceof Ie:e instanceof ie||e instanceof Ce||e instanceof St||e instanceof Dt)}(e,a))return Ne=!0,e;if(e.single_use)return e;if(!(e instanceof at)&&(ae&&re.equals(e)||ce&&(r=ce(e,this)))){if(!Be||ee&&(r||!we||!Oe))return r||W||(Ne=!0),e;if(wn(e,a))return W&&!r&&(B=!0),e;if(!r&&V&&e.fixed!==re.fixed)return Ne=!0,e;if(W)return ee&&0==q&&(q=R-je),r||je++,e;if(je++,w=Ne=!0,Ie.info("Collapsing {this} [{start}]",e),"Binary"==M.TYPE)return Mt(M,e),an(c,M,{operator:"=",left:M.right.left,right:"&&"==M.operator?an(F,M,{condition:M.left,consequent:M.right.right,alternative:e}):an(F,M,{condition:M.left,consequent:e,alternative:M.right.right})});if(M instanceof At)return an(Tt,M,{operator:M.operator,expression:re.fixed&&re.definition().fixed?re.fixed.to_prefix(M):re});if(M instanceof Tt)return Lt(M),M;if(Mt(Ae,e),M instanceof Pt){var u=M.name.definition();return u.references.length-u.replaced!=1||t.exposed(u)?an(c,M,{operator:"=",left:e,right:Ae}):(u.replaced++,En(a,e,Ae))}Lt(Ae);var f=M.clone();return f.right=Ae,f}if(function(e,n){if(!(e instanceof mt))return!1;if(e.is_declared(t)){if(e.fixed_value())return!1;if(j(e))return!(n instanceof Ue&&n.expression===e)&&T(e.definition())}else if(Ze(e,n))return!1;return!Oe||(ce=!1,!1)}(e,a))return Ne=!0,e;if((it(e,a)||le(e))&&(J=e,e instanceof We&&(Ne=!0)),e instanceof s){var l=Be;return Be=!1,n(e,O),Be=l,Ke(e)}if(e instanceof K){var l=Be;return Be=!1,n(e,O),Be=l,Ke(e)}if(e instanceof H){e.name=e.name.transform(O);var l=Be;return Be=!1,e.value=e.value.transform(O),Be=l,Ke(e)}if(!(!(e instanceof y)||e instanceof We||e.variables&&e.variables.all(function(e){return!_e.has(e.name)&&!be.has(e.name)}))){var l=Be;return Be=!1,Xe(e,O)||n(e,O),Be=l,Ke(e)}return Xe(e,O)?Ke(e):void 0},Ke),I=new Nt(function(e){if(Ne)return e;if(!De){if(e!==N[L])return e;switch(L++,N.length-L){case 0:if(De=!0,B)return e;if(e!==M)return e;if(e instanceof Pt)return e;$e.replaced++;var t=I.parent();return t instanceof Ge&&t.tail_node()!==e?(W.replaced++,Ae===Se?Qt.skip:hn(Se,Se.expressions.slice(0,-1))):Ae;case 1:if(!B&&e.body===M)return De=!0,$e.replaced++,W.replaced++,null;default:return Xe(e,I)}}if(e instanceof mt&&e.definition()===$e){if(wn(e,I.parent()))return e;--je||(Ne=!0),Ie.info("Replacing {this} [{start}]",e);var n=Ae.clone();return n.scope=e.scope,n.reference(),je==q?(Ne=!0,an(c,M,{operator:"=",left:e,right:n})):($e.replaced++,n)}return e instanceof U||e instanceof We?e:void 0},function(e){return $t(e,I)});--C>=0;){0==C&&t.option("unused")&&st();var N=[];for(ot(e[C]);x.length>0;){var R,L=0,M=(N=x.pop())[N.length-1],q=-1,B=!1,V=!1,W=null,J=null,ee=null,re=vt(M),oe=re&&re.has_side_effects(t),ae=re&&(!oe||re instanceof mt)&&!on(re,t),ce=wt(M);if(ae||ce){var ue=M instanceof c&&M.operator.slice(0,-1),fe=M.name instanceof ft,le=un;if(M.may_throw(t)){if(fe&&Ut(p))continue;le=l?function(e){return e.has_side_effects(t)}:tn}var pe=!1,me=!1,_e=new Yt,ye=!0,be=jt(M),we=Ht(re),Se=yt(M),Ae=Se;oe||(!ue&&Ae instanceof Ge&&(Ae=Ae.tail_node()),oe=Gt());var Pe=l||!we?function(e){return e instanceof K}:un,Oe=Jt(M),De=fe,Ne=!1,je=0,Be=!h||!De;if(!Be){for(var Ve=M.arg_index+1;!Ne&&Ve<h.length;Ve++)h[Ve]&&h[Ve].transform(O);Be=!0}for(var ze=C;!Ne&&ze<e.length;ze++)e[ze].transform(O);if(W){if(!je||R>je+B){x.push(N),d=!0;continue}je==q&&(B=!0);var $e=re.definition();Ne=!1,L=0,De=fe;for(var ze=C;!Ne&&ze<e.length;ze++)e[ze].transform(I)||e.splice(ze--,1);je=M instanceof Pt&&M===N[N.length-1]&&$e.references.length==$e.replaced&&!t.exposed($e),W.last_ref=!1,W.single_use=!1,w=!0}je&&Ft(M)}}}return w}function Ke(e){return Ne?e:(J===e&&(Ne=!0),ee===e&&(ee=null),e)}function Xe(e,t){if(e instanceof y){if(e instanceof We)return e;if(e instanceof E){e.name&&(e.name=e.name.transform(t)),!Ne&&e.extends&&(e.extends=e.extends.transform(t));for(var n=[],i=[],r=0;!Ne&&r<e.properties.length;r++){var s=e.properties[r];s.key instanceof Ie&&(s.key=s.key.transform(t)),s.static&&(s instanceof P?s.value&&n.push(s):s instanceof D&&[].push.apply(i,s.value.body))}for(var r=0;!Ne&&r<i.length;r++)i[r].transform(t);for(var r=0;!Ne&&r<n.length;r++){var s=n[r];s.value=s.value.transform(t)}return e}if(e instanceof de)return e.object=e.object.transform(t),Ne=!0,e;if(e instanceof et){e.expression=e.expression.transform(t);for(var r=0;!Ne&&r<e.body.length;r++){var o=e.body[r];if(o instanceof k){if(!De){if(o!==N[L])continue;L++}if(o.expression=o.expression.transform(t),!Oe)break;ce=!1}}return Ne=!0,e}}}function Ze(e,t){return t instanceof c?"="==t.operator&&t.left===e:t instanceof H?t.name===e:t instanceof X||(t instanceof Q?t.value===e:void 0)}function tt(e,t){return t instanceof c?t.left!==e&&Jn[t.operator.slice(0,-1)]:t instanceof _?t.left!==e&&Jn[t.operator]:t instanceof S?t.optional&&t.expression!==e:t instanceof k?t.expression!==e:t instanceof F?t.condition!==e:t instanceof ve?t.condition!==e:t instanceof Qe?t.optional&&t.expression!==e:void 0}function it(e,n){if(e instanceof m)return!0;if("Binary"==e.TYPE)return!Wi(e.operator,e.right,t);if(e instanceof S){var i=e.expression;if(i instanceof mt&&(g=i.definition(),i=i.fixed_value()),!(i instanceof ke))return!e.is_expr_pure(t);if(g&&Xi(t,g,i))return!0;if(i.collapse_scanning)return!1;i.collapse_scanning=!0;var s=Be;Be=!1;for(var a=J,c=ee,u=0;!Ne&&u<i.argnames.length;u++)rt(v,i.argnames[u],e.args[u])&&(Ne=!0);if(!Ne)if(i.rest&&rt(v,i.rest,an(o,e,{elements:e.args.slice(u)})))Ne=!0;else if(Bt(i)&&i.value)i.value.transform(O);else for(var u=0;!Ne&&u<i.body.length;u++){var f=i.body[u];if(f instanceof He){f.value&&f.value.transform(O);break}f.transform(O)}return ee=c,J=a,Be=s,i.collapse_scanning=!1,Ne?(Ne=!1,!0):!1}if(e instanceof E){if(!l)return!1;var h=e.extends;return!!h&&(h instanceof mt&&(h=h.fixed_value()),!r(h))}if(e instanceof se){if(l){if(l.bfinally)return!0;if(l.bcatch&&e instanceof bt)return!0}return oe||re instanceof Ue||en(re)}if(e instanceof ge)return t.option("ie")&&e.name&&be.has(e.name.name);if(e instanceof qe)return Xt(e,n);if(e instanceof Ue){if(oe)return!0;var d=e.expression;if(d instanceof mt&&T(d.definition()))return!0;if(t.option("unsafe")){if(Fn(d)&&Bn[d.name])return!1;if(oi(d))return!1}return!ye||!W&&(!(!l&&we)&&(!e.optional&&d.may_throw_on_access(t)))}if(e instanceof Je)return!0;if(e instanceof mt){if(Xt(e,n))return!Ze(e,n);if(oe&&en(e))return!0;var g=e.definition();return(l||g.scope.resolve()!==p)&&!j(e)}if(e instanceof _t)return!e.is_expr_pure(t);if(e instanceof Pt)return!!Pe(e.name)||(e.value||n instanceof Ee)&&e.name.match_symbol(function(e){return e instanceof at&&(be.has(e.name)||oe&&en(e))},!0);if(e instanceof It)return!0;var _=wn(e.left,e);return!!_&&(_ instanceof Ue||(!!Pe(_)||_.match_symbol(function(e){return e instanceof mt&&(be.has(e.name)||pe&&t.exposed(e.definition()))},!0)));function v(e){return e.transform(O),Ne}}function rt(e,n,i){if(n instanceof H)return e(n.value)||rt(e,n.name,n.value)||!Yn(i)&&rt(e,n.name,i);if(!i)return!(n instanceof nt);if(n instanceof K){if(n.rest&&rt(e,n.rest))return!0;if(n instanceof X)return i instanceof o?!Wt(n.elements,function(t,n){return!rt(e,t,i[n])}):!i.is_string(t)||!Wt(n.elements,function(t){return!rt(e,t)});if(n instanceof Z)return!!i.may_throw_on_access(t)||!Wt(n.properties,function(t){return!(t.key instanceof Ie&&e(t.key))&&!rt(e,t.value)})}}function st(){if(!1!==u){var e=t.parent(),n=t.self();if(void 0===u){if(!(n instanceof Te)||Vt(n)||n.uses_arguments||n.pinned()||!(e instanceof S)||e.expression!==n||!Wt(e.args,function(e){return!(e instanceof Je)}))return void(u=!1);if(!jn(e))return;u=!0}var i,r=n.in_strict_mode(t)&&!n.parent_scope.resolve(!0).in_strict_mode(t);Ut(n)?(i=function(e){return e instanceof nt&&"await"==e.name},a=!0):(i=function(e){return e instanceof m&&!o.find_parent(We)},void 0===a&&(a=Zt(t,1,e,null,!0,!0)));for(var s=null,o=new Rt(function(e,t){if(!d)return!0;if(i(e)||e instanceof It)return d=null,!0;if(e instanceof qe)return!r&&s||(d=null),!0;var o;if(e instanceof mt)return(e.in_arg&&!Pi(e.definition())||(o=n.variables.get(e.name))&&o!==e.definition())&&(d=null),!0;if(e instanceof We&&!Bt(e)){var a=s;return s=e,t(),s=a,!0}}),c=(h=e.args.slice()).length,f=new Yt,l=n.argnames.length;--l>=0;){var p=n.argnames[l],d=h[l],g=null;if(p instanceof H&&(g=p.value,p=p.name,h[c+l]=g),p instanceof K){if(a&&rt(function(e){return e.has_side_effects(t)},p,d)){x.length=0;break}h[c+l]=n.argnames[l]}else if(!f.has(p.name)&&(f.set(p.name,!0),g&&(d=Yn(d)?g:null),d||g?d instanceof ke&&d.pinned()?d=null:d&&d.walk(o):d=an(Et,p).transform(t),d)){var _=an(Pt,p,{name:p,value:d});_.name_index=l,_.arg_index=g?c+l:l,x.unshift([_])}}n.rest&&h.push(n.rest)}}function ot(e,t){if(N.push(e),e instanceof o)e.elements.forEach(function(e){ot(e,t)});else if(e instanceof c){var n=e.left;n instanceof K||x.push(N.slice()),ot(n),ot(e.right),n instanceof mt&&"="==e.operator&&g.set(n.name,(g.get(n.name)||0)+1)}else if(e instanceof m)ot(e.expression,t);else if(e instanceof _){var i=Jn[e.operator];t&&i&&"??"!=e.operator&&e.right instanceof c&&"="==e.right.operator&&!(e.right.left instanceof K)&&x.push(N.slice()),ot(e.left,!i&&t),ot(e.right,t)}else if(e instanceof S)ot(e.expression),e.args.forEach(ot);else if(e instanceof k)ot(e.expression);else if(e instanceof F)ot(e.condition),ot(e.consequent,t),ot(e.alternative,t);else if(e instanceof G)e.definitions.forEach(ot);else if(e instanceof ne)ot(e.expression);else if(e instanceof ie)ot(e.condition),e.body instanceof v||ot(e.body);else if(e instanceof se)e.value&&ot(e.value);else if(e instanceof he)e.init&&ot(e.init,!0),e.condition&&ot(e.condition),e.step&&ot(e.step,!0),e.body instanceof v||ot(e.body);else if(e instanceof de)ot(e.object),e.body instanceof v||ot(e.body);else if(e instanceof ve)ot(e.condition),e.body instanceof v||ot(e.body),!e.alternative||e.alternative instanceof v||ot(e.alternative);else if(e instanceof Le)e.properties.forEach(function(e){N.push(e),e.key instanceof Ie&&ot(e.key),e instanceof Me&&ot(e.value,t),N.pop()});else if(e instanceof Ge){var r=e.expressions.length-(t?0:1);e.expressions.forEach(function(e,t){ot(e,t<r)})}else if(e instanceof Ye)ot(e.body,!0);else if(e instanceof Je)ot(e.expression);else if(e instanceof Qe)ot(e.expression),ot(e.property);else if(e instanceof et)ot(e.expression),e.body.forEach(ot);else if(e instanceof kt)yn[e.operator]?x.push(N.slice()):ot(e.expression);else if(e instanceof Pt){if(e.name instanceof gt)if(e.value){var s=e.name.definition();s.references.length>s.replaced&&x.push(N.slice())}else A.set(e.name.name,(A.get(e.name.name)||0)+1);e.value&&ot(e.value)}else e instanceof It&&e.expression&&ot(e.expression);N.pop()}function ut(e,t,n){var i;do{i=e,e=O.parent(++n)}while(e instanceof c&&e.operator.slice(0,-1)==t||e instanceof _&&e.operator==t);return i}function lt(e,t,n,i,r){var s=Be;Be=!1;var o=J,a=ee,c=O.stack;return O.stack=[i],e.transform(O),O.stack=c,ee=a,J=o,Be=s,Ne?(Ne=!1,n):t(i,r+1)}function pt(e,t){var n=O.parent(t);if(it(e,n))return e;if(tt(e,n))return e;if(n instanceof o)return pt(n,t+1);if(n instanceof c)return s(n.left);if(n instanceof m)return e;if(n instanceof _)return pt(n,t+1);if(n instanceof S)return pt(n,t+1);if(n instanceof k)return pt(n,t+1);if(n instanceof F)return pt(n,t+1);if(n instanceof G)return pt(n,t+1);if(n instanceof se)return pt(n,t+1);if(n instanceof ve)return pt(n,t+1);if(n instanceof xe)return e;if(n instanceof Fe){var i=O.parent(t+1);return Wt(i.properties,function(e){return e instanceof Me})?pt(i,t+2):i}if(n instanceof Ue){var r=n.expression;return r===e?pt(n,t+1):lt(r,pt,e,n,t)}return n instanceof Ge?pt(n,t+1):n instanceof Ye?pt(n,t+1):n instanceof Je?e:n instanceof et?pt(n,t+1):n instanceof kt?pt(n,t+1):n instanceof Pt?s(n.name):n instanceof It?e:null;function s(i){return le(n)?e:i!==e&&i instanceof K?lt(i,pt,e,n,t):pt(n,t+1)}}function ht(e){if(d)d=!1;else if(!(R<1)){var n=(e=e.tail_node())instanceof c&&"="==e.operator?e.left:e;if(n instanceof mt){var i=n.definition();if(!i.undeclared&&!T(i)){if(n!==e){if(on(n,t))return;var r=i.references.length-i.replaced;if(r<2)return;var s=M.clone();s[s instanceof c?"right":"value"]=n,M.name_index>=0&&(s.name_index=M.name_index,s.arg_index=M.arg_index),M=s}return W=i}}}}function dt(e){return e.references.length-e.replaced-(g.get(e.name)||0)}function vt(e){if(e instanceof c){var n=e.left;if(!(n instanceof mt))return n;var i=n.definition();if(p.uses_arguments&&Sn(i))return n;if(t.exposed(i))return n;if(R=dt(i),i.fixed&&n.fixed){var r=i.references.filter(function(e){return e.fixed===n.fixed}).length-1;r<R&&(R=r,q=0,V=!0)}return"="==e.operator&&ht(e.right),n}if(e instanceof _)return e.right.left;if(e instanceof kt)return e.expression;if(e instanceof Pt){var n=e.name,i=n.definition();if(i.const_redefs)return;if(!nn(n,i.orig))return;if(p.uses_arguments&&Sn(i))return;var s=i.orig.length-i.eliminated-(A.get(i.name)||0);return R=dt(i),i.fixed&&(R=Math.min(R,i.references.filter(function(t){if(!t.fixed)return!0;if(!t.fixed.assigns)return!0;var i=t.fixed.assigns[0];return i===n||yt(i)===e.value}).length)),s>1&&!(n instanceof ft)?(ht(e.value),an(mt,n)):ht(e.value)||1==R&&!t.exposed(i)?an(mt,n):void 0}}function yt(e){if(e instanceof c)return e.right;if(e instanceof _){var t=e.clone();return t.right=e.right.right,t}return e instanceof Pt?e.value:void 0}function wt(e){if(!(e instanceof c&&e.right.single_use)){for(var n,i=Object.create(null),r=new Rt(function(e){e instanceof mt&&(i[e.definition().id]=!0)});e instanceof c&&"="==e.operator;)e.left.walk(r),e=e.right;if(e instanceof qe)return u;if(e instanceof mt){var s=e.evaluate(t);return s===e?u:Ct(s,u)}if(e.is_truthy())return Ct(!0,un);if(e.is_constant()){var a=e.evaluate(t);if(!(a instanceof Ie))return Ct(a,u)}return re instanceof mt&&(!!function e(n){if(n instanceof o)return!1;if(n instanceof _&&Jn[n.operator])return e(n.left)&&e(n.right);if(n instanceof S)return!1;if(n instanceof F)return e(n.consequent)&&e(n.alternative);if(n instanceof Le)return!1;return!n.has_side_effects(t)}(e)&&(e.walk(new Rt(function(e){if(n)return!0;e instanceof mt&&i[e.definition().id]&&(n=!0)})),!n&&u))}function u(t){return e.equals(t)}}function Ct(e,n){return function(i,r){if(r.in_boolean_context()){if(e&&i.is_truthy()&&!i.has_side_effects(t))return!0;if(i.is_constant()){var s=i.evaluate(t);if(!(s instanceof Ie))return!s==!e}}return n(i)}}function Lt(e){for(;e.write_only&&(e.write_only=!1,e instanceof c);)e=e.right}function Mt(e,t){var n=t.scope||Kt(O)||i;e.walk(new Rt(function(e){if(e instanceof y)return!0;e instanceof nt&&(e.scope=n)}))}function jt(e){var i=new Yt;e instanceof Pt&&(e.name.definition().fixed||(ye=!1),i.add(e.name.name,re));var r=p.uses_arguments&&!t.has_directive("use strict"),s=p instanceof xt,o=new Rt(function(a){var u;if(a instanceof mt){if(!(u=a.fixed_value())){u=a;var f=a.definition(),l=a.fixed&&a.fixed.escaped||f.escaped;f.undeclared||!f.assignments&&l&&!l.cross_scope||!$(f,a.scope,a,o.parent())&&Qi(f)||(ye=!1)}}else a instanceof qe&&(u=a);if(u)i.add(a.name,n(t,o,a,u,0));else{if(a instanceof ke){for(var h,d=0,m=a;h=o.parent(d++);m=h){if(h instanceof c){if(h.left===m)break;if("="==h.operator)continue;if(Jn[h.operator.slice(0,-1)])continue;break}if(h instanceof _){if(Jn[h.operator])continue;break}if(h instanceof S)return;if(h instanceof We)return;if(h instanceof Ge){if(h.tail_node()===m)continue;break}if(h instanceof _t){if(h.tag)return;break}}return a.enclosed.forEach(function(e){e.scope!==a&&_e.set(e.name,!0)}),!0}r&&a instanceof Qe&&(p.each_argname(function(e){t.option("reduce_vars")&&!e.definition().assignments||(e.definition().fixed||(ye=!1),i.add(e.name,!0))}),r=!1)}if(s)if("Call"==a.TYPE){if(me)return;var g=a.expression;if(g instanceof Ue)return;if(g instanceof Te&&!g.contains_this())return;me=!0}else a instanceof Ue&&function e(t){if(t instanceof mt&&!(t=t.fixed_value()))return!0;if(t instanceof c)return"="==t.operator&&e(t.right);return t instanceof Ue||t instanceof qe}(a.expression)&&(a!==re||e instanceof kt?pe=!0:me=!0)});return e.walk(o),i}function Ft(n){var i=Ae===Se?null:hn(Se,Se.expressions.slice(0,-1)),r=n.name_index;if(r>=0){var s,o=p.argnames[r];o instanceof H?(p.argnames[r]=o=o.clone(),o.value=i||an(Re,o,{value:0})):(s=t.parent().args)[r]&&(p.argnames[r]=o.clone(),s[r]=i||an(Re,s[r],{value:0}))}else{var a=N.length-1,c=N[a];(c instanceof Pt||N[a-1].body===c)&&a--;var u=new Nt(function(e,t,n){if(De)return e;if(e!==N[L])return e;if(++L<=a)return Xe(e,u);if(De=!0,e instanceof G){A.set(c.name.name,(A.get(c.name.name)||0)+1),W&&W.replaced++;var r=e.definitions,s=r.indexOf(c),o=c.clone();if(o.value=null,!i)return e.definitions[s]=o,e;var f=[an(Ye,i,{body:i})];if(s>0){var l=e.clone();l.definitions=r.slice(0,s),f.unshift(l),(e=e.clone()).definitions=r.slice(s)}return f.push(e),e.definitions[0]=o,n?Qt.splice(f):an(b,e,{body:f})}return i?zt(e)?an(Ye,i,{body:i}):i:n?Qt.skip:null},function(e,t){return e instanceof he?Hn(e,t):$t(e,u)});Ne=!1,De=!1,L=0,(e[C]=e[C].transform(u))||e.splice(C,1)}}function $t(e,t){if(e instanceof Ge)switch(e.expressions.length){case 0:return null;case 1:return En(t.parent(),e,e.expressions[0])}}function Ht(e){var t=qt(e);if(!(t instanceof mt))return!1;if(t.definition().scope.resolve()!==p)return!1;if(!f)return!0;if(ue)return!1;if(M instanceof kt)return!1;var n=be.get(t.name);return!n||n[0]===e}function Gt(){return!(M instanceof kt)&&Ae.has_side_effects(t)}function Jt(e){if(e instanceof kt)return!1;if(oe)return!1;if(W)return!0;if(!(re instanceof mt))return!1;var t;if(e instanceof Pt)t=1;else{if("="!=e.operator)return!1;t=2}var n=re.definition();if(n.references.length-n.replaced==t)return!0;if(!n.fixed)return!1;if(!re.fixed)return!1;var i=re.fixed.assigns,r=0;return!!Wt(n.references,function(e,t){var n=e.fixed;return!!n&&(!n.to_binary&&!n.to_prefix&&(n===re.fixed?(r++,!0):i&&n.assigns&&i[0]!==n.assigns[0]))})&&(r==t&&(V=!0,!0))}function Xt(e,t){var n=be.get(e.name);if(n&&!Wt(n,function(e){return!e}))return n[0]!==re||void(ce=!1)}function en(e){var n=e.definition();return!(1==n.orig.length&&n.orig[0]instanceof ct)&&(n.scope.resolve()!==p||(!(!me||!t.exposed(n))||!Wt(n.references,function(e){return e.scope.resolve(!0)===p})))}function tn(e,t){if(e instanceof c)return tn(e.left,!0);if(e instanceof kt)return tn(e.expression,!0);if(e instanceof Pt)return e.value&&tn(e.value);if(t){if(e instanceof ne)return tn(e.expression,!0);if(e instanceof Qe)return tn(e.expression,!0);if(e instanceof mt)return e.definition().scope.resolve()!==p}return!1}}function I(e){for(var t=!1,n=[],i=0;i<e.length;){var r=e[i];if(r instanceof b&&Wt(r.body,Dn))t=!0,I(r.body),[].splice.apply(e,[i,1].concat(r.body)),i+=r.body.length;else{if(r instanceof ee){if(nn(r.value,n)){t=!0,e.splice(i,1);continue}n.push(r.value)}r instanceof re?(t=!0,e.splice(i,1)):i++}}return t}function N(e,t){for(var n,i,r,s=!1,o=t.parent(),a=t.self(),c=h&&o&&"Call"==o.TYPE&&o.expression===a,u=h&&t.option("conditionals")&&t.option("sequences"),f=!(l&&l.bfinally&&Gt(p)),d=function(e){for(var t=0,n=e.length;--n>=0;){var i=e[n];if(i instanceof ve&&i.body instanceof He&&++t>1)return!0}return!1}(e),m=e.length;--m>=0;){var g=e[m],_=H(m),y=e[_];if(h&&n&&!y&&g instanceof He&&f&&!(a instanceof tt)){var x=g.value;if(!x){s=!0,e.splice(m,1);continue}var S=x.tail_node();if(Yn(S)){s=!0,x instanceof Tt?x=x.expression:S instanceof Tt&&((x=x.clone()).expressions[x.expressions.length-1]=S.expression),e[m]=an(Ye,g,{body:x});continue}}if(g instanceof ve){var k=ui(g.body);if(j(k)){k.label&&cn(k.label.thedef.references,k),s=!0,(g=g.clone()).body=an(b,g,{body:U(g.body,k)}),g.alternative=an(b,g,{body:In(g.alternative).concat(B(r,i))}),$(k.value,r),e[m]=g,e[m]=g.transform(t);continue}if(k&&!g.alternative&&y instanceof we){var A=g.condition,T=m+1==_&&g.body instanceof b;if((A=Kn(A,A.negate(t),T))!==g.condition){s=!0,(g=g.clone()).condition=A;var x=g.body;g.body=an(b,y,{body:B(!0,null,_+1)}),e.splice(m,1,g,x),(!h||a instanceof v&&a.body===e)&&(e[m]=g.transform(t));continue}}var E=ui(g.alternative);if(j(E)){E.label&&cn(E.label.thedef.references,E),s=!0,(g=g.clone()).body=an(b,g.body,{body:In(g.body).concat(B(r,i))}),g.alternative=an(b,g.alternative,{body:U(g.alternative,E)}),$(E.value,r),e[m]=g,e[m]=g.transform(t);continue}if(t.option("typeofs")){if(k&&!E){var P=an(b,a,{body:e.slice(m+1)});Ai(g.condition,null,P)}if(!k&&E){var P=an(b,a,{body:e.slice(m+1)});Ai(g.condition,P)}}}if(g instanceof ve&&g.body instanceof He){var O,D,I=g.body.value,N=g.body.in_bool||y instanceof He&&y.in_bool;if(!g.alternative&&y instanceof He&&(f||!I==!y.value)){s=!0,(g=g.clone()).alternative=an(b,y,{body:B(!0,null,_+1)}),e[m]=g,e[m]=g.transform(t);continue}if(h&&n&&!y&&!g.alternative&&(N||I&&d||I instanceof F&&(Yn(I.consequent,t)||Yn(I.alternative,t)))){s=!0,(g=g.clone()).alternative=an(He,g,{value:null}),e[m]=g,e[m]=g.transform(t);continue}if(u&&!g.alternative&&(!(D=e[O=G(m)])&&c||D instanceof ve&&D.body instanceof He)&&(y?y instanceof Ye&&H(_)==e.length:!n)){s=!0;var R=[];g=g.clone(),R.push(g.condition),g.condition=hn(g,R),g.alternative=an(b,a,{body:B().concat(an(He,a,{value:null}))}),e[m]=g.transform(t),m=O+1;continue}}g instanceof w||g instanceof se?i=g:n&&i&&i===y&&Y(g)}return s;function L(e){return C(t,function(t){return t===e})}function M(e,t){if(!i)return!1;if(i.TYPE!=e.TYPE)return!1;var n=e.value;if(!n)return!1;var r=i.equals(e);return!r&&n instanceof Ge&&(n=n.tail_node(),i.value&&i.value.equals(n)&&(r=2)),!r&&!t&&i.value instanceof Ge&&i.value.tail_node().equals(n)&&(r=3),r}function j(n){if(r=!1,!function(e){if(e instanceof se){if(r=M(e))return!0;if(!h)return!1;if(!(e instanceof He))return!1;var n=e.value;return!(n&&!Yn(n.tail_node()))&&(!(a instanceof tt)||!!i&&(!(i instanceof se&&i.value)&&(r=4,!0)))}if(!(e instanceof Ce))return!1;if(a instanceof tt)if(i instanceof se){if(!h)return!1;if(i.value)return!1;r=!0}else if(i){if(t.loopcontrol_target(i)!==o)return!1;r=!0}else if(!1===i)return!1;var s=t.loopcontrol_target(e);return e instanceof V?L(Ln(s)):!(s instanceof xe)&&L(s)}(n))return!1;for(var s=e.length;--s>m;){var c=e[s];if(c instanceof W){if(c.name.definition().preinit)return!1}else if((c instanceof q||c instanceof Ee)&&!Wt(c.definitions,function(e){return!e.name.match_symbol(function(e){return e instanceof at&&e.definition().preinit})}))return!1}return!0}function B(t,n,r){var s=[],o=!1,a=m+1;t?n?r=e.lastIndexOf(n):(n=e[r])!==i&&(i=!1):(r=e.length,i=null);var c=e.splice(a,r-a).filter(function(e){return e instanceof Ae?(s.push(e),!1):(On(e)&&(o=!0),!0)});return 3===t&&(c.push(an(Ye,n.value,{body:hn(n.value,n.value.expressions.slice(0,-1))})),n.value=n.value.tail_node()),[].push.apply(o?c:e,s),c}function z(e,t){if(e)switch(t){case 4:return e;case 3:if(!(e instanceof Ge))break;case 2:return hn(e,e.expressions.slice(0,-1))}}function U(e,t){for(var n,i=In(e),s=i;(n=s[s.length-1])!==t;)s=n.body;s.pop();var o=t.value;return r&&(o=z(o,r)),o&&s.push(an(Ye,o,{body:o})),i}function $(e,t){if(t&&e){switch(t){case 4:return;case 3:case 2:e=e.tail_node()}Cn(e,i.value)}}function H(t){n=!0;for(var i=t;++i<e.length;){var r=e[i];if(!Un(r)){if(!(r instanceof Ct))break;n=!1}}return i}function G(t){for(var n=t;--n>=0;){var i=e[n];if(!(i instanceof Ct)&&!Un(i))break}return n}function Y(e,t,n){if(e instanceof se){var r=!(t&&e instanceof bt)&&M(e,!0);if(r){s=!0;var o=z(e.value,r);return o?an(Ye,o,{body:o}):n?null:an(re,e)}}else if(e instanceof ve)e.body=Y(e.body,t),e.alternative&&(e.alternative=Y(e.alternative,t));else if(e instanceof Se)e.body=Y(e.body,t);else if(e instanceof St){if(!e.bfinally||!i.value||i.value.is_constant()){e.bcatch&&Y(e.bcatch,t);var a=Y(e.body.pop(),!0,!0);a&&e.body.push(a)}}else if(e instanceof v&&!(e instanceof We||e instanceof et)){var a=Y(e.body.pop(),t,!0);a&&e.body.push(a)}return e}}function R(e,t){var n,i=t.self();i instanceof A?i=t.parent():i instanceof Se&&(i=i.body);for(var r=0,s=0,o=e.length;r<o;r++){var a=e[r];if(a instanceof Ce){var c=t.loopcontrol_target(a);Ln(c)!==i||a instanceof w&&c instanceof xe?e[s++]=a:a.label&&cn(a.label.thedef.references,a)}else e[s++]=a;if(ui(a)){n=e.slice(r+1);break}}return e.length=s,n&&n.forEach(function(n){Gn(t,n,e)}),e.length!=o}function L(e,t){if(!(!h||l&&l.bfinally)){for(var n=!1,i=e.length;--i>=0;){var r=e[i];if(!(r instanceof Ye))break;var s=r.body;if(!(s instanceof m))break;var o=s.expression;if(!Gi(t,o))break;if(n=!0,o=o.drop_side_effect_free(t,!0)){r.body=o;break}}return e.length=i+1,n}}function M(e,t){var n=!1,r=e.length-1;if(h&&r>=0){var s=l&&l.bfinally&&Gt(p),o=e[r].try_inline(t,i,s);o&&(e[r--]=o,n=!0)}for(var a=f&&l&&l.bfinally?"try":f;r>=0;r--){var o=e[r].try_inline(t,i,!0,a);o&&(e[r]=o,n=!0)}return n}function B(e,t){if(!(e.length<2)){for(var n=[],i=0,r=0,s=e.length;r<s;r++){var o=e[r];o instanceof Ye?(n.length>=t.sequences_limit&&a(),Pn(n,o.body)):Un(o)?e[i++]=o:(a(),e[i++]=o)}return a(),e.length=i,i!=s}function a(){if(n.length){var t=hn(n[0],n);e[i++]=an(Ye,t,{body:t}),n=[]}}}function J(e,t){if(!(e instanceof b))return e;for(var n=null,i=0;i<e.body.length;i++){var r=e.body[i];if(r instanceof Ct&&zn(r))t.push(r);else{if(n||On(r))return!1;n=r}}return n}function oe(e,t){for(var n,i=!1,r=0,s=0;s<e.length;s++){var o=e[s];if(n)if(o instanceof se)!o.value&&Gt(p)||(o.value=h(o.value||an(Et,o)).optimize(t));else if(o instanceof he){if(!(o.init instanceof G)){var a=!1;n.body.walk(new Rt(function(e){return!!(a||e instanceof We)||(e instanceof _&&"in"==e.operator?(a=!0,!0):void 0)})),a||(o.init?o.init=h(o.init):(o.init=n.body,r--,i=!0))}}else o instanceof me?On(o.init)||(o.object=h(o.object)):o instanceof ve?o.condition=h(o.condition):o instanceof et?o.expression=h(o.expression):o instanceof Dt&&(o.expression=h(o.expression));if(t.option("conditionals")&&o instanceof ve){var c=[],u=J(o.body,c),f=J(o.alternative,c);if(!1!==u&&!1!==f&&c.length>0){var l=c.length;c.push(an(ve,o,{condition:o.condition,body:u||an(re,o.body),alternative:f})),c.unshift(r,1),[].splice.apply(e,c),s+=l,r+=l+1,n=null,i=!0;continue}}e[r++]=o,n=o instanceof Ye?o:null}return e.length=r,i;function h(e){r--,i=!0;var t=n.body;return hn(t,[t,e])}}function ae(e){return e instanceof c?[e]:e instanceof Ge?e.expressions.slice():void 0}function ue(e,t,n){var i=ae(t);if(i){n=n||0;for(var r=!1,s=i.length-n;--s>=0;){var o=i[s];if(l(o)){var a;if(o.left instanceof mt)a=i.slice(s+1);else{if(!(o.left instanceof Ue&&l(o.left.expression)))continue;a=i.slice(s+1);var u=o.clone();o=o.left.expression,u.left=u.left.clone(),u.left.expression=o.left.clone(),a.unshift(u)}0!=a.length&&ye(o.left,o.right,a)&&(r=!0,i=i.slice(0,s).concat(o,a))}}if(e instanceof G){for(var s=e.definitions.length;--s>=0;){var f=e.definitions[s];if(f.value){ye(f.name,f.value,i)&&(r=!0),le(f,i,n)&&(r=!0);break}}e instanceof Ct&&_e(e.definitions,i,n)&&(r=!0)}return r&&i}function l(e){return e instanceof c&&"="==e.operator}}function fe(e,t){if(e instanceof Ye&&!zn(t)){var n=ae(e.body);if(n){var i=[];if(_e(i,n.reverse(),0))return t.definitions=i.reverse().concat(t.definitions),n.reverse()}}}function le(e,n,i){if(t.option("conditionals")&&!(e.name instanceof K)){for(var r=!1,s=e.name.definition();n.length>i;){var o=Bi(t,s,e.value,n[0]);if(!o)break;e.value=o,n.shift(),r=!0}return r}}function _e(e,t,n){for(var i=!1;t.length>n;){var r=t[0];if(!(r instanceof c))break;if("="!=r.operator)break;var s=r.left;if(!(s instanceof mt))break;if(Fn(s))break;if(s.scope.resolve()!==p)break;var o=s.definition();if(o.scope!==p)break;if(o.orig.length>o.eliminated+1)break;if("SymbolVar"!=o.orig[0].TYPE)break;var a=an(gt,s);e.push(an(Pt,r,{name:a,value:r.right})),o.orig.push(a),o.replaced++,t.shift(),i=!0}return i}function ye(e,n,i){var r=new Yt;for(r.set(e.name,!0);n instanceof c&&"="==n.operator;)n.left instanceof mt&&r.set(n.left.name,!0),n=n.right;if(n instanceof Le){var s=!1;do{if(!o(i[0]))break;i.shift(),s=!0}while(i.length);return s}function o(e){if(e instanceof c&&"="==e.operator&&e.left instanceof Ue){var i=e.left.expression;if(i instanceof mt&&r.has(i.name)&&e.right.is_constant_expression(p)){var s=e.left.property;if(s instanceof Ie&&(o(s)&&(s=e.left.property=s.right.clone()),s=s.evaluate(t)),!(s instanceof Ie)){var a="__proto__"==(s=""+s)||t.has_directive("use strict")?function(e){var t=e.key;return"string"==typeof t&&t!=s&&"__proto__"!=t}:function(e){var t=e.key;return e instanceof je||e instanceof Ve?"string"==typeof t&&t!=s:"__proto__"!==t};if(Wt(n.properties,a))return n.properties.push(an(Me,e,{key:s,value:e.right})),!0}}}}}function be(e){for(var t,n=!1,i=0,r=-1;i<e.length;i++){var s=e[i],o=e[r];if(s instanceof G)if(o&&o.TYPE==s.TYPE)o.definitions=o.definitions.concat(s.definitions),n=!0;else if(t&&t.TYPE==s.TYPE&&zn(s))t.definitions=t.definitions.concat(s.definitions),n=!0;else if(s instanceof Ct){var a=fe(o,s);a?(a.length&&(o.body=hn(o,a),r++),n=!0):r++,e[r]=t=s}else e[++r]=s;else{if(s instanceof se)s.value=f(s.value);else if(s instanceof he){var a=ue(o,s.init);if(a)n=!0,s.init=a.length?hn(s.init,a):null;else{if(o instanceof Ct&&(!s.init||s.init.TYPE==o.TYPE)){s.init&&(o.definitions=o.definitions.concat(s.init.definitions)),s=s.clone(),t=s.init=o,e[r]=l(s),n=!0;continue}if(t&&s.init&&t.TYPE==s.init.TYPE&&zn(s.init))t.definitions=t.definitions.concat(s.init.definitions),s.init=null,n=!0;else if(s.init instanceof Ct&&(t=s.init,a=fe(o,s.init))){if(n=!0,0==a.length){e[r]=l(s);continue}o.body=hn(o,a)}}}else if(s instanceof de){if(t&&t.TYPE==s.init.TYPE){var c=t.definitions.slice();s.init=s.init.definitions[0].name.convert_symbol(mt,function(e,t){c.push(an(Pt,t,{name:t,value:null})),t.definition().references.push(e)}),t.definitions=c,n=!0}s.object=f(s.object)}else if(s instanceof ve)s.condition=f(s.condition);else if(s instanceof Ye){var u,a=ue(o,s.body);if(a){if(n=!0,!a.length)continue;s.body=hn(s.body,a)}else if(o instanceof G&&(u=e[i+1])&&o.TYPE==u.TYPE&&(u=u.definitions[0]).value){n=!0,u.value=hn(s,[s.body,u.value]);continue}}else s instanceof et?s.expression=f(s.expression):s instanceof Dt&&(s.expression=f(s.expression));e[++r]=t?l(s):s}}return e.length=r+1,n;function f(e){var t=ue(o,e,1);if(!t)return e;n=!0;var i=e.tail_node();return t[t.length-1]!==i&&t.push(i.left),hn(e,t)}function l(e){return e.transform(new Nt(function(e,i,r){if(e instanceof G){if(t===e)return e;if(t.TYPE!=e.TYPE)return e;var s=this.parent();return s instanceof de&&s.init===e?e:zn(e)?(t.definitions=t.definitions.concat(e.definitions),n=!0,s instanceof he&&s.init===e?null:r?Qt.skip:an(re,e)):e}return e instanceof ce?e:e instanceof We?e:zt(e)?void 0:e}))}}}function Gn(e,t,n){var i,r=!1;function s(e){i?(i.push(e),Dn(e)||(i.required=!0)):n.push(e)}t.walk(new Rt(function(o,a){if(o instanceof W)return o.extends=null,o.properties=[],s(o),!0;if(o instanceof G){var c=[];return o.remove_initializers(e,c)&&Ie.warn("Dropping initialization in unreachable code [{start}]",o),c.length>0&&(o.definitions=c,s(o)),!0}if(o instanceof Ae)return s(o),!0;if(o instanceof We)return!0;if(o instanceof y){var u=i;return i=[],a(),i.required?n.push(an(b,t,{body:i})):i.length&&[].push.apply(n,i),i=u,!0}o instanceof Ce||(r=!0)})),r&&Ie.warn("Dropping unreachable code [{start}]",t)}function Yn(e,t){return null==e||e.is_undefined||e instanceof Et||e instanceof Tt&&"void"==e.operator&&!(t&&e.expression.has_side_effects(t))}mt.DEFMETHOD("is_declared",function(e){return this.defined||!this.definition().undeclared||e.option("unsafe")&&Bn[this.name]}),(qn=function(e,t){e.DEFMETHOD("in_strict_mode",t)})(E,ln),qn(We,function(e){for(var t=this.body,n=0;n<t.length;n++){var i=t[n];if(!(i instanceof ee))break;if("use strict"==i.value)return!0}var r=this.parent_scope;return r?r.resolve(!0).in_strict_mode(e):e.option("module")}),function(e){e(Ie,un),e(o,ln),e(c,function(){return"="==this.operator&&this.right.is_truthy()}),e(ke,ln),e(Le,ln),e($e,ln),e(Ge,function(){return this.tail_node().is_truthy()}),e(mt,function(){var e=this.fixed_value();if(!e)return!1;this.is_truthy=un;var t=e.is_truthy();return delete this.is_truthy,t})}(function(e,t){e.DEFMETHOD("is_truthy",t)}),function(e){function t(e,t,n){switch(e){case"-":return t.is_negative_zero()&&(!(n instanceof B)||0==n.value);case"&&":case"||":return t.is_negative_zero()||n.is_negative_zero();case"*":case"/":case"%":case"**":return!0;default:return!1}}e(Ie,ln),e(o,un),e(c,function(){var e=this.operator;return"="==e?this.right.is_negative_zero():t(e.slice(0,-1),this.left,this.right)}),e(_,function(){return t(this.operator,this.left,this.right)}),e(B,function(){return 0==this.value&&1/this.value<0}),e(ke,un),e(Le,un),e($e,un),e(Ge,function(){return this.tail_node().is_negative_zero()}),e(mt,function(){var e=this.fixed_value();if(!e)return!0;this.is_negative_zero=ln;var t=e.is_negative_zero();return delete this.is_negative_zero,t}),e(Tt,function(){return"+"==this.operator&&this.expression.is_negative_zero()||"-"==this.operator})}(function(e,t){e.DEFMETHOD("is_negative_zero",t)}),function(e){function t(e,t){return t||/strict/.test(e.option("pure_getters"))}Ie.DEFMETHOD("may_throw_on_access",function(e,t){return!e.option("pure_getters")||this._dot_throw(e,t)}),e(Ie,t),e(o,un),e(c,function(e){var t=this.operator,n=this.left,i=this.right;return"="!=t?Jn[t.slice(0,-1)]&&(n._dot_throw(e)||i._dot_throw(e)):!!i._dot_throw(e)&&(!(n instanceof mt)||(!(i instanceof _&&"||"==i.operator&&n.name==i.left.name)||i.right._dot_throw(e)))}),e(_,function(e){return Jn[this.operator]&&(this.left._dot_throw(e)||this.right._dot_throw(e))}),e(E,function(e,n){return t(e,n)&&!Wt(this.properties,function(e){return!!e.private||(!e.static||!(e instanceof O||e instanceof L))})}),e(F,function(e){return this.consequent._dot_throw(e)||this.alternative._dot_throw(e)}),e(B,un),e(ne,function(e,n){if(!t(e,n))return!1;var r=this.expression;return r instanceof mt&&(r=r.fixed_value()),!("prototype"==this.property&&i(r))}),e(ke,un),e(Ne,ln),e(Le,function(e,n){return t(e,n)&&!Wt(this.properties,function(t){return!(t instanceof je||t instanceof Ve)&&!("__proto__"===t.key&&t.value._dot_throw(e,n))})}),e(qe,function(e,n){return t(e,n)&&!this.scope.resolve().new}),e(Ge,function(e){return this.tail_node()._dot_throw(e)}),e(mt,function(e,n){if(this.is_undefined)return!0;if(!t(e,n))return!1;if(Fn(this)&&this.is_declared(e))return!1;if(this.is_immutable())return!1;var i=this.definition();if(T(i)&&!i.scope.rest&&Wt(i.scope.argnames,function(e){return e instanceof ft}))return i.scope.uses_arguments>2;var r=this.fixed_value(!0);return!r||(this._dot_throw=ln,r._dot_throw(e)?(delete this._dot_throw,!0):(this._dot_throw=un,!1))}),e(Tt,function(){return"void"==this.operator}),e(At,un),e(Et,ln)}(function(e,t){e.DEFMETHOD("_dot_throw",t)}),function(e){function t(e,t,n){switch(t){case"&&":return n.left.is_defined(e)&&n.right.is_defined(e);case"||":return n.left.is_truthy()||n.right.is_defined(e);case"??":return n.left.is_defined(e)||n.right.is_defined(e);default:return!0}}e(Ie,un),e(o,ln),e(c,function(e){var n=this.operator;return"="==n?this.right.is_defined(e):t(e,n.slice(0,-1),this)}),e(_,function(e){return t(e,this.operator,this)}),e(F,function(e){return this.consequent.is_defined(e)&&this.alternative.is_defined(e)}),e(B,ln),e(_e,un),e(ke,ln),e(Le,ln),e(Ge,function(e){return this.tail_node().is_defined(e)}),e(mt,function(e){if(this.is_undefined)return!1;if(Fn(this)&&this.is_declared(e))return!0;if(this.is_immutable())return!0;var t=this.fixed_value();if(!t)return!1;this.is_defined=un;var n=t.is_defined(e);return delete this.is_defined,n}),e(Tt,function(){return"void"!=this.operator}),e(At,ln),e(Et,un)}(function(e,t){e.DEFMETHOD("is_defined",t)}),function(e){e(Ie,un),e(c,function(e){return"="==this.operator&&this.right.is_boolean(e)});var t=en("in instanceof == != === !== < <= >= >");e(_,function(e){return t[this.operator]||Jn[this.operator]&&this.left.is_boolean(e)&&this.right.is_boolean(e)}),e(x,ln);var n=en("every hasOwnProperty isPrototypeOf propertyIsEnumerable some");e(S,function(e){if(!e.option("unsafe"))return!1;var t=this.expression;return t instanceof ne&&(n[t.property]||"test"==t.property&&t.expression instanceof $e)}),e(F,function(e){return this.consequent.is_boolean(e)&&this.alternative.is_boolean(e)}),e(Oe,un),e(Ge,function(e){return this.tail_node().is_boolean(e)}),e(mt,function(e){var t=this.fixed_value();if(!t)return!1;this.is_boolean=un;var n=t.is_boolean(e);return delete this.is_boolean,n});var i=en("! delete");e(Tt,function(){return i[this.operator]})}(function(e,t){e.DEFMETHOD("is_boolean",t)}),function(e){e(Ie,un);var t=en("- * / % ** & | ^ << >> >>>");e(c,function(e){return t[this.operator.slice(0,-1)]||"="==this.operator&&this.right.is_number(e)}),e(_,function(e){return!!t[this.operator]||"+"==this.operator&&((this.left.is_boolean(e)||this.left.is_number(e))&&(this.right.is_boolean(e)||this.right.is_number(e)))});var n=en(["charCodeAt","getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","indexOf","lastIndexOf","localeCompare","push","search","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);e(S,function(e){if(!e.option("unsafe"))return!1;var t=this.expression;return t instanceof ne&&(n[t.property]||Fn(t.expression)&&"Math"==t.expression.name)}),e(F,function(e){return this.consequent.is_number(e)&&this.alternative.is_number(e)}),e(Oe,un),e(Re,ln),e(Ge,function(e){return this.tail_node().is_number(e)}),e(mt,function(e,t){var n=this.fixed_value();if(!n)return!1;if(t&&n instanceof Tt&&"+"==n.operator&&n.expression.equals(this))return!1;this.is_number=un;var i=n.is_number(e);return delete this.is_number,i});var i=en("+ - ~ ++ --");e(kt,function(){return i[this.operator]})}(function(e,t){e.DEFMETHOD("is_number",t)}),function(e){e(Ie,un),e(c,function(e){switch(this.operator){case"+=":if(this.left.is_string(e))return!0;case"=":return this.right.is_string(e)}}),e(_,function(e){return"+"==this.operator&&(this.left.is_string(e)||this.right.is_string(e))});var t=en(["charAt","substr","substring","toExponential","toFixed","toLowerCase","toPrecision","toString","toUpperCase","trim"]);e(S,function(e){if(!e.option("unsafe"))return!1;var n=this.expression;return n instanceof ne&&t[n.property]}),e(F,function(e){return this.consequent.is_string(e)&&this.alternative.is_string(e)}),e(Ge,function(e){return this.tail_node().is_string(e)}),e(Xe,ln),e(mt,function(e){var t=this.fixed_value();if(!t)return!1;this.is_string=un;var n=t.is_string(e);return delete this.is_string,n}),e(_t,function(e){return!this.tag||Zi(e,this.tag)}),e(Tt,function(){return"typeof"==this.operator})}(function(e,t){e.DEFMETHOD("is_string",t)});var Jn=en("&& || ??");function Kn(e,t,n){var i=t.print_to_string().length-e.print_to_string().length;return i<(n||0)?t:e}function Xn(e,t,n){return Kn(an(Ye,e,{body:e}),an(Ye,t,{body:t}),n).body}function Qn(e,t,n,i){return(Ft(e)?Xn:Kn)(t,n,i)}function Zn(e){var t=Object.create(null);return Object.keys(e).forEach(function(n){t[n]=en(e[n])}),t}function ei(e){for(var t=0;t<e.length;t++){var n=e[t];if(!(n instanceof ee))return n}}function ti(){return this.value?an(He,this.value,{value:this.value}):ei(this.body)}function ni(e,t){var n=t.evaluate(e);return n===t?t:(n=xn(n,t).optimize(e),Qn(e,t,n,e.eval_threshold))}!function(e){function t(e){Ie.warn("global_defs {this} redefined [{start}]",e)}xt.DEFMETHOD("resolve_defines",function(e){return e.option("global_defs")?(this.figure_out_scope({ie:e.option("ie")}),this.transform(new Nt(function(n){var i=n._find_defs(e,"");if(i){for(var r,s=0,o=n;(r=this.parent(s++))&&r instanceof Ue&&r.expression===o;)o=r;if(!wn(o,r))return i;t(n)}}))):this}),e(Ie,rn),e(ne,function(e,t){return this.expression._find_defs(e,"."+this.property+t)}),e(at,function(e){this.definition().global&&Xt(e.option("global_defs"),this.name)&&t(this)}),e(mt,function(e,t){if(this.definition().global){var n=e.option("global_defs"),i=this.name+t;return Xt(n,i)?function e(t,n){if(t instanceof Ie)return t.clone(!0);if(Array.isArray(t))return an(o,n,{elements:t.map(function(t){return e(t,n)})});if(t&&"object"==typeof t){var i=[];for(var r in t)Xt(t,r)&&i.push(an(Me,n,{key:r,value:e(t[r],n)}));return an(Le,n,{properties:i})}return xn(t,n)}(n[i],this):void 0}})}(function(e,t){e.DEFMETHOD("_find_defs",t)}),a.DEFMETHOD("first_statement",ti),u.DEFMETHOD("first_statement",ti),ke.DEFMETHOD("first_statement",function(){return ei(this.body)}),ke.DEFMETHOD("length",function(){for(var e=this.argnames,t=0;t<e.length&&!(e[t]instanceof H);t++);return t});var ii=["constructor","toString","valueOf"],ri=Zn({Array:["indexOf","join","lastIndexOf","slice"].concat(ii),Boolean:ii,Function:ii,Number:["toExponential","toFixed","toPrecision"].concat(ii),Object:ii,RegExp:["exec","test"].concat(ii),String:["charAt","charCodeAt","concat","indexOf","italics","lastIndexOf","match","replace","search","slice","split","substr","substring","toLowerCase","toUpperCase","trim"].concat(ii)}),si=Zn({Array:["isArray"],Math:["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","atan2","pow","max","min"],Number:["isFinite","isNaN"],Object:["create","getOwnPropertyDescriptor","getOwnPropertyNames","getPrototypeOf","isExtensible","isFrozen","isSealed","keys"],String:["fromCharCode","raw"]});function oi(e){if(!(e instanceof ne))return!1;var t=e.expression;if(!Fn(t))return!1;var n=si[t.name];return n&&(n[e.property]||"Math"==t.name&&"random"==e.property)}!function(e){e(Ie,un),e(B,ln),e($e,un);var t=en("! ~ - + void");e(Tt,function(){return t[this.operator]&&this.expression instanceof B})}(function(e,t){e.DEFMETHOD("is_constant",t)}),function(e){Ie.DEFMETHOD("evaluate",function(e,t){if(!e.option("evaluate"))return this;var n=[],i=this._eval(e,t,n,1);return n.forEach(function(e){delete e._eval}),t?i:!i||i instanceof RegExp?i:"function"==typeof i||"object"==typeof i?this:i});var t=new Rt(function(e){e instanceof c&&n(e.left),e instanceof de&&n(e.init),e instanceof kt&&yn[e.operator]&&n(e.expression)});function n(e){e instanceof X?e.elements.forEach(n):e instanceof Z?e.properties.forEach(function(e){n(e.value)}):e instanceof Ue?n(e.expression):e instanceof mt&&e.definition().references.forEach(function(e){delete e._eval})}e(Ke,function(){throw new Error(string_template("Cannot evaluate a statement [{start}]",this))}),e(s,pn),e(g,pn),e(E,pn),e(Ie,pn),e(B,function(){return this.value}),e(c,function(e,i,r,s){var o=this.left;if(!i){if(!(o instanceof mt))return this;if(!Xt(o,"_eval")){if(!o.fixed)return this;var a=o.definition();if(!a.fixed)return this;if(a.undeclared)return this;if(a.last_ref!==o)return this;if("m"==a.single_use)return this;if(this.right.has_side_effects(e))return this}}var c,u=this.operator;c=!Xt(o,"_eval")&&o instanceof mt&&o.fixed&&o.definition().fixed?o:"="==u?this.right:an(_,this,{operator:u.slice(0,-1),left:o,right:this.right}),o.walk(t);var f=c._eval(e,i,r,s);return"object"==typeof f?this:(n(o),f)}),e(Ge,function(e,n,i,r){if(!n)return this;for(var s=this.expressions,o=0,a=s.length-1;o<a;o++)s[o].walk(t);var c=s[a],u=c._eval(e,n,i,r);return u===c?this:u}),e(ke,function(e){if(e.option("unsafe")){var t=function(){};return t.node=this,t.toString=function(){return"function(){}"},t}return this}),e(o,function(e,t,n,i){if(e.option("unsafe")){for(var r=[],s=0;s<this.elements.length;s++){var o=this.elements[s];if(o instanceof _e)return this;var a=o._eval(e,t,n,i);if(o===a)return this;r.push(a)}return r}return this}),e(Le,function(e,t,n,i){if(e.option("unsafe")){for(var r={},s=0;s<this.properties.length;s++){var o=this.properties[s];if(!(o instanceof Me))return this;var a=o.key;if(a instanceof Ie&&(a=a._eval(e,t,n,i))===o.key)return this;switch(a){case"__proto__":case"toString":case"valueOf":return this}if(r[a]=o.value._eval(e,t,n,i),r[a]===o.value)return this}return r}return this});var i=en("! typeof void");e(Tt,function(e,r,s,o){var a=this.expression,c=this.operator;if(e.option("typeofs")&&"typeof"==c&&(a instanceof ke||a instanceof mt&&a.fixed_value()instanceof ke))return"function";var u=a instanceof mt&&a.definition();i[c]||u&&u.fixed||o++,a.walk(t);var f=a._eval(e,r,s,o);if(f===a){if(r&&"void"==c)return;return this}switch(c){case"!":return!f;case"typeof":return f instanceof RegExp?this:typeof f;case"void":return;case"~":return~f;case"-":return-f;case"+":return+f;case"++":case"--":if(!u)return this;if(!r){if(u.undeclared)return this;if(u.last_ref!==a)return this}return Xt(a,"_eval")&&(f=+(c[0]+1)+ +f),n(a),f}return this}),e(At,function(e,i,r,s){var o=this.expression;if(o instanceof mt){if(!Xt(o,"_eval")){if(!o.fixed)return this;if(!i){var a=o.definition();if(!a.fixed)return this;if(a.undeclared)return this;if(a.last_ref!==o)return this}}}else if(!i)return this;o instanceof mt&&o.definition().fixed||s++,o.walk(t);var c=o._eval(e,i,r,s);return c===o?this:(n(o),+c)});var r=en("&& || === !==");e(_,function(e,t,n,i){r[this.operator]||i++;var s=this.left._eval(e,t,n,i);if(s===this.left)return this;if(this.operator==(s?"||":"&&"))return s;var o,a=t&&!(s&&"object"==typeof s),c=this.right._eval(e,a,n,i);if(c===this.right)return this;switch(this.operator){case"&&":o=s&&c;break;case"||":o=s||c;break;case"??":o=null==s?c:s;break;case"|":o=s|c;break;case"&":o=s&c;break;case"^":o=s^c;break;case"+":o=s+c;break;case"-":o=s-c;break;case"*":o=s*c;break;case"/":o=s/c;break;case"%":o=s%c;break;case"<<":o=s<<c;break;case">>":o=s>>c;break;case">>>":o=s>>>c;break;case"==":o=s==c;break;case"===":o=s===c;break;case"!=":o=s!=c;break;case"!==":o=s!==c;break;case"<":o=s<c;break;case"<=":o=s<=c;break;case">":o=s>c;break;case">=":o=s>=c;break;case"**":o=Math.pow(s,c);break;case"in":if(c&&"object"==typeof c&&Xt(c,s)){o=!0;break}default:return this}if(isNaN(o))return e.find_parent(Dt)?this:o;if(e.option("unsafe_math")&&!t&&o&&"number"==typeof o&&("+"==this.operator||"-"==this.operator)){var u=Math.max(0,f(s),f(c));if(u<16)return+o.toFixed(u)}return o;function f(e){var t=/(\.[0-9]*)?(e[^e]+)?$/.exec(+e);return(t[1]||".").length-1-(t[2]||"").slice(1)}}),e(F,function(e,t,n,i){var r=this.condition._eval(e,t,n,i);if(r===this.condition)return this;var s=r?this.consequent:this.alternative,o=s._eval(e,t,n,i);return o===s?this:o}),e(mt,function(e,t,n,i){var r,s=this.fixed_value();if(!s)return this;if(Xt(s,"_eval"))r=s._eval();else{if(this._eval=pn,r=s._eval(e,t,n,i),delete this._eval,r===s)return this;s._eval=function(){return r},n.push(s)}return r&&"object"==typeof r&&!function(e,t){var n=e.definition().escaped;switch(n.length){case 0:return!0;case 1:var i=!1;return n[0].walk(new Rt(function(t){return!!i||(t===e?i=!0:t instanceof We||void 0)})),i;default:return t<=n.depth}}(this,i)?this:r});var u={Array:Array,Math:Math,Number:Number,Object:Object,String:String},f=Zn({Math:["E","LN10","LN2","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],Number:["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"]}),l=en("global ignoreCase multiline source");function p(e,t,n,i,r){for(var s=[],o=0;o<e.length;o++){var a=e[o],c=a._eval(t,n,i,r);if(a===c)return;s.push(c)}return s}e(Ue,function(e,t,n,i){if(e.option("unsafe")){var r,s=this.expression;if(!Fn(s)&&(null==(r=s._eval(e,t,n,i+1))||r===s))return this;var o=this.property;if(o instanceof Ie&&(o=o._eval(e,t,n,i))===this.property)return this;if(void 0===r){var a=f[s.name];if(!a||!a[o])return this;r=u[s.name]}else if(r instanceof RegExp){if(!l[o])return this}else if("object"==typeof r){if(!Xt(r,o))return this}else if("function"==typeof r)switch(o){case"name":return r.node.name?r.node.name.name:"";case"length":return r.node.length();default:return this}return r[o]}return this}),e(S,function(e,n,i,r){var s=this.expression,o=s instanceof mt?s.fixed_value():s;if(o instanceof a||o instanceof Y||o instanceof ge){if(o.evaluating)return this;if(o.name&&o.name.definition().recursive_refs>0)return this;if(this.is_expr_pure(e))return this;var c=p(this.args,e,n,i,r);if(!Wt(o.argnames,function(t,s){if(t instanceof H){if(!c)return!1;if(void 0===c[s]){var o=t.value._eval(e,n,i,r);if(o===t.value)return!1;c[s]=o}t=t.name}return!(t instanceof K)}))return this;if(o.rest instanceof K)return this;if(!c&&!n)return this;var f=o.first_statement();if(!(f instanceof He)){if(n){o.walk(t);var l=!1;if(o.evaluating=!0,$t(o,new Rt(function(t){return!!l||(t instanceof He?(t.value&&void 0!==t.value._eval(e,!0,i,r)&&(l=!0),!0):t instanceof We&&t!==o||void 0)})),o.evaluating=!1,!l)return}return this}var h=f.value;if(!h)return;var d=[];return(!c||Wt(o.argnames,function(e,t){return y(e,c[t])})&&(!o.rest||y(o.rest,c.slice(o.argnames.length)))||n)&&(n&&o.argnames.forEach(function(e){e instanceof H&&e.value.walk(t)}),o.evaluating=!0,h=h._eval(e,n,i,r),o.evaluating=!1),d.forEach(function(e){delete e._eval}),h===f.value?this:h}if(e.option("unsafe")&&s instanceof Ue){var m=s.property;if(m instanceof Ie&&(m=m._eval(e,n,i,r))===s.property)return this;var g=s.expression;if(Fn(g)){var _=si[g.name];if(!_||!_[m])return this;h=u[g.name]}else{if(null==(h=g._eval(e,n,i,r+1))||h===g)return this;var v=ri[h.constructor.name];if(!v||!v[m])return this;if(h instanceof RegExp&&h.global&&!(g instanceof $e))return this}var c=p(this.args,e,n,i,r);if(!c)return this;if("replace"==m&&"function"==typeof c[1])return this;try{return h[m].apply(h,c)}catch(e){Ie.warn("Error evaluating {this} [{start}]",this)}finally{h instanceof RegExp&&(h.lastIndex=0)}}return this;function y(e,t){e instanceof H&&(e=e.name);var n=e.definition();if(n.orig[n.orig.length-1]!==e)return!1;var i=t;return n.references.forEach(function(e){e._eval=function(){return i},d.push(e)}),!0}}),e(Oe,pn),e(_t,function(e,t,n,i){if(!e.option("templates"))return this;if(this.tag){if(!Zi(e,this.tag))return this;c=function(e){return e}}var r=p(this.expressions,e,t,n,i);if(!r)return this;for(var s=!1,o=c(this.strings[0]),a=0;a<r.length;a++)o+=r[a]+c(this.strings[a+1]);return s?(this._eval=pn,this):o;function c(e){return"string"!=typeof(e=er(e))&&(s=!0),e}})}(function(e,t){e.DEFMETHOD("_eval",t)}),function(e){function t(e){return an(Tt,e,{operator:"!",expression:e})}function n(e,n,i){var r=t(e);return i?Kn(r,an(Ye,n,{body:n}))===r?r:n:Kn(r,n)}e(Ie,function(){return t(this)}),e(Ke,function(){throw new Error("Cannot negate a statement")}),e(_,function(e,i){var r=this.clone(),s=this.operator;if(e.option("unsafe_comps"))switch(s){case"<=":return r.operator=">",r;case"<":return r.operator=">=",r;case">=":return r.operator="<",r;case">":return r.operator="<=",r}switch(s){case"==":return r.operator="!=",r;case"!=":return r.operator="==",r;case"===":return r.operator="!==",r;case"!==":return r.operator="===",r;case"&&":return r.operator="||",r.left=r.left.negate(e,i),r.right=r.right.negate(e),n(this,r,i);case"||":return r.operator="&&",r.left=r.left.negate(e,i),r.right=r.right.negate(e),n(this,r,i)}return t(this)}),e(C,function(){return t(this)}),e(F,function(e,t){var i=this.clone();return i.consequent=i.consequent.negate(e),i.alternative=i.alternative.negate(e),n(this,i,t)}),e(Te,function(){return t(this)}),e(Ge,function(e){var t=this.expressions.slice();return t.push(t.pop().negate(e)),hn(this,t)}),e(Tt,function(){return"!"==this.operator?this.expression:t(this)})}(function(e,t){e.DEFMETHOD("negate",function(e,n){return t.call(this,e,n)})});var ai=en("Boolean decodeURI decodeURIComponent Date encodeURI encodeURIComponent Error escape EvalError isFinite isNaN Number Object parseFloat parseInt RangeError ReferenceError String SyntaxError TypeError unescape URIError"),ci=en("Map Set WeakMap WeakSet");function ui(e){return e&&e.aborts()}S.DEFMETHOD("is_expr_pure",function(e){if(e.option("unsafe")){var t=this.expression;if(Fn(t)){if(ai[t.name])return!0;if(this instanceof Oe&&ci[t.name])return!0}if(oi(t))return!0}return e.option("annotations")&&this.pure||!e.pure_funcs(this)}),_t.DEFMETHOD("is_expr_pure",function(e){var t=this.tag;if(!t)return!0;if(e.option("unsafe")){if(Fn(t)&&ai[t.name])return!0;if(t instanceof ne&&Fn(t.expression)){var n=si[t.expression.name];return n&&(n[t.property]||"Math"==t.expression.name&&"random"==t.property)}}return!e.pure_funcs(this)}),Ie.DEFMETHOD("is_call_pure",un),S.DEFMETHOD("is_call_pure",function(e){if(!e.option("unsafe"))return!1;var t=this.expression;if(!(t instanceof ne))return!1;var n,i=t.expression,r=t.property;if(i instanceof o)n=ri.Array;else if(i.is_boolean(e))n=ri.Boolean;else if(i.is_number(e))n=ri.Number;else if(i instanceof $e)n=ri.RegExp;else if(i.is_string(e)){if(n=ri.String,"replace"==r){var s=this.args[1];if(s&&!s.is_string(e))return!1}}else t.may_throw_on_access(e)||(n=ri.Object);return n&&n[r]}),function(e){e(Ie,un),e(o,ln),e(c,function(){switch(this.operator){case"=":return this.right.safe_to_spread();case"&&=":case"||=":case"??=":return this.left.safe_to_spread()&&this.right.safe_to_spread()}return!0}),e(_,function(){return!Jn[this.operator]||this.left.safe_to_spread()&&this.right.safe_to_spread()}),e(B,ln),e(ke,ln),e(Le,function(){return Wt(this.properties,function(e){return!(e instanceof je||e instanceof Je)})}),e(Ge,function(){return this.tail_node().safe_to_spread()}),e(mt,function(){var e=this.fixed_value();return e&&e.safe_to_spread()}),e(kt,ln)}(function(e,t){e.DEFMETHOD("safe_to_spread",t)}),function(e){function t(e,t,n){return!Wt(e,n?function(e){return e instanceof Je?!n(e,t):!e.has_side_effects(t)}:function(e){return!e.has_side_effects(t)})}function n(e,t){var n=e.expression;return!n.is_string(t)||n.has_side_effects(t)}e(Ie,ln),e(o,function(e){return t(this.elements,e,n)}),e(c,function(e){var t=this.left;if(!(t instanceof Ue))return!0;var n=t.expression;return!(n instanceof qe)||!n.scope.resolve().new||t instanceof Qe&&t.property.has_side_effects(e)||this.right.has_side_effects(e)}),e(_,function(e){return this.left.has_side_effects(e)||this.right.has_side_effects(e)||!Wi(this.operator,this.right,e)}),e(v,function(e){return t(this.body,e)}),e(S,function(e){return!(this.is_expr_pure(e)||this.is_call_pure(e)&&!this.expression.has_side_effects(e))||t(this.args,e,n)}),e(k,function(e){return this.expression.has_side_effects(e)||t(this.body,e)}),e(E,function(e){var n=this.extends;return!(!n||(n instanceof mt&&(n=n.fixed_value()),r(n)))||t(this.properties,e)}),e(R,function(e){return this.key instanceof Ie&&this.key.has_side_effects(e)||this.static&&this.value&&this.value.has_side_effects(e)}),e(F,function(e){return this.condition.has_side_effects(e)||this.consequent.has_side_effects(e)||this.alternative.has_side_effects(e)}),e(B,un),e(G,function(e){return t(this.definitions,e)}),e(X,function(e){return t(this.elements,e)}),e(Q,function(e){return this.key instanceof Ie&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),e(Z,function(e){return t(this.properties,e)}),e(ne,function(e){return this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)}),e(re,un),e(ve,function(e){return this.condition.has_side_effects(e)||this.body&&this.body.has_side_effects(e)||this.alternative&&this.alternative.has_side_effects(e)}),e(Se,function(e){return this.body.has_side_effects(e)}),e(ke,un),e(Le,function(e){return t(this.properties,e,function(e,t){var n=e.expression;return!n.safe_to_spread()||n.has_side_effects(t)})}),e(qe,un),e(Fe,function(e){return this.key instanceof Ie&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),e(Ge,function(e){return t(this.expressions,e)}),e(Ye,function(e){return this.body.has_side_effects(e)}),e(Qe,function(e){return this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)||this.property.has_side_effects(e)}),e(et,function(e){return this.expression.has_side_effects(e)||t(this.body,e)}),e(at,un),e(mt,function(e){return!this.is_declared(e)||!j(this,e)}),e(_t,function(e){return!this.is_expr_pure(e)||t(this.expressions,e)}),e(St,function(e){return t(this.body,e)||this.bcatch&&this.bcatch.has_side_effects(e)||this.bfinally&&this.bfinally.has_side_effects(e)}),e(kt,function(e){return kn[this.operator]||this.expression.has_side_effects(e)}),e(Pt,function(){return this.value})}(function(e,t){e.DEFMETHOD("has_side_effects",t)}),function(e){function t(e,t){for(var n=e.length;--n>=0;)if(e[n].may_throw(t))return!0;return!1}function n(e,n){return!!e.may_throw(n)||(e instanceof mt&&(e=e.fixed_value()),!(e instanceof ke)||(!!t(e.argnames,n)||(!!t(e.body,n)||Bt(e)&&e.value&&e.value.may_throw(n))))}e(Ie,ln),e(B,un),e(re,un),e(ke,un),e(qe,un),e(at,un),e(o,function(e){return t(this.elements,e)}),e(c,function(e){return!!this.right.may_throw(e)||!(!e.has_directive("use strict")&&"="==this.operator&&this.left instanceof mt)&&this.left.may_throw(e)}),e(m,function(e){return this.expression.may_throw(e)}),e(_,function(e){return this.left.may_throw(e)||this.right.may_throw(e)||!Wi(this.operator,this.right,e)}),e(v,function(e){return t(this.body,e)}),e(S,function(e){if(t(this.args,e))return!0;if(this.is_expr_pure(e))return!1;this.may_throw=ln;var i=n(this.expression,e);return delete this.may_throw,i}),e(k,function(e){return this.expression.may_throw(e)||t(this.body,e)}),e(F,function(e){return this.condition.may_throw(e)||this.consequent.may_throw(e)||this.alternative.may_throw(e)}),e(H,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)}),e(G,function(e){return t(this.definitions,e)}),e(ne,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)}),e(de,function(e){if(this.init.may_throw(e))return!0;var t=this.object;return!!t.may_throw(e)||(!((t=t.tail_node())instanceof o||t.is_string(e))||this.body.may_throw(e))}),e(ve,function(e){return this.condition.may_throw(e)||this.body&&this.body.may_throw(e)||this.alternative&&this.alternative.may_throw(e)}),e(Se,function(e){return this.body.may_throw(e)}),e(Le,function(e){return t(this.properties,e)}),e(Fe,function(e){return this.value.may_throw(e)||this.key instanceof Ie&&this.key.may_throw(e)}),e(He,function(e){return this.value&&this.value.may_throw(e)}),e(Ge,function(e){return t(this.expressions,e)}),e(Ye,function(e){return this.body.may_throw(e)}),e(Qe,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)||this.property.may_throw(e)}),e(et,function(e){return this.expression.may_throw(e)||t(this.body,e)}),e(mt,function(e){return!this.is_declared(e)||!j(this,e)}),e(_t,function(e){if(t(this.expressions,e))return!0;if(this.is_expr_pure(e))return!1;if(!this.tag)return!1;this.may_throw=ln;var i=n(this.tag,e);return delete this.may_throw,i}),e(St,function(e){return(this.bcatch?this.bcatch.may_throw(e):t(this.body,e))||this.bfinally&&this.bfinally.may_throw(e)}),e(kt,function(e){return this.expression.may_throw(e)&&!("typeof"==this.operator&&this.expression instanceof mt)}),e(Pt,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)})}(function(e,t){e.DEFMETHOD("may_throw",t)}),function(e){function t(e,t){for(var n=e.length;--n>=0;)if(!e[n].is_constant_expression(t))return!1;return!0}e(Ie,un),e(o,function(e){return t(this.elements,e)}),e(_,function(e){return this.left.is_constant_expression(e)&&this.right.is_constant_expression(e)&&Wi(this.operator,this.right)}),e(E,function(e){var n=this.extends;return!(n&&!r(n))&&t(this.properties,e)}),e(R,function(e){return"string"==typeof this.key&&(!this.value||this.value.is_constant_expression(e))}),e(B,ln),e(ke,function(e){var t=this,n=!0,i=[];return t.walk(new Rt(function(r,s){if(!n)return!0;if(r instanceof y){if(r===t)return;return i.push(r),s(),i.pop(),!0}if(r instanceof mt){if(t.inlined||r.redef||r.in_arg)return n=!1,!0;if(t.variables.has(r.name))return!0;var o=r.definition();if(nn(o.scope,i))return!0;if(e&&!o.redefined()){var a=e.find_variable(r.name);if(a?a===o:o.undeclared)return n="f",!0}return n=!1,!0}return r instanceof qe?(Bt(t)&&Wt(i,function(e){return!(e instanceof We)||Bt(e)})&&(n=!1),!0):void 0})),n}),e(Le,function(e){return t(this.properties,e)}),e(Fe,function(e){return"string"==typeof this.key&&this.value.is_constant_expression(e)}),e(kt,function(e){return this.expression.is_constant_expression(e)})}(function(e,t){e.DEFMETHOD("is_constant_expression",t)}),function(e){function t(){var e=this.body.length;return e>0&&ui(this.body[e-1])}e(Ke,fn),e(we,pn),e(b,t),e(tt,t),e(ve,function(){return this.alternative&&ui(this.body)&&ui(this.alternative)&&this})}(function(e,t){e.DEFMETHOD("aborts",t)});var fi=en(["use asm","use strict"]);function li(e,t,n){switch(e.body.length){case 0:return n?Qt.skip:an(re,e);case 1:var i=e.body[0];return Dn(i)?t instanceof xe&&i instanceof Ae?e:i:e}return e}function pi(e,t){t.option("rests")&&(e.uses_arguments||e.rest instanceof X&&t.drop_fargs(e,t.parent())&&(e.argnames=e.argnames.concat(e.rest.elements),e.rest=e.rest.rest))}function hi(e,t){if(!t.option("arrows"))return e;pi(e,t),e.value&&(e.body=[e.first_statement()]);var n=Wn(e.body,t);switch(n.length){case 1:var i=n[0];if(i instanceof He){e.body.length=0,e.value=i.value;break}default:e.body=n,e.value=null}return e}e(ee,function(e,t){return!t.option("directives")||fi[e.value]&&t.has_directive(e.value)===e?e:an(re,e)}),e(z,function(e,t){return t.option("drop_debugger")?an(re,e):e}),e(Se,function(e,t){if(e.body instanceof ve||e.body instanceof w){var n=Wn([e.body],t);switch(n.length){case 0:e.body=an(re,e);break;case 1:e.body=n[0];break;default:e.body=an(b,e,{body:n})}}return t.option("unused")&&0==e.label.references.length?e.body:e}),e(Ce,function(e,t){if(!t.option("dead_code"))return e;var n=e.label;if(n){var i=t.loopcontrol_target(e);e.label=null,t.loopcontrol_target(e)===i?cn(n.thedef.references,e):e.label=n}return e}),e(v,function(e,t){return e.body=Wn(e.body,t),e}),e(b,function(e,t){return e.body=Wn(e.body,t),li(e,t.parent())}),e(ke,function(e,t){return pi(e,t),e.body=Wn(e.body,t),e}),e(a,hi),e(u,hi),e(ge,function(e,t){pi(e,t),e.body=Wn(e.body,t);var n=t.parent();if(t.option("inline"))for(var i=0;i<e.body.length;i++){var r=e.body[i];if(!(r instanceof ee)){if(r instanceof He){if(i!=e.body.length-1)break;var s=r.value;if(!s||"Call"!=s.TYPE)break;if(s.is_expr_pure(t))break;var o,a=s.expression;if(a instanceof mt){if(e.name&&e.name.definition()===a.definition())break;o=a.fixed_value()}else o=a;if(!(o instanceof Y||o instanceof ge))break;if(o.rest)break;if(o.uses_arguments)break;if(o===a){if(o.parent_scope!==e)break;if(!Wt(o.enclosed,function(t){return t.scope!==e}))break}if((o!==a||o.name)&&(n instanceof N||n instanceof Be)&&n.value===t.self())break;if(o.contains_this())break;var c=o.argnames.length;if(c>0&&t.option("inline")<2)break;if(c>e.argnames.length)break;if(!Wt(e.argnames,function(e){return e instanceof ft}))break;if(!Wt(s.args,function(e){return!(e instanceof Je)}))break;for(var u=0;u<c;u++){var f=s.args[u];if(!(f instanceof mt))break;if(f.definition()!==e.argnames[u].definition())break}if(u<c)break;for(;u<s.args.length&&!s.args[u].has_side_effects(t);u++);if(u<s.args.length)break;if(c<e.argnames.length&&!t.drop_fargs(e,n)){if(!t.drop_fargs(o,s))break;do{o.argnames.push(o.make_var(ft,o,"argument_"+c))}while(++c<e.argnames.length)}return a}break}}return e});var di=en("arguments await yield");function mi(e,t){for(var n=t.length;--n>=0;)t[n]||(t[n]=an(_e,e))}function gi(e,t){var n=an(C,e);return n.name&&(n.name=t?null:an(rt,n.name)),n}function _i(e,t){var n;switch(e.CTOR){case f:n=l;break;case p:n=h;break;case Y:n=ge;break;case AST_GeneratorDefun:n=AST_GeneratorFunction}var i=an(n,e);return i.name=t?null:an(pt,e.name),i}function vi(e,t){e.walk(new Rt(function(n){return n instanceof He?(t(n),!0):n instanceof We&&n!==e||void 0}))}function yi(e){var t=Object.create(null);return vi(e,function(e){var n=e.value;if(n&&(n=n.tail_node()),n instanceof mt){var i=n.definition().id;t[i]=(t[i]||0)+1}}),t}function bi(e,t,n){if(n.exposed(e))return!1;switch(e.references.length-e.replaced-(t[e.id]||0)){case e.drop_return:return"d";case e.bool_return:return!0}}function xi(e,t){vi(e,function(e){e.in_bool=!0;var n=e.value;if(n){var i=Ti(t,n);i?i instanceof Ie||(n=n.drop_side_effect_free(t),e.value=n?hn(e.value,[n,an(Re,e.value,{value:1})]):an(Re,e.value,{value:1})):(n=n.drop_side_effect_free(t),e.value=n?hn(e.value,[n,an(Re,e.value,{value:0})]):null)}})}function wi(e,t){if(!e.name||!t.option("ie"))return!0;var n=e.name.definition();return!t.exposed(n)&&Wt(n.references,function(e){return!(e instanceof mt)})}function Si(e,t,n){if(t instanceof ke){var i=Bt(t),r=Ut(t),s=!1,o=!1;if(i&&e.option("arrows"))if(t.value){if(!r||Gi(e,t.value)){var c=t.value.drop_side_effect_free(e);c!==t.value&&(s=!0,t.value=c)}}else o=!0;else if(!Vt(t))if(!n&&t.name){var f=t.name.definition();o=f.references.length==f.replaced}else o=!0;if(o&&(t.process_expression(!1,function(t){var n=t.value;if(n){if(r&&!Gi(e,n))return t;n=n.drop_side_effect_free(e,!0)}return s=!0,n?an(Ye,t,{body:n}):an(re,t)}),vi(t,function(t){var n=t.value;if(n){if(r&&!Gi(e,n))return;var i=n.drop_side_effect_free(e);i!==n&&(s=!0,i&&r&&!Gi(e,i)&&(i=i.negate(e)),t.value=i)}})),r&&e.option("awaits")){o&&t.process_expression("awaits",function(t){var n=t.body;if(n instanceof m){if(Gi(e,n.expression)){if(s=!0,!(n=n.expression.drop_side_effect_free(e,!0)))return an(re,t);t.body=n}}else if(n instanceof Ge){for(var i=n.expressions,r=i.length;--r>=0;){var o=i[r];if(!(o instanceof m))break;var a=o.expression;if(!Gi(e,a))break;if(s=!0,i[r]=a.drop_side_effect_free(e))break}switch(r){case-1:return an(re,t);case 0:t.body=i[0];break;default:i.length=r+1}}return t});var p=!o&&t.name||i&&t.value&&!Gi(e,t.value),d=new Rt(function(n){return!!p||(d.parent()===t&&n.may_throw(e)?p=!0:n instanceof m?p=!0:n instanceof AST_ForAwaitOf?p=!0:n instanceof He?n.value&&!Gi(e,n.value)?p=!0:void 0:n instanceof We&&n!==t||void 0)});if(t.walk(d),!p){var g;switch(t.CTOR){case u:g=a;break;case l:g=ge;break;case h:g=AST_GeneratorFunction}return an(g,t)}}return s&&t.clone()}}function ki(e,t,n){n||(n=Ce);var i=!1,r=new Rt(function(t){return!!(i||t instanceof We)||(t instanceof n&&r.loopcontrol_target(t)===e?i=!0:void 0)});return t instanceof Se&&r.push(t),r.push(e),e.body.walk(r),i}function Ai(e,t,n){if(e instanceof Ge&&(e=e.tail_node()),e instanceof _)if(e.left instanceof Xe){if(e.right instanceof Tt&&"typeof"==e.right.operator){var i=e.right.expression;if(Fn(i)){var r,s="undefined"==e.left.value;switch(e.operator){case"==":r=s?n:t;break;case"!=":r=s?t:n;break;default:return}if(r){var o,a=!1,u=i.definition(),f=[],l=[],p=new Rt(function(e,t){if(a)return!0;if(e instanceof c){var n=e.left;if(!(n instanceof mt&&n.definition()===u))return;switch(e.right.walk(p),e.operator){case"=":case"&&=":a=!0}return!0}if(e instanceof S)return t(),(o=e.expression.tail_node())instanceof mt&&(o=o.fixed_value(),i=f.length),o instanceof ke?sn(l,o)&&o.walk(p):a=!0,i>=0&&(f.length=i),!0;if(e instanceof ie){var i=f.length;return t(),a&&(f.length=i),!0}if(e instanceof he){e.init&&e.init.walk(p);var i=f.length;return e.condition&&e.condition.walk(p),e.body.walk(p),e.step&&e.step.walk(p),a&&(f.length=i),!0}if(e instanceof de){e.object.walk(p);var i=f.length;return e.init.walk(p),e.body.walk(p),a&&(f.length=i),!0}if(e instanceof We){if(e===o)return;return!0}return e instanceof mt?(e.definition()===u&&f.push(e),!0):void 0});r.walk(p),f.forEach(function(e){e.defined=!0})}}}}else switch(e.operator){case"&&":Ai(e.left,t),Ai(e.right,t);break;case"||":Ai(h(e.left),n),Ai(h(e.right),n)}function h(e){if(e instanceof _)switch(e.operator){case"==":return(e=e.clone()).operator="!=",e;case"!=":return(e=e.clone()).operator="==",e}}}function Ti(e,t,n){return!!t.truthy||(Yn(t)?void 0:!(t.falsy&&!n)&&(!!t.is_truthy()||t.evaluate(e,!0)))}function Ei(e,t){var n,i=0,r=!1,s=e.self();if(!zt(s))for(;;){if(n=s,(s=e.parent(i++))instanceof _)switch(n){case s.left:if(Jn[s.operator])continue;break;case s.right:if(a(s.left))switch(s.operator){case"&&":t[r?"falsy":"truthy"]=!0;break;case"||":case"??":t[r?"truthy":"falsy"]=!0}}else if(s instanceof F){var o=s.condition;if(o===n)continue;if(a(o))switch(n){case s.consequent:t[r?"falsy":"truthy"]=!0;break;case s.alternative:t[r?"truthy":"falsy"]=!0}}else{if(s instanceof se)break;if(s instanceof ve)break;if(s instanceof Ge){if(s.expressions[0]===n)continue}else if(s instanceof Ye)break}return}for(;;){if(n=s,(s=e.parent(i++))instanceof b){if(s.body[0]===n)continue}else if(s instanceof ve&&a(s.condition))switch(n){case s.body:t[r?"falsy":"truthy"]=!0;break;case s.alternative:t[r?"truthy":"falsy"]=!0}return}function a(e){return!!t.equals(e)||e instanceof Tt&&("!"==e.operator&&(!!t.equals(e.expression)&&(r=!0,!0)))}}function Ci(e){return function(t,n){var i=!1;return this.definitions.forEach(function(r){r.value&&(i=!0),r.name.match_symbol(function(i){i instanceof at&&n.push(an(Pt,i,{name:i,value:e(t,i)}))},!0)}),i}}function Pi(e){return"arguments"!=e.name&&e.orig.length<(e.orig[0]instanceof pt?3:2)}function Oi(e,t){if(e.exposed(t))return!0;for(var n=t.scope.resolve(),i=t.scope;i!==n;)if((i=i.parent_scope).var_names().has(t.name))return!0}function Di(e,t){return an(Ct,e,{definitions:e.definitions.map(function(e){return an(Pt,e,{name:e.name.convert_symbol(gt,function(e,n){var i=e.definition();i.orig[i.orig.indexOf(n)]=e,i.scope!==t&&(i.scope=t,t.variables.set(i.name,i),t.enclosed.push(i),t.var_names().set(i.name,!0))}),value:e.value})})})}function Ii(e,t){var n=t.definition();return(n.fixed||0===n.fixed)&&Pi(n)&&Qi(n)&&!Oi(e,n)}function Ni(e,t){return t.option("varify")&&Wt(e.definitions,function(e){return!e.name.match_symbol(function(e){if(e instanceof at)return!Ii(t,e)},!0)})?Di(e,t.find_parent(We)):e}function Ri(e,t){if(t.option("optional_chains")&&e.terminal)do{var n=e.expression;if(e.optional){var i=Ti(t,n,!0);if(null==i)return an(Tt,e,{operator:"void",expression:n}).optimize(t);i instanceof Ie||(e.optional=!1)}e=n}while(("Call"==e.TYPE||e instanceof Ue)&&!e.terminal)}function Li(e,t){var n=e.expression;if(!(n instanceof Ge))return e;var i=n.expressions.slice(),r=e.clone();return r.expression=i.pop(),i.push(r),hn(e,i)}function Mi(e,t,n){var i=e.expression,r=i instanceof mt?i.fixed_value():i;if(r instanceof ke&&!r.uses_arguments&&!(r.pinned()||n&&n.indexOf(r)<0)){var s=e.args;if(Wt(s,function(e){return!(e instanceof Je)})){var a=r.argnames,c=r===i&&!r.name;if(r.rest){if(!c||!t.option("rests"))return;var u=a.length;for(s=s.slice(0,u);s.length<u;)s.push(an(Et,e).optimize(t));s.push(an(o,e,{elements:e.args.slice(u)})),a=a.concat(r.rest),r.rest=null}else s=s.slice(),a=a.slice();for(var f=0,l=0,p=c&&t.option("default_values"),h=c&&t.drop_fargs(r,e)?function(e,n){return!e||(e instanceof X?0==e.elements.length&&!e.rest&&n instanceof o:e instanceof Z?0==e.properties.length&&!e.rest&&n&&!n.may_throw_on_access(t):e.unused)}:un,d=[],m=0;m<s.length;m++){var g=a[m];if(p&&g instanceof H&&s[m].is_defined(t)&&(a[m]=g=g.name),g&&void 0===g.unused){if(h(g,s[m])){var _=s[m].drop_side_effect_free(t);a.splice(m,1),s.splice(m,1),_&&d.push(_),m--;continue}d.push(s[m]),s[f++]=hn(e,d),d=[]}else{var _=s[m].drop_side_effect_free(t);if(h(g)){g&&a.splice(m,1),s.splice(m,1),_&&d.push(_),m--;continue}if(_)d.push(_),s[f++]=hn(e,d),d=[];else if(g){if(!d.length){s[f++]=an(Re,s[m],{value:0});continue}s[f++]=hn(e,d),d=[]}}l=f}for(;m<a.length;m++)h(a[m])&&a.splice(m--,1);if(r.argnames=a,s.length=l,e.args=s,d.length){var v=hn(e,d);s.push(s.length<a.length?an(Tt,e,{operator:"void",expression:v}):v)}}}}function ji(e,t){t||(t=e.find_parent(We));var n=[];return(Ut(t)||t instanceof xt&&e.option("module"))&&n.push("await"),Vt(t)&&n.push("yield"),n.length&&en(n)}function Fi(e,t){if(!t)return!0;var n=!0,i=new Rt(function(r){if(!n)return!0;if(r instanceof We){if(r===e)return;if(Bt(r))for(var s=0;n&&s<r.argnames.length;s++)r.argnames[s].walk(i);else r instanceof Ae&&t[r.name.name]&&(n=!1);return!0}r instanceof nt&&t[r.name]&&r!==e.name&&(n=!1)});return e.walk(i),n}function qi(e,t){return e.in_strict_mode(t)||!t.has_directive("use strict")}function Bi(e,t,n,i){if(i instanceof _&&("&&"==i.operator||"||"==i.operator)&&i.right instanceof c&&"="==i.right.operator&&i.right.left instanceof mt&&i.right.left.definition()===t&&!n.has_side_effects(e)&&r(i.left)&&r(i.right.right))return t.replaced++,"&&"==i.operator?an(F,i,{condition:i.left,consequent:i.right.right,alternative:n}):an(F,i,{condition:i.left,consequent:n,alternative:i.right.right});function r(n){if(!n.has_side_effects(e)){var i=!1;return n.walk(new Rt(function(e){return!!i||(e instanceof mt&&e.definition()===t?i=!0:void 0)})),!i}}}We.DEFMETHOD("merge_variables",function(e){if(e.option("merge_vars")){var t,n,i=[],r={},s=this,o=[],a=[],u=0,f=new Yt,l=Object.create(null),p=Object.create(null),h=new Rt(function(o,a){if(o instanceof c){var u=o.left,p=o.right;return u instanceof K?(p.walk(h),P(mt,O,u),!0):Jn[o.operator.slice(0,-1)]?(u.walk(h),T(),p.walk(h),u instanceof mt&&O(u),C(),!0):u instanceof mt?("="!=o.operator&&O(u,!0),p.walk(h),O(u),!0):void 0}if(o instanceof _){if(!Jn[o.operator])return;return A(o),!0}if(o instanceof w){var d=h.loopcontrol_target(o);return d instanceof xe||D(d),!0}if(o instanceof S){var m=o.expression;return m instanceof Te?(o.args.forEach(function(e){e.walk(h)}),m.walk(h)):(a(),k(m)),!0}if(o instanceof E)return o.name&&o.name.walk(h),o.extends&&o.extends.walk(h),o.properties.filter(function(e){return e.key instanceof Ie&&e.key.walk(h),e.value}).forEach(function(e){e.static?e.value.walk(h):(T(),r.block=o,e.value.walk(h),C())}),!0;if(o instanceof F)return A(o.condition,o.consequent,o.alternative),!0;if(o instanceof V){var d=h.loopcontrol_target(o);return d instanceof te&&D(d),!0}if(o instanceof te){T(),r.block=o,r.loop=!0;var g=r;return o.body.walk(h),r.inserted===o&&(r=g),o.condition.walk(h),C(),!0}if(o instanceof he)return o.init&&o.init.walk(h),T(),r.block=o,r.loop=!0,o.condition&&o.condition.walk(h),o.body.walk(h),o.step&&o.step.walk(h),C(),!0;if(o instanceof de)return o.object.walk(h),T(),r.block=o,r.loop=!0,o.init.walk(h),o.body.walk(h),C(),!0;if(o instanceof ve)return A(o.condition,o.body,o.alternative),!0;if(o instanceof Se){T(),r.block=o;var g=r;return o.body.walk(h),r.inserted===o&&(r=g),C(),!0}if(o instanceof We){if(T(),r.block=o,o===s&&(n=r),o instanceof ke){o.name&&(l[o.name.definition().id]=!1);var v=o.uses_arguments&&!h.has_directive("use strict")?function(e){l[e.definition().id]=!1}:function(e){O(e)};i.push(o),o.argnames.forEach(function(e){P(ft,v,e)}),o.rest&&P(ft,v,o.rest),i.pop()}return Ht(o,h),C(),!0}if(o instanceof Qe){var m=o.expression;return o.optional?(m.walk(h),T(),o.property.walk(h),C()):a(),k(m),!0}if(o instanceof et){o.expression.walk(h);var g=r;return o.body.forEach(function(e){e instanceof U||(e.expression.walk(h),g===r&&T())}),r=g,o.body.forEach(function(e){T(),r.block=o;var t=r;$t(e,h),r.inserted===o&&(r=t),C()}),!0}if(o instanceof ot||o instanceof ht)return l[o.definition().id]=!1,!0;if(o instanceof mt)return O(o,!0),!0;if(o instanceof St){var y=t;return t=o,$t(o,h),o.bcatch&&(o.bcatch.argname&&o.bcatch.argname.mark_symbol(function(e){if(e instanceof it){var t=e.definition();l[t.id]=!1,(t=t.redefined())&&(l[t.id]=!1)}},h),o.bfinally||(t=y)?$t(o.bcatch,h):(T(),$t(o.bcatch,h),C())),t=y,o.bfinally&&o.bfinally.walk(h),!0}if(o instanceof kt){if(!yn[o.operator])return;var b=o.expression;if(!(b instanceof mt))return;return O(b,!0),!0}if(o instanceof Pt){var x=o.value;return x?x.walk(h):x=r.block instanceof de&&r.block.init===h.parent(),P(at,x?function(e){e instanceof gt?O(e):e.walk(h)}:function(e){if(e instanceof gt){var t=e.definition().id,n=l[t];n?n.push(e):t in l||f.add(t,e)}else e.walk(h)},o.name),!0}if(o instanceof Ot)return T(),r.block=o,r.loop=!0,a(),C(),!0;function k(t){if(e.option("ie")){var n=qt(t);n instanceof mt&&n.walk(h)}}function A(e,t,n){var i=r,s=[i,i];if(e instanceof _)switch(e.operator){case"&&":s[0]=A(e.left,e.right)[0];break;case"||":case"??":s[1]=A(e.left,null,e.right)[1];break;default:e.walk(h)}else e instanceof F?A(e.condition,e.consequent,e.alternative):e.walk(h);return r=s[0],t&&(T(),t.walk(h)),s[0]=r,r=s[1],n&&(T(),n.walk(h)),s[1]=r,r=i,s}});h.directives=Object.create(e.directives),s.walk(h);for(var d=!1,m=Object.create(null);o.length&&a.length;){var g=a.shift();if(g){var v=g.definition,y=l[v.id];if(y){for(y={end:y.end};v.id in m;)v=m[v.id];y.start=l[v.id].start;var b=[];do{var x=o.shift();if(!(g.index>x.index)){var k=x.definition;if(k.id in p){var A=l[k.id];if(A){if(A.start.block===y.start.block&&N(A,y)&&(!A.start.loop&&Qi(v)||N(y,A))&&(!e.option("webkit")||Sn(v)===Sn(k))&&!k.const_redefs&&Wt(A.scopes,function(e){return e.find_variable(v.name)===v})){A.forEach(function(e){e.thedef=v,e.name=v.name,e instanceof mt?(v.references.push(e),k.replaced++):(v.orig.push(e),k.eliminated++)}),k.fixed||(v.fixed=!1),m[k.id]=v,d=!0;break}b.push(x)}}}}while(o.length);b.length&&(o=b.concat(o))}}}return d}function T(){r=Object.create(r)}function C(){r=Object.getPrototypeOf(r)}function P(e,t,n){var i=new Rt(function(n){if(!(n instanceof K))return n instanceof H?(T(),n.value.walk(h),C(),n.name.walk(i)):n instanceof Q?n.key instanceof Ie?n.value instanceof Ue?(T(),r.block=n,n.key.walk(h),n.value.walk(i),C()):(n.key.walk(h),n.value.walk(i)):n.value.walk(i):n instanceof e?t(n):n.walk(h),!0});n.walk(i)}function O(c,d){var m,g=c.definition();if(d&&!Wt(i,function(e){return!(m=e.variables.get(c.name))||(!Sn(m)||m!==g&&!g.undeclared&&e.parent_scope.find_variable(c.name)!==g)}))return l[g.id]=l[m.id]=!1;var _=r;if(t&&(T(),_=r,C()),g.id in l){var v=l[g.id];if(!v)return;if(v.start.block!==_.block)return l[g.id]=!1;if(y(c),v.end=_,g.id in p)a[p[g.id]]=null;else if(!d)return}else{if((m=s.variables.get(g.name))!==g)return m&&n===_&&(l[m.id]=!1),l[g.id]=!1;if(e.exposed(g)||di[c.name])return l[g.id]=!1;var v=f.get(g.id)||[];if(v.scopes=[],y(c),l[g.id]=v,!d)return v.start=_,o.push({index:u++,definition:g});if(_.block!==s)return l[g.id]=!1;v.start=n}function y(e){v.push(e),sn(v.scopes,e.scope);var t=Kt(h);t!==e.scope&&sn(v.scopes,t)}p[g.id]=a.length,a.push({index:u++,definition:g})}function D(e){for(var t=[];;){if(Xt(r,"block")){var n=r.block;if(n instanceof Se&&(n=n.body),n===e)break}t.push(r),C()}for(r.inserted=r.block,T();t.length;){var i=t.pop();T(),Xt(i,"block")&&(r.block=i.block),Xt(i,"loop")&&(r.loop=i.loop)}}function I(e,t){return e===t||e.isPrototypeOf(t)}function N(e,t){return I(e.start,e.end)||I(e.start,t.start)}}),We.DEFMETHOD("drop_unused",function(e){if(e.option("unused")){var t=this,n=!(t instanceof xt)||e.toplevel.funcs,i=!(t instanceof xt)||e.toplevel.vars,r=/keep_assign/.test(e.option("unused"))?un:function(t,n){var i,r=!1;if(t instanceof c?(t.write_only||"="==t.operator)&&(i=o(t.left,n)):t instanceof kt&&t.write_only&&(i=o(t.expression,n)),i instanceof mt){var s=i.definition();if(!u[s.id]&&!e.exposed(s)&&j(i,e,r))return i}function o(t,n){if(t instanceof Ue){var i=t.expression;if(!i.may_throw_on_access(e,!0))return r=!0,n&&t instanceof Qe&&n.unshift(t.property),o(i,n)}else if(t instanceof c&&"="==t.operator){t.write_only="p";var s=o(t.right);return n?(n.assign=t,s instanceof mt?s:t.left):s}return t}},a=Object.create(null),u=Object.create(null),d=function(n){return(d=function t(n,i,r){var s=e.parent(i);if(!s)return r;var o=s instanceof ke&&nn(n,s.argnames);return t(s,i+1,o?function(e){var t=r(e);if(t)return t;if(t=s.variables.get(e)){var n=t.orig[0];if(n instanceof ft||n instanceof pt)return t}}:s.variables?function(e){return r(e)||s.variables.get(e)}:r)}(t,0,rn))(n)},m=Object.create(null),g=[],y=Object.create(null),x=Object.create(null),w=Object.create(null),k=Object.create(null),E=Object.create(null);t instanceof xt&&e.top_retain&&t.variables.each(function(t){!e.top_retain(t)||t.id in y||(Ie.info("Retaining variable {name}",t),y[t.id]=!0,g.push(t))});var P=new Yt,O=new Yt,D=this,I=new Rt(function(r,s){if(r instanceof ke&&r.uses_arguments&&!I.has_directive("use strict")&&r.each_argname(function(e){var t=e.definition();t.id in y||(y[t.id]=!0,g.push(t))}),r!==t){if(D===t){if(r instanceof W){var o=r.name.definition(),a=n&&!o.exported;a||o.id in y||(y[o.id]=!0,g.push(o));var c=I.parent()instanceof ue;c?u[o.id]=!0:!a||o.id in x||(x[o.id]=1),r.extends&&r.extends.walk(I);var f=[];return r.properties.forEach(function(e){e.key instanceof Ie&&e.key.walk(I);var t=e.value;t&&(Vn(e)?(!c&&t.contains_this()&&(c=!0),l(t)):f.push(t))}),f.forEach(a&&c?l:function(e){O.add(o.id,e)}),!0}if(r instanceof Ae){var o=r.name.definition(),a=n&&!o.exported;return a||o.id in y||(y[o.id]=!0,g.push(o)),O.add(o.id,r),I.parent()instanceof ue?(u[o.id]=!0,be(r,s,!0)):(!a||o.id in x||(x[o.id]=1),!0)}if(r instanceof G)return r.definitions.forEach(function(t){var n=t.value,s=n&&(t.name instanceof K||n.has_side_effects(e)),o=s&&"="==n.tail_node().operator;t.name.mark_symbol(function(e){if(e instanceof at){var a=e.definition();if(E[a.id]=(E[a.id]||0)+1,r instanceof Ct&&a.orig[0]instanceof it){var c=a.redefined();c&&(E[c.id]=(E[c.id]||0)+1)}return a.id in y||i&&!a.exported&&(r instanceof q?!a.redefined():!a.const_redefs)&&(r instanceof Ct||Pi(a))||(y[a.id]=!0,g.push(a)),n&&(s?o&&ae(a,e,k[a.id]):O.add(a.id,n),P.add(a.id,t)),oe(a),!0}},I),s&&n.walk(I)}),!0;if(r instanceof ft){var o=r.definition();return E[o.id]=(E[o.id]||0)+1,P.add(o.id,r),!0}if(r instanceof lt){var o=r.definition();return o.id in y||i&&Pi(o)||(y[o.id]=!0,g.push(o)),!0}}return be(r,s,!0)}function l(e){var t=D;D=r,e.walk(I),D=t}});I.directives=Object.create(e.directives),t.walk(I);var N=e.option("keep_fnames")?un:e.option("ie")?function(t){return!e.exposed(t)&&t.references.length==t.replaced}:function(e){return!(e.id in y)||!(e.orig.length-e.eliminated<2)&&(e.orig[1]instanceof ft||Wt(e.references,function(e){return!e.in_arg}))};e.option("ie")&&O.each(function(e,t){t in y||e.forEach(function(e){e.walk(new Rt(function(e){return e instanceof ge&&e.name&&!N(e.name.definition())?(e.walk(I),!0):e instanceof We||void 0}))})}),I=new Rt(be);for(var R=0;R<g.length;R++){var L=O.get(g[R].id);L&&L.forEach(function(e){e.walk(I)})}Object.keys(a).forEach(function(e){var t=a[e];if(t){t=t.reduce(function(e,t){return t.forEach(function(t){sn(e,t)}),e},[]);var n=(P.get(e)||[]).filter(function(e){return Jt(e instanceof kt?function(t){return t===e}:function(t){return t===e||!(t instanceof kt)&&Q(t)===Q(e)},t)});t.length==n.length?a[e]=n:delete a[e]}else delete a[e]});var B=[],V=[],z=new Nt(function(t){if(t instanceof H)return we(z,t);if(t instanceof K&&t.rest&&(t.rest=t.rest.transform(z)),t instanceof X){for(var n=!t.rest,i=t.elements.length;--i>=0;){var r=t.elements[i].transform(z);r?(t.elements[i]=r,n=!1):n?t.elements.pop():t.elements[i]=an(_e,t.elements[i])}return t}if(t instanceof Z){var s=[];return t.properties.forEach(function(n){var i=!1;if(n.key instanceof Ie&&(n.key=n.key.transform(U),i=n.key.has_side_effects(e)),(i||t.rest)&&function(e){return(e instanceof H?e.name:e)instanceof at}(n.value))n.value=n.value.transform(U),s.push(n);else{var r=n.value.transform(z);!r&&t.rest&&(r=n.value instanceof X?an(X,n.value,{elements:[]}):an(Z,n.value,{properties:[]})),r&&(n.value=r,s.push(n))}}),t.properties=s,t}return t instanceof at?xe(t):void 0}),U=new Nt(function(u,d,g){var x=U.parent();if(i){var w=[],k=r(u,w);if(k){if(function(e,t){var n=e.definition(),i=y[n.id];return!i||t[t instanceof c?"left":"expression"]===e&&(i===e&&n.references.length-n.replaced==1||se(n,t)<0)}(k,u)&&(u instanceof c&&(I=fe(u),!0===u.write_only&&(I=I.drop_side_effect_free(e))),I||(I=an(Re,u,{value:0}))),I){if(w.assign){var P=w.assign.drop_side_effect_free(e);P&&(P.write_only=!0,w.unshift(P))}switch(x instanceof Ge&&x.tail_node()!==u&&!I.has_side_effects(e)||w.push(I),w.length){case 0:return Qt.skip;case 1:return En(x,u,w[0].transform(U));default:return hn(u,w.map(function(e){return e.transform(U)}))}}}else if(u instanceof At&&u.expression instanceof mt&&se(u.expression.definition(),u)<0)return an(Tt,u,{operator:"+",expression:u.expression})}if(u instanceof _&&"instanceof"==u.operator){var k=u.right;if(!(k instanceof mt))return;if(k.definition().id in y)return;var O=u.left.drop_side_effect_free(e),I=an(le,u).optimize(e);return O?hn(u,[O,I]):I}if(u instanceof S)return B.push(u),u.args=u.args.map(function(e){return e.transform(U)}),u.expression=u.expression.transform(U),u;if(D===t){if(n&&u!==t&&u instanceof W){var R=u.name.definition();if(!(R.id in y)){$(u.name,"Dropping unused class {name}"),R.eliminated++,d(u,U);var L=gi(u,!0);return x instanceof ue?L:(L=L.drop_side_effect_free(e,!0))?an(Ye,u,{body:L}):g?Qt.skip:an(re,u)}}if(u instanceof C&&u.name&&N(u.name.definition())&&(u.name=null),u instanceof ke){if(n&&u!==t&&u instanceof Ae){var R=u.name.definition();if(!(R.id in y))return $(u.name,"Dropping unused function {name}"),R.eliminated++,x instanceof ue?(Le(),_i(u,!0)):g?Qt.skip:an(re,u)}if(Le(),u instanceof Te&&u.name&&N(u.name.definition())&&(u.name=null),!(u instanceof s)){var M,F,H=e.drop_fargs(u,x);if(H&&x instanceof S&&x.expression===u)for(M=x.args,F=0;F<M.length&&!(M[F]instanceof Je);F++);var Q=u.argnames,Z=u.rest,ee=!1,ne=!1;if(Z){if(ne=!0,!M||F<Q.length||Z instanceof ft)Z=Z.transform(z);else{var L=Ce(Z,an(o,x,{elements:M.slice(Q.length)}),xe,!u.uses_arguments,Z);Z=L.name,M.length=Q.length,L.value.elements.length&&[].push.apply(M,L.value.elements)}Z instanceof K&&!Z.rest&&(Z instanceof X?0==Z.elements.length&&(Z=null):0==Z.properties.length&&(Z=null)),u.rest=Z,Z&&(H=!1,ee=!0)}for(var ie=H?-1:u.length(),oe=M&&!u.uses_arguments&&x!==e.parent(),ae=Q.length;--ae>=0;){var k=Q[ae];if(k instanceof ft){var R=k.definition();R.id in y?(H=!1,se(R,k)<0&&(k.unused=null)):H?($(k,"Dropping unused function argument {name}"),Q.pop(),R.eliminated++,k.unused=!0):k.unused=!0}else{var pe;if(ne=!0,!M||F<ae)pe=k.transform(z);else{var L=Ce(k,M[ae],xe,oe,k);pe=L.name,L.value&&(M[ae]=L.value)}pe?(H=!1,Q[ae]=pe,ee||(ee=!(pe instanceof ft))):H?(J(k,"Dropping unused default argument {name}"),Q.pop()):ae>ie?(J(k,"Dropping unused default argument assignment {name}"),k.name instanceof ft?k.name.unused=!0:ee=!0,Q[ae]=k.name):(J(k,"Dropping unused default argument value {name}"),Q[ae]=k=k.clone(),k.value=an(Re,k,{value:0}),ee=!0)}}ne&&!ee&&u.uses_arguments&&!U.has_directive("use strict")&&(u.rest=an(X,u,{elements:[]})),V.push(u)}return u}if(u instanceof A&&u.argname instanceof K&&u.argname.transform(z),u instanceof G&&!(x instanceof de&&x.init===u)){var me=[],_e=[],ye=[],be=[],we=0,Pe=u instanceof Ct;switch(u.definitions.forEach(function(t){t.value&&(t.value=t.value.transform(U));var n=t.value;if(t.name instanceof K){var r=Ce(t.name,n,function(e){return i?e.definition().id in y?e:S(e)?e:Pe&&!j(e)?e:null:e},!0);r.name?(t=an(Pt,t,{name:r.name,value:n=r.value}),k()):r.value&&be.push(r.value)}else{var s,o,c,d,m=t.name.definition(),g=Pe?j(t.name):Pi(m);if(!g||!i||m.id in y)if(n&&((s=se(m,t))<0||(d=n.tail_node())instanceof mt&&d.definition()===m)&&(t=t.clone(),(n=n.drop_side_effect_free(e))&&Ie.warn("Side effects in definition of variable {name} [{start}]",t.name),u instanceof q?t.value=n||an(Re,t,{value:0}):(t.value=null,n&&be.push(n)),n=null,s>=0&&(a[m.id][s]=t)),n||u instanceof Ee)if(e.option("functions")&&!e.option("ie")&&g&&n&&1==E[m.id]&&0==m.assignments&&(c=n.tail_node())instanceof Te&&!T(m)&&!Bt(c)&&function(e,n){return 0==n.length?e===t.name.fixed_value():Wt(n,function(t){return e===t.fixed_value()})}(c,m.references)&&function(t){if(!Pe||e.has_directive("use strict")||!(t instanceof ge))return x instanceof We;return x instanceof v||x instanceof he&&x.init===u||x instanceof ve}(c)&&!1!==(o=function(t,n){if(!t.name)return null;var i,r=t.name.definition();if(r.orig.length>1)return null;if(r.assignments>0)return!1;if(r.name==n)return r;if(e.option("keep_fnames"))return!1;switch(n){case"await":i=Ut;break;case"yield":i=Vt}return Wt(r.references,function(e){var r=e.scope;if(r.find_variable(n)!==m)return!1;if(i)do{if(r=r.resolve(),i(r))return!1}while(r!==t&&(r=r.parent_scope));return!0})&&r}(c,t.name.name))){var _;switch(Ie.warn("Declaring {name} as function [{start}]",t.name),c.CTOR){case l:_=f;break;case h:_=p;break;case ge:_=Y;break;case AST_GeneratorFunction:_=AST_GeneratorDefun}var b=an(_,c);b.name=an(ct,t.name);var w=t.name.scope.resolve().def_function(b.name);o&&o.forEach(function(e){e.name=w.name,e.thedef=w,e.reference()}),me.push(b),n!==c&&[].push.apply(be,n.expressions.slice(0,-1))}else g&&E[m.id]>1&&!(x instanceof ce)&&m.orig.indexOf(t.name)>m.eliminated&&(E[m.id]--,we++),k();else x instanceof ce?k():g&&E[m.id]>1?(Ie.info("Dropping declaration of variable {name} [{start}]",t.name),E[m.id]--,m.eliminated++):_e.push(t);else S(t.name)?((n=n&&n.drop_side_effect_free(e))&&be.push(n),E[m.id]>1?(Ie.warn("Dropping duplicated declaration of variable {name} [{start}]",t.name),E[m.id]--,m.eliminated++):(t.value=null,_e.push(t))):((n=n&&n.drop_side_effect_free(e))?(Ie.warn("Side effects in initialization of unused variable {name} [{start}]",t.name),be.push(n)):$(t.name,"Dropping unused variable {name}"),m.eliminated++)}function S(e){var t=e.definition();return t.orig[0]instanceof it&&t.scope.resolve()===e.scope.resolve()}function k(){be.length>0&&(0==ye.length?me.push(an(Ye,u,{body:hn(u,be)})):n?(be.push(n),t.value=hn(n,be)):t.value=an(Tt,t,{operator:"void",expression:hn(t,be)}),be=[]),ye.push(t)}}),_e.length){case 0:if(0==ye.length)break;if(ye.length==we){[].unshift.apply(be,ye.map(function(e){Ie.info("Dropping duplicated definition of variable {name} [{start}]",e.name);var t=e.name.definition(),n=an(mt,e.name);t.references.push(n);var i=an(c,e,{operator:"=",left:n,right:e.value}),r=se(t,e);return r>=0&&(a[t.id][r]=i),t.assignments++,t.eliminated++,i}));break}case 1:if(0==ye.length){var Oe=_e[0].name.definition().id;if(Oe in m){u.definitions=_e,m[Oe].init=u;break}}default:var De;ye.length>0&&(De=ye[0].value)instanceof Ge&&(ye[0].value=De.tail_node(),me.push(an(Ye,u,{body:hn(De,De.expressions.slice(0,-1))}))),u.definitions=_e.concat(ye),me.push(u)}return be.length>0&&me.push(an(Ye,u,{body:hn(u,be)})),te(me,u,g)}if(u instanceof c){if(d(u,U),!(u.left instanceof K))return u;var L=Ce(u.left,u.right,function(e){return e},!0===u.write_only);return L.name?an(c,u,{operator:u.operator,left:L.name,right:L.value}):L.value?L.value:x instanceof Ge&&x.tail_node()!==u?Qt.skip:an(Re,u,{value:0})}if(u instanceof Se&&u.body instanceof he){if(d(u,U),u.body instanceof b){var Ne=u.body;return u.body=Ne.body.pop(),Ne.body.push(u),g?Qt.splice(Ne.body):Ne}return u}if(u instanceof We)return Le(),u;if(u instanceof lt)return!e.option("imports")||u.definition().id in y?u:g?Qt.skip:null}function Le(){var e=D;D=u,d(u,U),D=e}},function(t,n){if(t instanceof b)return li(t,U.parent(),n);if(t instanceof ce){var r=t.body;if(!(r instanceof b))return;return t.body=r.body.pop(),r.body.push(t),n?Qt.splice(r.body):r}if(t instanceof he)return Hn(t,n);if(t instanceof me){if(!i||!e.option("loops"))return;if(!Nn(t.body))return;var s=pe(t);if(!s)return;var o=s.definition();if(o.id in y)return;$(s,"Dropping unused loop variable {name}"),m[o.id]===t&&delete m[o.id];var a=[],c=t.object.drop_side_effect_free(e);return c&&(Ie.warn("Side effects in object of for-in loop [{start}]",c),a.push(an(Ye,t,{body:c}))),t.init instanceof G&&o.orig[0]instanceof it&&a.push(t.init),te(a,t,n)}if(t instanceof ye)return t.properties&&0==t.properties.length&&(t.properties=null),t;if(t instanceof Ge){if(t.expressions.length>1)return;return En(U.parent(),t,t.expressions[0])}});U.push(e.parent()),U.directives=Object.create(e.directives),t.transform(U),t instanceof ke&&1==t.body.length&&t.body[0]instanceof ee&&"use strict"==t.body[0].value&&(t.body.length=0),B.forEach(function(t){Mi(t,e,V)})}function $(e,t){Ie[e.definition().references.length>0?"info":"warn"](t+" [{start}]",e)}function J(e,t){e.name instanceof ft?$(e.name,t):Ie.info(t+" [{start}]",e)}function Q(e){return e[e instanceof c?"right":"value"]}function te(e,t,n){switch(e.length){case 0:return n?Qt.skip:an(re,t);case 1:return e[0];default:return n?Qt.splice(e):an(b,t,{body:e})}}function ne(e,n){return e.scope.resolve()===t&&(e.fixed&&n.fixed||(a[e.id]=!1),!1!==a[e.id])}function ie(e,t){a[e.id]||(a[e.id]=[]),t.fixed.assigns&&sn(a[e.id],t.fixed.assigns)}function se(e,t){var n=a[e.id];return n&&n.indexOf(t)}function oe(e){x[e.id]>1&&!(e.id in y)&&(y[e.id]=!0,g.push(e)),x[e.id]=0}function ae(e,t,n){e.id in y||(t&&n?(y[e.id]=t,g.push(e)):(w[e.id]=t,k[e.id]=n))}function fe(t){var n=t.right;if(!t.write_only)return n;if(!(n instanceof _&&Jn[n.operator]))return n;if(!(n.left instanceof mt))return n;if(!(t.left instanceof mt))return n;var i=t.left.definition();return n.left.definition()!==i?n:n.right.has_side_effects(e)?n:(ne(i,n.left)&&ie(i,n.left),n.right)}function pe(e){var t=e.init;if(t instanceof G)return(t=t.definitions[0].name)instanceof at&&t;for(;t instanceof Ue;)t=t.expression.tail_node();return t instanceof mt?t:void 0}function be(n,s,o){if(n instanceof c&&n.left instanceof mt){var a=n.left.definition();a.scope.resolve()===t&&P.add(a.id,n)}if(n instanceof mt&&n.in_arg&&(E[n.definition().id]=0),n instanceof kt&&n.expression instanceof mt){var a=n.expression.definition();a.scope.resolve()===t&&P.add(a.id,n)}var u=[],f=r(n,u);if(f){var l=f.definition();if(l.scope.resolve()!==t&&t.variables.get(f.name)!==l)return;if(T(l)&&!Wt(t.argnames,function(e){return!e.match_symbol(function(e){if(e instanceof ft){var t=e.definition();return t.references.length>t.replaced}},!0)}))return;if("p"===n.write_only&&n.right.may_throw_on_access(e,!0))return;var p=u.assign;if(p&&(p.write_only=!0,p.walk(I)),u.forEach(function(e){e.walk(I)}),n instanceof c){var h=fe(n),v=!1;if(o&&!0===n.write_only&&!h.has_side_effects(e)?O.add(l.id,h):(h.walk(I),v="="==h.tail_node().operator),n.left===f)n.write_only&&!v||ae(l,f,k[l.id]);else{var b=f.fixed_value();b&&b.is_constant()||ae(l,w[l.id],!0)}}return ne(l,f)&&wn(f,n)!==f&&ie(l,f),oe(l),!0}if(n instanceof _){if("instanceof"!=n.operator)return;var f=n.right;if(!(f instanceof mt))return;var S=f.definition().id;if(!x[S])return;return n.left.walk(I),x[S]++,!0}if(n instanceof me){if(n.init instanceof mt&&D===t){var S=n.init.definition().id;S in m||(m[S]=n)}if(!i||!e.option("loops"))return;if(!Nn(n.body))return;if(n.init.has_side_effects(e))return;var f=pe(n);if(!f)return;var a=f.definition();if(a.scope.resolve()!==t){var A=d(f.name);if(A===a||A&&A.redefined()===a)return}return n.object.walk(I),!0}if(n instanceof mt){var l=n.definition();if(l.id in y||(y[l.id]=!0,g.push(l)),M(l.scope,n.scope)){var C=l.redefined();!C||C.id in y||(y[C.id]=!0,g.push(C))}return ne(l,n)&&ie(l,n),!0}if(n instanceof We){var N=D;return D=n,s(),D=N,!0}}function xe(e){return e.definition().id in y?e:(e instanceof ft&&(e.unused=!0),null)}function we(t,n){n.value=n.value.transform(U);var i=n.name.transform(t);if(!i){if(n.name instanceof K)return null;var r=n.value.drop_side_effect_free(e);if(!r)return null;$(n.name,"Side effects in default value of unused variable {name}"),(n=n.clone()).name.unused=null,n.value=r}return n}function Ce(t,n,i,r,a){var u=new Nt(function(t){if(t instanceof H){if(!(e.option("default_values")&&n&&n.is_defined(e))){var c=r;r=!1;var p=we(u,t);return r=c,!p&&r&&n&&(n=n.drop_side_effect_free(e)),p}t===a?a=t=t.name:t=t.name}if(t instanceof X){var h,c=r,d=n;n instanceof mt&&(r=!1,n=n.fixed_value()),n instanceof o?(h=!0,w=n.elements):(h=n&&n.is_string(e),w=!1);var m=[],g=r&&[],_=0;if(t.elements.forEach(function(e,t){(n=w&&w[t])instanceof _e?n=null:n instanceof Je&&(r&&(g.length=_,mi(d,g),[].push.apply(g,w.slice(t)),d.elements=g),n=w=!1),(e=e.transform(u))&&(m[_]=e),r&&n&&(g[_]=n),!e&&!n&&r&&w||_++}),n=w&&an(o,d,{elements:w.slice(t.elements.length)}),t.rest){var v=r;r=!1,t.rest=t.rest.transform(e.option("rests")?u:U),r=v,t.rest&&(m.length=_)}if(r&&(n&&!t.rest&&(n=n.drop_side_effect_free(e)),n instanceof o?n=n.elements:n instanceof Ge?n=n.expressions:n&&(n=[n]),n&&n.length&&(g.length=_,[].push.apply(g,n))),n=d,r=c,w&&g&&(mi(n,g),(n=n.clone()).elements=g),h){if(!t.rest)switch(m.length){case 0:if(t===a)break;return r&&(n=n.drop_side_effect_free(e)),null;case 1:if(!r)break;if(t===a)break;var y=m[0];if(y.has_side_effects(e))break;if(n.has_side_effects(e)&&y.match_symbol(function(e){return e instanceof Ue}))break;return n=an(Qe,t,{expression:n,property:an(Re,t,{value:0})}),y}}else m.length=t.elements.length;return mi(t,m),t.elements=m,t}if(t instanceof Z){var b,x,w,c=r,d=n;n instanceof mt&&(r=!1,n=n.fixed_value()),n instanceof Le&&(b=[],x=new Yt,w=n.properties.map(function(t,n){if((t=t.clone())instanceof Je)x=!1;else{var i=t.key;i instanceof Ie&&(i=i.evaluate(e,!0)),i instanceof Ie?x=!1:!x||t instanceof Ve||x.set(i,t),b[n]=i}return t})),t.rest&&(n=!1,t.rest=t.rest.transform(e.option("rests")?u:U));var S=new Yt,k=r&&new Yt,A=[];if(t.properties.map(function(t){var n=t.key;return n instanceof Ie&&(t.key=n=n.transform(U),n=n.evaluate(e,!0)),n instanceof Ie?k=!1:S.set(n,!S.has(n)),n}).forEach(function(e,i){var o,a=t.properties[i];if(e instanceof Ie)r=!1,n=!1,o=a.value.transform(u)||l(a.value);else{r=k&&S.get(e);var c=x&&x.get(e);c?(n=c.value)instanceof s&&(n=!1):n=!1,(o=a.value.transform(u))?k&&k.set(e,!1):((t.rest||f(a))&&(o=l(a.value)),k&&!k.has(e)&&(c?(k.set(e,c),null===n&&x.set(e,f(c)&&an(Me,c,{key:c.key,value:an(Re,c,{value:0})}))):k.set(e,!0))),n&&(c.value=n)}o&&(a.value=o,A.push(a))}),n=d,r=c,k&&b&&((n=n.clone()).properties=Qt(w,function(n,i){if(n instanceof Je)return n;var r=b[i];if(r instanceof Ie)return n;if(k.has(r)){var s=k.get(r);if(!s)return n;if(s===n)return x.get(r)||Qt.skip}else if(t.rest)return n;var o=n.value.drop_side_effect_free(e);return o?(n.value=o,n):f(n)?an(Me,n,{key:n.key,value:an(Re,n,{value:0})}):Qt.skip})),n&&!t.rest)switch(A.length){case 0:if(t===a)break;if(n.may_throw_on_access(e,!0))break;return r&&(n=n.drop_side_effect_free(e)),null;case 1:if(!r)break;if(t===a)break;var T=A[0];if(T.key instanceof Ie)break;if(T.value.has_side_effects(e))break;if(n.has_side_effects(e)&&T.value.match_symbol(function(e){return e instanceof Ue}))break;return n=an(Qe,t,{expression:n,property:xn(T.key,T)}),T.value}return t.properties=A,t}return!(t=t instanceof _e?null:i(t))&&r&&n&&(n=n.drop_side_effect_free(e)),t});return{name:t.transform(u),value:n};function f(t){return t.key instanceof Ie&&t.key.has_side_effects(e)}function l(t){return t instanceof H?l(t.name):t instanceof K?(null===n?n=an(Re,t,{value:0}):n&&(n.may_throw_on_access(e,!0)?n=an(o,t,{elements:n instanceof Ge?n.expressions:[n]}):function e(t){if(t instanceof c)t.write_only=!1,e(t.right);else if(t instanceof _){if(!Jn[t.operator])return;e(t.left),e(t.right)}else t instanceof F?(e(t.consequent),e(t.alternative)):t instanceof Ge?e(t.tail_node()):t instanceof kt&&(t.write_only=!1)}(n)),an(Z,t,{properties:[]})):(t.unused=null,t)}}}),We.DEFMETHOD("hoist_declarations",function(e){if(!e.has_directive("use asm")){var t=e.option("hoist_funs"),n=e.option("hoist_vars"),i=this;if(n){var r=0;i.walk(new Rt(function(e){return r>1||(e instanceof ce||(e instanceof We&&e!==i||(e instanceof Ct?(r++,!0):void 0)))})),r<=1&&(n=!1)}if(t||n){var s=new Yt,o=[],a=[],c=new Yt,u=new Nt(function(r,f,l){if(r!==i){if(r instanceof ee)return o.push(r),l?Qt.skip:an(re,r);if(r instanceof Ae){if(!t)return r;var p=u.parent();return p instanceof ce?r:p instanceof ue?r:p!==i&&e.has_directive("use strict")?r:(a.push(r),l?Qt.skip:an(re,r))}if(r instanceof Ct){if(!n)return r;var p=u.parent();if(p instanceof ce)return r;if(!Wt(r.definitions,function(e){var t=e.name;return t instanceof gt&&!s.has(t.name)&&i.find_variable(t.name)===t.definition()}))return r;r.definitions.forEach(function(e){c.set(e.name.name,e)});var h=r.to_assignments();if(p instanceof de&&p.init===r){if(h)return h;var d=r.definitions[0].name;return an(mt,d)}return p instanceof he&&p.init===r?h:h?an(Ye,r,{body:h}):l?Qt.skip:an(re,r)}return r instanceof We?r:r instanceof ot?(s.set(r.name,!0),r):void 0}});if(i.transform(u),c.size()>0){var f=[];i instanceof ke&&i.each_argname(function(e){Wt(e.definition().references,function(e){return!e.in_arg})&&c.del(e.name)}),c.each(function(e,t){(e=e.clone()).name=e.name.clone(),e.value=null,f.push(e),c.set(t,e),e.name.definition().orig.unshift(e.name)}),f.length>0&&a.push(an(Ct,i,{definitions:f}))}i.body=o.concat(a,i.body)}}}),We.DEFMETHOD("process_returns",rn),Y.DEFMETHOD("process_returns",function(e){if(e.option("booleans")&&!(e.parent()instanceof ue))switch(bi(this.name.definition(),yi(this),e)){case"d":Si(e,this,!0);break;case!0:xi(this,e)}}),ge.DEFMETHOD("process_returns",function(e){if(e.option("booleans")){var t=!0,n=yi(this);if(!this.name||l(this.name.definition())){var i=e.parent();if(i instanceof c){if("="!=i.operator)return;var r=i.left;if(!(r instanceof mt))return;if(!l(r.definition()))return}else if(i instanceof S&&i.expression!==this){var s=i.expression;if(s instanceof mt&&(s=s.fixed_value()),!(s instanceof ke))return;if(s.uses_arguments||s.pinned())return;for(var o=i.args,a=0;a<o.length;a++){var u=o[a];if(u===this){if(!(r=s.argnames[a])&&s.rest)return;break}if(u instanceof Je)return}if(r instanceof H&&(r=r.name),r instanceof ft&&!l(r.definition()))return}else{if("Call"!=i.TYPE)return;e.pop();var f=e.in_boolean_context();switch(e.push(this),f){case!0:t=!1;case"d":break;default:return}}t?Si(e,this,!0):xi(this,e)}}function l(i){switch(bi(i,n,e)){case!0:t=!1;case"d":return!0}}}),y.DEFMETHOD("var_names",function(){var e=this._var_names;return e||(this._var_names=e=new Yt,this.enclosed.forEach(function(t){e.set(t.name,!0)}),this.variables.each(function(t,n){e.set(n,!0)})),e}),We.DEFMETHOD("make_var",function(e,t,n){var i=[this];t instanceof at&&t.definition().references.forEach(function(e){var t=e.scope;do{if(!sn(i,t))return;t=t.parent_scope}while(t&&t!==this)});for(var r=n=n.replace(/^[^a-z_$]|[^a-z0-9_$]/gi,"_"),s=0;!Wt(i,function(e){return!e.var_names().has(r)});s++)r=n+"$"+s;var o=an(e,t,{name:r,scope:this}),a=this.def_variable(o);return i.forEach(function(e){e.enclosed.push(a),e.var_names().set(r,!0)}),o}),We.DEFMETHOD("hoist_properties",function(e){if(e.option("hoist_props")&&!e.has_directive("use asm")){var t=this;if(!Bt(t)||!t.value){var n=t instanceof xt&&e.top_retain||un,i=Object.create(null),r=new Nt(function(e,n){if(e instanceof c){if("="!=e.operator)return;if(!e.write_only)return;if(!s(e.left,e.right,1))return;n(e,r);var o=new Yt,a=[],u=[];return e.right.properties.forEach(function(n){var i=h(gt,e.left,n.key);u.push(an(Pt,e,{name:i,value:null}));var r=an(mt,e,{name:i.name,scope:t,thedef:i.definition()});r.reference(),a.push(an(c,e,{operator:"=",left:r,right:n.value}))}),o.value=e.right,i[e.left.definition().id]=o,t.body.splice(t.body.indexOf(r.stack[1])+1,0,an(Ct,e,{definitions:u})),hn(e,a)}if(e instanceof We){if(e===t)return;var f=r.parent();if("Call"==f.TYPE&&f.expression===e)return;return e}if(e instanceof Pt){if(!s(e.name,e.value,0))return;n(e,r);var o=new Yt,l=[],p=e.clone();return p.value=e.name instanceof ot?an(Re,e,{value:0}):null,l.push(p),e.value.properties.forEach(function(t){l.push(an(Pt,e,{name:h(e.name.CTOR,e.name,t.key),value:t.value}))}),o.value=e.value,i[e.name.definition().id]=o,Qt.splice(l)}function h(e,n,i){var r=t.make_var(e,n,n.name+"_"+i);return o.set(i,r.definition()),r}});t.transform(r),t.transform(new Nt(function(e,t){if(e instanceof Ue){if(!(e.expression instanceof mt))return;var n=i[e.expression.definition().id];if(!n)return;if(e.expression.fixed_value()!==n.value)return;var r=n.get(e.get_property()),s=an(mt,e,{name:r.name,scope:e.expression.scope,thedef:r});return s.reference(),s}if(e instanceof mt){var n=i[e.definition().id];if(!n)return;if(e.fixed_value()!==n.value)return;return an(Le,e,{properties:[]})}}))}}function s(i,r,s){if(i instanceof nt){var o=i.definition();if(o.assignments==s&&o.references.length-o.replaced!=s&&!o.single_use&&t.find_variable(i.name)===o&&!n(o)&&i.fixed_value()===r){var a=i.fixed||o.fixed;if(!(a.direct_access||a.escaped&&1==a.escaped.depth))return r instanceof Le&&r.properties.length>0&&j(i,e)&&Wt(r.properties,function(e){return or(e)&&"__proto__"!==e.key})}}}}),function(e){function t(e,t,n,i){for(var r=e.length,s=[],o=!1,a=0;a<r;a++){var c,u=e[a];(c=i&&u instanceof Je?i(u,t,n):u.drop_side_effect_free(t,n))!==u&&(o=!0),c&&(s.push(c),n=!1)}return s.length?o?s:e:null}function n(e,t,n){var i=e.expression;return i.is_string(t)?i.drop_side_effect_free(t,n):e}function i(e){return e instanceof Je?an(o,e,{elements:[e]}):e}e(Ie,pn),e(s,fn),e(o,function(e,r){var s=t(this.elements,e,r,n);return s?s===this.elements&&Wt(s,function(e){return e instanceof Je})?this:hn(this,s.map(i)):null}),e(c,function(e){var t=this.left;if(t instanceof Ue){var n=t.expression;if(n.may_throw_on_access(e,!0))return this;if(e.has_directive("use strict")&&n.is_constant())return this}return t.has_side_effects(e)?this:Jn[this.operator.slice(0,-1)]?this:(this.write_only=!0,qt(t).is_constant_expression(e.find_parent(We))?this.right.drop_side_effect_free(e):this)}),e(m,function(e){if(!e.option("awaits"))return this;var t=this.expression;if(!Gi(e,t))return this;t instanceof Tt&&"!"==t.operator&&(t=t.expression);var n=t.drop_side_effect_free(e);if(n===t)return this;n?Gi(e,n)||(n=n.negate(e)):n=an(Re,t,{value:0});var i=this.clone();return i.expression=n,i}),e(_,function(e,t){var n=this.left,i=this.right,r=this.operator;if(!Wi(r,i,e)){var s=n.drop_side_effect_free(e,t);if(s===n)return this;var o=this.clone();return o.left=s||an(Re,n,{value:0}),o}var a=i.drop_side_effect_free(e,t);if(!a)return n.drop_side_effect_free(e,t);if(Jn[r]&&a.has_side_effects(e)){var o=this;if(a!==i&&((o=o.clone()).right=a.drop_side_effect_free(e)),"??"==r)return o;var c=o.clone();c.operator="&&"==r?"||":"&&",c.left=n.negate(e,t);var u=c.right.tail_node();u instanceof _&&c.operator==u.operator&&Ki(c);var f=t?Xn:Kn;return"&&"==r?f(o,c):f(c,o)}var s=n.drop_side_effect_free(e,t);return s?(a=a.drop_side_effect_free(e))?hn(this,[s,a]):s:a}),e(S,function(e,r){var s=this;if(s.is_expr_pure(e)){s.pure&&Ie.warn("Dropping __PURE__ call [{start}]",s);var o=t(s.args,e,r,n);return o&&hn(s,o.map(i))}var a=s.expression;if(s.is_call_pure(e)){var c=s.args.slice();return c.unshift(a.expression),(c=t(c,e,r,n))&&hn(s,c.map(i))}if(e.option("yields")&&Vt(a)){var u=s.clone();u.expression=an(ge,a),u.expression.body=[];var f=u.transform(e);if(f!==u)return f.drop_side_effect_free(e,r)}var l=Si(e,a);if(l&&((s=s.clone()).expression=l,a._squeezed&&(s.expression._squeezed=!0)),s instanceof Oe){var p=a;if(p instanceof mt&&(p=p.fixed_value()),p instanceof ke){if(function(e,t){e.new=!0;var n=Wt(e.body,function(e){return!e.has_side_effects(t)})&&Wt(e.argnames,function(e){return!e.match_symbol(un)})&&!(e.rest&&e.rest.match_symbol(un));return e.new=!1,n}(p,e)){var c=s.args.slice();return c.unshift(a),(c=t(c,e,r,n))&&hn(s,c.map(i))}p.contains_this()||((s=an(S,s)).expression=s.expression.clone(),s.args=s.args.slice())}}return s.call_only=!0,s}),e(C,function(e,n){for(var i=this,s=[],o=[],c=0,u=i.properties,f=0;f<u.length;f++){var l=u[f];if(l.key instanceof Ie&&s.push(l.key),Vn(l)){var p=l.value;if(p.has_side_effects(e)){if(p.contains_this())return i;l instanceof D?(c++,o.push(l)):o.push(p)}}}var h=i.extends;if(h&&(h instanceof mt&&(h=h.fixed_value()),(h=!r(h))||s.unshift(i.extends)),(s=t(s,e,n))&&(n=!1),o=t(o,e,n),!s){if(!h&&!o&&!i.name)return null;s=[]}if(h||i.name||!e.has_directive("use strict")){var d=gi(i);return h||(d.extends=null),d.properties=[],o?o.length==c?(s.length&&o.unshift(an(P,i,{key:hn(i,s),value:null})),d.properties=o):d.properties.push(an(P,i,{static:!0,key:s.length?hn(i,s):"c",value:m()})):s.length&&d.properties.push(an(N,i,{key:hn(i,s),value:an(ge,i,{argnames:[],body:[]}).init_vars(d)})),d}return o&&s.push(an(S,i,{expression:an(a,i,{argnames:[],body:[],value:m()}).init_vars(i.parent_scope),args:[]})),hn(i,s);function m(){return hn(i,o.map(function(e){if(!(e instanceof D))return e;var t=an(a,e.value);return t.argnames=[],an(S,e,{expression:t,args:[]})}))}}),e(F,function(e){var t,n,i=this.consequent.drop_side_effect_free(e),r=this.alternative.drop_side_effect_free(e);return i===this.consequent&&r===this.alternative?this:(e.option("ie")&&(t=[],i instanceof ge&&(t.push(i),i=null),r instanceof ge&&(t.push(r),r=null)),i?r?((n=this.clone()).consequent=i,n.alternative=r):n=an(_,this,{operator:"&&",left:this.condition,right:i}):n=r?an(_,this,{operator:"||",left:this.condition,right:r}):this.condition.drop_side_effect_free(e),t?(n&&t.push(n),0==t.length?null:hn(this,t)):n)}),e(B,fn),e(ne,function(e,t){var n=this.expression;return n.may_throw_on_access(e)?this:n.drop_side_effect_free(e,t)}),e(ge,function(e){return wi(this,e)?null:this}),e(Te,fn),e(Le,function(e,n){var i=[];this.properties.forEach(function(e){e instanceof Je?i.push(e):(e.key instanceof Ie&&i.push(e.key),i.push(e.value))});var r=t(i,e,n,function(e,t,n){var i=e.expression;return i.safe_to_spread()?i.drop_side_effect_free(t,n):e});return r?r!==i||Wt(r,function(e){return!(e instanceof Je)})?hn(this,r.map(function(e){return e instanceof Je?an(Le,e,{properties:[e]}):e})):this:null}),e(qe,fn),e(Ge,function(e,n){var i=t(this.expressions,e,n);if(!i)return null;var r,s,o,a=i.length-1,u=i[a];if(e.option("awaits")&&a>0&&u instanceof m&&u.expression.is_constant()){var f=(i=i.slice(0,-1))[--a];u.expression=Gi(e,f)?f:f.negate(e),i[a]=u}return e.option("conditionals")&&a>0&&(r=i[a-1])instanceof c&&"="==r.operator&&(o=r.left)instanceof mt&&(s=Bi(e,o.definition(),r.right,u))&&((r=r.clone()).right=s,(i=i.slice(0,-2)).push(r.drop_side_effect_free(e,n))),i===this.expressions?this:hn(this,i)}),e(Qe,function(e,t){var n=this.expression;if(n.may_throw_on_access(e))return this;var i=this.property;return(n=n.drop_side_effect_free(e,t))?(i=i.drop_side_effect_free(e))?hn(this,[n,i]):n:i.drop_side_effect_free(e,t)}),e(mt,function(e){return this.is_declared(e)&&j(this,e)?null:this}),e(_t,function(e,t){var n=this;if(n.is_expr_pure(e)){var i=n.expressions;return 0==i.length?null:hn(n,i).drop_side_effect_free(e,t)}var r=n.tag,s=Si(e,r);return s&&((n=n.clone()).tag=s,r._squeezed&&(n.tag._squeezed=!0)),n}),e(kt,function(e,t){var n=this.expression;if(kn[this.operator])return this.write_only=!n.has_side_effects(e),this;if("typeof"==this.operator&&n instanceof mt&&j(n,e))return null;var i=n.drop_side_effect_free(e,t);return t&&i&&Mn(i)?i===n&&"!"==this.operator?this:i.negate(e,t):i})}(function(e,t){e.DEFMETHOD("drop_side_effect_free",t)}),e(Ye,function(e,t){if(t.option("side_effects")){var n=e.body,i=n.drop_side_effect_free(t,!0);if(!i)return Ie.warn("Dropping side-effect-free statement [{start}]",e),an(re,e);if(i!==n)return an(Ye,e,{body:i})}return e}),e(Ot,function(e,t){return t.option("loops")?an(he,e).optimize(t):e}),e(te,function(e,t){if(!t.option("loops"))return e;var n=Ti(t,e.condition);if(!(n instanceof Ie)){if(n&&!ki(e,t.parent(),V))return an(he,e,{body:an(b,e.body,{body:[e.body,an(Ye,e.condition,{body:e.condition})]})}).optimize(t);if(!ki(e,t.parent()))return an(b,e.body,{body:[e.body,an(Ye,e.condition,{body:e.condition})]}).optimize(t)}if(e.body instanceof b&&!ki(e,t.parent(),V)){for(var i=e.body.body,r=i.length;--r>=0;){var s=i[r];if(s instanceof ve&&!s.alternative&&s.body instanceof w&&t.loopcontrol_target(s.body)===e){if(o(s.condition))break;e.condition=an(_,e,{operator:"&&",left:s.condition.negate(t),right:e.condition}),i.splice(r,1)}else if(s instanceof Ye){if(o(s.body))break;e.condition=hn(e,[s.body,e.condition]),i.splice(r,1)}else if(!Un(s,!0))break}e.body=li(e.body,t.parent())}return e.body instanceof re?an(he,e).optimize(t):e.body instanceof Ye?an(he,e,{condition:hn(e.condition,[e.body.body,e.condition]),body:an(re,e)}).optimize(t):e;function o(t){var n=!1;return t.walk(new Rt(function(t){return!!n||(t instanceof mt?(nn(t.definition(),e.enclosed)||(n=!0),!0):void 0)})),n}}),e(he,function(e,t){if(!t.option("loops"))return e;if(t.option("side_effects")&&(e.init&&(e.init=e.init.drop_side_effect_free(t)),e.step&&(e.step=e.step.drop_side_effect_free(t))),e.condition){var n=Ti(t,e.condition);if(n)n instanceof Ie||(e.body=an(b,e.body,{body:[an(Ye,e.condition,{body:e.condition}),e.body]}),e.condition=null);else if(t.option("dead_code")){var i=[];return zt(e.init)?i.push(e.init):e.init&&i.push(an(Ye,e.init,{body:e.init})),i.push(an(Ye,e.condition,{body:e.condition})),Gn(t,e.body,i),an(b,e,{body:i}).optimize(t)}}return function e(t,n){var i=a(t.body);if(n.option("dead_code")&&(i instanceof w||i instanceof V&&c(i)||i instanceof se)){var r=[];zt(t.init)?r.push(t.init):t.init&&r.push(an(Ye,t.init,{body:t.init}));var s=c(i)||i instanceof se;return t.condition&&s?r.push(an(ve,t,{condition:t.condition,body:i,alternative:null})):t.condition?r.push(an(Ye,t.condition,{body:t.condition})):s&&r.push(i),Gn(n,t.body,r),an(b,t,{body:r})}if(i instanceof ve){var o=a(i.body);if(o instanceof w&&!c(o)){t.condition?t.condition=an(_,t.condition,{left:t.condition,operator:"&&",right:i.condition.negate(n)}):t.condition=i.condition.negate(n);var r=In(i.alternative);return Gn(n,i.body,r),u(r)}if((o=a(i.alternative))instanceof w&&!c(o)){t.condition?t.condition=an(_,t.condition,{left:t.condition,operator:"&&",right:i.condition}):t.condition=i.condition;var r=In(i.body);return Gn(n,i.alternative,r),u(r)}}return t;function a(e){return e instanceof b?e.body[0]:e}function c(e){return n.loopcontrol_target(e)!==n.self()}function u(i){return t.body instanceof b?(t.body=t.body.clone(),t.body.body=i.concat(t.body.body.slice(1)),t.body=t.body.transform(n)):t.body=an(b,t.body,{body:i}).transform(n),e(t,n)}}(e,t)}),e(de,function(e,t){if(t.option("varify")&&On(e.init)){var n=e.init.definitions[0].name;(n instanceof K||n instanceof ht)&&!n.match_symbol(function(e){if(e instanceof at){var n=e.definition();return!Qi(n)||Oi(t,n)}},!0)&&(e.init=Di(e.init,e.resolve()))}return e}),e(ve,function(e,t){if(Nn(e.alternative)&&(e.alternative=null),!t.option("conditionals"))return e;if(t.option("booleans")&&!e.condition.has_side_effects(t)&&Ei(t,e.condition),t.option("dead_code")){var n=Ti(t,e.condition);if(!n){Ie.warn("Condition always false [{start}]",e.condition);var i=[an(Ye,e.condition,{body:e.condition}).transform(t)];return Gn(t,e.body,i),e.alternative&&i.push(e.alternative),an(b,e,{body:i}).optimize(t)}if(!(n instanceof Ie)){Ie.warn("Condition always true [{start}]",e.condition);var i=[an(Ye,e.condition,{body:e.condition}).transform(t),e.body];return e.alternative&&Gn(t,e.alternative,i),an(b,e,{body:i}).optimize(t)}}var r=e.condition.negate(t),s=e.condition.print_to_string().length,o=r.print_to_string().length,a=o<s;if(e.alternative&&a){a=!1,e.condition=r;var u=e.body;e.body=e.alternative,e.alternative=Nn(u)?null:u}var f=[],l=[],p=[],h=q(e.body,f,l,p),d=[],m=[],g=[],v=q(e.alternative,d,m,g);if(h instanceof b||v instanceof b){var i=[],y=[];if(h&&([].push.apply(i,f),[].push.apply(y,l),h instanceof b?e.body=h:0==h.length?e.body=an(re,e.body):e.body=an(Ye,e.body,{body:hn(e.body,h)}),p.forEach(vt)),v&&([].push.apply(i,d),[].push.apply(y,m),v instanceof b?e.alternative=v:0==v.length?e.alternative=null:e.alternative=an(Ye,e.alternative,{body:hn(e.alternative,v)}),g.forEach(vt)),y.length>0&&i.push(an(Ct,e,{definitions:y})),i.length>0)return i.push(e.transform(t)),an(b,e,{body:i}).optimize(t)}else if(h&&v){var i=f.concat(d);return(l.length>0||m.length>0)&&i.push(an(Ct,e,{definitions:l.concat(m)})),0==h.length?i.push(an(Ye,e.condition,{body:v.length>0?an(_,e,{operator:"||",left:e.condition,right:hn(e.alternative,v)}).transform(t):e.condition.clone()}).optimize(t)):0==v.length?(s===o&&!a&&e.condition instanceof _&&"||"==e.condition.operator&&(a=!0),i.push(an(Ye,e,{body:an(_,e,{operator:a?"||":"&&",left:a?r:e.condition,right:hn(e.body,h)}).transform(t)}).optimize(t))):i.push(an(Ye,e,{body:an(F,e,{condition:e.condition,consequent:hn(e.body,h),alternative:hn(e.alternative,v)})}).optimize(t)),p.forEach(vt),g.forEach(vt),an(b,e,{body:i}).optimize(t)}if(Nn(e.body)&&(e=an(ve,e,{condition:r,body:e.alternative,alternative:null})),e.alternative instanceof se&&e.body.TYPE==e.alternative.TYPE){var x=e.body.value,w=e.alternative.value;if(!x&&!w)return an(b,e,{body:[an(Ye,e,{body:e.condition}),e.body]}).optimize(t);if(x&&w||!function(){var e=!1,n=0,i=t.self();do{if(i instanceof A)t.parent(n).bfinally&&(e=!0),n++;else if(i instanceof pe)n++;else{if(i instanceof We)return e&&Gt(i);i instanceof St&&i.bfinally&&(e=!0)}}while(i=t.parent(n++))}()){var S=an(e.body.CTOR,e,{value:an(F,e,{condition:e.condition,consequent:x||an(Et,e.body).transform(t),alternative:w||an(Et,e.alternative).transform(t)})});return S instanceof He&&(S.in_bool=e.body.in_bool||e.alternative.in_bool),S}}if(e.body instanceof ve&&!e.body.alternative&&!e.alternative&&(e=an(ve,e,{condition:an(_,e.condition,{operator:"&&",left:e.condition,right:e.body.condition}),body:e.body.body,alternative:null})),ui(e.body)&&e.alternative){var k=e.alternative;return e.alternative=null,an(b,e,{body:[e,k]}).optimize(t)}if(ui(e.alternative)){var i=e.body;return e.body=e.alternative,e.condition=a?r:e.condition.negate(t),e.alternative=null,an(b,e,{body:[e,i]}).optimize(t)}if(e.alternative){for(var T=L(e.body),E=M(T),C=L(e.alternative),P=M(C),O=[];E>=0&&P>=0;){var D=T[E],I=C[P];if(D.equals(I))T.splice(E--,1),C.splice(P--,1),O.unshift(Cn(D,I));else{if(!(D instanceof Ye))break;if(!(I instanceof Ye))break;var N=D.body.tail_node(),R=I.body.tail_node();if(!N.equals(R))break;E=j(T,D.body,E),P=j(C,I.body,P),O.unshift(an(Ye,N,{body:Cn(N,R)}))}}if(O.length>0)return e.body=T.length>0?an(b,e,{body:T}):an(re,e),e.alternative=C.length>0?an(b,e,{body:C}):null,O.unshift(e),an(b,e,{body:O}).optimize(t)}return t.option("typeofs")&&Ai(e.condition,e.body,e.alternative),e;function L(e){return e instanceof b?e.body:[e]}function M(e){for(var t=e.length;--t>=0&&Un(e[t],!0););return t}function j(e,t,n){return t instanceof Ge?e[n]=an(Ye,t,{body:hn(t,t.expressions.slice(0,-1))}):e.splice(n--,1),n}function q(e,n,i,r){if(null==e)return[];if(e instanceof b){for(var s=[],o=0;o<e.body.length;o++){var a=e.body[o];if(!(a instanceof re)){if(a instanceof se){if(0==o)return;s.length>0&&(a=a.clone(),s.push(a.value||an(Et,a).transform(t)),a.value=hn(e,s));var u=e.clone();return u.body=u.body.slice(o+1),u.body.unshift(a),u}if(a instanceof Ae)n.push(a);else if(a instanceof Ye){if(!t.option("sequences")&&s.length>0)return;s.push(a.body)}else{if(!(a instanceof Ct))return;if(!t.option("sequences")&&s.length>0)return;a.remove_initializers(t,i),a.definitions.forEach(f)}}}return s}if(e instanceof Ae)return n.push(e),[];if(e instanceof re)return[];if(e instanceof Ye)return[e.body];if(e instanceof Ct){var s=[];return e.remove_initializers(t,i),e.definitions.forEach(f),s}function f(e){e.value&&s.push(an(c,e,{operator:"=",left:e.name.convert_symbol(mt,function(e){r.push(e)}),right:e.value}))}}}),e(et,function(e,t){if(!t.option("switches"))return e;if(!t.option("dead_code"))return e;for(var n,i,r,s=[],o=[],a=[],c=0,u=e.body.length;c<u;c++){if((n=e.body[c])instanceof U){var f=s[s.length-1];if(i||A(n.body[0],t)&&(!f||ui(f))){E(n,f);continue}i=n}else{var l=n.expression,p=an(_,e,{operator:"===",left:e.expression,right:l}).evaluate(t,!0);if(!p){l.has_side_effects(t)&&a.push(l),E(n,s[s.length-1]);continue}if(!(p instanceof Ie)){if(i){var h=s.indexOf(i);s.splice(h,1),E(i,s[h-1]),i=null}for(l.has_side_effects(t)?r=n:i=n=an(U,n);++c<u;)E(e.body[c],n)}}if(c+1>=u||ui(n)){var f=s[s.length-1],d=n.body;if(ui(f))switch(f.body.length-d.length){case 1:var m=f.body[f.body.length-1];if(!A(m,t))break;d=d.concat(m);case 0:var g=an(b,f),v=an(b,n,{body:d});g.equals(v)&&(f.body=[])}}a.length&&(n instanceof U?s.push(an(k,e,{expression:hn(e,a),body:[]})):(a.push(n.expression),n.expression=hn(e,a)),a=[]),s.push(n)}for(a.length&&!r&&s.push(an(k,e,{expression:hn(e,a),body:[]}));n=s[s.length-1];){var m=n.body[n.body.length-1];if(A(m,t)&&n.body.pop(),n===i){if(!Rn(n))break}else{if(n.expression.has_side_effects(t))break;if(i){if(!Rn(i))break;if(s[s.length-2]!==i)break;i.body=i.body.concat(n.body),n.body=[]}else if(!Rn(n))break}E(n),s.pop()===i&&(i=null)}if(!n)return o.push(an(Ye,e.expression,{body:e.expression})),a.length&&o.push(an(Ye,e,{body:hn(e,a)})),an(b,e,{body:o}).optimize(t);if(n===i)for(;(n=s[s.length-2])&&!(n instanceof U)&&Rn(n);){var l=n.expression;if(l.has_side_effects(t)){var f=s[s.length-3];if(f&&!ui(f))break;i.body.unshift(an(Ye,e,{body:l}))}E(n),s.splice(-2,1)}if(s[0].body=o.concat(s[0].body),e.body=s,t.option("conditionals"))switch(s.length){case 1:if(!T(s[0]))break;var l=s[0].expression,d=s[0].body.slice();return s[0]!==i&&s[0]!==r?an(ve,e,{condition:an(_,e,{operator:"===",left:e.expression,right:l}),body:an(b,e,{body:d}),alternative:null}).optimize(t):(l&&d.unshift(an(Ye,l,{body:l})),d.unshift(an(Ye,e.expression,{body:e.expression})),an(b,e,{body:d}).optimize(t));case 2:if(!nn(i,s)||!T(s[1]))break;var d=s[0].body.slice(),y=d.length&&A(d[d.length-1],t);if(y&&d.pop(),!Wt(d,T))break;var x=s[1].body.length&&an(b,s[1]),S=an(ve,e,{condition:an(_,e,s[0]===i?{operator:"!==",left:e.expression,right:s[1].expression}:{operator:"===",left:e.expression,right:s[0].expression}),body:an(b,s[0],{body:d}),alternative:y&&x||null});return!y&&x&&(S=an(b,e,{body:[S,x]})),S.optimize(t)}return e;function A(t,n){return t instanceof w&&n.loopcontrol_target(t)===e}function T(t){var n=!1,i=new Rt(function(e){if(n||e instanceof ke||e instanceof Ye)return!0;A(e,i)&&(n=!0)});return i.push(e),t.walk(i),!n}function E(e,n){n&&!ui(n)?n.body=n.body.concat(e.body):Gn(t,e,o)}}),e(St,function(e,t){if(e.body=Wn(e.body,t),t.option("dead_code")){if(Rn(e)&&!(e.bcatch&&e.bcatch.argname&&e.bcatch.argname.match_symbol(function(e){return e instanceof it&&!j(e)},!0))){var n=[];return e.bcatch&&(Gn(t,e.bcatch,n),n.forEach(function(e){e instanceof Ct&&e.definitions.forEach(function(e){var t=e.name.definition().redefined();t&&(e.name=e.name.clone(),e.name.thedef=t)})})),n.unshift(an(b,e).optimize(t)),e.bfinally&&n.push(an(b,e.bfinally).optimize(t)),an(b,e,{body:n}).optimize(t)}if(e.bfinally&&Rn(e.bfinally)){var n=an(b,e.bfinally).optimize(t);if(n=e.body.concat(n),!e.bcatch)return an(b,e,{body:n}).optimize(t);e.body=n,e.bfinally=null}}return e}),q.DEFMETHOD("remove_initializers",Ci(function(e,t){return an(Et,t).optimize(e)})),Ee.DEFMETHOD("remove_initializers",Ci(fn)),Ct.DEFMETHOD("remove_initializers",Ci(fn)),G.DEFMETHOD("to_assignments",function(){var e=this.definitions.reduce(function(e,t){var n=t.name.definition(),i=t.value;if(i){i instanceof Ge&&(i=i.clone());var r=an(mt,t.name),s=an(c,t,{operator:"=",left:r,right:i});e.push(s);var o=function(){return s.right};o.assigns=[s],o.direct_access=n.direct_access,o.escaped=n.escaped,r.fixed=o,n.references.forEach(function(e){if(e.fixed){var i=e.fixed.assigns;i&&i[0]===t&&(i.length>1||e.fixed.to_binary||e.fixed.to_prefix?i[0]=s:(e.fixed=o,n.fixed===e.fixed&&(n.fixed=o)))}}),n.references.push(r)}return n.assignments++,n.eliminated++,n.single_use=!1,e},[]);return 0==e.length?null:hn(this,e)}),e(q,Ni),e(Ee,Ni),e(S,function(e,t){var n=e.expression,i=Ri(e,t);if(i)return i;if(t.option("sequences"))if(n instanceof Ue){var r=Li(n,t);if(r!==n){var s=e.clone();return s.expression=r.expressions.pop(),r.expressions.push(s),r.optimize(t)}}else if(!Tn(n.tail_node())){var r=Li(e,t);if(r!==e)return r.optimize(t)}if(t.option("unused")&&Mi(e,t),t.option("unsafe"))if(Fn(n))switch(n.name){case"Array":if(1==e.args.length){var a=e.args[0];if(a instanceof Re)try{var u=a.value;if(u>6)break;for(var l=Array(u),p=0;p<u;p++)l[p]=an(_e,e);return an(o,e,{elements:l})}catch(t){Ie.warn("Invalid array length: {length} [{start}]",{length:u,start:e.start});break}if(!a.is_boolean(t)&&!a.is_string(t))break}return an(o,e,{elements:e.args});case"Object":if(0==e.args.length)return an(Le,e,{properties:[]});break;case"String":if(0==e.args.length)return an(Xe,e,{value:""});if(1==e.args.length)return an(_,e,{operator:"+",left:an(Xe,e,{value:""}),right:e.args[0]}).optimize(t);break;case"Number":if(0==e.args.length)return an(Re,e,{value:0});if(1==e.args.length)return an(Tt,e,{operator:"+",expression:an(_,e,{operator:"+",left:an(Xe,e,{value:""}),right:e.args[0]})}).optimize(t);break;case"Boolean":if(0==e.args.length)return an(le,e).optimize(t);if(1==e.args.length)return an(Tt,e,{operator:"!",expression:an(Tt,e,{operator:"!",expression:e.args[0]})}).optimize(t);break;case"RegExp":var h=[];if(Wt(e.args,function(e){var n=e.evaluate(t);return h.unshift(n),e!==n}))try{return Qn(t,e,an($e,e,{value:RegExp.apply(RegExp,h)}))}catch(t){Ie.warn("Error converting {this} [{start}]",e)}}else if(n instanceof ne)switch(n.property){case"toString":var d=n.expression;if(0==e.args.length&&!(d.may_throw_on_access(t)||d instanceof Ze))return an(_,e,{operator:"+",left:an(Xe,e,{value:""}),right:d}).optimize(t);break;case"join":if(n.expression instanceof o&&e.args.length<2)e:{var g=e.args[0];if(0==n.expression.elements.length&&!(g instanceof Je))return g?hn(e,[g,an(Xe,e,{value:""})]).optimize(t):an(Xe,e,{value:""});if(!(g&&(g=g.evaluate(t))instanceof Ie)){for(var l=[],v=[],p=0;p<n.expression.elements.length;p++){var y=n.expression.elements[p],x=y.evaluate(t);if(x!==y)v.push(x);else{if(y instanceof Je)break e;v.length>0&&(l.push(an(Xe,e,{value:v.join(g)})),v.length=0),l.push(y)}}if(v.length>0&&l.push(an(Xe,e,{value:v.join(g)})),1==l.length)return l[0].is_string(t)?l[0]:an(_,l[0],{operator:"+",left:an(Xe,e,{value:""}),right:l[0]});if(""==g)return a=l[0].is_string(t)||l[1].is_string(t)?l.shift():an(Xe,e,{value:""}),l.reduce(function(e,t){return an(_,t,{operator:"+",left:e,right:t})},a).optimize(t);var w=e.clone();return w.expression=w.expression.clone(),w.expression.expression=w.expression.expression.clone(),w.expression.expression.elements=l,Qn(t,e,w)}}break;case"charAt":if(e.args.length<2){var w=an(_,e,{operator:"||",left:an(Qe,e,{expression:n.expression,property:e.args.length?an(_,e.args[0],{operator:"|",left:an(Re,e,{value:0}),right:e.args[0]}):an(Re,e,{value:0})}).optimize(t),right:an(Xe,e,{value:""})});return w.is_string=ln,w.optimize(t)}break;case"apply":if(2==e.args.length&&e.args[1]instanceof o){var k=e.args[1].elements.slice();return k.unshift(e.args[0]),an(S,e,{expression:an(ne,n,{expression:n.expression,property:"call"}),args:k}).optimize(t)}break;case"call":var A=n.expression;if(A instanceof mt&&(A=A.fixed_value()),A instanceof ke&&!A.contains_this())return(e.args.length?hn(e,[e.args[0],an(S,e,{expression:n.expression,args:e.args.slice(1)})]):an(S,e,{expression:n.expression,args:[]})).optimize(t)}else if(t.option("side_effects")&&n instanceof S&&1==n.args.length&&Fn(n.expression)&&"Object"==n.expression.name){var s=e.clone();return s.expression=En(e,n,n.args[0]),s.optimize(t)}if(t.option("unsafe_Function")&&Fn(n)&&"Function"==n.name){if(0==e.args.length)return an(ge,e,{argnames:[],body:[]}).init_vars(n.scope);if(Wt(e.args,function(e){return e instanceof Xe}))try{var T="n(function("+e.args.slice(0,-1).map(function(e){return e.value}).join()+"){"+e.args[e.args.length-1].value+"})",E=mn(T),C={ie:t.option("ie")};E.figure_out_scope(C);var O,D=new An(t.options);(E=E.transform(D)).figure_out_scope(C),E.compute_char_frequency(C),E.mangle_names(C),E.walk(new Rt(function(e){return!!O||(e instanceof ke?(O=e,!0):void 0)}));var T=bn();return b.prototype._codegen.call(O,T),e.args=[an(Xe,e,{value:O.argnames.map(function(e){return e.print_to_string()}).join()}),an(Xe,e.args[e.args.length-1],{value:T.get().replace(/^\{|\}$/g,"")})],e}catch(t){if(!(t instanceof dn))throw t;Ie.warn("Error parsing code passed to new Function [{start}]",e.args[e.args.length-1]),Ie.warn(t.toString())}}var I=n instanceof mt?n.fixed_value():n,N=t.parent(),R=t.self(),L=I instanceof ke&&(!Ut(I)||t.option("awaits")&&N instanceof m)&&(!Vt(I)||t.option("yields")&&R instanceof It&&R.nested),M=L&&I.first_statement(),j=0,q=!1,B=!Wt(e.args,function(e){return!(e instanceof Je)}),V=L&&Wt(I.argnames,function(t,n){if(1==j&&e.args[n]instanceof Je&&(j=2),t instanceof H){j||(j=1);var i=1==j&&e.args[n];if(Yn(i)||(j=2),cr(I,t.value))return!1;t=t.name}return!(t instanceof K&&(q=!0,cr(I,t)))})&&!(I.rest instanceof K&&cr(I,I.rest)),z=V&&t.option("inline")&&!e.is_expr_pure(t)&&(n===I||qi(I,t));if(z&&M instanceof He){var x=M.value;if(n===I&&!I.name&&(!x||x.is_constant_expression())&&Fi(I,ji(t)))return hn(e,pe(x)).optimize(t)}if(L&&!I.contains_this()){var U,$=!1;if(z&&!I.uses_arguments&&!I.pinned()&&!(I.name&&I instanceof Te)&&(n===I||!Xi(t,U=n.definition(),I)&&I.is_constant_expression(Kt(t)))&&(x=function(e){var n=I.body.length;if(n<2&&(e=ve(e)))return e;if(t.option("inline")<3)return!1;e=null;for(var i=0;i<n;i++){var r=I.body[i];if(r instanceof Ct){if($){if(!e)continue;if(!(e instanceof Ye))return!1;zn(r)||(e=null)}else if(!zn(r)){if(e&&!(e instanceof Ye))return!1;e=null,$=!0}}else{if(r instanceof f||r instanceof Y||r instanceof re)continue;if(e)return!1;e=r}}return ve(e)}(M))){var W,G,J,ee,te=n===I||U.single_use&&U.references.length-U.replaced==1;if(function(){if(j||q||B||$||I.rest)return;if(t.option("inline")<2&&I.argnames.length)return;if(!I.variables.all(function(e){return e.references.length-e.replaced<2&&e.orig[0]instanceof ft}))return;var n,i=t.find_parent(We),r=!1,s=ji(t,i),o=[],a=!1,u=new Rt(function(e,i){if(r)return!0;if(e instanceof _&&Jn[e.operator]||e instanceof F)o=null;else{if(e instanceof We)return r=!0;if(s&&e instanceof nt&&s[e.name])return r=!0;if(e instanceof mt){var f=e.definition();if(I.variables.get(e.name)!==f)return void(o=null);if(f.init instanceof Ae)return r=!0;if(wn(e,u.parent()))return r=!0;var l=ye(f);if(n<l||(n=l),!o)return;a?o=null:o.push(I.argnames[l])}else if(!a)return e instanceof c&&e.left instanceof Ue?(e.left.expression.walk(u),e.left instanceof Qe&&e.left.property.walk(u),e.right.walk(u),a=!0,!0):e.has_side_effects(t)?(i(),a=!0,!0):void 0}});if(x.walk(u),r)return;var f=e.args.length;if(o&&I.argnames.length>=f){for(f=I.argnames.length;f-- >n&&I.argnames[f]===o.pop(););f++}return f<=n||Wt(e.args.slice(n,f),a&&!o?function(e){return e.is_constant_expression(i)}:function(e){return!e.has_side_effects(t)})}()){var k=e.args.slice(),se=[],oe=x.clone(!0).transform(new Nt(function(t){if(t instanceof mt){var n=t.definition();if(I.variables.get(t.name)!==n)return se.push(t),t;var i=ye(n),r=k[i];if(!r)return an(Et,e);k[i]=null;var s=this.parent();return s?En(s,t,r):r}})),ae=I.inlined;n!==I&&(I.inlined=!0);var ce=[];k.forEach(function(e){e&&((e=e.clone(!0)).walk(new Rt(function(e){e instanceof mt&&se.push(e)})),ce.push(e))},[]),ce.push(oe);var w=hn(e,ce).optimize(t);if(I.inlined=ae,w=En(N,R,w),te||Kn(w,e)===w)return se.forEach(function(e){e.scope=n===I?I.parent_scope:n.scope,e.reference();var t=e.definition();te&&t.replaced++,t.single_use=!1}),w;w.has_side_effects(t)||(e.drop_side_effect_free=function(e,t){var n=this.args.slice();return n.unshift(this.expression),hn(this,n).drop_side_effect_free(e,t)})}if(te&&function(){var e,i=new Yt,r=0;ee=R;do{if(ee.variables&&ee.variables.each(function(e){i.set(e.name,!0)}),e=ee,(ee=t.parent(r++))instanceof P){if(!ee.static)return!1}else if(ee instanceof ie)J=[];else if(ee instanceof he){if(ee.init===e)continue;J=[]}else if(ee instanceof de){if(ee.init===e)continue;if(ee.object===e)continue;J=[]}}while(!(ee instanceof We));if(!(G=ee.body.indexOf(e)+1))return!1;if(!Fi(I,ji(t,ee)))return!1;var s=(n!==I||I.parent_scope.resolve()===ee)&&!ee.pinned();ee instanceof xt&&(t.toplevel.vars?i.set("arguments",!0):s=!1);W=new Yt;var o=t.option("inline");return!(!function(e,t){var n=!1;return I.each_argname(function(i){if(!n&&!i.unused){if(!t||be(e,i.name))return n=!0;W.set(i.name,!0),J&&J.push(i.definition())}}),!n}(i,o>=2&&s)||!function(e,t){for(var n=0;n<I.body.length;n++){var i=I.body[n];if(i instanceof Ae){var r=i.name;if(!t)return!1;if(W.has(r.name))return!1;if(be(e,r.name))return!1;if(!Wt(i.enclosed,function(t){return t.scope===ee||t.scope===i||!e.has(t.name)}))return!1;J&&J.push(r.definition())}else if(i instanceof Ct){if(!t)return!1;for(var s=i.definitions.length;--s>=0;){var r=i.definitions[s].name;if(be(e,r.name))return!1;J&&J.push(r.definition())}}}return!0}(i,o>=3&&s)||J&&0!=J.length&&nr(I,J))}()){I._squeezed=!0,n!==I&&(I.parent_scope=n.scope);var w=hn(e,function(){var n=[],i=[];j>1||q||B||I.rest?function(t,n){function i(e,i){if(i.unused)return fe(i);var r=i.definition();r.assignments++,r.references.push(e);var s=an(gt,i);r.orig.push(s),r.eliminated++,xe(t,n,s)}n.push(an(c,e,{operator:"=",left:an(X,e,{elements:I.argnames.map(function(e){return e.unused?an(_e,e):e.convert_symbol(mt,i)}),rest:I.rest&&I.rest.convert_symbol(mt,i)}),right:an(o,e,{elements:e.args.slice()})}))}(n,i):function(t,n){for(var i=I.argnames.length,r=e.args.length;--r>=i;)n.push(e.args[r]);var s=[];for(r=i;--r>=0;){var o,a=I.argnames[r];a instanceof H?(s.push(a),o=a.name):o=a;var u=e.args[r];if(o.unused||ee.var_names().has(o.name))u&&n.push(u);else{var f=an(gt,o),l=o.definition();l.orig.push(f),l.eliminated++,void 0!==o.unused?(xe(t,n,f),u&&n.push(u)):(!u&&a===o&&(J||"arguments"==o.name&&!Bt(I)&&Bt(ee))&&(u=an(Et,e)),xe(t,n,f,u))}}for(t.reverse(),n.reverse(),r=s.length;--r>=0;){var p=s[r];if(void 0!==p.name.unused)n.push(p.value);else{var h=an(mt,p.name);p.name.definition().references.push(h),n.push(an(c,p,{operator:"=",left:h,right:p.value}))}}}(n,i);var r=function(e,n){var i=[G,0],r=[],s=[],o=[],a=[],c=[];return I.body.filter(J?function(t){if(!(t instanceof Ae))return!0;var n=an(gt,ar(t.name)),i=n.definition();return i.fixed=!1,i.orig.push(n),i.eliminated++,xe(e,s,n,_i(t,!0)),!1}:function(e){if(!(e instanceof Ae))return!0;var t=e.name.definition();return ee.functions.set(t.name,t),ee.variables.set(t.name,t),ee.enclosed.push(t),ee.var_names().set(t.name,!0),i.push(e),!1}).forEach(function(e){if(e instanceof Ct)for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n],s=ar(i.name),u=i.value;u&&c.length>0&&(c.push(u),u=hn(i,c),c=[]),xe(r,o,s,u),J&&(W.has(s.name)||1==s.definition().orig.length&&I.functions.has(s.name)||a.push(fr(t,s)))}else e instanceof Ye&&c.push(e.body)}),[].push.apply(e,r),[].push.apply(n,a),[].push.apply(n,s),[].push.apply(n,o),i}(n,i);i.push(x),n.length&&r.push(an(Ct,I,{definitions:n}));return[].splice.apply(ee.body,r),I.enclosed.forEach(function(e){ee.var_names().has(e.name)||(ee.enclosed.push(e),ee.var_names().set(e.name,!0))}),i}()).optimize(t);return En(N,R,w)}}if(t.option("side_effects")&&V&&Wt(I.body,Nn)&&(I===n?wi(I,t):!j&&!q&&!I.rest)&&(!Bt(I)||!I.value)&&Fi(I,ji(t)))return hn(e,pe()).optimize(t)}if(t.option("drop_console")&&n instanceof Ue){for(var ue=n.expression;ue.expression;)ue=ue.expression;if(Fn(ue)&&"console"==ue.name)return an(Et,e).optimize(t)}return t.option("negate_iife")&&N instanceof Ye&&Mn(R)?e.negate(t,!0):ni(t,e);function fe(e){return an(Qe,e,{expression:an(o,e,{elements:[]}),property:an(Re,e,{value:0})})}function pe(t){var n=e.args.slice(),i=j>1||q||I.rest;if((i||B)&&(n=[an(o,e,{elements:n})]),i){var r=new Nt(function(e,t){if(e instanceof H)return an(H,e,{name:e.name.transform(r)||fe(e),value:e.value});if(e instanceof X){var n=[];return e.elements.forEach(function(e,t){(e=e.transform(r))&&(n[t]=e)}),mi(e,n),an(X,e,{elements:n})}if(e instanceof Z){var i=[],s=[];return e.properties.forEach(function(t){var n=t.key,o=t.value.transform(r);o?(s.length&&(n instanceof Ie||(n=xn(n,t)),s.push(n),n=hn(e,s),s=[]),i.push(an(Q,t,{key:n,value:o}))):n instanceof Ie&&s.push(n)}),s.length&&i.push(an(Q,e,{key:hn(e,s),value:fe(e)})),an(Z,e,{properties:i})}return e instanceof ft?null:void 0}),s=[];I.argnames.forEach(function(e,t){(e=e.transform(r))&&(s[t]=e)});var a=I.rest&&I.rest.transform(r);a&&(s.length=I.argnames.length),mi(I,s),n[0]=an(c,e,{operator:"=",left:an(X,I,{elements:s,rest:a}),right:n[0]})}else I.argnames.forEach(function(e){e instanceof H&&n.push(e.value)});return n.push(t||an(Et,e)),n}function me(){return e.call_only?an(Re,e,{value:0}):an(Et,e)}function ve(t){return t?t instanceof He?t.value||me():t instanceof Ye?e.call_only?t.body:an(Tt,t,{operator:"void",expression:t.body}):void 0:me()}function ye(e){for(var t=I.argnames.length;--t>=0;)if(I.argnames[t].definition()===e)return t}function be(e,t){return e.has(t)||tn[t]||ee.var_names().has(t)}function xe(t,n,i,r){var s=i.definition();if(ee.var_names().has(i.name)||(ee.var_names().set(i.name,!0),t.push(an(Pt,i,{name:i,value:null}))),ee.variables.set(i.name,s),ee.enclosed.push(s),r){var o=an(mt,i);s.assignments++,s.references.push(o),n.push(an(c,e,{operator:"=",left:o,right:r}))}}}),e(Oe,function(e,t){if(t.option("unsafe")){var n=e.expression;if(Fn(n))switch(n.name){case"Array":case"Error":case"Function":case"Object":case"RegExp":return an(S,e).transform(t)}}if(t.option("sequences")){var i=Li(e,t);if(i!==e)return i.optimize(t)}return t.option("unused")&&Mi(e,t),e}),e(Ge,function(e,t){var n=function(){if(!t.option("side_effects"))return e.expressions;var n=[],i=Ft(t),r=e.expressions.length-1;return e.expressions.forEach(function(e,s){s<r&&(e=e.drop_side_effect_free(t,i)),e&&(Pn(n,e),i=!1)}),n}(),i=n.length-1;return function(){for(var e=1;e<i;e++){var s=n[e-1],o=r(s);if(o){var a=n[e];if(t.option("conditionals")){var c=Bi(t,o,s.right,a);if(c){s.right=c,n.splice(e--,1),i--;continue}}t.option("dead_code")&&r(a)===o&&a.right.is_constant_expression(o.scope.resolve())&&(n[--e]=s.right)}}}(),function(){if(!t.option("side_effects"))return;for(;i>0&&Yn(n[i],t);)i--;i<n.length-1&&(n[i]=an(Tt,e,{operator:"void",expression:n[i]}),n.length=i+1)}(),0==i?((e=En(t.parent(),t.self(),n[0]))instanceof Ge||(e=e.optimize(t)),e):(e.expressions=n,e);function r(e){return e instanceof c&&"="==e.operator&&e.left instanceof mt&&e.left.definition()}}),e(At,function(e,t){if(t.option("sequences")){var n=Li(e,t);if(n!==e)return n.optimize(t)}return ni(t,e)});var Vi=en("+ -"),zi=en("* / %");e(Tt,function(e,t){var n=e.operator,i=e.expression;if(t.option("sequences")&&function(){switch(n){case"delete":return!c(i.tail_node());case"typeof":return!Fn(i.tail_node());default:return!0}}()){var r=Li(e,t);if(r!==e)return r.optimize(t)}switch(n){case"+":if(!t.option("evaluate"))break;if(!i.is_number(t,!0))break;var s=t.parent();if(s instanceof Tt&&"delete"==s.operator)break;return i;case"-":if(i instanceof be&&(i=i.transform(t)),i instanceof Re||i instanceof be)return e;break;case"!":if(!t.option("booleans"))break;if(i.is_truthy())return hn(e,[i,an(le,e)]).optimize(t);if(t.in_boolean_context()){if(i instanceof Tt&&"!"==i.operator)return i.expression;if(i instanceof _){var o=Ft(t);e=(o?Xn:Kn)(e,i.negate(t,o))}}break;case"delete":if(!t.option("evaluate"))break;if(c(i))break;return hn(e,[i,an(wt,e)]).optimize(t);case"typeof":if(!t.option("booleans"))break;if(!t.in_boolean_context())break;Ie.warn("Boolean expression always true [{start}]",e);var a=[an(wt,e)];return i instanceof mt&&j(i,t)||a.unshift(i),hn(e,a).optimize(t);case"void":if(!t.option("side_effects"))break;return(i=i.drop_side_effect_free(t))?(e.expression=i,e):an(Et,e).optimize(t)}return t.option("evaluate")&&i instanceof _&&Vi[n]&&zi[i.operator]&&(i.left.is_constant()||!i.right.has_side_effects(t))?an(_,e,{operator:i.operator,left:an(Tt,i.left,{operator:n,expression:i.left}),right:i.right}):ni(t,e);function c(e){return e instanceof be||e instanceof Pe||e instanceof De||e instanceof Ue||e instanceof mt||e instanceof Et}}),e(m,function(e,t){if(!t.option("awaits"))return e;if(t.option("sequences")){var n=Li(e,t);if(n!==e)return n.optimize(t)}if(t.option("side_effects")){var i=e.expression;if(i instanceof m)return i.optimize(t);if(i instanceof Tt&&i.expression instanceof m)return i.optimize(t);for(var r,s=0,o=e;r=t.parent(s++);o=r){if(Bt(r)){if(r.value===o)return i.optimize(t)}else if(r instanceof He){var a=!0;do{if(o=r,(r=t.parent(s++))instanceof St&&(r.bfinally||r.bcatch)!==o){a=!1;break}}while(r&&!(r instanceof We));if(a)return i.optimize(t)}else if(r instanceof Ge&&r.tail_node()===o)continue;break}}return e}),e(It,function(e,t){if(!t.option("yields"))return e;if(t.option("sequences")){var n=Li(e,t);if(n!==e)return n.optimize(t)}var i=e.expression;if(e.nested&&"Call"==i.TYPE){var r=i.clone().optimize(t);if("Call"!=r.TYPE)return r}return e}),_.DEFMETHOD("lift_sequences",function(e){if(this.left instanceof Ue){if(!(this.left.expression instanceof Ge))return this;var t=this.left.expression.expressions.slice(),n=this.clone();return n.left=n.left.clone(),n.left.expression=t.pop(),t.push(n),hn(this,t)}if(this.left instanceof Ge){var t=this.left.expressions.slice(),n=this.clone();return n.left=t.pop(),t.push(n),hn(this,t)}if(this.right instanceof Ge){if(this.left.has_side_effects(e))return this;for(var i="="==this.operator&&this.left instanceof mt,t=this.right.expressions,r=t.length-1,s=0;s<r&&(i||!t[s].has_side_effects(e));s++);if(s==r){t=t.slice();var n=this.clone();return n.right=t.pop(),t.push(n),hn(this,t)}if(s>0){var n=this.clone();return n.right=hn(this.right,t.slice(s)),(t=t.slice(0,s)).push(n),hn(this,t)}}return this});var Ui=en("indexOf lastIndexOf"),$i=en("== === != !== * & | ^");function Hi(e,t){return e instanceof c?!t&&"="==e.operator&&Hi(e.right):e instanceof Oe?!t:e instanceof Ge?Hi(e.tail_node(),t):e instanceof mt?!t&&Hi(e.fixed_value()):e instanceof o||e instanceof E||e instanceof ke||e instanceof Le}function Wi(e,t,n){switch(e){case"in":return Hi(t)||n&&n.option("unsafe_comps");case"instanceof":return t instanceof mt&&(t=t.fixed_value()),i(t)||n&&n.option("unsafe_comps");default:return!0}}function Gi(e,t){if(t.is_constant())return!0;if(t instanceof c)return"="!=t.operator||Gi(e,t.right);if(t instanceof _)return!Jn[t.operator]||Gi(e,t.left)&&Gi(e,t.right);if(t instanceof S)return Ut(t.expression);if(t instanceof F)return Gi(e,t.consequent)&&Gi(e,t.alternative);if(t instanceof Ge)return Gi(e,t.tail_node());if(t instanceof mt){var n=t.fixed_value();return n&&Gi(e,n)}return t instanceof _t?!t.tag||Zi(e,t.tag):t instanceof kt||void 0}function Yi(e,t){return e instanceof c?on(e.left,t)?e:e.left:e instanceof Ge?Yi(e.tail_node(),t):e instanceof Tt&&yn[e.operator]?on(e.expression,t)?e:e.expression:e}function Ji(e,t){return t instanceof ne?Ji(e,t.expression):t instanceof Qe?Ji(e,t.expression)&&Ji(e,t.property):t instanceof nt||!t.has_side_effects(e)}function Ki(e,t){var n=e.right.tail_node();if(n!==e.right){var i=e.right.expressions.slice(0,-1);i.push(n.left),(n=n.clone()).left=hn(e.right,i),e.right=n}e.left=an(_,e,{operator:e.operator,left:e.left,right:n.left,start:e.left.start,end:n.left.end}),e.right=n.right,t?e.left=e.left.transform(t):e.operator==n.left.operator&&Ki(e.left)}function Xi(e,t,n){var r=0,s=e.self();do{if(s===n)return s;if(i(s)&&s.name&&s.name.definition()===t)return s}while(s=e.parent(r++))}function Qi(e){var t=e.scope.resolve();return Wt(e.references,function(e){return t===e.scope.resolve()})}function Zi(e,t){return e.option("unsafe")&&t instanceof ne&&"raw"==t.property&&Fn(t.expression)&&"String"==t.expression.name}function er(e){var t=!1;if(e=e.replace(/\\(u\{[^{}]*\}?|u[\s\S]{0,4}|x[\s\S]{0,2}|[0-9]+|[\s\S])/g,function(e,n){var i=_n(n);if("string"==typeof i)return i;t=!0}),!t)return e}function tr(e,t){return e instanceof mt||e.TYPE===t.TYPE}function nr(e,t){var n=!1,i=new Rt(function(e){return!!n||(e instanceof mt&&nn(e.definition(),t)?n=!0:void 0)}),r=new Rt(function(t){if(n)return!0;if(t instanceof ke&&t!==e){if(!(t.name||Ut(t)||Vt(t))){var s=r.parent();if(s instanceof S&&s.expression===t)return}return t.walk(i),!0}});return e.walk(r),n}e(_,function(e,t){if(!$i[e.operator]||!e.right.is_constant()||e.left.is_constant()||e.left instanceof _&&gn[e.left.operator]>=gn[e.operator]||R(),t.option("sequences")){var n=e.lift_sequences(t);if(n!==e)return n.optimize(t)}if(t.option("assignments")&&Jn[e.operator]){var r=Yi(e.left,t),s=e.right;if(r instanceof mt&&s instanceof c&&"="==s.operator&&r.equals(s.left)){r=r.clone();var o=an(c,e,{operator:"=",left:r,right:an(_,e,{operator:e.operator,left:e.left,right:s.right})});r.fixed&&(r.fixed=function(){return o.right},r.fixed.assigns=[o]);var a=r.definition();return a.references.push(r),a.replaced++,o.optimize(t)}}if(t.option("comparisons"))switch(e.operator){case"===":case"!==":if(Yn(e.left,t)&&e.right.is_defined(t))return Ie.warn("Expression always defined [{start}]",e),hn(e,[e.right,an("==="==e.operator?le:wt,e)]).optimize(t);var u=!0;(e.left.is_string(t)&&e.right.is_string(t)||e.left.is_number(t)&&e.right.is_number(t)||e.left.is_boolean(t)&&e.right.is_boolean(t)||Ji(t,e.left)&&e.left.equals(e.right))&&(e.operator=e.operator.slice(0,2));case"==":case"!=":if(!u&&Yn(e.left,t))e.left=an(Ne,e.left);else if(t.option("typeofs")&&e.left instanceof Xe&&"undefined"==e.left.value&&e.right instanceof Tt&&"typeof"==e.right.operator){var f=e.right.expression;(f instanceof mt?!f.is_declared(t):f instanceof Ue&&t.option("ie"))||(e.right=f,e.left=an(Et,e.left).optimize(t),2==e.operator.length&&(e.operator+="="))}else if(e.left instanceof mt&&e.right instanceof mt&&e.left.definition()===e.right.definition()&&Hi(e.left))return an("="==e.operator[0]?wt:le,e).optimize(t);break;case"&&":case"||":var l=e.left;if(!(l instanceof _))break;if(l.operator!=("&&"==e.operator?"!==":"==="))break;if(!(e.right instanceof _))break;if(l.operator!=e.right.operator)break;if(Yn(l.left,t)&&e.right.left instanceof Ne||l.left instanceof Ne&&Yn(e.right.left,t)){var f=l.right;if(f instanceof c&&"="==f.operator&&(f=f.left),f.has_side_effects(t))break;if(!f.equals(e.right.right))break;return l.operator=l.operator.slice(0,-1),l.left=an(Ne,e),l}}var p=!1,h=t.parent();if(t.option("booleans")){var r=Yi(e.left,t);if(Jn[e.operator]&&!r.has_side_effects(t)){if(r.equals(e.right))return En(h,t.self(),e.left).optimize(t);Ei(t,r)}p=t.in_boolean_context()}if(p)switch(e.operator){case"+":var d=e.left.evaluate(t,!0);if(d&&"string"==typeof d||(d=e.right.evaluate(t,!0))&&"string"==typeof d){Ie.warn("+ in boolean context always true [{start}]",e);var m=[];if(e.left.evaluate(t)instanceof Ie&&m.push(e.left),e.right.evaluate(t)instanceof Ie&&m.push(e.right),m.length<2)return m.push(an(wt,e)),hn(e,m).optimize(t);e.truthy=!0}break;case"==":if(e.left instanceof Xe&&""==e.left.value&&e.right.is_string(t))return an(Tt,e,{operator:"!",expression:e.right}).optimize(t);break;case"!=":if(e.left instanceof Xe&&""==e.left.value&&e.right.is_string(t))return e.right.optimize(t)}if(t.option("comparisons")&&e.is_boolean(t)){if("Binary"!=h.TYPE){var g=an(Tt,e,{operator:"!",expression:e.negate(t)});if(Qn(t,e,g)===g)return g}switch(e.operator){case">":R("<");break;case">=":R("<=")}}if(t.option("conditionals")&&Jn[e.operator]){if(e.left instanceof _&&e.operator==e.left.operator){var v=an(_,e,{operator:e.operator,left:e.left.right,right:e.right}),y=v.transform(t);v!==y&&(e.left=e.left.left,e.right=y)}var b=e.right.tail_node();b instanceof _&&e.operator==b.operator&&Ki(e,t)}if(t.option("strings")&&"+"==e.operator){if(e.right instanceof Xe&&""==e.right.value&&e.left.is_string(t))return e.left.optimize(t);if(e.left instanceof Xe&&""==e.left.value&&e.right.is_string(t))return e.right.optimize(t);if(e.left instanceof _&&"+"==e.left.operator&&e.left.left instanceof Xe&&""==e.left.left.value&&e.right.is_string(t)&&(e.left.right.is_constant()||!e.right.has_side_effects(t)))return e.left=e.left.right,e.optimize(t);var b=e.right.tail_node();b instanceof _&&e.operator==b.operator&&(e.left.is_string(t)&&b.is_string(t)||b.left.is_string(t)&&(e.left.is_constant()||!b.right.has_side_effects(t)))&&Ki(e,t)}if(t.option("evaluate")){var x=!0;switch(e.operator){case"&&":var w=Ti(t,e.left);if(!w)return Ie.warn("Condition left of && always false [{start}]",e),En(h,t.self(),e.left).optimize(t);if(!(w instanceof Ie))return Ie.warn("Condition left of && always true [{start}]",e),hn(e,[e.left,e.right]).optimize(t);if(e.right.evaluate(t,!0)){if((p||"&&"==h.operator&&h.left===t.self())&&!(e.right.evaluate(t)instanceof Ie))return Ie.warn("Dropping side-effect-free && [{start}]",e),e.left.optimize(t)}else{if(p&&!(e.right.evaluate(t)instanceof Ie))return Ie.warn("Boolean && always false [{start}]",e),hn(e,[e.left,an(le,e)]).optimize(t);e.falsy=!0}if("||"==e.left.operator){var S=Ti(t,e.left.right);if(!S)return an(F,e,{condition:e.left.left,consequent:e.right,alternative:e.left.right}).optimize(t)}break;case"??":var k=!0;case"||":var A,w=Ti(t,e.left,k);if(k?null==w:!w)return Ie.warn("Condition left of {operator} always {value} [{start}]",{operator:e.operator,value:k?"nullish":"false",start:e.start}),hn(e,[e.left,e.right]).optimize(t);if(!(w instanceof Ie))return Ie.warn("Condition left of {operator} always {value} [{start}]",{operator:e.operator,value:k?"defined":"true",start:e.start}),En(h,t.self(),e.left).optimize(t);if(k||!(A=e.right.evaluate(t,!0))||A instanceof Ie){if((p||"||"==h.operator&&h.left===t.self())&&!e.right.evaluate(t))return Ie.warn("Dropping side-effect-free {operator} [{start}]",e),e.left.optimize(t)}else{if(p&&!(e.right.evaluate(t)instanceof Ie))return Ie.warn("Boolean || always true [{start}]",e),hn(e,[e.left,an(wt,e)]).optimize(t);e.truthy=!0}if(!k&&"&&"==e.left.operator){var S=Ti(t,e.left.right);if(S&&!(S instanceof Ie))return an(F,e,{condition:e.left.left,consequent:e.left.right,alternative:e.right}).optimize(t)}break;case"+":if(e.left instanceof B&&e.right instanceof _&&"+"==e.right.operator&&e.right.left instanceof B&&e.right.is_string(t)&&(e=an(_,e,{operator:"+",left:an(Xe,e.left,{value:""+e.left.value+e.right.left.value,start:e.left.start,end:e.right.left.end}),right:e.right.right})),e.right instanceof B&&e.left instanceof _&&"+"==e.left.operator&&e.left.right instanceof B&&e.left.is_string(t)&&(e=an(_,e,{operator:"+",left:e.left.left,right:an(Xe,e.right,{value:""+e.left.right.value+e.right.value,start:e.left.right.start,end:e.right.end})})),e.right instanceof Tt&&"-"==e.right.operator&&e.left.is_number(t)){e=an(_,e,{operator:"-",left:e.left,right:e.right.expression});break}if(e.left instanceof Tt&&"-"==e.left.operator&&N()&&e.right.is_number(t)){e=an(_,e,{operator:"-",left:e.right,right:e.left.expression});break}if(t.option("unsafe_math")&&e.left instanceof _&&gn[e.left.operator]==gn[e.operator]&&e.right.is_constant()&&(e.right.is_boolean(t)||e.right.is_number(t))&&e.left.is_number(t)&&!e.left.right.is_constant()&&(e.left.left.is_boolean(t)||e.left.left.is_number(t))){e=an(_,e,{operator:e.left.operator,left:an(_,e,{operator:e.operator,left:e.right,right:e.left.left}),right:e.left.right});break}case"-":if(e.right instanceof Tt&&"-"==e.right.operator&&e.left.is_number(t)&&e.right.expression.is_number(t)){e=an(_,e,{operator:"+",left:e.left,right:e.right.expression});break}case"*":case"/":x=t.option("unsafe_math"),"+"!=e.operator&&["left","right"].forEach(function(n){var i=e[n];if(i instanceof Tt&&"+"==i.operator){var r=i.expression;(r.is_boolean(t)||r.is_number(t)||r.is_string(t))&&(e[n]=r)}});case"&":case"|":case"^":if("-"==e.operator||"/"==e.operator||!e.left.is_boolean(t)&&!e.left.is_number(t)||!e.right.is_boolean(t)&&!e.right.is_number(t)||!N()||e.left instanceof _&&e.left.operator!=e.operator&&gn[e.left.operator]>=gn[e.operator]||(e=Qn(t,e,an(_,e,{operator:e.operator,left:e.right,right:e.left}),e.right instanceof B&&!(e.left instanceof B))),!x||!e.is_number(t))break;if(!(e.right instanceof _&&"%"!=e.right.operator&&gn[e.right.operator]==gn[e.operator]&&e.right.is_number(t)&&("+"!=e.operator||e.right.left.is_boolean(t)||e.right.left.is_number(t)))||"-"==e.operator&&e.left.is_negative_zero()||!e.right.left.is_constant_expression()&&e.right.right.has_side_effects(t)||function(e){var t=!1;return e.walk(new Rt(function(e){if(t)return!0;if(e instanceof c){if(e.left instanceof Ue)return t=!0}else if(e instanceof kt&&kn[e.operator]&&e.expression instanceof Ue)return t=!0})),t}(e.right.right)||"+"!=(e=an(_,e,{operator:O(e.operator,e.right.operator),left:an(_,e.left,{operator:e.operator,left:e.left,right:e.right.left,start:e.left.start,end:e.right.left.end}),right:e.right.right})).operator||e.right.is_boolean(t)||e.right.is_number(t)||(e.right=an(Tt,e.right,{operator:"+",expression:e.right})),e.right instanceof B&&e.left instanceof _&&"%"!=e.left.operator&&gn[e.left.operator]==gn[e.operator]&&e.left.is_number(t))if(e.left.left instanceof B){var r=D(e.operator,e.left.left,e.right,{start:e.left.left.start,end:e.right.end});e=D(e.left.operator,ni(t,r),e.left.right,e)}else if(e.left.right instanceof B){var T=O(e.left.operator,e.operator),b=ni(t,D(T,e.left.right,e.right,e.left));!b.is_constant()||"-"==e.left.operator&&0!=e.right.value&&0==+b.value&&e.left.left.is_negative_zero()||(e=D(e.left.operator,e.left.left,b,e))}break;case"instanceof":if(i(e.right))return hn(e,[e,an(le,e)]).optimize(t)}if(!(h instanceof Tt&&"delete"==h.operator)){if(e.left instanceof Re&&!e.right.is_constant())switch(e.operator){case"+":if(0==e.left.value){if(e.right.is_boolean(t))return an(Tt,e,{operator:"+",expression:e.right}).optimize(t);if(e.right.is_number(t)&&!e.right.is_negative_zero())return e.right}break;case"*":if(1==e.left.value)return an(Tt,e,{operator:"+",expression:e.right}).optimize(t)}if(e.right instanceof Re&&!e.left.is_constant())switch(e.operator){case"+":if(0==e.right.value){if(e.left.is_boolean(t))return an(Tt,e,{operator:"+",expression:e.left}).optimize(t);if(e.left.is_number(t)&&!e.left.is_negative_zero())return e.left}break;case"-":if(0==e.right.value)return an(Tt,e,{operator:"+",expression:e.left}).optimize(t);break;case"/":if(1==e.right.value)return an(Tt,e,{operator:"+",expression:e.left}).optimize(t)}}}if(t.option("typeofs"))switch(e.operator){case"&&":Ai(e.left,e.right,null);break;case"||":Ai(e.left,null,e.right)}if(t.option("unsafe")){var E=I(e.right);if(p&&E&&("=="==e.operator||"!="==e.operator)&&e.left instanceof Re&&0==e.left.value)return("=="==e.operator?an(Tt,e,{operator:"!",expression:e.right}):e.right).optimize(t);var C=I(e.left);if(t.option("comparisons")&&function(){switch(e.operator){case"<=":return E&&e.left instanceof Re&&0==e.left.value;case"<":if(C&&e.right instanceof Re&&0==e.right.value)return!0;case"==":case"!=":return!!E&&(e.left instanceof Re&&-1==e.left.value||e.left instanceof Tt&&"-"==e.left.operator&&e.left.expression instanceof Re&&1==e.left.expression.value)}}()){var P=an(Tt,e,{operator:"!",expression:an(Tt,e,{operator:"~",expression:C?e.left:e.right})});switch(e.operator){case"<":if(C)break;case"<=":case"!=":P=an(Tt,e,{operator:"!",expression:P})}return P.optimize(t)}}return ni(t,e);function O(e,t){switch(e){case"-":return"+"==t?"-":"+";case"/":return"*"==t?"/":"*";default:return t}}function D(e,n,i,r){return"+"==e&&(n.is_boolean(t)||n.is_number(t)||(n=an(Tt,n,{operator:"+",expression:n})),i.is_boolean(t)||i.is_number(t)||(i=an(Tt,i,{operator:"+",expression:i}))),an(_,r,{operator:e,left:n,right:i})}function I(e){return"Call"==e.TYPE&&e.expression instanceof ne&&Ui[e.expression.property]}function N(){return e.left.is_constant()||e.right.is_constant()||!e.left.has_side_effects(t)&&!e.right.has_side_effects(t)}function R(t){if(N()){t&&(e.operator=t);var n=e.left;e.left=e.right,e.right=n}}}),e(ut,function(e){return e}),e(mt,function(e,t){if(!t.option("ie")&&Fn(e)&&(!e.scope.resolve().uses_with||!t.find_parent(Dt)))switch(e.name){case"undefined":return an(Et,e).optimize(t);case"NaN":return an(Pe,e).optimize(t);case"Infinity":return an(be,e).optimize(t)}var n=t.parent();if(t.option("reduce_vars")&&wn(t.self(),n)!==t.self()){var r,s,o,a=e.definition(),c=e.fixed_value(),u=a.single_use&&!(n instanceof S&&n.is_expr_pure(t));if(u)if(i(c)){if(a.scope===e.scope.resolve(!0)&&!a.in_loop||t.option("reduce_funcs")&&1!=a.escaped.depth&&!c.inlined)if(a.redefined())u=!1;else if(Xi(t,a,c))u=!1;else if(c.name&&c.name.definition()!==a)u=!1;else if(c.parent_scope!==e.scope||Sn(a))if(qi(c,t)){if("f"==(u=c.is_constant_expression(e.scope))){var f=e.scope;do{(f instanceof Ae||f instanceof Te)&&(f.inlined=!0)}while(f=f.parent_scope)}}else u=!1;else c.name&&("await"==c.name.name&&Ut(c)||"yield"==c.name.name&&Vt(c))?u=!1:c.has_side_effects(t)?u=!1:t.option("ie")&&c instanceof E&&(u=!1);else u=!1;u&&(c.parent_scope=e.scope)}else(!c||a.recursive_refs>0||!c.is_constant_expression()||c.drop_side_effect_free(t))&&(u=!1);if(u){if(a.single_use=!1,c._squeezed=!0,c.single_use=!0,c instanceof W&&(c=gi(c)),c instanceof Ae&&(c=_i(c)),i(c)){var l=[],f=e.scope;do{if(l.push(f),f===a.scope)break}while(f=f.parent_scope);c.enclosed.forEach(function(e){if(!c.variables.has(e.name))for(var t=0;t<l.length;t++){var n=l[t];if(!sn(n.enclosed,e))return;n.var_names().set(e.name,!0)}})}if(a.recursive_refs>0){var p,h,d=(b=c.clone(!0)).name.definition(),m=b.variables.get(b.name.name),g=m&&m.orig[0];b instanceof E?(p="def_function",h=rt):(p="def_variable",h=pt),g instanceof h||((g=an(h,b.name)).scope=b,b.name=g,(m=b[p](g)).recursive_refs=a.recursive_refs),b.walk(new Rt(function(e){if(e instanceof at){if(e!==g){var t=e.definition();t.orig.push(e),t.eliminated++}}else if(e instanceof mt){var t=e.definition();if(t===d)e.thedef=t=m;else{t.single_use=!1;var n=e.fixed_value();i(n)&&n.name&&n.name.definition()===t&&t.scope===n.name.scope&&c.variables.get(n.name.name)===t&&(n.name=n.name.clone(),e.thedef=t=b.variables.get(n.name.name)||b[p](n.name))}t.references.push(e)}}))}else c instanceof We?(t.push(c),b=c.optimize(t),t.pop()):b=c.optimize(t),b=b.transform(new Nt(function(e,t){return e instanceof We?e:(e=e.clone(),t(e,this),e)}));return a.replaced++,b}if(c&&!1!==(r=e.fixed||a.fixed).should_replace)if(c instanceof yt?Sn(a)||!Qi(a)||function(t){var n=e.scope;for(;n!==t.scope;){if(n instanceof E)return!0;n=n.parent_scope}}(a)||(o=c):(s=c.evaluate(t,!0))!==c&&"function"!=typeof s&&(null===s||"object"!=typeof s||t.option("unsafe_regexp")&&s instanceof RegExp&&!a.cross_loop&&Qi(a))&&(o=xn(s,c)),o){if(void 0===r.should_replace){var _=o.optimize(t).print_to_string().length;x(c)||(_=Math.min(_,c.print_to_string().length));var v=a.name.length;if(t.option("unused")&&!t.exposed(a)){var y=a.references.length-a.replaced-a.assignments;y=Math.min(y,a.references.filter(function(e){return e.fixed===r}).length),v+=(v+2+_)/Math.max(1,y)}r.should_replace=_-Math.floor(v)<t.eval_threshold}var b;if(r.should_replace)return x(c)?(b=o.optimize(t))===o&&(b=b.clone(!0)):(b=Kn(o.optimize(t),c))!==o&&b!==c||(b=b.clone(!0)),a.replaced++,b}}return e;function x(e){var t;return e.walk(new Rt(function(e){if(e instanceof mt&&(t=!0),t)return!0})),t}}),e(_t,function(e,t){if(!t.option("templates"))return e;var n=e.tag;if(!n||Zi(t,n)){for(var i,r=[],s=[],o=0;o<e.strings.length;o++){var a=e.strings[o];if(!n){var c=er(a);c&&(a=m(c))}if(o>0){var u=e.expressions[o-1],f=g(u);if(f){var l,p=s[s.length-1],h=p+f+a;if(n||typeof(l=er(h))==i){s[s.length-1]=l?m(l):h;continue}}r.push(u)}s.push(a),n||(i=typeof c)}if(!n&&s.length>1){if(""==s[s.length-1])return an(_,e,{operator:"+",left:an(_t,e,{expressions:r.slice(0,-1),strings:s.slice(0,-1)}).transform(t),right:r[r.length-1]}).optimize(t);if(""==s[0]){for(var d=an(_,e,{operator:"+",left:an(Xe,e,{value:""}),right:r[0]}),o=1;""==s[o]&&o<r.length;o++)d=an(_,e,{operator:"+",left:d,right:r[o]});return Qn(t,e,an(_,e,{operator:"+",left:d.transform(t),right:an(_t,e,{expressions:r.slice(o),strings:s.slice(o)}).transform(t)}).optimize(t))}}e.expressions=r,e.strings=s}return ni(t,e);function m(e){return e.replace(/\r|\\|`|\${/g,function(e){return"\\"+("\r"==e?"r":e)})}function g(e){var i=e.evaluate(t);if(i!==e&&!(n&&/\r|\\|`/.test(i)||(i=m(""+i)).length>e.print_to_string().length+"${}".length))return i}}),e(Et,function(e,t){if(t.option("unsafe_undefined")){var n=Kt(t).find_variable("undefined");if(n){var i=an(mt,e,{name:"undefined",scope:n.scope,thedef:n});return i.is_undefined=!0,i}}var r=wn(t.self(),t.parent());return r&&tr(r,e)?e:an(Tt,e,{operator:"void",expression:an(Re,e,{value:0})})}),e(be,function(e,t){var n=wn(t.self(),t.parent());return n&&tr(n,e)?e:!t.option("keep_infinity")||n||Kt(t).find_variable("Infinity")?an(_,e,{operator:"/",left:an(Re,e,{value:1}),right:an(Re,e,{value:0})}):e}),e(Pe,function(e,t){var n=wn(t.self(),t.parent());return n&&tr(n,e)?e:n||Kt(t).find_variable("NaN")?an(_,e,{operator:"/",left:an(Re,e,{value:0}),right:an(Re,e,{value:0})}):e});var ir=en("+ - * / % >> << >>> | ^ &"),rr=en("* | ^ &");function sr(e,t){if(!e)return!1;var n=t.parent();return"Call"!=n.TYPE||(n.expression!==t.self()||!(e instanceof mt&&!(e=e.fixed_value()))&&(e instanceof ke&&!e.contains_this()))}function or(e){return e instanceof Me&&"string"==typeof e.key&&!(e instanceof Be&&e.value.contains_super())}function ar(e){var t=e.definition().redefined();return t&&((e=e.clone()).thedef=t),e}function cr(e,t){var n=!1;return t.walk(new Rt(function(t){return!!n||(t instanceof mt&&e.variables.get(t.name)===t.definition()?n=!0:void 0)})),n}function ur(e,t){var n=[];e.references.forEach(function(e){var i=e.fixed;i&&sn(n,i)&&(i.assigns?i.assigns.unshift(t):i.assigns=[t])})}function fr(e,t){var n=an(mt,t),i=an(c,t,{operator:"=",left:n,right:an(Et,t).transform(e)}),r=t.definition();return r.fixed&&(n.fixed=function(){return i.right},n.fixed.assigns=[i],ur(r,i)),r.assignments++,r.references.push(n),i}e(c,function(e,t){if(t.option("dead_code"))if(e.left instanceof Ue){if("="==e.operator){if(e.redundant){var n=[e.left.expression];return e.left instanceof Qe&&n.push(e.left.property),n.push(e.right),hn(e,n).optimize(t)}if(e.left.equals(e.right)&&!e.left.has_side_effects(t))return e.right;var i=e.left.expression;if(i instanceof ke||!t.has_directive("use strict")&&i instanceof B&&!i.may_throw_on_access(t))return e.left instanceof ne?e.right:hn(e,[e.left.property,e.right]).optimize(t)}}else if(e.left instanceof mt&&j(e.left,t)){var r;if("="==e.operator&&e.left.equals(e.right)&&!((r=t.parent())instanceof Tt&&"delete"==r.operator))return e.right;if(e.left.is_immutable())return y();var s,o=e.left.definition(),a=o.scope.resolve(),u=a===t.find_parent(ke),f=0;if(r=t.self(),!a.uses_arguments||!Sn(o)||t.has_directive("use strict"))do{if(s=r,(r=t.parent(f++))instanceof c){if(r.left instanceof mt&&r.left.definition()===o){if(g(f,r,!u))break;return y(o)}if(r.left.match_symbol(function(e){if(e instanceof Ue)return!0}))break}else{if(r instanceof se){if(!u)break;if(g(f,r))break;if(nr(a,[o]))break;return y(o)}if(r instanceof Ye){if(!u)break;if(nr(a,[o]))break;var l;do{if(l=r,(r=t.parent(f++))===a&&$n(r.body,l))return y(o)}while(m(l,r));break}if(r instanceof Pt){if(!(r.name instanceof at))continue;if(r.name.definition()!==o)continue;if(g(f,r))break;return y(o)}}}while(d(s,r))}if(t.option("sequences")){var p=e.lift_sequences(t);if(p!==e)return p.optimize(t)}if(t.option("assignments")){if("="==e.operator&&e.left instanceof mt&&e.right instanceof _){if(e.right.left instanceof mt&&e.right.left.name==e.left.name&&ir[e.right.operator])return v(e.right.right);if(e.right.right instanceof mt&&e.right.right.name==e.left.name&&rr[e.right.operator]&&!e.right.left.has_side_effects(t))return v(e.right.left)}if(("-="==e.operator||"+="==e.operator&&(e.left.is_boolean(t)||e.left.is_number(t)))&&e.right instanceof Re&&1==e.right.value){var h=e.operator.slice(0,-1);return an(Tt,e,{operator:h+h,expression:e.left})}}return ni(t,e);function d(e,t){if(t instanceof _)switch(e){case t.left:return t.right.is_constant_expression(a);case t.right:return!0;default:return!1}if(t instanceof F)switch(e){case t.condition:return t.consequent.is_constant_expression(a)&&t.alternative.is_constant_expression(a);case t.consequent:case t.alternative:return!0;default:return!1}if(t instanceof Ge){var n=t.expressions,i=n.indexOf(e);if(i<0)return!1;for(var r=n.length;--r>i;)if(!n[r].is_constant_expression(a))return!1;return!0}return t instanceof Tt}function m(e,t){return t instanceof b?$n(t.body,e):t instanceof A?$n(t.body,e):t instanceof pe?$n(t.body,e):t instanceof ve?t.body===e||t.alternative===e:t instanceof St?t.bfinally?t.bfinally===e:t.bcatch===e:void 0}function g(n,i,r){var s=e.right;e.right=an(Ne,s);var o=i.may_throw(t);return e.right=s,Zt(t,n,i,a,o,r)}function v(t){var n=e.left.fixed;return n&&(n.to_binary=oe(function(e){return e.left},n)),an(c,e,{operator:e.right.operator+"=",left:e.left,right:t})}function y(n){return n&&(n.fixed=!1),("="!=e.operator?an(_,e,{operator:e.operator.slice(0,-1),left:e.left,right:e.right}):En(t.parent(),e,e.right)).optimize(t)}}),e(F,function(e,t){if(t.option("sequences")&&e.condition instanceof Ge){var n=e.condition.expressions.slice(),i=e.clone();return i.condition=n.pop(),n.push(i),hn(e,n).optimize(t)}if(!t.option("conditionals"))return e;var r=e.condition;if(t.option("booleans")&&!r.has_side_effects(t)&&Ei(t,r),!(r=Ti(t,r)))return Ie.warn("Condition always false [{start}]",e),hn(e,[e.condition,e.alternative]).optimize(t);if(!(r instanceof Ie))return Ie.warn("Condition always true [{start}]",e),hn(e,[e.condition,e.consequent]).optimize(t);var s=Ft(t),o=r.negate(t,s);(s?Xn:Kn)(r,o)===o&&(e=an(F,e,{condition:o,consequent:e.alternative,alternative:e.consequent}),o=r,r=e.condition);var a=e.consequent,u=e.alternative,f=Yi(r,t);if(Ji(t,f)){if(f.equals(a))return an(_,e,{operator:"||",left:r,right:u}).optimize(t);if(f.equals(u))return an(_,e,{operator:"&&",left:r,right:a}).optimize(t)}var l=a.tail_node();if(l instanceof c){var p="="==l.operator,h=p?u.tail_node():u;if((p||a===l)&&h instanceof c&&l.operator==h.operator&&l.left.equals(h.left)&&(p&&l.left instanceof mt||!r.has_side_effects(t)&&A(a)&&A(u)))return an(c,e,{operator:l.operator,left:l.left,right:an(F,e,{condition:r,consequent:T(a),alternative:T(u)})})}var h=u.tail_node();if(l.equals(h))return hn(e,a.equals(u)?[r,a]:[an(F,e,{condition:r,consequent:E(a),alternative:E(u)}),h]).optimize(t);var d,m=function t(n,i,s){var o=n.tail_node();var a=i.tail_node();if(!function e(t,n){if(t.TYPE!=n.TYPE)return;if(t.optional!=n.optional)return;if(t instanceof S){if(-1!=w(t,n))return;return"Call"!=t.TYPE||!(t.expression instanceof Ue||n.expression instanceof Ue)||e(t.expression,n.expression)}if(!(t instanceof Ue))return;var i=t.property;var r=n.property;return(i instanceof Ie?i.equals(r):i==r)&&!(t.expression instanceof Ze||n.expression instanceof Ze)}(o,a))return!s&&an(F,e,{condition:r,consequent:n,alternative:i});var c=o.clone();var u=k(n,o,"expression");var f=k(i,a,"expression");var l=t(u,f);o.expression instanceof Ge&&(l=En(o,o.expression,l));c.expression=l;return c}(a,u,!0);if(m)return m;if(a instanceof S&&u.TYPE==a.TYPE&&(d=w(a,u))>=0&&a.expression.equals(u.expression)&&!r.has_side_effects(t)&&!a.expression.has_side_effects(t)){var i=a.clone(),g=a.args[d];return i.args[d]=g instanceof Je?an(Je,e,{expression:an(F,e,{condition:r,consequent:g.expression,alternative:u.args[d].expression})}):an(F,e,{condition:r,consequent:g,alternative:u.args[d]}),i}if(l instanceof F&&l.alternative.equals(u))return an(F,e,{condition:an(_,e,{left:r,operator:"&&",right:k(a,l,"condition")}),consequent:l.consequent,alternative:Cn(l.alternative,u)});if(l instanceof F&&l.consequent.equals(u))return an(F,e,{condition:an(_,e,{left:o,operator:"||",right:k(a,l,"condition")}),consequent:Cn(l.consequent,u),alternative:l.alternative});if(h instanceof F&&a.equals(h.consequent))return an(F,e,{condition:an(_,e,{left:r,operator:"||",right:k(u,h,"condition")}),consequent:Cn(a,h.consequent),alternative:h.alternative});if(h instanceof F&&a.equals(h.alternative))return an(F,e,{condition:an(_,e,{left:o,operator:"&&",right:k(u,h,"condition")}),consequent:h.consequent,alternative:Cn(a,h.alternative)});if(l instanceof _&&"&&"==l.operator&&l.right.equals(u))return an(_,e,{operator:"&&",left:an(_,e,{operator:"||",left:o,right:k(a,l,"left")}),right:Cn(l.right,u)}).optimize(t);if(l instanceof _&&"||"==l.operator&&l.right.equals(u))return an(_,e,{operator:"||",left:an(_,e,{operator:"&&",left:r,right:k(a,l,"left")}),right:Cn(l.right,u)}).optimize(t);if(h instanceof _&&"&&"==h.operator&&h.right.equals(a))return an(_,e,{operator:"&&",left:an(_,e,{operator:"||",left:r,right:k(u,h,"left")}),right:Cn(a,h.right)}).optimize(t);if(h instanceof _&&"||"==h.operator&&h.right.equals(a))return an(_,e,{operator:"||",left:an(_,e,{operator:"&&",left:o,right:k(u,h,"left")}),right:Cn(a,h.right)}).optimize(t);var v=t.option("booleans")&&t.in_boolean_context();return b(a)?x(u)?y(r):an(_,e,{operator:"||",left:y(r),right:u}).optimize(t):x(a)?b(u)?y(r.negate(t)):an(_,e,{operator:"&&",left:y(r.negate(t)),right:u}).optimize(t):b(u)?an(_,e,{operator:"||",left:y(r.negate(t)),right:a}).optimize(t):x(u)?an(_,e,{operator:"&&",left:y(r),right:a}).optimize(t):(t.option("typeofs")&&Ai(r,a,u),e);function y(e){return e.is_boolean(t)?e:an(Tt,e,{operator:"!",expression:e.negate(t)})}function b(e){return e instanceof wt||v&&e instanceof B&&e.value||e instanceof Tt&&"!"==e.operator&&e.expression instanceof B&&!e.expression.value}function x(e){return e instanceof le||v&&(e instanceof B&&!e.value||e instanceof Tt&&"void"==e.operator&&!e.expression.has_side_effects(t))||e instanceof Tt&&"!"==e.operator&&e.expression instanceof B&&e.expression.value}function w(e,t){var n=e.args,i=t.args,r=n.length;if(r!=i.length)return-2;for(var s=0;s<r;s++)if(!n[s].equals(i[s])){if(n[s]instanceof Je!=i[s]instanceof Je)return-3;for(var o=s+1;o<r;o++)if(!n[o].equals(i[o]))return-2;return s}return-1}function k(e,t,n){if(e===t)return t[n];var i=e.expressions.slice(0,-1);return i.push(t[n]),hn(e,i)}function A(e){return e===e.tail_node()||Wt(e.expressions.slice(0,-1),function(e){return!e.has_side_effects(t)})}function T(e){if(!(e instanceof Ge))return e.right;var t=e.expressions.slice();return t.push(t.pop().right),hn(e,t)}function E(e){return e instanceof Ge?hn(e,e.expressions.slice(0,-1)):an(Re,e,{value:0})}}),e(x,function(e,t){if(!t.option("booleans"))return e;if(t.in_boolean_context())return an(Re,e,{value:+e.value});var n=t.parent();return n instanceof _&&("=="==n.operator||"!="==n.operator)?(Ie.warn("Non-strict equality against boolean: {operator} {value} [{start}]",{operator:n.operator,value:e.value,start:n.start}),an(Re,e,{value:+e.value})):an(Tt,e,{operator:"!",expression:an(Re,e,{value:1-e.value})})}),e(Je,function(e,t){var n=e.expression;return t.option("spreads")&&n instanceof o&&!(t.parent()instanceof Le)?Qt.splice(n.elements.map(function(e){return e instanceof _e?an(Et,e).optimize(t):e})):e}),e(Qe,function(e,t){var n=e.expression,i=e.property,r=Ri(e,t);if(r)return r;if(t.option("properties")){var a=i.evaluate(t);if(a!==i){if("string"==typeof a)if("undefined"==a)a=void 0;else{var c=parseFloat(a);c.toString()==a&&(a=c)}i=e.property=Kn(i,xn(a,i).transform(t));var u=""+a;if(vn(u)&&u.length<=i.print_to_string().length+1)return an(ne,e,{optional:e.optional,expression:n,property:u,quoted:!0}).optimize(t)}}var f,l,p,h,d=t.parent(),m=wn(t.self(),d);if(t.option("arguments")&&n instanceof mt&&T(f=n.definition())&&!n.in_arg&&i instanceof Re&&Math.floor(x=i.value)==x&&(l=f.scope)===function(){var e,n=0;for(;e=t.parent(n++);)if(e instanceof ke){if(e instanceof s)return;if(Bt(e))continue;return p=t.parent(n),e}}()&&l.uses_arguments<(m?2:3)){d instanceof Tt&&"delete"==d.operator&&(f.deleted||(f.deleted=[]),f.deleted[x]=!0);var g=l.argnames[x];if(f.deleted&&f.deleted[x])g=null;else if(g){var _;g instanceof ft&&"await"!=g.name&&n.scope.find_variable(g.name)===(_=g.definition())?(t.has_directive("use strict")||l.name||l.rest||!(p instanceof S&&x<p.args.length&&Wt(p.args.slice(0,x+1),function(e){return!(e instanceof Je)}))||!Wt(l.argnames,function(e){return e instanceof ft}))&&(P()||_.assignments||_.orig.length>1)&&(g=null):g=null}else if((m||!P())&&x<l.argnames.length+5&&t.drop_fargs(l,p)&&!l.rest)for(;x>=l.argnames.length;)g=l.make_var(ft,l,"argument_"+l.argnames.length),l.argnames.push(g);if(g&&Jt(function(e){return e.name===g.name},l.argnames)===g){m&&f.reassigned--;var v=an(mt,g);return v.reference(),g.unused=void 0,v}}if(m)return e;if(t.option("sequences")&&"Call"!=d.TYPE&&!(d instanceof de&&d.init===e)){var y=Li(e,t);if(y!==e)return y.optimize(t)}if(a!==i){var b=e.flatten_object(u,t);b&&(n=e.expression=b.expression,i=e.property=b.property)}if(t.option("properties")&&t.option("side_effects")&&i instanceof Re&&n instanceof o&&Wt(h=n.elements,function(e){return!(e instanceof Je)})){var x=i.value,w=h[x];if(sr(w,t)){for(var k=w instanceof _e,A=!k,E=[],C=h.length;--C>x;){var c=h[C].drop_side_effect_free(t);c&&(E.unshift(c),A&&c.has_side_effects(t)&&(A=!1))}for(A||E.unshift(w);--C>=0;){var c=h[C].drop_side_effect_free(t);c?E.unshift(c):k?E.unshift(an(_e,h[C])):x--}return A?(E.push(w),hn(e,E).optimize(t)):an(Qe,e,{expression:an(o,n,{elements:E}),property:an(Re,i,{value:x})})}}return ni(t,e);function P(){return!t.option("reduce_vars")||f.reassigned}}),Te.DEFMETHOD("contains_super",function(){var e=!1,t=this;return t.walk(new Rt(function(n){return!!e||(n instanceof Ze?e=!0:n!==t&&n instanceof We&&!Bt(n)||void 0)})),e}),function(e){e(a,un),e(u,un),e(Ie,function(){var e=!1,t=this;return t.walk(new Rt(function(n){return!!e||(n instanceof yt?e=!0:n!==t&&n instanceof We&&!Bt(n)||void 0)})),e})}(function(e,t){e.DEFMETHOD("contains_this",t)}),Ue.DEFMETHOD("flatten_object",function(e,t){if(t.option("properties")&&"__proto__"!==e){var n=this.expression;if(n instanceof Le)for(var i=n.properties,r=i.length;--r>=0;){var s=i[r];if(s.key===e){if(!Wt(i,or))return;if(!sr(s.value,t))return;for(var c,f,l=[],p=0;p<i.length;p++){var h=i[p].value;if(i[p]instanceof Be){var d,m=!(h.uses_arguments||Vt(h)||h.contains_this());if(m){f||(f=t.find_parent(We));var g=ji(t,f);h.each_argname(function(e){g[e.name]&&(m=!1)})}if(m)d=Ut(h)?u:a;else{if(!(r!=p||(c=t.parent())instanceof S&&c.expression===this))return;d=h.CTOR}h=an(d,h)}l.push(h)}return an(Qe,this,{expression:an(o,n,{elements:l}),property:an(Re,this,{value:r})})}}}}),e(ne,function(e,t){"arguments"!=e.property&&"caller"!=e.property||Ie.warn("Function.prototype.{property} not supported [{start}]",e);var n=t.parent();if(wn(t.self(),n))return e;var i=Ri(e,t);if(i)return i;if(t.option("sequences")&&"Call"!=n.TYPE&&!(n instanceof de&&n.init===e)){var r=Li(e,t);if(r!==e)return r.optimize(t)}if(t.option("unsafe_proto")&&e.expression instanceof ne&&"prototype"==e.expression.property){var s=e.expression.expression;if(Fn(s))switch(s.name){case"Array":e.expression=an(o,e.expression,{elements:[]});break;case"Function":e.expression=an(ge,e.expression,{argnames:[],body:[]}).init_vars(s.scope);break;case"Number":e.expression=an(Re,e.expression,{value:0});break;case"Object":e.expression=an(Le,e.expression,{properties:[]});break;case"RegExp":e.expression=an($e,e.expression,{value:/t/});break;case"String":e.expression=an(Xe,e.expression,{value:""})}}var a=e.flatten_object(e.property,t);return a?a.optimize(t):ni(t,e)}),e(X,function(e,t){return t.option("rests")&&e.rest instanceof X?an(X,e,{elements:e.elements.concat(e.rest.elements),rest:e.rest.rest}):e}),e(Q,function(e,t){if(t.option("objects")){var n=e.key;n instanceof Ie&&(n=n.evaluate(t))!==e.key&&(e.key=""+n)}return e}),e(Le,function(e,t){if(!t.option("objects"))return e;var n=!1,i=!1,r=!1,s=t.has_directive("use strict"),o=[],a=new Yt,c=[];if(e.properties.forEach(function(e){if(!(e instanceof Je))return l(e);i=!0;var s=e.expression;t.option("spreads")&&s instanceof Le&&Wt(s.properties,function(e){return!(e instanceof je)&&(!(e instanceof Je)&&("__proto__"!==e.key||(e instanceof Ve||!e.value.has_side_effects(t))))})?(n=!0,s.properties.forEach(function(e){var n=e.key,i=e instanceof Ve;if("__proto__"===n){if(!i)return;n=xn(n,e)}l(i?an(Me,e,{key:n,value:an(Et,e).optimize(t)}):e)})):(r=!0,f(),c.push(e))}),f(),!n)return e;if(i&&r&&1==c.length){var u=c[0];u instanceof Fe&&u.key instanceof Re&&(u.key=""+u.key.value)}return an(Le,e,{properties:c});function f(){o.forEach(function(t){var i=a.get(t);switch(i.length){case 0:return;case 1:return c.push(i[0])}n=!0;var o=s&&!r&&i.pop();c.push(1==i.length?i[0]:an(Me,e,{key:i[0].key,value:hn(e,i.map(function(e){return e.value}))})),o&&c.push(o),i.length=0}),o=[],a=new Yt}function l(e){var n=e.key;n instanceof Ie&&(i=!0,(n=n.evaluate(t))===e.key||"__proto__"===n?r=!0:n=e.key=""+n),or(e)?(e.value.has_side_effects(t)&&f(),o.push(n),a.add(n,e)):(f(),c.push(e)),i&&!r&&"string"==typeof n&&ae.test(n)&&(r=!0,a.has(n)&&(e=a.get(n)[0]),e.key=an(Re,e,{value:+n}))}}),function(e){function t(e,t,n,i,r,s,o){for(var a=[],c=s.expressions,u=n,f=c.length-(o||0),l=f;--f>=0;u=!0,r=!1){var p=c[f].try_inline(e,t,u,i,r);p&&(h(),a.push(p))}if(0!=a.length)return h(),!n&&a[0]instanceof Ye&&(a[0]=an(He,s,{value:a[0].body})),an(b,s,{body:a.reverse()});function h(){l>f+1&&a.push(an(Ye,s,{body:hn(s,c.slice(f+1,l))})),l=f}}e(Ie,rn),e(c,rn),e(m,function(e,t,n,i){if(e.option("awaits")){var r=this,s=r.expression.try_inline(e,t,n,i,!0);if(s)return n||vi(s,function(t){t.in_bool=!1;var n=t.value;n instanceof m||(t.value=an(m,r,{expression:n||an(Et,t).transform(e)}))}),ui(s)?s:an(b,r,{body:[s,an(Ye,r,{body:an(m,r,{expression:an(Re,r,{value:0})})})]})}}),e(_,function(e,t,n,i,r){if(void 0!==n){var s=this,o=s.operator;if(Jn[o]){var a=s.right.try_inline(e,t,n,i,r);if(a)return an(ve,s,{condition:function(t){switch(o){case"&&":return t;case"||":return t.negate(e);case"??":return an(_,s,{operator:"==",left:an(Ne,s),right:t})}}(s.left),body:a,alternative:n?null:an(He,s,{value:an(Et,s).transform(e)})})}}}),e(b,function(e,t,n,i){if(!n&&this.variables){var r=this.body,s=r.length-1;if(!(s<0)){var o=r[s].try_inline(e,this,n,i);if(o)return r[s]=o,this}}}),e(S,function(e,t,n,i,r){if(!(e.option("inline")<4)){var s=this;if(!s.is_expr_pure(e)){var a=s.expression;if(a instanceof Te&&!(a.name||a.uses_arguments||a.pinned()||Vt(a))){var c=Bt(a);if(!(c&&a.value||a.body[0]instanceof ee||a.contains_this())){t||(t=Kt(e));var u=new Yt;for(u.set("NaN",!0);!(t instanceof We);)t.variables.each(function(e){u.set(e.name,!0)}),t=t.parent_scope;if(nn(t,e.stack)&&!(t.pinned()&&a.variables.size()>(c?0:1))){if(t instanceof xt){if(a.variables.size()>(c?0:1)){if(!e.toplevel.vars)return;if(a.functions.size()>0&&!e.toplevel.funcs)return}u.set("arguments",!0)}var f=!r&&Ut(a);if(f){if(!e.option("awaits"))return;if(!Ut(t))return;if(s.may_throw(e))return}var l=t.var_names();if(i&&(i=[]),a.variables.all(function(e,t){return i&&i.push(e),!u.has(t)&&!l.has(t)||!c&&"arguments"==t&&1==e.orig.length})&&!(i&&i.length>0&&nr(a,i))){var p=!0;if(Wt(a.argnames,function(e){var t=!1,n=new Rt(function(e){return!!t||(e instanceof H?cr(a,e.value)?t=!0:(e.name.walk(n),!0):e instanceof Q?e.key instanceof Ie&&cr(a,e.key)?t=!0:(e.value.walk(n),!0):e instanceof ft&&!Wt(e.definition().orig,function(e){return!(e instanceof ct)})?t=!0:void 0)});return e.walk(n),!t&&(e instanceof ft||(p=!1),!0)})){if(a.rest){if(cr(a,a.rest))return;p=!1}var h;if(n?h=function(e){var t=!1;return e.walk(new Rt(function(e){return!!t||(f&&(e instanceof m||e instanceof AST_ForAwaitOf)||e instanceof He?t=!0:e instanceof We||void 0)})),!t}:(r||Ut(a)||Gt(t))&&(h=function(e){var t=!1,n=new Rt(function(e){return!!t||(e instanceof He?t=!0:e instanceof We||void 0)});return e.walk(new Rt(function(e){return!!t||(e instanceof St?(e.bfinally&&Wt(e.body,function(e){return e.walk(n),!t})&&e.bcatch&&e.bcatch.walk(n),!0):e instanceof We||void 0)})),!t}),(!h||Wt(a.body,h))&&Fi(a,ji(e,t))){a.functions.each(function(e,n){t.functions.set(n,e)});var d=[];a.variables.each(function(n,r){if((c||"arguments"!=r||1!=n.orig.length)&&(l.set(r,!0),t.enclosed.push(n),t.variables.set(r,n),n.single_use=!1,i&&n.references.length!=n.replaced&&n.orig.length!=n.eliminated&&(1!=n.orig.length||!a.functions.has(r))&&Wt(n.orig,function(e){return!(e instanceof ot)&&(e instanceof ft?!e.unused&&n.scope.resolve()!==a:!(e instanceof ht))}))){var s=n.orig[0];s instanceof it||d.push(an(Ye,s,{body:fr(e,ar(s))}))}});var g=Object.create(null),_=new Yt;if(p&&Wt(s.args,function(e){return!(e instanceof Je)})){var v=s.args.slice();a.argnames.forEach(function(t){var n=v.shift();if(t.unused)n&&d.push(an(Ye,s,{body:n}));else{var i=an(Pt,s,{name:t.convert_symbol(gt,x),value:n||an(Et,s).transform(e)});t instanceof ft&&ur(t.definition(),i),d.push(an(Ct,s,{definitions:[i]}))}}),v.length&&d.push(an(Ye,s,{body:hn(s,v)}))}else d.push(an(Ct,s,{definitions:[an(Pt,s,{name:an(X,s,{elements:a.argnames.map(function(e){return e.unused?an(_e,e):e.convert_symbol(gt,x)}),rest:a.rest&&a.rest.convert_symbol(gt,x)}),value:an(o,s,{elements:s.args.slice()})})]}));_.each(function(e,t){var n=g[t];[].unshift.apply(n.orig,e),n.eliminated+=e.length}),[].push.apply(d,i?a.body.filter(function(e){if(!(e instanceof Ae))return!0;var t=an(gt,ar(e.name)),n=t.definition();return n.fixed=!1,n.orig.push(t),n.eliminated++,d.push(an(Ct,e,{definitions:[an(Pt,e,{name:t,value:_i(e,!0)})]})),!1}):a.body);var y=an(b,s,{body:d});return n||(f&&vi(y,function(e){var t=e.value;Yn(t)||(e.value=an(m,s,{expression:t}))}),d.push(an(He,s,{value:Gt(t)?an(Et,s).transform(e):null}))),y}}}}}}}}function x(e,t){var n=t.definition();g[n.id]=n,_.add(n.id,e)}}),e(F,function(e,t,n,i,r){var s=this.consequent.try_inline(e,t,n,i,r),o=this.alternative.try_inline(e,t,n,i,r);if(s||o)return an(ve,this,{condition:this.condition,body:s||a(this.consequent),alternative:o||a(this.alternative)});function a(e){return n?an(Ye,e,{body:e}):an(He,e,{value:e})}}),e(he,function(e,t,n,i){var r=this.body.try_inline(e,t,!0,!0);r&&(this.body=r);var s=this.init;return s&&(s=s.try_inline(e,t,!0,i))?(this.init=null,s instanceof b?(s.body.push(this),s):an(b,s,{body:[s,this]})):r&&this}),e(de,function(e,n,i,r){var s=this.body.try_inline(e,n,!0,!0);s&&(this.body=s);var o=this.object;if(o instanceof Ge){var a=t(e,n,!0,r,!1,o,1);if(a)return this.object=o.tail_node(),a.body.push(this),a}return s&&this}),e(ve,function(e,n,i,r){var s=this.body.try_inline(e,n,i,r);s&&(this.body=s);var o=this.alternative;o&&(o=o.try_inline(e,n,i,r))&&(this.alternative=o);var a=this.condition;if(a instanceof Ge){var c=t(e,n,!0,r,!1,a,1);if(c)return this.condition=a.tail_node(),c.body.push(this),c}return(s||o)&&this}),e(xe,function(e,t,n,i){var r=this.body.try_inline(e,t,!0,!0);if(r)return this.body=r,this}),e(Se,function(e,t,n,i){var r=this.body.try_inline(e,t,n,i);if(r){if(this.body instanceof xe&&r instanceof b){var s=r.body.pop();return this.body=s,r.body.push(this),r}return this.body=r,this}}),e(Oe,rn),e(He,function(e,t,n,i){var r=this.value;return r&&r.try_inline(e,t,void 0,"try"===i)}),e(Ge,function(e,n,i,r,s){return t(e,n,i,r,s,this)}),e(Ye,function(e,t,n,i){for(var r=this.body;r instanceof Tt;){var s=r.operator;if(kn[s])break;if("void"==s)break;r=r.expression}return n||Yn(r)||(r=an(Tt,this,{operator:"void",expression:r})),r.try_inline(e,t,n||!1,i)}),e(Tt,function(e,t,n,i,r){var s=this,o=s.operator;if(!kn[o]){n||"void"!=o||(n=!1);var a=s.expression.try_inline(e,t,n,i,r);if(a)return n||vi(a,function(t){t.in_bool=!1;var n=t.value;"void"==o&&Yn(n)||(t.value=an(Tt,s,{operator:o,expression:n||an(Et,t).transform(e)}))}),a}}),e(Dt,function(e,n,i,r){var s=this.body.try_inline(e,n,i,r);s&&(this.body=s);var o=this.expression;if(o instanceof Ge){var a=t(e,n,!0,r,!1,o,1);if(a)return this.expression=o.tail_node(),a.body.push(this),a}return s&&this}),e(It,function(e,t,n,i){if(e.option("yields")&&this.nested){var r=this.expression;if("Call"==r.TYPE){var s=r.expression;switch(s.CTOR){case h:s=an(l,s);break;case AST_GeneratorFunction:s=an(ge,s);break;default:return}return(r=r.clone()).expression=s,r.try_inline(e,t,n,i)}}})}(function(e,t){e.DEFMETHOD("try_inline",t)}),e(He,function(e,t){var n=e.value;return n&&t.option("side_effects")&&Yn(n,t)&&!Gt(t.find_parent(We))&&(e.value=null),e})}(function(e,t){e.DEFMETHOD("optimize",function(e){if(this._optimized)return this;if(e.has_directive("use asm"))return this;var n=t(this,e);return n._optimized=!0,n})}),{Compressor:An}}),define("skylark-uglifyjs/sourcemap",["./utils"],function(e){"use strict";const{characters:t,HOP:n,Dictionary:i}=e;var r=t("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),s=r.reduce(function(e,t,n){return e[t]=n,e},Object.create(null));function o(e){var t="";e=Math.abs(e)<<1|e>>>31;do{var n=31&e;(e>>>=5)&&(n|=32),t+=r[n]}while(e);return t}function a(){var e=new i,t=[];return t.index=function(n){var i=e.get(n);return i>=0||(i=t.length,t.push(n),e.set(n,i)),i},t}return{SourceMap:function(e){var t,n=a(),r=e.includeSources&&new i,c=a(),u="";e.orig&&Object.keys(e.orig).forEach(function(t){var n=e.orig[t],i=[0,0,1,0,0];if(e.orig[t]={names:n.names,mappings:n.mappings.split(/;/).map(function(e){return i[0]=0,e.split(/,/).map(function(e){return i.slice(0,function(e,t){for(var n=0,i=0,r=0,o=0;r<t.length;r++){var a=s[t[r]];n+=(31&a)<<i,32&a?i+=5:(e[o++]+=1&n?2147483648|-(n>>1):n>>1,n=i=0)}return o}(i,e))})}),sources:n.sources},r&&n.sourcesContent)for(var o=0;o<n.sources.length;o++){var a=n.sourcesContent[o];a&&r.set(n.sources[o],a)}});var f=1,l=0,p=0,h=1,d=0,m=0;return{add:e.orig?function(t,n,i,r,s,o){var a=e.orig[t];if(a){var c,u=a.mappings[r-1];if(!u)return;for(var f=0;f<u.length;f++){var l=u[f][0];if(s>=l&&(c=u[f]),s<=l)break}!c||c.length<4?t=null:(t=a.sources[c[1]],r=c[2],s=c[3],c.length>4&&(o=a.names[c[4]]))}g(t,n,i,r,s,o)}:g,setSourceContent:r?function(e,t){r.has(e)||r.set(e,t)}:noop,toString:function(){return JSON.stringify({version:3,file:e.filename||void 0,sourceRoot:e.root||void 0,sources:n,sourcesContent:r?n.map(function(e){return r.get(e)||null}):void 0,names:c,mappings:u})}};function g(i,r,s,a,g,_){if(null!=t||null!=i){if(t=i,f<r){l=0;do{u+=";"}while(++f<r)}else u&&(u+=",");if(u+=o(s-l),l=s,null!=i){var v=n.index(i);if(u+=o(v-p),p=v,u+=o(a-h),h=a,u+=o(g-d),d=g,e.names&&null!=_){var y=c.index(_);u+=o(y-m),m=y}}}}}}}),define("skylark-uglifyjs/propmangle",["./utils","./ast","./scope"],function(e,t,n){"use strict";const{defaults:i,push_uniq:r,Dictionary:s}=e,{base54:o}=n,{AST_Binary:a,AST_Call:c,AST_ClassPrivateProperty:u,AST_Conditional:f,AST_Dot:l,AST_DotHash:p,AST_ObjectKeyVal:h,AST_ObjectProperty:d,AST_PrivateMethod:m,AST_PrivateGetter:g,AST_PrivateSetter:_,AST_PrivateIn:v,AST_Sequence:y,AST_String:b,AST_Sub:x,TreeWalker:w,_KEY:S,_MANGLEPROP:k,walk:A}=t;function T(){var e=new s;["NaN","null","true","false","Infinity","-Infinity","undefined"].forEach(n),["encodeURI","encodeURIComponent","escape","eval","decodeURI","decodeURIComponent","isFinite","isNaN","parseFloat","parseInt","unescape"].forEach(n);var t=Function("return this")();return["Array","ArrayBuffer","Atomics","BigInt","Boolean","console","DataView","Date","Error","Function","Int8Array","Intl","JSON","Map","Math","Number","Object","Promise","Proxy","Reflect","RegExp","Set","String","Symbol","WebAssembly"].forEach(function(e){n(e);var i=t[e];if(i&&(Object.getOwnPropertyNames(i).map(n),"function"==typeof i)){i.__proto__&&Object.getOwnPropertyNames(i.__proto__).map(n),i.prototype&&Object.getOwnPropertyNames(i.prototype).map(n);try{Object.getOwnPropertyNames(new i).map(n)}catch(e){try{Object.getOwnPropertyNames(i()).map(n)}catch(e){}}}}),(T=function(){return e.clone()})();function n(t){e.set(t,!0)}}function E(e,t){e instanceof f?(E(e.consequent,t),E(e.alternative,t)):e instanceof y?E(e.tail_node(),t):e instanceof b&&t(e.value)}return{mangle_properties:function(e,t){var n=(t=i(t,{builtins:!1,cache:null,debug:!1,domprops:!1,keep_quoted:!1,regex:null,reserved:null},!0)).builtins?new s:T();t.domprops||"undefined"==typeof domprops||domprops.forEach(function(e){n.set(e,!0)});Array.isArray(t.reserved)&&t.reserved.forEach(function(e){n.set(e,!0)});var r,c=-1;t.cache?(r=t.cache.props).each(function(e){n.set(e,!0)}):r=new s;var u,p=t.regex,h=!1!==t.debug;h&&(u=!0===t.debug?"":t.debug);var m=new s,g=n.clone();function _(e){return!g.has(e)&&!/^-?[0-9]+(\.[0-9]+)?(e[+-][0-9]+)?$/.test(e)}function v(e){return n.has(e)?(AST_Node.info("Preserving reserved property {this}",e),!1):p&&!p.test(e)?(AST_Node.info("Preserving excluded property {this}",e),!1):r.has(e)||m.has(e)}function S(e){_(e)&&m.set(e,!0),v(e)||g.set(e,!0)}function k(e){if(!v(e))return e;var t=r.get(e);if(!t){if(h){var n="_$"+e+"$"+u+"_";_(n)&&(t=n)}if(!t)do{t=o(++c)}while(!_(t));/^#/.test(e)&&(t="#"+t),r.set(e,t)}return AST_Node.info("Mapping property {name} to {mangled}",{mangled:t,name:e}),t}function A(e){e instanceof y?A(e.tail_node()):e instanceof b?e.value=k(e.value):e instanceof f&&(A(e.consequent),A(e.alternative))}e.walk(new w(function(e){if("Call"==e.TYPE){var t=e.expression;if(t instanceof l)switch(t.property){case"defineProperty":case"getOwnPropertyDescriptor":if(e.args.length<2)break;if(!((t=t.expression)instanceof AST_SymbolRef))break;if("Object"!=t.name)break;if(!t.definition().undeclared)break;E(e.args[1],S);break;case"hasOwnProperty":if(e.args.length<1)break;E(e.args[0],S)}}else e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof d?e.key instanceof AST_Node?E(e.key,S):S(e.key):e instanceof l?is_lhs(e,this.parent())&&S(e.property):e instanceof x&&is_lhs(e,this.parent())&&E(e.property,S)})),e.walk(new w(function(e){if(e instanceof a)"in"==e.operator&&A(e.left);else if("Call"==e.TYPE){var n=e.expression;if(n instanceof l)switch(n.property){case"defineProperty":case"getOwnPropertyDescriptor":if(e.args.length<2)break;if(!((n=n.expression)instanceof AST_SymbolRef))break;if("Object"!=n.name)break;if(!n.definition().undeclared)break;A(e.args[1]);break;case"hasOwnProperty":if(e.args.length<1)break;A(e.args[0])}}else e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof d?e.key instanceof AST_Node?A(e.key):e.key=k(e.key):e instanceof l?e.property=k(e.property):e instanceof x&&(t.keep_quoted||A(e.property))}))},reserve_quoted_keys:function(e,t){function n(e){r(t,e)}e.walk(new w(function(e){e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof d?e.key instanceof AST_Node?E(e.key,n):e.start&&e.start.quote&&n(e.key):e instanceof l?e.quoted&&n(e.property):e instanceof x&&E(e.property,n)}))}}}),define("skylark-uglifyjs/minify",["./utils","./ast","./parse","./output","./compress","./sourcemap","./propmangle"],function(e,t,n,i,r,s,o){"use strict";const{defaults:a,HOP:c}=e,{AST_Toplevel:u,AST_Node:f,walk:l,AST_Scope:p}=t,{parse:h}=n,{OutputStream:d}=i,{Compressor:m}=r,{SourceMap:g}=s,{mangle_properties:_,reserve_quoted_keys:v}=o;var y,b;function x(e,t){for(var n=t.end.comments_after,i=n.length;--i>=0;){var r=n[i];if("comment1"!=r.type)break;var s=/^# ([^\s=]+)=(\S+)\s*$/.exec(r.value);if(!s)break;if("sourceMappingURL"==s[1]){if(!(s=/^data:application\/json(;.*?)?;base64,([^,]+)$/.exec(s[2])))break;return y(s[2])}}f.warn("inline source map not found: {name}",{name:e})}function w(e){try{return JSON.parse(e)}catch(t){throw new Error("invalid input source map: "+e)}}function S(e,t,n){n.forEach(function(n){t[n]&&("object"!=typeof t[n]&&(t[n]={}),e in t[n]||(t[n][e]=t[e]))})}function k(e){e&&("props"in e?e.props instanceof Dictionary||(e.props=Dictionary.fromObject(e.props)):e.props=new Dictionary)}function A(e){return{props:e.props.toObject()}}return"undefined"==typeof Buffer?(y=atob,b=btoa):void 0===Buffer.alloc?(y=function(e){return new Buffer(e,"base64").toString()},b=function(e){return new Buffer(e).toString("base64")}):(y=function(e){return Buffer.from(e,"base64").toString()},b=function(e){return Buffer.from(e).toString("base64")}),{minify:function(e,t){try{(t=a(t,{annotations:void 0,compress:{},enclose:!1,expression:!1,ie:!1,ie8:!1,keep_fargs:!1,keep_fnames:!1,mangle:{},module:!1,nameCache:null,output:{},parse:{},rename:void 0,sourceMap:!1,timings:!1,toplevel:!(!t||!t.module),v8:!1,validate:!1,warnings:!1,webkit:!1,wrap:!1},!0)).validate&&f.enable_validation();var n,i=t.timings&&{start:Date.now()};void 0!==t.annotations&&S("annotations",t,["compress","output"]),t.expression&&S("expression",t,["compress","parse"]),t.ie8&&(t.ie=t.ie||t.ie8),t.ie&&S("ie",t,["compress","mangle","output","rename"]),t.keep_fargs&&S("keep_fargs",t,["compress","mangle","rename"]),t.keep_fnames&&S("keep_fnames",t,["compress","mangle","rename"]),t.module&&S("module",t,["compress","parse"]),t.toplevel&&S("toplevel",t,["compress","mangle","rename"]),t.v8&&S("v8",t,["mangle","output","rename"]),t.webkit&&S("webkit",t,["compress","mangle","output","rename"]),t.mangle&&(t.mangle=a(t.mangle,{cache:t.nameCache&&(t.nameCache.vars||{}),eval:!1,ie:!1,keep_fargs:!1,keep_fnames:!1,properties:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1},!0),t.mangle.properties&&("object"!=typeof t.mangle.properties&&(t.mangle.properties={}),t.mangle.properties.keep_quoted&&(n=t.mangle.properties.reserved,Array.isArray(n)||(n=[]),t.mangle.properties.reserved=n),!t.nameCache||"cache"in t.mangle.properties||(t.mangle.properties.cache=t.nameCache.props||{})),k(t.mangle.cache),k(t.mangle.properties.cache)),void 0===t.rename&&(t.rename=t.compress&&t.mangle),t.sourceMap&&(t.sourceMap=a(t.sourceMap,{content:null,filename:null,includeSources:!1,names:!0,root:null,url:null},!0));var r,s=[];if(t.warnings&&f.log_function(function(e){s.push(e)},"verbose"==t.warnings),i&&(i.parse=Date.now()),t.parse=t.parse||{},e instanceof f)r=e;else{"string"==typeof e&&(e=[e]),t.parse.toplevel=null;var o=t.sourceMap&&t.sourceMap.content;for(var l in"string"==typeof o&&"inline"!=o&&(o=w(o)),o&&(t.sourceMap.orig=Object.create(null)),e)if(c(e,l))if(t.parse.filename=l,t.parse.toplevel=r=h(e[l],t.parse),"inline"==o){var p=x(l,r);p&&(t.sourceMap.orig[l]=w(p))}else o&&(t.sourceMap.orig[l]=o)}t.parse.expression&&(r=r.wrap_expression()),n&&v(r,n),["enclose","wrap"].forEach(function(n){var i=t[n];if(i){var s=r.print_to_string().slice(0,-1);r=r[n](i),e[r.start.file]=r.print_to_string().replace(s,"")}}),t.validate&&r.validate_ast(),i&&(i.rename=Date.now()),t.rename&&(r.figure_out_scope(t.rename),r.expand_names(t.rename)),i&&(i.compress=Date.now()),t.compress&&(r=new m(t.compress).compress(r),t.validate&&r.validate_ast()),i&&(i.scope=Date.now()),t.mangle&&r.figure_out_scope(t.mangle),i&&(i.mangle=Date.now()),t.mangle&&(r.compute_char_frequency(t.mangle),r.mangle_names(t.mangle)),i&&(i.properties=Date.now()),n&&v(r,n),t.mangle&&t.mangle.properties&&_(r,t.mangle.properties),t.parse.expression&&(r=r.unwrap_expression()),i&&(i.output=Date.now());var y={},T=a(t.output,{ast:!1,code:!0});if(T.ast&&(y.ast=r),T.code){if(t.sourceMap&&(T.source_map=g(t.sourceMap),t.sourceMap.includeSources)){if(e instanceof u)throw new Error("original source content unavailable");for(var l in e)c(e,l)&&T.source_map.setSourceContent(l,e[l])}delete T.ast,delete T.code;var E=d(T);if(r.print(E),y.code=E.get(),t.sourceMap){y.map=T.source_map.toString();var C=t.sourceMap.url;C&&(y.code=y.code.replace(/\n\/\/# sourceMappingURL=\S+\s*$/,""),y.code+="inline"==C?"\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,"+b(y.map):"\n//# sourceMappingURL="+C)}}return t.nameCache&&t.mangle&&(t.mangle.cache&&(t.nameCache.vars=A(t.mangle.cache)),t.mangle.properties&&t.mangle.properties.cache&&(t.nameCache.props=A(t.mangle.properties.cache))),i&&(i.end=Date.now(),y.timings={parse:.001*(i.rename-i.parse),rename:.001*(i.compress-i.rename),compress:.001*(i.scope-i.compress),scope:.001*(i.mangle-i.scope),mangle:.001*(i.properties-i.mangle),properties:.001*(i.output-i.properties),output:.001*(i.end-i.output),total:.001*(i.end-i.start)}),s.length&&(y.warnings=s),y}finally{f.log_function(),f.disable_validation()}}}}),define("skylark-uglifyjs/main",["./minify"],function(e){return e}),define("skylark-uglifyjs",["skylark-uglifyjs/main"],function(e){return e}),define("skylark-rjs/uglifyjs",["skylark-uglifyjs"],function(e){return e}),define("skylark-sourcemap/util",[],function(){"use strict";var e=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,t=/^data:.+\,.+$/;function n(t){var n=t.match(e);return n?{scheme:n[1],auth:n[2],host:n[3],port:n[4],path:n[5]}:null}function i(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function r(e){var t=e,r=n(e);if(r){if(!r.path)return e;t=r.path}for(var s,a=o(t),c=t.split(/\/+/),u=0,f=c.length-1;f>=0;f--)"."===(s=c[f])?c.splice(f,1):".."===s?u++:u>0&&(""===s?(c.splice(f+1,u),u=0):(c.splice(f,2),u--));return""===(t=c.join("/"))&&(t=a?"/":"."),r?(r.path=t,i(r)):t}function s(e,s){""===e&&(e="."),""===s&&(s=".");var o=n(s),a=n(e);if(a&&(e=a.path||"/"),o&&!o.scheme)return a&&(o.scheme=a.scheme),i(o);if(o||s.match(t))return s;if(a&&!a.host&&!a.path)return a.host=s,i(a);var c="/"===s.charAt(0)?s:r(e.replace(/\/+$/,"")+"/"+s);return a?(a.path=c,i(a)):c}function o(t){return"/"===t.charAt(0)||e.test(t)}var a=!("__proto__"in Object.create(null));function c(e){return e}function u(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var n=t-10;n>=0;n--)if(36!==e.charCodeAt(n))return!1;return!0}function f(e,t){return e===t?0:null===e?1:null===t?-1:e>t?1:-1}return{toSetString:a?c:function(e){if(u(e))return"$"+e;return e},fromSetString:a?c:function(e){if(u(e))return e.slice(1);return e},compareByOriginalPositions:function(e,t,n){var i=f(e.source,t.source);if(0!==i)return i;if(0!=(i=e.originalLine-t.originalLine))return i;if(0!=(i=e.originalColumn-t.originalColumn)||n)return i;if(0!=(i=e.generatedColumn-t.generatedColumn))return i;if(0!=(i=e.generatedLine-t.generatedLine))return i;return f(e.name,t.name)},isAbsolute:o,compareByGeneratedPositionsDeflated:function(e,t,n){var i=e.generatedLine-t.generatedLine;if(0!==i)return i;if(0!=(i=e.generatedColumn-t.generatedColumn)||n)return i;if(0!==(i=f(e.source,t.source)))return i;if(0!=(i=e.originalLine-t.originalLine))return i;if(0!=(i=e.originalColumn-t.originalColumn))return i;return f(e.name,t.name)},compareByGeneratedPositionsInflated:function(e,t){var n=e.generatedLine-t.generatedLine;if(0!==n)return n;if(0!=(n=e.generatedColumn-t.generatedColumn))return n;if(0!==(n=f(e.source,t.source)))return n;if(0!=(n=e.originalLine-t.originalLine))return n;if(0!=(n=e.originalColumn-t.originalColumn))return n;return f(e.name,t.name)},parseSourceMapInput:function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},getArg:function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')},urlParse:n,urlGenerate:i,normalize:r,join:s,relative:function(e,t){""===e&&(e=".");e=e.replace(/\/$/,"");var n=0;for(;0!==t.indexOf(e+"/");){var i=e.lastIndexOf("/");if(i<0)return t;if((e=e.slice(0,i)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)},computeSourceURL:function(e,t,o){t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t);if(o){var a=n(o);if(!a)throw new Error("sourceMapURL could not be parsed");if(a.path){var c=a.path.lastIndexOf("/");c>=0&&(a.path=a.path.substring(0,c+1))}t=s(i(a),t)}return r(t)}}}),define("skylark-sourcemap/array-set",["./util"],function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="undefined"!=typeof Map;function i(){this._array=[],this._set=n?new Map:Object.create(null)}return i.fromArray=function(e,t){for(var n=new i,r=0,s=e.length;r<s;r++)n.add(e[r],t);return n},i.prototype.size=function(){return n?this._set.size:Object.getOwnPropertyNames(this._set).length},i.prototype.add=function(i,r){var s=n?i:e.toSetString(i),o=n?this.has(i):t.call(this._set,s),a=this._array.length;o&&!r||this._array.push(i),o||(n?this._set.set(i,a):this._set[s]=a)},i.prototype.has=function(i){if(n)return this._set.has(i);var r=e.toSetString(i);return t.call(this._set,r)},i.prototype.indexOf=function(i){if(n){var r=this._set.get(i);if(r>=0)return r}else{var s=e.toSetString(i);if(t.call(this._set,s))return this._set[s]}throw new Error('"'+i+'" is not in the set.')},i.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},i.prototype.toArray=function(){return this._array.slice()},i}),define("skylark-sourcemap/base64",[],function(){"use strict";var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return{encode:function(t){if(0<=t&&t<e.length)return e[t];throw new TypeError("Must be between 0 and 63: "+t)},decode:function(e){if(65<=e&&e<=90)return e-65;if(97<=e&&e<=122)return e-97+26;if(48<=e&&e<=57)return e-48+52;if(43==e)return 62;if(47==e)return 63;return-1}}}),define("skylark-sourcemap/base64-vlq",["./base64"],function(e){"use strict";return{encode:function(t){var n,i="",r=function(e){return e<0?1+(-e<<1):0+(e<<1)}(t);do{n=31&r,(r>>>=5)>0&&(n|=32),i+=e.encode(n)}while(r>0);return i},decode:function(t,n,i){var r,s,o=t.length,a=0,c=0;do{if(n>=o)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(s=e.decode(t.charCodeAt(n++))))throw new Error("Invalid base64 digit: "+t.charAt(n-1));r=!!(32&s),a+=(s&=31)<<c,c+=5}while(r);i.value=(u=a,f=u>>1,1==(1&u)?-f:f),i.rest=n;var u,f}}}),define("skylark-sourcemap/binary-search",[],function(){"use strict";const e=1,t=2;return{GREATEST_LOWER_BOUND:e,LEAST_UPPER_BOUND:t,search:function(n,i,r,s){if(0===i.length)return-1;var o=function e(n,i,r,s,o,a){var c=Math.floor((i-n)/2)+n;var u=o(r,s[c],!0);return 0===u?c:u>0?i-c>1?e(c,i,r,s,o,a):a==t?i<s.length?i:-1:c:c-n>1?e(n,c,r,s,o,a):a==t?c:n<0?-1:n}(-1,i.length,n,i,r,s||e);if(o<0)return-1;for(;o-1>=0&&0===r(i[o],i[o-1],!0);)--o;return o}}}),define("skylark-sourcemap/mapping-list",["./util"],function(e){"use strict";function t(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return t.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},t.prototype.add=function(t){var n,i,r,s,o,a;n=this._last,i=t,r=n.generatedLine,s=i.generatedLine,o=n.generatedColumn,a=i.generatedColumn,s>r||s==r&&a>=o||e.compareByGeneratedPositionsInflated(n,i)<=0?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))},t.prototype.toArray=function(){return this._sorted||(this._array.sort(e.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},t}),define("skylark-sourcemap/quick-sort",[],function(){"use strict";function e(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function t(n,i,r,s){if(r<s){var o=(l=r,p=s,Math.round(l+Math.random()*(p-l))),a=r-1;e(n,o,s);for(var c=n[s],u=r;u<s;u++)i(n[u],c)<=0&&e(n,a+=1,u);e(n,a+1,u);var f=a+1;t(n,i,r,f-1),t(n,i,f+1,s)}var l,p}return{quickSort:function(e,n){t(e,n,0,e.length-1)}}}),define("skylark-sourcemap/source-map-consumer",["./util","./binary-search","./array-set","./base64-vlq","./quick-sort"],function(e,t,n,i,r){"use strict";function s(t,n){var i=t;return"string"==typeof t&&(i=e.parseSourceMapInput(t)),null!=i.sections?new c(i,n):new o(i,n)}function o(t,i){var r=t;"string"==typeof t&&(r=e.parseSourceMapInput(t));var s=e.getArg(r,"version"),o=e.getArg(r,"sources"),a=e.getArg(r,"names",[]),c=e.getArg(r,"sourceRoot",null),u=e.getArg(r,"sourcesContent",null),f=e.getArg(r,"mappings"),l=e.getArg(r,"file",null);if(s!=this._version)throw new Error("Unsupported version: "+s);c&&(c=e.normalize(c)),o=o.map(String).map(e.normalize).map(function(t){return c&&e.isAbsolute(c)&&e.isAbsolute(t)?e.relative(c,t):t}),this._names=n.fromArray(a.map(String),!0),this._sources=n.fromArray(o,!0),this._absoluteSources=this._sources.toArray().map(function(t){return e.computeSourceURL(c,t,i)}),this.sourceRoot=c,this.sourcesContent=u,this._mappings=f,this._sourceMapURL=i,this.file=l}function a(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function c(t,i){var r=t;"string"==typeof t&&(r=e.parseSourceMapInput(t));var o=e.getArg(r,"version"),a=e.getArg(r,"sections");if(o!=this._version)throw new Error("Unsupported version: "+o);this._sources=new n,this._names=new n;var c={line:-1,column:0};this._sections=a.map(function(t){if(t.url)throw new Error("Support for url field in sections not implemented.");var n=e.getArg(t,"offset"),r=e.getArg(n,"line"),o=e.getArg(n,"column");if(r<c.line||r===c.line&&o<c.column)throw new Error("Section offsets must be ordered and non-overlapping.");return c=n,{generatedOffset:{generatedLine:r+1,generatedColumn:o+1},consumer:new s(e.getArg(t,"map"),i)}})}return s.fromSourceMap=function(e,t){return o.fromSourceMap(e,t)},s.prototype._version=3,s.prototype.__generatedMappings=null,Object.defineProperty(s.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),s.prototype.__originalMappings=null,Object.defineProperty(s.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),s.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return";"===n||","===n},s.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},s.GENERATED_ORDER=1,s.ORIGINAL_ORDER=2,s.GREATEST_LOWER_BOUND=1,s.LEAST_UPPER_BOUND=2,s.prototype.eachMapping=function(t,n,i){var r,o=n||null,a=i||s.GENERATED_ORDER;switch(a){case s.GENERATED_ORDER:r=this._generatedMappings;break;case s.ORIGINAL_ORDER:r=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var c=this.sourceRoot;r.map(function(t){var n=null===t.source?null:this._sources.at(t.source);return{source:n=e.computeSourceURL(c,n,this._sourceMapURL),generatedLine:t.generatedLine,generatedColumn:t.generatedColumn,originalLine:t.originalLine,originalColumn:t.originalColumn,name:null===t.name?null:this._names.at(t.name)}},this).forEach(t,o)},s.prototype.allGeneratedPositionsFor=function(n){var i=e.getArg(n,"line"),r={source:e.getArg(n,"source"),originalLine:i,originalColumn:e.getArg(n,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];var s=[],o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,t.LEAST_UPPER_BOUND);if(o>=0){var a=this._originalMappings[o];if(void 0===n.column)for(var c=a.originalLine;a&&a.originalLine===c;)s.push({line:e.getArg(a,"generatedLine",null),column:e.getArg(a,"generatedColumn",null),lastColumn:e.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o];else for(var u=a.originalColumn;a&&a.originalLine===i&&a.originalColumn==u;)s.push({line:e.getArg(a,"generatedLine",null),column:e.getArg(a,"generatedColumn",null),lastColumn:e.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o]}return s},o.prototype=Object.create(s.prototype),o.prototype.consumer=s,o.prototype._findSourceIndex=function(t){var n,i=t;if(null!=this.sourceRoot&&(i=e.relative(this.sourceRoot,i)),this._sources.has(i))return this._sources.indexOf(i);for(n=0;n<this._absoluteSources.length;++n)if(this._absoluteSources[n]==t)return n;return-1},o.fromSourceMap=function(t,i){var s=Object.create(o.prototype),c=s._names=n.fromArray(t._names.toArray(),!0),u=s._sources=n.fromArray(t._sources.toArray(),!0);s.sourceRoot=t._sourceRoot,s.sourcesContent=t._generateSourcesContent(s._sources.toArray(),s.sourceRoot),s.file=t._file,s._sourceMapURL=i,s._absoluteSources=s._sources.toArray().map(function(t){return e.computeSourceURL(s.sourceRoot,t,i)});for(var f=t._mappings.toArray().slice(),l=s.__generatedMappings=[],p=s.__originalMappings=[],h=0,d=f.length;h<d;h++){var m=f[h],g=new a;g.generatedLine=m.generatedLine,g.generatedColumn=m.generatedColumn,m.source&&(g.source=u.indexOf(m.source),g.originalLine=m.originalLine,g.originalColumn=m.originalColumn,m.name&&(g.name=c.indexOf(m.name)),p.push(g)),l.push(g)}return r(s.__originalMappings,e.compareByOriginalPositions),s},o.prototype._version=3,Object.defineProperty(o.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),o.prototype._parseMappings=function(t,n){for(var s,o,c,u,f,l=1,p=0,h=0,d=0,m=0,g=0,_=t.length,v=0,y={},b={},x=[],w=[];v<_;)if(";"===t.charAt(v))l++,v++,p=0;else if(","===t.charAt(v))v++;else{for((s=new a).generatedLine=l,u=v;u<_&&!this._charIsMappingSeparator(t,u);u++);if(o=t.slice(v,u),c=y[o])v+=o.length;else{for(c=[];v<u;)i.decode(t,v,b),f=b.value,v=b.rest,c.push(f);if(2===c.length)throw new Error("Found a source, but no line and column");if(3===c.length)throw new Error("Found a source and line, but no column");y[o]=c}s.generatedColumn=p+c[0],p=s.generatedColumn,c.length>1&&(s.source=m+c[1],m+=c[1],s.originalLine=h+c[2],h=s.originalLine,s.originalLine+=1,s.originalColumn=d+c[3],d=s.originalColumn,c.length>4&&(s.name=g+c[4],g+=c[4])),w.push(s),"number"==typeof s.originalLine&&x.push(s)}r(w,e.compareByGeneratedPositionsDeflated),this.__generatedMappings=w,r(x,e.compareByOriginalPositions),this.__originalMappings=x},o.prototype._findMapping=function(e,n,i,r,s,o){if(e[i]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[i]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return t.search(e,n,s,o)},o.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},o.prototype.originalPositionFor=function(t){var n={generatedLine:e.getArg(t,"line"),generatedColumn:e.getArg(t,"column")},i=this._findMapping(n,this._generatedMappings,"generatedLine","generatedColumn",e.compareByGeneratedPositionsDeflated,e.getArg(t,"bias",s.GREATEST_LOWER_BOUND));if(i>=0){var r=this._generatedMappings[i];if(r.generatedLine===n.generatedLine){var o=e.getArg(r,"source",null);null!==o&&(o=this._sources.at(o),o=e.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var a=e.getArg(r,"name",null);return null!==a&&(a=this._names.at(a)),{source:o,line:e.getArg(r,"originalLine",null),column:e.getArg(r,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},o.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}))},o.prototype.sourceContentFor=function(t,n){if(!this.sourcesContent)return null;var i=this._findSourceIndex(t);if(i>=0)return this.sourcesContent[i];var r,s=t;if(null!=this.sourceRoot&&(s=e.relative(this.sourceRoot,s)),null!=this.sourceRoot&&(r=e.urlParse(this.sourceRoot))){var o=s.replace(/^file:\/\//,"");if("file"==r.scheme&&this._sources.has(o))return this.sourcesContent[this._sources.indexOf(o)];if((!r.path||"/"==r.path)&&this._sources.has("/"+s))return this.sourcesContent[this._sources.indexOf("/"+s)]}if(n)return null;throw new Error('"'+s+'" is not in the SourceMap.')},o.prototype.generatedPositionFor=function(t){var n=e.getArg(t,"source");if((n=this._findSourceIndex(n))<0)return{line:null,column:null,lastColumn:null};var i={source:n,originalLine:e.getArg(t,"line"),originalColumn:e.getArg(t,"column")},r=this._findMapping(i,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,e.getArg(t,"bias",s.GREATEST_LOWER_BOUND));if(r>=0){var o=this._originalMappings[r];if(o.source===i.source)return{line:e.getArg(o,"generatedLine",null),column:e.getArg(o,"generatedColumn",null),lastColumn:e.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},c.prototype=Object.create(s.prototype),c.prototype.constructor=s,c.prototype._version=3,Object.defineProperty(c.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),c.prototype.originalPositionFor=function(n){var i={generatedLine:e.getArg(n,"line"),generatedColumn:e.getArg(n,"column")},r=t.search(i,this._sections,function(e,t){var n=e.generatedLine-t.generatedOffset.generatedLine;return n||e.generatedColumn-t.generatedOffset.generatedColumn}),s=this._sections[r];return s?s.consumer.originalPositionFor({line:i.generatedLine-(s.generatedOffset.generatedLine-1),column:i.generatedColumn-(s.generatedOffset.generatedLine===i.generatedLine?s.generatedOffset.generatedColumn-1:0),bias:n.bias}):{source:null,line:null,column:null,name:null}},c.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},c.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],r=i.consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},c.prototype.generatedPositionFor=function(t){for(var n=0;n<this._sections.length;n++){var i=this._sections[n];if(-1!==i.consumer._findSourceIndex(e.getArg(t,"source"))){var r=i.consumer.generatedPositionFor(t);if(r){var s={line:r.line+(i.generatedOffset.generatedLine-1),column:r.column+(i.generatedOffset.generatedLine===r.line?i.generatedOffset.generatedColumn-1:0)};return s}}}return{line:null,column:null}},c.prototype._parseMappings=function(t,n){this.__generatedMappings=[],this.__originalMappings=[];for(var i=0;i<this._sections.length;i++)for(var s=this._sections[i],o=s.consumer._generatedMappings,a=0;a<o.length;a++){var c=o[a],u=s.consumer._sources.at(c.source);u=e.computeSourceURL(s.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var f=null;c.name&&(f=s.consumer._names.at(c.name),this._names.add(f),f=this._names.indexOf(f));var l={source:u,generatedLine:c.generatedLine+(s.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(s.generatedOffset.generatedLine===c.generatedLine?s.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:f};this.__generatedMappings.push(l),"number"==typeof l.originalLine&&this.__originalMappings.push(l)}r(this.__generatedMappings,e.compareByGeneratedPositionsDeflated),r(this.__originalMappings,e.compareByOriginalPositions)},{SourceMapConsumer:s,BasicSourceMapConsumer:o,IndexedSourceMapConsumer:c}}),define("skylark-sourcemap/source-map-generator",["./base64-vlq","./util","./array-set","./mapping-list"],function(e,t,n,i){"use strict";function r(e){e||(e={}),this._file=t.getArg(e,"file",null),this._sourceRoot=t.getArg(e,"sourceRoot",null),this._skipValidation=t.getArg(e,"skipValidation",!1),this._sources=new n,this._names=new n,this._mappings=new i,this._sourcesContents=null}return r.prototype._version=3,r.fromSourceMap=function(e){var n=e.sourceRoot,i=new r({file:e.file,sourceRoot:n});return e.eachMapping(function(e){var r={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(r.source=e.source,null!=n&&(r.source=t.relative(n,r.source)),r.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(r.name=e.name)),i.addMapping(r)}),e.sources.forEach(function(r){var s=r;null!==n&&(s=t.relative(n,r)),i._sources.has(s)||i._sources.add(s);var o=e.sourceContentFor(r);null!=o&&i.setSourceContent(r,o)}),i},r.prototype.addMapping=function(e){var n=t.getArg(e,"generated"),i=t.getArg(e,"original",null),r=t.getArg(e,"source",null),s=t.getArg(e,"name",null);this._skipValidation||this._validateMapping(n,i,r,s),null!=r&&(r=String(r),this._sources.has(r)||this._sources.add(r)),null!=s&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:n.line,generatedColumn:n.column,originalLine:null!=i&&i.line,originalColumn:null!=i&&i.column,source:r,name:s})},r.prototype.setSourceContent=function(e,n){var i=e;null!=this._sourceRoot&&(i=t.relative(this._sourceRoot,i)),null!=n?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[t.toSetString(i)]=n):this._sourcesContents&&(delete this._sourcesContents[t.toSetString(i)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},r.prototype.applySourceMap=function(e,i,r){var s=i;if(null==i){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');s=e.file}var o=this._sourceRoot;null!=o&&(s=t.relative(o,s));var a=new n,c=new n;this._mappings.unsortedForEach(function(n){if(n.source===s&&null!=n.originalLine){var i=e.originalPositionFor({line:n.originalLine,column:n.originalColumn});null!=i.source&&(n.source=i.source,null!=r&&(n.source=t.join(r,n.source)),null!=o&&(n.source=t.relative(o,n.source)),n.originalLine=i.line,n.originalColumn=i.column,null!=i.name&&(n.name=i.name))}var u=n.source;null==u||a.has(u)||a.add(u);var f=n.name;null==f||c.has(f)||c.add(f)},this),this._sources=a,this._names=c,e.sources.forEach(function(n){var i=e.sourceContentFor(n);null!=i&&(null!=r&&(n=t.join(r,n)),null!=o&&(n=t.relative(o,n)),this.setSourceContent(n,i))},this)},r.prototype._validateMapping=function(e,t,n,i){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||n||i)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:i}))},r.prototype._serializeMappings=function(){for(var n,i,r,s,o=0,a=1,c=0,u=0,f=0,l=0,p="",h=this._mappings.toArray(),d=0,m=h.length;d<m;d++){if(i=h[d],n="",i.generatedLine!==a)for(o=0;i.generatedLine!==a;)n+=";",a++;else if(d>0){if(!t.compareByGeneratedPositionsInflated(i,h[d-1]))continue;n+=","}n+=e.encode(i.generatedColumn-o),o=i.generatedColumn,null!=i.source&&(s=this._sources.indexOf(i.source),n+=e.encode(s-l),l=s,n+=e.encode(i.originalLine-1-u),u=i.originalLine-1,n+=e.encode(i.originalColumn-c),c=i.originalColumn,null!=i.name&&(r=this._names.indexOf(i.name),n+=e.encode(r-f),f=r)),p+=n}return p},r.prototype._generateSourcesContent=function(e,n){return e.map(function(e){if(!this._sourcesContents)return null;null!=n&&(e=t.relative(n,e));var i=t.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)},r.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},r.prototype.toString=function(){return JSON.stringify(this.toJSON())},r}),define("skylark-sourcemap/source-node",["./source-map-generator","./util"],function(e,t){"use strict";var n=/(\r?\n)/,i="$$$isSourceNode$$$";function r(e,t,n,r,s){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==s?null:s,this[i]=!0,null!=r&&this.add(r)}return r.fromStringWithSourceMap=function(e,i,s){var o=new r,a=e.split(n),c=0,u=function(){var e=n(),t=n()||"";return e+t;function n(){return c<a.length?a[c++]:void 0}},f=1,l=0,p=null;return i.eachMapping(function(e){if(null!==p){if(!(f<e.generatedLine)){var t=a[c]||"",n=t.substr(0,e.generatedColumn-l);return a[c]=t.substr(e.generatedColumn-l),l=e.generatedColumn,h(p,n),void(p=e)}h(p,u()),f++,l=0}for(;f<e.generatedLine;)o.add(u()),f++;if(l<e.generatedColumn){var t=a[c]||"";o.add(t.substr(0,e.generatedColumn)),a[c]=t.substr(e.generatedColumn),l=e.generatedColumn}p=e},this),c<a.length&&(p&&h(p,u()),o.add(a.splice(c).join(""))),i.sources.forEach(function(e){var n=i.sourceContentFor(e);null!=n&&(null!=s&&(e=t.join(s,e)),o.setSourceContent(e,n))}),o;function h(e,n){if(null===e||void 0===e.source)o.add(n);else{var i=s?t.join(s,e.source):e.source;o.add(new r(e.originalLine,e.originalColumn,i,n,e.name))}}},r.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[i]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},r.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[i]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},r.prototype.walk=function(e){for(var t,n=0,r=this.children.length;n<r;n++)(t=this.children[n])[i]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},r.prototype.join=function(e){var t,n,i=this.children.length;if(i>0){for(t=[],n=0;n<i-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},r.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[i]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},r.prototype.setSourceContent=function(e,n){this.sourceContents[t.toSetString(e)]=n},r.prototype.walkSourceContents=function(e){for(var n=0,r=this.children.length;n<r;n++)this.children[n][i]&&this.children[n].walkSourceContents(e);for(var s=Object.keys(this.sourceContents),n=0,r=s.length;n<r;n++)e(t.fromSetString(s[n]),this.sourceContents[s[n]])},r.prototype.toString=function(){var e="";return this.walk(function(t){e+=t}),e},r.prototype.toStringWithSourceMap=function(t){var n={code:"",line:1,column:0},i=new e(t),r=!1,s=null,o=null,a=null,c=null;return this.walk(function(e,t){n.code+=e,null!==t.source&&null!==t.line&&null!==t.column?(s===t.source&&o===t.line&&a===t.column&&c===t.name||i.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:n.line,column:n.column},name:t.name}),s=t.source,o=t.line,a=t.column,c=t.name,r=!0):r&&(i.addMapping({generated:{line:n.line,column:n.column}}),s=null,r=!1);for(var u=0,f=e.length;u<f;u++)10===e.charCodeAt(u)?(n.line++,n.column=0,u+1===f?(s=null,r=!1):r&&i.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:n.line,column:n.column},name:t.name})):n.column++}),this.walkSourceContents(function(e,t){i.setSourceContent(e,t)}),{code:n.code,map:i}},r}),define("skylark-sourcemap/main",["./array-set","./base64-vlq","./binary-search","./mapping-list","./quick-sort","./source-map-consumer","./source-map-generator","./source-node","./util"],function(e,t,n,i,r,s,o,a,c){"use strict";return{ArraySet:e,base64VLQ:t,binarySearch:n,MappingList:i,quickSort:r,consumers:s,SourceMapGenerator:o,SourceNode:a,util:c}}),define("skylark-sourcemap",["skylark-sourcemap/main"],function(e){return e}),define("skylark-rjs/source-map",["skylark-sourcemap"],function(e){return e}),define("skylark-rjs/optimize",["./lang","./logger","./parse","./pragma","./uglifyjs","./source-map"],function(e,t,n,i,r,s){"use strict";var o,a=/\@import\s+(url\()?\s*([^);]+)\s*(\))?([\w, ]*)(;)?/gi,c=/\/\*[^\*]*@import[^\*]*\*\//g,u=/\url\(\s*([^\)]+)\s*\)?/g,f=/^\w+:/;s.SourceMapGenerator,s.SourceMapConsumer;function l(e){return"'"!==(e=e.replace(/\s+$/,"")).charAt(0)&&'"'!==e.charAt(0)||(e=e.substring(1,e.length-1)),e}function p(n,i,r,s){return r.replace(u,function(r,o){var a,c,u,p,h=l(o);for(h=h.replace(e.backSlashRegExp,"/"),a=h.charAt(0),c=f.test(h),"/"===a||"#"===a||c?c||t.trace(n+"\n  URL not a relative URL, skipping: "+o):o=s+i+h,u=o.split("/"),p=u.length-1;p>0;p--)"."===u[p]?u.splice(p,1):".."===u[p]&&0!==p&&".."!==u[p-1]&&(u.splice(p-1,2),p-=1);return"url("+u.join("/")+")"})}return o={jsFile:function(e,t,n,i,r){var s=i.env.fs;t||(t=s.readFile(e)),t=o.js(e,t,n,i,r),s.saveUtf8File(n,t)},js:function(e,r,s,a,c){var u,f,l=String(a.optimize).split("."),p=l[0],h="keepLines"===l[1],d="";if(a=a||{},r=i.process(e,r,a,"OnSave",c),p&&"none"!==p){if(!(u=o.optimizers[p]))throw new Error('optimizer with name of "'+p+'" not found for this environment');f=a[p]||{},a.generateSourceMaps&&(f.generateSourceMaps=!!a.generateSourceMaps,f._buildSourceMap=a._buildSourceMap);try{if(a.preserveLicenseComments)try{d=n.getLicenseComments(e,r)}catch(t){throw new Error("Cannot parse file: "+e+" for comments. Skipping it. Error is:\n"+t.toString())}a.generateSourceMaps&&d&&(f.preamble=d,d=""),r=d+u(e,r,s,h,f,a.env.fs),f._buildSourceMap&&f._buildSourceMap!==a._buildSourceMap&&(a._buildSourceMap=f._buildSourceMap)}catch(e){if(a.throwWhen&&a.throwWhen.optimize)throw e;t.error(e)}}else a._buildSourceMap&&(a._buildSourceMap=null);return r},cssFile:function(n,i,r){var s,o,u,f,h=r.env.fs,d=h.readFile(n),m=function n(i,r,s,o,u,f,h){i=i.replace(e.backSlashRegExp,"/");var d=i.lastIndexOf("/"),m=-1!==d?i.substring(0,d+1):"",g=[],_=[],v=h.env.fs;r=r.replace(c,"");s&&","!==s.charAt(s.length-1)&&(s+=",");r=r.replace(a,function(r,a,c,f,d){if(d&&"all"!==d.replace(/^\s\s*/,"").replace(/\s\s*$/,""))return _.push(i),r;if(c=l(c),s&&-1!==s.indexOf(c+","))return r;c=c.replace(e.backSlashRegExp,"/");try{var y,b,x,w="/"===c.charAt(0)?c:m+c,S=v.readFile(w);return u[w]?"":(u[w]=!0,x=n(w,S,s,o,u,!1,h),S=x.fileContents,x.importList.length&&g.push.apply(g,x.importList),x.skippedList.length&&_.push.apply(_,x.skippedList),y=c.lastIndexOf("/"),b=(b=-1!==y?c.substring(0,y+1):"").replace(/^\.\//,""),S=p(c,b,S,o),g.push(w),S)}catch(e){return t.warn(i+"\n  Cannot inline css import, skipping: "+c),r}});o&&f&&(r=p(i,"",r,o));return{importList:g,skippedList:_,fileContents:r}}(n,d,r.cssImportIgnore,r.cssPrefix,{},!0,r),g=m.skippedList.length?d:m.fileContents;m.skippedList.length&&t.warn("Cannot inline @imports for "+n+",\nthe following files had media queries in them:\n"+m.skippedList.join("\n"));try{if(-1===r.optimizeCss.indexOf(".keepComments"))for(s=0;-1!==(s=g.indexOf("/*",s));){if(-1===(o=g.indexOf("*/",s+2)))throw"Improper comment in CSS file: "+n;f=g.substring(s,o),!r.preserveLicenseComments||-1===f.indexOf("license")&&-1===f.indexOf("opyright")&&-1===f.indexOf("(c)")?(g=g.substring(0,s)+g.substring(o+2,g.length),s=0):s=o}g=-1===r.optimizeCss.indexOf(".keepLines")?(g=(g=(g=g.replace(/[\r\n]/g," ")).replace(/\s+/g," ")).replace(/\{\s/g,"{")).replace(/\s\}/g,"}"):(g=g.replace(/(\r\n)+/g,"\r\n")).replace(/(\n)+/g,"\n"),-1===r.optimizeCss.indexOf(".keepWhitespace")&&(g=(g=(g=(g=(g=(g=g.replace(/^[ \t]+/gm,"")).replace(/[ \t]+$/gm,"")).replace(/(;|:|\{|}|,)[ \t]+/g,"$1")).replace(/[ \t]+(\{)/g,"$1")).replace(/([ \t])+/g,"$1")).replace(/^[ \t]*[\r\n]/gm,""))}catch(e){g=d,t.error("Could not optimized CSS file: "+n+", error: "+e)}return h.saveUtf8File(i,g),u="\n"+i.replace(r.dir,"")+"\n----------------\n",m.importList.push(n),u+=m.importList.map(function(e){return e.replace(r.dir,"")}).join("\n"),{importList:m.importList,buildText:u+"\n"}},css:function(e,n){var i,r,s,a,c="",u=[],f=n.dir&&n.removeCombined,l=n.env.fs;if(-1!==n.optimizeCss.indexOf("standard")){if(a=l.getFilteredFileList(e,/\.css$/,!0))for(i=0;i<a.length;i++)r=a[i],t.trace("Optimizing ("+n.optimizeCss+") CSS file: "+r),s=o.cssFile(r,r,n),c+=s.buildText,f&&(s.importList.pop(),u=u.concat(s.importList));f&&u.forEach(function(e){l.exists(e)&&l.deleteFile(e)})}return c},optimizers:{uglify:function(n,i,s,o,a,c){var u,f,l,p={},h=s+".map",d=n&&n.split("/").pop();a=a||{},e.mixin(p,a,!0),a.preamble&&(p.output={preamble:a.preamble}),a.generateSourceMaps&&(s||a._buildSourceMap)&&(p.outSourceMap=d+".map",a._buildSourceMap?(f=JSON.parse(a._buildSourceMap),p.inSourceMap=f):c.exists(h)&&(p.inSourceMap=h,f=JSON.parse(c.readFile(h)))),t.trace("Uglify file: "+n);try{u=r.minify(i,p,d+".src.js"),p.outSourceMap&&u.map?(l=u.map,f||a._buildSourceMap||c.saveFile(s+".src.js",i),i=u.code,a._buildSourceMap?a._buildSourceMap=l:c.saveFile(s+".map",l)):i=u.code}catch(e){var m=e.toString(),g=/SyntaxError/.test(m);throw console.error(e),new Error("Cannot uglify file: "+n+". Skipping it. Error is:\n"+m+(g?"\n\nIf the source uses ES2015 or later syntax, please pass \"optimize: 'none'\" to r.js and use an ES2015+ compatible minifier after running r.js. The included UglifyJS only understands ES5 or earlier syntax.":""))}return i}}}}),define("skylark-rjs/transform",["./esprima","./parse","./logger","./lang"],function(e,t,n,i){"use strict";var r,s=/^([ \t]+)/,o=/\{[\r\n]+([ \t]+)/,a=/^[_A-Za-z]([A-Za-z\d_]*)$/,c={"\n":/\n/g,"\r\n":/\r\n/g};return r={toTransport:function(r,s,o,a,c,u){u=u||{};var f,l,p,h,d=0,m=!1,g=[],_=function(e){return u.useSourceUrl&&(e='eval("'+i.jsEscape(e)+"\\n//# sourceURL="+(0===o.indexOf("/")?"":"/")+o+'");\n'),e};try{f=e.parse(a,{loc:!0})}catch(e){return n.trace("toTransport skipping "+o+": "+e.toString()),a}return t.traverse(f,function(e){var i,s,a,c,u,f,l,p,_=!1;if("VariableDeclarator"===e.type&&e.id&&"define"===e.id.name&&"Identifier"===e.id.type&&!((l=e.init)&&l.callee&&"CallExpression"===l.callee.type&&l.callee.callee&&"Identifier"===l.callee.callee.type&&"require"===l.callee.callee.name&&l.callee.arguments&&1===l.callee.arguments.length&&"Literal"===l.callee.arguments[0].type&&l.callee.arguments[0].value&&-1!==l.callee.arguments[0].value.indexOf("amdefine")))return!1;if((_=r&&"CallExpression"===e.type&&e.callee&&e.callee.object&&"Identifier"===e.callee.object.type&&e.callee.object.name===r&&"Identifier"===e.callee.property.type&&"define"===e.callee.property.name)||t.isDefineNodeWithArgs(e)){if(!(i=e.arguments)||!i.length)return;if(s=i[0],a=s.loc,1===i.length)"Identifier"===s.type?(u=!0,f="empty"):t.isFnExpression(s)?(c=s,u=!0,f="scan"):"ObjectExpression"===s.type?(u=!0,f="skip"):"Literal"===s.type&&"number"==typeof s.value?(u=!0,f="skip"):"UnaryExpression"===s.type&&"-"===s.operator&&s.argument&&"Literal"===s.argument.type&&"number"==typeof s.argument.value?(u=!0,f="skip"):"MemberExpression"===s.type&&s.object&&s.property&&"Identifier"===s.property.type&&(u=!0,f="empty");else if("ArrayExpression"===s.type)u=!0,f="skip";else{if("Literal"!==s.type||"string"!=typeof s.value)return;u=!1,2===i.length&&t.isFnExpression(i[1])?(c=i[1],f="scan"):f="skip"}if((p={foundId:void 0,needsId:u,depAction:f,namespaceExists:_,node:e,defineLoc:e.loc,firstArgLoc:a,factoryNode:c,sourceUrlData:void 0}).needsId){if(h)return n.trace(o+" has more than one anonymous define. May be a built file from another build system like, Ender. Skipping normalization."),g=[],!1;h=p,g.push(p)}else"scan"===f&&((d+=1)>1?m||(g=h?[h]:[],m=!0):g.push(p))}}),g.length?(g.reverse(),l=a.split("\n"),p=function(e,t){var n=e.start.column,i=e.start.line-1,r=l[i];l[i]=r.substring(0,n)+t+r.substring(n,r.length)},g.forEach(function(e){var n,i="",o="";e.needsId&&s&&(i+="'"+s+"',"),"scan"===e.depAction&&(n=t.getAnonDepsFromNode(e.factoryNode),o=n.length?"["+n.map(function(e){return"'"+e+"'"})+"]":"[]",o+=",",e.factoryNode?p(e.factoryNode.loc,o):i+=o),i&&p(e.firstArgLoc,i),r&&!e.namespaceExists&&p(e.defineLoc,r+"."),c&&c(e)}),a=l.join("\n"),_(a)):_(a)},modifyConfig:function(e,n){var i=t.findConfig(e),s=i.config;return s&&(s=n(s))?r.serializeConfig(s,e,i.range[0],i.range[1],{quote:i.quote}):e},serializeConfig:function(e,t,n,i,a){var u,f,l,p,h="",d=t.substring(0,n),m=t.substring(n,i),g=-1===m.indexOf("\r")?"\n":"\r\n",_=d.lastIndexOf("\n");return-1===_&&(_=0),(f=s.exec(d.substring(_+1,n)))&&f[1]&&(h=f[1]),(f=o.exec(m))&&f[1]&&(u=f[1]),u=!u||u.length<h?"  ":u.substring(h.length),p=new RegExp("("+g+")"+u,"g"),l=function(e,t,n){var i=c[n];return e.replace(i,"$&"+t)}(l=r.objectToString(e,{indent:u,lineReturn:g,outDentRegExp:p,quote:a&&a.quote}),h,g),d+l+t.substring(i)},objectToString:function(e,t,n){var s,o,c,u=!0,f="",l=t.lineReturn,p=t.indent,h=t.outDentRegExp,d=t.quote||'"';return c=(n=n||"")+p,null===e?f="null":void 0===e?f="undefined":"number"==typeof e||"boolean"==typeof e?f=e:"string"==typeof e?f=d+i.jsEscape(e)+d:i.isArray(e)?(i.each(e,function(e,n){f+=(0!==n?","+l:"")+c+r.objectToString(e,t,c)}),s="[",o="]"):i.isFunction(e)||i.isRegExp(e)?f=e.toString().replace(h,"$1"):(i.eachProp(e,function(e,n){f+=(u?"":","+l)+c+(a.test(n)?n:d+i.jsEscape(n)+d)+": "+r.objectToString(e,t,c),u=!1}),s="{",o="}"),s&&(f=s+l+f+l+n+o),f}}}),define("skylark-rjs/commonJs",["./parse"],function(e){"use strict";var t={useLog:!0,convertDir:function(e,n,i){var r,s,o,a,c,u=/\.js$/;if(r=i.getFilteredFileList(e,/\w/,!0),e=e.replace(/\\/g,"/"),n=n.replace(/\\/g,"/"),"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),"/"===n.charAt(n.length-1)&&(n=n.substring(0,n.length-1)),r&&r.length)for(s=0;s<r.length;s++)o=r[s],a=o.replace(e,n),u.test(o)?(c=i.readFile(o),c=t.convert(o,c,config),i.saveUtf8File(a,c)):i.copyFile(o,a,!0);else t.useLog&&("convert"===e?console.log("\n\n"+t.convert(n,i.readFile(n),config)):console.log("No files to convert in directory: "+e))},convert:function(t,n){try{var i="",r=e.usesCommonJs(t,n);if(e.usesAmdOrRequireJs(t,n)||!r)return n;(r.dirname||r.filename)&&(i='var __filename = module.uri || "", __dirname = __filename.substring(0, __filename.lastIndexOf("/") + 1); '),n="define(function (require, exports, module) {"+i+n+"\n});\n"}catch(e){return console.log("commonJs.convert: COULD NOT CONVERT: "+t+", so skipping it. Error was: "+e),n}return n}};return t}),define("skylark-rjs/requirePatch",["./pragma","./parse","./lang","./logger","./commonJs","./prim"],function(pragma,parse,lang,logger,commonJs,prim){var allowRun=!0,hasProp=lang.hasProp,falseProp=lang.falseProp,getOwn=lang.getOwn,useStrictRegExp=/['"]use strict['"];/g,absoluteUrlRegExp=/^[\/\\]|^\w:/;return prim.hideResolutionConflict=!0,function(config){if(allowRun){allowRun=!1;var fs=config.env.fs,layer,pluginBuilderRegExp=/(["']?)pluginBuilder(["']?)\s*[=\:]\s*["']([^'"\s]+)["']/,oldNewContext=require.s.newContext,oldDef,exports,module;require._cacheReset=function(){require._cachedRawText={},require._cachedFileContents={},require._cachedDefinesRequireUrls={}},require._cacheReset(),require._isSupportedBuildUrl=function(e){return-1===e.indexOf("://")&&-1===e.indexOf("?")&&0!==e.indexOf("empty:")&&0!==e.indexOf("//")||(layer.ignoredUrls[e]||(-1===e.indexOf("empty:")&&logger.info("Cannot optimize network URL, skipping: "+e),layer.ignoredUrls[e]=!0),!1)},require.s.newContext=function(name){var context=oldNewContext(name),oldEnable=context.enable,moduleProto=context.Module.prototype,oldInit=moduleProto.init,oldCallPlugin=moduleProto.callPlugin;return"_"===name&&(context.nextTick=function(e){e()},context.needFullExec={},context.fullExec={},context.plugins={},context.buildShimExports={},context.makeShimExports=function(e){return context.config.wrapShim?function(){var t="return ";return e.exports&&-1===e.exports.indexOf(".")&&(t+="root."+e.exports+" = "),e.init&&(t+="("+e.init.toString().replace(useStrictRegExp,"")+".apply(this, arguments))"),e.init&&e.exports&&(t+=" || "),e.exports&&(t+=e.exports),t+=";"}:function(){return"(function (global) {\n    return function () {\n        var ret, fn;\n"+(e.init?"       fn = "+e.init.toString().replace(useStrictRegExp,"")+";\n        ret = fn.apply(global, arguments);\n":"")+(e.exports?"        return ret || global."+e.exports+";\n":"        return ret;\n")+"    };\n}(this))"}},context.enable=function(e,t){var n=e.id,i=t&&t.map.id,r=context.needFullExec,s=context.fullExec,o=getOwn(context.registry,n);return o&&!o.defined?i&&getOwn(r,i)&&(r[n]=e):(getOwn(r,n)&&falseProp(s,n)||i&&getOwn(r,i)&&falseProp(s,n))&&context.require.undef(n),oldEnable.apply(context,arguments)},context.load=function(moduleName,url){var contents,pluginBuilderMatch,builderName,shim,shimExports;0===url.indexOf("empty:")&&delete context.urlFetched[url],require._isSupportedBuildUrl(url)?(url=normalizeUrlWithBase(context,moduleName,url),layer.buildPathMap[moduleName]=url,layer.buildFileToModule[url]=moduleName,hasProp(context.plugins,moduleName)&&(context.needFullExec[moduleName]=!0),prim().start(function(){if(!hasProp(require._cachedFileContents,url)||!falseProp(context.needFullExec,moduleName)&&!getOwn(context.fullExec,moduleName))return require._cacheReadAsync(url,void 0,fs).then(function(e){contents=e,!context.config.cjsTranslate||context.config.shim&&lang.hasProp(context.config.shim,moduleName)||(contents=commonJs.convert(url,contents)),context.config.onBuildRead&&(contents=context.config.onBuildRead(moduleName,url,contents)),contents=pragma.process(url,contents,context.config,"OnExecute");try{!layer.existingRequireUrl&&parse.definesRequire(url,contents)&&(layer.existingRequireUrl=url,require._cachedDefinesRequireUrls[url]=!0)}catch(e){throw new Error("Parse error using esprima for file: "+url+"\n"+e)}}).then(function(){return hasProp(context.plugins,moduleName)&&(pluginBuilderMatch=pluginBuilderRegExp.exec(contents))?(builderName=context.makeModuleMap(pluginBuilderMatch[3],context.makeModuleMap(moduleName),null,!0).id,require._cacheReadAsync(context.nameToUrl(builderName),void 0,fs)):contents}).then(function(e){contents=e;try{falseProp(context.needFullExec,moduleName)&&(contents=parse(moduleName,url,contents,{insertNeedsDefine:!0,has:context.config.has,findNestedDependencies:context.config.findNestedDependencies}))}catch(e){throw new Error("Parse error using esprima for file: "+url+"\n"+e)}require._cachedFileContents[url]=contents});contents=require._cachedFileContents[url],!layer.existingRequireUrl&&require._cachedDefinesRequireUrls[url]&&(layer.existingRequireUrl=url)}).then(function(){contents&&eval(contents);try{getOwn(context.needFullExec,moduleName)&&(shim=getOwn(context.config.shim,moduleName),shim&&shim.exports&&(shimExports=eval(shim.exports),void 0!==shimExports&&(context.buildShimExports[moduleName]=shimExports))),context.completeLoad(moduleName)}catch(e){throw e.moduleTree||(e.moduleTree=[]),e.moduleTree.push(moduleName),e}}).then(null,function(e){throw e.fileName||(e.fileName=url),e}).end()):context.completeLoad(moduleName)},context.execCb=function(e,t,n,exports){var i=getOwn(layer.context.buildShimExports,e);return i||(t.__requireJsBuild||getOwn(layer.context.needFullExec,e)?t.apply(exports,n):void 0)},moduleProto.init=function(e){return context.needFullExec[this.map.id]&&lang.each(e,lang.bind(this,function(e){"string"==typeof e&&(e=context.makeModuleMap(e,this.map.isDefine?this.map:this.map.parentMap,!1,!0)),context.fullExec[e.id]||context.require.undef(e.id)})),oldInit.apply(this,arguments)},moduleProto.callPlugin=function(){var e=this.map,t=context.makeModuleMap(e.prefix),n=t.id,i=getOwn(context.registry,n);return context.plugins[n]=!0,context.needFullExec[n]=e,!falseProp(context.fullExec,n)||i&&!i.defined||context.require.undef(t.id),oldCallPlugin.apply(this,arguments)}),context},delete require.s.contexts._,require._buildReset=function(){var e=require.s.contexts._;return delete require.s.contexts._,require({}),layer=require._layer={buildPathMap:{},buildFileToModule:{},buildFilePaths:[],pathAdded:{},modulesWithNames:{},needsDefine:{},existingRequireUrl:"",ignoredUrls:{},context:require.s.contexts._},e},require._buildReset(),oldDef=define,define=function(e){return"string"==typeof e&&falseProp(layer.needsDefine,e)&&(layer.modulesWithNames[e]=!0),oldDef.apply(require,arguments)},define.amd=oldDef.amd,require._readFile=fs.readFile,require._fileExists=function(e){return fs.exists(e)},require.onResourceLoad=function(e,t){var n,i=t.id;e.plugins&&lang.hasProp(e.plugins,i)&&lang.eachProp(e.needFullExec,function(t,n){if(!0!==t&&t.prefix===i&&t.unnormalized){var r=e.makeModuleMap(t.originalName,t.parentMap);e.needFullExec[r.id]=r}}),e.needFullExec&&getOwn(e.needFullExec,i)&&(e.fullExec[i]=t),t.prefix?falseProp(layer.pathAdded,i)&&(layer.buildFilePaths.push(i),layer.buildPathMap[i]=i,layer.buildFileToModule[i]=i,layer.modulesWithNames[i]=!0,layer.pathAdded[i]=!0):t.url&&require._isSupportedBuildUrl(t.url)&&(n=normalizeUrlWithBase(e,i,t.url),!layer.pathAdded[n]&&getOwn(layer.buildPathMap,i)&&(layer.buildFilePaths.push(n),layer.pathAdded[n]=!0))},require.needsDefine=function(e){layer.needsDefine[e]=!0}}function normalizeUrlWithBase(e,t,n){return require.jsExtRegExp.test(t)&&!absoluteUrlRegExp.test(n)&&(n=(e.config.dir||e.config.dirBaseUrl)+n),n}}}),define("skylark-rjs/build",["./rjs","./lang","./prim","./logger","./parse","./optimize","./pragma","./transform","./requirePatch","./commonJs","./source-map"],function(require,lang,prim,logger,parse,optimize,pragma,transform,requirePatch,commonJs,sourceMap){"use strict";var build,SourceMapGenerator=sourceMap.SourceMapGenerator,hasProp=lang.hasProp,getOwn=lang.getOwn,falseProp=lang.falseProp,endsWithSemiColonRegExp=/;\s*$/,endsWithSlashRegExp=/[\/\\]$/,resourceIsModuleIdRegExp=/^[\w\/\\\.]+$/,deepCopyProps={layer:!0};function copyConfig(e){return lang.deeplikeCopy(e,deepCopyProps)}function makeBuildBaseConfig(e){return{appDir:"",pragmas:{},paths:{},optimize:"uglify",optimizeCss:"standard.keepLines.keepWhitespace",inlineText:!0,isBuild:!0,optimizeAllPluginResources:!1,findNestedDependencies:!1,preserveLicenseComments:!0,writeBuildTxt:!0,waitSeconds:30,dirExclusionRegExp:e.dirExclusionRegExp,_buildPathToModuleIndex:{}}}function addSemiColon(e,t){return t.skipSemiColonInsertion||endsWithSemiColonRegExp.test(e)?e:e+";"}function endsWithSlash(e){return"/"!==e.charAt(e.length-1)&&(e+="/"),e}function endsWithNewLine(e){return"\n"!==e.charAt(e.length-1)&&(e+="\n"),e}function makeWriteFile(e,t){function n(e,t){logger.trace("Saving plugin-optimized file: "+e),file.saveUtf8File(e,t)}return n.asModule=function(i,r,s){n(r,build.toTransport(e,i,r,s,t))},n}function appendToFileContents(e,t,n,i,module,r){var s,o,a,c,u,f,l,p;if(r){for(s=i.out?i.baseUrl:module&&module._buildPath?module._buildPath:"",1===(l=n.split("!")).length?o=build.makeRelativeFilePath(s,n):(c=l.shift(),a=l.join("!"),o=resourceIsModuleIdRegExp.test(a)?build.makeRelativeFilePath(s,require.toUrl(a))+"!"+c:n),u=e.split("\n").length-1,f=t.split("\n").length,p=1;p<=f;p+=1)r.addMapping({generated:{line:u+p,column:0},original:{line:p,column:0},source:o});r.setSourceContent(o,t)}return e+=t}function stringDotToObj(e,t,n){var i=t.split(".");i.forEach(function(t,r){r===i.length-1?e[t]=n:(falseProp(e,t)&&(e[t]={}),e=e[t])})}function mixConfig(e,t,n){var i,r,s,o;for(i in t)hasProp(t,i)&&(r=t[i],s=lang.isArray(r),"object"!=typeof r||!r||s||lang.isFunction(r)||lang.isRegExp(r)?s?n||(o=e[i],lang.isArray(o)?e[i]=o.concat(r):e[i]=r):e[i]=r:"map"===i?(e.map||(e.map={}),lang.deepMix(e.map,t.map)):e[i]=lang.mixin({},e[i],r,!0));lang.hasProp(e,"logLevel")&&logger.logLevel(e.logLevel)}function flattenWrapFile(e,t,n){var i=e.wrap,r=t+"File",s="__"+t+"Map",o=e.env.fs;if("string"!=typeof i[t]&&i[r])i[t]="","string"==typeof i[r]&&(i[r]=[i[r]]),i[s]=[],i[r].forEach(function(e){var r=build.makeAbsPath(e,n,o),a=endsWithNewLine(o.readFile(r));i[s].push(function(e,t,n){return appendToFileContents(e,a,r,t,null,n)}),i[t]+=a});else if(null===i[t]||void 0===i[t])i[t]="";else{if("string"!=typeof i[t])throw new Error("wrap."+t+" or wrap."+r+" malformed");i[t]=endsWithNewLine(i[t]),i[s]=[function(e,r,s){var a=build.makeAbsPath("config-wrap-"+t+"-default.js",n,o);return appendToFileContents(e,i[t],a,r,null,s)}]}}function normalizeWrapConfig(e,t){var n=e.env.fs;try{e.wrap&&(!0===e.wrap?e.wrap={start:"(function () {\n",end:"}());",__startMap:[function(e,i,r){return appendToFileContents(e,"(function () {\n",build.makeAbsPath("config-wrap-start-default.js",t,n),i,null,r)}],__endMap:[function(e,i,r){return appendToFileContents(e,"}());",build.makeAbsPath("config-wrap-end-default.js",t,n),i,null,r)}]}:(flattenWrapFile(e,"start",t),flattenWrapFile(e,"end",t)))}catch(e){throw new Error("Malformed wrap config: "+e.toString())}}return prim.nextTick=function(e){e()},require._cacheReadAsync=function(e,t,n){var i;return lang.hasProp(require._cachedRawText,e)?((i=prim()).resolve(require._cachedRawText[e]),i.promise):n.readFileAsync(e,t).then(function(t){return require._cachedRawText[e]=t,t})},build=function(e){var t,n,i,r,s,o,a,c,u,f=/( {4}at[^\n]+)\n/;return prim().start(function(){if(!e||lang.isArray(e)){if(!e||e.length<1)return void logger.error("build.js buildProfile.js\nwhere buildProfile.js is the name of the build file (see example.build.js for hints on how to make a build file).");-1===e[0].indexOf("=")&&(t=e[0],e.splice(0,1)),(n=build.convertArrayToObject(e)).buildFile=t}else n=e;return build._run(n)}).then(null,function(t){var n;if(i=t.toString(),o=t.moduleTree,(s=f.exec(i))&&(i+=i.substring(0,s.index+s[0].length+1)),o&&o.length>0){for(i+="\nIn module tree:\n",a=o.length-1;a>-1;a--)if(u=o[a]){for(c=o.length-a;c>-1;c--)i+="  ";i+=u+"\n"}logger.error(i)}throw r=t.stack,"string"==typeof e&&-1!==e.indexOf("stacktrace=true")?i+="\n"+r:!s&&r&&(s=f.exec(r))&&(i+="\n"+s[0]||""),(n=new Error(i)).originalError=t,n})},build._run=function(e){var t,n,i,r,s,o,a,c,u,f,l,p,h,d,m,g,_,v,y={},b="",x={};return prim().start(function(){var n;if(o=build.createConfig(e),i=o.paths,v=o.env.fs,requirePatch(o),o.dir&&!o.keepBuildDir&&v.exists(o.dir)&&v.deleteFile(o.dir),!o.out&&!o.cssIn)if(v.copyDir(o.appDir||o.baseUrl,o.dir,/\w/,!0),t={},o.appDir)for(n in i)hasProp(i,n)&&(t[n]=i[n].replace(o.appDir,o.dir));else for(n in i)hasProp(i,n)&&(0===i[n].indexOf(o.baseUrl)?t[n]=i[n].replace(o.baseUrl,o.dirBaseUrl):(t[n]="empty:"===i[n]?"empty:":n,0!==(c=i[n]).indexOf("/")&&-1===c.indexOf(":")&&(c=o.baseUrl+c),f=o.dirBaseUrl+t[n],"empty:"!==c&&(v.exists(c)&&v.isDirectory(c)?v.copyDir(c,f,/\w/,!0):(c+=".js",f+=".js",v.copyFile(c,f)))));require({baseUrl:o.baseUrl,paths:i,packagePaths:o.packagePaths,packages:o.packages}),u=require.s.contexts._,(a=o.modules)&&a.forEach(function(module){if(module.name&&(module._sourcePath=u.nameToUrl(module.name),!(v.exists(module._sourcePath)||module.create||-1!==module.name.indexOf("!")||o.rawText&&lang.hasProp(o.rawText,module.name))))throw new Error("ERROR: module path does not exist: "+module._sourcePath+" for module named: "+module.name+". Path is relative to: "+v.absPath("."))}),o.out?(require(o),o.cssIn||(o.modules[0]._buildPath="function"==typeof o.out?"FUNCTION":o.out)):o.cssIn||(s={baseUrl:o.dirBaseUrl,paths:t},lang.mixin(s,o),require(s),a&&a.forEach(function(module){if(module.name){if(module._buildPath=u.nameToUrl(module.name,null),module._buildPath===module._sourcePath&&!o.allowSourceOverwrites)throw new Error("Module ID '"+module.name+"' has a source path that is same as output path: "+module._sourcePath+". Stopping, config is malformed.");module.create||o.rawText&&lang.hasProp(o.rawText,module.name)||v.copyFile(module._sourcePath,module._buildPath)}})),o.optimizeCss&&"none"!==o.optimizeCss&&o.dir&&(b+=optimize.css(o.dir,o))}).then(function(){s=copyConfig(require.s.contexts._.config)}).then(function(){var e=[];if(a)return e=a.map(function(module,e){return function(){return o._buildPathToModuleIndex[v.normalize(module._buildPath)]=e,build.traceDependencies(module,o,s).then(function(e){module.layer=e})}}),prim.serial(e)}).then(function(){var e;if(a)return e=a.map(function(module){return function(){if(module.exclude)return module.excludeLayers=[],prim.serial(module.exclude.map(function(e,t){return function(){var n=build.findBuildModule(e,a);if(!n)return build.traceDependencies({name:e},o,s).then(function(e){module.excludeLayers[t]={layer:e}});module.excludeLayers[t]=n}}))}}),prim.serial(e)}).then(function(){if(a)return prim.serial(a.map(function(module){return function(){return module.exclude&&module.exclude.forEach(function(e,t){var n=module.excludeLayers[t].layer,i=n.buildFileToModule;n.buildFilePaths.forEach(function(e){build.removeModulePath(i[e],e,module.layer)})}),module.excludeShallow&&module.excludeShallow.forEach(function(e){var t=getOwn(module.layer.buildPathMap,e);t&&build.removeModulePath(e,t,module.layer)}),build.flattenModule(module,module.layer,o).then(function(e){var t,n;"FUNCTION"===module._buildPath?(module._buildText=e.text,module._buildSourceMap=e.sourceMap):(t=e.text,e.sourceMap&&(n=(n=module._buildPath.split("/")).pop(),t+="\n//# sourceMappingURL="+n+".map",v.saveUtf8File(module._buildPath+".map",e.sourceMap)),v.saveUtf8File(module._buildPath+"-temp",t)),b+=e.buildText})}}))}).then(function(){var e,t,i={},s=o.bundlesConfigOutFile;if(a&&(a.forEach(function(module){var e,t=module._buildPath;if("FUNCTION"!==t){if(v.exists(t)&&v.deleteFile(t),v.renameFile(t+"-temp",t),s){e=i[module.name]=[];var n=v.readFile(t),r={};r[module.name]=!0;var c=parse.getAllNamedDefines(n,r);e.push.apply(e,c)}o.removeCombined&&!o.out&&module.layer.buildFilePaths.forEach(function(e){var t=a.some(function(t){return t._buildPath===e}),n=build.makeRelativeFilePath(o.dir,e);v.exists(e)&&!t&&0!==n.indexOf("..")&&v.deleteFile(e)})}o.onModuleBundleComplete&&o.onModuleBundleComplete(module.onCompleteData)}),s)){var c=v.readFile(s);c=transform.modifyConfig(c,function(e){return e.bundles||(e.bundles={}),lang.eachProp(i,function(t,n){e.bundles[n]=t}),e}),v.saveUtf8File(s,c)}if(o.removeCombined&&!o.out&&o.dir&&v.deleteEmptyDirs(o.dir),o.out&&!o.cssIn)"FUNCTION"===(n=o.modules[0]._buildPath)?(t=o.modules[0]._buildSourceMap,o._buildSourceMap=t,o.modules[0]._buildText=optimize.js((o.modules[0].name||o.modules[0].include[0]||n)+".build.js",o.modules[0]._buildText,null,o),o._buildSourceMap&&o._buildSourceMap!==t&&(o.modules[0]._buildSourceMap=o._buildSourceMap,o._buildSourceMap=null)):optimize.jsFile(n,null,n,o);else if(!o.cssIn){for(e in v.getFilteredFileList(o.dir,/\.js$/,!0).forEach(function(t){var n,i,r;e=(e=t.replace(o.dir,"")).substring(0,e.length-3),((r=0===(r=getOwn(o._buildPathToModuleIndex,t))||r>0?r:-1)>-1||!o.skipDirOptimize||"all"===o.normalizeDirDefines||o.cjsTranslate)&&(_=v.readFile(t),!o.cjsTranslate||o.shim&&lang.hasProp(o.shim,e)||(_=commonJs.convert(t,_)),-1===r&&(o.onBuildRead&&(_=o.onBuildRead(e,t,_)),"all"===o.normalizeDirDefines&&(_=build.toTransport(o.namespace,null,t,_)),o.onBuildWrite&&(_=o.onBuildWrite(e,t,_))),i=r>-1?o.modules[r].override:null,n=i?build.createOverrideConfig(o,i):o,(r>-1||!o.skipDirOptimize)&&optimize.jsFile(t,_,t,n,x))}),h=require.s.contexts._,x)if(hasProp(x,e))for(p=h.makeModuleMap(e),d=x[e],r=0;r<d.length;r++){if(m=d[r],l=h.makeModuleMap(m,p),falseProp(h.plugins,l.prefix)){if(h.plugins[l.prefix]=!0,!v.exists(require.toUrl(l.prefix+".js")))continue;h.require([l.prefix]),l=h.makeModuleMap(m,p)}falseProp(y,l.id)&&((g=getOwn(h.defined,l.prefix))&&g.writeFile&&g.writeFile(l.prefix,l.name,require,makeWriteFile(o.namespace),h.config),y[l.id]=!0)}o.writeBuildTxt&&v.saveUtf8File(o.dir+"build.txt",b)}return o.cssIn&&(b+=optimize.cssFile(o.cssIn,o.out,o).buildText),"function"==typeof o.out&&o.out(o.modules[0]._buildText,o.modules[0]._buildSourceMap),b?(logger.info(b),b):""})},build.objProps={paths:!0,wrap:!0,pragmas:!0,pragmasOnSave:!0,has:!0,hasOnSave:!0,uglify:!0,uglify2:!0,closure:!0,map:!0,throwWhen:!0,rawText:!0},build.hasDotPropMatch=function(e){var t,n=e.indexOf(".");return-1!==n&&(t=e.substring(0,n),hasProp(build.objProps,t))},build.convertArrayToObject=function(e){var t,n,i,r={},s={include:!0,exclude:!0,excludeShallow:!0,insertRequire:!0,stubModules:!0,deps:!0,mainConfigFile:!0,"wrap.startFile":!0,"wrap.endFile":!0};for(t=0;t<e.length;t++)separatorI.ndex=e[t].indexOf("="),"true"===(i=e[t].substring(NaN,e[t].length))?i=!0:"false"===i&&(i=!1),n=e[t].substring(0,void 0),getOwn(s,n)&&(i=i.split(",")),build.hasDotPropMatch(n)?stringDotToObj(r,n,i):r[n]=i;return r},build.makeAbsPath=function(e,t,n){return t?(0!==e.indexOf("/")&&-1===e.indexOf(":")&&(e=t+("/"===t.charAt(t.length-1)?"":"/")+e,e=n.normalize(e)),e.replace(lang.backSlashRegExp,"/")):e},build.makeAbsObject=function(e,t,n,i){var r,s;if(t)for(r=0;r<e.length;r++)s=e[r],hasProp(t,s)&&"string"==typeof t[s]&&(t[s]=build.makeAbsPath(t[s],n,i))},build.makeAbsConfig=function(e,t,n){var i,r,s;for(i=["appDir","dir","baseUrl"],s=0;s<i.length;s++)getOwn(e,r=i[s])&&("baseUrl"===r?(e.originalBaseUrl=e.baseUrl,e.appDir?e.baseUrl=build.makeAbsPath(e.originalBaseUrl,e.appDir,n):e.baseUrl=build.makeAbsPath(e[r],t,n)):e[r]=build.makeAbsPath(e[r],t,n),e[r]=endsWithSlash(e[r]));build.makeAbsObject("stdout"===e.out?["cssIn"]:["out","cssIn"],e,t,n),build.makeAbsObject(["startFile","endFile"],e.wrap,t,n),build.makeAbsObject(["externExportsPath"],e.closure,t,n)},build.makeRelativeFilePath=function(e,t,n){var i,r,s,o,a,c,u=e.split("/"),f=endsWithSlashRegExp.test(t),l=[];for(t=n.normalize(t),f&&!endsWithSlashRegExp.test(t)&&(t+="/"),a=t.split("/"),c=a.pop(),u.pop(),o=u.length,i=0;i<o&&u[i]===a[i];i+=1);for(s=a.slice(i),r=o-i,i=0;i>-1&&i<r;i+=1)l.push("..");return l.join("/")+(l.length?"/":"")+s.join("/")+(s.length?"/":"")+c},build.nestedMix={paths:!0,has:!0,hasOnSave:!0,pragmas:!0,pragmasOnSave:!0},build.createConfig=function(cfg){var fs=cfg.env.fs,buildFileContents,buildFileConfig,mainConfig,mainConfigFile,mainConfigPath,buildFile,absFilePath,config={},buildBaseConfig=makeBuildBaseConfig(fs);if(absFilePath=fs.absPath("."),build.makeAbsConfig(cfg,absFilePath,fs),build.makeAbsConfig(buildBaseConfig,absFilePath,fs),lang.mixin(config,buildBaseConfig),lang.mixin(config,cfg,!0),lang.hasProp(config,"logLevel")&&logger.logLevel(config.logLevel),config.buildFile){if(buildFile=fs.absPath(config.buildFile),!fs.exists(buildFile))throw new Error("ERROR: build file does not exist: "+buildFile);absFilePath=config.baseUrl=fs.absPath(fs.parent(buildFile)),buildFileContents=fs.readFile(buildFile);try{buildFileContents=buildFileContents.replace(/\/\/\#[^\n\r]+[\n\r]*$/,"").trim().replace(/;$/,""),buildFileConfig=eval("("+buildFileContents+")"),build.makeAbsConfig(buildFileConfig,absFilePath,fs),mixConfig(config,buildFileConfig)}catch(e){throw new Error("Build file "+buildFile+" is malformed: "+e)}}if(mainConfigFile=config.mainConfigFile||buildFileConfig&&buildFileConfig.mainConfigFile,mainConfigFile&&("string"==typeof mainConfigFile&&(mainConfigFile=[mainConfigFile]),mainConfigFile.forEach(function(e){if(e=build.makeAbsPath(e,absFilePath,fs),!fs.exists(e))throw new Error(e+" does not exist.");try{mainConfig=parse.findConfig(fs.readFile(e)).config}catch(t){throw new Error("The config in mainConfigFile "+e+" cannot be used because it cannot be evaluated correctly while running in the optimizer. Try only using a config that is also valid JSON, or do not use mainConfigFile and instead copy the config values needed into a build file or command line arguments given to the optimizer.\nSource error from parsing: "+e+": "+t)}mainConfig&&(mainConfigPath=e.substring(0,e.lastIndexOf("/")),config.appDir&&!mainConfig.appDir&&(mainConfig.appDir=config.appDir),mainConfig.baseUrl||(mainConfig.baseUrl=mainConfigPath),build.makeAbsConfig(mainConfig,mainConfigPath,fs),mixConfig(config,mainConfig))})),buildFileConfig&&mixConfig(config,buildFileConfig,!0),mixConfig(config,cfg,!0),lang.eachProp(config.paths,function(e,t){if(lang.isArray(e))throw new Error("paths fallback not supported in optimizer. Please provide a build config path override for "+t);config.paths[t]=build.makeAbsPath(e,config.baseUrl,fs)}),hasProp(config,"baseUrl")){if(config.appDir){if(!config.originalBaseUrl)throw new Error("Please set a baseUrl in the build config");config.dirBaseUrl=build.makeAbsPath(config.originalBaseUrl,config.dir,fs)}else config.dirBaseUrl=config.dir||config.baseUrl;config.dirBaseUrl=endsWithSlash(config.dirBaseUrl)}if(config.bundlesConfigOutFile){if(!config.dir)throw new Error('bundlesConfigOutFile can only be used with optimizations that use "dir".');config.bundlesConfigOutFile=build.makeAbsPath(config.bundlesConfigOutFile,config.dir,fs)}if(config.main)throw new Error('"main" passed as an option, but the supported option is called "name".');if(config.out&&!config.name&&!config.modules&&!config.include&&!config.cssIn)throw new Error('Missing either a "name", "include" or "modules" option');if(config.cssIn){if(config.dir||config.appDir)throw new Error('cssIn is only for the output of single file CSS optimizations and is not compatible with "dir" or "appDir" configuration.');if(!config.out)throw new Error('"out" option missing.')}if(config.cssIn||config.baseUrl||(config.baseUrl="./"),!config.out&&!config.dir)throw new Error('Missing either an "out" or "dir" config value. If using "appDir" for a full project optimization, use "dir". If you want to optimize to one file, use "out".');if(config.appDir&&config.out)throw new Error('"appDir" is not compatible with "out". Use "dir" instead. appDir is used to copy whole projects, where "out" with "baseUrl" is used to just optimize to one file.');if(config.out&&config.dir)throw new Error('The "out" and "dir" options are incompatible. Use "out" if you are targeting a single file for optimization, and "dir" if you want the appDir or baseUrl directories optimized.');if(config.dir&&!config.allowSourceOverwrites&&(config.dir===config.baseUrl||config.dir===config.appDir||config.baseUrl&&0!==build.makeRelativeFilePath(config.dir,config.baseUrl,fs).indexOf("..")||config.appDir&&0!==build.makeRelativeFilePath(config.dir,config.appDir,fs).indexOf("..")))throw new Error('"dir" is set to a parent or same directory as "appDir" or "baseUrl". This can result in the deletion of source code. Stopping. If you want to allow possible overwriting of source code, set "allowSourceOverwrites" to true in the build config, but do so at your own risk. In that case, you may want to also set "keepBuildDir" to true.');if(config.insertRequire&&!lang.isArray(config.insertRequire))throw new Error("insertRequire should be a list of module IDs to insert in to a require([]) call.");if("uglify2"===config.optimize&&(config.optimize="uglify"),config.uglify2&&(config.uglify=config.uglify2,delete config.uglify2),config.generateSourceMaps){if(config.preserveLicenseComments&&"none"!==config.optimize&&"uglify"!==config.optimize)throw new Error("Cannot use preserveLicenseComments and generateSourceMaps together, unless optimize is set to 'uglify'. Either explicitly set preserveLicenseComments to false (default is true) or turn off generateSourceMaps. If you want source maps with license comments, see: http://requirejs.org/docs/errors.html#sourcemapcomments");if("none"!==config.optimize&&"closure"!==config.optimize&&"uglify"!==config.optimize)throw new Error('optimize: "'+config.optimize+'" does not support generateSourceMaps.')}if(!config.name&&!config.include||config.modules){if(config.modules&&config.out)throw new Error('If the "modules" option is used, then there should be a "dir" option set and "out" should not be used since "out" is only for single file optimization output.');if(config.modules&&config.name)throw new Error('"name" and "modules" options are incompatible. Either use "name" if doing a single file optimization, or "modules" if you want to target more than one file for optimization.')}else config.modules=[{name:config.name,out:config.out,create:config.create,include:config.include,exclude:config.exclude,excludeShallow:config.excludeShallow,insertRequire:config.insertRequire,stubModules:config.stubModules}],delete config.stubModules;if(config.out&&!config.cssIn&&(cfg.optimizeCss||(config.optimizeCss="none")),config.cssPrefix?config.cssPrefix=endsWithSlash(config.cssPrefix):config.cssPrefix="",config.modules&&config.modules.length&&config.modules.forEach(function(e){if(lang.isArray(e)||"string"==typeof e||!e)throw new Error("modules config item is malformed: it should be an object with a 'name' property.");config.stubModules&&(e.stubModules=config.stubModules.concat(e.stubModules||[])),e.stubModules&&(e.stubModules._byName={},e.stubModules.forEach(function(t){e.stubModules._byName[t]=!0})),"string"==typeof e.include&&(e.include=[e.include]),e.override&&normalizeWrapConfig(e.override,absFilePath)}),normalizeWrapConfig(config,absFilePath),config.context)throw new Error('The build argument "context" is not supported in a build. It should only be used in web pages.');return hasProp(config,"normalizeDirDefines")||("none"===config.optimize||config.skipDirOptimize?config.normalizeDirDefines="skip":config.normalizeDirDefines="all"),hasProp(config,"fileExclusionRegExp")?"string"==typeof config.fileExclusionRegExp?fs.exclusionRegExp=new RegExp(config.fileExclusionRegExp):fs.exclusionRegExp=config.fileExclusionRegExp:hasProp(config,"dirExclusionRegExp")&&(fs.exclusionRegExp=config.dirExclusionRegExp),config.deps&&(config._depsInclude=config.deps),delete config.deps,delete config.jQuery,delete config.enforceDefine,delete config.urlArgs,config},build.findBuildModule=function(e,t){var n,module;for(n=0;n<t.length;n++)if((module=t[n]).name===e)return module;return null},build.removeModulePath=function(module,e,t){var n=t.buildFilePaths.indexOf(e);-1!==n&&t.buildFilePaths.splice(n,1)},build.traceDependencies=function(module,e,t){var n,i,r,s,o,a={rhino:!0,node:!0,xpconnect:!0},c=prim();function u(t){var n=!1;if(a[e.env.name])try{build.checkForErrors(s,r)}catch(e){n=!0,c.reject(e)}n||c.resolve(t)}return require._buildReset(),r=require._layer,s=r.context,t&&require(copyConfig(t)),logger.trace("\nTracing dependencies for: "+(module.name||("function"==typeof module.out?"FUNCTION":module.out))),n=(n=e._depsInclude||[]).concat(module.name&&!module.create?[module.name]:[]),module.include&&(n=n.concat(module.include)),module.override&&(i=t?build.createOverrideConfig(t,module.override):copyConfig(module.override),require(i)),(o=require.s.contexts._.config.rawText)&&lang.eachProp(o,function(e,t){var n=require.toUrl(t)+".js";require._cachedRawText[n]=e}),c.reject.__requireJsBuild=!0,u.__requireJsBuild=!0,require(n,u,c.reject),a[e.env.name]&&build.checkForErrors(s,r),c.promise.then(function(){return module.override&&t&&require(copyConfig(t)),build.checkForErrors(s,r),r})},build.checkForErrors=function(e,t){var n,i,r,s,o,a,c="",u={},f=[],l=[],p={},h={},d=!1,m=!1,g=e.defined,_=e.registry;function v(e,t,n){t&&(n||l.push(e),p[t]?(d=!0,h[t]||(h[t]=[],h[t].push(p[t])),h[t].push(e)):n||(p[t]=e))}for(n in _)hasProp(_,n)&&0!==n.indexOf("_@r")&&(m=!0,r=getOwn(_,n),s=n.split("!"),o=s[0],-1===n.indexOf("_unnormalized")&&r&&r.enabled&&v(n,r.map.url),!hasProp(t.modulesWithNames,n)&&s.length>1&&(falseProp(u,o)&&f.push(o),(a=u[o])||(a=u[o]=[]),a.push(n+(r.error?": "+r.error:""))));if(m)for(n in g)hasProp(g,n)&&-1===n.indexOf("!")&&v(n,require.toUrl(n)+".js",!0);if(l.length||f.length){if(f.length&&(c+="Loader plugin"+(1===f.length?"":"s")+" did not call the load callback in the build:\n"+f.map(function(e){var t=u[e];return e+":\n  "+t.join("\n  ")}).join("\n")+"\n"),c+="Module loading did not complete for: "+l.join(", "),d)for(i in c+="\nThe following modules share the same URL. This could be a misconfiguration if that URL only has one anonymous module in it:",h)hasProp(h,i)&&(c+="\n"+i+": "+h[i].join(", "));throw new Error(c)}},build.createOverrideConfig=function(e,t){var n=copyConfig(e),i=copyConfig(t);return lang.eachProp(i,function(i,r){hasProp(build.objProps,r)?(n[r]={},lang.mixin(n[r],e[r],!0),lang.mixin(n[r],t[r],!0)):n[r]=t[r]}),n},build.flattenModule=function(module,e,t){var n,i,r,s="",o=t.env.fs;return prim().start(function(){var a,c,u,f,l,p,h,d,m,g,_,v,y=e.context,b=[],x={},w={};return module.override&&(t=build.createOverrideConfig(t,module.override)),g=t.namespace||"",_=g?g+".":"",v=module.stubModules&&module.stubModules._byName||{},module.onCompleteData={name:module.name,path:t.dir?module._buildPath.replace(t.dir,""):module._buildPath,included:[]},s+="\n"+module.onCompleteData.path+"\n----------------\n",e.existingRequireUrl&&-1!==(a=e.buildFilePaths.indexOf(e.existingRequireUrl))&&(e.buildFilePaths.splice(a,1),e.buildFilePaths.unshift(e.existingRequireUrl)),t.generateSourceMaps&&(r=t.dir||t.baseUrl,u="FUNCTION"===module._buildPath?(module.name||module.include[0]||"FUNCTION")+".build.js":t.out?module._buildPath.split("/").pop():module._buildPath.replace(r,""),i=new SourceMapGenerator({file:u})),lang.eachProp(e.context.config.pkgs,function(e,t){w[e]=t}),n="",t.wrap&&t.wrap.__startMap&&t.wrap.__startMap.forEach(function(e){n=e(n,t,i)}),prim.serial(e.buildFilePaths.map(function(r){return function(){var a="";return f=e.buildFileToModule[r],p=getOwn(w,f),prim().start(function(){return h=y.makeModuleMap(f),(d=h.prefix&&getOwn(y.defined,h.prefix))?(d.onLayerEnd&&falseProp(x,h.prefix)&&(b.push(d),x[h.prefix]=!0),void(d.write&&((m=function(e){a+="\n"+addSemiColon(e,t),t.onBuildWrite&&(a=t.onBuildWrite(f,r,a))}).asModule=function(n,i){a+="\n"+addSemiColon(build.toTransport(g,n,r,i,e,{useSourceUrl:e.context.config.useSourceUrl}),t),t.onBuildWrite&&(a=t.onBuildWrite(n,r,a))},d.write(h.prefix,h.name,m,{name:module.onCompleteData.name,path:module.onCompleteData.path})))):prim().start(function(){return hasProp(v,f)?hasProp(e.context.plugins,f)?'define({load: function(id){throw new Error("Dynamic load not allowed: " + id);}});':"define({});":require._cacheReadAsync(r,void 0,o)}).then(function(n){var i;c=n,!t.cjsTranslate||t.shim&&lang.hasProp(t.shim,f)||(c=commonJs.convert(r,c)),t.onBuildRead&&(c=t.onBuildRead(f,r,c)),p&&(i=p===parse.getNamedDefine(c)),g&&(c=pragma.namespace(c,g)),c=build.toTransport(g,f,r,c,e,{useSourceUrl:t.useSourceUrl}),p&&!i&&(c=addSemiColon(c,t)+"\n",c+=_+"define('"+p+"', ['"+f+"'], function (main) { return main; });\n"),t.onBuildWrite&&(c=t.onBuildWrite(f,r,c)),a+=addSemiColon(c,t)})}).then(function(){var o,c=r.replace(t.dir,"");module.onCompleteData.included.push(c),s+=c+"\n",f&&falseProp(e.modulesWithNames,f)&&!t.skipModuleInsertion&&((l=t.shim&&(getOwn(t.shim,f)||p&&getOwn(t.shim,p)))?(o=lang.isArray(l)?l:l.deps,t.wrapShim?a="(function(root) {\n"+_+'define("'+f+'", '+(o&&o.length?build.makeJsArrayString(o)+", ":"[], ")+"function() {\n  return (function() {\n"+a+"\n"+(l.exportsFn?l.exportsFn():"")+"\n  }).apply(root, arguments);\n});\n}(this));\n":a+="\n"+_+'define("'+f+'", '+(o&&o.length?build.makeJsArrayString(o)+", ":"")+(l.exportsFn?l.exportsFn():"function(){}")+");\n"):a+="\n"+_+'define("'+f+'", function(){});\n'),n=appendToFileContents(n,a+="\n",r,t,module,i)})}})).then(function(){b.length&&b.forEach(function(e,r){var s;"string"==typeof module.out?s=module.out:"string"==typeof module._buildPath&&(s=module._buildPath),e.onLayerEnd(function(e){n=appendToFileContents(n,"\n"+addSemiColon(e,t),"onLayerEnd"+r+".js",t,module,i)},{name:module.name,path:s})}),module.create&&(n=appendToFileContents(n,"\n"+_+'define("'+module.name+'", function(){});\n',"module-create.js",t,module,i)),module.insertRequire&&(n=appendToFileContents(n,"\n"+_+'require(["'+module.insertRequire.join('", "')+'"]);\n',"module-insertRequire.js",t,module,i))})}).then(function(){return t.wrap&&t.wrap.__endMap&&t.wrap.__endMap.forEach(function(e){n=e(n,t,i)}),{text:n,buildText:s,sourceMap:i?JSON.stringify(i.toJSON(),null,"  "):void 0}})},build.makeJsArrayString=function(e){return'["'+e.map(function(e){return lang.jsEscape(e)}).join('","')+'"]'},build.toTransport=function(e,t,n,i,r,s){var o=r&&r.context.config.baseUrl;return o&&(n=n.replace(o,"")),transform.toTransport(e,t,n,i,function(e){r&&(e.needsId||e.foundId===t)&&(r.modulesWithNames[t]=!0)},s)},require.build=build}),define("skylark-rjs/main",["./rjs","./build","./lang","./prim","./logger","./parse","./optimize","./pragma","./transform","./requirePatch","./commonJs","./source-map"],function(e,t,n,i,r,s,o,a,c,u,f,l,p){"use strict";return e}),define("skylark-rjs",["skylark-rjs/main"],function(e){return e})}(define,require),!isAmd){var skylarkjs=require("skylark-langx-ns");isCmd?module.exports=skylarkjs:globals.skylarkjs=skylarkjs}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-rjs-all.js.map
