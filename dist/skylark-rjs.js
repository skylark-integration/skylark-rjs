/**
 * skylark-rjs - A version of rjs that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
(function(factory,globals,define,require) {
  var isAmd = (typeof define === 'function' && define.amd),
      isCmd = (!isAmd && typeof exports !== 'undefined');

  if (!isAmd && !define) {
    var map = {};
    function absolute(relative, base) {
        if (relative[0]!==".") {
          return relative;
        }
        var stack = base.split("/"),
            parts = relative.split("/");
        stack.pop(); 
        for (var i=0; i<parts.length; i++) {
            if (parts[i] == ".")
                continue;
            if (parts[i] == "..")
                stack.pop();
            else
                stack.push(parts[i]);
        }
        return stack.join("/");
    }
    define = globals.define = function(id, deps, factory) {
        if (typeof factory == 'function') {
            map[id] = {
                factory: factory,
                deps: deps.map(function(dep){
                  return absolute(dep,id);
                }),
                resolved: false,
                exports: null
            };
            require(id);
        } else {
            map[id] = {
                factory : null,
                resolved : true,
                exports : factory
            };
        }
    };
    require = globals.require = function(id) {
        if (!map.hasOwnProperty(id)) {
            throw new Error('Module ' + id + ' has not been defined');
        }
        var module = map[id];
        if (!module.resolved) {
            var args = [];

            module.deps.forEach(function(dep){
                args.push(require(dep));
            })

            module.exports = module.factory.apply(globals, args) || null;
            module.resolved = true;
        }
        return module.exports;
    };
  }
  
  if (!define) {
     throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");
  }

  factory(define,require);

  if (!isAmd) {
    var skylarkjs = require("skylark-langx-ns");

    if (isCmd) {
      module.exports = skylarkjs;
    } else {
      globals.skylarkjs  = skylarkjs;
    }
  }

})(function(define,require) {

/**
 * prim 0.0.1 Copyright (c) 2012-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/prim for details
 */

/**
     * Extracts license comments from JS text.
     * @param {String} fileName
     * @param {String} contents
     * @returns {String} a string of license comments.
     */

//as license comments can be expressed in other ways, like

//Distributed under the BSD license:
//Copyright 2012 (c) Mihai Bazon <mihai.bazon@gmail.com>

//Pull out any license comments for prepending after optimization.

define("skylark-rjs/rjs",["skylark-langx-ns"],function(e){return require.define=define,e.attach("intg.rjs",require)}),define("skylark-rjs/lang",[],function(){"use strict";var o,t,i=Object.prototype.hasOwnProperty;function a(e,n){return i.call(e,n)}function r(){}return t=function(){return!1},"undefined"!=typeof java&&java.lang&&java.lang.Object&&"undefined"!=typeof importPackage&&(t=function(e){return e instanceof java.lang.Object}),o={backSlashRegExp:/\\/g,ostring:Object.prototype.toString,isArray:Array.isArray||function(e){return"[object Array]"===o.ostring.call(e)},isFunction:function(e){return"[object Function]"===o.ostring.call(e)},isRegExp:function(e){return e&&e instanceof RegExp},hasProp:a,falseProp:function(e,n){return!a(e,n)||!e[n]},getOwn:function(e,n){return a(e,n)&&e[n]},_mixin:function(e,n,i){for(var r in n)!n.hasOwnProperty(r)||!i&&e.hasOwnProperty(r)||(e[r]=n[r]);return e},mixin:function(e){var n,i,r,t=Array.prototype.slice.call(arguments);for(e=e||{},2<t.length&&"boolean"==typeof arguments[t.length-1]&&(n=t.pop()),i=1,r=t.length;i<r;i++)o._mixin(e,t[i],n);return e},deepMix:function(i,e){return o.eachProp(e,function(e,n){"object"!=typeof e||!e||o.isArray(e)||o.isFunction(e)||e instanceof RegExp?i[n]=e:(i[n]||(i[n]={}),o.deepMix(i[n],e))}),i},deeplikeCopy:function(e,i){var n,r;if(o.isArray(e))r=[],e.forEach(function(e){r.push(o.deeplikeCopy(e,i))});else{if(n=typeof e,null==e||"boolean"==n||"string"==n||"number"==n||o.isFunction(e)||o.isRegExp(e)||t(e))return e;r={},o.eachProp(e,function(e,n){i&&a(i,n)||(r[n]=o.deeplikeCopy(e,i))})}return r},delegate:function(e,n){r.prototype=e;e=new r;return r.prototype=null,n&&o.mixin(e,n),e},each:function(e,n){if(e)for(var i=0;i<e.length&&!n(e[i],i,e);i+=1);},eachProp:function(e,n){for(var i in e)if(a(e,i)&&n(e[i],i))break},bind:function(e,n){return function(){return n.apply(e,arguments)}},jsEscape:function(e){return e.replace(/(["'\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}}}),define("skylark-rjs/prim",[],function(){"use strict";var i=Object.prototype.hasOwnProperty;function r(e,n){return i.call(e,n)}function t(e,n){if(e)for(var i=0;i<e.length;i+=1)e[i]&&n(e[i],i,e)}function o(e){if(r(e,"e")||r(e,"v")){if(s.hideResolutionConflict)return;throw new Error("Prim promise already resolved: "+JSON.stringify(e))}return 1}function a(e,n){s.nextTick(function(){t(e,function(e){e(n)})})}function s(){var t,i=[],n=[];return t={callback:function(e,n){n&&t.errback(n),r(t,"v")?s.nextTick(function(){e(t.v)}):i.push(e)},errback:function(e){r(t,"e")?s.nextTick(function(){e(t.e)}):n.push(e)},finished:function(){return r(t,"e")||r(t,"v")},rejected:function(){return r(t,"e")},resolve:function(e){return o(t)&&(t.v=e,a(i,e)),t},reject:function(e){return o(t)&&(t.e=e,a(n,e)),t},start:function(e){return t.resolve(),t.promise.then(e)},promise:{then:function(n,i){var r=s();return t.callback(function(e){try{(e=n&&"function"==typeof n?n(e):e)&&e.then?e.then(r.resolve,r.reject):r.resolve(e)}catch(e){r.reject(e)}},function(e){var n;try{i&&"function"==typeof i?(n=i(e))&&n.then?n.then(r.resolve,r.reject):r.resolve(n):r.reject(e)}catch(e){r.reject(e)}}),r.promise},fail:function(e){return t.promise.then(null,e)},end:function(){t.errback(function(e){throw e})}}}}return s.serial=function(e){var n=s().resolve().promise;return t(e,function(e){n=n.then(function(){return e()})}),n},s.nextTick="function"==typeof setImmediate?setImmediate:"undefined"!=typeof process&&process.nextTick?process.nextTick:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(e){e()},s}),define("skylark-rjs/logger",[],function(){return{TRACE:0,INFO:1,WARN:2,ERROR:3,SILENT:4,level:0,logPrefix:"",logLevel:function(e){this.level=e},trace:function(e){this.level<=this.TRACE&&this._print(e)},info:function(e){this.level<=this.INFO&&this._print(e)},warn:function(e){this.level<=this.WARN&&this._print(e)},error:function(e){this.level<=this.ERROR&&this._print(e)},_print:function(e){this._sysPrint((this.logPrefix?this.logPrefix+" ":"")+e)},_sysPrint:function(e){var n;console.log(e,n)}}}),define("skylark-rjs/esprima",["skylark-espree"],function(e){return e}),define("skylark-rjs/parse",["./esprima","./lang"],function(esprima,lang){"use strict";function arrayToString(e){var i="[";return e&&e.forEach(function(e,n){i+=(0<n?",":"")+'"'+lang.jsEscape(e)+'"'}),i+="]"}var argPropName="arguments",emptyScope={},mixin=lang.mixin,hasProp=lang.hasProp;function traverse(e,n){var i;if(e){if(!1===n.call(null,e))return!1;for(var r=0,t=Object.keys(e);r<t.length;r++)if("object"==typeof(i=e[t[r]])&&null!==i&&!1===traverse(i,n))return!1}}function traverseBroad(e,n){var i;if(e){if(!1===n.call(null,e))return!1;for(var r=0,t=Object.keys(e);r<t.length;r++)"object"==typeof(i=e[key])&&null!==i&&traverseBroad(i,n)}}function getValidDeps(e){var n;if(e&&"ArrayExpression"===e.type&&e.elements)return n=[],e.elements.some(function(e){"Literal"===e.type&&n.push(e.value)}),n.length?n:void 0}function isFnExpression(e){return e&&("FunctionExpression"===e.type||"ArrowFunctionExpression"===e.type)}function parse(s,e,n,l){l=l||{};var i,r,t,u=[],o="",c=[],f=!0,n=esprima.parse(n);if(parse.recurse(n,function(e,n,i,r,t,o,a){return r=r||[],"define"!==e||i&&i!==s||(f=!1),i?c.push({name:i,deps:r}):u=u.concat(r),"define"===e&&o&&hasProp(a,o)?o:!!l.findNestedDependencies},l),l.insertNeedsDefine&&f&&(o+='require.needsDefine("'+s+'");'),u.length||c.length){for(i=0;i<c.length;i++)o&&(o+="\n"),(r=c[i]).name===s&&(r.deps=r.deps.concat(u),u=[]),t=arrayToString(r.deps),o+='define("'+r.name+'",'+t+");";u.length&&(o&&(o+="\n"),t=arrayToString(u),o+='define("'+s+'",'+t+");")}return o||null}return parse.traverse=traverse,parse.traverseBroad=traverseBroad,parse.isFnExpression=isFnExpression,parse.recurse=function(e,n,i,r){var t,o,a,s,l,u,c,f=i&&i.has;if(r=r||emptyScope,e)if(f&&"IfStatement"===e.type&&e.test.type&&"Literal"===e.test.type)e.test.value?this.recurse(e.consequent,n,i,r):this.recurse(e.alternate,n,i,r);else if(!1!==(a=this.parseNode(e,n,r))){if("string"==typeof a)return a;if("ExpressionStatement"===e.type&&e.expression&&"CallExpression"===e.expression.type&&e.expression.callee&&isFnExpression(e.expression.callee)&&(c=e.expression.callee),(c="UnaryExpression"===e.type&&e.argument&&"CallExpression"===e.argument.type&&e.argument.callee&&isFnExpression(e.argument.callee)?e.argument.callee:c)&&c.params&&c.params.length)for(l=c.params,r=mixin({},r,!0),s=0;s<l.length;s++)"Identifier"===(u=l[s]).type&&(r[u.name]=!0);for(s=0,t=Object.keys(e);s<t.length&&("object"!=typeof(o=e[t[s]])||null===o||"string"!=typeof(a=this.recurse(o,n,i,r))||!hasProp(r,a));s++);return"string"==typeof a&&hasProp(r,a)?a:void 0}},parse.definesRequire=function(e,n){var i=!1,r=!1;return traverse(esprima.parse(n),function(e){if((i="Program"===e.type&&e.body&&e.body.length?e.body.some(function(e){if("VariableDeclaration"===e.type){var n=e.declarations;if(n)if(n.some(function(e){return"VariableDeclarator"===e.type&&e.id&&"Identifier"===e.id.type&&"define"===e.id.name}))return!0}if("FunctionDeclaration"===e.type&&e.id&&"Identifier"===e.id.type&&"define"===e.id.name)return!0}):i)&&parse.hasDefineAmd(e))return!(r=!0)}),i&&r},parse.getAnonDeps=function(e,n){n="string"==typeof n?esprima.parse(n):n,n=this.findAnonDefineFactory(n);return parse.getAnonDepsFromNode(n)},parse.getAnonDepsFromNode=function(e){var n=[];return n=e&&(this.findRequireDepNames(e,n),e=e.params&&e.params.length)?(1<e?["require","exports","module"]:["require"]).concat(n):n},parse.isDefineNodeWithArgs=function(e){return e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"define"===e.callee.name&&e[argPropName]},parse.findAnonDefineFactory=function(e){var i;return traverse(e,function(e){var n;if(parse.isDefineNodeWithArgs(e))return isFnExpression(n=e[argPropName][0])?(i=n,!1):(e=e[argPropName][1],"Literal"===n.type&&isFnExpression(e)?(i=e,!1):void 0)}),i},parse.findConfig=function(fileContents){var jsConfig,foundConfig,stringData,foundRange,quote,quoteMatch,quoteRegExp=/(:\s|\[\s*)(['"])/,astRoot=esprima.parse(fileContents,{loc:!0});return traverse(astRoot,function(e){var n,i=parse.hasRequire(e);if(!i||"require"!==i&&"requirejs"!==i&&"requireConfig"!==i&&"requirejsConfig"!==i){if(n=parse.getRequireObjectLiteral(e))return stringData=parse.nodeToString(fileContents,n),jsConfig=stringData.value,foundRange=stringData.range,!1}else if((n=e[argPropName]&&e[argPropName][0])&&"ObjectExpression"===n.type)return stringData=parse.nodeToString(fileContents,n),jsConfig=stringData.value,foundRange=stringData.range,!1}),jsConfig&&(quoteMatch=quoteRegExp.exec(jsConfig),quote=quoteMatch&&quoteMatch[2]||'"',foundConfig=eval("("+jsConfig+")")),{config:foundConfig,range:foundRange,quote:quote}},parse.getRequireObjectLiteral=function(e){if(e.id&&"Identifier"===e.id.type&&("require"===e.id.name||"requirejs"===e.id.name)&&e.init&&"ObjectExpression"===e.init.type)return e.init},parse.renameNamespace=function(e,r){var t,o=[],n=esprima.parse(e,{loc:!0});return parse.recurse(n,function(e,n,i,r,t){return o.push(t.loc),"define"!==e},{}),o.length&&(t=e.split("\n"),o.reverse(),o.forEach(function(e){var n=e.start.column,e=e.start.line-1,i=t[e];t[e]=i.substring(0,n)+r+"."+i.substring(n,i.length)}),e=t.join("\n")),e},parse.findDependencies=function(e,n,i){var t=[],n=esprima.parse(n);return parse.recurse(n,function(e,n,i,r){r&&(t=t.concat(r))},i),t},parse.findCjsDependencies=function(e,n){var i=[];return traverse(esprima.parse(n),function(e){e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"require"===e.callee.name&&e[argPropName]&&1===e[argPropName].length&&"Literal"===(e=e[argPropName][0]).type&&i.push(e.value)}),i},parse.hasDefDefine=function(e){return"FunctionDeclaration"===e.type&&e.id&&"Identifier"===e.id.type&&"define"===e.id.name},parse.hasDefineAmd=function(e){return e&&"AssignmentExpression"===e.type&&e.left&&"MemberExpression"===e.left.type&&e.left.object&&"define"===e.left.object.name&&e.left.property&&"amd"===e.left.property.name},parse.refsDefineAmd=function(e){return e&&"MemberExpression"===e.type&&e.object&&"define"===e.object.name&&"Identifier"===e.object.type&&e.property&&"amd"===e.property.name&&"Identifier"===e.property.type},parse.hasRequire=function(e){var n,i=e&&e.callee;return e&&"CallExpression"===e.type&&i&&("Identifier"!==i.type||"require"!==i.name&&"requirejs"!==i.name?"MemberExpression"===i.type&&i.object&&"Identifier"===i.object.type&&("require"===i.object.name||"requirejs"===i.object.name)&&i.property&&"config"===i.property.name&&(n=i.object.name+"Config"):n=i.name),n},parse.hasDefine=function(e){return e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"define"===e.callee.name},parse.getNamedDefine=function(e){var n;return traverse(esprima.parse(e),function(e){if(e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"define"===e.callee.name&&e[argPropName]&&e[argPropName][0]&&"Literal"===e[argPropName][0].type)return n=e[argPropName][0].value,!1}),n},parse.getAllNamedDefines=function(e,s){var l=[];return parse.recurse(esprima.parse(e),function(e,n,i,r,t,o,a){return"define"===e&&i&&!s.hasOwnProperty(i)&&l.push(i),"define"!==e||!o||!hasProp(a,o)||o},{}),l},parse.usesAmdOrRequireJs=function(e,n){var t;return traverse(esprima.parse(n),function(e){var n,i,r;parse.hasDefDefine(e)?n="declaresDefine":parse.hasDefineAmd(e)?n="defineAmd":(i=parse.hasRequire(e))?!(r=e[argPropName]&&e[argPropName][0])||"ObjectExpression"!==r.type&&"ArrayExpression"!==r.type||(n=i):parse.hasDefine(e)&&(n="define"),n&&((t=t||{})[n]=!0)}),t},parse.usesCommonJs=function(e,n){var r=null,t=!1;return traverse(esprima.parse(n),function(e){var n,i=e.expression||e.init;"Identifier"!==e.type||"__dirname"!==e.name&&"__filename"!==e.name?"VariableDeclarator"===e.type&&e.id&&"Identifier"===e.id.type&&"exports"===e.id.name?n="varExports":i&&"AssignmentExpression"===i.type&&i.left&&"MemberExpression"===i.left.type&&i.left.object?"module"===i.left.object.name&&i.left.property&&"exports"===i.left.property.name?n="moduleExports":"exports"===i.left.object.name&&i.left.property?n="exports":"MemberExpression"===i.left.object.type&&"module"===i.left.object.object.name&&"exports"===i.left.object.property.name&&"Identifier"===i.left.object.property.type&&(n="moduleExports"):e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"require"===e.callee.name&&e[argPropName]&&1===e[argPropName].length&&"Literal"===e[argPropName][0].type&&(n="require"):n=e.name.substring(2),n&&("varExports"===n?t=!0:"exports"===n&&t||((r=r||{})[n]=!0))}),r},parse.findRequireDepNames=function(e,n){traverse(e,function(e){e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"require"===e.callee.name&&e[argPropName]&&1===e[argPropName].length&&"Literal"===(e=e[argPropName][0]).type&&n.push(e.value)})},parse.parseNode=function(e,n,i){var r,t,o,a=e&&e[argPropName],s=parse.hasRequire(e),l=!1;if("require"===s||"requirejs"===s){if(r=getValidDeps(s=(s=e[argPropName]&&e[argPropName][0])&&"ArrayExpression"!==s.type&&"ObjectExpression"===s.type?e[argPropName][1]:s))return n("require",null,null,r,e)}else{if(parse.hasDefine(e)&&a&&a.length){if(s=a[0],r=a[1],t=a[2],"ArrayExpression"===s.type?(t=r,r=s,s=null):isFnExpression(s)?(t=s,s=r=null):"Identifier"===s.type&&1===a.length&&hasProp(i,s.name)?(l=!0,t=s,s=null):"Literal"!==s.type&&(s=r=t=null),s&&"Literal"===s.type&&r&&(isFnExpression(r)?(t=r,r=null):"ObjectExpression"===r.type?r=t=null:"Identifier"===r.type&&(2===a.length?r=t=null:3===a.length&&isFnExpression(t)&&(r=null))),r&&"ArrayExpression"===r.type)r=getValidDeps(r);else if(isFnExpression(t))(a=parse.getAnonDepsFromNode(t)).length&&(r=a);else if(r||t&&!l)return;return n("define",null,s=s&&"Literal"===s.type?s.value:s,r,e,t&&"Identifier"===t.type?t.name:void 0,i)}if("CallExpression"===e.type&&e.callee&&isFnExpression(e.callee)&&e.callee.body&&e.callee.body.body&&1===e.callee.body.body.length&&"IfStatement"===e.callee.body.body[0].type&&(a=e.callee.body.body[0]).consequent&&a.consequent.body&&"ExpressionStatement"===(l=a.consequent.body[0]).type&&l.expression&&parse.hasDefine(l.expression)&&l.expression.arguments&&1===l.expression.arguments.length&&"Identifier"===l.expression.arguments[0].type&&(traverse(a.test,function(e){if(parse.refsDefineAmd(e))return!(o=!0)}),o))return n("define",null,null,null,l.expression,l.expression.arguments[0].name,i)}},parse.nodeToString=function(e,n){var n=n.loc,e=e.split("\n"),i=(1<n.start.line?e.slice(0,n.start.line-1).join("\n")+"\n":"")+e[n.start.line-1].substring(0,n.start.column),e=n.start.line===n.end.line?e[n.start.line-1].substring(n.start.column,n.end.column):e[n.start.line-1].substring(n.start.column)+"\n"+e.slice(n.start.line,n.end.line-1).join("\n")+"\n"+e[n.end.line-1].substring(0,n.end.column);return{value:e,range:[i.length,i.length+e.length]}},parse.getLicenseComments=function(e,n){var i,r,t,o,a,s,l=esprima.parse(n,{comment:!0,range:!0}),u="",c={},f=-1===n.indexOf("\r")?"\n":"\r\n";if(l.comments)for(a=0;a<l.comments.length;a++){if("Line"===(i=l.comments[a]).type)if(o="//"+i.value+f,r=i,a+1>=l.comments.length)o+=f;else{for(s=a+1;s<l.comments.length&&("Line"===(t=l.comments[s]).type&&t.range[0]===r.range[1]+1);s++)o+="//"+t.value+f,r=t;o+=f,a=s-1}else o="/*"+i.value+"*/"+f+f;c[o]||-1===o.indexOf("license")&&("Block"!==i.type||0!==o.indexOf("/*!"))&&-1===o.indexOf("opyright")&&-1===o.indexOf("(c)")||(u+=o,c[o]=!0)}return u},parse}),define("skylark-rjs/pragma",["./parse","./logger"],function(parse,logger){"use strict";function Temp(){}function create(e,n){Temp.prototype=e;var i,r=new Temp;if(Temp.prototype=null,n)for(i in n)n.hasOwnProperty(i)&&!r.hasOwnProperty(i)&&(r[i]=n[i]);return r}var pragma={conditionalRegExp:/(exclude|include)Start\s*\(\s*["'](\w+)["']\s*,(.*)\)/,useStrictRegExp:/(^|[^{]\r?\n)['"]use strict['"];/g,hasRegExp:/has\s*\(\s*['"]([^'"]+)['"]\s*\)/g,configRegExp:/(^|[^\.])(requirejs|require)(\.config)\s*\(/g,nsWrapRegExp:/\/\*requirejs namespace: true \*\//,apiDefRegExp:/var requirejs,\s*require,\s*define;/,defineCheckRegExp:/typeof(\s+|\s*\(\s*)define(\s*\))?\s*===?\s*["']function["']\s*&&\s*define\s*\.\s*amd/g,defineStringCheckRegExp:/typeof\s+define\s*===?\s*["']function["']\s*&&\s*define\s*\[\s*["']amd["']\s*\]/g,defineTypeFirstCheckRegExp:/\s*["']function["']\s*==(=?)\s*typeof\s+define\s*&&\s*define\s*\.\s*amd/g,defineJQueryRegExp:/typeof\s+define\s*===?\s*["']function["']\s*&&\s*define\s*\.\s*amd\s*&&\s*define\s*\.\s*amd\s*\.\s*jQuery/g,defineHasRegExp:/typeof\s+define\s*==(=)?\s*['"]function['"]\s*&&\s*typeof\s+define\.amd\s*==(=)?\s*['"]object['"]\s*&&\s*define\.amd/g,defineTernaryRegExp:/typeof\s+define\s*===?\s*['"]function["']\s*&&\s*define\s*\.\s*amd\s*\?\s*define/,defineExistsRegExp:/\s+typeof\s+define\s*!==?\s*['"]undefined["']\s*/,defineExistsAndAmdRegExp:/typeof\s+define\s*!==?\s*['"]undefined["']\s*&&\s*define\s*\.\s*amd\s*/,amdefineRegExp:/if\s*\(\s*typeof define\s*\!==\s*['"]function['"]\s*\)\s*\{\s*[^\{\}]+amdefine[^\{\}]+\}/g,removeStrict:function(e,n){return n.useStrict?e:e.replace(pragma.useStrictRegExp,"$1")},namespace:function(e,n,i){return e=n&&(e=e.replace(pragma.configRegExp,"$1"+n+".$2$3("),e=(e=(e=(e=(e=(e=(e=(e=(e=parse.renameNamespace(e,n)).replace(pragma.defineTernaryRegExp,"typeof "+n+".define === 'function' && "+n+".define.amd ? "+n+".define")).replace(pragma.defineJQueryRegExp,"typeof "+n+".define === 'function' && "+n+".define.amd && "+n+".define.amd.jQuery")).replace(pragma.defineHasRegExp,"typeof "+n+".define === 'function' && typeof "+n+".define.amd === 'object' && "+n+".define.amd")).replace(pragma.defineExistsAndAmdRegExp,"typeof "+n+".define !== 'undefined' && "+n+".define.amd")).replace(pragma.defineCheckRegExp,"typeof "+n+".define === 'function' && "+n+".define.amd")).replace(pragma.defineStringCheckRegExp,"typeof "+n+".define === 'function' && "+n+".define['amd']")).replace(pragma.defineTypeFirstCheckRegExp,"'function' === typeof "+n+".define && "+n+".define.amd")).replace(pragma.defineExistsRegExp,"typeof "+n+".define !== 'undefined'"),pragma.apiDefRegExp.test(e)&&-1===e.indexOf("if (!"+n+" || !"+n+".requirejs)")&&(e="var "+n+";(function () { if (!"+n+" || !"+n+".requirejs) {\nif (!"+n+") { "+n+" = {}; } else { require = "+n+"; }\n"+e+"\n"+n+".requirejs = requirejs;"+n+".require = require;"+n+".define = define;\n}\n}());"),pragma.nsWrapRegExp.test(e))?"(function () {\nvar require = "+n+".require,requirejs = "+n+".requirejs,define = "+n+".define;\n"+(e=e.replace(pragma.nsWrapRegExp,""))+"\n}());":e},process:function(fileName,fileContents,config,onLifecycleName,pluginCollector){var foundIndex=-1,startIndex=0,lineEndIndex,conditionLine,matches,type,marker,condition,isTrue,endRegExp,endMatches,endMarkerIndex,shouldInclude,startLength,lifecycleHas,deps,i,dep,moduleName,collectorMod,lifecyclePragmas,pragmas=config.pragmas,hasConfig=config.has,kwArgs=pragmas;if(onLifecycleName&&(lifecyclePragmas=config["pragmas"+onLifecycleName],lifecycleHas=config["has"+onLifecycleName],lifecyclePragmas&&(pragmas=create(pragmas||{},lifecyclePragmas)),lifecycleHas)&&(hasConfig=create(hasConfig||{},lifecycleHas)),hasConfig&&(fileContents=fileContents.replace(pragma.hasRegExp,function(e,n){return hasConfig.hasOwnProperty(n)?!!hasConfig[n]:e})),!config.skipPragmas)for(;-1!==(foundIndex=fileContents.indexOf("//>>",startIndex));)if(lineEndIndex=fileContents.indexOf("\n",foundIndex),-1===lineEndIndex&&(lineEndIndex=fileContents.length-1),startIndex=lineEndIndex+1,conditionLine=fileContents.substring(foundIndex,lineEndIndex+1),matches=conditionLine.match(pragma.conditionalRegExp),matches){type=matches[1],marker=matches[2],condition=matches[3],isTrue=!1;try{isTrue=!!eval("("+condition+")")}catch(e){throw"Error in file: "+fileName+". Conditional comment: "+conditionLine+" failed with this error: "+e}if(endRegExp=new RegExp("\\/\\/\\>\\>\\s*"+type+"End\\(\\s*['\"]"+marker+"['\"]\\s*\\)","g"),endMatches=endRegExp.exec(fileContents.substring(startIndex,fileContents.length)),!endMatches)throw"Error in file: "+fileName+". Cannot find end marker for conditional comment: "+conditionLine;endMarkerIndex=startIndex+endRegExp.lastIndex-endMatches[0].length,lineEndIndex=fileContents.indexOf("\n",endMarkerIndex),-1===lineEndIndex&&(lineEndIndex=fileContents.length-1),shouldInclude="exclude"===type&&!isTrue||"include"===type&&isTrue,startLength=startIndex-foundIndex,fileContents=fileContents.substring(0,foundIndex)+(shouldInclude?fileContents.substring(startIndex,endMarkerIndex):"")+fileContents.substring(lineEndIndex+1,fileContents.length),startIndex=foundIndex}if(config.optimizeAllPluginResources&&pluginCollector)try{if(deps=parse.findDependencies(fileName,fileContents),deps.length)for(i=0;i<deps.length;i++)dep=deps[i],-1!==dep.indexOf("!")&&(moduleName=dep.split("!")[0],collectorMod=pluginCollector[moduleName],collectorMod=collectorMod||(pluginCollector[moduleName]=[]),collectorMod.push(dep))}catch(eDep){logger.error("Parse error looking for plugin resources in "+fileName+", skipping.")}return config.keepAmdefine||(fileContents=fileContents.replace(pragma.amdefineRegExp,"")),"OnSave"===onLifecycleName&&config.namespace&&(fileContents=pragma.namespace(fileContents,config.namespace,onLifecycleName)),pragma.removeStrict(fileContents,config)}};return pragma}),define("skylark-rjs/uglifyjs",["skylark-uglifyjs"],function(e){return e}),define("skylark-rjs/source-map",["skylark-sourcemap"],function(e){return e}),define("skylark-rjs/optimize",["./lang","./logger","./parse","./pragma","./uglifyjs","./source-map"],function(v,E,l,u,p,e){"use strict";var c,C=/\@import\s+(url\()?\s*([^);]+)\s*(\))?([\w, ]*)(;)?/gi,P=/\/\*[^\*]*@import[^\*]*\*\//g,n=/\url\(\s*([^\)]+)\s*\)?/g,f=/^\w+:/;e.SourceMapGenerator,e.SourceMapConsumer;function w(e){return e="'"!==(e=e.replace(/\s+$/,"")).charAt(0)&&'"'!==e.charAt(0)?e:e.substring(1,e.length-1)}function F(s,l,e,u){return e.replace(n,function(e,n){var i,r,t=w(n),o=(t=t.replace(v.backSlashRegExp,"/")).charAt(0),a=f.test(t);for("/"===o||"#"===o||a?a||E.trace(s+"\n  URL not a relative URL, skipping: "+n):n=u+l+t,r=(i=n.split("/")).length-1;0<r;r--)"."===i[r]?i.splice(r,1):".."===i[r]&&0!==r&&".."!==i[r-1]&&(i.splice(r-1,2),--r);return"url("+i.join("/")+")"})}return c={jsFile:function(e,n,i,r,t){var o=r.env.fs;n=n||o.readFile(e),n=c.js(e,n,i,r,t),o.saveUtf8File(i,n)},js:function(n,e,i,r,t){var o=String(r.optimize).split("."),a=o[0],o="keepLines"===o[1],s="";if(e=u.process(n,e,r=r||{},"OnSave",t),a&&"none"!==a){if(!(t=c.optimizers[a]))throw new Error('optimizer with name of "'+a+'" not found for this environment');a=r[a]||{},r.generateSourceMaps&&(a.generateSourceMaps=!!r.generateSourceMaps,a._buildSourceMap=r._buildSourceMap);try{if(r.preserveLicenseComments)try{s=l.getLicenseComments(n,e)}catch(e){throw new Error("Cannot parse file: "+n+" for comments. Skipping it. Error is:\n"+e.toString())}r.generateSourceMaps&&s&&(a.preamble=s,s=""),e=s+t(n,e,i,o,a,r.env.fs),a._buildSourceMap&&a._buildSourceMap!==r._buildSourceMap&&(r._buildSourceMap=a._buildSourceMap)}catch(e){if(r.throwWhen&&r.throwWhen.optimize)throw e;E.error(e)}}else r._buildSourceMap&&(r._buildSourceMap=null);return e},cssFile:function(n,e,i){var r,t,o,a=i.env.fs,s=a.readFile(n),l=function c(f,e,p,d,g,n,m){var i=(f=f.replace(v.backSlashRegExp,"/")).lastIndexOf("/"),h=-1!==i?f.substring(0,i+1):"",x=[],b=[],y=m.env.fs;return e=e.replace(P,""),p&&","!==p.charAt(p.length-1)&&(p+=","),e=e.replace(C,function(n,e,i,r,t){if(t&&"all"!==t.replace(/^\s\s*/,"").replace(/\s\s*$/,""))return b.push(f),n;if(i=w(i),p&&-1!==p.indexOf(i+","))return n;i=i.replace(v.backSlashRegExp,"/");try{var o,a,s,l="/"===i.charAt(0)?i:h+i,u=y.readFile(l);return g[l]?"":(g[l]=!0,u=(s=c(l,u,p,d,g,!1,m)).fileContents,s.importList.length&&x.push.apply(x,s.importList),s.skippedList.length&&b.push.apply(b,s.skippedList),a=-1!==(o=i.lastIndexOf("/"))?i.substring(0,o+1):"",u=F(i,a=a.replace(/^\.\//,""),u,d),x.push(l),u)}catch(e){return E.warn(f+"\n  Cannot inline css import, skipping: "+i),n}}),d&&n&&(e=F(f,"",e,d)),{importList:x,skippedList:b,fileContents:e}}(n,s,i.cssImportIgnore,i.cssPrefix,{},!0,i),u=l.skippedList.length?s:l.fileContents;l.skippedList.length&&E.warn("Cannot inline @imports for "+n+",\nthe following files had media queries in them:\n"+l.skippedList.join("\n"));try{if(-1===i.optimizeCss.indexOf(".keepComments"))for(r=0;-1!==(r=u.indexOf("/*",r));){if(-1===(t=u.indexOf("*/",r+2)))throw"Improper comment in CSS file: "+n;o=u.substring(r,t),r=!i.preserveLicenseComments||-1===o.indexOf("license")&&-1===o.indexOf("opyright")&&-1===o.indexOf("(c)")?(u=u.substring(0,r)+u.substring(t+2,u.length),0):t}u=-1===i.optimizeCss.indexOf(".keepLines")?(u=(u=(u=u.replace(/[\r\n]/g," ")).replace(/\s+/g," ")).replace(/\{\s/g,"{")).replace(/\s\}/g,"}"):(u=u.replace(/(\r\n)+/g,"\r\n")).replace(/(\n)+/g,"\n"),-1===i.optimizeCss.indexOf(".keepWhitespace")&&(u=(u=(u=(u=(u=(u=u.replace(/^[ \t]+/gm,"")).replace(/[ \t]+$/gm,"")).replace(/(;|:|\{|}|,)[ \t]+/g,"$1")).replace(/[ \t]+(\{)/g,"$1")).replace(/([ \t])+/g,"$1")).replace(/^[ \t]*[\r\n]/gm,""))}catch(e){u=s,E.error("Could not optimized CSS file: "+n+", error: "+e)}return a.saveUtf8File(e,u),s="\n"+e.replace(i.dir,"")+"\n----------------\n",l.importList.push(n),s+=l.importList.map(function(e){return e.replace(i.dir,"")}).join("\n"),{importList:l.importList,buildText:s+"\n"}},css:function(e,n){var i,r,t,o="",a=[],s=n.dir&&n.removeCombined,l=n.env.fs;if(-1!==n.optimizeCss.indexOf("standard")){if(t=l.getFilteredFileList(e,/\.css$/,!0))for(i=0;i<t.length;i++)r=t[i],E.trace("Optimizing ("+n.optimizeCss+") CSS file: "+r),o+=(r=c.cssFile(r,r,n)).buildText,s&&(r.importList.pop(),a=a.concat(r.importList));s&&a.forEach(function(e){l.exists(e)&&l.deleteFile(e)})}return o},optimizers:{uglify:function(n,e,i,r,t,o){var a,s,l,u={},c=i+".map",f=n&&n.split("/").pop();v.mixin(u,t=t||{},!0),t.preamble&&(u.output={preamble:t.preamble}),t.generateSourceMaps&&(i||t._buildSourceMap)&&(u.outSourceMap=f+".map",t._buildSourceMap?(s=JSON.parse(t._buildSourceMap),u.inSourceMap=s):o.exists(c)&&(u.inSourceMap=c,s=JSON.parse(o.readFile(c)))),E.trace("Uglify file: "+n);try{a=p.minify(e,u,f+".src.js"),u.outSourceMap&&a.map?(l=a.map,s||t._buildSourceMap||o.saveFile(i+".src.js",e),e=a.code,t._buildSourceMap?t._buildSourceMap=l:o.saveFile(i+".map",l)):e=a.code}catch(e){c=e.toString(),f=/SyntaxError/.test(c);throw console.error(e),new Error("Cannot uglify file: "+n+". Skipping it. Error is:\n"+c+(f?"\n\nIf the source uses ES2015 or later syntax, please pass \"optimize: 'none'\" to r.js and use an ES2015+ compatible minifier after running r.js. The included UglifyJS only understands ES5 or earlier syntax.":""))}return e}}}}),define("skylark-rjs/transform",["./esprima","./parse","./logger","./lang"],function(g,m,h,x){"use strict";var p,f=/^([ \t]+)/,d=/\{[\r\n]+([ \t]+)/,b=/^[_A-Za-z]([A-Za-z\d_]*)$/,y={"\n":/\n/g,"\r\n":/\r\n/g};return p={toTransport:function(l,t,u,n,o,i){i=i||{};function e(e){return e=i.useSourceUrl?'eval("'+x.jsEscape(e)+"\\n//# sourceURL="+(0===u.indexOf("/")?"":"/")+u+'");\n':e}var r,a,s,c,f=0,p=!1,d=[];try{r=g.parse(n,{loc:!0})}catch(e){return h.trace("toTransport skipping "+u+": "+e.toString()),n}return m.traverse(r,function(e){var n,i,r,t,o,a,s;if("VariableDeclarator"===e.type&&e.id&&"define"===e.id.name&&"Identifier"===e.id.type&&!((s=e.init)&&s.callee&&"CallExpression"===s.callee.type&&s.callee.callee&&"Identifier"===s.callee.callee.type&&"require"===s.callee.callee.name&&s.callee.arguments&&1===s.callee.arguments.length&&"Literal"===s.callee.arguments[0].type&&s.callee.arguments[0].value&&-1!==s.callee.arguments[0].value.indexOf("amdefine")))return!1;if(((s=l&&"CallExpression"===e.type&&e.callee&&e.callee.object&&"Identifier"===e.callee.object.type&&e.callee.object.name===l&&"Identifier"===e.callee.property.type&&"define"===e.callee.property.name)||m.isDefineNodeWithArgs(e))&&(n=e.arguments)&&n.length){if(i=(a=n[0]).loc,1===n.length)"Identifier"===a.type?(t=!0,o="empty"):m.isFnExpression(a)?(r=a,t=!0,o="scan"):"ObjectExpression"===a.type||"Literal"===a.type&&"number"==typeof a.value||"UnaryExpression"===a.type&&"-"===a.operator&&a.argument&&"Literal"===a.argument.type&&"number"==typeof a.argument.value?(t=!0,o="skip"):"MemberExpression"===a.type&&a.object&&a.property&&"Identifier"===a.property.type&&(t=!0,o="empty");else if("ArrayExpression"===a.type)t=!0,o="skip";else{if("Literal"!==a.type||"string"!=typeof a.value)return;t=!1,o=2===n.length&&m.isFnExpression(n[1])?(r=n[1],"scan"):"skip"}if((a={foundId:void 0,needsId:t,depAction:o,namespaceExists:s,node:e,defineLoc:e.loc,firstArgLoc:i,factoryNode:r,sourceUrlData:void 0}).needsId){if(c)return h.trace(u+" has more than one anonymous define. May be a built file from another build system like, Ender. Skipping normalization."),!(d=[]);c=a,d.push(a)}else"scan"===o&&(1<(f+=1)?p||(d=c?[c]:[],p=!0):d.push(a))}}),d.length&&(d.reverse(),a=n.split("\n"),s=function(e,n){var i=e.start.column,e=e.start.line-1,r=a[e];a[e]=r.substring(0,i)+n+r.substring(i,r.length)},d.forEach(function(e){var n,i="",r="";e.needsId&&t&&(i+="'"+t+"',"),"scan"===e.depAction&&(r=(n=m.getAnonDepsFromNode(e.factoryNode)).length?"["+n.map(function(e){return"'"+e+"'"})+"]":"[]",r+=",",e.factoryNode?s(e.factoryNode.loc,r):i+=r),i&&s(e.firstArgLoc,i),l&&!e.namespaceExists&&s(e.defineLoc,l+"."),o&&o(e)}),n=a.join("\n")),e(n)},modifyConfig:function(e,n){var i=m.findConfig(e),r=i.config;return(r=r&&n(r))?p.serializeConfig(r,e,i.range[0],i.range[1],{quote:i.quote}):e},serializeConfig:function(e,n,i,r,t){var o,a="",s=n.substring(0,i),l=n.substring(i,r),u=-1===l.indexOf("\r")?"\n":"\r\n",c=s.lastIndexOf("\n");return(c=f.exec(s.substring((c=-1===c?0:c)+1,i)))&&c[1]&&(a=c[1]),o=!(o=(c=d.exec(l))&&c[1]?c[1]:o)||o.length<a?"  ":o.substring(a.length),i=new RegExp("("+u+")"+o,"g"),l=p.objectToString(e,{indent:o,lineReturn:u,outDentRegExp:i,quote:t&&t.quote}),c=a,e=u,s+l.replace(y[e],"$&"+c)+n.substring(r)},objectToString:function(e,i,n){var r,t,o=!0,a="",s=i.lineReturn,l=i.indent,u=i.outDentRegExp,c=i.quote||'"',f=(n=n||"")+l;return null===e?a="null":void 0===e?a="undefined":"number"==typeof e||"boolean"==typeof e?a=e:"string"==typeof e?a=c+x.jsEscape(e)+c:x.isArray(e)?(x.each(e,function(e,n){a+=(0!==n?","+s:"")+f+p.objectToString(e,i,f)}),r="[",t="]"):x.isFunction(e)||x.isRegExp(e)?a=e.toString().replace(u,"$1"):(x.eachProp(e,function(e,n){a+=(o?"":","+s)+f+(b.test(n)?n:c+x.jsEscape(n)+c)+": "+p.objectToString(e,i,f),o=!1}),r="{",t="}"),a=r?r+s+a+s+n+t:a}}}),define("skylark-rjs/commonJs",["./parse"],function(t){"use strict";var u={useLog:!0,convertDir:function(e,n,i){var r,t,o,a,s=/\.js$/,l=i.getFilteredFileList(e,/\w/,!0);if(e=e.replace(/\\/g,"/"),n=n.replace(/\\/g,"/"),"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),"/"===n.charAt(n.length-1)&&(n=n.substring(0,n.length-1)),l&&l.length)for(r=0;r<l.length;r++)o=(t=l[r]).replace(e,n),s.test(t)?(a=i.readFile(t),a=u.convert(t,a,config),i.saveUtf8File(o,a)):i.copyFile(t,o,!0);else u.useLog&&("convert"===e?console.log("\n\n"+u.convert(n,i.readFile(n),config)):console.log("No files to convert in directory: "+e))},convert:function(n,e){try{var i="",r=t.usesCommonJs(n,e);if(t.usesAmdOrRequireJs(n,e)||!r)return e;e="define(function (require, exports, module) {"+(i=r.dirname||r.filename?'var __filename = module.uri || "", __dirname = __filename.substring(0, __filename.lastIndexOf("/") + 1); ':i)+e+"\n});\n"}catch(e){console.log("commonJs.convert: COULD NOT CONVERT: "+n+", so skipping it. Error was: "+e)}return e}};return u}),define("skylark-rjs/requirePatch",["./pragma","./parse","./lang","./logger","./commonJs","./prim"],function(pragma,parse,lang,logger,commonJs,prim){var allowRun=!0,hasProp=lang.hasProp,falseProp=lang.falseProp,getOwn=lang.getOwn,useStrictRegExp=/['"]use strict['"];/g,absoluteUrlRegExp=/^[\/\\]|^\w:/;return prim.hideResolutionConflict=!0,function(config){var fs,layer,pluginBuilderRegExp,oldNewContext,oldDef,exports,module;function normalizeUrlWithBase(e,n,i){return i=require.jsExtRegExp.test(n)&&!absoluteUrlRegExp.test(i)?(e.config.dir||e.config.dirBaseUrl)+i:i}allowRun&&(allowRun=!1,fs=config.env.fs,pluginBuilderRegExp=/(["']?)pluginBuilder(["']?)\s*[=\:]\s*["']([^'"\s]+)["']/,oldNewContext=require.s.newContext,require._cacheReset=function(){require._cachedRawText={},require._cachedFileContents={},require._cachedDefinesRequireUrls={}},require._cacheReset(),require._isSupportedBuildUrl=function(e){return-1===e.indexOf("://")&&-1===e.indexOf("?")&&0!==e.indexOf("empty:")&&0!==e.indexOf("//")||(layer.ignoredUrls[e]||(-1===e.indexOf("empty:")&&logger.info("Cannot optimize network URL, skipping: "+e),layer.ignoredUrls[e]=!0),!1)},require.s.newContext=function(name){var context=oldNewContext(name),oldEnable=context.enable,moduleProto=context.Module.prototype,oldInit=moduleProto.init,oldCallPlugin=moduleProto.callPlugin;return"_"===name&&(context.nextTick=function(e){e()},context.needFullExec={},context.fullExec={},context.plugins={},context.buildShimExports={},context.makeShimExports=function(n){var e=context.config.wrapShim?function(){var e="return ";return n.exports&&-1===n.exports.indexOf(".")&&(e+="root."+n.exports+" = "),n.init&&(e+="("+n.init.toString().replace(useStrictRegExp,"")+".apply(this, arguments))"),n.init&&n.exports&&(e+=" || "),n.exports&&(e+=n.exports),e+=";"}:function(){return"(function (global) {\n    return function () {\n        var ret, fn;\n"+(n.init?"       fn = "+n.init.toString().replace(useStrictRegExp,"")+";\n        ret = fn.apply(global, arguments);\n":"")+(n.exports?"        return ret || global."+n.exports+";\n":"        return ret;\n")+"    };\n}(this))"};return e},context.enable=function(e,n){var i=e.id,r=n&&n.map.id,t=context.needFullExec,o=context.fullExec,a=getOwn(context.registry,i);return a&&!a.defined?r&&getOwn(t,r)&&(t[i]=e):(getOwn(t,i)&&falseProp(o,i)||r&&getOwn(t,r)&&falseProp(o,i))&&context.require.undef(i),oldEnable.apply(context,arguments)},context.load=function(moduleName,url){var contents,pluginBuilderMatch,builderName,shim,shimExports;0===url.indexOf("empty:")&&delete context.urlFetched[url],require._isSupportedBuildUrl(url)?(url=normalizeUrlWithBase(context,moduleName,url),layer.buildPathMap[moduleName]=url,layer.buildFileToModule[url]=moduleName,hasProp(context.plugins,moduleName)&&(context.needFullExec[moduleName]=!0),prim().start(function(){if(!hasProp(require._cachedFileContents,url)||!falseProp(context.needFullExec,moduleName)&&!getOwn(context.fullExec,moduleName))return require._cacheReadAsync(url,void 0,fs).then(function(e){contents=e,!context.config.cjsTranslate||context.config.shim&&lang.hasProp(context.config.shim,moduleName)||(contents=commonJs.convert(url,contents)),context.config.onBuildRead&&(contents=context.config.onBuildRead(moduleName,url,contents)),contents=pragma.process(url,contents,context.config,"OnExecute");try{!layer.existingRequireUrl&&parse.definesRequire(url,contents)&&(layer.existingRequireUrl=url,require._cachedDefinesRequireUrls[url]=!0)}catch(e){throw new Error("Parse error using esprima for file: "+url+"\n"+e)}}).then(function(){return hasProp(context.plugins,moduleName)&&(pluginBuilderMatch=pluginBuilderRegExp.exec(contents))?(builderName=context.makeModuleMap(pluginBuilderMatch[3],context.makeModuleMap(moduleName),null,!0).id,require._cacheReadAsync(context.nameToUrl(builderName),void 0,fs)):contents}).then(function(e){contents=e;try{falseProp(context.needFullExec,moduleName)&&(contents=parse(moduleName,url,contents,{insertNeedsDefine:!0,has:context.config.has,findNestedDependencies:context.config.findNestedDependencies}))}catch(e){throw new Error("Parse error using esprima for file: "+url+"\n"+e)}require._cachedFileContents[url]=contents});contents=require._cachedFileContents[url],!layer.existingRequireUrl&&require._cachedDefinesRequireUrls[url]&&(layer.existingRequireUrl=url)}).then(function(){contents&&eval(contents);try{getOwn(context.needFullExec,moduleName)&&(shim=getOwn(context.config.shim,moduleName),shim)&&shim.exports&&(shimExports=eval(shim.exports),void 0!==shimExports)&&(context.buildShimExports[moduleName]=shimExports),context.completeLoad(moduleName)}catch(e){throw e.moduleTree||(e.moduleTree=[]),e.moduleTree.push(moduleName),e}}).then(null,function(e){throw e.fileName||(e.fileName=url),e}).end()):context.completeLoad(moduleName)},context.execCb=function(e,n,i,r){var t=getOwn(layer.context.buildShimExports,e);return t||(n.__requireJsBuild||getOwn(layer.context.needFullExec,e)?n.apply(r,i):void 0)},moduleProto.init=function(e){return context.needFullExec[this.map.id]&&lang.each(e,lang.bind(this,function(e){"string"==typeof e&&(e=context.makeModuleMap(e,this.map.isDefine?this.map:this.map.parentMap,!1,!0)),context.fullExec[e.id]||context.require.undef(e.id)})),oldInit.apply(this,arguments)},moduleProto.callPlugin=function(){var e=this.map,n=context.makeModuleMap(e.prefix),i=n.id,r=getOwn(context.registry,i);return context.plugins[i]=!0,context.needFullExec[i]=e,!falseProp(context.fullExec,i)||r&&!r.defined||context.require.undef(n.id),oldCallPlugin.apply(this,arguments)}),context},delete require.s.contexts._,require._buildReset=function(){var e=require.s.contexts._;return delete require.s.contexts._,require({}),layer=require._layer={buildPathMap:{},buildFileToModule:{},buildFilePaths:[],pathAdded:{},modulesWithNames:{},needsDefine:{},existingRequireUrl:"",ignoredUrls:{},context:require.s.contexts._},e},require._buildReset(),oldDef=define,define=function(e){return"string"==typeof e&&falseProp(layer.needsDefine,e)&&(layer.modulesWithNames[e]=!0),oldDef.apply(require,arguments)},define.amd=oldDef.amd,require._readFile=fs.readFile,require._fileExists=function(e){return fs.exists(e)},require.onResourceLoad=function(i,e){var r=e.id;i.plugins&&lang.hasProp(i.plugins,r)&&lang.eachProp(i.needFullExec,function(e,n){!0!==e&&e.prefix===r&&e.unnormalized&&(e=i.makeModuleMap(e.originalName,e.parentMap),i.needFullExec[e.id]=e)}),i.needFullExec&&getOwn(i.needFullExec,r)&&(i.fullExec[r]=e),e.prefix?falseProp(layer.pathAdded,r)&&(layer.buildFilePaths.push(r),layer.buildPathMap[r]=r,layer.buildFileToModule[r]=r,layer.modulesWithNames[r]=!0,layer.pathAdded[r]=!0):e.url&&require._isSupportedBuildUrl(e.url)&&(e=normalizeUrlWithBase(i,r,e.url),!layer.pathAdded[e])&&getOwn(layer.buildPathMap,r)&&(layer.buildFilePaths.push(e),layer.pathAdded[e]=!0)},require.needsDefine=function(e){layer.needsDefine[e]=!0})}}),define("skylark-rjs/build",["./rjs","./lang","./prim","./logger","./parse","./optimize","./pragma","./transform","./requirePatch","./commonJs","./source-map"],function(require,lang,prim,logger,parse,optimize,pragma,transform,requirePatch,commonJs,sourceMap){"use strict";var build,SourceMapGenerator=sourceMap.SourceMapGenerator,hasProp=lang.hasProp,getOwn=lang.getOwn,falseProp=lang.falseProp,endsWithSemiColonRegExp=/;\s*$/,endsWithSlashRegExp=/[\/\\]$/,resourceIsModuleIdRegExp=/^[\w\/\\\.]+$/,deepCopyProps={layer:!0};function copyConfig(e){return lang.deeplikeCopy(e,deepCopyProps)}function makeBuildBaseConfig(e){return{appDir:"",pragmas:{},paths:{},optimize:"uglify",optimizeCss:"standard.keepLines.keepWhitespace",inlineText:!0,isBuild:!0,optimizeAllPluginResources:!1,findNestedDependencies:!1,preserveLicenseComments:!0,writeBuildTxt:!0,waitSeconds:30,dirExclusionRegExp:e.dirExclusionRegExp,_buildPathToModuleIndex:{}}}function addSemiColon(e,n){return n.skipSemiColonInsertion||endsWithSemiColonRegExp.test(e)?e:e+";"}function endsWithSlash(e){return"/"!==e.charAt(e.length-1)&&(e+="/"),e}function endsWithNewLine(e){return"\n"!==e.charAt(e.length-1)&&(e+="\n"),e}function makeWriteFile(r,t){function o(e,n){logger.trace("Saving plugin-optimized file: "+e),file.saveUtf8File(e,n)}return o.asModule=function(e,n,i){o(n,build.toTransport(r,e,n,i,t))},o}function appendToFileContents(e,n,i,r,t,o){var a,s,l,u,c;if(o){for(r=r.out?r.baseUrl:t&&t._buildPath?t._buildPath:"",a=1===(t=i.split("!")).length?build.makeRelativeFilePath(r,i):(s=t.shift(),t=t.join("!"),resourceIsModuleIdRegExp.test(t)?build.makeRelativeFilePath(r,require.toUrl(t))+"!"+s:i),l=e.split("\n").length-1,u=n.split("\n").length,c=1;c<=u;c+=1)o.addMapping({generated:{line:l+c,column:0},original:{line:c,column:0},source:a});o.setSourceContent(a,n)}return e+=n}function stringDotToObj(i,e,r){var t=e.split(".");t.forEach(function(e,n){n===t.length-1?i[e]=r:(falseProp(i,e)&&(i[e]={}),i=i[e])})}function mixConfig(e,n,i){var r,t,o;for(r in n)hasProp(n,r)&&(t=n[r],o=lang.isArray(t),"object"!=typeof t||!t||o||lang.isFunction(t)||lang.isRegExp(t)?o?i||(o=e[r],lang.isArray(o)?e[r]=o.concat(t):e[r]=t):e[r]=t:"map"===r?(e.map||(e.map={}),lang.deepMix(e.map,n.map)):e[r]=lang.mixin({},e[r],t,!0));lang.hasProp(e,"logLevel")&&logger.logLevel(e.logLevel)}function flattenWrapFile(e,o,a){var s=e.wrap,n=o+"File",i="__"+o+"Map",l=e.env.fs;if("string"!=typeof s[o]&&s[n])s[o]="","string"==typeof s[n]&&(s[n]=[s[n]]),s[i]=[],s[n].forEach(function(e){var r=build.makeAbsPath(e,a,l),t=endsWithNewLine(l.readFile(r));s[i].push(function(e,n,i){return appendToFileContents(e,t,r,n,null,i)}),s[o]+=t});else if(null===s[o]||void 0===s[o])s[o]="";else{if("string"!=typeof s[o])throw new Error("wrap."+o+" or wrap."+n+" malformed");s[o]=endsWithNewLine(s[o]),s[i]=[function(e,n,i){var r=build.makeAbsPath("config-wrap-"+o+"-default.js",a,l);return appendToFileContents(e,s[o],r,n,null,i)}]}}function normalizeWrapConfig(e,r){var t=e.env.fs;try{e.wrap&&(!0===e.wrap?e.wrap={start:"(function () {\n",end:"}());",__startMap:[function(e,n,i){return appendToFileContents(e,"(function () {\n",build.makeAbsPath("config-wrap-start-default.js",r,t),n,null,i)}],__endMap:[function(e,n,i){return appendToFileContents(e,"}());",build.makeAbsPath("config-wrap-end-default.js",r,t),n,null,i)}]}:(flattenWrapFile(e,"start",r),flattenWrapFile(e,"end",r)))}catch(e){throw new Error("Malformed wrap config: "+e.toString())}}return prim.nextTick=function(e){e()},require._cacheReadAsync=function(n,e,i){var r;return lang.hasProp(require._cachedRawText,n)?((r=prim()).resolve(require._cachedRawText[n]),r.promise):i.readFileAsync(n,e).then(function(e){return require._cachedRawText[n]=e})},build=function(i){var e,n,r,t,o,a,s,l,u,c=/( {4}at[^\n]+)\n/;return prim().start(function(){if(!i||lang.isArray(i)){if(!i||i.length<1)return void logger.error("build.js buildProfile.js\nwhere buildProfile.js is the name of the build file (see example.build.js for hints on how to make a build file).");-1===i[0].indexOf("=")&&(e=i[0],i.splice(0,1)),(n=build.convertArrayToObject(i)).buildFile=e}else n=i;return build._run(n)}).then(null,function(e){var n;if(r=e.toString(),a=e.moduleTree,(o=c.exec(r))&&(r+=r.substring(0,o.index+o[0].length+1)),a&&0<a.length){for(r+="\nIn module tree:\n",s=a.length-1;-1<s;s--)if(u=a[s]){for(l=a.length-s;-1<l;l--)r+="  ";r+=u+"\n"}logger.error(r)}throw t=e.stack,"string"==typeof i&&-1!==i.indexOf("stacktrace=true")?r+="\n"+t:!o&&t&&(o=c.exec(t))&&(r+="\n"+o[0]||""),(n=new Error(r)).originalError=e,n})},build._run=function(n){var i,a,r,s,t,l,u,o,c,f,p,d,g,m,h,x,b,y={},v="",E={};return prim().start(function(){if(l=build.createConfig(n),r=l.paths,b=l.env.fs,requirePatch(l),l.dir&&!l.keepBuildDir&&b.exists(l.dir)&&b.deleteFile(l.dir),!l.out&&!l.cssIn)if(b.copyDir(l.appDir||l.baseUrl,l.dir,/\w/,!0),i={},l.appDir)for(var e in r)hasProp(r,e)&&(i[e]=r[e].replace(l.appDir,l.dir));else for(e in r)hasProp(r,e)&&(0===r[e].indexOf(l.baseUrl)?i[e]=r[e].replace(l.baseUrl,l.dirBaseUrl):(i[e]="empty:"===r[e]?"empty:":e,0!==(o=r[e]).indexOf("/")&&-1===o.indexOf(":")&&(o=l.baseUrl+o),f=l.dirBaseUrl+i[e],"empty:"!==o&&(b.exists(o)&&b.isDirectory(o)?b.copyDir(o,f,/\w/,!0):(o+=".js",f+=".js",b.copyFile(o,f)))));require({baseUrl:l.baseUrl,paths:r,packagePaths:l.packagePaths,packages:l.packages}),c=require.s.contexts._,(u=l.modules)&&u.forEach(function(e){if(e.name&&(e._sourcePath=c.nameToUrl(e.name),!(b.exists(e._sourcePath)||e.create||-1!==e.name.indexOf("!")||l.rawText&&lang.hasProp(l.rawText,e.name))))throw new Error("ERROR: module path does not exist: "+e._sourcePath+" for module named: "+e.name+". Path is relative to: "+b.absPath("."))}),l.out?(require(l),l.cssIn||(l.modules[0]._buildPath="function"==typeof l.out?"FUNCTION":l.out)):l.cssIn||(t={baseUrl:l.dirBaseUrl,paths:i},lang.mixin(t,l),require(t),u&&u.forEach(function(e){if(e.name){if(e._buildPath=c.nameToUrl(e.name,null),e._buildPath===e._sourcePath&&!l.allowSourceOverwrites)throw new Error("Module ID '"+e.name+"' has a source path that is same as output path: "+e._sourcePath+". Stopping, config is malformed.");e.create||l.rawText&&lang.hasProp(l.rawText,e.name)||b.copyFile(e._sourcePath,e._buildPath)}})),l.optimizeCss&&"none"!==l.optimizeCss&&l.dir&&(v+=optimize.css(l.dir,l))}).then(function(){t=copyConfig(require.s.contexts._.config)}).then(function(){var e;if(u)return e=u.map(function(n,e){return function(){return l._buildPathToModuleIndex[b.normalize(n._buildPath)]=e,build.traceDependencies(n,l,t).then(function(e){n.layer=e})}}),prim.serial(e)}).then(function(){var e;if(u)return e=u.map(function(r){return function(){if(r.exclude)return r.excludeLayers=[],prim.serial(r.exclude.map(function(n,i){return function(){var e=build.findBuildModule(n,u);if(!e)return build.traceDependencies({name:n},l,t).then(function(e){r.excludeLayers[i]={layer:e}});r.excludeLayers[i]=e}}))}}),prim.serial(e)}).then(function(){if(u)return prim.serial(u.map(function(r){return function(){return r.exclude&&r.exclude.forEach(function(e,n){var n=r.excludeLayers[n].layer,i=n.buildFileToModule;n.buildFilePaths.forEach(function(e){build.removeModulePath(i[e],e,r.layer)})}),r.excludeShallow&&r.excludeShallow.forEach(function(e){var n=getOwn(r.layer.buildPathMap,e);n&&build.removeModulePath(e,n,r.layer)}),build.flattenModule(r,r.layer,l).then(function(e){var n;"FUNCTION"===r._buildPath?(r._buildText=e.text,r._buildSourceMap=e.sourceMap):(n=e.text,e.sourceMap&&(n+="\n//# sourceMappingURL="+r._buildPath.split("/").pop()+".map",b.saveUtf8File(r._buildPath+".map",e.sourceMap)),b.saveUtf8File(r._buildPath+"-temp",n)),v+=e.buildText})}}))}).then(function(){var r,e,t={},o=l.bundlesConfigOutFile;if(u&&(u.forEach(function(e){var n,i,r=e._buildPath;"FUNCTION"!==r&&(b.exists(r)&&b.deleteFile(r),b.renameFile(r+"-temp",r),o&&(n=t[e.name]=[],r=b.readFile(r),(i={})[e.name]=!0,r=parse.getAllNamedDefines(r,i),n.push.apply(n,r)),l.removeCombined)&&!l.out&&e.layer.buildFilePaths.forEach(function(n){var e=u.some(function(e){return e._buildPath===n}),i=build.makeRelativeFilePath(l.dir,n);b.exists(n)&&!e&&0!==i.indexOf("..")&&b.deleteFile(n)}),l.onModuleBundleComplete&&l.onModuleBundleComplete(e.onCompleteData)}),o)&&(e=b.readFile(o),e=transform.modifyConfig(e,function(i){return i.bundles||(i.bundles={}),lang.eachProp(t,function(e,n){i.bundles[n]=e}),i}),b.saveUtf8File(o,e)),l.removeCombined&&!l.out&&l.dir&&b.deleteEmptyDirs(l.dir),l.out&&!l.cssIn)"FUNCTION"===(a=l.modules[0]._buildPath)?(e=l.modules[0]._buildSourceMap,l._buildSourceMap=e,l.modules[0]._buildText=optimize.js((l.modules[0].name||l.modules[0].include[0]||a)+".build.js",l.modules[0]._buildText,null,l),l._buildSourceMap&&l._buildSourceMap!==e&&(l.modules[0]._buildSourceMap=l._buildSourceMap,l._buildSourceMap=null)):optimize.jsFile(a,null,a,l);else if(!l.cssIn){for(r in b.getFilteredFileList(l.dir,/\.js$/,!0).forEach(function(e){var n,i;r=(r=e.replace(l.dir,"")).substring(0,r.length-3),(-1<(i=0===(i=getOwn(l._buildPathToModuleIndex,e))||0<i?i:-1)||!l.skipDirOptimize||"all"===l.normalizeDirDefines||l.cjsTranslate)&&(x=b.readFile(e),!l.cjsTranslate||l.shim&&lang.hasProp(l.shim,r)||(x=commonJs.convert(e,x)),-1===i&&(l.onBuildRead&&(x=l.onBuildRead(r,e,x)),"all"===l.normalizeDirDefines&&(x=build.toTransport(l.namespace,null,e,x)),l.onBuildWrite)&&(x=l.onBuildWrite(r,e,x)),n=(n=-1<i?l.modules[i].override:null)?build.createOverrideConfig(l,n):l,-1<i||!l.skipDirOptimize)&&optimize.jsFile(e,x,e,n,E)}),g=require.s.contexts._,E)if(hasProp(E,r))for(d=g.makeModuleMap(r),m=E[r],s=0;s<m.length;s++){if(h=m[s],p=g.makeModuleMap(h,d),falseProp(g.plugins,p.prefix)){if(g.plugins[p.prefix]=!0,!b.exists(require.toUrl(p.prefix+".js")))continue;g.require([p.prefix]),p=g.makeModuleMap(h,d)}falseProp(y,p.id)&&((h=getOwn(g.defined,p.prefix))&&h.writeFile&&h.writeFile(p.prefix,p.name,require,makeWriteFile(l.namespace),g.config),y[p.id]=!0)}l.writeBuildTxt&&b.saveUtf8File(l.dir+"build.txt",v)}return l.cssIn&&(v+=optimize.cssFile(l.cssIn,l.out,l).buildText),"function"==typeof l.out&&l.out(l.modules[0]._buildText,l.modules[0]._buildSourceMap),v?(logger.info(v),v):""})},build.objProps={paths:!0,wrap:!0,pragmas:!0,pragmasOnSave:!0,has:!0,hasOnSave:!0,uglify:!0,uglify2:!0,closure:!0,map:!0,throwWhen:!0,rawText:!0},build.hasDotPropMatch=function(e){var n=e.indexOf(".");return-1!==n&&(e=e.substring(0,n),hasProp(build.objProps,e))},build.convertArrayToObject=function(e){for(var n,i,r,t={},o={include:!0,exclude:!0,excludeShallow:!0,insertRequire:!0,stubModules:!0,deps:!0,mainConfigFile:!0,"wrap.startFile":!0,"wrap.endFile":!0},a=0;a<e.length;a++)separatorI.ndex=e[a].indexOf("="),"true"===(r=e[a].substring(NaN,e[a].length))?r=!0:"false"===r&&(r=!1),i=e[a].substring(0,n),getOwn(o,i)&&(r=r.split(",")),build.hasDotPropMatch(i)?stringDotToObj(t,i,r):t[i]=r;return t},build.makeAbsPath=function(e,n,i){return n?(0!==e.indexOf("/")&&-1===e.indexOf(":")&&(e=n+("/"===n.charAt(n.length-1)?"":"/")+e,e=i.normalize(e)),e.replace(lang.backSlashRegExp,"/")):e},build.makeAbsObject=function(e,n,i,r){var t,o;if(n)for(t=0;t<e.length;t++)o=e[t],hasProp(n,o)&&"string"==typeof n[o]&&(n[o]=build.makeAbsPath(n[o],i,r))},build.makeAbsConfig=function(e,n,i){for(var r,t=["appDir","dir","baseUrl"],o=0;o<t.length;o++)getOwn(e,r=t[o])&&("baseUrl"===r?(e.originalBaseUrl=e.baseUrl,e.appDir?e.baseUrl=build.makeAbsPath(e.originalBaseUrl,e.appDir,i):e.baseUrl=build.makeAbsPath(e[r],n,i)):e[r]=build.makeAbsPath(e[r],n,i),e[r]=endsWithSlash(e[r]));build.makeAbsObject("stdout"===e.out?["cssIn"]:["out","cssIn"],e,n,i),build.makeAbsObject(["startFile","endFile"],e.wrap,n,i),build.makeAbsObject(["externExportsPath"],e.closure,n,i)},build.makeRelativeFilePath=function(e,n,i){var r,t,o,a,s=e.split("/"),e=endsWithSlashRegExp.test(n),l=[];for(n=i.normalize(n),e&&!endsWithSlashRegExp.test(n)&&(n+="/"),i=(a=n.split("/")).pop(),s.pop(),o=s.length,r=0;r<o&&s[r]===a[r];r+=1);for(e=a.slice(r),t=o-r,r=0;-1<r&&r<t;r+=1)l.push("..");return l.join("/")+(l.length?"/":"")+e.join("/")+(e.length?"/":"")+i},build.nestedMix={paths:!0,has:!0,hasOnSave:!0,pragmas:!0,pragmasOnSave:!0},build.createConfig=function(cfg){var fs=cfg.env.fs,buildFileContents,buildFileConfig,mainConfig,mainConfigFile,mainConfigPath,buildFile,absFilePath,config={},buildBaseConfig=makeBuildBaseConfig(fs),absFilePath=fs.absPath(".");if(build.makeAbsConfig(cfg,absFilePath,fs),build.makeAbsConfig(buildBaseConfig,absFilePath,fs),lang.mixin(config,buildBaseConfig),lang.mixin(config,cfg,!0),lang.hasProp(config,"logLevel")&&logger.logLevel(config.logLevel),config.buildFile){if(buildFile=fs.absPath(config.buildFile),!fs.exists(buildFile))throw new Error("ERROR: build file does not exist: "+buildFile);absFilePath=config.baseUrl=fs.absPath(fs.parent(buildFile)),buildFileContents=fs.readFile(buildFile);try{buildFileContents=buildFileContents.replace(/\/\/\#[^\n\r]+[\n\r]*$/,"").trim().replace(/;$/,""),buildFileConfig=eval("("+buildFileContents+")"),build.makeAbsConfig(buildFileConfig,absFilePath,fs),mixConfig(config,buildFileConfig)}catch(e){throw new Error("Build file "+buildFile+" is malformed: "+e)}}if(mainConfigFile=config.mainConfigFile||buildFileConfig&&buildFileConfig.mainConfigFile,mainConfigFile&&("string"==typeof mainConfigFile&&(mainConfigFile=[mainConfigFile]),mainConfigFile.forEach(function(n){if(n=build.makeAbsPath(n,absFilePath,fs),!fs.exists(n))throw new Error(n+" does not exist.");try{mainConfig=parse.findConfig(fs.readFile(n)).config}catch(e){throw new Error("The config in mainConfigFile "+n+" cannot be used because it cannot be evaluated correctly while running in the optimizer. Try only using a config that is also valid JSON, or do not use mainConfigFile and instead copy the config values needed into a build file or command line arguments given to the optimizer.\nSource error from parsing: "+n+": "+e)}mainConfig&&(mainConfigPath=n.substring(0,n.lastIndexOf("/")),config.appDir&&!mainConfig.appDir&&(mainConfig.appDir=config.appDir),mainConfig.baseUrl||(mainConfig.baseUrl=mainConfigPath),build.makeAbsConfig(mainConfig,mainConfigPath,fs),mixConfig(config,mainConfig))})),buildFileConfig&&mixConfig(config,buildFileConfig,!0),mixConfig(config,cfg,!0),lang.eachProp(config.paths,function(e,n){if(lang.isArray(e))throw new Error("paths fallback not supported in optimizer. Please provide a build config path override for "+n);config.paths[n]=build.makeAbsPath(e,config.baseUrl,fs)}),hasProp(config,"baseUrl")){if(config.appDir){if(!config.originalBaseUrl)throw new Error("Please set a baseUrl in the build config");config.dirBaseUrl=build.makeAbsPath(config.originalBaseUrl,config.dir,fs)}else config.dirBaseUrl=config.dir||config.baseUrl;config.dirBaseUrl=endsWithSlash(config.dirBaseUrl)}if(config.bundlesConfigOutFile){if(!config.dir)throw new Error('bundlesConfigOutFile can only be used with optimizations that use "dir".');config.bundlesConfigOutFile=build.makeAbsPath(config.bundlesConfigOutFile,config.dir,fs)}if(config.main)throw new Error('"main" passed as an option, but the supported option is called "name".');if(config.out&&!config.name&&!config.modules&&!config.include&&!config.cssIn)throw new Error('Missing either a "name", "include" or "modules" option');if(config.cssIn){if(config.dir||config.appDir)throw new Error('cssIn is only for the output of single file CSS optimizations and is not compatible with "dir" or "appDir" configuration.');if(!config.out)throw new Error('"out" option missing.')}if(config.cssIn||config.baseUrl||(config.baseUrl="./"),!config.out&&!config.dir)throw new Error('Missing either an "out" or "dir" config value. If using "appDir" for a full project optimization, use "dir". If you want to optimize to one file, use "out".');if(config.appDir&&config.out)throw new Error('"appDir" is not compatible with "out". Use "dir" instead. appDir is used to copy whole projects, where "out" with "baseUrl" is used to just optimize to one file.');if(config.out&&config.dir)throw new Error('The "out" and "dir" options are incompatible. Use "out" if you are targeting a single file for optimization, and "dir" if you want the appDir or baseUrl directories optimized.');if(config.dir&&!config.allowSourceOverwrites&&(config.dir===config.baseUrl||config.dir===config.appDir||config.baseUrl&&0!==build.makeRelativeFilePath(config.dir,config.baseUrl,fs).indexOf("..")||config.appDir&&0!==build.makeRelativeFilePath(config.dir,config.appDir,fs).indexOf("..")))throw new Error('"dir" is set to a parent or same directory as "appDir" or "baseUrl". This can result in the deletion of source code. Stopping. If you want to allow possible overwriting of source code, set "allowSourceOverwrites" to true in the build config, but do so at your own risk. In that case, you may want to also set "keepBuildDir" to true.');if(config.insertRequire&&!lang.isArray(config.insertRequire))throw new Error("insertRequire should be a list of module IDs to insert in to a require([]) call.");if("uglify2"===config.optimize&&(config.optimize="uglify"),config.uglify2&&(config.uglify=config.uglify2,delete config.uglify2),config.generateSourceMaps){if(config.preserveLicenseComments&&"none"!==config.optimize&&"uglify"!==config.optimize)throw new Error("Cannot use preserveLicenseComments and generateSourceMaps together, unless optimize is set to 'uglify'. Either explicitly set preserveLicenseComments to false (default is true) or turn off generateSourceMaps. If you want source maps with license comments, see: http://requirejs.org/docs/errors.html#sourcemapcomments");if("none"!==config.optimize&&"closure"!==config.optimize&&"uglify"!==config.optimize)throw new Error('optimize: "'+config.optimize+'" does not support generateSourceMaps.')}if(!config.name&&!config.include||config.modules){if(config.modules&&config.out)throw new Error('If the "modules" option is used, then there should be a "dir" option set and "out" should not be used since "out" is only for single file optimization output.');if(config.modules&&config.name)throw new Error('"name" and "modules" options are incompatible. Either use "name" if doing a single file optimization, or "modules" if you want to target more than one file for optimization.')}else config.modules=[{name:config.name,out:config.out,create:config.create,include:config.include,exclude:config.exclude,excludeShallow:config.excludeShallow,insertRequire:config.insertRequire,stubModules:config.stubModules}],delete config.stubModules;if(!config.out||config.cssIn||cfg.optimizeCss||(config.optimizeCss="none"),config.cssPrefix?config.cssPrefix=endsWithSlash(config.cssPrefix):config.cssPrefix="",config.modules&&config.modules.length&&config.modules.forEach(function(n){if(lang.isArray(n)||"string"==typeof n||!n)throw new Error("modules config item is malformed: it should be an object with a 'name' property.");config.stubModules&&(n.stubModules=config.stubModules.concat(n.stubModules||[])),n.stubModules&&(n.stubModules._byName={},n.stubModules.forEach(function(e){n.stubModules._byName[e]=!0})),"string"==typeof n.include&&(n.include=[n.include]),n.override&&normalizeWrapConfig(n.override,absFilePath)}),normalizeWrapConfig(config,absFilePath),config.context)throw new Error('The build argument "context" is not supported in a build. It should only be used in web pages.');return hasProp(config,"normalizeDirDefines")||("none"===config.optimize||config.skipDirOptimize?config.normalizeDirDefines="skip":config.normalizeDirDefines="all"),hasProp(config,"fileExclusionRegExp")?"string"==typeof config.fileExclusionRegExp?fs.exclusionRegExp=new RegExp(config.fileExclusionRegExp):fs.exclusionRegExp=config.fileExclusionRegExp:hasProp(config,"dirExclusionRegExp")&&(fs.exclusionRegExp=config.dirExclusionRegExp),config.deps&&(config._depsInclude=config.deps),delete config.deps,delete config.jQuery,delete config.enforceDefine,delete config.urlArgs,config},build.findBuildModule=function(e,n){for(var i,r=0;r<n.length;r++)if((i=n[r]).name===e)return i;return null},build.removeModulePath=function(e,n,i){n=i.buildFilePaths.indexOf(n);-1!==n&&i.buildFilePaths.splice(n,1)},build.traceDependencies=function(e,i,n){var r,t,o,a,s={rhino:!0,node:!0,xpconnect:!0},l=prim();function u(e){var n=!1;if(s[i.env.name])try{build.checkForErrors(o,t)}catch(e){n=!0,l.reject(e)}n||l.resolve(e)}return require._buildReset(),t=require._layer,o=t.context,n&&require(copyConfig(n)),logger.trace("\nTracing dependencies for: "+(e.name||("function"==typeof e.out?"FUNCTION":e.out))),r=(r=i._depsInclude||[]).concat(e.name&&!e.create?[e.name]:[]),e.include&&(r=r.concat(e.include)),e.override&&(a=n?build.createOverrideConfig(n,e.override):copyConfig(e.override),require(a)),(a=require.s.contexts._.config.rawText)&&lang.eachProp(a,function(e,n){n=require.toUrl(n)+".js";require._cachedRawText[n]=e}),l.reject.__requireJsBuild=!0,u.__requireJsBuild=!0,require(r,u,l.reject),s[i.env.name]&&build.checkForErrors(o,t),l.promise.then(function(){return e.override&&n&&require(copyConfig(n)),build.checkForErrors(o,t),t})},build.checkForErrors=function(e,n){var i,r,t,o,a,s="",l={},u=[],c=[],f={},p={},d=!1,g=!1,m=e.defined,h=e.registry;function x(e,n,i){n&&(i||c.push(e),f[n]?(d=!0,p[n]||(p[n]=[],p[n].push(f[n])),p[n].push(e)):i||(f[n]=e))}for(i in h)hasProp(h,i)&&0!==i.indexOf("_@r")&&(g=!0,t=getOwn(h,i),a=(o=i.split("!"))[0],-1===i.indexOf("_unnormalized")&&t&&t.enabled&&x(i,t.map.url),!hasProp(n.modulesWithNames,i))&&1<o.length&&(falseProp(l,a)&&u.push(a),(l[a]||(l[a]=[])).push(i+(t.error?": "+t.error:"")));if(g)for(i in m)hasProp(m,i)&&-1===i.indexOf("!")&&x(i,require.toUrl(i)+".js",!0);if(c.length||u.length){if(u.length&&(s+="Loader plugin"+(1===u.length?"":"s")+" did not call the load callback in the build:\n"+u.map(function(e){return e+":\n  "+l[e].join("\n  ")}).join("\n")+"\n"),s+="Module loading did not complete for: "+c.join(", "),d)for(r in s+="\nThe following modules share the same URL. This could be a misconfiguration if that URL only has one anonymous module in it:",p)hasProp(p,r)&&(s+="\n"+r+": "+p[r].join(", "));throw new Error(s)}},build.createOverrideConfig=function(i,r){var t=copyConfig(i),e=copyConfig(r);return lang.eachProp(e,function(e,n){hasProp(build.objProps,n)?(t[n]={},lang.mixin(t[n],i[n],!0),lang.mixin(t[n],r[n],!0)):t[n]=r[n]}),t},build.flattenModule=function(x,b,y){var v,E,i,C="",P=y.env.fs;return prim().start(function(){var t,e,o,n,a,s,l,u,c,f,p,d=b.context,g=[],m={},h={};return x.override&&(y=build.createOverrideConfig(y,x.override)),c=y.namespace||"",f=c?c+".":"",p=x.stubModules&&x.stubModules._byName||{},x.onCompleteData={name:x.name,path:y.dir?x._buildPath.replace(y.dir,""):x._buildPath,included:[]},C+="\n"+x.onCompleteData.path+"\n----------------\n",b.existingRequireUrl&&-1!==(e=b.buildFilePaths.indexOf(b.existingRequireUrl))&&(b.buildFilePaths.splice(e,1),b.buildFilePaths.unshift(b.existingRequireUrl)),y.generateSourceMaps&&(i=y.dir||y.baseUrl,e="FUNCTION"===x._buildPath?(x.name||x.include[0]||"FUNCTION")+".build.js":y.out?x._buildPath.split("/").pop():x._buildPath.replace(i,""),E=new SourceMapGenerator({file:e})),lang.eachProp(b.context.config.pkgs,function(e,n){h[e]=n}),v="",y.wrap&&y.wrap.__startMap&&y.wrap.__startMap.forEach(function(e){v=e(v,y,E)}),prim.serial(b.buildFilePaths.map(function(r){return function(){var i="";return o=b.buildFileToModule[r],a=getOwn(h,o),prim().start(function(){if(s=d.makeModuleMap(o),!(l=s.prefix&&getOwn(d.defined,s.prefix)))return prim().start(function(){return hasProp(p,o)?hasProp(b.context.plugins,o)?'define({load: function(id){throw new Error("Dynamic load not allowed: " + id);}});':"define({});":require._cacheReadAsync(r,void 0,P)}).then(function(e){var n;t=e,!y.cjsTranslate||y.shim&&lang.hasProp(y.shim,o)||(t=commonJs.convert(r,t)),y.onBuildRead&&(t=y.onBuildRead(o,r,t)),a&&(n=a===parse.getNamedDefine(t)),c&&(t=pragma.namespace(t,c)),t=build.toTransport(c,o,r,t,b,{useSourceUrl:y.useSourceUrl}),a&&!n&&(t=addSemiColon(t,y)+"\n",t+=f+"define('"+a+"', ['"+o+"'], function (main) { return main; });\n"),y.onBuildWrite&&(t=y.onBuildWrite(o,r,t)),i+=addSemiColon(t,y)});l.onLayerEnd&&falseProp(m,s.prefix)&&(g.push(l),m[s.prefix]=!0),l.write&&((u=function(e){i+="\n"+addSemiColon(e,y),y.onBuildWrite&&(i=y.onBuildWrite(o,r,i))}).asModule=function(e,n){i+="\n"+addSemiColon(build.toTransport(c,e,r,n,b,{useSourceUrl:b.context.config.useSourceUrl}),y),y.onBuildWrite&&(i=y.onBuildWrite(e,r,i))},l.write(s.prefix,s.name,u,{name:x.onCompleteData.name,path:x.onCompleteData.path}))}).then(function(){var e=r.replace(y.dir,"");x.onCompleteData.included.push(e),C+=e+"\n",o&&falseProp(b.modulesWithNames,o)&&!y.skipModuleInsertion&&((n=y.shim&&(getOwn(y.shim,o)||a&&getOwn(y.shim,a)))?(e=lang.isArray(n)?n:n.deps,y.wrapShim?i="(function(root) {\n"+f+'define("'+o+'", '+(e&&e.length?build.makeJsArrayString(e)+", ":"[], ")+"function() {\n  return (function() {\n"+i+"\n"+(n.exportsFn?n.exportsFn():"")+"\n  }).apply(root, arguments);\n});\n}(this));\n":i+="\n"+f+'define("'+o+'", '+(e&&e.length?build.makeJsArrayString(e)+", ":"")+(n.exportsFn?n.exportsFn():"function(){}")+");\n"):i+="\n"+f+'define("'+o+'", function(){});\n'),v=appendToFileContents(v,i+="\n",r,y,x,E)})}})).then(function(){g.length&&g.forEach(function(e,n){var i;"string"==typeof x.out?i=x.out:"string"==typeof x._buildPath&&(i=x._buildPath),e.onLayerEnd(function(e){v=appendToFileContents(v,"\n"+addSemiColon(e,y),"onLayerEnd"+n+".js",y,x,E)},{name:x.name,path:i})}),x.create&&(v=appendToFileContents(v,"\n"+f+'define("'+x.name+'", function(){});\n',"module-create.js",y,x,E)),x.insertRequire&&(v=appendToFileContents(v,"\n"+f+'require(["'+x.insertRequire.join('", "')+'"]);\n',"module-insertRequire.js",y,x,E))})}).then(function(){return y.wrap&&y.wrap.__endMap&&y.wrap.__endMap.forEach(function(e){v=e(v,y,E)}),{text:v,buildText:C,sourceMap:E?JSON.stringify(E.toJSON(),null,"  "):void 0}})},build.makeJsArrayString=function(e){return'["'+e.map(function(e){return lang.jsEscape(e)}).join('","')+'"]'},build.toTransport=function(e,n,i,r,t,o){var a=t&&t.context.config.baseUrl;return a&&(i=i.replace(a,"")),transform.toTransport(e,n,i,r,function(e){t&&(e.needsId||e.foundId===n)&&(t.modulesWithNames[n]=!0)},o)},require.build=build}),define("skylark-rjs/main",["./rjs","./build","./lang","./prim","./logger","./parse","./optimize","./pragma","./transform","./requirePatch","./commonJs","./source-map"],function(e,n,i,r,t,o,a,s,l,u,c,f,p){"use strict";return e}),define("skylark-rjs",["skylark-rjs/main"],function(e){return e});
},this,define,require);
//# sourceMappingURL=sourcemaps/skylark-rjs.js.map
