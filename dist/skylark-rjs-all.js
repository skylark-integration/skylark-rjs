/**
 * skylark-rjs - A version of rjs that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
(function(factory,globals,define,require) {
  var isAmd = (typeof define === 'function' && define.amd),
      isCmd = (!isAmd && typeof exports !== 'undefined');

  if (!isAmd && !define) {
    var map = {};
    function absolute(relative, base) {
        if (relative[0]!==".") {
          return relative;
        }
        var stack = base.split("/"),
            parts = relative.split("/");
        stack.pop(); 
        for (var i=0; i<parts.length; i++) {
            if (parts[i] == ".")
                continue;
            if (parts[i] == "..")
                stack.pop();
            else
                stack.push(parts[i]);
        }
        return stack.join("/");
    }
    define = globals.define = function(id, deps, factory) {
        if (typeof factory == 'function') {
            map[id] = {
                factory: factory,
                deps: deps.map(function(dep){
                  return absolute(dep,id);
                }),
                resolved: false,
                exports: null
            };
            require(id);
        } else {
            map[id] = {
                factory : null,
                resolved : true,
                exports : factory
            };
        }
    };
    require = globals.require = function(id) {
        if (!map.hasOwnProperty(id)) {
            throw new Error('Module ' + id + ' has not been defined');
        }
        var module = map[id];
        if (!module.resolved) {
            var args = [];

            module.deps.forEach(function(dep){
                args.push(require(dep));
            })

            module.exports = module.factory.apply(globals, args) || null;
            module.resolved = true;
        }
        return module.exports;
    };
  }
  
  if (!define) {
     throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");
  }

  factory(define,require);

  if (!isAmd) {
    var skylarkjs = require("skylark-langx-ns");

    if (isCmd) {
      module.exports = skylarkjs;
    } else {
      globals.skylarkjs  = skylarkjs;
    }
  }

})(function(define,require) {

/**
 * prim 0.0.1 Copyright (c) 2012-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/prim for details
 */

/**
     * @fileoverview Main Espree file that converts Acorn into Esprima output.
     *
     * This file contains code from the following MIT-licensed projects:
     * 1. Acorn
     * 2. Babylon
     * 3. Babel-ESLint
     *
     * This file also contains code from Esprima, which is BSD licensed.
     *
     * Acorn is Copyright 2012-2015 Acorn Contributors (https://github.com/marijnh/acorn/blob/master/AUTHORS)
     * Babylon is Copyright 2014-2015 various contributors (https://github.com/babel/babel/blob/master/packages/babylon/AUTHORS)
     * Babel-ESLint is Copyright 2014-2015 Sebastian McKenzie <sebmck@gmail.com>
     *
     * Redistribution and use in source and binary forms, with or without
     * modification, are permitted provided that the following conditions are met:
     *
     * * Redistributions of source code must retain the above copyright
     *   notice, this list of conditions and the following disclaimer.
     * * Redistributions in binary form must reproduce the above copyright
     *   notice, this list of conditions and the following disclaimer in the
     *   documentation and/or other materials provided with the distribution.
     *
     * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
     * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
     * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
     * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
     * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
     * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
     * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
     * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
     * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
     * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
     *
     * Esprima is Copyright (c) jQuery Foundation, Inc. and Contributors, All Rights Reserved.
     *
     * Redistribution and use in source and binary forms, with or without
     * modification, are permitted provided that the following conditions are met:
     *
     *   * Redistributions of source code must retain the above copyright
     *     notice, this list of conditions and the following disclaimer.
     *   * Redistributions in binary form must reproduce the above copyright
     *     notice, this list of conditions and the following disclaimer in the
     *     documentation and/or other materials provided with the distribution.
     *
     * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
     * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
     * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
     * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
     * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
     * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
     * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
     * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
     * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
     * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
     */

/**
     * Extracts license comments from JS text.
     * @param {String} fileName
     * @param {String} contents
     * @returns {String} a string of license comments.
     */

//as license comments can be expressed in other ways, like

/***********************************************************************

      A JavaScript tokenizer / parser / beautifier / compressor.
      https://github.com/mishoo/UglifyJS

      -------------------------------- (C) ---------------------------------

                               Author: Mihai Bazon
                             <mihai.bazon@gmail.com>
                           http://mihai.bazon.net/blog

      Distributed under the BSD license:

        Copyright 2012 (c) Mihai Bazon <mihai.bazon@gmail.com>

        Redistribution and use in source and binary forms, with or without
        modification, are permitted provided that the following conditions
        are met:

            * Redistributions of source code must retain the above
              copyright notice, this list of conditions and the following
              disclaimer.

            * Redistributions in binary form must reproduce the above
              copyright notice, this list of conditions and the following
              disclaimer in the documentation and/or other materials
              provided with the distribution.

        THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDER “AS IS” AND ANY
        EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
        IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
        PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER BE
        LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY,
        OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
        PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
        PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
        THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR
        TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF
        THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
        SUCH DAMAGE.

     ***********************************************************************/

/***********************************************************************

      A JavaScript tokenizer / parser / beautifier / compressor.
      https://github.com/mishoo/UglifyJS

      -------------------------------- (C) ---------------------------------

                               Author: Mihai Bazon
                             <mihai.bazon@gmail.com>
                           http://mihai.bazon.net/blog

      Distributed under the BSD license:

        Copyright 2012 (c) Mihai Bazon <mihai.bazon@gmail.com>
        Parser based on parse-js (http://marijn.haverbeke.nl/parse-js/).

        Redistribution and use in source and binary forms, with or without
        modification, are permitted provided that the following conditions
        are met:

            * Redistributions of source code must retain the above
              copyright notice, this list of conditions and the following
              disclaimer.

            * Redistributions in binary form must reproduce the above
              copyright notice, this list of conditions and the following
              disclaimer in the documentation and/or other materials
              provided with the distribution.

        THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDER “AS IS” AND ANY
        EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
        IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
        PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER BE
        LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY,
        OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
        PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
        PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
        THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR
        TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF
        THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
        SUCH DAMAGE.

     ***********************************************************************/

// if (a) return b; if (c) return d; e; ---> return a ? b : c ? d : void e;

//Distributed under the BSD license:
//Copyright 2012 (c) Mihai Bazon <mihai.bazon@gmail.com>

//Pull out any license comments for prepending after optimization.

define("skylark-langx-ns/_attach",[],function(){return function(e,t,n){for(var i=(t="string"==typeof t?t.split("."):t).length,r=e,s=0,o=t[s++];s<i;)r=r[o]=r[o]||{},o=t[s++];if(r[o]){if(n)throw new Error("This namespace already exists:"+t)}else r[o]=n||{};return r[o]}}),define("skylark-langx-ns/ns",["./_attach"],function(n){var i={attach:function(e,t){return n(i,e,t)}};return i}),define("skylark-langx-ns/main",["./ns"],function(e){return e}),define("skylark-langx-ns",["skylark-langx-ns/main"],function(e){return e}),define("skylark-rjs/rjs",["skylark-langx-ns"],function(e){return require.define=define,e.attach("intg.rjs",require)}),define("skylark-rjs/lang",[],function(){"use strict";var s,r,n=Object.prototype.hasOwnProperty;function o(e,t){return n.call(e,t)}function i(){}return r=function(){return!1},"undefined"!=typeof java&&java.lang&&java.lang.Object&&"undefined"!=typeof importPackage&&(r=function(e){return e instanceof java.lang.Object}),s={backSlashRegExp:/\\/g,ostring:Object.prototype.toString,isArray:Array.isArray||function(e){return"[object Array]"===s.ostring.call(e)},isFunction:function(e){return"[object Function]"===s.ostring.call(e)},isRegExp:function(e){return e&&e instanceof RegExp},hasProp:o,falseProp:function(e,t){return!o(e,t)||!e[t]},getOwn:function(e,t){return o(e,t)&&e[t]},_mixin:function(e,t,n){for(var i in t)!t.hasOwnProperty(i)||!n&&e.hasOwnProperty(i)||(e[i]=t[i]);return e},mixin:function(e){var t,n,i,r=Array.prototype.slice.call(arguments);for(e=e||{},2<r.length&&"boolean"==typeof arguments[r.length-1]&&(t=r.pop()),n=1,i=r.length;n<i;n++)s._mixin(e,r[n],t);return e},deepMix:function(n,e){return s.eachProp(e,function(e,t){"object"!=typeof e||!e||s.isArray(e)||s.isFunction(e)||e instanceof RegExp?n[t]=e:(n[t]||(n[t]={}),s.deepMix(n[t],e))}),n},deeplikeCopy:function(e,n){var t,i;if(s.isArray(e))i=[],e.forEach(function(e){i.push(s.deeplikeCopy(e,n))});else{if(t=typeof e,null==e||"boolean"==t||"string"==t||"number"==t||s.isFunction(e)||s.isRegExp(e)||r(e))return e;i={},s.eachProp(e,function(e,t){n&&o(n,t)||(i[t]=s.deeplikeCopy(e,n))})}return i},delegate:function(e,t){i.prototype=e;e=new i;return i.prototype=null,t&&s.mixin(e,t),e},each:function(e,t){if(e)for(var n=0;n<e.length&&!t(e[n],n,e);n+=1);},eachProp:function(e,t){for(var n in e)if(o(e,n)&&t(e[n],n))break},bind:function(e,t){return function(){return t.apply(e,arguments)}},jsEscape:function(e){return e.replace(/(["'\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}}}),define("skylark-rjs/prim",[],function(){"use strict";var n=Object.prototype.hasOwnProperty;function i(e,t){return n.call(e,t)}function r(e,t){if(e)for(var n=0;n<e.length;n+=1)e[n]&&t(e[n],n,e)}function s(e){if(i(e,"e")||i(e,"v")){if(a.hideResolutionConflict)return;throw new Error("Prim promise already resolved: "+JSON.stringify(e))}return 1}function o(e,t){a.nextTick(function(){r(e,function(e){e(t)})})}function a(){var r,n=[],t=[];return r={callback:function(e,t){t&&r.errback(t),i(r,"v")?a.nextTick(function(){e(r.v)}):n.push(e)},errback:function(e){i(r,"e")?a.nextTick(function(){e(r.e)}):t.push(e)},finished:function(){return i(r,"e")||i(r,"v")},rejected:function(){return i(r,"e")},resolve:function(e){return s(r)&&(r.v=e,o(n,e)),r},reject:function(e){return s(r)&&(r.e=e,o(t,e)),r},start:function(e){return r.resolve(),r.promise.then(e)},promise:{then:function(t,n){var i=a();return r.callback(function(e){try{(e=t&&"function"==typeof t?t(e):e)&&e.then?e.then(i.resolve,i.reject):i.resolve(e)}catch(e){i.reject(e)}},function(e){var t;try{n&&"function"==typeof n?(t=n(e))&&t.then?t.then(i.resolve,i.reject):i.resolve(t):i.reject(e)}catch(e){i.reject(e)}}),i.promise},fail:function(e){return r.promise.then(null,e)},end:function(){r.errback(function(e){throw e})}}}}return a.serial=function(e){var t=a().resolve().promise;return r(e,function(e){t=t.then(function(){return e()})}),t},a.nextTick="function"==typeof setImmediate?setImmediate:"undefined"!=typeof process&&process.nextTick?process.nextTick:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(e){e()},a}),define("skylark-rjs/logger",[],function(){return{TRACE:0,INFO:1,WARN:2,ERROR:3,SILENT:4,level:0,logPrefix:"",logLevel:function(e){this.level=e},trace:function(e){this.level<=this.TRACE&&this._print(e)},info:function(e){this.level<=this.INFO&&this._print(e)},warn:function(e){this.level<=this.WARN&&this._print(e)},error:function(e){this.level<=this.ERROR&&this._print(e)},_print:function(e){this._sysPrint((this.logPrefix?this.logPrefix+" ":"")+e)},_sysPrint:function(e){var t;console.log(e,t)}}}),define("skylark-acorn/generated/astralIdentifierCodes",[],function(){"use strict";return[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239]}),define("skylark-acorn/generated/astralIdentifierStartCodes",[],function(){"use strict";return[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191]}),define("skylark-acorn/generated/nonASCIIidentifierChars",[],function(){"use strict";return"‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿"}),define("skylark-acorn/generated/nonASCIIidentifierStartChars",[],function(){"use strict";return"ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ"}),define("skylark-acorn/identifier",["./generated/astralIdentifierCodes","./generated/astralIdentifierStartCodes","./generated/nonASCIIidentifierChars","./generated/nonASCIIidentifierStartChars"],function(n,i,e,t){"use strict";var r="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",r={5:r,"5module":r+" export import",6:r+" const class extends export import super"};const s=new RegExp("["+t+"]"),o=new RegExp("["+t+e+"]");function a(t,n){let i=65536;for(let e=0;e<n.length;e+=2){if((i+=n[e])>t)return!1;if((i+=n[e+1])>=t)return!0}return!1}return{reservedWords:{3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},keywords:r,keywordRelationalOperator:/^in(stanceof)?$/,isIdentifierStart:function(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?170<=e&&s.test(String.fromCharCode(e)):!1!==t&&a(e,i)))},isIdentifierChar:function(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?170<=e&&o.test(String.fromCharCode(e)):!1!==t&&(a(e,i)||a(e,n)))))}}}),define("skylark-acorn/tokentype",[],function(){"use strict";class n{constructor(e,t={}){this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null}}function e(e,t){return new n(e,{beforeExpr:!0,binop:t})}var t={beforeExpr:!0},i={startsExpr:!0};const r={};function s(e,t={}){return t.keyword=e,r[e]=new n(e,t)}t={num:new n("num",i),regexp:new n("regexp",i),string:new n("string",i),name:new n("name",i),privateId:new n("privateId",i),eof:new n("eof"),bracketL:new n("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new n("]"),braceL:new n("{",{beforeExpr:!0,startsExpr:!0}),braceR:new n("}"),parenL:new n("(",{beforeExpr:!0,startsExpr:!0}),parenR:new n(")"),comma:new n(",",t),semi:new n(";",t),colon:new n(":",t),dot:new n("."),question:new n("?",t),questionDot:new n("?."),arrow:new n("=>",t),template:new n("template"),invalidTemplate:new n("invalidTemplate"),ellipsis:new n("...",t),backQuote:new n("`",i),dollarBraceL:new n("${",{beforeExpr:!0,startsExpr:!0}),eq:new n("=",{beforeExpr:!0,isAssign:!0}),assign:new n("_=",{beforeExpr:!0,isAssign:!0}),incDec:new n("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new n("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:e("||",1),logicalAND:e("&&",2),bitwiseOR:e("|",3),bitwiseXOR:e("^",4),bitwiseAND:e("&",5),equality:e("==/!=/===/!==",6),relational:e("</>/<=/>=",7),bitShift:e("<</>>/>>>",8),plusMin:new n("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:e("%",10),star:e("*",10),slash:e("/",10),starstar:new n("**",{beforeExpr:!0}),coalesce:e("??",1),_break:s("break"),_case:s("case",t),_catch:s("catch"),_continue:s("continue"),_debugger:s("debugger"),_default:s("default",t),_do:s("do",{isLoop:!0,beforeExpr:!0}),_else:s("else",t),_finally:s("finally"),_for:s("for",{isLoop:!0}),_function:s("function",i),_if:s("if"),_return:s("return",t),_switch:s("switch"),_throw:s("throw",t),_try:s("try"),_var:s("var"),_const:s("const"),_while:s("while",{isLoop:!0}),_with:s("with"),_new:s("new",{beforeExpr:!0,startsExpr:!0}),_this:s("this",i),_super:s("super",i),_class:s("class",i),_extends:s("extends",t),_export:s("export"),_import:s("import",i),_null:s("null",i),_true:s("true",i),_false:s("false",i),_in:s("in",{beforeExpr:!0,binop:7}),_instanceof:s("instanceof",{beforeExpr:!0,binop:7}),_typeof:s("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:s("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:s("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})};return{TokenType:n,keywords:r,types:t}}),define("skylark-acorn/whitespace",[],function(){"use strict";var e=/\r\n?|\n|\u2028|\u2029/;function s(e){return 10===e||13===e||8232===e||8233===e}return{lineBreak:e,lineBreakG:new RegExp(e.source,"g"),isNewLine:s,nextLineBreak:function(t,n,i=t.length){for(let e=n;e<i;e++){var r=t.charCodeAt(e);if(s(r))return e<i-1&&13===r&&10===t.charCodeAt(e+1)?e+2:e+1}return-1},nonASCIIwhitespace:/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,skipWhiteSpace:/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g}}),define("skylark-acorn/util",[],function(){"use strict";const{hasOwnProperty:n,toString:t}=Object.prototype;return{hasOwn:Object.hasOwn||((e,t)=>n.call(e,t)),isArray:Array.isArray||(e=>"[object Array]"===t.call(e)),wordsRegexp:function(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")},codePointToString:function(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))},loneSurrogate:/[\uD800-\uDFFF]/u}}),define("skylark-acorn/locutil",["./whitespace"],function(e){"use strict";const s=e["nextLineBreak"];class o{constructor(e,t){this.line=e,this.column=t}offset(e){return new o(this.line,this.column+e)}}return{Position:o,SourceLocation:class{constructor(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)}},getLineInfo:function(n,i){for(let e=1,t=0;;){var r=s(n,t,i);if(r<0)return new o(e,i-t);++e,t=r}}}}),define("skylark-acorn/options",["./util","./locutil"],function(e,t){"use strict";const{hasOwn:i,isArray:r}=e,c=t["SourceLocation"],s={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};let u=!1;return{defaultOptions:s,getOptions:function(e){var t,o,a,n={};for(t in s)n[t]=(e&&i(e,t)?e:s)[t];if("latest"===n.ecmaVersion?n.ecmaVersion=1e8:null==n.ecmaVersion?(!u&&"object"==typeof console&&console.warn&&(u=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),n.ecmaVersion=11):2015<=n.ecmaVersion&&(n.ecmaVersion-=2009),null==n.allowReserved&&(n.allowReserved=n.ecmaVersion<5),e&&null!=e.allowHashBang||(n.allowHashBang=14<=n.ecmaVersion),r(n.onToken)){let t=n.onToken;n.onToken=e=>t.push(e)}return r(n.onComment)&&(n.onComment=(a=(o=n).onComment,function(e,t,n,i,r,s){e={type:e?"Block":"Line",value:t,start:n,end:i};o.locations&&(e.loc=new c(this,r,s)),o.ranges&&(e.range=[n,i]),a.push(e)})),n}}}),define("skylark-acorn/scopeflags",[],function(){"use strict";return{SCOPE_TOP:1,SCOPE_FUNCTION:2,SCOPE_ASYNC:4,SCOPE_GENERATOR:8,SCOPE_ARROW:16,SCOPE_SIMPLE_CATCH:32,SCOPE_SUPER:64,SCOPE_DIRECT_SUPER:128,SCOPE_CLASS_STATIC_BLOCK:256,SCOPE_VAR:259,functionFlags:function(e,t){return 2|(e?4:0)|(t?8:0)},BIND_NONE:0,BIND_VAR:1,BIND_LEXICAL:2,BIND_FUNCTION:3,BIND_SIMPLE_CATCH:4,BIND_OUTSIDE:5}}),define("skylark-acorn/state",["./identifier","./tokentype","./whitespace","./options","./util","./scopeflags"],function(e,t,n,i,r,s){"use strict";const{reservedWords:o,keywords:a}=e,c=t["types"],u=n["lineBreak"],f=i["getOptions"],l=r["wordsRegexp"],{SCOPE_TOP:p,SCOPE_FUNCTION:h,SCOPE_ASYNC:d,SCOPE_GENERATOR:m,SCOPE_SUPER:g,SCOPE_DIRECT_SUPER:_,SCOPE_CLASS_STATIC_BLOCK:v}=s;return{Parser:class{constructor(e,t,n){this.options=e=f(e),this.sourceFile=e.sourceFile,this.keywords=l(a[6<=e.ecmaVersion?6:"module"===e.sourceType?"5module":5]);let i="";!0!==e.allowReserved&&(i=o[6<=e.ecmaVersion?6:5===e.ecmaVersion?5:3],"module"===e.sourceType)&&(i+=" await"),this.reservedWords=l(i);var r=(i?i+" ":"")+o.strict;this.reservedWordsStrict=l(r),this.reservedWordsStrictBind=l(r+" "+o.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(u).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=c.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(p),this.regexpState=null,this.privateNameStack=[]}parse(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)}get inFunction(){return 0<(this.currentVarScope().flags&h)}get inGenerator(){return 0<(this.currentVarScope().flags&m)&&!this.currentVarScope().inClassFieldInit}get inAsync(){return 0<(this.currentVarScope().flags&d)&&!this.currentVarScope().inClassFieldInit}get canAwait(){for(let e=this.scopeStack.length-1;0<=e;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&v)return!1;if(t.flags&h)return 0<(t.flags&d)}return this.inModule&&13<=this.options.ecmaVersion||this.options.allowAwaitOutsideFunction}get allowSuper(){var{flags:e,inClassFieldInit:t}=this.currentThisScope();return 0<(e&g)||t||this.options.allowSuperOutsideMethod}get allowDirectSuper(){return 0<(this.currentThisScope().flags&_)}get treatFunctionsAsVar(){return this.treatFunctionsAsVarInScope(this.currentScope())}get allowNewDotTarget(){var{flags:e,inClassFieldInit:t}=this.currentThisScope();return 0<(e&(h|v))||t}get inClassStaticBlock(){return 0<(this.currentVarScope().flags&v)}static extend(...t){let n=this;for(let e=0;e<t.length;e++)n=t[e](n);return n}static parse(e,t){return new this(t,e).parse()}static parseExpressionAt(e,t,n){n=new this(n,e,t);return n.nextToken(),n.parseExpression()}static tokenizer(e,t){return new this(t,e)}}}}),define("skylark-acorn/parseutil",["./tokentype","./state","./whitespace"],function(e,t,n){"use strict";const i=e["types"];e=t.Parser;const{lineBreak:s,skipWhiteSpace:o}=n;t=e.prototype;const a=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;t.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){o.lastIndex=e,e+=o.exec(this.input)[0].length;var t,n,i,r=a.exec(this.input.slice(e));if(!r)return!1;if("use strict"===(r[1]||r[2]))return o.lastIndex=e+r[0].length,n=(t=o.exec(this.input)).index+t[0].length,";"===(i=this.input.charAt(n))||"}"===i||s.test(t[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||"!"===i&&"="===this.input.charAt(n+1));e+=r[0].length,o.lastIndex=e,e+=o.exec(this.input)[0].length,";"===this.input[e]&&e++}},t.eat=function(e){return this.type===e&&(this.next(),!0)},t.isContextual=function(e){return this.type===i.name&&this.value===e&&!this.containsEsc},t.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},t.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},t.canInsertSemicolon=function(){return this.type===i.eof||this.type===i.braceR||s.test(this.input.slice(this.lastTokEnd,this.start))},t.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},t.semicolon=function(){this.eat(i.semi)||this.insertSemicolon()||this.unexpected()},t.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},t.expect=function(e){this.eat(e)||this.unexpected()},t.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")};return t.checkPatternErrors=function(e,t){e&&(-1<e.trailingComma&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element"),-1<(e=t?e.parenthesizedAssign:e.parenthesizedBind))&&this.raiseRecoverable(e,t?"Assigning to rvalue":"Parenthesized pattern")},t.checkExpressionErrors=function(e,t){var n;return!!e&&({shorthandAssign:e,doubleProto:n}=e,t?(0<=e&&this.raise(e,"Shorthand property assignments are valid only in destructuring patterns"),void(0<=n&&this.raiseRecoverable(n,"Redefinition of __proto__ property"))):0<=e||0<=n)},t.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},t.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type},{DestructuringErrors:class{constructor(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}}}}),define("skylark-acorn/statement",["./tokentype","./state","./whitespace","./identifier","./util","./parseutil","./scopeflags"],function(e,t,n,i,r,s,o){"use strict";const u=e["types"];e=t.Parser;const{lineBreak:a,skipWhiteSpace:c}=n,{isIdentifierStart:f,isIdentifierChar:l,keywordRelationalOperator:p}=i,{hasOwn:h,loneSurrogate:d}=r,m=s["DestructuringErrors"],{functionFlags:g,SCOPE_SIMPLE_CATCH:_,BIND_SIMPLE_CATCH:v,BIND_LEXICAL:y,BIND_VAR:b,BIND_FUNCTION:x,SCOPE_CLASS_STATIC_BLOCK:w,SCOPE_SUPER:S}=o;t=e.prototype;t.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==u.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var i of Object.keys(this.undefinedExports))this.raiseRecoverable(this.undefinedExports[i].start,`Export '${i}' is not defined`);return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};const k={kind:"loop"},E={kind:"switch"},A=(t.isLet=function(e){if(!(this.options.ecmaVersion<6)&&this.isContextual("let")){c.lastIndex=this.pos;var i=c.exec(this.input);let t=this.pos+i[0].length,n=this.input.charCodeAt(t);if(91===n||92===n)return!0;if(!e){if(123===n||55295<n&&n<56320)return!0;if(f(n,!0)){let e=t+1;for(;l(n=this.input.charCodeAt(e),!0);)++e;if(92===n||55295<n&&n<56320)return!0;i=this.input.slice(t,e);if(!p.test(i))return!0}}}return!1},t.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;c.lastIndex=this.pos;var e=c.exec(this.input),e=this.pos+e[0].length;return!(a.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!==this.input.length&&(l(e=this.input.charCodeAt(e+8))||55295<e&&e<56320))},t.parseStatement=function(e,t,n){let i=this.type,r=this.startNode(),s;switch(this.isLet(e)&&(i=u._var,s="let"),i){case u._break:case u._continue:return this.parseBreakContinueStatement(r,i.keyword);case u._debugger:return this.parseDebuggerStatement(r);case u._do:return this.parseDoStatement(r);case u._for:return this.parseForStatement(r);case u._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(r,!1,!e);case u._class:return e&&this.unexpected(),this.parseClass(r,!0);case u._if:return this.parseIfStatement(r);case u._return:return this.parseReturnStatement(r);case u._switch:return this.parseSwitchStatement(r);case u._throw:return this.parseThrowStatement(r);case u._try:return this.parseTryStatement(r);case u._const:case u._var:return s=s||this.value,e&&"var"!==s&&this.unexpected(),this.parseVarStatement(r,s);case u._while:return this.parseWhileStatement(r);case u._with:return this.parseWithStatement(r);case u.braceL:return this.parseBlock(!0,r);case u.semi:return this.parseEmptyStatement(r);case u._export:case u._import:if(10<this.options.ecmaVersion&&i===u._import){c.lastIndex=this.pos;var o=c.exec(this.input),o=this.pos+o[0].length,o=this.input.charCodeAt(o);if(40===o||46===o)return this.parseExpressionStatement(r,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule)||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"),i===u._import?this.parseImport(r):this.parseExport(r,n);default:var a;return this.isAsyncFunction()?(e&&this.unexpected(),this.next(),this.parseFunctionStatement(r,!0,!e)):(o=this.value,a=this.parseExpression(),i===u.name&&"Identifier"===a.type&&this.eat(u.colon)?this.parseLabeledStatement(r,o,a,e):this.parseExpressionStatement(r,a))}},t.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(u.semi)||this.insertSemicolon()?e.label=null:this.type!==u.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());let i=0;for(;i<this.labels.length;++i){var r=this.labels[i];if(null==e.label||r.name===e.label.name){if(null!=r.kind&&(n||"loop"===r.kind))break;if(e.label&&n)break}}return i===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},t.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},t.parseDoStatement=function(e){return this.next(),this.labels.push(k),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(u._while),e.test=this.parseParenExpression(),6<=this.options.ecmaVersion?this.eat(u.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},t.parseForStatement=function(e){this.next();var t=9<=this.options.ecmaVersion&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(k),this.enterScope(0),this.expect(u.parenL),this.type===u.semi)return-1<t&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===u._var||this.type===u._const||n)return s=this.startNode(),n=n?"let":this.value,this.next(),this.parseVar(s,!0,n),this.finishNode(s,"VariableDeclaration"),(this.type===u._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===s.declarations.length?(9<=this.options.ecmaVersion&&(this.type===u._in?-1<t&&this.unexpected(t):e.await=-1<t),this.parseForIn(e,s)):(-1<t&&this.unexpected(t),this.parseFor(e,s));let i=this.isContextual("let"),r=!1;var n=new m,s=this.parseExpression(!(-1<t)||"await",n);return this.type===u._in||(r=6<=this.options.ecmaVersion&&this.isContextual("of"))?(9<=this.options.ecmaVersion&&(this.type===u._in?-1<t&&this.unexpected(t):e.await=-1<t),i&&r&&this.raise(s.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(s,!1,n),this.checkLValPattern(s),this.parseForIn(e,s)):(this.checkExpressionErrors(n,!0),-1<t&&this.unexpected(t),this.parseFor(e,s))},t.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,T|(n?0:C),!1,t)},t.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(u._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},t.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(u.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},t.parseSwitchStatement=function(t){this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(u.braceL),this.labels.push(E),this.enterScope(0);let n;for(let e=!1;this.type!==u.braceR;){var i;this.type===u._case||this.type===u._default?(i=this.type===u._case,n&&this.finishNode(n,"SwitchCase"),t.cases.push(n=this.startNode()),n.consequent=[],this.next(),i?n.test=this.parseExpression():(e&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),e=!0,n.test=null),this.expect(u.colon)):(n||this.unexpected(),n.consequent.push(this.parseStatement(null)))}return this.exitScope(),n&&this.finishNode(n,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},t.parseThrowStatement=function(e){return this.next(),a.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")},[]),T=(t.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t="Identifier"===e.type;return this.enterScope(t?_:0),this.checkLValPattern(e,t?v:y),this.expect(u.parenR),e},t.parseTryStatement=function(e){var t;return this.next(),e.block=this.parseBlock(),e.handler=null,this.type===u._catch&&(t=this.startNode(),this.next(),this.eat(u.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")),e.finalizer=this.eat(u._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},t.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")},t.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(k),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},t.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},t.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},t.parseLabeledStatement=function(t,e,n,i){for(var r of this.labels)r.name===e&&this.raise(n.start,"Label '"+e+"' is already declared");var s=this.type.isLoop?"loop":this.type===u._switch?"switch":null;for(let e=this.labels.length-1;0<=e;e--){var o=this.labels[e];if(o.statementStart!==t.start)break;o.statementStart=this.start,o.kind=s}return this.labels.push({name:e,kind:s,statementStart:this.start}),t.body=this.parseStatement(i?-1===i.indexOf("label")?i+"label":i:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},t.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},t.parseBlock=function(e=!0,t=this.startNode(),n){for(t.body=[],this.expect(u.braceL),e&&this.enterScope(0);this.type!==u.braceR;){var i=this.parseStatement(null);t.body.push(i)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")},t.parseFor=function(e,t){return e.init=t,this.expect(u.semi),e.test=this.type===u.semi?null:this.parseExpression(),this.expect(u.semi),e.update=this.type===u.parenR?null:this.parseExpression(),this.expect(u.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},t.parseForIn=function(e,t){var n=this.type===u._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)&&this.raise(t.start,`${n?"for-in":"for-of"} loop variable declaration may not have an initializer`),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(u.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")},t.parseVar=function(e,t,n,i){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(u.eq)?r.init=this.parseMaybeAssign(t):i||"const"!==n||this.type===u._in||6<=this.options.ecmaVersion&&this.isContextual("of")?i||"Identifier"===r.id.type||t&&(this.type===u._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(u.comma))break}return e},t.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,"var"===t?b:y,!1)},1),C=2;function P(e,t){var{computed:e,key:n}=e;return!e&&("Identifier"===n.type&&n.name===t||"Literal"===n.type&&n.value===t)}t.parseFunction=function(e,t,n,i,r){this.initFunction(e),(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!i)&&(this.type===u.star&&t&C&&this.unexpected(),e.generator=this.eat(u.star)),8<=this.options.ecmaVersion&&(e.async=!!i),t&T&&(e.id=4&t&&this.type!==u.name?null:this.parseIdent(),!e.id||t&C||this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?b:y:x));var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(g(e.async,e.generator)),t&T||(e.id=this.type===u.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,t&T?"FunctionDeclaration":"FunctionExpression")},t.parseFunctionParams=function(e){this.expect(u.parenL),e.params=this.parseBindingList(u.parenR,!1,8<=this.options.ecmaVersion),this.checkYieldAwaitInDefaultParams()},t.parseClass=function(e,t){this.next();var n=this.strict,i=(this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e),this.enterClassBody()),r=this.startNode();let s=!1;for(r.body=[],this.expect(u.braceL);this.type!==u.braceR;){var o=this.parseClassElement(null!==e.superClass);o&&(r.body.push(o),"MethodDefinition"===o.type&&"constructor"===o.kind?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&"PrivateIdentifier"===o.key.type&&function(e,t){var n=t.key.name,i=e[n];let r="true";"MethodDefinition"!==t.type||"get"!==t.kind&&"set"!==t.kind||(r=(t.static?"s":"i")+t.kind);if("iget"===i&&"iset"===r||"iset"===i&&"iget"===r||"sget"===i&&"sset"===r||"sset"===i&&"sget"===r)e[n]="true";else{if(i)return 1;e[n]=r}}(i,o)&&this.raiseRecoverable(o.key.start,`Identifier '#${o.key.name}' has already been declared`))}return this.strict=n,this.next(),e.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},t.parseClassElement=function(e){if(this.eat(u.semi))return null;var t,n=this.options.ecmaVersion,i=this.startNode();let r="",s=!1,o=!1,a="method",c=!1;if(this.eatContextual("static")){if(13<=n&&this.eat(u.braceL))return this.parseClassStaticBlock(i),i;this.isClassElementNameStart()||this.type===u.star?c=!0:r="static"}return i.static=c,!r&&8<=n&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==u.star||this.canInsertSemicolon()?r="async":o=!0),!r&&(9<=n||!o)&&this.eat(u.star)&&(s=!0),r||o||s||(t=this.value,(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=t:r=t)),r?(i.computed=!1,i.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),i.key.name=r,this.finishNode(i.key,"Identifier")):this.parseClassElementName(i),n<13||this.type===u.parenL||"method"!==a||s||o?(n=(t=!i.static&&P(i,"constructor"))&&e,t&&"method"!==a&&this.raise(i.key.start,"Constructor can't have get/set modifier"),i.kind=t?"constructor":a,this.parseClassMethod(i,s,o,n)):this.parseClassField(i),i},t.isClassElementNameStart=function(){return this.type===u.name||this.type===u.privateId||this.type===u.num||this.type===u.string||this.type===u.bracketL||this.type.keyword},t.parseClassElementName=function(e){this.type===u.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)},t.parseClassMethod=function(e,t,n,i){var r=e.key,r=("constructor"===e.kind?(t&&this.raise(r.start,"Constructor can't be a generator"),n&&this.raise(r.start,"Constructor can't be an async method")):e.static&&P(e,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype"),e.value=this.parseMethod(t,n,i));return"get"===e.kind&&0!==r.params.length&&this.raiseRecoverable(r.start,"getter should have no params"),"set"===e.kind&&1!==r.params.length&&this.raiseRecoverable(r.start,"setter should have exactly one param"),"set"===e.kind&&"RestElement"===r.params[0].type&&this.raiseRecoverable(r.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")},t.parseClassField=function(e){var t,n;return P(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&P(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(u.eq)?(n=(t=this.currentThisScope()).inClassFieldInit,t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n):e.value=null,this.semicolon(),this.finishNode(e,"PropertyDefinition")},t.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(w|S);this.type!==u.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")},t.parseClassId=function(e,t){this.type===u.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,y,!1)):(!0===t&&this.unexpected(),e.id=null)},t.parseClassSuper=function(e){e.superClass=this.eat(u._extends)?this.parseExprSubscripts(null,!1):null},t.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared},t.exitClassBody=function(){var{declared:t,used:n}=this.privateNameStack.pop();if(this.options.checkPrivateFields){var e=this.privateNameStack.length,i=0===e?null:this.privateNameStack[e-1];for(let e=0;e<n.length;++e){var r=n[e];h(t,r.name)||(i?i.used.push(r):this.raiseRecoverable(r.start,`Private field '#${r.name}' must be declared in an enclosing class`))}}},t.parseExportAllDeclaration=function(e,t){return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==u.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")},t.parseExport=function(e,t){if(this.next(),this.eat(u.star))return this.parseExportAllDeclaration(e,t);if(this.eat(u._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==u.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n of e.specifiers)this.checkUnreserved(n.local),this.checkLocalExport(n.local),"Literal"===n.local.type&&this.raise(n.local.start,"A string literal cannot be used as an exported binding without `from`.");e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},t.parseExportDeclaration=function(e){return this.parseStatement(null)},t.parseExportDefaultDeclaration=function(){let e;var t;return this.type===u._function||(e=this.isAsyncFunction())?(t=this.startNode(),this.next(),e&&this.next(),this.parseFunction(t,4|T,!1,e)):this.type===u._class?(t=this.startNode(),this.parseClass(t,"nullableID")):(t=this.parseMaybeAssign(),this.semicolon(),t)},t.checkExport=function(e,t,n){e&&("string"!=typeof t&&(t="Identifier"===t.type?t.name:t.value),h(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},t.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t,t.start);else if("ObjectPattern"===n)for(var i of t.properties)this.checkPatternExport(e,i);else if("ArrayPattern"===n)for(var r of t.elements)r&&this.checkPatternExport(e,r);else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},t.checkVariableExport=function(e,t){if(e)for(var n of t)this.checkPatternExport(e,n.id)},t.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},t.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")},t.parseExportSpecifiers=function(e){let t=[],n=!0;for(this.expect(u.braceL);!this.eat(u.braceR);){if(n)n=!1;else if(this.expect(u.comma),this.afterTrailingComma(u.braceR))break;t.push(this.parseExportSpecifier(e))}return t},t.parseImport=function(e){return this.next(),this.type===u.string?(e.specifiers=A,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===u.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},t.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,y),this.finishNode(e,"ImportSpecifier")},t.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,y),this.finishNode(e,"ImportDefaultSpecifier")},t.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,y),this.finishNode(e,"ImportNamespaceSpecifier")},t.parseImportSpecifiers=function(){let e=[],t=!0;if(this.type!==u.name||(e.push(this.parseImportDefaultSpecifier()),this.eat(u.comma)))if(this.type===u.star)e.push(this.parseImportNamespaceSpecifier());else for(this.expect(u.braceL);!this.eat(u.braceR);){if(t)t=!1;else if(this.expect(u.comma),this.afterTrailingComma(u.braceR))break;e.push(this.parseImportSpecifier())}return e},t.parseModuleExportName=function(){var e;return 13<=this.options.ecmaVersion&&this.type===u.string?(e=this.parseLiteral(this.value),d.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e):this.parseIdent(!0)},t.adaptDirectivePrologue=function(t){for(let e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},t.isDirectiveCandidate=function(e){return 5<=this.options.ecmaVersion&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])}}),define("skylark-acorn/lval",["./tokentype","./state","./util","./scopeflags"],function(e,t,n,i){"use strict";const a=e["types"];e=t.Parser;const r=n["hasOwn"],{BIND_NONE:s,BIND_OUTSIDE:o,BIND_LEXICAL:c}=i;t=e.prototype;t.toAssignable=function(e,t,n){if(6<=this.options.ecmaVersion&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var i of e.properties)this.toAssignable(i,t),"RestElement"!==i.type||"ArrayPattern"!==i.argument.type&&"ObjectPattern"!==i.argument.type||this.raise(i.argument.start,"Unexpected token");break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},t.toAssignableList=function(t,n){var e,i=t.length;for(let e=0;e<i;e++){var r=t[e];r&&this.toAssignable(r,n)}return i&&(e=t[i-1],6===this.options.ecmaVersion)&&n&&e&&"RestElement"===e.type&&"Identifier"!==e.argument.type&&this.unexpected(e.argument.start),t},t.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},t.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==a.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},t.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case a.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(a.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case a.braceL:return this.parseObj(!0)}return this.parseIdent()},t.parseBindingList=function(e,t,n,i){let r=[],s=!0;for(;!this.eat(e);)if(s?s=!1:this.expect(a.comma),t&&this.type===a.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===a.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),r.push(o),this.type===a.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}r.push(this.parseAssignableListItem(i))}return r},t.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t},t.parseBindingListItem=function(e){return e},t.parseMaybeDefault=function(e,t,n){return n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(a.eq)?n:((e=this.startNodeAt(e,t)).left=n,e.right=this.parseMaybeAssign(),this.finishNode(e,"AssignmentPattern"))},t.checkLValSimple=function(e,t=s,n){var i=t!==s;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(i?"Binding ":"Assigning to ")+e.name+" in strict mode"),i&&(t===c&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(r(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==o)&&this.declareName(e.name,t,e.start);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(i?"Binding":"Assigning to")+" rvalue")}},t.checkLValPattern=function(e,t=s,n){switch(e.type){case"ObjectPattern":for(var i of e.properties)this.checkLValInnerPattern(i,t,n);break;case"ArrayPattern":for(var r of e.elements)r&&this.checkLValInnerPattern(r,t,n);break;default:this.checkLValSimple(e,t,n)}},t.checkLValInnerPattern=function(e,t=s,n){switch(e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}}}),define("skylark-acorn/tokencontext",["./state","./tokentype","./whitespace"],function(e,t,n){"use strict";e=e.Parser;const i=t["types"],r=n["lineBreak"];class s{constructor(e,t,n,i,r){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=i,this.generator=!!r}}const o={b_stat:new s("{",!1),b_expr:new s("{",!0),b_tmpl:new s("${",!1),p_stat:new s("(",!1),p_expr:new s("(",!0),q_tmpl:new s("`",!0,!0,e=>e.tryReadTemplateToken()),f_stat:new s("function",!1),f_expr:new s("function",!0),f_expr_gen:new s("function",!0,!1,null,!0),f_gen:new s("function",!1,!1,null,!0)};t=e.prototype;return t.initialContext=function(){return[o.b_stat]},t.curContext=function(){return this.context[this.context.length-1]},t.braceIsBlock=function(e){var t=this.curContext();return t===o.f_expr||t===o.f_stat||(e!==i.colon||t!==o.b_stat&&t!==o.b_expr?e===i._return||e===i.name&&this.exprAllowed?r.test(this.input.slice(this.lastTokEnd,this.start)):e===i._else||e===i.semi||e===i.eof||e===i.parenR||e===i.arrow||(e===i.braceL?t===o.b_stat:e!==i._var&&e!==i._const&&e!==i.name&&!this.exprAllowed):!t.isExpr)},t.inGeneratorContext=function(){for(let e=this.context.length-1;1<=e;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},t.updateContext=function(e){var t,n=this.type;n.keyword&&e===i.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},t.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)},i.parenR.updateContext=i.braceR.updateContext=function(){if(1===this.context.length)this.exprAllowed=!0;else{let e=this.context.pop();e===o.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}},i.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?o.b_stat:o.b_expr),this.exprAllowed=!0},i.dollarBraceL.updateContext=function(){this.context.push(o.b_tmpl),this.exprAllowed=!0},i.parenL.updateContext=function(e){e=e===i._if||e===i._for||e===i._with||e===i._while;this.context.push(e?o.p_stat:o.p_expr),this.exprAllowed=!0},i.incDec.updateContext=function(){},i._function.updateContext=i._class.updateContext=function(e){!e.beforeExpr||e===i._else||e===i.semi&&this.curContext()!==o.p_stat||e===i._return&&r.test(this.input.slice(this.lastTokEnd,this.start))||(e===i.colon||e===i.braceL)&&this.curContext()===o.b_stat?this.context.push(o.f_stat):this.context.push(o.f_expr),this.exprAllowed=!1},i.backQuote.updateContext=function(){this.curContext()===o.q_tmpl?this.context.pop():this.context.push(o.q_tmpl),this.exprAllowed=!1},i.star.updateContext=function(e){e===i._function&&(e=this.context.length-1,this.context[e]===o.f_expr?this.context[e]=o.f_expr_gen:this.context[e]=o.f_gen),this.exprAllowed=!0},i.name.updateContext=function(e){let t=!1;6<=this.options.ecmaVersion&&e!==i.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t},{TokContext:s,types:o}}),define("skylark-acorn/expression",["./tokentype","./tokencontext","./state","./parseutil","./whitespace","./scopeflags"],function(e,t,n,i,r,s){"use strict";const _=e["types"],u=t["types"];e=n.Parser;const v=i["DestructuringErrors"],o=r["lineBreak"],{functionFlags:a,SCOPE_ARROW:c,SCOPE_SUPER:f,SCOPE_DIRECT_SUPER:l,BIND_OUTSIDE:p,BIND_VAR:h}=s;t=e.prototype;t.checkPropClash=function(i,r,t){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===i.type||6<=this.options.ecmaVersion&&(i.computed||i.method||i.shorthand))){let n=i["key"],e;switch(n.type){case"Identifier":e=n.name;break;case"Literal":e=String(n.value);break;default:return}i=i["kind"];if(6<=this.options.ecmaVersion)"__proto__"===e&&"init"===i&&(r.proto&&(t?t.doubleProto<0&&(t.doubleProto=n.start):this.raiseRecoverable(n.start,"Redefinition of __proto__ property")),r.proto=!0);else{let t=r[e="$"+e];if(t){let e;(e="init"===i?this.strict&&t.init||t.get||t.set:t.init||t[i])&&this.raiseRecoverable(n.start,"Redefinition of property")}else t=r[e]={init:!1,get:!1,set:!1};t[i]=!0}}},t.parseExpression=function(e,t){var n=this.start,i=this.startLoc,r=this.parseMaybeAssign(e,t);if(this.type!==_.comma)return r;var s=this.startNodeAt(n,i);for(s.expressions=[r];this.eat(_.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")},t.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}let i=!1,r=-1,s=-1,o=-1;t?(r=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new v,i=!0);var a=this.start,c=this.startLoc;this.type!==_.parenL&&this.type!==_.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===e);let u=this.parseMaybeConditional(e,t);return n&&(u=n.call(this,u,a,c)),this.type.isAssign?((n=this.startNodeAt(a,c)).operator=this.value,this.type===_.eq&&(u=this.toAssignable(u,!1,t)),i||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=u.start&&(t.shorthandAssign=-1),this.type===_.eq?this.checkLValPattern(u):this.checkLValSimple(u),n.left=u,this.next(),n.right=this.parseMaybeAssign(e),-1<o&&(t.doubleProto=o),this.finishNode(n,"AssignmentExpression")):(i&&this.checkExpressionErrors(t,!0),-1<r&&(t.parenthesizedAssign=r),-1<s&&(t.trailingComma=s),u)},t.parseMaybeConditional=function(e,t){var n=this.start,i=this.startLoc,r=this.parseExprOps(e,t);return!this.checkExpressionErrors(t)&&this.eat(_.question)?((t=this.startNodeAt(n,i)).test=r,t.consequent=this.parseMaybeAssign(),this.expect(_.colon),t.alternate=this.parseMaybeAssign(e),this.finishNode(t,"ConditionalExpression")):r},t.parseExprOps=function(e,t){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||r.start===n&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,n,i,-1,e)},t.parseExprOp=function(e,t,n,i,r){let s=this.type.binop;var o,a,c,u,f;if(null!=s&&(!r||this.type!==_._in)&&s>i)return o=this.type===_.logicalOR||this.type===_.logicalAND,(a=this.type===_.coalesce)&&(s=_.logicalAND.binop),c=this.value,this.next(),u=this.start,f=this.startLoc,u=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),u,f,s,r),f=this.buildBinary(t,n,e,u,c,o||a),(o&&this.type===_.coalesce||a&&(this.type===_.logicalOR||this.type===_.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(f,t,n,i,r);return e},t.buildBinary=function(e,t,n,i,r,s){"PrivateIdentifier"===i.type&&this.raise(i.start,"Private identifier can only be left side of binary expression");e=this.startNodeAt(e,t);return e.left=n,e.operator=r,e.right=i,this.finishNode(e,s?"LogicalExpression":"BinaryExpression")},t.parseMaybeUnary=function(e,t,n,i){let r=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(i),t=!0;else if(this.type.prefix){var a=this.startNode(),c=this.type===_.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,c,i),this.checkExpressionErrors(e,!0),c?this.checkLValSimple(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):"delete"===a.operator&&function e(t){return"MemberExpression"===t.type&&"PrivateIdentifier"===t.property.type||"ChainExpression"===t.type&&e(t.expression)}(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,c?"UpdateExpression":"UnaryExpression")}else if(t||this.type!==_.privateId){if(o=this.parseExprSubscripts(e,i),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=this.startNodeAt(r,s);u.operator=this.value,u.prefix=!1,u.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(u,"UpdateExpression")}}else(i||0===this.privateNameStack.length)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==_._in&&this.unexpected();return n||!this.eat(_.starstar)?o:t?void this.unexpected(this.lastTokStart):this.buildBinary(r,s,o,this.parseMaybeUnary(null,!1,!1,i),"**",!1)},t.parseExprSubscripts=function(e,t){var n=this.start,i=this.startLoc,r=this.parseExprAtom(e,t);return"ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd)||(r=this.parseSubscripts(r,n,i,!1,t),e&&"MemberExpression"===r.type&&(e.parenthesizedAssign>=r.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=r.start&&(e.parenthesizedBind=-1),e.trailingComma>=r.start)&&(e.trailingComma=-1)),r},t.parseSubscripts=function(t,n,i,r,s){var o,a=8<=this.options.ecmaVersion&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start==5&&this.potentialArrowAt===t.start;let c=!1;for(;;){let e=this.parseSubscript(t,n,i,r,a,c,s);if(e.optional&&(c=!0),e===t||"ArrowFunctionExpression"===e.type)return c&&((o=this.startNodeAt(n,i)).expression=e,e=this.finishNode(o,"ChainExpression")),e;t=e}},t.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(_.arrow)},t.parseSubscriptAsyncArrow=function(e,t,n,i){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,i)},t.parseSubscript=function(e,t,n,i,r,s,o){var a=11<=this.options.ecmaVersion,c=a&&this.eat(_.questionDot),u=(i&&c&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions"),this.eat(_.bracketL));if(u||c&&this.type!==_.parenL&&this.type!==_.backQuote||this.eat(_.dot)){var f=this.startNodeAt(t,n);f.object=e,u?(f.property=this.parseExpression(),this.expect(_.bracketR)):this.type===_.privateId&&"Super"!==e.type?f.property=this.parsePrivateIdent():f.property=this.parseIdent("never"!==this.options.allowReserved),f.computed=!!u,a&&(f.optional=c),e=this.finishNode(f,"MemberExpression")}else if(!i&&this.eat(_.parenL)){var u=new v,f=this.yieldPos,i=this.awaitPos,l=this.awaitIdentPos,p=(this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.parseExprList(_.parenR,8<=this.options.ecmaVersion,!1,u));if(r&&!c&&this.shouldParseAsyncArrow())return this.checkPatternErrors(u,!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=f,this.awaitPos=i,this.awaitIdentPos=l,this.parseSubscriptAsyncArrow(t,n,p,o);this.checkExpressionErrors(u,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=i||this.awaitPos,this.awaitIdentPos=l||this.awaitIdentPos;r=this.startNodeAt(t,n);r.callee=e,r.arguments=p,a&&(r.optional=c),e=this.finishNode(r,"CallExpression")}else this.type===_.backQuote&&((c||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),(o=this.startNodeAt(t,n)).tag=e,o.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(o,"TaggedTemplateExpression"));return e},t.parseExprAtom=function(t,n,i){this.type===_.slash&&this.readRegexp();let r,s=this.potentialArrowAt===this.start;switch(this.type){case _._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type!==_.parenL||this.allowDirectSuper||this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==_.dot&&this.type!==_.bracketL&&this.type!==_.parenL&&this.unexpected(),this.finishNode(r,"Super");case _._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case _.name:var o=this.start,a=this.startLoc,c=this.containsEsc;let e=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!c&&"async"===e.name&&!this.canInsertSemicolon()&&this.eat(_._function))return this.overrideContext(u.f_expr),this.parseFunction(this.startNodeAt(o,a),0,!1,!0,n);if(s&&!this.canInsertSemicolon()){if(this.eat(_.arrow))return this.parseArrowExpression(this.startNodeAt(o,a),[e],!1,n);if(8<=this.options.ecmaVersion&&"async"===e.name&&this.type===_.name&&!c&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return e=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(_.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(o,a),[e],!0,n)}return e;case _.regexp:c=this.value;return(r=this.parseLiteral(c.value)).regex={pattern:c.pattern,flags:c.flags},r;case _.num:case _.string:return this.parseLiteral(this.value);case _._null:case _._true:case _._false:return(r=this.startNode()).value=this.type===_._null?null:this.type===_._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case _.parenL:o=this.start,a=this.parseParenAndDistinguishExpression(s,n);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(a)&&(t.parenthesizedAssign=o),t.parenthesizedBind<0)&&(t.parenthesizedBind=o),a;case _.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(_.bracketR,!0,!0,t),this.finishNode(r,"ArrayExpression");case _.braceL:return this.overrideContext(u.b_expr),this.parseObj(!1,t);case _._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case _._class:return this.parseClass(this.startNode(),!1);case _._new:return this.parseNew();case _.backQuote:return this.parseTemplate();case _._import:return 11<=this.options.ecmaVersion?this.parseExprImport(i):this.unexpected();default:return this.parseExprAtomDefault()}},t.parseExprAtomDefault=function(){this.unexpected()},t.parseExprImport=function(e){var t=this.startNode(),n=(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.parseIdent(!0));return this.type!==_.parenL||e?this.type===_.dot?(t.meta=n,this.parseImportMeta(t)):void this.unexpected():this.parseDynamicImport(t)},t.parseDynamicImport=function(e){var t;return this.next(),e.source=this.parseMaybeAssign(),this.eat(_.parenR)||(t=this.start,this.eat(_.comma)&&this.eat(_.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)),this.finishNode(e,"ImportExpression")},t.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),"meta"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")},t.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")},t.parseParenExpression=function(){this.expect(_.parenL);var e=this.parseExpression();return this.expect(_.parenR),e},t.shouldParseArrow=function(e){return!this.canInsertSemicolon()},t.parseParenAndDistinguishExpression=function(a,c){let u=this.start,f=this.startLoc,l,p=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var h=this.start,d=this.startLoc;let e=[],t=!0,n=!1,i=new v,r=this.yieldPos,s=this.awaitPos,o;for(this.yieldPos=0,this.awaitPos=0;this.type!==_.parenR;){if(t?t=!1:this.expect(_.comma),p&&this.afterTrailingComma(_.parenR,!0)){n=!0;break}if(this.type===_.ellipsis){o=this.start,e.push(this.parseParenItem(this.parseRestBinding())),this.type===_.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}e.push(this.parseMaybeAssign(!1,i,this.parseParenItem))}var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(_.parenR),a&&this.shouldParseArrow(e)&&this.eat(_.arrow))return this.checkPatternErrors(i,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=r,this.awaitPos=s,this.parseParenArrowList(u,f,e,c);e.length&&!n||this.unexpected(this.lastTokStart),o&&this.unexpected(o),this.checkExpressionErrors(i,!0),this.yieldPos=r||this.yieldPos,this.awaitPos=s||this.awaitPos,1<e.length?((l=this.startNodeAt(h,d)).expressions=e,this.finishNodeAt(l,"SequenceExpression",m,g)):l=e[0]}else l=this.parseParenExpression();return this.options.preserveParens?((a=this.startNodeAt(u,f)).expression=l,this.finishNode(a,"ParenthesizedExpression")):l},t.parseParenItem=function(e){return e},t.parseParenArrowList=function(e,t,n,i){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,i)};const d=[];t.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e,t=this.startNode(),n=this.parseIdent(!0);return 6<=this.options.ecmaVersion&&this.eat(_.dot)?(t.meta=n,n=this.containsEsc,t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")):(n=this.start,e=this.startLoc,t.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),n,e,!0,!1),this.eat(_.parenL)?t.arguments=this.parseExprList(_.parenR,8<=this.options.ecmaVersion,!1):t.arguments=d,this.finishNode(t,"NewExpression"))},t.parseTemplateElement=function({isTagged:e}){var t=this.startNode();return this.type===_.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),t.value={raw:this.value,cooked:null}):t.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),t.tail=this.type===_.backQuote,this.finishNode(t,"TemplateElement")},t.parseTemplate=function({isTagged:e=!1}={}){var t=this.startNode();this.next(),t.expressions=[];let n=this.parseTemplateElement({isTagged:e});for(t.quasis=[n];!n.tail;)this.type===_.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(_.dollarBraceL),t.expressions.push(this.parseExpression()),this.expect(_.braceR),t.quasis.push(n=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(t,"TemplateLiteral")},t.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===_.name||this.type===_.num||this.type===_.string||this.type===_.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===_.star)&&!o.test(this.input.slice(this.lastTokEnd,this.start))},t.parseObj=function(e,t){let n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(_.braceR);){if(i)i=!1;else if(this.expect(_.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma(_.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,r,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},t.parseProperty=function(e,t){let n=this.startNode(),i,r,s,o;if(9<=this.options.ecmaVersion&&this.eat(_.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===_.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===_.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));6<=this.options.ecmaVersion&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(i=this.eat(_.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&8<=this.options.ecmaVersion&&!i&&this.isAsyncProp(n)?(r=!0,i=9<=this.options.ecmaVersion&&this.eat(_.star),this.parsePropertyName(n)):r=!1,this.parsePropertyValue(n,e,i,r,s,o,t,a),this.finishNode(n,"Property")},t.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t="get"===e.kind?0:1;e.value.params.length!==t?(t=e.value.start,"get"===e.kind?this.raiseRecoverable(t,"getter should have no params"):this.raiseRecoverable(t,"setter should have exactly one param")):"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")},t.parsePropertyValue=function(e,t,n,i,r,s,o,a){(n||i)&&this.type===_.colon&&this.unexpected(),this.eat(_.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):6<=this.options.ecmaVersion&&this.type===_.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,i)):t||a||!(5<=this.options.ecmaVersion)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===_.comma||this.type===_.braceR||this.type===_.eq?6<=this.options.ecmaVersion&&!e.computed&&"Identifier"===e.key.type?((n||i)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=r),e.kind="init",t?e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key)):this.type===_.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected():((n||i)&&this.unexpected(),this.parseGetterSetter(e))},t.parsePropertyName=function(e){if(6<=this.options.ecmaVersion){if(this.eat(_.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(_.bracketR),e.key;e.computed=!1}return e.key=this.type===_.num||this.type===_.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},t.initFunction=function(e){e.id=null,6<=this.options.ecmaVersion&&(e.generator=e.expression=!1),8<=this.options.ecmaVersion&&(e.async=!1)},t.parseMethod=function(e,t,n){var i=this.startNode(),r=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(i),6<=this.options.ecmaVersion&&(i.generator=e),8<=this.options.ecmaVersion&&(i.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(a(t,i.generator)|f|(n?l:0)),this.expect(_.parenL),i.params=this.parseBindingList(_.parenR,!1,8<=this.options.ecmaVersion),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(i,"FunctionExpression")},t.parseArrowExpression=function(e,t,n,i){var r=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(a(n,!1)|c),this.initFunction(e),8<=this.options.ecmaVersion&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,i),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")},t.parseFunctionBody=function(e,t,n,i){var r=t&&this.type!==_.braceL;let s=this.strict,o=!1;r?(e.body=this.parseMaybeAssign(i),e.expression=!0,this.checkParams(e,!1)):(r=7<=this.options.ecmaVersion&&!this.isSimpleParamList(e.params),s&&!r||(o=this.strictDirective(this.end))&&r&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"),i=this.labels,this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,p),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=i),this.exitScope()},t.isSimpleParamList=function(e){for(var t of e)if("Identifier"!==t.type)return!1;return!0},t.checkParams=function(e,t){var n,i=Object.create(null);for(n of e.params)this.checkLValInnerPattern(n,h,t?null:i)},t.parseExprList=function(t,n,i,r){let s=[],o=!0;for(;!this.eat(t);){if(o)o=!1;else if(this.expect(_.comma),n&&this.afterTrailingComma(t))break;let e;i&&this.type===_.comma?e=null:this.type===_.ellipsis?(e=this.parseSpread(r),r&&this.type===_.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):e=this.parseMaybeAssign(!1,r),s.push(e)}return s},t.checkUnreserved=function({start:e,end:t,name:n}){this.inGenerator&&"yield"===n&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===n&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===n&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==n&&"await"!==n||this.raise(e,`Cannot use ${n} in class static initialization block`),this.keywords.test(n)&&this.raise(e,`Unexpected keyword '${n}'`),this.options.ecmaVersion<6&&-1!==this.input.slice(e,t).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(n)&&(this.inAsync||"await"!==n||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,`The keyword '${n}' is reserved`))},t.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),"await"!==t.name)||this.awaitIdentPos||(this.awaitIdentPos=t.start),t},t.parseIdentNode=function(){var e=this.startNode();return this.type===_.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,"class"!==e.name&&"function"!==e.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),e},t.parsePrivateIdent=function(){var e=this.startNode();return this.type===_.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(0===this.privateNameStack.length?this.raise(e.start,`Private field '#${e.name}' must be declared in an enclosing class`):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e},t.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===_.semi||this.canInsertSemicolon()||this.type!==_.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(_.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},t.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")}}),define("skylark-acorn/location",["./state","./locutil"],function(e,t){"use strict";e=e.Parser;const{Position:n,getLineInfo:i}=t;t=e.prototype;t.raise=function(e,t){var n=i(this.input,e),t=(t+=" ("+n.line+":"+n.column+")",new SyntaxError(t));throw t.pos=e,t.loc=n,t.raisedAt=this.pos,t},t.raiseRecoverable=t.raise,t.curPosition=function(){if(this.options.locations)return new n(this.curLine,this.pos-this.lineStart)}}),define("skylark-acorn/scope",["./state","./scopeflags"],function(e,t){"use strict";e=e.Parser;const{SCOPE_VAR:o,SCOPE_FUNCTION:n,SCOPE_TOP:a,SCOPE_ARROW:i,SCOPE_SIMPLE_CATCH:c,BIND_LEXICAL:u,BIND_SIMPLE_CATCH:f,BIND_FUNCTION:l}=t;t=e.prototype;class r{constructor(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1}}t.enterScope=function(e){this.scopeStack.push(new r(e))},t.exitScope=function(){this.scopeStack.pop()},t.treatFunctionsAsVarInScope=function(e){return e.flags&n||!this.inModule&&e.flags&a},t.declareName=function(t,e,n){let i=!1;if(e===u){var r=this.currentScope();i=-1<r.lexical.indexOf(t)||-1<r.functions.indexOf(t)||-1<r.var.indexOf(t),r.lexical.push(t),this.inModule&&r.flags&a&&delete this.undefinedExports[t]}else if(e===f)this.currentScope().lexical.push(t);else if(e===l){r=this.currentScope();i=this.treatFunctionsAsVar?-1<r.lexical.indexOf(t):-1<r.lexical.indexOf(t)||-1<r.var.indexOf(t),r.functions.push(t)}else for(let e=this.scopeStack.length-1;0<=e;--e){var s=this.scopeStack[e];if(-1<s.lexical.indexOf(t)&&!(s.flags&c&&s.lexical[0]===t)||!this.treatFunctionsAsVarInScope(s)&&-1<s.functions.indexOf(t)){i=!0;break}if(s.var.push(t),this.inModule&&s.flags&a&&delete this.undefinedExports[t],s.flags&o)break}i&&this.raiseRecoverable(n,`Identifier '${t}' has already been declared`)},t.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},t.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},t.currentVarScope=function(){for(let e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&o)return t}},t.currentThisScope=function(){for(let e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&o&&!(t.flags&i))return t}}}),define("skylark-acorn/node",["./state","./locutil"],function(e,t){"use strict";e=e.Parser;const i=t["SourceLocation"];class r{constructor(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new i(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])}}t=e.prototype;function s(e,t,n,i){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=i),this.options.ranges&&(e.range[1]=n),e}return t.startNode=function(){return new r(this,this.start,this.startLoc)},t.startNodeAt=function(e,t){return new r(this,e,t)},t.finishNode=function(e,t){return s.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},t.finishNodeAt=function(e,t,n,i){return s.call(this,e,t,n,i)},t.copyNode=function(e){var t,n=new r(this,e.start,this.startLoc);for(t in e)n[t]=e[t];return n},{Node:r}}),define("skylark-acorn/unicode-property-data",["./util"],function(e){"use strict";const t=e["wordsRegexp"];var e="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",n=e+" Extended_Pictographic",i=n+" EBase EComp EMod EPres ExtPict";const r={9:e,10:n,11:n,12:i,13:i,14:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"};const s={9:"",10:"",11:"",12:"",13:"",14:"Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji"},o="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu";var a,e="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",n=e+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",i=n+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",c=i+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",u=c+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith";const f={9:e,10:n,11:i,12:c,13:u,14:"Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz"},l={};for(const p of[9,10,11,12,13,14])a=p,(a=l[a]={binary:t(r[a]+" "+o),binaryOfStrings:t(s[a]),nonBinary:{General_Category:t(o),Script:t(f[a])}}).nonBinary.Script_Extensions=a.nonBinary.Script,a.nonBinary.gc=a.nonBinary.General_Category,a.nonBinary.sc=a.nonBinary.Script,a.nonBinary.scx=a.nonBinary.Script_Extensions;return l}),define("skylark-acorn/regexp",["./identifier","./state","./unicode-property-data","./util"],function(e,t,n,i){"use strict";const{isIdentifierStart:r,isIdentifierChar:s}=e;e=t.Parser;const{hasOwn:o,codePointToString:a}=i;t=e.prototype;function c(e){return 36===e||40<=e&&e<=43||46===e||63===e||91<=e&&e<=94||123<=e&&e<=125}function u(e){return 65<=e&&e<=90||97<=e&&e<=122}t.validateRegExpFlags=function(t){var n=t.validFlags,i=t.flags;let r=!1,s=!1;for(let e=0;e<i.length;e++){var o=i.charAt(e);-1===n.indexOf(o)&&this.raise(t.start,"Invalid regular expression flag"),-1<i.indexOf(o,e+1)&&this.raise(t.start,"Duplicate regular expression flag"),"u"===o&&(r=!0),"v"===o&&(s=!0)}15<=this.options.ecmaVersion&&r&&s&&this.raise(t.start,"Invalid regular expression flag")},t.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&9<=this.options.ecmaVersion&&0<e.groupNames.length&&(e.switchN=!0,this.regexp_pattern(e))},t.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets"),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(const t of e.backReferenceNames)-1===e.groupNames.indexOf(t)&&e.raise("Invalid named capture referenced")},t.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},t.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},t.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!(e.switchU?!this.regexp_eatAtom(e):!this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},t.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){let e=!1;if(9<=this.options.ecmaVersion&&(e=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!e,!0}return t.pos=e,!1},t.regexp_eatQuantifier=function(e,t=!1){return!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},t.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},t.regexp_eatBracedQuantifier=function(n,i){var r=n.pos;if(n.eat(123)){let e,t=-1;if(this.regexp_eatDecimalDigits(n)&&(e=n.lastIntValue,n.eat(44)&&this.regexp_eatDecimalDigits(n)&&(t=n.lastIntValue),n.eat(125)))return-1!==t&&t<e&&!i&&n.raise("numbers out of order in {} quantifier"),!0;n.switchU&&!i&&n.raise("Incomplete quantifier"),n.pos=r}return!1},t.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},t.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},t.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},t.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(9<=this.options.ecmaVersion?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},t.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},t.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},t.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!c(t)&&(e.lastIntValue=t,e.advance(),!0)},t.regexp_eatPatternCharacters=function(e){for(var t,n=e.pos;-1!==(t=e.current())&&!c(t);)e.advance();return e.pos!==n},t.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||40<=t&&t<=43||46===t||63===t||91===t||94===t||124===t||(e.advance(),0))},t.regexp_groupSpecifier=function(e){e.eat(63)&&(this.regexp_eatGroupName(e)?(-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue)):e.raise("Invalid group"))},t.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},t.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=a(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=a(e.lastIntValue);return!0}return!1},t.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=11<=this.options.ecmaVersion;let i=e.current(n);return e.advance(n),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),n=i,r(n,!0)||36===n||95===n?(e.lastIntValue=i,!0):(e.pos=t,!1)},t.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=11<=this.options.ecmaVersion;let i=e.current(n);return e.advance(n),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),n=i,s(n,!0)||36===n||95===n||8204===n||8205===n?(e.lastIntValue=i,!0):(e.pos=t,!1)},t.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},t.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},t.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},t.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},t.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},t.regexp_eatZero=function(e){return 48===e.current()&&!l(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},t.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},t.regexp_eatControlLetter=function(e){var t=e.current();return!!u(t)&&(e.lastIntValue=t%32,e.advance(),!0)},t.regexp_eatRegExpUnicodeEscapeSequence=function(e,t=!1){var n=e.pos,t=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(t&&55296<=i&&i<=56319){var r=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var s=e.lastIntValue;if(56320<=s&&s<=57343)return e.lastIntValue=1024*(i-55296)+(s-56320)+65536,!0}e.pos=r,e.lastIntValue=i}return!0}if(t&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&0<=(s=e.lastIntValue)&&s<=1114111)return!0;t&&e.raise("Invalid unicode escape"),e.pos=n}return!1},t.regexp_eatIdentityEscape=function(e){var t;return e.switchU?!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0):!(99===(t=e.current())||e.switchN&&107===t||(e.lastIntValue=t,e.advance(),0))},t.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;let t=e.current();if(49<=t&&t<=57){for(;e.lastIntValue=10*e.lastIntValue+(t-48),e.advance(),48<=(t=e.current())&&t<=57;);return!0}return!1};function f(e){return u(e)||95===e}function l(e){return 48<=e&&e<=57}function p(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function h(e){return 65<=e&&e<=70?e-65+10:97<=e&&e<=102?e-97+10:e-48}function d(e){return 48<=e&&e<=55}return t.regexp_eatCharacterClassEscape=function(t){var e,n=t.current();if(100===(e=n)||68===e||115===e||83===e||119===e||87===e)return t.lastIntValue=-1,t.advance(),1;let i=!1;if(t.switchU&&9<=this.options.ecmaVersion&&((i=80===n)||112===n)){t.lastIntValue=-1,t.advance();let e;if(t.eat(123)&&(e=this.regexp_eatUnicodePropertyValueExpression(t))&&t.eat(125))return i&&2===e&&t.raise("Invalid property name"),e;t.raise("Invalid property name")}return 0},t.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n,i=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e))return n=e.lastStringValue,this.regexp_validateUnicodePropertyNameAndValue(e,i,n),1}return e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)?(i=e.lastStringValue,this.regexp_validateUnicodePropertyNameOrValue(e,i)):0},t.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){o(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},t.regexp_validateUnicodePropertyNameOrValue=function(e,t){return e.unicodeProperties.binary.test(t)?1:e.switchV&&e.unicodeProperties.binaryOfStrings.test(t)?2:void e.raise("Invalid property name")},t.regexp_eatUnicodePropertyName=function(e){var t;for(e.lastStringValue="";f(t=e.current());)e.lastStringValue+=a(t),e.advance();return""!==e.lastStringValue},t.regexp_eatUnicodePropertyValue=function(e){var t,n;for(e.lastStringValue="";f(n=t=e.current())||l(n);)e.lastStringValue+=a(t),e.advance();return""!==e.lastStringValue},t.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},t.regexp_eatCharacterClass=function(e){var t,n;return!!e.eat(91)&&(t=e.eat(94),n=this.regexp_classContents(e),e.eat(93)||e.raise("Unterminated character class"),t&&2===n&&e.raise("Negated character class may contain strings"),!0)},t.regexp_classContents=function(e){if(93!==e.current()){if(e.switchV)return this.regexp_classSetExpression(e);this.regexp_nonEmptyClassRanges(e)}return 1},t.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t,n=e.lastIntValue;e.eat(45)&&this.regexp_eatClassAtom(e)&&(t=e.lastIntValue,!e.switchU||-1!==n&&-1!==t||e.raise("Invalid character class"),-1!==n)&&-1!==t&&t<n&&e.raise("Range out of order in character class")}},t.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){const n=e.current();99!==n&&!d(n)||e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}const n=e.current();return 93!==n&&(e.lastIntValue=n,e.advance(),!0)},t.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},t.regexp_classSetExpression=function(e){let t=1,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){2===n&&(t=2);for(var i=e.pos;e.eatChars([38,38]);)38!==e.current()&&(n=this.regexp_eatClassSetOperand(e))?2!==n&&(t=1):e.raise("Invalid character in character class");if(i!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(i!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(!(n=this.regexp_eatClassSetOperand(e)))return t;2===n&&(t=2)}},t.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n,i=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e))return n=e.lastIntValue,-1!==i&&-1!==n&&n<i&&e.raise("Range out of order in character class"),!0;e.pos=t}return!1},t.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?1:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)},t.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),i=this.regexp_classContents(e);if(e.eat(93))return n&&2===i&&e.raise("Negated character class may contain strings"),i;e.pos=t}if(e.eat(92)){n=this.regexp_eatCharacterClassEscape(e);if(n)return n;e.pos=t}return null},t.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null},t.regexp_classStringDisjunctionContents=function(e){let t=this.regexp_classString(e);for(;e.eat(124);)2===this.regexp_classString(e)&&(t=2);return t},t.regexp_classString=function(e){let t=0;for(;this.regexp_eatClassSetCharacter(e);)t++;return 1===t?1:2},t.regexp_eatClassSetCharacter=function(e){var t,n=e.pos;return e.eat(92)?!(!this.regexp_eatCharacterEscape(e)&&!this.regexp_eatClassSetReservedPunctuator(e)&&(e.eat(98)?(e.lastIntValue=8,0):(e.pos=n,1))):!((n=e.current())<0||n===e.lookahead()&&(33===(t=n)||35<=t&&t<=38||42<=t&&t<=44||46===t||58<=t&&t<=64||94===t||96===t||126===t)||40===(t=n)||41===t||45===t||47===t||91<=t&&t<=93||123<=t&&t<=125||(e.advance(),e.lastIntValue=n,0))},t.regexp_eatClassSetReservedPunctuator=function(e){var t,n=e.current();return(33===(t=n)||35===t||37===t||38===t||44===t||45===t||58<=t&&t<=62||64===t||96===t||126===t)&&(e.lastIntValue=n,e.advance(),!0)},t.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!l(t)&&95!==t||(e.lastIntValue=t%32,e.advance(),0))},t.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},t.regexp_eatDecimalDigits=function(e){var t,n=e.pos;for(e.lastIntValue=0;l(t=e.current());)e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();return e.pos!==n},t.regexp_eatHexDigits=function(e){var t,n=e.pos;for(e.lastIntValue=0;p(t=e.current());)e.lastIntValue=16*e.lastIntValue+h(t),e.advance();return e.pos!==n},t.regexp_eatLegacyOctalEscapeSequence=function(e){var t,n;return!!this.regexp_eatOctalDigit(e)&&(t=e.lastIntValue,this.regexp_eatOctalDigit(e)?(n=e.lastIntValue,t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n):e.lastIntValue=t,!0)},t.regexp_eatOctalDigit=function(e){var t=e.current();return d(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},t.regexp_eatFixedHexDigits=function(t,n){var i=t.pos;for(let e=t.lastIntValue=0;e<n;++e){var r=t.current();if(!p(r))return t.pos=i,!1;t.lastIntValue=16*t.lastIntValue+h(r),t.advance()}return!0},{RegExpValidationState:class{constructor(e){this.parser=e,this.validFlags="gim"+(6<=e.options.ecmaVersion?"uy":"")+(9<=e.options.ecmaVersion?"s":"")+(13<=e.options.ecmaVersion?"d":"")+(15<=e.options.ecmaVersion?"v":""),this.unicodeProperties=n[14<=e.options.ecmaVersion?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]}reset(e,t,n){var i=-1!==n.indexOf("v"),r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,i&&15<=this.parser.options.ecmaVersion?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=r&&6<=this.parser.options.ecmaVersion,this.switchV=!1,this.switchN=r&&9<=this.parser.options.ecmaVersion)}raise(e){this.parser.raiseRecoverable(this.start,`Invalid regular expression: /${this.source}/: `+e)}at(e,t=!1){var n,i=this.source,r=i.length;return r<=e?-1:(n=i.charCodeAt(e),!(!t&&!this.switchU||n<=55295||57344<=n||r<=e+1)&&56320<=(t=i.charCodeAt(e+1))&&t<=57343?(n<<10)+t-56613888:n)}nextIndex(e,t=!1){var n=this.source,i=n.length;if(i<=e)return i;let r=n.charCodeAt(e),s;return!t&&!this.switchU||r<=55295||57344<=r||i<=e+1||(s=n.charCodeAt(e+1))<56320||57343<s?e+1:e+2}current(e=!1){return this.at(this.pos,e)}lookahead(e=!1){return this.at(this.nextIndex(this.pos,e),e)}advance(e=!1){this.pos=this.nextIndex(this.pos,e)}eat(e,t=!1){return this.current(t)===e&&(this.advance(t),!0)}eatChars(e,t=!1){let n=this.pos;for(const r of e){var i=this.at(n,t);if(-1===i||i!==r)return!1;n=this.nextIndex(n,t)}return this.pos=n,!0}}}}),define("skylark-acorn/tokenize",["./identifier","./tokentype","./state","./locutil","./regexp","./whitespace","./util"],function(e,t,n,i,r,s,o){"use strict";const{isIdentifierStart:a,isIdentifierChar:c}=e,{types:u,keywords:f}=t;e=n.Parser;const l=i["SourceLocation"],p=r["RegExpValidationState"],{lineBreak:h,nextLineBreak:d,isNewLine:m,nonASCIIwhitespace:g}=s,_=o["codePointToString"];class v{constructor(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new l(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])}}t=e.prototype;function y(e){return"function"!=typeof BigInt?null:BigInt(e.replace(/_/g,""))}t.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new v(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},t.getToken=function(){return this.next(),new v(this)},"undefined"!=typeof Symbol&&(t[Symbol.iterator]=function(){return{next:()=>{var e=this.getToken();return{done:e.type===u.eof,value:e}}}}),t.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(u.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},t.readToken=function(e){return a(e,6<=this.options.ecmaVersion)||92===e?this.readWord():this.getTokenFromCode(e)},t.fullCharCodeAtPos=function(){var e,t=this.input.charCodeAt(this.pos);return t<=55295||56320<=t||(e=this.input.charCodeAt(this.pos+1))<=56319||57344<=e?t:(t<<10)+e-56613888},t.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),n=this.pos,t=this.input.indexOf("*/",this.pos+=2);if(-1===t&&this.raise(this.pos-2,"Unterminated comment"),this.pos=t+2,this.options.locations)for(let e,t=n;-1<(e=d(this.input,t,this.pos));)++this.curLine,t=this.lineStart=e;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,t),n,this.pos,e,this.curPosition())},t.skipLineComment=function(e){var t=this.pos,n=this.options.onComment&&this.curPosition();let i=this.input.charCodeAt(this.pos+=e);for(;this.pos<this.input.length&&!m(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},t.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(8<e&&e<14||5760<=e&&g.test(String.fromCharCode(e))))break e;++this.pos}}},t.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},t.readToken_dot=function(){var e,t=this.input.charCodeAt(this.pos+1);return 48<=t&&t<=57?this.readNumber(!0):(e=this.input.charCodeAt(this.pos+2),6<=this.options.ecmaVersion&&46===t&&46===e?(this.pos+=3,this.finishToken(u.ellipsis)):(++this.pos,this.finishToken(u.dot)))},t.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(u.assign,2):this.finishOp(u.slash,1)},t.readToken_mult_modulo_exp=function(e){let t=this.input.charCodeAt(this.pos+1),n=1,i=42===e?u.star:u.modulo;return 7<=this.options.ecmaVersion&&42===e&&42===t&&(++n,i=u.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(u.assign,n+1):this.finishOp(i,n)},t.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t!==e)return 61===t?this.finishOp(u.assign,2):this.finishOp(124===e?u.bitwiseOR:u.bitwiseAND,1);if(12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2))return this.finishOp(u.assign,3);return this.finishOp(124===e?u.logicalOR:u.logicalAND,2)},t.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(u.assign,2):this.finishOp(u.bitwiseXOR,1)},t.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!h.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(u.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(u.assign,2):this.finishOp(u.plusMin,1)},t.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1);let n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(u.assign,n+1):this.finishOp(u.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(u.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},t.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(u.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(u.arrow)):this.finishOp(61===e?u.eq:u.prefix,1)},t.readToken_question=function(){var e=this.options.ecmaVersion;if(11<=e){var t=this.input.charCodeAt(this.pos+1);if(46===t){var n=this.input.charCodeAt(this.pos+2);if(n<48||57<n)return this.finishOp(u.questionDot,2)}if(63===t){if(12<=e)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(u.assign,3);return this.finishOp(u.coalesce,2)}}return this.finishOp(u.question,1)},t.readToken_numberSign=function(){var e=this.options.ecmaVersion;let t=35;if(13<=e&&(++this.pos,t=this.fullCharCodeAtPos(),a(t,!0)||92===t))return this.finishToken(u.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+_(t)+"'")},t.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(u.parenL);case 41:return++this.pos,this.finishToken(u.parenR);case 59:return++this.pos,this.finishToken(u.semi);case 44:return++this.pos,this.finishToken(u.comma);case 91:return++this.pos,this.finishToken(u.bracketL);case 93:return++this.pos,this.finishToken(u.bracketR);case 123:return++this.pos,this.finishToken(u.braceL);case 125:return++this.pos,this.finishToken(u.braceR);case 58:return++this.pos,this.finishToken(u.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(u.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(u.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+_(e)+"'")},t.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},t.readRegexp=function(){let e,t,n=this.pos;for(;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(h.test(i)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===i)t=!0;else if("]"===i&&t)t=!1;else if("/"===i&&!t)break;e="\\"===i}++this.pos}var r=this.input.slice(n,this.pos),s=(++this.pos,this.pos),o=this.readWord1(),s=(this.containsEsc&&this.unexpected(s),this.regexpState||(this.regexpState=new p(this)));s.reset(n,r,o),this.validateRegExpFlags(s),this.validateRegExpPattern(s);let a=null;try{a=new RegExp(r,o)}catch(e){}return this.finishToken(u.regexp,{pattern:r,flags:o,value:a})},t.readInt=function(i,t,e){var r=12<=this.options.ecmaVersion&&void 0===t,s=e&&48===this.input.charCodeAt(this.pos);let n=this.pos,o=0,a=0;for(let n=0,e=null==t?1/0:t;n<e;++n,++this.pos){let e=this.input.charCodeAt(this.pos),t;if(r&&95===e)s&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===a&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===n&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=e;else{if((t=97<=e?e-97+10:65<=e?e-65+10:48<=e&&e<=57?e-48:1/0)>=i)break;a=e,o=o*i+t}}return r&&95===a&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===n||null!=t&&this.pos-n!==t?null:o},t.readRadixNumber=function(e){var t=this.pos;this.pos+=2;let n=this.readInt(e);return null==n&&this.raise(this.start+2,"Expected number in radix "+e),11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(n=y(this.input.slice(t,this.pos)),++this.pos):a(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(u.num,n)},t.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10,void 0,!0)||this.raise(t,"Invalid number");let n=2<=this.pos-t&&48===this.input.charCodeAt(t),i=(n&&this.strict&&this.raise(t,"Invalid number"),this.input.charCodeAt(this.pos));if(!n&&!e&&11<=this.options.ecmaVersion&&110===i)return e=y(this.input.slice(t,this.pos)),++this.pos,a(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(u.num,e);n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),46!==i||n||(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),69!==i&&101!==i||n||(43!==(i=this.input.charCodeAt(++this.pos))&&45!==i||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),a(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");e=this.input.slice(t,this.pos);t=n?parseInt(e,8):parseFloat(e.replace(/_/g,""));return this.finishToken(u.num,t)},t.readCodePoint=function(){let e=this.input.charCodeAt(this.pos),t;var n;return 123===e?(this.options.ecmaVersion<6&&this.unexpected(),n=++this.pos,t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,1114111<t&&this.invalidStringToken(n,"Code point out of bounds")):t=this.readHexChar(4),t},t.readString=function(e){let t="",n=++this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===e)break;92===i?(t=(t+=this.input.slice(n,this.pos))+this.readEscapedChar(!1),n=this.pos):8232===i||8233===i?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(m(i)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(u.string,t)};const b={};return t.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==b)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},t.invalidStringToken=function(e,t){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw b;this.raise(e,t)},t.readTmplToken=function(){let e="",t=this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==u.template&&this.type!==u.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(u.template,e)):36===n?(this.pos+=2,this.finishToken(u.dollarBraceL)):(++this.pos,this.finishToken(u.backQuote));if(92===n)e=(e+=this.input.slice(t,this.pos))+this.readEscapedChar(!0),t=this.pos;else if(m(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},t.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(u.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},t.readEscapedChar=function(n){let i=this.input.charCodeAt(++this.pos);switch(++this.pos,i){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return _(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:var e;this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),n&&(e=this.pos-1,this.invalidStringToken(e,"Invalid escape sequence in template string"));default:if(48<=i&&i<=55){let e=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],t=parseInt(e,8);return 255<t&&(e=e.slice(0,-1),t=parseInt(e,8)),this.pos+=e.length-1,i=this.input.charCodeAt(this.pos),"0"===e&&56!==i&&57!==i||!this.strict&&!n||this.invalidStringToken(this.pos-1-e.length,n?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(t)}return m(i)?"":String.fromCharCode(i)}},t.readHexChar=function(e){var t=this.pos,e=this.readInt(16,e);return null===e&&this.invalidStringToken(t,"Bad character escape sequence"),e},t.readWord1=function(){let e="",t=!(this.containsEsc=!1),n=this.pos;for(var i=6<=this.options.ecmaVersion;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(c(r,i))this.pos+=r<=65535?1:2;else{if(92!==r)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var r=this.pos,s=(117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,this.readCodePoint());(t?a:c)(s,i)||this.invalidStringToken(r,"Invalid Unicode escape"),e+=_(s),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},t.readWord=function(){var e=this.readWord1();let t=u.name;return this.keywords.test(e)&&(t=f[e]),this.finishToken(t,e)},{Token:v}}),define("skylark-acorn/main",["./state","./parseutil","./statement","./lval","./expression","./location","./scope","./options","./locutil","./node","./tokentype","./tokencontext","./identifier","./tokenize","./whitespace"],function(e,t,n,i,r,s,o,a,c,u,f,l,p,h,d){"use strict";const m=e["Parser"];var e=a["defaultOptions"],{Position:a,SourceLocation:c,getLineInfo:g}=c,u=u["Node"],{TokenType:f,types:_,keywords:v}=f,{TokContext:l,types:y}=l,{isIdentifierChar:p,isIdentifierStart:b}=p,h=h["Token"],{isNewLine:d,lineBreak:x,lineBreakG:w,nonASCIIwhitespace:S}=d;return m.acorn={Parser:m,version:"8.10.0",defaultOptions:e,Position:a,SourceLocation:c,getLineInfo:g,Node:u,TokenType:f,tokTypes:_,keywordTypes:v,TokContext:l,tokContexts:y,isIdentifierChar:p,isIdentifierStart:b,Token:h,isNewLine:d,lineBreak:x,lineBreakG:w,nonASCIIwhitespace:S},{version:"8.10.0",Parser:m,defaultOptions:e,Position:a,SourceLocation:c,getLineInfo:g,Node:u,TokenType:f,tokTypes:_,keywordTypes:v,TokContext:l,tokContexts:y,isIdentifierChar:p,isIdentifierStart:b,Token:h,isNewLine:d,lineBreak:x,lineBreakG:w,nonASCIIwhitespace:S,parse:function(e,t){return m.parse(e,t)},parseExpressionAt:function(e,t,n){return m.parseExpressionAt(e,t,n)},tokenizer:function(e,t){return m.tokenizer(e,t)}}}),define("skylark-acorn",["skylark-acorn/main"],function(e){return e}),define("skylark-acorn/plugins/jsx",[],function(){const d={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"},m=/^[\da-fA-F]+$/,g=/^\d+$/,c=new WeakMap;function _(e){e=e.Parser.acorn||e;let t=c.get(e);if(!t){const r=e.tokTypes;var n=e.TokContext,i=e.TokenType;const s=new n("<tag",!1),o=new n("</tag",!1),a=new n("<tag>...</tag>",!0,!0);n={tc_oTag:s,tc_cTag:o,tc_expr:a},i={jsxName:new i("jsxName"),jsxText:new i("jsxText",{beforeExpr:!0}),jsxTagStart:new i("jsxTagStart",{startsExpr:!0}),jsxTagEnd:new i("jsxTagEnd")};i.jsxTagStart.updateContext=function(){this.context.push(a),this.context.push(s),this.exprAllowed=!1},i.jsxTagEnd.updateContext=function(e){var t=this.context.pop();t===s&&e===r.slash||t===o?(this.context.pop(),this.exprAllowed=this.curContext()===a):this.exprAllowed=!0},t={tokContexts:n,tokTypes:i},c.set(e,t)}return t}function v(e){return e&&("JSXIdentifier"===e.type?e.name:"JSXNamespacedName"===e.type?e.namespace.name+":"+e.name.name:"JSXMemberExpression"===e.type?v(e.object)+"."+v(e.property):void 0)}function e(h){return h=h||{},function(e){{var r={allowNamespaces:!1!==h.allowNamespaces,allowNamespacedObjects:!!h.allowNamespacedObjects};const t=e.acorn||require("acorn"),n=_(t),a=t.tokTypes,c=n.tokTypes,i=t.tokContexts,s=n.tokContexts.tc_oTag,o=n.tokContexts.tc_cTag,u=n.tokContexts.tc_expr,f=t.isNewLine,l=t.isIdentifierStart,p=t.isIdentifierChar;return class extends e{static get acornJsx(){return n}jsx_readToken(){let e="",t=this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated JSX contents");var n=this.input.charCodeAt(this.pos);switch(n){case 60:case 123:return this.pos===this.start?60===n&&this.exprAllowed?(++this.pos,this.finishToken(c.jsxTagStart)):this.getTokenFromCode(n):(e+=this.input.slice(t,this.pos),this.finishToken(c.jsxText,e));case 38:e=(e+=this.input.slice(t,this.pos))+this.jsx_readEntity(),t=this.pos;break;case 62:case 125:this.raise(this.pos,"Unexpected token `"+this.input[this.pos]+"`. Did you mean `"+(62===n?"&gt;":"&rbrace;")+'` or `{"'+this.input[this.pos]+'"}`?');default:f(n)?(e=(e+=this.input.slice(t,this.pos))+this.jsx_readNewLine(!0),t=this.pos):++this.pos}}}jsx_readNewLine(e){var t=this.input.charCodeAt(this.pos);let n;return++this.pos,n=13===t&&10===this.input.charCodeAt(this.pos)?(++this.pos,e?"\n":"\r\n"):String.fromCharCode(t),this.options.locations&&(++this.curLine,this.lineStart=this.pos),n}jsx_readString(e){let t="",n=++this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===e)break;38===i?(t=(t+=this.input.slice(n,this.pos))+this.jsx_readEntity(),n=this.pos):f(i)?(t=(t+=this.input.slice(n,this.pos))+this.jsx_readNewLine(!1),n=this.pos):++this.pos}return t+=this.input.slice(n,this.pos++),this.finishToken(a.string,t)}jsx_readEntity(){let e="",t=0,n;"&"!==this.input[this.pos]&&this.raise(this.pos,"Entity must start with an ampersand");for(var i,r=++this.pos;this.pos<this.input.length&&t++<10;){if(";"===(i=this.input[this.pos++])){"#"===e[0]?"x"===e[1]?(e=e.substr(2),m.test(e)&&(n=String.fromCharCode(parseInt(e,16)))):(e=e.substr(1),g.test(e)&&(n=String.fromCharCode(parseInt(e,10)))):n=d[e];break}e+=i}return n||(this.pos=r,"&")}jsx_readWord(){for(var e,t=this.pos;e=this.input.charCodeAt(++this.pos),p(e)||45===e;);return this.finishToken(c.jsxName,this.input.slice(t,this.pos))}jsx_parseIdentifier(){var e=this.startNode();return this.type===c.jsxName?e.name=this.value:this.type.keyword?e.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(e,"JSXIdentifier")}jsx_parseNamespacedName(){var e=this.start,t=this.startLoc,n=this.jsx_parseIdentifier();return r.allowNamespaces&&this.eat(a.colon)?((e=this.startNodeAt(e,t)).namespace=n,e.name=this.jsx_parseIdentifier(),this.finishNode(e,"JSXNamespacedName")):n}jsx_parseElementName(){if(this.type===c.jsxTagEnd)return"";var e=this.start,t=this.startLoc;let n=this.jsx_parseNamespacedName();for(this.type!==a.dot||"JSXNamespacedName"!==n.type||r.allowNamespacedObjects||this.unexpected();this.eat(a.dot);){var i=this.startNodeAt(e,t);i.object=n,i.property=this.jsx_parseIdentifier(),n=this.finishNode(i,"JSXMemberExpression")}return n}jsx_parseAttributeValue(){switch(this.type){case a.braceL:var e=this.jsx_parseExpressionContainer();return"JSXEmptyExpression"===e.expression.type&&this.raise(e.start,"JSX attributes must only be assigned a non-empty expression"),e;case c.jsxTagStart:case a.string:return this.parseExprAtom();default:this.raise(this.start,"JSX value should be either an expression or a quoted JSX text")}}jsx_parseEmptyExpression(){var e=this.startNodeAt(this.lastTokEnd,this.lastTokEndLoc);return this.finishNodeAt(e,"JSXEmptyExpression",this.start,this.startLoc)}jsx_parseExpressionContainer(){var e=this.startNode();return this.next(),e.expression=this.type===a.braceR?this.jsx_parseEmptyExpression():this.parseExpression(),this.expect(a.braceR),this.finishNode(e,"JSXExpressionContainer")}jsx_parseAttribute(){var e=this.startNode();return this.eat(a.braceL)?(this.expect(a.ellipsis),e.argument=this.parseMaybeAssign(),this.expect(a.braceR),this.finishNode(e,"JSXSpreadAttribute")):(e.name=this.jsx_parseNamespacedName(),e.value=this.eat(a.eq)?this.jsx_parseAttributeValue():null,this.finishNode(e,"JSXAttribute"))}jsx_parseOpeningElementAt(e,t){var n=this.startNodeAt(e,t),e=(n.attributes=[],this.jsx_parseElementName());for(e&&(n.name=e);this.type!==a.slash&&this.type!==c.jsxTagEnd;)n.attributes.push(this.jsx_parseAttribute());return n.selfClosing=this.eat(a.slash),this.expect(c.jsxTagEnd),this.finishNode(n,e?"JSXOpeningElement":"JSXOpeningFragment")}jsx_parseClosingElementAt(e,t){e=this.startNodeAt(e,t),t=this.jsx_parseElementName();return t&&(e.name=t),this.expect(c.jsxTagEnd),this.finishNode(e,t?"JSXClosingElement":"JSXClosingFragment")}jsx_parseElementAt(e,t){var n=this.startNodeAt(e,t),i=[],r=this.jsx_parseOpeningElementAt(e,t);let s=null;if(!r.selfClosing){e:for(;;)switch(this.type){case c.jsxTagStart:if(e=this.start,t=this.startLoc,this.next(),this.eat(a.slash)){s=this.jsx_parseClosingElementAt(e,t);break e}i.push(this.jsx_parseElementAt(e,t));break;case c.jsxText:i.push(this.parseExprAtom());break;case a.braceL:i.push(this.jsx_parseExpressionContainer());break;default:this.unexpected()}v(s.name)!==v(r.name)&&this.raise(s.start,"Expected corresponding JSX closing tag for <"+v(r.name)+">")}var o=r.name?"Element":"Fragment";return n["opening"+o]=r,n["closing"+o]=s,n.children=i,this.type===a.relational&&"<"===this.value&&this.raise(this.start,"Adjacent JSX elements must be wrapped in an enclosing tag"),this.finishNode(n,"JSX"+o)}jsx_parseText(){var e=this.parseLiteral(this.value);return e.type="JSXText",e}jsx_parseElement(){var e=this.start,t=this.startLoc;return this.next(),this.jsx_parseElementAt(e,t)}parseExprAtom(e){return this.type===c.jsxText?this.jsx_parseText():this.type===c.jsxTagStart?this.jsx_parseElement():super.parseExprAtom(e)}readToken(e){var t=this.curContext();if(t===u)return this.jsx_readToken();if(t===s||t===o){if(l(e))return this.jsx_readWord();if(62==e)return++this.pos,this.finishToken(c.jsxTagEnd);if((34===e||39===e)&&t==s)return this.jsx_readString(e)}return 60===e&&this.exprAllowed&&33!==this.input.charCodeAt(this.pos+1)?(++this.pos,this.finishToken(c.jsxTagStart)):super.readToken(e)}updateContext(e){if(this.type==a.braceL){var t=this.curContext();t==s?this.context.push(i.b_expr):t==u?this.context.push(i.b_tmpl):super.updateContext(e),this.exprAllowed=!0}else{if(this.type!==a.slash||e!==c.jsxTagStart)return super.updateContext(e);this.context.length-=2,this.context.push(o),this.exprAllowed=!1}}}}}}return Object.defineProperty(e,"tokTypes",{get:function(){return _(require("acorn")).tokTypes},configurable:!0,enumerable:!0}),e}),define("skylark-espree/lib/token-translator",[],function(){const a={Boolean:"Boolean",EOF:"<end>",Identifier:"Identifier",PrivateIdentifier:"PrivateIdentifier",Keyword:"Keyword",Null:"Null",Numeric:"Numeric",Punctuator:"Punctuator",String:"String",RegularExpression:"RegularExpression",Template:"Template",JSXIdentifier:"JSXIdentifier",JSXText:"JSXText"};function e(e,t){this._acornTokTypes=e,this._tokens=[],this._curlyBrace=null,this._code=t}return e.prototype={constructor:e,translate(e,t){var n=e.type,i=this._acornTokTypes;return n===i.name?(e.type=a.Identifier,"static"===e.value&&(e.type=a.Keyword),5<t.ecmaVersion&&("yield"===e.value||"let"===e.value)&&(e.type=a.Keyword)):n===i.privateId?e.type=a.PrivateIdentifier:n===i.semi||n===i.comma||n===i.parenL||n===i.parenR||n===i.braceL||n===i.braceR||n===i.dot||n===i.bracketL||n===i.colon||n===i.question||n===i.bracketR||n===i.ellipsis||n===i.arrow||n===i.jsxTagStart||n===i.incDec||n===i.starstar||n===i.jsxTagEnd||n===i.prefix||n===i.questionDot||n.binop&&!n.keyword||n.isAssign?(e.type=a.Punctuator,e.value=this._code.slice(e.start,e.end)):n===i.jsxName?e.type=a.JSXIdentifier:"jsxText"===n.label||n===i.jsxAttrValueToken?e.type=a.JSXText:n.keyword?"true"===n.keyword||"false"===n.keyword?e.type=a.Boolean:"null"===n.keyword?e.type=a.Null:e.type=a.Keyword:n===i.num?(e.type=a.Numeric,e.value=this._code.slice(e.start,e.end)):n===i.string?(t.jsxAttrValueToken?(t.jsxAttrValueToken=!1,e.type=a.JSXText):e.type=a.String,e.value=this._code.slice(e.start,e.end)):n===i.regexp&&(e.type=a.RegularExpression,t=e.value,e.regex={flags:t.flags,pattern:t.pattern},e.value=`/${t.pattern}/`+t.flags),e},onToken(e,t){const i=this,n=this._acornTokTypes,r=t.tokens,s=this._tokens;function o(){var e,t,n;r.push((e=i._tokens,t=i._code,n=e[0],e=e[e.length-1],t={type:a.Template,value:t.slice(n.start,e.end)},n.loc&&(t.loc={start:n.loc.start,end:e.loc.end}),n.range&&(t.start=n.range[0],t.end=e.range[1],t.range=[t.start,t.end]),t)),i._tokens=[]}e.type===n.eof?this._curlyBrace&&r.push(this.translate(this._curlyBrace,t)):e.type===n.backQuote?(this._curlyBrace&&(r.push(this.translate(this._curlyBrace,t)),this._curlyBrace=null),s.push(e),1<s.length&&o()):e.type===n.dollarBraceL?(s.push(e),o()):e.type===n.braceR?(this._curlyBrace&&r.push(this.translate(this._curlyBrace,t)),this._curlyBrace=e):e.type===n.template||e.type===n.invalidTemplate?(this._curlyBrace&&(s.push(this._curlyBrace),this._curlyBrace=null),s.push(e)):(this._curlyBrace&&(r.push(this.translate(this._curlyBrace,t)),this._curlyBrace=null),r.push(this.translate(e,t)))}},e}),define("skylark-espree/lib/options",[],function(){const a=[3,5,6,7,8,9,10,11,12,13,14,15];function c(){return a[a.length-1]}return{getLatestEcmaVersion:c,getSupportedEcmaVersions:function(){return[...a]},normalizeOptions:function(e){var t=function(e="latest"){let t="latest"===e?c():e;if("number"!=typeof t)throw new Error(`ecmaVersion must be a number or "latest". Received value of type ${typeof e} instead.`);if(2015<=t&&(t-=2009),a.includes(t))return t;throw new Error("Invalid ecmaVersion.")}(e.ecmaVersion),n=function(e="script"){if("script"===e||"module"===e)return e;if("commonjs"===e)return"script";throw new Error("Invalid sourceType.")}(e.sourceType),i=!0===e.range,r=!0===e.loc;if(3!==t&&e.allowReserved)throw new Error("`allowReserved` is only supported when ecmaVersion is 3");if(void 0!==e.allowReserved&&"boolean"!=typeof e.allowReserved)throw new Error("`allowReserved`, when present, must be `true` or `false`");var s=3===t&&(e.allowReserved||"never"),o=e.ecmaFeatures||{},o="commonjs"===e.sourceType||Boolean(o.globalReturn);if("module"===n&&t<6)throw new Error("sourceType 'module' is not supported when ecmaVersion < 2015. Consider adding `{ ecmaVersion: 2015 }` to the parser options.");return Object.assign({},e,{ecmaVersion:t,sourceType:n,ranges:i,locations:r,allowReserved:s,allowReturnOutsideFunction:o})}}}),define("skylark-espree/lib/espree",["./token-translator","./options"],function(s,e){const c=e["normalizeOptions"],u=Symbol("espree's internal state"),t=Symbol("espree's esprimaFinishNode");function f(e,t,n,i,r,s,o){let a;e={type:a=e?"Block":"#!"===o.slice(n,n+2)?"Hashbang":"Line",value:t};return"number"==typeof n&&(e.start=n,e.end=i,e.range=[n,i]),"object"==typeof r&&(e.loc={start:r,end:s}),e}return()=>i=>{const r=Object.assign({},i.acorn.tokTypes);return i.acornJsx&&Object.assign(r,i.acornJsx.tokTypes),class extends i{constructor(e,o){"object"==typeof e&&null!==e||(e={}),"string"==typeof o||o instanceof String||(o=String(o));var t=e.sourceType,e=c(e),n=e.ecmaFeatures||{};const i=!0===e.tokens?new s(r,o):null,a={originalSourceType:t||e.sourceType,tokens:i?[]:null,comments:!0===e.comment?[]:null,impliedStrict:!0===n.impliedStrict&&5<=e.ecmaVersion,ecmaVersion:e.ecmaVersion,jsxAttrValueToken:!1,lastToken:null,templateElements:[]};super({ecmaVersion:e.ecmaVersion,sourceType:e.sourceType,ranges:e.ranges,locations:e.locations,allowReserved:e.allowReserved,allowReturnOutsideFunction:e.allowReturnOutsideFunction,onToken:e=>{i&&i.onToken(e,a),e.type!==r.eof&&(a.lastToken=e)},onComment:(e,t,n,i,r,s)=>{a.comments&&(e=f(e,t,n,i,r,s,o),a.comments.push(e))}},o),this[u]=a}tokenize(){for(;this.next(),this.type!==r.eof;);this.next();var e=this[u],t=e.tokens;return e.comments&&(t.comments=e.comments),t}finishNode(...e){e=super.finishNode(...e);return this[t](e)}finishNodeAt(...e){e=super.finishNodeAt(...e);return this[t](e)}parse(){var e,t=this[u],n=super.parse();return n.sourceType=t.originalSourceType,t.comments&&(n.comments=t.comments),t.tokens&&(n.tokens=t.tokens),n.body.length&&([e]=n.body,n.range&&(n.range[0]=e.range[0]),n.loc&&(n.loc.start=e.loc.start),n.start=e.start),t.lastToken&&(n.range&&(n.range[1]=t.lastToken.range[1]),n.loc&&(n.loc.end=t.lastToken.loc.end),n.end=t.lastToken.end),this[u].templateElements.forEach(e=>{var t=e.tail?1:2;e.start+=-1,e.end+=t,e.range&&(e.range[0]+=-1,e.range[1]+=t),e.loc&&(e.loc.start.column+=-1,e.loc.end.column+=t)}),n}parseTopLevel(e){return this[u].impliedStrict&&(this.strict=!0),super.parseTopLevel(e)}raise(e,t){var n=i.acorn.getLineInfo(this.input,e),t=new SyntaxError(t);throw t.index=e,t.lineNumber=n.line,t.column=n.column+1,t}raiseRecoverable(e,t){this.raise(e,t)}unexpected(e){let t="Unexpected token";if(null!=e){if(this.pos=e,this.options.locations)for(;this.pos<this.lineStart;)this.lineStart=this.input.lastIndexOf("\n",this.lineStart-2)+1,--this.curLine;this.nextToken()}this.end>this.start&&(t+=" "+this.input.slice(this.start,this.end)),this.raise(this.start,t)}jsx_readString(e){e=super.jsx_readString(e);return this.type===r.string&&(this[u].jsxAttrValueToken=!0),e}[t](e){return"TemplateElement"===e.type&&this[u].templateElements.push(e),e.type.includes("Function")&&!e.generator&&(e.generator=!1),e}}}}),define("skylark-espree/lib/version",[],function(){return"main"}),define("skylark-espree/eslint-visitor-keys",[],function(){const s={ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],AwaitExpression:["argument"],BinaryExpression:["left","right"],BlockStatement:["body"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExperimentalRestProperty:["argument"],ExperimentalSpreadProperty:["argument"],ExportAllDeclaration:["exported","source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],ForStatement:["init","test","update","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportExpression:["source"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],JSXAttribute:["name","value"],JSXClosingElement:["name"],JSXClosingFragment:[],JSXElement:["openingElement","children","closingElement"],JSXEmptyExpression:[],JSXExpressionContainer:["expression"],JSXFragment:["openingFragment","children","closingFragment"],JSXIdentifier:[],JSXMemberExpression:["object","property"],JSXNamespacedName:["namespace","name"],JSXOpeningElement:["name","attributes"],JSXOpeningFragment:[],JSXSpreadAttribute:["argument"],JSXSpreadChild:["expression"],JSXText:[],LabeledStatement:["label","body"],Literal:[],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],StaticBlock:["body"],Super:[],SwitchCase:["test","consequent"],SwitchStatement:["discriminant","cases"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};for(const e of Object.keys(s))Object.freeze(s[e]);Object.freeze(s);const t=new Set(["parent","leadingComments","trailingComments"]);function n(e){return!t.has(e)&&"_"!==e[0]}return{KEYS:s,getKeys:function(e){return Object.keys(e).filter(n)},unionWith:function(e){var t=Object.assign({},s);for(const i of Object.keys(e))if(Object.prototype.hasOwnProperty.call(t,i)){var n=new Set(e[i]);for(const r of t[i])n.add(r);t[i]=Object.freeze(Array.from(n))}else t[i]=Object.freeze(Array.from(e[i]));return Object.freeze(t)}}}),define("skylark-espree/espree",["skylark-acorn","skylark-acorn/plugins/jsx","./lib/espree","./lib/version","./lib/options","./eslint-visitor-keys"],function(e,t,n,i,r,s){var{getLatestEcmaVersion:r,getSupportedEcmaVersions:o}=r;const a={_regular:null,_jsx:null,get regular(){return null===this._regular&&(this._regular=e.Parser.extend(n())),this._regular},get jsx(){return null===this._jsx&&(this._jsx=e.Parser.extend(t(),n())),this._jsx},get(e){return Boolean(e&&e.ecmaFeatures&&e.ecmaFeatures.jsx)?this.jsx:this.regular}};const c=s.KEYS;s=function(){let e,t={};for(e in"function"==typeof Object.create&&(t=Object.create(null)),c)Object.hasOwnProperty.call(c,e)&&(t[e]=e);return"function"==typeof Object.freeze&&Object.freeze(t),t}(),r=r(),o=o();return{tokenize:function(e,t){return new(a.get(t))(t=t&&!0===t.tokens?t:Object.assign({},t,{tokens:!0}),e).tokenize()},parse:function(e,t){return new(a.get(t))(t,e).parse()},version:i,name:"espree",VisitorKeys:c,Syntax:s,latestEcmaVersion:r,supportedEcmaVersions:o}}),define("skylark-espree/main",["./espree"],function(e){return e}),define("skylark-espree",["skylark-espree/main"],function(e){return e}),define("skylark-rjs/esprima",["skylark-espree"],function(e){return e}),define("skylark-rjs/parse",["./esprima","./lang"],function(esprima,lang){"use strict";function arrayToString(e){var n="[";return e&&e.forEach(function(e,t){n+=(0<t?",":"")+'"'+lang.jsEscape(e)+'"'}),n+="]"}var argPropName="arguments",emptyScope={},mixin=lang.mixin,hasProp=lang.hasProp;function traverse(e,t){var n;if(e){if(!1===t.call(null,e))return!1;for(var i=0,r=Object.keys(e);i<r.length;i++)if("object"==typeof(n=e[r[i]])&&null!==n&&!1===traverse(n,t))return!1}}function traverseBroad(e,t){var n;if(e){if(!1===t.call(null,e))return!1;for(var i=0,r=Object.keys(e);i<r.length;i++)"object"==typeof(n=e[key])&&null!==n&&traverseBroad(n,t)}}function getValidDeps(e){var t;if(e&&"ArrayExpression"===e.type&&e.elements)return t=[],e.elements.some(function(e){"Literal"===e.type&&t.push(e.value)}),t.length?t:void 0}function isFnExpression(e){return e&&("FunctionExpression"===e.type||"ArrowFunctionExpression"===e.type)}function parse(a,e,t,c){c=c||{};var n,i,r,u=[],s="",f=[],l=!0,t=esprima.parse(t);if(parse.recurse(t,function(e,t,n,i,r,s,o){return i=i||[],"define"!==e||n&&n!==a||(l=!1),n?f.push({name:n,deps:i}):u=u.concat(i),"define"===e&&s&&hasProp(o,s)?s:!!c.findNestedDependencies},c),c.insertNeedsDefine&&l&&(s+='require.needsDefine("'+a+'");'),u.length||f.length){for(n=0;n<f.length;n++)s&&(s+="\n"),(i=f[n]).name===a&&(i.deps=i.deps.concat(u),u=[]),r=arrayToString(i.deps),s+='define("'+i.name+'",'+r+");";u.length&&(s&&(s+="\n"),r=arrayToString(u),s+='define("'+a+'",'+r+");")}return s||null}return parse.traverse=traverse,parse.traverseBroad=traverseBroad,parse.isFnExpression=isFnExpression,parse.recurse=function(e,t,n,i){var r,s,o,a,c,u,f,l=n&&n.has;if(i=i||emptyScope,e)if(l&&"IfStatement"===e.type&&e.test.type&&"Literal"===e.test.type)e.test.value?this.recurse(e.consequent,t,n,i):this.recurse(e.alternate,t,n,i);else if(!1!==(o=this.parseNode(e,t,i))){if("string"==typeof o)return o;if("ExpressionStatement"===e.type&&e.expression&&"CallExpression"===e.expression.type&&e.expression.callee&&isFnExpression(e.expression.callee)&&(f=e.expression.callee),(f="UnaryExpression"===e.type&&e.argument&&"CallExpression"===e.argument.type&&e.argument.callee&&isFnExpression(e.argument.callee)?e.argument.callee:f)&&f.params&&f.params.length)for(c=f.params,i=mixin({},i,!0),a=0;a<c.length;a++)"Identifier"===(u=c[a]).type&&(i[u.name]=!0);for(a=0,r=Object.keys(e);a<r.length&&("object"!=typeof(s=e[r[a]])||null===s||"string"!=typeof(o=this.recurse(s,t,n,i))||!hasProp(i,o));a++);return"string"==typeof o&&hasProp(i,o)?o:void 0}},parse.definesRequire=function(e,t){var n=!1,i=!1;return traverse(esprima.parse(t),function(e){if((n="Program"===e.type&&e.body&&e.body.length?e.body.some(function(e){if("VariableDeclaration"===e.type){var t=e.declarations;if(t)if(t.some(function(e){return"VariableDeclarator"===e.type&&e.id&&"Identifier"===e.id.type&&"define"===e.id.name}))return!0}if("FunctionDeclaration"===e.type&&e.id&&"Identifier"===e.id.type&&"define"===e.id.name)return!0}):n)&&parse.hasDefineAmd(e))return!(i=!0)}),n&&i},parse.getAnonDeps=function(e,t){t="string"==typeof t?esprima.parse(t):t,t=this.findAnonDefineFactory(t);return parse.getAnonDepsFromNode(t)},parse.getAnonDepsFromNode=function(e){var t=[];return t=e&&(this.findRequireDepNames(e,t),e=e.params&&e.params.length)?(1<e?["require","exports","module"]:["require"]).concat(t):t},parse.isDefineNodeWithArgs=function(e){return e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"define"===e.callee.name&&e[argPropName]},parse.findAnonDefineFactory=function(e){var n;return traverse(e,function(e){var t;if(parse.isDefineNodeWithArgs(e))return isFnExpression(t=e[argPropName][0])?(n=t,!1):(e=e[argPropName][1],"Literal"===t.type&&isFnExpression(e)?(n=e,!1):void 0)}),n},parse.findConfig=function(fileContents){var jsConfig,foundConfig,stringData,foundRange,quote,quoteMatch,quoteRegExp=/(:\s|\[\s*)(['"])/,astRoot=esprima.parse(fileContents,{loc:!0});return traverse(astRoot,function(e){var t,n=parse.hasRequire(e);if(!n||"require"!==n&&"requirejs"!==n&&"requireConfig"!==n&&"requirejsConfig"!==n){if(t=parse.getRequireObjectLiteral(e))return stringData=parse.nodeToString(fileContents,t),jsConfig=stringData.value,foundRange=stringData.range,!1}else if((t=e[argPropName]&&e[argPropName][0])&&"ObjectExpression"===t.type)return stringData=parse.nodeToString(fileContents,t),jsConfig=stringData.value,foundRange=stringData.range,!1}),jsConfig&&(quoteMatch=quoteRegExp.exec(jsConfig),quote=quoteMatch&&quoteMatch[2]||'"',foundConfig=eval("("+jsConfig+")")),{config:foundConfig,range:foundRange,quote:quote}},parse.getRequireObjectLiteral=function(e){if(e.id&&"Identifier"===e.id.type&&("require"===e.id.name||"requirejs"===e.id.name)&&e.init&&"ObjectExpression"===e.init.type)return e.init},parse.renameNamespace=function(e,i){var r,s=[],t=esprima.parse(e,{loc:!0});return parse.recurse(t,function(e,t,n,i,r){return s.push(r.loc),"define"!==e},{}),s.length&&(r=e.split("\n"),s.reverse(),s.forEach(function(e){var t=e.start.column,e=e.start.line-1,n=r[e];r[e]=n.substring(0,t)+i+"."+n.substring(t,n.length)}),e=r.join("\n")),e},parse.findDependencies=function(e,t,n){var r=[],t=esprima.parse(t);return parse.recurse(t,function(e,t,n,i){i&&(r=r.concat(i))},n),r},parse.findCjsDependencies=function(e,t){var n=[];return traverse(esprima.parse(t),function(e){e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"require"===e.callee.name&&e[argPropName]&&1===e[argPropName].length&&"Literal"===(e=e[argPropName][0]).type&&n.push(e.value)}),n},parse.hasDefDefine=function(e){return"FunctionDeclaration"===e.type&&e.id&&"Identifier"===e.id.type&&"define"===e.id.name},parse.hasDefineAmd=function(e){return e&&"AssignmentExpression"===e.type&&e.left&&"MemberExpression"===e.left.type&&e.left.object&&"define"===e.left.object.name&&e.left.property&&"amd"===e.left.property.name},parse.refsDefineAmd=function(e){return e&&"MemberExpression"===e.type&&e.object&&"define"===e.object.name&&"Identifier"===e.object.type&&e.property&&"amd"===e.property.name&&"Identifier"===e.property.type},parse.hasRequire=function(e){var t,n=e&&e.callee;return e&&"CallExpression"===e.type&&n&&("Identifier"!==n.type||"require"!==n.name&&"requirejs"!==n.name?"MemberExpression"===n.type&&n.object&&"Identifier"===n.object.type&&("require"===n.object.name||"requirejs"===n.object.name)&&n.property&&"config"===n.property.name&&(t=n.object.name+"Config"):t=n.name),t},parse.hasDefine=function(e){return e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"define"===e.callee.name},parse.getNamedDefine=function(e){var t;return traverse(esprima.parse(e),function(e){if(e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"define"===e.callee.name&&e[argPropName]&&e[argPropName][0]&&"Literal"===e[argPropName][0].type)return t=e[argPropName][0].value,!1}),t},parse.getAllNamedDefines=function(e,a){var c=[];return parse.recurse(esprima.parse(e),function(e,t,n,i,r,s,o){return"define"===e&&n&&!a.hasOwnProperty(n)&&c.push(n),"define"!==e||!s||!hasProp(o,s)||s},{}),c},parse.usesAmdOrRequireJs=function(e,t){var r;return traverse(esprima.parse(t),function(e){var t,n,i;parse.hasDefDefine(e)?t="declaresDefine":parse.hasDefineAmd(e)?t="defineAmd":(n=parse.hasRequire(e))?!(i=e[argPropName]&&e[argPropName][0])||"ObjectExpression"!==i.type&&"ArrayExpression"!==i.type||(t=n):parse.hasDefine(e)&&(t="define"),t&&((r=r||{})[t]=!0)}),r},parse.usesCommonJs=function(e,t){var i=null,r=!1;return traverse(esprima.parse(t),function(e){var t,n=e.expression||e.init;"Identifier"!==e.type||"__dirname"!==e.name&&"__filename"!==e.name?"VariableDeclarator"===e.type&&e.id&&"Identifier"===e.id.type&&"exports"===e.id.name?t="varExports":n&&"AssignmentExpression"===n.type&&n.left&&"MemberExpression"===n.left.type&&n.left.object?"module"===n.left.object.name&&n.left.property&&"exports"===n.left.property.name?t="moduleExports":"exports"===n.left.object.name&&n.left.property?t="exports":"MemberExpression"===n.left.object.type&&"module"===n.left.object.object.name&&"exports"===n.left.object.property.name&&"Identifier"===n.left.object.property.type&&(t="moduleExports"):e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"require"===e.callee.name&&e[argPropName]&&1===e[argPropName].length&&"Literal"===e[argPropName][0].type&&(t="require"):t=e.name.substring(2),t&&("varExports"===t?r=!0:"exports"===t&&r||((i=i||{})[t]=!0))}),i},parse.findRequireDepNames=function(e,t){traverse(e,function(e){e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"require"===e.callee.name&&e[argPropName]&&1===e[argPropName].length&&"Literal"===(e=e[argPropName][0]).type&&t.push(e.value)})},parse.parseNode=function(e,t,n){var i,r,s,o=e&&e[argPropName],a=parse.hasRequire(e),c=!1;if("require"===a||"requirejs"===a){if(i=getValidDeps(a=(a=e[argPropName]&&e[argPropName][0])&&"ArrayExpression"!==a.type&&"ObjectExpression"===a.type?e[argPropName][1]:a))return t("require",null,null,i,e)}else{if(parse.hasDefine(e)&&o&&o.length){if(a=o[0],i=o[1],r=o[2],"ArrayExpression"===a.type?(r=i,i=a,a=null):isFnExpression(a)?(r=a,a=i=null):"Identifier"===a.type&&1===o.length&&hasProp(n,a.name)?(c=!0,r=a,a=null):"Literal"!==a.type&&(a=i=r=null),a&&"Literal"===a.type&&i&&(isFnExpression(i)?(r=i,i=null):"ObjectExpression"===i.type?i=r=null:"Identifier"===i.type&&(2===o.length?i=r=null:3===o.length&&isFnExpression(r)&&(i=null))),i&&"ArrayExpression"===i.type)i=getValidDeps(i);else if(isFnExpression(r))(o=parse.getAnonDepsFromNode(r)).length&&(i=o);else if(i||r&&!c)return;return t("define",null,a=a&&"Literal"===a.type?a.value:a,i,e,r&&"Identifier"===r.type?r.name:void 0,n)}if("CallExpression"===e.type&&e.callee&&isFnExpression(e.callee)&&e.callee.body&&e.callee.body.body&&1===e.callee.body.body.length&&"IfStatement"===e.callee.body.body[0].type&&(o=e.callee.body.body[0]).consequent&&o.consequent.body&&"ExpressionStatement"===(c=o.consequent.body[0]).type&&c.expression&&parse.hasDefine(c.expression)&&c.expression.arguments&&1===c.expression.arguments.length&&"Identifier"===c.expression.arguments[0].type&&(traverse(o.test,function(e){if(parse.refsDefineAmd(e))return!(s=!0)}),s))return t("define",null,null,null,c.expression,c.expression.arguments[0].name,n)}},parse.nodeToString=function(e,t){var t=t.loc,e=e.split("\n"),n=(1<t.start.line?e.slice(0,t.start.line-1).join("\n")+"\n":"")+e[t.start.line-1].substring(0,t.start.column),e=t.start.line===t.end.line?e[t.start.line-1].substring(t.start.column,t.end.column):e[t.start.line-1].substring(t.start.column)+"\n"+e.slice(t.start.line,t.end.line-1).join("\n")+"\n"+e[t.end.line-1].substring(0,t.end.column);return{value:e,range:[n.length,n.length+e.length]}},parse.getLicenseComments=function(e,t){var n,i,r,s,o,a,c=esprima.parse(t,{comment:!0,range:!0}),u="",f={},l=-1===t.indexOf("\r")?"\n":"\r\n";if(c.comments)for(o=0;o<c.comments.length;o++){if("Line"===(n=c.comments[o]).type)if(s="//"+n.value+l,i=n,o+1>=c.comments.length)s+=l;else{for(a=o+1;a<c.comments.length&&("Line"===(r=c.comments[a]).type&&r.range[0]===i.range[1]+1);a++)s+="//"+r.value+l,i=r;s+=l,o=a-1}else s="/*"+n.value+"*/"+l+l;f[s]||-1===s.indexOf("license")&&("Block"!==n.type||0!==s.indexOf("/*!"))&&-1===s.indexOf("opyright")&&-1===s.indexOf("(c)")||(u+=s,f[s]=!0)}return u},parse}),define("skylark-rjs/pragma",["./parse","./logger"],function(parse,logger){"use strict";function Temp(){}function create(e,t){Temp.prototype=e;var n,i=new Temp;if(Temp.prototype=null,t)for(n in t)t.hasOwnProperty(n)&&!i.hasOwnProperty(n)&&(i[n]=t[n]);return i}var pragma={conditionalRegExp:/(exclude|include)Start\s*\(\s*["'](\w+)["']\s*,(.*)\)/,useStrictRegExp:/(^|[^{]\r?\n)['"]use strict['"];/g,hasRegExp:/has\s*\(\s*['"]([^'"]+)['"]\s*\)/g,configRegExp:/(^|[^\.])(requirejs|require)(\.config)\s*\(/g,nsWrapRegExp:/\/\*requirejs namespace: true \*\//,apiDefRegExp:/var requirejs,\s*require,\s*define;/,defineCheckRegExp:/typeof(\s+|\s*\(\s*)define(\s*\))?\s*===?\s*["']function["']\s*&&\s*define\s*\.\s*amd/g,defineStringCheckRegExp:/typeof\s+define\s*===?\s*["']function["']\s*&&\s*define\s*\[\s*["']amd["']\s*\]/g,defineTypeFirstCheckRegExp:/\s*["']function["']\s*==(=?)\s*typeof\s+define\s*&&\s*define\s*\.\s*amd/g,defineJQueryRegExp:/typeof\s+define\s*===?\s*["']function["']\s*&&\s*define\s*\.\s*amd\s*&&\s*define\s*\.\s*amd\s*\.\s*jQuery/g,defineHasRegExp:/typeof\s+define\s*==(=)?\s*['"]function['"]\s*&&\s*typeof\s+define\.amd\s*==(=)?\s*['"]object['"]\s*&&\s*define\.amd/g,defineTernaryRegExp:/typeof\s+define\s*===?\s*['"]function["']\s*&&\s*define\s*\.\s*amd\s*\?\s*define/,defineExistsRegExp:/\s+typeof\s+define\s*!==?\s*['"]undefined["']\s*/,defineExistsAndAmdRegExp:/typeof\s+define\s*!==?\s*['"]undefined["']\s*&&\s*define\s*\.\s*amd\s*/,amdefineRegExp:/if\s*\(\s*typeof define\s*\!==\s*['"]function['"]\s*\)\s*\{\s*[^\{\}]+amdefine[^\{\}]+\}/g,removeStrict:function(e,t){return t.useStrict?e:e.replace(pragma.useStrictRegExp,"$1")},namespace:function(e,t,n){return e=t&&(e=e.replace(pragma.configRegExp,"$1"+t+".$2$3("),e=(e=(e=(e=(e=(e=(e=(e=(e=parse.renameNamespace(e,t)).replace(pragma.defineTernaryRegExp,"typeof "+t+".define === 'function' && "+t+".define.amd ? "+t+".define")).replace(pragma.defineJQueryRegExp,"typeof "+t+".define === 'function' && "+t+".define.amd && "+t+".define.amd.jQuery")).replace(pragma.defineHasRegExp,"typeof "+t+".define === 'function' && typeof "+t+".define.amd === 'object' && "+t+".define.amd")).replace(pragma.defineExistsAndAmdRegExp,"typeof "+t+".define !== 'undefined' && "+t+".define.amd")).replace(pragma.defineCheckRegExp,"typeof "+t+".define === 'function' && "+t+".define.amd")).replace(pragma.defineStringCheckRegExp,"typeof "+t+".define === 'function' && "+t+".define['amd']")).replace(pragma.defineTypeFirstCheckRegExp,"'function' === typeof "+t+".define && "+t+".define.amd")).replace(pragma.defineExistsRegExp,"typeof "+t+".define !== 'undefined'"),pragma.apiDefRegExp.test(e)&&-1===e.indexOf("if (!"+t+" || !"+t+".requirejs)")&&(e="var "+t+";(function () { if (!"+t+" || !"+t+".requirejs) {\nif (!"+t+") { "+t+" = {}; } else { require = "+t+"; }\n"+e+"\n"+t+".requirejs = requirejs;"+t+".require = require;"+t+".define = define;\n}\n}());"),pragma.nsWrapRegExp.test(e))?"(function () {\nvar require = "+t+".require,requirejs = "+t+".requirejs,define = "+t+".define;\n"+(e=e.replace(pragma.nsWrapRegExp,""))+"\n}());":e},process:function(fileName,fileContents,config,onLifecycleName,pluginCollector){var foundIndex=-1,startIndex=0,lineEndIndex,conditionLine,matches,type,marker,condition,isTrue,endRegExp,endMatches,endMarkerIndex,shouldInclude,startLength,lifecycleHas,deps,i,dep,moduleName,collectorMod,lifecyclePragmas,pragmas=config.pragmas,hasConfig=config.has,kwArgs=pragmas;if(onLifecycleName&&(lifecyclePragmas=config["pragmas"+onLifecycleName],lifecycleHas=config["has"+onLifecycleName],lifecyclePragmas&&(pragmas=create(pragmas||{},lifecyclePragmas)),lifecycleHas)&&(hasConfig=create(hasConfig||{},lifecycleHas)),hasConfig&&(fileContents=fileContents.replace(pragma.hasRegExp,function(e,t){return hasConfig.hasOwnProperty(t)?!!hasConfig[t]:e})),!config.skipPragmas)for(;-1!==(foundIndex=fileContents.indexOf("//>>",startIndex));)if(lineEndIndex=fileContents.indexOf("\n",foundIndex),-1===lineEndIndex&&(lineEndIndex=fileContents.length-1),startIndex=lineEndIndex+1,conditionLine=fileContents.substring(foundIndex,lineEndIndex+1),matches=conditionLine.match(pragma.conditionalRegExp),matches){type=matches[1],marker=matches[2],condition=matches[3],isTrue=!1;try{isTrue=!!eval("("+condition+")")}catch(e){throw"Error in file: "+fileName+". Conditional comment: "+conditionLine+" failed with this error: "+e}if(endRegExp=new RegExp("\\/\\/\\>\\>\\s*"+type+"End\\(\\s*['\"]"+marker+"['\"]\\s*\\)","g"),endMatches=endRegExp.exec(fileContents.substring(startIndex,fileContents.length)),!endMatches)throw"Error in file: "+fileName+". Cannot find end marker for conditional comment: "+conditionLine;endMarkerIndex=startIndex+endRegExp.lastIndex-endMatches[0].length,lineEndIndex=fileContents.indexOf("\n",endMarkerIndex),-1===lineEndIndex&&(lineEndIndex=fileContents.length-1),shouldInclude="exclude"===type&&!isTrue||"include"===type&&isTrue,startLength=startIndex-foundIndex,fileContents=fileContents.substring(0,foundIndex)+(shouldInclude?fileContents.substring(startIndex,endMarkerIndex):"")+fileContents.substring(lineEndIndex+1,fileContents.length),startIndex=foundIndex}if(config.optimizeAllPluginResources&&pluginCollector)try{if(deps=parse.findDependencies(fileName,fileContents),deps.length)for(i=0;i<deps.length;i++)dep=deps[i],-1!==dep.indexOf("!")&&(moduleName=dep.split("!")[0],collectorMod=pluginCollector[moduleName],collectorMod=collectorMod||(pluginCollector[moduleName]=[]),collectorMod.push(dep))}catch(eDep){logger.error("Parse error looking for plugin resources in "+fileName+", skipping.")}return config.keepAmdefine||(fileContents=fileContents.replace(pragma.amdefineRegExp,"")),"OnSave"===onLifecycleName&&config.namespace&&(fileContents=pragma.namespace(fileContents,config.namespace,onLifecycleName)),pragma.removeStrict(fileContents,config)}};return pragma}),define("skylark-uglifyjs/utils",[],function(){"use strict";function e(e){Object.defineProperty(e.prototype,"stack",{get:function(){var e=new Error(this.message);e.name=this.name;try{throw e}catch(e){return e.stack}}})}function r(e,t){this.message=e,this.defs=t}((r.prototype=Object.create(Error.prototype)).constructor=r).prototype.name="DefaultsError",e(r);n.is_op=function(e){return e===s||e instanceof o},n.splice=function(e){return new o(e)},s=n.skip={};var s,t=n;function n(e,t){for(var n=[],i=0;i<e.length;i++){var r=t(e[i],i);r!==s&&(r instanceof o?n.push.apply(n,r.v):n.push(r))}return n}function o(e){this.v=e}function i(){this.values=Object.create(null)}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}return i.prototype={set:function(e,t){return"__proto__"==e?this.proto_value=t:this.values[e]=t,this},add:function(e,t){var n=this.get(e);return n?n.push(t):this.set(e,[t]),this},get:function(e){return"__proto__"==e?this.proto_value:this.values[e]},del:function(e){return"__proto__"==e?delete this.proto_value:delete this.values[e],this},has:function(e){return"__proto__"==e?"proto_value"in this:e in this.values},all:function(e){for(var t in this.values)if(!e(this.values[t],t))return!1;return!("proto_value"in this&&!e(this.proto_value,"__proto__"))},each:function(e){for(var t in this.values)e(this.values[t],t);"proto_value"in this&&e(this.proto_value,"__proto__")},size:function(){return Object.keys(this.values).length+("proto_value"in this)},map:function(e){var t,n=[];for(t in this.values)n.push(e(this.values[t],t));return"proto_value"in this&&n.push(e(this.proto_value,"__proto__")),n},clone:function(){var n=new i;return this.each(function(e,t){n.set(t,e)}),n},toObject:function(){var n={};return this.each(function(e,t){n["$"+t]=e}),n}},i.fromObject=function(e){var t,n=new i;for(t in e)a(e,t)&&n.set(t.slice(1),e[t]);return n},{characters:function(e){return e.split("")},member:function(e,t){return 0<=t.indexOf(e)},find_if:function(e,t){for(var n=t.length;0<=--n;)if(e(t[n]))return t[n]},configure_error_stack:e,defaults:function(e,t,n){if(n)for(var i in e)if(a(e,i)&&!a(t,i))throw new r("`"+i+"` is not a supported option",t);for(var i in e)a(e,i)&&(t[i]=e[i]);return t},DefaultsError:r,noop:function(){},return_false:function(){return!1},return_true:function(){return!0},return_this:function(){return this},return_null:function(){return null},List:t,push_uniq:function(e,t){if(e.indexOf(t)<0)return e.push(t)},string_template:function(e,n){return e.replace(/\{([^{}]+)\}/g,function(e,t){t="this"==t?n:n[t];return t instanceof AST_Node?t.print_to_string():t instanceof AST_Token?t.file+":"+t.line+","+t.col:t})},remove:function(e,t){0<=(t=e.indexOf(t))&&e.splice(t,1)},makePredicate:function(e){Array.isArray(e)||(e=e.split(" "));var t=Object.create(null);return e.forEach(function(e){t[e]=!0}),t},all:function(e,t){for(var n=e.length;0<=--n;)if(!t(e[n],n))return!1;return!0},Dictionary:i,HOP:a,DEF_BITPROPS:function(i,e){if(31<e.length)throw new Error("Too many properties: "+e.length+"\n"+e.join(", "));e.forEach(function(e,t){var n=1<<t;Object.defineProperty(i.prototype,e,{get:function(){return!!(this._bits&n)},set:function(e){e?this._bits|=n:this._bits&=~n}})})}}}),define("skylark-uglifyjs/ast",["./utils"],function(j){"use strict";const{all:M,HOP:F,List:q,noop:B,DEF_BITPROPS:V,return_true:z,return_this:U}=j;var $;function e(e,t,n,i){void 0===i&&(i=u);var r,s=t=t?t.split(/\s+/):[],o=(i&&i.PROPS&&(t=t.concat(i.PROPS)),["return function AST_",e,"(props){","this._bits=0;","if(props){"]),a=(t.forEach(function(e){o.push("this.",e,"=props.",e,";")}),o.push("}"),Object.create(i&&i.prototype)),c=((n.initialize||a.initialize)&&o.push("this.initialize();"),o.push("};"),new Function(o.join(""))());for(r in c.prototype=a,(c.prototype.CTOR=c).prototype.TYPE=c.TYPE=e,i&&(c.BASE=i).SUBCLASSES.push(c),c.DEFMETHOD=function(e,t){this.prototype[e]=t},c.PROPS=t,c.SELF_PROPS=s,c.SUBCLASSES=[],n)F(n,r)&&(/^\$/.test(r)?c[r.substr(1)]=n[r]:c.DEFMETHOD(r,n[r]));return"undefined"!=typeof exports&&(exports["AST_"+e]=c),c}var j=e("Token","type value line col pos endline endcol endpos nlb comments_before comments_after file raw",{},null),u=e("Node","start end",{_clone:function(e){var t;return e?(t=this.clone()).transform(new Jt(function(e){if(e!==t)return e.clone(!0)})):new this.CTOR(this)},clone:function(e){return this._clone(e)},$documentation:"Base class of all AST nodes",$propdoc:{start:"[AST_Token] The first token of this node",end:"[AST_Token] The last token of this node"},equals:function(e){return this.TYPE==e.TYPE&&this._equals(e)},walk:function(e){e.visit(this)},_validate:function(){if("Node"==this.TYPE)throw new Error("should not instantiate AST_Node")},validate:function(){for(var e=this.CTOR;e.prototype._validate.call(this),e=e.BASE;);},validate_ast:function(){var t={};this.walk(new L(function(e){if(e.validate_visited===t)throw new Error(string_template("cannot reuse AST_{TYPE} from [{start}]",e));e.validate_visited=t}))}},null),H=(V(u,["_optimized","_squeezed","call_only","collapse_scanning","defined","evaluating","falsy","in_arg","in_bool","is_undefined","inlined","length_read","nested","new","optional","private","pure","redundant","single_use","static","terminal","truthy","uses_eval","uses_with"]),(u.log_function=function(t,e){var n;function i(e){n[e]||(n[e]=!0,t(e))}"function"!=typeof t?u.info=u.warn=B:(n=Object.create(null),u.info=e?function(e,t){i("INFO: "+string_template(e,t))}:B,u.warn=function(e,t){i("WARN: "+string_template(e,t))})})(),[]);function i(e,n){return e.length==n.length&&M(e,function(e,t){return e.equals(n[t])})}function r(e,t){return e===t||(null==e?null==t:e instanceof u&&t instanceof u&&e.equals(t))}u.enable_validation=function(){u.disable_validation(),function e(t){var n;t.SUBCLASSES.forEach(e),F(t.prototype,"transform")&&(n=t.prototype.transform,t.prototype.transform=function(e,t){e=n.call(this,e,t);if(e instanceof u)e.validate();else if(!(null===e||t&&q.is_op(e)))throw new Error("invalid transformed value: "+e);return e},H.push(function(){t.prototype.transform=n}))}(this)},u.disable_validation=function(){for(var e;e=H.pop();)e()};var t=e("Statement",null,{$documentation:"Base class of all statements",_validate:function(){if("Statement"==this.TYPE)throw new Error("should not instantiate AST_Statement")}}),W=e("Debugger",null,{$documentation:"Represents a debugger statement",_equals:z},t),s=e("Directive","quote value",{$documentation:'Represents a directive, like "use strict";',$propdoc:{quote:"[string?] the original quote character",value:"[string] The value of this directive as a plain string (it's not an AST_String!)"},_equals:function(e){return this.value==e.value},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},t),G=e("EmptyStatement",null,{$documentation:"The empty statement (empty block or simply a semicolon)",_equals:z},t);function o(e){return e instanceof t&&!(e instanceof be)&&!(e instanceof g)}function Y(e,t,n,i,r){if(n=n?"contain":"be",!(e instanceof u))throw new Error(t+" must "+n+" AST_Node");if(e instanceof Ye)throw new Error(t+" cannot "+n+" AST_DefaultValue");if(e instanceof E)throw new Error(t+" cannot "+n+" AST_Destructured");if(e instanceof $t&&!r)throw new Error(t+" cannot "+n+" AST_Hole");if(e instanceof tt&&!i)throw new Error(t+" cannot "+n+" AST_Spread");if(o(e))throw new Error(t+" cannot "+n+" AST_Statement");if(e instanceof O)throw new Error(t+" cannot "+n+" AST_SymbolDeclaration")}function n(e,t){Y(e[t],t)}var J=e("SimpleStatement","body",{$documentation:"A statement consisting of an expression, i.e. a = 1 + 2",$propdoc:{body:"[AST_Node] an expression node (should not be instanceof AST_Statement)"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.body.walk(e)})},_validate:function(){n(this,"body")}},t),a=e("BlockScope","_var_names enclosed functions make_def parent_scope variables",{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{enclosed:"[SymbolDef*/S] a list of all symbol definitions that are accessed from this scope or any inner scopes",functions:"[Dictionary/S] like `variables`, but only lists function declarations",parent_scope:"[AST_Scope?/S] link to the parent scope",variables:"[Dictionary/S] a map of name ---\x3e SymbolDef for all variables/functions defined in this scope"},clone:function(e){e=this._clone(e);return this.enclosed&&(e.enclosed=this.enclosed.slice()),this.functions&&(e.functions=this.functions.clone()),this.variables&&(e.variables=this.variables.clone()),e},pinned:function(){return this.resolve().pinned()},resolve:function(){return this.parent_scope.resolve()},_validate:function(){if("BlockScope"==this.TYPE)throw new Error("should not instantiate AST_BlockScope");if(null!=this.parent_scope){if(!(this.parent_scope instanceof a))throw new Error("parent_scope must be AST_BlockScope");if(!(this.resolve()instanceof h))throw new Error("must be contained within AST_Scope")}}},t);function c(e,t){e.body.forEach(function(e){e.walk(t)})}var f=e("Block","body",{$documentation:"A body of statements (usually braced)",$propdoc:{body:"[AST_Statement*] an array of statements"},_equals:function(e){return i(this.body,e.body)},walk:function(e){var t=this;e.visit(t,function(){c(t,e)})},_validate:function(){if("Block"==this.TYPE)throw new Error("should not instantiate AST_Block");this.body.forEach(function(e){if(!o(e))throw new Error("body must contain AST_Statement")})}},a),X=e("BlockStatement",null,{$documentation:"A block statement"},f),l=e("StatementWithBody","body",{$documentation:"Base class for all statements that contain one nested body: `For`, `ForIn`, `Do`, `While`, `With`",$propdoc:{body:"[AST_Statement] the body; this should always be present, even if it's an AST_EmptyStatement"},_validate:function(){if("StatementWithBody"==this.TYPE)throw new Error("should not instantiate AST_StatementWithBody");if(!o(this.body))throw new Error("body must be AST_Statement")}},a),K=e("LabeledStatement","label",{$documentation:"Statement with a label",$propdoc:{label:"[AST_Label] a label definition"},_equals:function(e){return this.label.equals(e.label)&&this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.label.walk(e),t.body.walk(e)})},clone:function(e){var t,n,i=this._clone(e);return e&&(t=i.label,n=this.label,i.walk(new L(function(e){return e instanceof x?e.label&&e.label.thedef===n?((e.label.thedef=t).references.push(e),!0):void 0:e instanceof h||void 0}))),i},_validate:function(){if(!(this.label instanceof Pt))throw new Error("label must be AST_Label")}},l),p=e("IterationStatement",null,{$documentation:"Internal class.  All loops inherit from it.",_validate:function(){if("IterationStatement"==this.TYPE)throw new Error("should not instantiate AST_IterationStatement")}},l),Q=e("DWLoop","condition",{$documentation:"Base class for do/while statements",$propdoc:{condition:"[AST_Node] the loop condition.  Should not be instanceof AST_Statement"},_equals:function(e){return this.body.equals(e.body)&&this.condition.equals(e.condition)},_validate:function(){if("DWLoop"==this.TYPE)throw new Error("should not instantiate AST_DWLoop");n(this,"condition")}},p),Z=e("Do",null,{$documentation:"A `do` statement",walk:function(e){var t=this;e.visit(t,function(){t.body.walk(e),t.condition.walk(e)})}},Q),ee=e("While",null,{$documentation:"A `while` statement",walk:function(e){var t=this;e.visit(t,function(){t.condition.walk(e),t.body.walk(e)})}},Q),te=e("For","init condition step",{$documentation:"A `for` statement",$propdoc:{init:"[AST_Node?] the `for` initialization code, or null if empty",condition:"[AST_Node?] the `for` termination clause, or null if empty",step:"[AST_Node?] the `for` update clause, or null if empty"},_equals:function(e){return r(this.init,e.init)&&r(this.condition,e.condition)&&r(this.step,e.step)&&this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.init&&t.init.walk(e),t.condition&&t.condition.walk(e),t.step&&t.step.walk(e),t.body.walk(e)})},_validate:function(){if(null!=this.init){if(!(this.init instanceof u))throw new Error("init must be AST_Node");if(o(this.init)&&!(this.init instanceof w))throw new Error("init cannot be AST_Statement")}null!=this.condition&&n(this,"condition"),null!=this.step&&n(this,"step")}},p),ne=e("ForEnumeration","init object",{$documentation:"Base class for enumeration loops, i.e. `for ... in`, `for ... of` & `for await ... of`",$propdoc:{init:"[AST_Node] the assignment target during iteration",object:"[AST_Node] the object to iterate over"},_equals:function(e){return this.init.equals(e.init)&&this.object.equals(e.object)&&this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.init.walk(e),t.object.walk(e),t.body.walk(e)})},_validate:function(){if("ForEnumeration"==this.TYPE)throw new Error("should not instantiate AST_ForEnumeration");if(this.init instanceof w){if(1!=this.init.definitions.length)throw new Error("init must have single declaration")}else A(this.init,function(e){if(!(e instanceof k||e instanceof Ot))throw new Error("init must be assignable: "+e.TYPE)});n(this,"object")}},p),ie=e("ForIn",null,{$documentation:"A `for ... in` statement"},ne),re=e("ForOf",null,{$documentation:"A `for ... of` statement"},ne),se=e("ForAwaitOf",null,{$documentation:"A `for await ... of` statement"},re),oe=e("With","expression",{$documentation:"A `with` statement",$propdoc:{expression:"[AST_Node] the `with` expression"},_equals:function(e){return this.expression.equals(e.expression)&&this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e),t.body.walk(e)})},_validate:function(){n(this,"expression")}},l),h=e("Scope","fn_defs may_call_this uses_eval uses_with",{$documentation:"Base class for all statements introducing a lambda scope",$propdoc:{uses_eval:"[boolean/S] tells whether this scope contains a direct call to the global `eval`",uses_with:"[boolean/S] tells whether this scope uses the `with` statement"},pinned:function(){return this.uses_eval||this.uses_with},resolve:U,_validate:function(){if("Scope"==this.TYPE)throw new Error("should not instantiate AST_Scope")}},f),ae=e("Toplevel","globals",{$documentation:"The toplevel scope",$propdoc:{globals:"[Dictionary/S] a map of name ---\x3e SymbolDef for all undeclared names"},wrap:function(e){var t=this.body;return $.parse(["(function(exports){'$ORIG';})(typeof ",e,"=='undefined'?(",e,"={}):",e,");"].join(""),{filename:"wrap="+JSON.stringify(e)}).transform(new Jt(function(e){if(e instanceof s&&"$ORIG"==e.value)return q.splice(t)}))},enclose:function(e){var t=(e="string"!=typeof e?"":e).indexOf(":"),n=(t<0&&(t=e.length),this.body);return $.parse(["(function(",e.slice(0,t),'){"$ORIG"})(',e.slice(t+1),")"].join(""),{filename:"enclose="+JSON.stringify(e)}).transform(new Jt(function(e){if(e instanceof s&&"$ORIG"==e.value)return q.splice(n)}))}},h),ce=e("ClassInitBlock",null,{$documentation:"Value for `class` static initialization blocks"},h),d=e("Lambda","argnames length_read rest safe_ids uses_arguments",{$documentation:"Base class for functions",$propdoc:{argnames:"[(AST_DefaultValue|AST_Destructured|AST_SymbolFunarg)*] array of function arguments and/or destructured literals",length_read:"[boolean/S] whether length property of this function is accessed",rest:"[(AST_Destructured|AST_SymbolFunarg)?] rest parameter, or null if absent",uses_arguments:"[boolean|number/S] whether this function accesses the arguments array"},each_argname:function(t){var n=new L(function(e){return e instanceof Ye?(e.name.walk(n),!0):e instanceof pt?(e.value.walk(n),!0):void(e instanceof St&&t(e))});this.argnames.forEach(function(e){e.walk(n)}),this.rest&&this.rest.walk(n)},_equals:function(e){return r(this.rest,e.rest)&&r(this.name,e.name)&&r(this.value,e.value)&&i(this.argnames,e.argnames)&&i(this.body,e.body)},walk:function(t){var e=this;t.visit(e,function(){e.name&&e.name.walk(t),e.argnames.forEach(function(e){e.walk(t)}),e.rest&&e.rest.walk(t),c(e,t)})},_validate:function(){if("Lambda"==this.TYPE)throw new Error("should not instantiate AST_Lambda");this.argnames.forEach(function(e){A(e,function(e){if(!(e instanceof St))throw new Error("argnames must be AST_SymbolFunarg[]")},!0)}),null!=this.rest&&A(this.rest,function(e){if(!(e instanceof St))throw new Error("rest must be AST_SymbolFunarg")})}},h),m=e("Accessor",null,{$documentation:"A getter/setter function",_validate:function(){if(null!=this.name)throw new Error("name must be null")}},d),g=e("LambdaExpression","inlined",{$documentation:"Base class for function expressions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined"},_validate:function(){if("LambdaExpression"==this.TYPE)throw new Error("should not instantiate AST_LambdaExpression")}},d);function _(e){return e instanceof ue||e instanceof fe}var ue=e("Arrow","value",{$documentation:"An arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(t){var e=this;t.visit(e,function(){e.argnames.forEach(function(e){e.walk(t)}),e.rest&&e.rest.walk(t),e.value?e.value.walk(t):c(e,t)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(n(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},g),fe=e("AsyncArrow","value",{$documentation:"An asynchronous arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(t){var e=this;t.visit(e,function(){e.argnames.forEach(function(e){e.walk(t)}),e.rest&&e.rest.walk(t),e.value?e.value.walk(t):c(e,t)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(n(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},g),le=e("AsyncFunction","name",{$documentation:"An asynchronous function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof Et))throw new Error("name must be AST_SymbolLambda")}},g),pe=e("AsyncGeneratorFunction","name",{$documentation:"An asynchronous generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof Et))throw new Error("name must be AST_SymbolLambda")}},g),he=e("Function","name",{$documentation:"A function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof Et))throw new Error("name must be AST_SymbolLambda")}},g),de=e("GeneratorFunction","name",{$documentation:"A generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof Et))throw new Error("name must be AST_SymbolLambda")}},g),v=e("LambdaDefinition","inlined name",{$documentation:"Base class for function definitions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined",name:"[AST_SymbolDefun] the name of this function"},_validate:function(){if("LambdaDefinition"==this.TYPE)throw new Error("should not instantiate AST_LambdaDefinition");if(!(this.name instanceof kt))throw new Error("name must be AST_SymbolDefun")}},d),me=e("AsyncDefun",null,{$documentation:"An asynchronous function definition"},v),ge=e("AsyncGeneratorDefun",null,{$documentation:"An asynchronous generator function definition"},v),_e=e("Defun",null,{$documentation:"A function definition"},v),ve=e("GeneratorDefun",null,{$documentation:"A generator function definition"},v),y=e("Class","extends name properties",{$documentation:"Base class for class literals",$propdoc:{extends:"[AST_Node?] the super class, or null if not specified",properties:"[AST_ClassProperty*] array of class properties"},_equals:function(e){return r(this.name,e.name)&&r(this.extends,e.extends)&&i(this.properties,e.properties)},resolve:function(e){return e?this:this.parent_scope.resolve()},walk:function(t){var e=this;t.visit(e,function(){e.name&&e.name.walk(t),e.extends&&e.extends.walk(t),e.properties.forEach(function(e){e.walk(t)})})},_validate:function(){if("Class"==this.TYPE)throw new Error("should not instantiate AST_Class");null!=this.extends&&n(this,"extends"),this.properties.forEach(function(e){if(!(e instanceof b))throw new Error("properties must contain AST_ClassProperty")})}},a),ye=e("DefClass",null,{$documentation:"A class definition",$propdoc:{name:"[AST_SymbolDefClass] the name of this class"},_validate:function(){if(!(this.name instanceof At))throw new Error("name must be AST_SymbolDefClass")}},y),be=e("ClassExpression",null,{$documentation:"A class expression",$propdoc:{name:"[AST_SymbolClass?] the name of this class, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof Tt))throw new Error("name must be AST_SymbolClass")}},y),b=e("ClassProperty","key private static value",{$documentation:"Base class for `class` properties",$propdoc:{key:"[string|AST_Node?] property name (AST_Node for computed property, null for initialization block)",private:"[boolean] whether this is a private property",static:"[boolean] whether this is a static property",value:"[AST_Node?] property value (AST_Accessor for getters/setters, AST_LambdaExpression for methods, null if not specified for fields)"},_equals:function(e){return!this.private==!e.private&&!this.static==!e.static&&r(this.key,e.key)&&r(this.value,e.value)},walk:function(e){var t=this;e.visit(t,function(){t.key instanceof u&&t.key.walk(e),t.value&&t.value.walk(e)})},_validate:function(){if("ClassProperty"==this.TYPE)throw new Error("should not instantiate AST_ClassProperty");if(this instanceof Ee){if(null!=this.key)throw new Error("key must be null")}else if("string"!=typeof this.key){if(!(this.key instanceof u))throw new Error("key must be string or AST_Node");n(this,"key")}if(null!=this.value&&!(this.value instanceof u))throw new Error("value must be AST_Node")}}),xe=e("ClassField",null,{$documentation:"A `class` field",_validate:function(){null!=this.value&&n(this,"value")}},b),we=e("ClassGetter",null,{$documentation:"A `class` getter",_validate:function(){if(!(this.value instanceof m))throw new Error("value must be AST_Accessor")}},b),Se=e("ClassSetter",null,{$documentation:"A `class` setter",_validate:function(){if(!(this.value instanceof m))throw new Error("value must be AST_Accessor")}},b),ke=e("ClassMethod",null,{$documentation:"A `class` method",_validate:function(){if(!(this.value instanceof g))throw new Error("value must be AST_LambdaExpression");if(_(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of class method's lambda must be null")}},b),Ee=e("ClassInit",null,{$documentation:"A `class` static initialization block",_validate:function(){if(!this.static)throw new Error("static must be true");if(!(this.value instanceof ce))throw new Error("value must be AST_ClassInitBlock")},initialize:function(){this.static=!0}},b),Ae=e("Jump",null,{$documentation:"Base class for “jumps” (for now that's `return`, `throw`, `break` and `continue`)",_validate:function(){if("Jump"==this.TYPE)throw new Error("should not instantiate AST_Jump")}},t),Te=e("Exit","value",{$documentation:"Base class for “exits” (`return` and `throw`)",$propdoc:{value:"[AST_Node?] the value returned or thrown by this statement; could be null for AST_Return"},_equals:function(e){return r(this.value,e.value)},walk:function(e){var t=this;e.visit(t,function(){t.value&&t.value.walk(e)})},_validate:function(){if("Exit"==this.TYPE)throw new Error("should not instantiate AST_Exit")}},Ae),Ce=e("Return",null,{$documentation:"A `return` statement",_validate:function(){null!=this.value&&n(this,"value")}},Te),Pe=e("Throw",null,{$documentation:"A `throw` statement",_validate:function(){n(this,"value")}},Te),x=e("LoopControl","label",{$documentation:"Base class for loop control statements (`break` and `continue`)",$propdoc:{label:"[AST_LabelRef?] the label, or null if none"},_equals:function(e){return r(this.label,e.label)},walk:function(e){var t=this;e.visit(t,function(){t.label&&t.label.walk(e)})},_validate:function(){if("LoopControl"==this.TYPE)throw new Error("should not instantiate AST_LoopControl");if(null!=this.label&&!(this.label instanceof It))throw new Error("label must be AST_LabelRef")}},Ae),Oe=e("Break",null,{$documentation:"A `break` statement"},x),De=e("Continue",null,{$documentation:"A `continue` statement"},x),Ie=e("If","condition alternative",{$documentation:"A `if` statement",$propdoc:{condition:"[AST_Node] the `if` condition",alternative:"[AST_Statement?] the `else` part, or null if not present"},_equals:function(e){return this.body.equals(e.body)&&this.condition.equals(e.condition)&&r(this.alternative,e.alternative)},walk:function(e){var t=this;e.visit(t,function(){t.condition.walk(e),t.body.walk(e),t.alternative&&t.alternative.walk(e)})},_validate:function(){if(n(this,"condition"),null!=this.alternative&&!o(this.alternative))throw new Error("alternative must be AST_Statement")}},l),Ne=e("Switch","expression",{$documentation:"A `switch` statement",$propdoc:{expression:"[AST_Node] the `switch` “discriminant”"},_equals:function(e){return this.expression.equals(e.expression)&&i(this.body,e.body)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e),c(t,e)})},_validate:function(){n(this,"expression"),this.body.forEach(function(e){if(!(e instanceof Le))throw new Error("body must be AST_SwitchBranch[]")})}},f),Le=e("SwitchBranch",null,{$documentation:"Base class for `switch` branches",_validate:function(){if("SwitchBranch"==this.TYPE)throw new Error("should not instantiate AST_SwitchBranch")}},f),Re=e("Default",null,{$documentation:"A `default` switch branch"},Le),je=e("Case","expression",{$documentation:"A `case` switch branch",$propdoc:{expression:"[AST_Node] the `case` expression"},_equals:function(e){return this.expression.equals(e.expression)&&i(this.body,e.body)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e),c(t,e)})},_validate:function(){n(this,"expression")}},Le),Me=e("Try","bcatch bfinally",{$documentation:"A `try` statement",$propdoc:{bcatch:"[AST_Catch?] the catch block, or null if not present",bfinally:"[AST_Finally?] the finally block, or null if not present"},_equals:function(e){return i(this.body,e.body)&&r(this.bcatch,e.bcatch)&&r(this.bfinally,e.bfinally)},walk:function(e){var t=this;e.visit(t,function(){c(t,e),t.bcatch&&t.bcatch.walk(e),t.bfinally&&t.bfinally.walk(e)})},_validate:function(){if(null!=this.bcatch&&!(this.bcatch instanceof Fe))throw new Error("bcatch must be AST_Catch");if(null!=this.bfinally&&!(this.bfinally instanceof qe))throw new Error("bfinally must be AST_Finally")}},f),Fe=e("Catch","argname",{$documentation:"A `catch` node; only makes sense as part of a `try` statement",$propdoc:{argname:"[(AST_Destructured|AST_SymbolCatch)?] symbol for the exception, or null if not present"},_equals:function(e){return r(this.argname,e.argname)&&i(this.body,e.body)},walk:function(e){var t=this;e.visit(t,function(){t.argname&&t.argname.walk(e),c(t,e)})},_validate:function(){null!=this.argname&&A(this.argname,function(e){if(!(e instanceof Ct))throw new Error("argname must be AST_SymbolCatch")})}},f),qe=e("Finally",null,{$documentation:"A `finally` node; only makes sense as part of a `try` statement"},f),w=e("Definitions","definitions",{$documentation:"Base class for `var` nodes (variable declarations/initializations)",$propdoc:{definitions:"[AST_VarDef*] array of variable definitions"},_equals:function(e){return i(this.definitions,e.definitions)},walk:function(t){var e=this;t.visit(e,function(){e.definitions.forEach(function(e){e.walk(t)})})},_validate:function(){if("Definitions"==this.TYPE)throw new Error("should not instantiate AST_Definitions");if(this.definitions.length<1)throw new Error("must have at least one definition")}},t),Be=e("Const",null,{$documentation:"A `const` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof S))throw new Error("definitions must be AST_VarDef[]");A(e.name,function(e){if(!(e instanceof yt))throw new Error("name must be AST_SymbolConst")})})}},w),Ve=e("Let",null,{$documentation:"A `let` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof S))throw new Error("definitions must be AST_VarDef[]");A(e.name,function(e){if(!(e instanceof xt))throw new Error("name must be AST_SymbolLet")})})}},w),ze=e("Var",null,{$documentation:"A `var` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof S))throw new Error("definitions must be AST_VarDef[]");A(e.name,function(e){if(!(e instanceof wt))throw new Error("name must be AST_SymbolVar")})})}},w),S=e("VarDef","name value",{$documentation:"A variable declaration; only appears in a AST_Definitions node",$propdoc:{name:"[AST_Destructured|AST_SymbolVar] name of the variable",value:"[AST_Node?] initializer, or null of there's no initializer"},_equals:function(e){return this.name.equals(e.name)&&r(this.value,e.value)},walk:function(e){var t=this;e.visit(t,function(){t.name.walk(e),t.value&&t.value.walk(e)})},_validate:function(){null!=this.value&&n(this,"value")}}),Ue=e("ExportDeclaration","body",{$documentation:"An `export` statement",$propdoc:{body:"[AST_DefClass|AST_Definitions|AST_LambdaDefinition] the statement to export"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.body.walk(e)})},_validate:function(){if(!(this.body instanceof ye||this.body instanceof w||this.body instanceof v))throw new Error("body must be AST_DefClass, AST_Definitions or AST_LambdaDefinition")}},t),$e=e("ExportDefault","body",{$documentation:"An `export default` statement",$propdoc:{body:"[AST_Node] the default export"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.body.walk(e)})},_validate:function(){this.body instanceof ye||this.body instanceof v||n(this,"body")}},t),He=e("ExportForeign","aliases keys path",{$documentation:"An `export ... from '...'` statement",$propdoc:{aliases:"[AST_String*] array of aliases to export",keys:"[AST_String*] array of keys to import",path:"[AST_String] the path to import module"},_equals:function(e){return this.path.equals(e.path)&&i(this.aliases,e.aliases)&&i(this.keys,e.keys)},_validate:function(){if(this.aliases.length!=this.keys.length)throw new Error("aliases:key length mismatch: "+this.aliases.length+" != "+this.keys.length);if(this.aliases.forEach(function(e){if(!(e instanceof I))throw new Error("aliases must contain AST_String")}),this.keys.forEach(function(e){if(!(e instanceof I))throw new Error("keys must contain AST_String")}),!(this.path instanceof I))throw new Error("path must be AST_String")}},t),We=e("ExportReferences","properties",{$documentation:"An `export { ... }` statement",$propdoc:{properties:"[AST_SymbolExport*] array of aliases to export"},_equals:function(e){return i(this.properties,e.properties)},walk:function(t){var e=this;t.visit(e,function(){e.properties.forEach(function(e){e.walk(t)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof Dt))throw new Error("properties must contain AST_SymbolExport")})}},t),Ge=e("Import","all default path properties",{$documentation:"An `import` statement",$propdoc:{all:"[AST_SymbolImport?] the imported namespace, or null if not specified",default:"[AST_SymbolImport?] the alias for default `export`, or null if not specified",path:"[AST_String] the path to import module",properties:"[(AST_SymbolImport*)?] array of aliases, or null if not specified"},_equals:function(e){return this.path.equals(e.path)&&r(this.all,e.all)&&r(this.default,e.default)&&!this.properties==!e.properties&&(!this.properties||i(this.properties,e.properties))},walk:function(t){var e=this;t.visit(e,function(){e.all&&e.all.walk(t),e.default&&e.default.walk(t),e.properties&&e.properties.forEach(function(e){e.walk(t)})})},_validate:function(){if(null!=this.all){if(!(this.all instanceof bt))throw new Error("all must be AST_SymbolImport");if(null!=this.properties)throw new Error("cannot import both * and {} in the same statement")}if(null!=this.default){if(!(this.default instanceof bt))throw new Error("default must be AST_SymbolImport");if(""!==this.default.key.value)throw new Error("invalid default key: "+this.default.key.value)}if(!(this.path instanceof I))throw new Error("path must be AST_String");null!=this.properties&&this.properties.forEach(function(e){if(!(e instanceof bt))throw new Error("properties must contain AST_SymbolImport")})}},t),Ye=e("DefaultValue","name value",{$documentation:"A default value declaration",$propdoc:{name:"[AST_Destructured|AST_SymbolDeclaration] name of the variable",value:"[AST_Node] value to assign if variable is `undefined`"},_equals:function(e){return this.name.equals(e.name)&&this.value.equals(e.value)},walk:function(e){var t=this;e.visit(t,function(){t.name.walk(e),t.value.walk(e)})},_validate:function(){n(this,"value")}});function Je(e,t,n,i){e[t].forEach(function(e){Y(e,t,!0,n,i)})}var Xe=e("Call","args expression optional pure terminal",{$documentation:"A function call expression",$propdoc:{args:"[AST_Node*] array of arguments",expression:"[AST_Node] expression to invoke as function",optional:"[boolean] whether the expression is optional chaining",pure:"[boolean/S] marker for side-effect-free call expression",terminal:"[boolean] whether the chain has ended"},_equals:function(e){return!this.optional==!e.optional&&this.expression.equals(e.expression)&&i(this.args,e.args)},walk:function(t){var e=this;t.visit(e,function(){e.expression.walk(t),e.args.forEach(function(e){e.walk(t)})})},_validate:function(){n(this,"expression"),Je(this,"args",!0)}}),Ke=e("New",null,{$documentation:"An object instantiation.  Derives from a function call since it has exactly the same properties",_validate:function(){if(this.optional)throw new Error("optional must be false");if(this.terminal)throw new Error("terminal must be false")}},Xe),Qe=e("Sequence","expressions",{$documentation:"A sequence expression (comma-separated expressions)",$propdoc:{expressions:"[AST_Node*] array of expressions (at least two)"},_equals:function(e){return i(this.expressions,e.expressions)},walk:function(t){var e=this;t.visit(e,function(){e.expressions.forEach(function(e){e.walk(t)})})},_validate:function(){if(this.expressions.length<2)throw new Error("expressions must contain multiple elements");Je(this,"expressions")}});var k=e("PropAccess","expression optional property terminal",{$documentation:'Base class for property access expressions, i.e. `a.foo` or `a["foo"]`',$propdoc:{expression:"[AST_Node] the “container” expression",optional:"[boolean] whether the expression is optional chaining",property:"[AST_Node|string] the property to access.  For AST_Dot this is always a plain string, while for AST_Sub it's an arbitrary AST_Node",terminal:"[boolean] whether the chain has ended"},_equals:function(e){return!this.optional==!e.optional&&r(this.property,e.property)&&this.expression.equals(e.expression)},get_property:function(){var e=this.property;return e instanceof D?e.value:e instanceof it&&"void"==e.operator&&e.expression instanceof D?void 0:e},_validate:function(){if("PropAccess"==this.TYPE)throw new Error("should not instantiate AST_PropAccess");n(this,"expression")}}),Ze=e("Dot","quoted",{$documentation:"A dotted property access expression",$propdoc:{quoted:"[boolean] whether property is transformed from a quoted string"},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e)})},_validate:function(){if("string"!=typeof this.property)throw new Error("property must be string")}},k),et=e("Sub",null,{$documentation:'Index-style property access, i.e. `a["foo"]`',walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e),t.property.walk(e)})},_validate:function(){n(this,"property")}},k),tt=e("Spread","expression",{$documentation:"Spread expression in array/object literals or function calls",$propdoc:{expression:"[AST_Node] expression to be expanded"},_equals:function(e){return this.expression.equals(e.expression)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e)})},_validate:function(){n(this,"expression")}}),nt=e("Unary","operator expression",{$documentation:"Base class for unary expressions",$propdoc:{operator:"[string] the operator",expression:"[AST_Node] expression that this unary operator applies to"},_equals:function(e){return this.operator==e.operator&&this.expression.equals(e.expression)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e)})},_validate:function(){if("Unary"==this.TYPE)throw new Error("should not instantiate AST_Unary");if("string"!=typeof this.operator)throw new Error("operator must be string");n(this,"expression")}}),it=e("UnaryPrefix",null,{$documentation:"Unary prefix expression, i.e. `typeof i` or `++i`"},nt),rt=e("UnaryPostfix",null,{$documentation:"Unary postfix expression, i.e. `i++`"},nt),st=e("Binary","operator left right",{$documentation:"Binary expression, i.e. `a + b`",$propdoc:{left:"[AST_Node] left-hand side expression",operator:"[string] the operator",right:"[AST_Node] right-hand side expression"},_equals:function(e){return this.operator==e.operator&&this.left.equals(e.left)&&this.right.equals(e.right)},walk:function(e){var t=this;e.visit(t,function(){t.left.walk(e),t.right.walk(e)})},_validate:function(){if(this instanceof at||n(this,"left"),"string"!=typeof this.operator)throw new Error("operator must be string");n(this,"right")}}),ot=e("Conditional","condition consequent alternative",{$documentation:"Conditional expression using the ternary operator, i.e. `a ? b : c`",$propdoc:{condition:"[AST_Node]",consequent:"[AST_Node]",alternative:"[AST_Node]"},_equals:function(e){return this.condition.equals(e.condition)&&this.consequent.equals(e.consequent)&&this.alternative.equals(e.alternative)},walk:function(e){var t=this;e.visit(t,function(){t.condition.walk(e),t.consequent.walk(e),t.alternative.walk(e)})},_validate:function(){n(this,"condition"),n(this,"consequent"),n(this,"alternative")}}),at=e("Assign",null,{$documentation:"An assignment expression — `a = b + 5`",_validate:function(){if(this.operator.indexOf("=")<0)throw new Error('operator must contain "="');if(this.left instanceof E){if("="!=this.operator)throw new Error("invalid destructuring operator: "+this.operator);A(this.left,function(e){if(!(e instanceof k||e instanceof Ot))throw new Error("left must be assignable: "+e.TYPE)})}else if(!(this.left instanceof Ht||this.left instanceof zt||this.left instanceof k&&!this.left.optional||this.left instanceof Ot||this.left instanceof Ut))throw new Error("left must be assignable")}},st),ct=e("Await","expression",{$documentation:"An await expression",$propdoc:{expression:"[AST_Node] expression with Promise to resolve on"},_equals:function(e){return this.expression.equals(e.expression)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e)})},_validate:function(){n(this,"expression")}}),ut=e("Yield","expression nested",{$documentation:"A yield expression",$propdoc:{expression:"[AST_Node?] return value for iterator, or null if undefined",nested:"[boolean] whether to iterate over expression as generator"},_equals:function(e){return!this.nested==!e.nested&&r(this.expression,e.expression)},walk:function(e){var t=this;e.visit(t,function(){t.expression&&t.expression.walk(e)})},_validate:function(){if(null!=this.expression)n(this,"expression");else if(this.nested)throw new Error("yield* must contain expression")}}),ft=e("Array","elements",{$documentation:"An array literal",$propdoc:{elements:"[AST_Node*] array of elements"},_equals:function(e){return i(this.elements,e.elements)},walk:function(t){var e=this;t.visit(e,function(){e.elements.forEach(function(e){e.walk(t)})})},_validate:function(){Je(this,"elements",!0,!0)}}),E=e("Destructured","rest",{$documentation:"Base class for destructured literal",$propdoc:{rest:"[(AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)?] rest parameter, or null if absent"},_validate:function(){if("Destructured"==this.TYPE)throw new Error("should not instantiate AST_Destructured")}});function A(e,t,n){if(e instanceof Ye&&n)return A(e.name,t);if(e instanceof E){if(null!=e.rest&&A(e.rest,t),e instanceof lt)return e.elements.forEach(function(e){e instanceof $t||A(e,t,!0)});if(e instanceof ht)return e.properties.forEach(function(e){A(e.value,t,!0)})}t(e)}var T,lt=e("DestructuredArray","elements",{$documentation:"A destructured array literal",$propdoc:{elements:"[(AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)*] array of elements"},_equals:function(e){return r(this.rest,e.rest)&&i(this.elements,e.elements)},walk:function(t){var e=this;t.visit(e,function(){e.elements.forEach(function(e){e.walk(t)}),e.rest&&e.rest.walk(t)})}},E),pt=e("DestructuredKeyVal","key value",{$documentation:"A key: value destructured property",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef] property value"},_equals:function(e){return r(this.key,e.key)&&this.value.equals(e.value)},walk:function(e){var t=this;e.visit(t,function(){t.key instanceof u&&t.key.walk(e),t.value.walk(e)})},_validate:function(){if("string"!=typeof this.key){if(!(this.key instanceof u))throw new Error("key must be string or AST_Node");n(this,"key")}if(!(this.value instanceof u))throw new Error("value must be AST_Node")}}),ht=e("DestructuredObject","properties",{$documentation:"A destructured object literal",$propdoc:{properties:"[AST_DestructuredKeyVal*] array of properties"},_equals:function(e){return r(this.rest,e.rest)&&i(this.properties,e.properties)},walk:function(t){var e=this;t.visit(e,function(){e.properties.forEach(function(e){e.walk(t)}),e.rest&&e.rest.walk(t)})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof pt))throw new Error("properties must be AST_DestructuredKeyVal[]")})}},E),dt=e("Object","properties",{$documentation:"An object literal",$propdoc:{properties:"[(AST_ObjectProperty|AST_Spread)*] array of properties"},_equals:function(e){return i(this.properties,e.properties)},walk:function(t){var e=this;t.visit(e,function(){e.properties.forEach(function(e){e.walk(t)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof C||e instanceof tt))throw new Error("properties must contain AST_ObjectProperty and/or AST_Spread only")})}}),C=e("ObjectProperty","key value",{$documentation:"Base class for literal object properties",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_Node] property value.  For getters and setters this is an AST_Accessor."},_equals:function(e){return r(this.key,e.key)&&this.value.equals(e.value)},walk:function(e){var t=this;e.visit(t,function(){t.key instanceof u&&t.key.walk(e),t.value.walk(e)})},_validate:function(){if("ObjectProperty"==this.TYPE)throw new Error("should not instantiate AST_ObjectProperty");if("string"!=typeof this.key){if(!(this.key instanceof u))throw new Error("key must be string or AST_Node");n(this,"key")}if(!(this.value instanceof u))throw new Error("value must be AST_Node")}}),mt=e("ObjectKeyVal",null,{$documentation:"A key: value object property",_validate:function(){n(this,"value")}},C),gt=e("ObjectMethod",null,{$documentation:"A key(){} object property",_validate:function(){if(!(this.value instanceof g))throw new Error("value must be AST_LambdaExpression");if(_(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of object method's lambda must be null")}},mt),_t=e("ObjectSetter",null,{$documentation:"An object setter property",_validate:function(){if(!(this.value instanceof m))throw new Error("value must be AST_Accessor")}},C),vt=e("ObjectGetter",null,{$documentation:"An object getter property",_validate:function(){if(!(this.value instanceof m))throw new Error("value must be AST_Accessor")}},C),P=e("Symbol","scope name thedef",{$documentation:"Base class for all symbols",$propdoc:{name:"[string] name of this symbol",scope:"[AST_Scope/S] the current scope (not necessarily the definition scope)",thedef:"[SymbolDef/S] the definition of this symbol"},_equals:function(e){return this.thedef?this.thedef===e.thedef:this.name==e.name},_validate:function(){if("Symbol"==this.TYPE)throw new Error("should not instantiate AST_Symbol");if("string"!=typeof this.name)throw new Error("name must be string")}}),O=e("SymbolDeclaration","init",{$documentation:"A declaration symbol (symbol in var, function name or argument, symbol in catch)"},P),yt=e("SymbolConst",null,{$documentation:"Symbol defining a constant"},O),bt=e("SymbolImport","key",{$documentation:"Symbol defined by an `import` statement",$propdoc:{key:"[AST_String] the original `export` name"},_equals:function(e){return this.name==e.name&&this.key.equals(e.key)},_validate:function(){if(!(this.key instanceof I))throw new Error("key must be AST_String")}},yt),xt=e("SymbolLet",null,{$documentation:"Symbol defining a lexical-scoped variable"},O),wt=e("SymbolVar",null,{$documentation:"Symbol defining a variable"},O),St=e("SymbolFunarg","unused",{$documentation:"Symbol naming a function argument"},wt),kt=e("SymbolDefun",null,{$documentation:"Symbol defining a function"},O),Et=e("SymbolLambda",null,{$documentation:"Symbol naming a function expression"},O),At=e("SymbolDefClass",null,{$documentation:"Symbol defining a class"},yt),Tt=e("SymbolClass",null,{$documentation:"Symbol naming a class expression"},yt),Ct=e("SymbolCatch",null,{$documentation:"Symbol naming the exception in catch"},O),Pt=e("Label","references",{$documentation:"Symbol naming a label (declaration)",$propdoc:{references:"[AST_LoopControl*] a list of nodes referring to this label"},initialize:function(){this.references=[],this.thedef=this}},P),Ot=e("SymbolRef","fixed in_arg redef",{$documentation:"Reference to some symbol (not definition/declaration)"},P),Dt=e("SymbolExport","alias",{$documentation:"Reference in an `export` statement",$propdoc:{alias:"[AST_String] the `export` alias"},_equals:function(e){return this.name==e.name&&this.alias.equals(e.alias)},_validate:function(){if(!(this.alias instanceof I))throw new Error("alias must be AST_String")}},Ot),It=e("LabelRef",null,{$documentation:"Reference to a label symbol"},P),Nt=e("ObjectIdentity",null,{$documentation:"Base class for `super` & `this`",_equals:z,_validate:function(){if("ObjectIdentity"==this.TYPE)throw new Error("should not instantiate AST_ObjectIdentity")}},P),Lt=e("Super",null,{$documentation:"The `super` symbol",_validate:function(){if("super"!==this.name)throw new Error('name must be "super"')}},Nt),Rt=e("This",null,{$documentation:"The `this` symbol",_validate:function(){if("This"==this.TYPE&&"this"!==this.name)throw new Error('name must be "this"')}},Nt),jt=e("NewTarget",null,{$documentation:"The `new.target` symbol",initialize:function(){this.name="new.target"},_validate:function(){if("new.target"!==this.name)throw new Error('name must be "new.target": '+this.name)}},Rt),Mt=e("Template","expressions strings tag",{$documentation:"A template literal, i.e. tag`str1${expr1}...strN${exprN}strN+1`",$propdoc:{expressions:"[AST_Node*] the placeholder expressions",strings:"[string*] the raw text segments",tag:"[AST_Node?] tag function, or null if absent"},_equals:function(e){return r(this.tag,e.tag)&&(t=this.strings,n=e.strings,t.length==n.length)&&M(t,function(e,t){return e==n[t]})&&i(this.expressions,e.expressions);var t,n},walk:function(t){var e=this;t.visit(e,function(){e.tag&&e.tag.walk(t),e.expressions.forEach(function(e){e.walk(t)})})},_validate:function(){if(this.expressions.length+1!=this.strings.length)throw new Error("malformed template with "+this.expressions.length+" placeholder(s) but "+this.strings.length+" text segment(s)");Je(this,"expressions"),this.strings.forEach(function(e){if("string"!=typeof e)throw new Error("strings must contain string")}),null!=this.tag&&n(this,"tag")}}),D=e("Constant",null,{$documentation:"Base class for all constants",_equals:function(e){return this.value===e.value},_validate:function(){if("Constant"==this.TYPE)throw new Error("should not instantiate AST_Constant")}}),I=e("String","quote value",{$documentation:"A string literal",$propdoc:{quote:"[string?] the original quote character",value:"[string] the contents of this string"},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},D),Ft=e("Number","value",{$documentation:"A number literal",$propdoc:{value:"[number] the numeric value"},_validate:function(){if("number"!=typeof this.value)throw new Error("value must be number");if(!isFinite(this.value))throw new Error("value must be finite");if(this.value<0)throw new Error("value cannot be negative")}},D),qt=e("BigInt","value",{$documentation:"A BigInt literal",$propdoc:{value:"[string] the numeric representation"},_validate:function(){if("string"!=typeof this.value)throw new Error("value must be string");if("-"==this.value[0])throw new Error("value cannot be negative")}},D),Bt=e("RegExp","value",{$documentation:"A regexp literal",$propdoc:{value:"[RegExp] the actual regexp"},_equals:function(e){return""+this.value==""+e.value},_validate:function(){if(!(this.value instanceof RegExp))throw new Error("value must be RegExp")}},D),N=e("Atom",null,{$documentation:"Base class for atoms",_equals:z,_validate:function(){if("Atom"==this.TYPE)throw new Error("should not instantiate AST_Atom")}},D),Vt=e("Null",null,{$documentation:"The `null` atom",value:null},N),zt=e("NaN",null,{$documentation:"The impossible value",value:NaN},N),Ut=e("Undefined",null,{$documentation:"The `undefined` value",value:void 0},N),$t=e("Hole",null,{$documentation:"A hole in an array",value:void 0},N),Ht=e("Infinity",null,{$documentation:"The `Infinity` value",value:1/0},N),Wt=e("Boolean",null,{$documentation:"Base class for booleans",_validate:function(){if("Boolean"==this.TYPE)throw new Error("should not instantiate AST_Boolean")}},N),Gt=e("False",null,{$documentation:"The `false` atom",value:!1},Wt),Yt=e("True",null,{$documentation:"The `true` atom",value:!0},Wt);function L(e){this.callback=e,this.directives=Object.create(null),this.stack=[]}function Jt(e,t){L.call(this),this.before=e,this.after=t}function R(e,t){return q(e,function(e){return e.transform(t,!0)})}function Xt(e,t){e.argnames=R(e.argnames,t),e.rest&&(e.rest=e.rest.transform(t)),e.value?e.value=e.value.transform(t):e.body=R(e.body,t)}return L.prototype={visit:function(e,t){this.push(e),!this.callback(e,t||B)&&t&&t(),this.pop()},parent:function(e){return this.stack[this.stack.length-2-(e||0)]},push:function(e){var t;e instanceof y?(this.directives=Object.create(this.directives),t="use strict"):e instanceof s?t=e.value:e instanceof d&&(this.directives=Object.create(this.directives)),t&&!this.directives[t]&&(this.directives[t]=e),this.stack.push(e)},pop:function(){var e=this.stack.pop();(e instanceof y||e instanceof d)&&(this.directives=Object.getPrototypeOf(this.directives))},self:function(){return this.stack[this.stack.length-1]},find_parent:function(e){for(var t=this.stack,n=t.length-1;0<=--n;){var i=t[n];if(i instanceof e)return i}},has_directive:function(e){var t=this.directives[e];if(t)return t;var n=this.stack[this.stack.length-1];if(n instanceof h)for(var i=0;i<n.body.length;++i){var r=n.body[i];if(!(r instanceof s))break;if(r.value==e)return r}},loopcontrol_target:function(e){var t,n=this.stack;if(e.label){for(var i=n.length;0<=--i;)if((t=n[i])instanceof K&&t.label.name==e.label.name)return t.body}else for(i=n.length;0<=--i;)if((t=n[i])instanceof p||e instanceof Oe&&t instanceof Ne)return t},in_boolean_context:function(){for(var e,t=!0,n=0,i=this.self();e=this.parent(n++);i=e){if(e instanceof st)switch(e.operator){case"&&":case"||":e.left===i&&(t=!1);continue;default:return!1}if(!(e instanceof ot)){if(e instanceof Q)return e.condition===i;if(e instanceof te)return e.condition===i;if(e instanceof Ie)return e.condition===i;if(e instanceof Ce){if(e.in_bool)return!0;for(;e=this.parent(n++);)if(e instanceof d){if(e.name)return!1;if("Call"!=(e=this.parent(n++)).TYPE)return!1;break}}if(e instanceof Qe){if(e.tail_node()===i)continue;return!t||"d"}return e instanceof J?!t||"d":e instanceof it&&"!"==e.operator}if(e.condition===i)return!0}}},Jt.prototype=new L,(T=function(e,i){e.DEFMETHOD("transform",function(e,t){var n;return e.push(this),void 0===(n=e.before?e.before(this,i,t):n)&&(i(n=this,e),e.after)&&void 0!==(t=e.after(n,t))&&(n=t),e.pop(),n})})(u,B),T(K,function(e,t){e.label=e.label.transform(t),e.body=e.body.transform(t)}),T(J,function(e,t){e.body=e.body.transform(t)}),T(f,function(e,t){e.body=R(e.body,t)}),T(Z,function(e,t){e.body=e.body.transform(t),e.condition=e.condition.transform(t)}),T(ee,function(e,t){e.condition=e.condition.transform(t),e.body=e.body.transform(t)}),T(te,function(e,t){e.init&&(e.init=e.init.transform(t)),e.condition&&(e.condition=e.condition.transform(t)),e.step&&(e.step=e.step.transform(t)),e.body=e.body.transform(t)}),T(ne,function(e,t){e.init=e.init.transform(t),e.object=e.object.transform(t),e.body=e.body.transform(t)}),T(oe,function(e,t){e.expression=e.expression.transform(t),e.body=e.body.transform(t)}),T(Te,function(e,t){e.value&&(e.value=e.value.transform(t))}),T(x,function(e,t){e.label&&(e.label=e.label.transform(t))}),T(Ie,function(e,t){e.condition=e.condition.transform(t),e.body=e.body.transform(t),e.alternative&&(e.alternative=e.alternative.transform(t))}),T(Ne,function(e,t){e.expression=e.expression.transform(t),e.body=R(e.body,t)}),T(je,function(e,t){e.expression=e.expression.transform(t),e.body=R(e.body,t)}),T(Me,function(e,t){e.body=R(e.body,t),e.bcatch&&(e.bcatch=e.bcatch.transform(t)),e.bfinally&&(e.bfinally=e.bfinally.transform(t))}),T(Fe,function(e,t){e.argname&&(e.argname=e.argname.transform(t)),e.body=R(e.body,t)}),T(w,function(e,t){e.definitions=R(e.definitions,t)}),T(S,function(e,t){e.name=e.name.transform(t),e.value&&(e.value=e.value.transform(t))}),T(Ye,function(e,t){e.name=e.name.transform(t),e.value=e.value.transform(t)}),T(d,function(e,t){e.name&&(e.name=e.name.transform(t)),e.argnames=R(e.argnames,t),e.rest&&(e.rest=e.rest.transform(t)),e.body=R(e.body,t)}),T(ue,Xt),T(fe,Xt),T(y,function(e,t){e.name&&(e.name=e.name.transform(t)),e.extends&&(e.extends=e.extends.transform(t)),e.properties=R(e.properties,t)}),T(b,function(e,t){e.key instanceof u&&(e.key=e.key.transform(t)),e.value&&(e.value=e.value.transform(t))}),T(Xe,function(e,t){e.expression=e.expression.transform(t),e.args=R(e.args,t)}),T(Qe,function(e,t){e.expressions=R(e.expressions,t)}),T(ct,function(e,t){e.expression=e.expression.transform(t)}),T(ut,function(e,t){e.expression&&(e.expression=e.expression.transform(t))}),T(Ze,function(e,t){e.expression=e.expression.transform(t)}),T(et,function(e,t){e.expression=e.expression.transform(t),e.property=e.property.transform(t)}),T(tt,function(e,t){e.expression=e.expression.transform(t)}),T(nt,function(e,t){e.expression=e.expression.transform(t)}),T(st,function(e,t){e.left=e.left.transform(t),e.right=e.right.transform(t)}),T(ot,function(e,t){e.condition=e.condition.transform(t),e.consequent=e.consequent.transform(t),e.alternative=e.alternative.transform(t)}),T(ft,function(e,t){e.elements=R(e.elements,t)}),T(lt,function(e,t){e.elements=R(e.elements,t),e.rest&&(e.rest=e.rest.transform(t))}),T(pt,function(e,t){e.key instanceof u&&(e.key=e.key.transform(t)),e.value=e.value.transform(t)}),T(ht,function(e,t){e.properties=R(e.properties,t),e.rest&&(e.rest=e.rest.transform(t))}),T(dt,function(e,t){e.properties=R(e.properties,t)}),T(C,function(e,t){e.key instanceof u&&(e.key=e.key.transform(t)),e.value=e.value.transform(t)}),T(Ue,function(e,t){e.body=e.body.transform(t)}),T($e,function(e,t){e.body=e.body.transform(t)}),T(We,function(e,t){e.properties=R(e.properties,t)}),T(Ge,function(e,t){e.all&&(e.all=e.all.transform(t)),e.default&&(e.default=e.default.transform(t)),e.properties&&(e.properties=R(e.properties,t))}),T(Mt,function(e,t){e.tag&&(e.tag=e.tag.transform(t)),e.expressions=R(e.expressions,t)}),$={parse:null,DEFNODE:e,AST_Token:j,AST_Node:u,AST_Statement:t,AST_Debugger:W,AST_Directive:s,AST_EmptyStatement:G,AST_SimpleStatement:J,AST_BlockScope:a,AST_Block:f,AST_BlockStatement:X,AST_StatementWithBody:l,AST_LabeledStatement:K,AST_IterationStatement:p,AST_DWLoop:Q,AST_Do:Z,AST_While:ee,AST_For:te,AST_ForEnumeration:ne,AST_ForIn:ie,AST_ForOf:re,AST_ForAwaitOf:se,AST_With:oe,AST_Scope:h,AST_Toplevel:ae,AST_ClassInitBlock:ce,AST_Lambda:d,AST_Accessor:m,AST_LambdaExpression:g,AST_Arrow:ue,AST_AsyncArrow:fe,AST_AsyncFunction:le,AST_Function:he,AST_GeneratorFunction:de,AST_AsyncGeneratorFunction:pe,AST_LambdaDefinition:v,AST_AsyncDefun:me,AST_AsyncGeneratorDefun:ge,AST_Defun:_e,AST_GeneratorDefun:ve,AST_Class:y,AST_DefClass:ye,AST_ClassExpression:be,AST_ClassProperty:b,AST_ClassField:xe,AST_ClassGetter:we,AST_ClassSetter:Se,AST_ClassMethod:ke,AST_ClassInit:Ee,AST_Jump:Ae,AST_Exit:Te,AST_Return:Ce,AST_Throw:Pe,AST_LoopControl:x,AST_Break:Oe,AST_Continue:De,AST_If:Ie,AST_Switch:Ne,AST_SwitchBranch:Le,AST_Default:Re,AST_Case:je,AST_Try:Me,AST_Catch:Fe,AST_Finally:qe,AST_Definitions:w,AST_Const:Be,AST_Let:Ve,AST_Var:ze,AST_VarDef:S,AST_ExportDeclaration:Ue,AST_ExportDefault:$e,AST_ExportForeign:He,AST_ExportReferences:We,AST_Import:Ge,AST_DefaultValue:Ye,AST_Call:Xe,AST_New:Ke,AST_Sequence:Qe,AST_PropAccess:k,AST_Dot:Ze,AST_Sub:et,AST_Spread:tt,AST_Unary:nt,AST_UnaryPrefix:it,AST_UnaryPostfix:rt,AST_Binary:st,AST_Conditional:ot,AST_Assign:at,AST_Await:ct,AST_Yield:ut,AST_Array:ft,AST_Destructured:E,AST_DestructuredArray:lt,AST_DestructuredKeyVal:pt,AST_DestructuredObject:ht,AST_Object:dt,AST_ObjectProperty:C,AST_ObjectKeyVal:mt,AST_ObjectMethod:gt,AST_ObjectSetter:_t,AST_ObjectGetter:vt,AST_Symbol:P,AST_SymbolDeclaration:O,AST_SymbolConst:yt,AST_SymbolImport:bt,AST_SymbolLet:xt,AST_SymbolVar:wt,AST_SymbolFunarg:St,AST_SymbolDefun:kt,AST_SymbolLambda:Et,AST_SymbolDefClass:At,AST_SymbolClass:Tt,AST_SymbolCatch:Ct,AST_Label:Pt,AST_SymbolRef:Ot,AST_SymbolExport:Dt,AST_LabelRef:It,AST_ObjectIdentity:Nt,AST_Super:Lt,AST_This:Rt,AST_NewTarget:jt,AST_Template:Mt,AST_Constant:D,AST_String:I,AST_Number:Ft,AST_BigInt:qt,AST_RegExp:Bt,AST_Atom:N,AST_Null:Vt,AST_NaN:zt,AST_Undefined:Ut,AST_Hole:$t,AST_Infinity:Ht,AST_Boolean:Wt,AST_False:Gt,AST_True:Yt,first_in_statement:function(e,t,n){for(var i,r=e.parent(-1),s=0;i=e.parent(s++);r=i){if(_(i))return t&&i.value===r;if(i instanceof st){if(i.left===r)continue}else if("Call"==i.TYPE){if(i.expression===r)continue}else if(i instanceof ot){if(i.condition===r)continue}else{if(i instanceof $e)return n;if(i instanceof k){if(i.expression===r)continue}else if(i instanceof Qe){if(i.expressions[0]===r)continue}else{if(i instanceof J)return!0;if(i instanceof Mt){if(i.tag===r)continue}else if(i instanceof rt&&i.expression===r)continue}}return!1}},root_expr:function(e){for(;e instanceof k;)e=e.expression;return e},is_arrow:_,is_generator:function(e){return e instanceof ge||e instanceof pe||e instanceof ve||e instanceof de},walk_lambda:function(e,t){_(e)&&e.value?e.value.walk(t):c(e,t)},walk_body:c,is_statement:o,is_async:function(e){return e instanceof fe||e instanceof me||e instanceof le||e instanceof ge||e instanceof pe},TreeWalker:L,TreeTransformer:Jt}}),define("skylark-uglifyjs/parse",["./utils","./ast"],function(e,i){"use strict";const{characters:t,defaults:je,find_if:Me,makePredicate:n,configure_error_stack:r,HOP:Fe,all:le}=e,{AST_Accessor:qe,AST_Array:E,AST_Arrow:Be,AST_Assign:pe,AST_AsyncFunction:he,AST_AsyncDefun:de,AST_AsyncArrow:Ve,AST_AsyncGeneratorFunction:me,AST_AsyncGeneratorDefun:ge,AST_Await:ze,AST_BigInt:Ue,AST_Binary:$e,AST_BlockStatement:He,AST_Break:We,AST_Call:Ge,AST_Case:Ye,AST_Catch:Je,AST_ClassExpression:Xe,AST_ClassGetter:Ke,AST_ClassInit:Qe,AST_ClassMethod:Ze,AST_ClassSetter:et,AST_Conditional:tt,AST_Const:nt,AST_Continue:it,AST_Debugger:rt,AST_Default:st,AST_DefaultValue:_e,AST_DefClass:ve,AST_Definitions:ot,AST_Defun:ye,AST_Destructured:be,AST_DestructuredArray:xe,AST_DestructuredKeyVal:we,AST_DestructuredObject:Se,AST_Directive:at,AST_Do:ct,AST_Dot:ut,AST_EmptyStatement:ft,AST_ExportDeclaration:lt,AST_False:pt,AST_Finally:ht,AST_For:dt,AST_ForIn:mt,AST_ForOf:gt,AST_Function:ke,AST_Hole:Ee,AST_If:_t,AST_Import:vt,AST_IterationStatement:yt,AST_Label:bt,AST_LabeledStatement:xt,AST_LabelRef:wt,AST_Let:St,AST_New:kt,AST_NewTarget:Et,AST_Null:At,AST_Number:Tt,AST_Object:Ae,AST_ObjectGetter:Ct,AST_ObjectKeyVal:Te,AST_ObjectMethod:Ce,AST_ObjectSetter:Pt,AST_PropAccess:Ot,AST_RegExp:Dt,AST_Return:It,AST_Sequence:Nt,AST_SimpleStatement:Lt,AST_Spread:Pe,AST_String:Oe,AST_Sub:Rt,AST_Super:jt,AST_Switch:Mt,AST_SymbolCatch:Ft,AST_SymbolClass:qt,AST_SymbolConst:Bt,AST_SymbolDeclaration:Vt,AST_SymbolDefClass:zt,AST_SymbolDefun:Ut,AST_SymbolExport:$t,AST_SymbolFunarg:De,AST_SymbolImport:Ie,AST_SymbolLambda:Ht,AST_SymbolLet:Wt,AST_SymbolRef:Ne,AST_SymbolVar:Gt,AST_Template:Yt,AST_This:Jt,AST_Throw:Xt,AST_Token:I,AST_Toplevel:Kt,AST_True:Qt,AST_Try:Zt,AST_UnaryPostfix:en,AST_UnaryPrefix:tn,AST_Var:nn,AST_VarDef:rn,AST_While:sn,AST_With:on,AST_Yield:an}=i;var e=["abstract async await boolean byte char double enum export final float goto implements import int interface let long native package private protected public short static super synchronized this throws transient volatile yield",A="false null true",Le="break case catch class const continue debugger default delete do else extends finally for function if in instanceof new return switch throw try typeof var void while with"].join(" "),N="return new delete throw else case",Le=n(Le),e=n(e),N=n(N),A=n(A),L=/^0b([01]+)$/i,R=/^0x([0-9a-f]+)$/i,j=/^0o?([0-7]+)$/i,M=n(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%","**",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=","**=",">>=","<<=",">>>=","&=","|=","^=","&&","||","??","&&=","||=","??="]),T="\n\r\u2028\u2029",C="+-*&%=<>!?|~^",cn=",;:)}]",P="[{(,;:",O=P+"`)}]",D=T+"  \t\f\v​             　\ufeff",F=n(t("./'\"#"+C+O+D));function q(e){return 48<=e&&e<=57}function B(e){return!F[e]}function un(e){return/^[a-z_$][a-z0-9_$]*$/i.test(e)}function V(e){switch(e[0]){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"u":if("{"==e[1]&&"}"==e.slice(-1))t=e.slice(2,-1);else{if(5!=e.length)return;t=e.slice(1)}return(t=parseInt(t,16))<0||isNaN(t)?void 0:t<65536?String.fromCharCode(t):1114111<t?void 0:String.fromCharCode(55232+(t>>10))+String.fromCharCode(56320+(1023&t));case"v":return"\v";case"x":var t;return 3!=e.length?void 0:(t=parseInt(e.slice(1),16))<0||isNaN(t)?void 0:String.fromCharCode(t);case"\r":case"\n":return"";default:return"0"==e?"\0":"0"<=e[0]&&e[0]<="9"?void 0:e}}function s(e,t,n,i,r){this.message=e,this.filename=t,this.line=n,this.col=i,this.pos=r}function fn(e,t,n,i,r){throw new s(e,t,n,i,r)}function Re(e,t,n){return e.type==t&&(null==n||e.value==n)}T=n(t(T)),C=n(t(C)),cn=n(t(cn)),P=n(t(P)),O=n(t(O)),D=n(t(D)),((s.prototype=Object.create(Error.prototype)).constructor=s).prototype.name="SyntaxError",r(s);var z={};function ln(i,r,s,o){var a={text:i,filename:r,pos:0,tokpos:0,line:1,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[],directives:Object.create(null),read_template:e("Unterminated template literal",function(e){for(var t="";;){var n=i();switch(n){case"\\":n+=i();break;case"`":return void e.push(t);case"$":if("{"==u())return f(),e.push(t),a.regex_allowed=!0}t+=n}function i(){var e=f(!0,!0);return"\r"==e?"\n":e}})},c=!1;function u(){return a.text.charAt(a.pos)}function f(e,t){var n=a.text.charAt(a.pos++);if(e&&!n)throw z;return T[n]?(a.col=0,a.line++,t||(a.newline_before=!0),"\r"==n&&"\n"==u()&&(a.pos++,n="\n")):a.col++,n}function l(e){for(;0<e--;)f()}function p(e){return a.text.substr(a.pos,e.length)==e}function h(){a.tokline=a.line,a.tokcol=a.col,a.tokpos=a.pos}function d(e,t,n){a.regex_allowed="operator"==e&&!hn[t]||"keyword"==e&&N[t]||"punc"==e&&P[t],"punc"==e&&"."==t?c=!0:n||(c=!1);t={type:e,value:t,line:a.tokline,col:a.tokcol,pos:a.tokpos,endline:a.line,endcol:a.col,endpos:a.pos,nlb:a.newline_before,file:r};return/^(?:num|string|regexp)$/i.test(e)&&(t.raw=i.substring(t.pos,t.endpos)),n||(t.comments_before=a.comments_before,t.comments_after=a.comments_before=[]),a.newline_before=!1,new I(t)}function m(e){fn(e,r,a.tokline,a.tokcol,a.tokpos)}function g(e){return/^0[0-7_]+$/.test(e)}function _(e){var t,n=!1,i=!1,r=!1,s="."==e,o=function(e){for(var t,n="";(t=u())&&e(t,n);)n+=f();return n}(function(e,t){switch(e){case"x":case"X":return!r&&(r=!0);case"e":case"E":return r||!n&&(n=i=!0);case"+":case"-":return i;case i=!1,".":return!(s||n||r||g(t))&&(s=!0)}return/[_0-9a-dfo]/i.test(e)}),e=(g(o=e?e+o:o)?E.has_directive("use strict")&&m("Legacy octal literals are not allowed in strict mode"):o=o.replace(r?/([1-9a-f]|.0)_(?=[0-9a-f])/gi:/([1-9]|.0)_(?=[0-9])/gi,"$1"),e=o,(t=L.exec(e))?parseInt(t[1],2):(t=R.exec(e))?parseInt(t[1],16):(t=j.exec(e))?parseInt(t[1],8):(t=parseFloat(e))==e?t:void 0);return isNaN(e)&&m("Invalid syntax: "+o),s||n||"n"!=u()?d("num",e):d("bigint",o.toLowerCase()+f())}function v(e){var t,n=f(!0,e);if("0"<=n&&n<="7")return t=n,"0"<=(r=u())&&r<="7"&&(t+=f(!0))[0]<="3"&&"0"<=(r=u())&&r<="7"&&(t+=f(!0)),"0"===t?"\0":(0<t.length&&E.has_directive("use strict")&&m("Legacy octal escape sequences are not allowed in strict mode"),String.fromCharCode(parseInt(t,8)));if("u"==n){var i=f(!0,e);if(n+=i,"{"!=i)n+=f(!0,e)+f(!0,e)+f(!0,e);else for(;n+=i=f(!0,e),"}"!=i;);}else"x"==n&&(n+=f(!0,e)+f(!0,e));var r=V(n);return"string"!=typeof r&&m("Invalid escape sequence: \\"+n),r}var y=e("Unterminated string constant",function(e){for(var t=f(),n="";;){var i=f(!0,!0);if("\\"==i)i=v(!0);else if(T[i])m("Unterminated string constant");else if(i==t)break;n+=i}var r=d("string",n);return r.quote=e,r});function b(e){var t,n=a.regex_allowed,i=function(){for(var e=a.text,t=a.pos;t<a.text.length;++t)if(T[e[t]])return t;return-1}();return-1==i?(t=a.text.substr(a.pos),a.pos=a.text.length):(t=a.text.substring(a.pos,i),a.pos=i),a.col=a.tokcol+(a.pos-a.tokpos),a.comments_before.push(d(e,t,!0)),a.regex_allowed=n,E}var x=e("Unterminated multiline comment",function(){var e=a.regex_allowed,t=function(e,t){if(e=a.text.indexOf(e,a.pos),t&&-1==e)throw z;return e}("*/",!0),t=a.text.substring(a.pos,t).replace(/\r\n|\r|\u2028|\u2029/g,"\n");return l(t.length+2),a.comments_before.push(d("comment2",t,!0)),a.regex_allowed=e,E});function w(){for(var e,t,n=!1,i=!1,r="#"==u()?f():"";e=u();)if(n)"u"!=e&&m("Expecting UnicodeEscapeSequence -- uXXXX"),B(e=v())||m("Unicode char: "+e.charCodeAt(0)+" is not valid in identifier"),r+=e,n=!1;else if("\\"==e)i=n=!0,f();else{if(!B(e))break;r+=f()}return Le[r]&&i&&(t=r.charCodeAt(0).toString(16).toUpperCase(),r="\\u"+"0000".substr(t.length)+t+r.slice(1)),r}var S=e("Unterminated regular expression",function(e){for(var t,n=!1,i=!1;t=f(!0);)if(T[t])m("Unexpected line terminator");else if(n)e+="\\"+t,n=!1;else if("["==t)i=!0,e+=t;else if("]"==t&&i)i=!1,e+=t;else{if("/"==t&&!i)break;"\\"==t?n=!0:e+=t}var r=w();try{var s=new RegExp(e,r);return s.raw_source=e,d("regexp",s)}catch(e){m(e.message)}});function k(e){return d("operator",function e(t){var n;return u()&&(n=t+u(),M[n])?(f(),e(n)):t}(e||f()))}function e(t,n){return function(e){try{return n(e)}catch(e){if(e!==z)throw e;m(t)}}}function E(e){if(null!=e)return S(e);for(o&&0==a.pos&&p("#!")&&(h(),l(2),b("comment5"));;){for(;D[u()];)f();if(h(),s){if(p("\x3c!--")){l(4),b("comment3");continue}if(p("--\x3e")&&a.newline_before){l(3),b("comment4");continue}}var t=u();if(!t)return d("eof");var n=t.charCodeAt(0);switch(n){case 34:case 39:return y(t);case 46:return f(),p("..")?d("operator","."+f()+f()):q(u().charCodeAt(0))?_("."):d("punc",".");case 47:var i=function(){switch(f(),u()){case"/":return f(),b("comment1");case"*":return f(),x()}return a.regex_allowed?S(""):k("/")}();if(i===E)continue;return i}if(q(n))return _();if(O[t])return d("punc",f());if(p("=>"))return d("punc",f()+f());if(C[t])return k();if(35!=n&&92!=n&&F[t])break;return n=void 0,n=w(),c?d("name",n):A[n]?d("atom",n):Le[n]?M[n]?d("operator",n):d("keyword",n):d("name",n)}m("Unexpected character '"+t+"'")}return E.context=function(e){return a=e?e:a},E.add_directive=function(e){a.directives[e]=!0},E.push_directives_stack=function(){a.directives=Object.create(a.directives)},E.pop_directives_stack=function(){a.directives=Object.getPrototypeOf(a.directives)},E.has_directive=function(e){return!!a.directives[e]},E}var pn=n("typeof void delete -- ++ ! ~ - +"),hn=n("-- ++"),dn=n("= += -= /= *= %= **= >>= <<= >>>= &= |= ^= &&= ||= ??="),mn=function(e,t){for(var n=0;n<e.length;)for(var i=e[n++],r=0;r<i.length;r++)t[i[r]]=n;return t}([["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"],["**"]],{}),gn=n("atom bigint num regexp string");function o(e,A){A=je(A,{bare_returns:!1,expression:!1,filename:null,html5_comments:!0,module:!1,shebang:!0,strict:!1,toplevel:null},!0);var T={input:"string"==typeof e?ln(e,A.filename,A.html5_comments,A.shebang):e,in_async:!1,in_directives:!0,in_funarg:-1,in_function:0,in_generator:!1,in_loop:0,labels:[],peeked:null,prev:null,token:null};function C(e,t){return Re(T.token,e,t)}function P(){return T.peeked||(T.peeked=T.input())}function O(){return T.prev=T.token,T.peeked?(T.token=T.peeked,T.peeked=null):T.token=T.input(),T.in_directives=T.in_directives&&("string"==T.token.type||C("punc",";")),T.token}function D(){return T.prev}function I(e,t,n,i){var r=T.input.context();fn(e,r.filename,null!=t?t:r.tokline,null!=n?n:r.tokcol,null!=i?i:r.tokpos)}function N(e,t){I(t,e.line,e.col)}function i(e,t){return e+(void 0===t?"":" «"+t+"»")}function L(e){N(e=null==e?T.token:e,"Unexpected token: "+i(e.type,e.value))}function R(e,t){if(C(e,t))return O();N(T.token,"Unexpected token: "+i(T.token.type,T.token.value)+", expected: "+i(e,t))}function j(e){R("punc",e)}function M(e){return e.nlb||!le(e.comments_before,function(e){return!e.nlb})}function Z(){return!A.strict&&(C("eof")||C("punc","}")||M(T.token))}function F(e){C("punc",";")?O():e||Z()||j(";")}function q(){j("(");var e=K();return j(")"),e}function t(i){return function(){var e=T.token,t=i.apply(null,arguments),n=D();return t.start=e,t.end=n,t}}function B(){(C("operator","/")||C("operator","/="))&&(T.peeked=null,T.token=T.input(T.token.value.substr(1)))}T.token=O();var V=t(function(e){switch(B(),T.token.type){case"string":var t=T.in_directives,n=K();return t&&(n instanceof Oe?(x=n.start.raw.slice(1,-1),T.input.add_directive(x),n.value=x):T.in_directives=t=!1),F(),t?new at(n):new Lt({body:n});case"num":case"bigint":case"regexp":case"operator":case"atom":return z();case"name":switch(T.token.value){case"async":if(Re(P(),"keyword","function"))return O(),O(),C("operator","*")?(O(),U(ge)):U(de);break;case"await":if(T.in_async)return z();break;case"export":if(e||""===A.module||L(),O(),C("operator","*"))return o=s=T.token,O(),C("name","as")&&(O(),ne()||R("name"),o=T.token,O()),R("name","from"),new AST_ExportForeign({aliases:[$(o)],keys:[$(s)],path:ie()});if(C("punc","{")){O();for(var i=[],r=[];ne();){var s=T.token;O(),r.push(s),C("name","as")?(O(),ne()||R("name"),i.push(T.token),O()):i.push(s),C("punc","}")||j(",")}return(j("}"),C("name","from"))?(O(),new AST_ExportForeign({aliases:i.map($),keys:r.map($),path:ie()})):(F(),new AST_ExportReferences({properties:r.map(function(e,t){Re(e,"name")||N(e,"Name expected");e=fe($t,e);return e.alias=$(i[t]),e})}))}return C("keyword","default")?(O(),o=T.token,(u=function(){if(C("name","async")){if(Re(P(),"keyword","function"))return O(),O(),C("operator","*")?(O(),H(ge,U(me))):H(de,U(he))}else if(C("keyword"))switch(T.token.value){case"class":return O(),H(ve,te(Xe));case"function":return(O(),C("operator","*"))?(O(),H(AST_GeneratorDefun,U(AST_GeneratorFunction))):H(ye,U(ke))}}())?(u.start=o,u.end=D()):(B(),u=K(),F()),new AST_ExportDefault({body:u})):new lt({body:re()});case"import":var o=P();if("punc"==o.type&&/^[(.]$/.test(o.value))break;e||""===A.module||L(),O();var a,c,u=null,f=G(Ie,!0),l=null;if(f?(f.key=new Oe({start:f.start,value:"",end:f.end}),(a=C("punc",","))&&O()):a=!C("string"),a)if(C("operator","*")){var p=T.token;O(),R("name","as"),(u=G(Ie)).key=$(p)}else{for(j("{"),l=[];ne();)Re(P(),"name","as")?(p=T.token,O(),O(),(c=G(Ie)).key=$(p)):(c=G(Ie)).key=new Oe({start:c.start,value:c.name,end:c.end}),l.push(c),C("punc","}")||j(",");j("}")}return(u||f||l)&&R("name","from"),new vt({all:u,default:f,path:ie(),properties:l});case"let":if(oe())return O(),h=ce(),F(),h;break;case"yield":if(T.in_generator)return z()}return(Re(P(),"punc",":")?function(){var t=G(bt);le(T.labels,function(e){return e.name!=t.name})||I("Label "+t.name+" defined twice");j(":"),T.labels.push(t);var e=V();T.labels.pop(),e instanceof yt||t.references.forEach(function(e){e instanceof it&&N(e.label.start,"Continue label `"+t.name+"` must refer to IterationStatement")});return new xt({body:e,label:t})}:z)();case"punc":switch(T.token.value){case"{":return new He({start:T.token,body:W(),end:D()});case"[":case"(":case"`":return z();case";":return T.in_directives=!1,O(),new ft;default:L()}case"keyword":switch(T.token.value){case"break":return O(),ee(We);case"class":return O(),te(ve);case"const":O();var h=ae();return F(),h;case"continue":return O(),ee(it);case"debugger":return O(),F(),new rt;case"do":O();var n=Q(V),d=(R("keyword","while"),q());return F(!0),new ct({body:n,condition:d});case"while":return O(),new sn({condition:q(),body:Q(V)});case"for":O();var d=C("name","await")&&O(),m=(j("("),null);if(!d&&C("punc",";")||(m=(C("keyword","const")?(O(),ae):C("name","let")&&oe()?(O(),ce):C("keyword","var")?(O(),ue):K)(!0),d?(R("name","of"),y=AST_ForAwaitOf):C("operator","in")?(O(),y=mt):C("name","of")&&(O(),y=gt),!y))return g=m,j(";"),_=C("punc",";")?null:K(),j(";"),v=C("punc",")")?null:K(),j(")"),new dt({init:g,condition:_,step:v,body:Q(V)});m instanceof ot?(1<m.definitions.length&&N(m.start,"Only one variable declaration allowed in for..in/of loop"),y!==mt&&m.definitions[0].value&&N(m.definitions[0].value.start,"No initializers allowed in for..of loop")):J(m)||(m=X(m))instanceof be||N(m.start,"Invalid left-hand side in for..in/of loop");var g=y,_=m,v=(B(),K());return j(")"),new g({init:_,object:v,body:Q(V)});case"function":return(O(),C("operator","*"))?(O(),U(AST_GeneratorDefun)):U(ye);case"if":O();var y=q(),m=V(),b=null;return C("keyword","else")&&(O(),b=V()),new _t({condition:y,body:m,alternative:b});case"return":0!=T.in_function||A.bare_returns||I("'return' outside of function"),O();var x=null;return C("punc",";")?O():Z()||(x=K(),F()),new It({value:x});case"switch":return O(),new Mt({expression:q(),body:Q(se)});case"throw":O(),M(T.token)&&I("Illegal newline after 'throw'");x=K();return F(),new Xt({value:x});case"try":O();var w,S,b=W(),k=null,E=null;return C("keyword","catch")&&(S=T.token,O(),w=null,C("punc","(")&&(O(),w=Y(Ft),j(")")),k=new Je({start:S,argname:w,body:W(),end:D()})),C("keyword","finally")&&(S=T.token,O(),E=new ht({start:S,body:W(),end:D()})),k||E||I("Missing catch/finally blocks"),new Zt({body:b,bcatch:k,bfinally:E});case"var":O();h=ue();return F(),h;case"with":return T.input.has_directive("use strict")&&I("Strict mode may not include a with statement"),O(),new on({expression:q(),body:V()})}}L()});function z(){var e=K();return F(),new Lt({body:e})}function ee(e){var t,n=null,e=(null!=(n=Z()?n:G(wt,!0))?((t=Me(function(e){return e.name==n.name},T.labels))||N(n.start,"Undefined label "+n.name),n.thedef=t):0==T.in_loop&&I(e.TYPE+" not inside a loop or switch"),F(),new e({label:n}));return t&&t.references.push(e),e}function g(e,t){if(C("name",e)){e=P();if(e&&!Re(e,"operator","=")&&!("punc"==e.type&&/^[(;}]$/.test(e.value)||t&&M(e)))return O()}}function te(e){for(var t,n=T.in_async,i=T.in_generator,r=(T.input.push_directives_stack(),T.input.add_directive("use strict"),t=e===ve?G(zt):G(qt,!0),null),s=(C("keyword","extends")&&(O(),B(),r=_(!0)),j("{"),[]);!C("punc","}");)if(C("punc",";"))O();else{var o=T.token,a=!!g("static"),c=g("async",!0);if(C("operator","*")){O();var u=C("name")&&/^#/.test(T.token.value),f=d(),l=T.token,p=U(c?me:AST_GeneratorFunction);p.start=l,p.end=D(),s.push(new Ze({start:o,static:a,private:u,key:f,value:p,end:D()}))}else if(a&&C("punc","{"))s.push(new Qe({start:o,value:new AST_ClassInitBlock({start:o,body:W(),end:D()}),end:D()}));else{u=C("name")&&/^#/.test(T.token.value),f=d();if(C("punc","(")){l=T.token,p=U(c?he:ke);p.start=l,p.end=D(),s.push(new Ze({start:o,static:a,private:u,key:f,value:p,end:D()}))}else{c&&L(c);c=null;if(C("operator","="))O(),T.in_async=!1,T.in_generator=!1,c=m(),T.in_generator=i,T.in_async=n;else if(!C("punc",";")&&!C("punc","}")){var h=null;switch(f){case"get":h=Ke;break;case"set":h=et}if(h){s.push(new h({start:o,static:a,private:C("name")&&/^#/.test(T.token.value),key:d(),value:y(),end:D()}));continue}}F(),s.push(new AST_ClassField({start:o,static:a,private:u,key:f,value:c,end:D()}))}}}return O(),T.input.pop_directives_stack(),T.in_generator=i,T.in_async=n,new e({extends:r,name:t,properties:s})}function l(e){var t;return e instanceof E?(t=null,e.elements[e.elements.length-1]instanceof Pe&&(t=l(e.elements.pop().expression)),new xe({start:e.start,elements:e.elements.map(l),rest:t,end:e.end})):e instanceof pe?new _e({start:e.start,name:l(e.left),value:e.right,end:e.end}):e instanceof _e?(e.name=l(e.name),e):e instanceof xe?(e.elements=e.elements.map(l),e.rest&&(e.rest=l(e.rest)),e):e instanceof Se?(e.properties.forEach(function(e){e.value=l(e.value)}),e.rest&&(e.rest=l(e.rest)),e):e instanceof Ee?e:e instanceof Ae?(t=null,e.properties[e.properties.length-1]instanceof Pe&&(t=l(e.properties.pop().expression)),new Se({start:e.start,properties:e.properties.map(function(e){return e instanceof Te||N(e.start,"Invalid destructuring assignment"),new we({start:e.start,key:e.key,value:l(e.value),end:e.end})}),rest:t,end:e.end})):e instanceof De?e:e instanceof Ne?new De(e):e instanceof an?new De({start:e.start,name:"yield",end:e.end}):void N(e.start,"Invalid arrow parameter")}function f(e,t,n){var i,r,s=T.in_async,o=T.in_generator,a=(T.in_async=n,T.in_generator=!1,T.in_funarg),c=(T.in_funarg=T.in_function,e.map(l)),e=(e=e.rest||null)&&l(e),a=(T.in_funarg=a,j("=>"),T.in_loop),u=T.labels,f=(++T.in_function,T.input.push_directives_stack(),T.in_loop=0,T.labels=[],r=C("punc","{")?(T.in_directives=!0,i=W(),null):(i=[],B(),m()),T.input.has_directive("use strict")),a=(T.input.pop_directives_stack(),--T.in_function,T.in_loop=a,T.labels=u,T.in_generator=o,T.in_async=s,new(n?Ve:Be)({start:t,argnames:c,rest:e,body:i,value:r,end:D()}));return f&&a.each_argname(x),a}var U=function(e){var t,n=T.in_async,i=T.in_generator,r=(/Defun$/.test(e.TYPE)?(t=G(Ut),T.in_async=/^Async/.test(e.TYPE),T.in_generator=/Generator/.test(e.TYPE)):(T.in_async=/^Async/.test(e.TYPE),T.in_generator=/Generator/.test(e.TYPE),t=G(Ht,!0)),!t||e===qe||t instanceof Vt||L(D()),j("("),T.in_funarg),s=(T.in_funarg=T.in_function,p(")",!A.strict,!1,function(){return u(De)})),r=(T.in_funarg=r,T.in_loop),o=T.labels,a=(++T.in_function,T.in_directives=!0,T.input.push_directives_stack(),T.in_loop=0,T.labels=[],W()),c=T.input.has_directive("use strict"),r=(T.input.pop_directives_stack(),--T.in_function,T.in_loop=r,T.labels=o,T.in_generator=i,T.in_async=n,new e({name:t,argnames:s,rest:s.rest||null,body:a}));return c&&(t&&x(t),r.each_argname(x)),r};function ne(){return C("name")||C("string")||un(T.token.value)}function $(e){return new Oe({start:e,quote:e.quote,value:e.value,end:e})}function ie(){var e=T.token;return R("string"),F(),$(e)}function H(e,t){return t.name&&((t=new e(t)).name=new(e===ve?zt:Ut)(t.name)),t}var re=t(function(){if(C("name"))switch(T.token.value){case"async":return(O(),R("keyword","function"),C("operator","*"))?(O(),U(ge)):U(de);case"let":O();var e=ce();return F(),e}else if(C("keyword"))switch(T.token.value){case"class":return O(),te(ve);case"const":O();e=ae();return F(),e;case"function":return(O(),C("operator","*"))?(O(),U(AST_GeneratorDefun)):U(ye);case"var":O();e=ue();return F(),e}L()});function W(){j("{");for(var e=[];!C("punc","}");)C("eof")&&j("}"),e.push(V());return O(),e}function se(){j("{");for(var e,t,n,i,r=[];!C("punc","}");)C("eof")&&j("}"),C("keyword","case")?(e&&(e.end=D()),t=[],e=new Ye({start:(i=T.token,O(),i),expression:K(),body:t}),r.push(e),j(":")):C("keyword","default")?(e&&(e.end=D()),n&&I("More than one default clause in switch statement"),t=[],e=new st({start:(i=T.token,O(),j(":"),i),body:t}),r.push(e),n=e):(t||L(),t.push(V()));return e&&(e.end=D()),O(),r}function r(e,t){for(var n=[];;){var i=T.token,r=Y(e),s=null;if(C("operator","=")?(O(),s=m(t)):!t&&(e===Bt||r instanceof be)&&I("Missing initializer in declaration"),n.push(new rn({start:i,name:r,value:s,end:D()})),!C("punc",","))break;O()}return n}function oe(){var e=P();return Re(e,"name")||Re(e,"punc","[")||Re(e,"punc","{")}var ae=function(e){return new nt({start:D(),definitions:r(Bt,e),end:D()})},ce=function(e){return new St({start:D(),definitions:r(Wt,e),end:D()})},ue=function(e){return new nn({start:D(),definitions:r(Gt,e),end:D()})};var _=function(e){if(C("operator","new"))return t=e,a=T.token,R("operator","new"),(c=C("punc",".")&&Re(P(),"name","target")?(O(),O(),new Et):(c=_(!1),u=C("punc","(")?(O(),p(")",!A.strict)):[],new kt({expression:c,args:u}))).start=a,c.end=D(),h(c,t);var t,n,i,r=T.token;if(C("punc")){switch(r.value){case"`":return h(w(null),e);case"(":return(O(),C("punc",")"))?(O(),f([],r)):(n=K(!1,!0),i=r.comments_before.length,[].unshift.apply(n.start.comments_before,r.comments_before),r.comments_before.length=0,r.comments_before=n.start.comments_before,0==(r.comments_before_length=i)&&0<r.comments_before.length&&((i=r.comments_before[0]).nlb||(i.nlb=r.nlb,r.nlb=!1)),r.comments_after=n.start.comments_after,n.start=r,j(")"),(i=D()).comments_before=n.end.comments_before,i.comments_after.forEach(function(e){n.end.comments_after.push(e),e.nlb&&(T.token.nlb=!0)}),i.comments_after.length=0,i.comments_after=n.end.comments_after,n.end=i,C("punc","=>")?f(n instanceof Nt?n.expressions:[n],r):h(n,e));case"[":return h(v(),e);case"{":return h(b(),e)}L()}if(C("keyword"))switch(r.value){case"class":O();var s=te(Xe);return s.start=r,s.end=D(),h(s,e);case"function":return O(),(o=C("operator","*")?(O(),U(AST_GeneratorFunction)):U(ke)).start=r,o.end=D(),h(o,e)}if(C("name")){var o,a,c,u=fe(Ne,r);if(O(),"async"==u.name){if(C("keyword","function"))return O(),(o=C("operator","*")?(O(),U(me)):U(he)).start=r,o.end=D(),h(o,e);if(C("name")&&Re(P(),"punc","=>"))return r=T.token,u=fe(Ne,r),O(),f([u],r,!0);if(C("punc","("))return a=h(u,e),C("punc","=>")?((c=a.args)[c.length-1]instanceof Pe&&(c.rest=c.pop().expression),f(c,r,!0)):a}return C("punc","=>")?f([u],r):h(u,e)}if(gn[T.token.type])return h(function(){var e,t=T.token,n=t.value;switch(t.type){case"num":isFinite(n)?e=new Tt({value:n}):(e=new AST_Infinity,n<0&&(e=new tn({operator:"-",expression:e})));break;case"bigint":e=new Ue({value:n});break;case"string":e=new Oe({value:n,quote:t.quote});break;case"regexp":e=new Dt({value:n});break;case"atom":switch(n){case"false":e=new pt;break;case"true":e=new Qt;break;case"null":e=new At;break;default:L()}break;default:L()}return O(),e.start=e.end=t,e}(),e);L()};function p(e,t,n,i){i=i||m;for(var r=!0,s=[];!C("punc",e)&&(r?r=!1:j(","),!t||!C("punc",e));)if(n&&C("punc",","))s.push(new Ee({start:T.token,end:T.token}));else if(C("operator","...")){if(i!==m){O(),s.rest=i(),s.rest instanceof _e&&N(s.rest.start,"Invalid rest parameter");break}s.push(new Pe({start:T.token,expression:(O(),i()),end:D()}))}else s.push(i());return j(e),s}var v=t(function(){return j("["),new E({elements:p("]",!A.strict,!0)})}),y=t(function(){return U(qe)}),b=t(function(){j("{");for(var e=!0,t=[];!C("punc","}")&&(e?e=!1:j(","),A.strict||!C("punc","}"));){var n=T.token;if(C("operator","*")){O();var i=d(),r=T.token,s=U(AST_GeneratorFunction);s.start=r,s.end=D(),t.push(new Ce({start:n,key:i,value:s,end:D()}))}else if(C("operator","..."))O(),t.push(new Pe({start:n,expression:m(),end:D()}));else if(Re(P(),"operator","=")){r=G(Ne);O(),t.push(new Te({start:n,key:n.value,value:new pe({start:n,left:r,operator:"=",right:m(),end:D()}),end:D()}))}else if(Re(P(),"punc",",")||Re(P(),"punc","}"))t.push(new Te({start:n,key:n.value,value:G(Ne),end:D()}));else{i=d();if(C("punc","(")){var o=T.token;(a=U(ke)).start=o,a.end=D(),t.push(new Ce({start:n,key:i,value:a,end:D()}))}else if(C("punc",":"))O(),t.push(new Te({start:n,key:i,value:m(),end:D()}));else{if("name"==n.type)switch(i){case"async":var a,c=C("operator","*")&&O(),o=(i=d(),T.token);(a=U(c?me:he)).start=o,a.end=D(),t.push(new Ce({start:n,key:i,value:a,end:D()}));continue;case"get":t.push(new Ct({start:n,key:d(),value:y(),end:D()}));continue;case"set":t.push(new Pt({start:n,key:d(),value:y(),end:D()}));continue}L()}}}return O(),new Ae({properties:t})});function d(){var e=T.token;switch(e.type){case"operator":Le[e.value]||L();case"num":case"string":case"name":case"keyword":case"atom":return O(),""+e.value;case"punc":j("[");var t=m();return j("]"),t;default:L()}}function fe(e,t){var n=t.value;switch(n){case"await":T.in_async&&L(t);break;case"super":e=jt;break;case"this":e=Jt;break;case"yield":T.in_generator&&L(t)}return new e({name:""+n,start:t,end:t})}function x(e){"arguments"!=e.name&&"eval"!=e.name&&"let"!=e.name||N(e.start,"Unexpected "+e.name+" in strict mode")}function G(e,t){return C("name")?(e=fe(e,T.token),T.input.has_directive("use strict")&&e instanceof Vt&&x(e),O(),e):(t||I("Name expected"),null)}function Y(e){var t,n=T.token;if(C("punc","["))return O(),t=p("]",!A.strict,!0,function(){return u(e)}),new xe({start:n,elements:t,rest:t.rest||null,end:D()});if(C("punc","{")){O();for(var i=!0,r=[],s=null;!C("punc","}")&&(i?i=!1:j(","),A.strict||!C("punc","}"));){var o=T.token;if(C("punc","[")||Re(P(),"punc",":")){var a=d();j(":"),r.push(new we({start:o,key:a,value:u(e),end:D()}))}else{if(C("operator","...")){O(),s=Y(e);break}a=G(e);C("operator","=")&&(O(),a=new _e({start:a.start,name:a,value:m(),end:D()})),r.push(new we({start:o,key:o.value,value:a,end:D()}))}}return j("}"),new Se({start:n,properties:r,rest:s,end:D()})}return G(e)}function u(e){var t=T.token,e=Y(e);return C("operator","=")?(O(),new _e({start:t,name:e,value:m(),end:D()})):e}function w(e){for(var t=e?e.start:T.token,n=T.input.context().read_template,i=[],r=[];n(i);)O(),r.push(K()),C("punc","}")||L();return O(),new Yt({start:t,expressions:r,strings:i,tag:e,end:D()})}function h(e,t){for(var n=e.start,i=null;;)if(C("operator","?")&&Re(P(),"punc",".")&&(O(),O(),i=e),C("punc","[")){O();var r=K();j("]"),e=new Rt({start:n,optional:i===e,expression:e,property:r,end:D()})}else if(t&&C("punc","("))O(),e=new Ge({start:n,optional:i===e,expression:e,args:p(")",!A.strict),end:D()});else if(i===e||C("punc","."))i!==e&&O(),e=new ut({start:n,optional:i===e,expression:e,property:(r=void 0,r=T.token.value,R("name"),r),end:D()});else{if(!C("punc","`"))break;i&&I("Invalid template on optional chain"),e=w(e)}if(i&&(e.terminal=!0),e instanceof Ge&&!e.pure)for(var s=(n=e.start).comments_before,o=Fe(n,"comments_before_length")?n.comments_before_length:s.length;0<=--o;)if(/[@#]__PURE__/.test(s[o].value)){e.pure=!0;break}return e}function s(e){var t,n,i=T.token;if(T.in_async&&C("name","await"))return T.in_funarg===T.in_function&&I("Invalid use of await in function argument"),T.input.context().regex_allowed=!0,O(),new ze({start:i,expression:s(e),end:D()});if(T.in_generator&&C("name","yield"))return T.in_funarg===T.in_function&&I("Invalid use of yield in function argument"),T.input.context().regex_allowed=!0,O(),n=null,t=!1,C("operator","*")?(O(),n=m(e),t=!0):(C("punc")?cn[T.token.value]:Z())||(n=m(e)),new an({start:i,expression:n,nested:t,end:D()});if(C("operator")&&pn[i.value])return O(),B(),(n=o(tn,i,s(e))).start=i,n.end=D(),n;for(var r=_(!0);C("operator")&&hn[T.token.value]&&!M(T.token);)(r=o(en,T.token,r)).start=i,r.end=T.token,O();return r}function o(e,t,n){var i=t.value;switch(i){case"++":case"--":J(n)||N(t,"Invalid use of "+i+" operator");break;case"delete":n instanceof Ne&&T.input.has_directive("use strict")&&N(n.start,"Calling delete on expression not allowed in strict mode")}return new e({operator:i,expression:n})}var a=function(e,t,n){var i=C("operator")?T.token.value:null,r=null!=(i="in"==i&&n?null:i)?mn[i]:null;return null!=r&&t<r?(O(),r=a(s(n),"**"==i?r-1:r,n),a(new $e({start:e.start,left:e,operator:i,right:r,end:r.end}),t,n)):e};var c=function(e){var t,n=T.token,i=a(s(i=e),0,i);return C("operator","?")?(O(),t=m(),j(":"),new tt({start:n,condition:i,consequent:t,alternative:m(e),end:D()})):i};function J(e){return e instanceof Ot&&!e.optional||e instanceof Ne}function X(e){var t;if(e instanceof E)return n=null,(!(e.elements[e.elements.length-1]instanceof Pe)||(n=X(e.elements.pop().expression))instanceof be||J(n))&&(t=e.elements.map(X),le(t,function(e){return e instanceof _e||e instanceof be||e instanceof Ee||J(e)}))?new xe({start:e.start,elements:t,rest:n,end:e.end}):e;if(e instanceof pe)return(t=X(e.left))instanceof be||J(t)?new _e({start:e.start,name:t,value:e.right,end:e.end}):e;if(!(e instanceof Ae))return e;var n=null;if(e.properties[e.properties.length-1]instanceof Pe&&!((n=X(e.properties.pop().expression))instanceof be||J(n)))return e;for(var i=[],r=0;r<e.properties.length;r++){var s=e.properties[r];if(!(s instanceof Te))return e;var o=X(s.value);if(!(o instanceof _e||o instanceof be||J(o)))return e;i.push(new we({start:s.start,key:s.key,value:o,end:s.end}))}return new Se({start:e.start,properties:i,rest:n,end:e.end})}function m(e){var t=T.token,n=c(e),i=T.token.value;if(C("operator")&&dn[i]){if(J(n)||"="==i&&(n=X(n))instanceof be)return O(),new pe({start:t,left:n,operator:i,right:m(e),end:D()});I("Invalid assignment")}return n}function K(e,t){for(var n=T.token,i=[];;){if(t&&C("operator","...")){O(),i.rest=Y(De);break}if(i.push(m(e)),!C("punc",","))break;if(O(),t&&C("punc",")")&&Re(P(),"punc","=>"))break}return 1!=i.length||i.rest?new Nt({start:n,expressions:i,end:D()}):i[0]}function Q(e){++T.in_loop;e=e();return--T.in_loop,e}if(A.expression)return B(),e=K(),R("eof"),e;var e=T.token,S=[];for(A.module&&(T.in_async=!0,T.input.add_directive("use strict")),T.input.push_directives_stack();!C("eof");)S.push(V(!0));T.input.pop_directives_stack();var k=D()||e,n=A.toplevel;return n?(n.body=n.body.concat(S),n.end=k):n=new Kt({start:e,body:S,end:k}),n}return{is_identifier_string:un,is_identifier_char:B,is_surrogate_pair_head:function(e){return 55296<=e&&e<=56319},is_surrogate_pair_tail:function(e){return 56320<=e&&e<=57343},decode_escape_sequence:V,tokenizer:ln,parse:i.parse=o,KEYWORDS:Le,RESERVED_WORDS:e,KEYWORDS_BEFORE_EXPRESSION:N,KEYWORDS_ATOM:A,UNARY_POSTFIX:hn,PRECEDENCE:mn}}),define("skylark-uglifyjs/output",["./utils","./ast","./parse"],function(O,D,I){"use strict";const{defaults:X,makePredicate:K,noop:$,return_false:H,return_true:Q}=O,{AST_Array:t,AST_Arrow:N,AST_AsyncArrow:L,AST_AsyncDefun:R,AST_AsyncFunction:j,AST_AsyncGeneratorDefun:M,AST_AsyncGeneratorFunction:F,AST_Assign:n,AST_Await:s,AST_Binary:W,AST_BlockStatement:i,AST_Break:q,AST_Call:o,AST_Case:B,AST_Catch:V,AST_Class:a,AST_ClassExpression:z,AST_ClassField:U,AST_ClassGetter:Z,AST_ClassInit:ee,AST_ClassMethod:te,AST_ClassProperty:ne,AST_ClassSetter:ie,AST_Conditional:G,AST_Const:r,AST_Constant:re,AST_Continue:se,AST_Debugger:oe,AST_Default:ae,AST_DefaultValue:c,AST_Definitions:ce,AST_DestructuredArray:ue,AST_DestructuredKeyVal:fe,AST_DestructuredObject:le,AST_Destructured:pe,AST_Directive:he,AST_Do:de,AST_Dot:me,AST_EmptyStatement:u,AST_Exit:ge,AST_ExportDeclaration:_e,AST_ExportDefault:ve,AST_ExportForeign:ye,AST_ExportReferences:be,AST_Finally:xe,AST_For:we,AST_ForAwaitOf:Se,AST_ForEnumeration:ke,AST_ForIn:Ee,AST_ForOf:Ae,AST_Function:Te,AST_GeneratorDefun:Ce,AST_GeneratorFunction:Pe,AST_Hole:Oe,AST_If:De,AST_Import:Ie,AST_IterationStatement:Ne,AST_Jump:Le,AST_LabeledStatement:Re,AST_Lambda:je,AST_Let:Me,AST_New:f,AST_Node:Y,AST_Number:Fe,AST_Object:qe,AST_ObjectGetter:Be,AST_ObjectKeyVal:Ve,AST_ObjectMethod:ze,AST_ObjectProperty:Ue,AST_ObjectSetter:$e,AST_PropAccess:l,AST_RegExp:He,AST_Return:We,AST_Scope:Ge,AST_Sequence:Ye,AST_SimpleStatement:Je,AST_Spread:Xe,AST_Statement:Ke,AST_StatementWithBody:Qe,AST_String:Ze,AST_Sub:et,AST_Switch:tt,AST_SwitchBranch:nt,AST_Symbol:p,AST_SymbolExport:it,AST_SymbolFunarg:rt,AST_SymbolImport:st,AST_Template:h,AST_Throw:ot,AST_Toplevel:at,AST_Try:ct,AST_Unary:d,AST_UnaryPostfix:ut,AST_UnaryPrefix:ft,AST_Var:lt,AST_VarDef:pt,AST_While:ht,AST_With:dt,AST_Yield:J,TreeWalker:mt,is_arrow:gt,is_generator:_t,is_async:vt,first_in_statement:yt,root_expr:bt}=D,{is_identifier_char:xt,is_identifier_string:wt,is_surrogate_pair_head:St,is_surrogate_pair_tail:kt,PRECEDENCE:Et,RESERVED_WORDS:At}=I;function Tt(e){return"comment2"==e.type&&/@preserve|@license|@cc_on/i.test(e.value)}function Ct(c){c=X(c,{annotations:!1,ascii_only:!1,beautify:!1,braces:!1,comments:!1,extendscript:!1,galio:!1,ie:!1,indent_level:4,indent_start:0,inline_script:!0,keep_quoted_props:!1,max_line_len:!1,preamble:null,preserve_line:!1,quote_keys:!1,quote_style:0,semicolons:!0,shebang:!0,source_map:null,v8:!1,webkit:!1,width:80,wrap_iife:!1},!0);var t,u=H;function e(e){if("number"==typeof e)return new Array(e+1).join(" ");if(!e)return"";if(/^\s*$/.test(e))return e;throw new Error("unsupported indentation: "+JSON.stringify(""+e))}c.comments&&(t=c.comments,"string"==typeof c.comments&&/^\/.*\/[a-zA-Z]*$/.test(c.comments)&&(L=c.comments.lastIndexOf("/"),t=new RegExp(c.comments.substr(1,L-1),c.comments.substr(L+1))),u=t instanceof RegExp?function(e){return"comment5"!=e.type&&t.test(e.value)}:"function"==typeof t?function(e){return"comment5"!=e.type&&t(this,e)}:"some"===t?Tt:Q);var r,s,o,a,f,l,n,p=0,h=1,i=e(c.indent_start),d=e(c.indent_level),j=d.length+1>>1,m=0,g=!0,_=c.source_map&&[],v=!1,y=!1,b="";function x(){f=a=!1,n=[];var e=l;return l=r="",e}x();var w=c.ascii_only?function(e,n){return(e=n?e.replace(/[\ud800-\udbff][\udc00-\udfff]/g,function(e){return"\\u{"+(e.charCodeAt(0)-55232<<10|e.charCodeAt(1)-56320).toString(16)+"}"}):e).replace(/[\u0000-\u001f\u007f-\uffff]/g,function(e){var t=e.charCodeAt(0).toString(16);if(t.length<=2&&!n){for(;t.length<2;)t="0"+t;return"\\x"+t}for(;t.length<4;)t="0"+t;return"\\u"+t})}:function(e){for(var t="",n=0,i=0;n<e.length;n++){var r=e.charCodeAt(n);if(St(r)){if(kt(e.charCodeAt(n+1))){n++;continue}}else if(!kt(r))continue;t+=e.slice(i,n)+"\\u"+r.toString(16),i=n+1}return 0==i?e:t+e.slice(i)};function S(e){return"'"+e.replace(/\x27/g,"\\'")+"'"}function k(e){return'"'+e.replace(/\x22/g,'\\"')+'"'}var M=[null,S,k,function(e,t){return("'"==t?S:k)(e)}][c.quote_style]||function(e,t,n,i){return(i<n?S:k)(e)};function E(n,e){var i=0,r=0;return n=n.replace(/[\\\b\f\n\r\v\t\x22\x27\u2028\u2029\0\ufeff]/g,function(e,t){switch(e){case'"':return++i,'"';case"'":return++r,"'";case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\v":return c.ie?"\\x0B":"\\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case"\ufeff":return"\\ufeff";case"\0":return/[0-9]/.test(n.charAt(t+1))?"\\x00":"\\0"}return e}),M(w(n),e,i,r)}var F=_?function(t,n){_.forEach(function(e){e.line+=t,e.col+=n})}:$,A=_?function(){_.forEach(function(e){c.source_map.add(e.token.file,e.line,e.col,e.token.line,e.token.col,e.name||"name"!=e.token.type?e.name:e.token.value)}),_=[]}:$;function T(e){b+=l.slice(0,m);var t=(l=l.slice(m)).length;for(F(e,t-p),h+=e,p=t;e--;)b+="\n"}var C=c.max_line_len?function(e){g?p>c.max_line_len&&Y.warn("Output exceeds {max_line_len} characters",c):(p>c.max_line_len&&(T(1),g=!0),(g||e)&&A())}:$,q=K("( [ + * / - , .");function P(e,t,n){return xt(e)&&(xt(t)||"\\"==t)||"/"==t&&t==e||("+"==t||"-"==t)&&t==r||"--"==r&&">"==t||"!"==r&&"--"==n||"/"==e&&("in"==n||"instanceof"==n)}var O=c.beautify||c.comments||c.max_line_len||c.preserve_line||c.shebang||!c.semicolons||c.source_map||c.width?function(e){var t=e.charAt(0),n=(v&&t&&(v=!1,"\n"!=t)&&(O("\n"),I()),y&&t&&(y=!1,/[\s;})]/.test(t)||D()),r.slice(-1)),i=(f&&(f=!1,":"==n&&"}"==t||";"!=n&&(!t||";}".indexOf(t)<0))&&((i=q[t])||c.semicolons?(l+=";",p++,g||(C(),g&&!i&&";"==l&&(l="",p=0)),m==l.length-1&&m++):(C(),l+="\n",h++,p=0,/^\s+$/.test(e)&&(f=!0)),c.beautify||(a=!1)),a&&(P(n,t,e)&&(l+=" ",p++),"<"==n&&"!"==e||(a=!1)),o&&(_.push({token:o,name:s,line:h,col:p}),o=!1,g)&&A(),l+=e,e.split(/\r?\n/)),t=i.length-1;h+=t,p+=i[0].length,0<t&&(C(),p=i[t].length),r=e}:function(e){var t=e.charAt(0),n=r.slice(-1);f&&(f=!1,":"==n&&"}"==t||(!t||";}".indexOf(t)<0)&&";"!=n)&&(l+=";",a=!1),a&&(P(n,t,e)&&(l+=" "),"<"==n&&"!"==e||(a=!1)),l+=e,r=e},D=c.beautify?function(){O(" ")}:function(){a=!0},I=c.beautify?function(e){v&&O("\n"),O(e?i.slice(0,-j):i)}:$,B=c.beautify?function(e){var t=i;i+=d,e(),i=t}:function(e){e()},N=c.max_line_len||c.preserve_line?function(){C(),m=l.length,g=!1}:$,V=c.beautify?function(){O("\n"),m=l.length}:N,L=c.beautify?function(){O(";")}:function(){f=!0};var z=_?function(e,t){o=e,s=t}:$;function R(e,t){v||(!e.nlb||!t&&/(^|\n) *$/.test(l)?t&&(y=!0):v=!0)}function U(e){var t=e.value.replace(/[@#]__PURE__/g," ");return(!/^\s*$/.test(t)||/^\s*$/.test(e.value))&&(/comment[134]/.test(e.type)?(O("//"+t),v=!0):"comment2"==e.type&&O("/*"+t+"*/"),1)}return{get:function(){return g||C(!0),b+l},reset:x,indent:I,should_break:c.beautify&&c.width?function(){return p>=c.width}:H,has_parens:function(){return"("==r.slice(-1)},newline:V,print:O,space:D,comma:function(){N(),O(","),N(),D()},colon:function(){O(":"),D()},last:function(){return r},semicolon:L,force_semicolon:function(){f&&O(";"),O(";")},to_utf8:w,print_name:function(e){O(w(e.toString(),!0))},print_string:c.inline_script?function(e,t){e=E(e,t).replace(/<\x2f(script)([>\/\t\n\f\r ])/gi,"<\\/$1$2"),O(e.replace(/\x3c!--/g,"\\x3c!--").replace(/--\x3e/g,"--\\x3e"))}:function(e,t){O(E(e,t))},with_indent:B,with_block:function(e,t){O("{"),V(),B(e),z(t),I(),O("}")},with_parens:function(e){O("("),N(),e(),N(),O(")")},with_square:function(e){O("["),N(),e(),N(),O("]")},add_mapping:z,option:function(e){return c[e]},prepend_comments:c.comments||c.shebang?function(e){var n,i=this;e instanceof ge?n=e.value:e instanceof J&&(n=e.expression);var r,t,s=(s=a(e))||[],o=(n&&((r=new mt(function(e){if(n=e,!((t=r.parent())instanceof W?t.left===n:"Call"==t.TYPE?t.expression===n:t instanceof G?t.condition===n:t instanceof me?t.expression===n:t instanceof ge||(t instanceof Ye?t.expressions[0]===n:t instanceof et?t.expression===n:t instanceof ut||t instanceof J)))return!0;var t,n=a(e);n&&(s=s.concat(n))})).push(e),n.walk(r)),1==h&&0==p&&(0<s.length&&c.shebang&&"comment5"==s[0].type&&(O("#!"+s.shift().value+"\n"),I()),t=c.preamble)&&O(t.replace(/\r\n?|\u2028|\u2029|(^|\S)\s*$/g,"$1\n")),s=s.filter(u,e),!1);function a(e){var t=e.start;if(!t){if(!n)return;e.start=t=new AST_Token}e=t.comments_before;if(!e){if(!n)return;t.comments_before=e=[]}if(e._dumped!==i)return e._dumped=i,e}s.forEach(function(e,t){R(e,t),U(e)&&(o=!0)}),o&&R(e.start,!0)}:$,append_comments:c.comments?function(e,n){var t=e.end;t&&(t=t[n?"comments_before":"comments_after"])&&t._dumped!==this&&(e instanceof Ke||all(t,function(e){return!/comment[134]/.test(e.type)}))&&(t._dumped=this,t.filter(u,e).forEach(function(e,t){R(e,t||!n),U(e)}))}:$,push_node:function(e){n.push(e)},pop_node:c.preserve_line?function(){var e=n.pop();e.start&&e.start.line>h&&T(e.start.line-h)}:function(){n.pop()},parent:function(e){return n[n.length-2-(e||0)]}}}function e(e,t){e.DEFMETHOD("_codegen",t)}function m(e,t){e.DEFMETHOD("needs_parens",t)}function g(e){var t=e.parent();return!e.has_parens()&&yt(e,!1,!0)?this.name||!(t instanceof ve):!!(e.option("webkit")&&t instanceof l&&t.expression===this)||!!(e.option("wrap_iife")&&t instanceof o&&t.expression===this)||void 0}function Pt(e){return!e.has_parens()&&yt(e,!0)}function Ot(e){e=e.parent();return e instanceof W?"**"==e.operator&&e.left===this:e instanceof o?e.expression===this:e instanceof a||(e instanceof l?e.expression===this:e instanceof h?e.tag===this:void 0)}function Dt(e,t){return!!e.terminal&&(t instanceof o||t instanceof l)&&t.expression===e}function _(e,t){t=t.parent();return t instanceof s||(t instanceof W?!(t instanceof n):t instanceof o?t.expression===e:t instanceof a||(t instanceof G?t.condition===e:t instanceof l?t.expression===e:t instanceof h?t.tag===e:t instanceof d||void 0))}function It(e,n,i,t){var r=e.length-1,s=t,t=P;e.forEach(function(e,t){s&&(e instanceof he?"use asm"==e.value&&(P=!0):e instanceof u||(e instanceof Je&&e.body instanceof Ze&&i.force_semicolon(),s=!1)),e instanceof u||(i.indent(),e.print(i),t==r&&n)||(i.newline(),n&&i.newline())}),P=t}function v(e,t){t.print("{"),t.with_indent(function(){t.append_comments(e,!0)}),t.print("}")}function y(e,t,n){0<e.body.length?t.with_block(function(){It(e.body,!1,t,n)},e.end):v(e,t)}function Nt(n,i){return function(e){var t=this;e.print(n),e.space(),e.with_parens(function(){t.init.print(e),e.space(),e.print(i),e.space(),t.object.print(e)}),T(t.body,e)}}function b(e,t){var n=e.value;"*"==n||wt(n)?t.print_name(n):t.print_string(n,e.quote)}function Lt(e,n){n.with_parens(function(){e.argnames.forEach(function(e,t){t&&n.comma(),e.print(n)}),e.rest&&(e.argnames.length&&n.comma(),n.print("..."),e.rest.print(n))})}function Rt(e,t){var n=1==e.argnames.length&&!e.rest&&e.argnames[0];n instanceof rt&&"yield"!=n.name?n.print(t):Lt(e,t),t.space(),t.print("=>"),t.space(),e.value?e.value.print(t):y(e,t,!0)}function x(e,t){e.name&&(t.space(),e.name.print(t)),Lt(e,t),t.space(),y(e,t,!0)}function jt(e){e.print("async"),e.space(),e.print("function"),x(this,e)}function Mt(e){e.print("async"),e.space(),e.print("function*"),x(this,e)}function Ft(e){e.print("function*"),x(this,e)}function qt(e,t){var n=e.value;vt(n)&&(t.print("async"),t.space()),_t(n)&&t.print("*"),k(e,t),x(e.value,t)}function w(n,i){return function(e){e.print(n);var t=this[i];t&&(e.space(),t.print(e)),e.semicolon()}}function Bt(e,t){t.newline(),e.body.forEach(function(e){t.indent(),e.print(t),t.newline()})}function Vt(t){return function(n){n.print(t),n.space(),this.definitions.forEach(function(e,t){t&&n.comma(),e.print(n)});var e=n.parent();e instanceof Ne&&e.init===this||n.semicolon()}}function zt(e,t,n){var i=!1;n&&e.walk(new mt(function(e){return!!i||(e instanceof W&&"in"==e.operator?i=!0:e instanceof Ge&&(!gt(e)||!e.value)||void 0)})),e.print(t,i)}function Ut(e,t){if(t.option("annotations")&&e.pure){var n,i=0,r=e;do{if(n=r,(r=t.parent(i++))instanceof o&&r.expression===n)return}while(r instanceof l&&r.expression===n);t.print("/*@__PURE__*/")}}function $t(e,n){n.with_parens(function(){e.args.forEach(function(e,t){t&&n.comma(),e.print(n)}),n.add_mapping(e.end)})}function S(e,n,i){var t=e.properties;0<t.length?n.with_block(function(){t.forEach(function(e,t){t&&(i||n.print(","),n.newline()),n.indent(),e.print(n)}),n.newline()},e.end):v(e,n)}function k(e,t){var n=e.key;if(n instanceof Y)return t.with_square(function(){n.print(t)});var i=e.start&&e.start.quote;if(t.option("quote_keys")||i&&t.option("keep_quoted_props"))t.print_string(n,i);else if(""+ +n==n&&0<=n)t.print(Wt(n));else if(e.private)t.print_name(n);else{if(At[n]?!t.option("ie"):wt(n))return t.print_name(n),n;t.print_string(n,i)}}function E(t){return function(e){this.static&&(e.print("static"),e.space()),e.print(t),e.space(),k(this,e),x(this.value,e)}}function A(e){var t=e.definition();return t&&t.mangled_name||e.name}function T(e,t){t.option("braces")&&!(e instanceof r||e instanceof Me)?C(e,t):e instanceof u?t.force_semicolon():(t.space(),e.print(t))}function Ht(e,t){return 0<e.args.length||t.option("beautify")}function Wt(e){for(var t,n,i=e.toString(10).replace(/^0\./,".").replace("e+","e"),r=[i],s=(Math.floor(e)===e&&r.push(e<0?"-0x"+(-e).toString(16).toLowerCase():"0x"+e.toString(16).toLowerCase()),(e=/^\.0+/.exec(i))?(t=e[0].length,n=i.slice(t),r.push(n+"e-"+(n.length+t-1))):(e=/[^0]0+$/.exec(i))?(t=e[0].length-1,r.push(i.slice(0,-t)+"e"+t)):(e=/^(\d)\.(\d+)e(-?\d+)$/.exec(i))&&r.push(e[1]+e[2]+"e"+(e[3]-e[2].length)),r),o=s[0],a=o.length,c=1;c<s.length;++c)s[c].length<a&&(a=(o=s[c]).length);return o}function C(e,t){t.space(),e instanceof u?v(e,t):e instanceof i?e.print(t):t.with_block(function(){t.indent(),e.print(t),t.newline()},e.end)}function Gt(e,t){e.forEach(function(e){e.DEFMETHOD("add_source_map",t)})}var P,Yt;return P=!1,Y.DEFMETHOD("print",function(e,t){var n=this;function i(){e.prepend_comments(n),n.add_source_map(e),n._codegen(e),e.append_comments(n)}e.push_node(n),t||n.needs_parens(e)?e.with_parens(i):i(),e.pop_node()}),Yt=Ct({inline_script:!1,shebang:!1,width:!1}),Y.DEFMETHOD("print_to_string",function(e){return e?(e=Ct(e),this.print(e),e.get()):(this.print(Yt),Yt.reset())}),m(Y,H),m(j,g),m(F,g),m(z,g),m(Te,g),m(Pe,g),m(qe,Pt),m(s,Ot),m(d,Ot),m(Ye,function(e){e=e.parent();return e instanceof t||gt(e)&&e.value===this||e instanceof s||e instanceof W||e instanceof o||e instanceof a||e instanceof ne||e instanceof G||e instanceof c||e instanceof fe||e instanceof ve||e instanceof Ae||e instanceof Ue||e instanceof l&&e.expression===this||e instanceof Xe||e instanceof h&&e.tag===this||e instanceof d||e instanceof pt||e instanceof J}),m(W,function(e){var t,n,i,r,e=e.parent();return e instanceof s||(e instanceof W?(t=e.operator,n=Et[t],i=this.operator,(r=Et[i])<n||"??"==t&&("&&"==i||"||"==i)||n==r&&this===e["**"==t?"left":"right"]):e instanceof o?e.expression===this:e instanceof a||(e instanceof l?e.expression===this:e instanceof h?e.tag===this:e instanceof d||void 0))}),m(l,function(e){e=e.parent();return e instanceof f&&e.expression===this&&"Call"==bt(this).TYPE||Dt(this,e)}),m(o,function(e){var t=e.parent();if(t instanceof f)return t.expression===this;if(e.option("webkit")&&this.expression instanceof Te&&t instanceof l&&t.expression===this){e=e.parent(1);if(e instanceof n&&e.left===t)return!0}return Dt(this,t)}),m(f,function(e){return!Ht(this,e)&&((e=e.parent())instanceof o?e.expression===this:e instanceof l||(e instanceof h?e.tag===this:void 0))}),m(Fe,function(e){return!!e.option("galio")&&(e=e.parent())instanceof l&&e.expression===this&&/^0/.test(Wt(this.value))}),m(N,function(e){return _(this,e)}),m(n,function(e){return!!_(this,e)||(e.option("v8")?this.left instanceof pe:this.left instanceof le?Pt(e):void 0)}),m(L,function(e){return _(this,e)}),m(G,function(e){return _(this,e)||e.option("extendscript")&&e.parent()instanceof G}),m(J,function(e){return _(this,e)}),e(he,function(e){var t=this.quote,n=this.value;switch(e.option("quote_style")){case 0:case 2:-1==n.indexOf('"')&&(t='"');break;case 1:-1==n.indexOf("'")&&(t="'")}e.print(t+n+t),e.semicolon()}),e(oe,function(e){e.print("debugger"),e.semicolon()}),e(at,function(e){It(this.body,!0,e,!0),e.print("")}),e(Re,function(e){this.label.print(e),e.colon(),this.body.print(e)}),e(Je,function(e){this.body.print(e),e.semicolon()}),e(i,function(e){y(this,e)}),e(u,function(e){e.semicolon()}),e(de,function(e){var t=this;e.print("do"),C(t.body,e),e.space(),e.print("while"),e.space(),e.with_parens(function(){t.condition.print(e)}),e.semicolon()}),e(ht,function(e){var t=this;e.print("while"),e.space(),e.with_parens(function(){t.condition.print(e)}),T(t.body,e)}),e(we,function(e){var t=this;e.print("for"),e.space(),e.with_parens(function(){t.init?(t.init instanceof ce?t.init.print(e):zt(t.init,e,!0),e.print(";"),e.space()):e.print(";"),t.condition?(t.condition.print(e),e.print(";"),e.space()):e.print(";"),t.step&&t.step.print(e)}),T(t.body,e)}),e(Se,Nt("for await","of")),e(Ee,Nt("for","in")),e(Ae,Nt("for","of")),e(dt,function(e){var t=this;e.print("with"),e.space(),e.with_parens(function(){t.expression.print(e)}),T(t.body,e)}),e(_e,function(e){e.print("export"),e.space(),this.body.print(e)}),e(ve,function(e){e.print("export"),e.space(),e.print("default"),e.space();var t=this.body;t.print(e),t instanceof z&&!t.name||t instanceof AST_DefClass||t instanceof AST_LambdaDefinition||t instanceof AST_LambdaExpression&&!t.name&&!gt(t)||e.semicolon()}),e(ye,function(n){var i=this,t=(n.print("export"),n.space(),i.keys.length);function r(e){var t=i.aliases[e],e=i.keys[e];b(e,n),t.value!=e.value&&(n.space(),n.print("as"),n.space(),b(t,n))}0==t?v(i,n):"*"==i.keys[0].value?r(0):n.with_block(function(){n.indent(),r(0);for(var e=1;e<t;e++)n.print(","),n.newline(),n.indent(),r(e);n.newline()},i.end),n.space(),n.print("from"),n.space(),i.path.print(n),n.semicolon()}),e(be,function(e){e.print("export"),e.space(),S(this,e),e.semicolon()}),e(Ie,function(e){var t=this;e.print("import"),e.space(),t.default&&t.default.print(e),t.all&&(t.default&&e.comma(),t.all.print(e)),t.properties&&(t.default&&e.comma(),S(t,e)),(t.all||t.default||t.properties)&&(e.space(),e.print("from"),e.space()),t.path.print(e),e.semicolon()}),e(N,function(e){Rt(this,e)}),e(L,function(e){e.print("async"),e.space(),Rt(this,e)}),e(je,function(e){e.print("function"),x(this,e)}),e(R,jt),e(j,jt),e(M,Mt),e(F,Mt),e(Ce,Ft),e(Pe,Ft),e(a,function(e){e.print("class"),this.name&&(e.space(),this.name.print(e)),this.extends&&(e.space(),e.print("extends"),e.space(),this.extends.print(e)),e.space(),S(this,e,!0)}),e(U,function(e){this.static&&(e.print("static"),e.space()),k(this,e),this.value&&(e.space(),e.print("="),e.space(),this.value.print(e)),e.semicolon()}),e(Z,E("get")),e(ie,E("set")),e(te,function(e){this.static&&(e.print("static"),e.space()),qt(this,e)}),e(ee,function(e){e.print("static"),e.space(),y(this.value,e)}),e(We,w("return","value")),e(ot,w("throw","value")),e(q,w("break","label")),e(se,w("continue","label")),e(De,function(e){var t=this;e.print("if"),e.space(),e.with_parens(function(){t.condition.print(e)}),t.alternative?(function(e,t){var n=e.body;if(t.option("braces")&&!(n instanceof r||n instanceof Me)||t.option("ie")&&n instanceof de)return C(n,t);if(!n)return t.force_semicolon();for(;;)if(n instanceof De){if(!n.alternative)return C(e.body,t);n=n.alternative}else{if(!(n instanceof Qe))break;n=n.body}T(e.body,t)}(t,e),e.space(),e.print("else"),t.alternative instanceof De?(e.space(),t.alternative.print(e)):T(t.alternative,e)):T(t.body,e)}),e(tt,function(n){var e=this,i=(n.print("switch"),n.space(),n.with_parens(function(){e.expression.print(n)}),n.space(),e.body.length-1);i<0?v(e,n):n.with_block(function(){e.body.forEach(function(e,t){n.indent(!0),e.print(n),t<i&&0<e.body.length&&n.newline()})},e.end)}),e(ae,function(e){e.print("default:"),Bt(this,e)}),e(B,function(e){e.print("case"),e.space(),this.expression.print(e),e.print(":"),Bt(this,e)}),e(ct,function(e){e.print("try"),e.space(),y(this,e),this.bcatch&&(e.space(),this.bcatch.print(e)),this.bfinally&&(e.space(),this.bfinally.print(e))}),e(V,function(e){var t=this;e.print("catch"),t.argname&&(e.space(),e.with_parens(function(){t.argname.print(e)})),e.space(),y(t,e)}),e(xe,function(e){e.print("finally"),e.space(),y(this,e)}),e(r,Vt("const")),e(Me,Vt("let")),e(lt,Vt("var")),e(pt,function(e){var t;this.name.print(e),this.value&&(e.space(),e.print("="),e.space(),t=(t=e.parent(1))instanceof we||t instanceof ke,zt(this.value,e,t))}),e(c,function(e){this.name.print(e),e.space(),e.print("="),e.space(),this.value.print(e)}),e(o,function(e){Ut(this,e),this.expression.print(e),this.optional&&e.print("?."),$t(this,e)}),e(f,function(e){Ut(this,e),e.print("new"),e.space(),this.expression.print(e),Ht(this,e)&&$t(this,e)}),e(Ye,function(n){this.expressions.forEach(function(e,t){0<t&&(n.comma(),n.should_break())&&(n.newline(),n.indent()),e.print(n)})}),e(me,function(e){var t=this,n=t.expression,i=(n.print(e),t.property);e.option("ie")&&At[i]||t.quoted&&e.option("keep_quoted_props")?(t.optional&&e.print("?."),e.with_square(function(){e.add_mapping(t.end),e.print_string(i)})):(n instanceof Fe&&!/[ex.)]/i.test(e.last())&&e.print("."),e.print(t.optional?"?.":"."),e.add_mapping(t.end),e.print_name(i))}),e(et,function(e){var t=this;t.expression.print(e),t.optional&&e.print("?."),e.with_square(function(){t.property.print(e)})}),e(Xe,function(e){e.print("..."),this.expression.print(e)}),e(ft,function(e){var t=this.operator,n=this.expression;e.print(t),(/^[a-z]/i.test(t)||/[+-]$/.test(t)&&n instanceof ft&&/^[+-]/.test(n.operator))&&e.space(),n.print(e)}),e(ut,function(e){this.expression.print(e),e.add_mapping(this.end),e.print(this.operator)}),e(W,function(e){this.left.print(e),e.space(),e.print(this.operator),e.space(),this.right.print(e)}),e(G,function(e){this.condition.print(e),e.space(),e.print("?"),e.space(),this.consequent.print(e),e.space(),e.colon(),this.alternative.print(e)}),e(s,function(e){e.print("await"),e.space(),this.expression.print(e)}),e(J,function(e){e.print(this.nested?"yield*":"yield"),this.expression&&(e.space(),this.expression.print(e))}),e(t,function(n){var e=this.elements,i=e.length;n.with_square(0<i?function(){n.space(),e.forEach(function(e,t){t&&n.comma(),e.print(n),t===i-1&&e instanceof Oe&&n.comma()}),n.space()}:$)}),e(ue,function(n){var e=this.elements,t=e.length,i=this.rest;n.with_square(t||i?function(){n.space(),e.forEach(function(e,t){t&&n.comma(),e.print(n)}),i?(t&&n.comma(),n.print("..."),i.print(n)):e[t-1]instanceof Oe&&n.comma(),n.space()}:$)}),e(fe,function(e){var t=k(this,e),n=this.value;if(t)if(n instanceof c){if(n.name instanceof p&&t==A(n.name))return e.space(),e.print("="),e.space(),void n.value.print(e)}else if(n instanceof p&&t==A(n))return;e.colon(),n.print(e)}),e(le,function(n){var e=this.properties,t=e.length,i=this.rest;t||i?n.with_block(function(){e.forEach(function(e,t){t&&(n.print(","),n.newline()),n.indent(),e.print(n)}),i&&(t&&(n.print(","),n.newline()),n.indent(),n.print("..."),i.print(n)),n.newline()},this.end):v(this,n)}),e(qe,function(e){S(this,e)}),e(Ve,function(e){k(this,e),e.colon(),this.value.print(e)}),e(ze,function(e){qt(this,e)}),e(Be,E("get")),e($e,E("set")),e(p,function(e){e.print_name(A(this))}),e(it,function(e){var t=A(this),n=(e.print_name(t),this.alias);n.value!=t&&(e.space(),e.print("as"),e.space(),b(n,e))}),e(st,function(e){var t=A(this),n=this.key;n.value&&n.value!=t&&(b(n,e),e.space(),e.print("as"),e.space()),e.print_name(t)}),e(Oe,$),e(h,function(e){this.tag&&this.tag.print(e),e.print("`");for(var t=0;t<this.expressions.length;t++)e.print(this.strings[t]),e.print("${"),this.expressions[t].print(e),e.print("}");e.print(this.strings[t]),e.print("`")}),e(re,function(e){e.print(""+this.value)}),e(Ze,function(e){e.print_string(this.value,this.quote)}),e(Fe,function(e){var t=this.start;P&&t&&null!=t.raw?e.print(t.raw):e.print(Wt(this.value))}),e(He,function(e){var t=this.value,n=t.toString(),i=n.lastIndexOf("/");t.raw_source?n="/"+t.raw_source+n.slice(i):1==i?n="/(?:)"+n.slice(i):n.indexOf("/",1)<i&&(n="/"+n.slice(1,i).replace(/\\\\|[^/]?\//g,function(e){return"\\"==e[0]?e:e.slice(0,-1)+"\\/"})+n.slice(i)),e.print(e.to_utf8(n).replace(/\\(?:\0(?![0-9])|[^\0])/g,function(e){switch(e[1]){case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\t";case"\b":return"\b";case"\f":return"\f";case"\0":return"\0";case"\v":return"\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}}).replace(/[\n\r\u2028\u2029]/g,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}}))}),Gt([Y,Re],$),Gt([t,s,i,V,re,oe,ce,pe,he,xe,Le,je,f,qe,Xe,Qe,p,tt,nt,ct,ft,J],function(e){e.add_mapping(this.start)}),Gt([ne,fe,Ue],function(e){"string"==typeof this.key&&e.add_mapping(this.start,this.key)}),{OutputStream:Ct}}),define("skylark-uglifyjs/scope",["./utils","./ast","./parse"],function(j,M,F){"use strict";const{defaults:t,find_if:q,member:B,push_uniq:m,return_false:V,return_this:z,DEF_BITPROPS:U,makePredicate:n,Dictionary:u}=j,{AST_Arrow:$,AST_Assign:H,AST_AsyncArrow:W,AST_Block:G,AST_Catch:Y,AST_Conditional:J,AST_DefClass:X,AST_Definitions:K,AST_DefaultValue:Q,AST_Defun:Z,AST_Destructured:g,AST_DestructuredKeyVal:ee,AST_Dot:i,AST_ExportDeclaration:_,AST_ForEnumeration:te,AST_IterationStatement:ne,AST_Label:v,AST_LabeledStatement:f,AST_Lambda:y,AST_LambdaDefinition:b,AST_LambdaExpression:ie,AST_LoopControl:re,AST_Node:se,AST_PropAccess:oe,AST_Scope:x,AST_Sequence:r,AST_String:ae,AST_Sub:ce,AST_SwitchBranch:ue,AST_Symbol:w,AST_SymbolCatch:S,AST_SymbolClass:fe,AST_SymbolConst:k,AST_SymbolDeclaration:le,AST_SymbolDefClass:pe,AST_SymbolDefun:E,AST_SymbolFunarg:A,AST_SymbolImport:he,AST_SymbolLambda:T,AST_SymbolLet:C,AST_SymbolRef:de,AST_SymbolVar:P,AST_Toplevel:l,AST_Try:me,AST_VarDef:ge,AST_With:_e,TreeWalker:e,walk_body:O,walk_lambda:ve,AST_BlockScope:D,AST_Unary:ye,is_arrow:be}=M,p=F["RESERVED_WORDS"];function s(e,t,n,i){this._bits=0,this.defun=void 0,this.eliminated=0,this.id=e,this.init=i,this.mangled_name=null,this.name=n.name,this.orig=[n],this.references=[],this.replaced=0,this.safe_ids=void 0,this.scope=t}function xe(e){return e.orig[0]instanceof A||e.orig[1]instanceof A}s.prototype={forEach:function(e){this.orig.forEach(e),this.references.forEach(e)},mangle:function(e){var t,n;this.mangled_name||((t=this.global&&e.cache&&e.cache.props)&&t.has(this.name)?this.mangled_name=t.get(this.name):this.unmangleable(e)?h(this.scope,e).set(this.name,!0):(n=this.redefined(),this.mangled_name=n?n.mangled_name||n.name:function(e,n){var t,i=e.scope,r=h(i,n),s=i.cname_holes,o=new u,a=[i];e.forEach(function(e){var t=e.scope;do{if(B(t,a))break;h(t,n).each(function(e,t){o.set(t,e)}),a.push(t)}while(t=t.parent_scope)});for(var c=0;c<s.length;c++)if(t=L(s[c]),!o.has(t))return s.splice(c,1),r.set(t,!0),t;for(;;)if(t=L(++i.cname),!(r.has(t)||p[t]||n.reserved.has[t])){if(!o.has(t))break;s.push(i.cname)}return r.set(t,!0),t}(this,e),t&&t.set(this.name,this.mangled_name)))},redefined:function(){var t,e=this.defun;if(e)return t=this.name,(e=e.variables.get(t)||e instanceof l&&e.globals.get(t)||this.orig[0]instanceof k&&q(function(e){return e.name==t},e.enclosed))&&e!==this?e.redefined()||e:void 0},unmangleable:function(e){if(this.exported)return!0;if(this.undeclared)return!0;if(!e.eval&&this.scope.pinned())return!0;if(e.keep_fargs&&xe(this))return!0;if(e.keep_fnames){var t=this.orig[0];if(t instanceof fe)return!0;if(t instanceof pe)return!0;if(t instanceof E)return!0;if(t instanceof T)return!0}return!(e.toplevel||!this.global)}},U(s,["const_redefs","cross_loop","direct_access","exported","global","undeclared"]);var we=n("delete ++ --");function Se(e,t){return t instanceof H?t.left===e&&e:t instanceof Q?t.name===e&&e:t instanceof g||t instanceof ee?e:t instanceof te?t.init===e&&e:t instanceof ye?we[t.operator]&&t.expression:void 0}function ke(e,t){e.enclosed=[],e.parent_scope=t,e.functions=new u,e.variables=new u,t&&(e.make_def=t.make_def)}function o(e,t){ke(e,t),e.uses_eval=!1,e.uses_with=!1}function h(e,t){var n,i=e.names_in_use;return i||(e.cname=-1,e.cname_holes=[],e.names_in_use=i=new u,n=t.cache&&t.cache.props,e.enclosed.forEach(function(e){e.unmangleable(t)&&i.set(e.name,!0),e.global&&n&&n.has(e.name)&&i.set(n.get(e.name),!0)})),i}function d(e){return e=t(e,{eval:!1,ie:!1,keep_fargs:!1,keep_fnames:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1}),Array.isArray(e.reserved)||(e.reserved=[]),m(e.reserved,"arguments"),e.reserved.has=n(e.reserved),e}l.DEFMETHOD("figure_out_scope",function(f){f=t(f,{cache:null,ie:!1});var l=this,o=null,a=!1,n=0,c=l.parent_scope=null,p=new e(function(i,e){var t,n;if(i instanceof X)return t=a,a=p.parent()instanceof _,i.name.walk(p),a=t,s(function(){i.extends&&i.extends.walk(p),i.properties.forEach(function(e){e.walk(p)})}),!0;if(i instanceof K)return t=a,a=p.parent()instanceof _,e(),a=t,!0;if(i instanceof b)return t=a,a=p.parent()instanceof _,i.name.walk(p),a=t,s(function(){i.argnames.forEach(function(e){e.walk(p)}),i.rest&&i.rest.walk(p),O(i,p)}),!0;if(i instanceof ue)return i.init_vars(c),e(),!0;if(i instanceof me)return s(function(){O(i,p)}),i.bcatch&&i.bcatch.walk(p),i.bfinally&&i.bfinally.walk(p),!0;if(i instanceof _e){for(var r=c;!(r=r.resolve()).uses_with&&(r.uses_with=!0,r=r.parent_scope););return s(e),!0}if(i instanceof D)return s(e),!0;function s(e){i.init_vars(c);var t=o,n=c;i instanceof x&&(o=i),c=i,e(),c=n,o=t}i instanceof w&&(i.scope=c),i instanceof v&&((i.thedef=i).references=[]),i instanceof S?c.def_variable(i).defun=o:i instanceof k?((n=c.def_variable(i)).defun=o,a&&(n.exported=!0)):i instanceof E?(n=o.def_function(i,p.parent()),a&&(n.exported=!0)):i instanceof A?o.def_variable(i):i instanceof T?(n=o.def_function(i,"arguments"==i.name?void 0:o),f.ie&&"arguments"!=i.name&&(n.defun=o.parent_scope.resolve())):i instanceof C?(n=c.def_variable(i),a&&(n.exported=!0)):i instanceof P&&(n=o.def_variable(i,i instanceof he?void 0:null),a)&&(n.exported=!0)}),h=(l.make_def=function(e,t){return new s(++n,this,e,t)},l.walk(p),l.globals=new u,[]),p=new e(function(e){if(e instanceof Y)return e.argname instanceof g?(h.push(e),e.argname.walk(p),h.pop(),O(e,p),!0):void 0;if(e instanceof y)return h.push(e),e.name&&e.name.walk(p),e.argnames.forEach(function(e){e.walk(p)}),e.rest&&e.rest.walk(p),h.pop(),ve(e,p),!0;if(e instanceof re)return e.label&&e.label.thedef.references.push(e),!0;if(e instanceof le){var t,n=e.definition();if(n.preinit=n.references.length,e instanceof S){if(t=n.redefined())for(var i=e.scope;i&&m(i.enclosed,t)&&i!==t.scope;i=i.parent_scope);}else e instanceof k?(t=n.redefined())&&(t.const_redefs=!0):n.scope!==e.scope&&(e instanceof E||e instanceof A||e instanceof P)&&(e.mark_enclosed(f),t=e.scope.find_variable(e.name),e.thedef!==t)&&((e.thedef=t).orig.push(e),e.mark_enclosed(f));return"arguments"!=e.name||(r=e instanceof P&&p.parent())instanceof ge&&!r.value||(o=e.scope.resolve().find_variable("arguments"))&&d(o)&&(o.scope.uses_arguments=3),!0}if(e instanceof de){for(var r,s=e.name,o=e.scope.find_variable(s),a=h.length;0<a&&o&&!((a=h.lastIndexOf(o.scope,a-1))<0);){var c=o.orig[0];if(c instanceof S||c instanceof A||c instanceof T){e.in_arg=!0;break}o=o.scope.parent_scope.find_variable(s)}if(o?"arguments"==s&&d(o)&&(Se(e,r=p.parent())?o.scope.uses_arguments=3:o.scope.uses_arguments<2&&!(r instanceof oe&&r.expression===e)?o.scope.uses_arguments=2:o.scope.uses_arguments||(o.scope.uses_arguments=!0)):o=l.def_global(e),"eval"==s)if("Call"==(r=p.parent()).TYPE&&r.expression===e)for(i=e.scope;!(i=i.resolve()).uses_eval&&(i.uses_eval=!0,i=i.parent_scope););else o.undeclared&&(l.uses_eval=!0);if(o.init instanceof b&&o.scope!==o.init.name.scope){var u=e.scope;do{if(u===o.init.name.scope)break}while(u=u.parent_scope);u||(o.init=void 0)}return e.thedef=o,e.reference(f),!0}});function d(e){return e.orig[0]instanceof A&&!(e.orig[1]instanceof A||e.orig[2]instanceof A)&&!be(e.scope)}function i(e,t){var n,i,r=e.name,s=e.thedef;if(all(s.orig,function(e){return!(e instanceof k||e instanceof C)}))return(n=t.find_variable(r))?(i=n.redefined())&&(n=i):n=l.globals.get(r),n?n.orig.push(e):n=t.def_variable(e),n.undeclared&&l.variables.set(r,n),"arguments"==r&&d(s)&&e instanceof T||(s.defun=n.scope,s.forEach(function(e){e.redef=s,e.thedef=n,e.reference(f)})),1}l.walk(p),f.ie&&l.walk(new e(function(e){var t,n;return e instanceof S?(t=(n=e.thedef).defun,i(e,t="arguments"!=n.name&&t.name instanceof T&&t.name.name==n.name?t.parent_scope.resolve():t),!0):e instanceof T?(n=e.thedef,i(e,e.scope.parent_scope.resolve())?void 0!==e.thedef.init?e.thedef.init=!1:n.init&&(e.thedef.init=n.init):n.defun=void 0,!0):void 0}))}),l.DEFMETHOD("def_global",function(e){var t=this.globals,n=e.name;return t.has(n)?t.get(n):((e=this.make_def(e)).undeclared=!0,e.global=!0,t.set(n,e),e)}),D.DEFMETHOD("init_vars",function(e){ke(this,e)}),x.DEFMETHOD("init_vars",function(e){o(this,e)}),$.DEFMETHOD("init_vars",function(e){return o(this,e),this}),W.DEFMETHOD("init_vars",function(e){o(this,e)}),y.DEFMETHOD("init_vars",function(e){return o(this,e),this.uses_arguments=!1,this.def_variable(new A({name:"arguments",scope:this,start:this.start,end:this.end})),this}),w.DEFMETHOD("mark_enclosed",function(e){for(var t=this.definition(),n=this.scope;n&&m(n.enclosed,t)&&(e?(e.keep_fargs&&n instanceof y&&n.each_argname(function(e){m(t.scope.enclosed,e.definition())}),e.keep_fnames&&n.functions.each(function(e){m(t.scope.enclosed,e)})):n._var_names=void 0,n!==t.scope);n=n.parent_scope);}),w.DEFMETHOD("reference",function(e){this.definition().references.push(this),this.mark_enclosed(e)}),D.DEFMETHOD("find_variable",function(e){return this.variables.get(e)||this.parent_scope&&this.parent_scope.find_variable(e)}),D.DEFMETHOD("def_function",function(e,t){var n=this.def_variable(e,t);return(!n.init||n.init instanceof b)&&(n.init=t),this.functions.set(e.name,n),n}),D.DEFMETHOD("def_variable",function(e,t){var n=this.variables.get(e.name);return n?(n.orig.push(e),n.init instanceof ie&&(n.init=t)):(n=this.make_def(e,t),this.variables.set(e.name,n),n.global=!this.parent_scope),e.thedef=n}),w.DEFMETHOD("unmangleable",function(e){var t=this.definition();return!t||t.unmangleable(e)}),v.DEFMETHOD("unmangleable",V),w.DEFMETHOD("definition",function(){return this.thedef}),l.DEFMETHOD("mangle_names",function(s){(s=d(s)).cache&&s.cache.props&&(t=h(this,s),s.cache.props.each(function(e){t.set(e,!0)}));var t,o=-1,a=[],c=new e(function(e,t){var n,i,r;if(e instanceof D)return e instanceof f&&(n=o),s.webkit&&e instanceof ne&&e.init instanceof AST_Let&&e.init.definitions.forEach(function(e){e.name.match_symbol(function(e){var t,n,i;e instanceof C&&(t=e.definition(),n=e.scope.parent_scope,i=n.def_variable(e),e.thedef=t,n.to_mangle.push(i),t.redefined=function(){return i})})},!0),i=e.to_mangle=[],e.variables.each(function(e){!function(t){var e=t.orig[0],n=t.redefined();if(!n){if(!(e instanceof k))return;var i=t.scope.resolve();if(t.scope===i)return;if(t.scope.parent_scope.find_variable(e.name))return;n=i.def_variable(e),i.to_mangle.push(n)}a.push(t),t.references.forEach(r),(e instanceof S||e instanceof k)&&(r(e),t.redefined=function(){return n});return 1;function r(e){e.thedef=n,e.reference(s),e.thedef=t}}(e)&&i.push(e)}),t(),s.cache&&e instanceof l&&e.globals.each(u),e instanceof Z&&c.has_directive("use asm")&&((t=new de(e.name)).scope=e,t.reference(s)),(i=36<i.length?(t=i.map(function(e,t){return t}).sort(function(e,t){return i[t].references.length-i[e].references.length||e-t})).slice(0,36).sort(function(e,t){return e-t}).map(function(e){return i[e]}).concat(t.slice(36).sort(function(e,t){return e-t}).map(function(e){return i[e]})):i).forEach(u),!(e instanceof f)||s.v8&&function(e){var t,n=0;for(;t=e.parent(n++);){if(t instanceof G)return t instanceof l&&!s.toplevel;if(t instanceof f)return 1}}(c)||(o=n),!0;if(e instanceof v){for(;r=L(++o),p[r];);return e.mangled_name=r,!0}});function u(e){s.reserved.has[e.name]||e.mangle(s)}this.walk(c),a.forEach(u)}),l.DEFMETHOD("find_colliding_names",function(n){var i=n.cache&&n.cache.props,t=Object.create(p);return n.reserved.forEach(r),this.globals.each(s),this.walk(new e(function(e){e instanceof D&&e.variables.each(s)})),t;function r(e){t[e]=!0}function s(e){var t=e.name;if(e.global&&i&&i.has(t))t=i.get(t);else if(!e.unmangleable(n))return;r(t)}}),l.DEFMETHOD("expand_names",function(i){L.reset(),L.sort(),i=d(i);var r=this.find_colliding_names(i),s=0;function t(t){var e,n;t.global&&i.cache||t.unmangleable(i)||i.reserved.has[t.name]||(e=t.redefined(),n=e?e.rename||e.name:function(){for(var e;e=L(s++),r[e];);return e}(),t.rename=n,t.forEach(function(e){e.definition()===t&&(e.name=n)}))}this.globals.each(t),this.walk(new e(function(e){e instanceof D&&e.variables.each(t)}))}),se.DEFMETHOD("tail_node",z),r.DEFMETHOD("tail_node",function(){return this.expressions[this.expressions.length-1]}),l.DEFMETHOD("compute_char_frequency",function(e){e=d(e),L.reset();var t=w.prototype.add_source_map;try{w.prototype.add_source_map=function(){this.unmangleable(e)||L.consider(this.name,-1)},e.properties&&(i.prototype.add_source_map=function(){L.consider(this.property,-1)},ce.prototype.add_source_map=function(){!function e(t){t instanceof ae?L.consider(t.value,-1):t instanceof J?(e(t.consequent),e(t.alternative)):t instanceof r&&e(t.tail_node())}(this.property)}),L.consider(this.print_to_string(),1)}finally{w.prototype.add_source_map=t,delete i.prototype.add_source_map,delete ce.prototype.add_source_map}L.sort()});a=Object.create(null),Ee=Ae("0123456789"),N=Ae("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_"),R.consider=function(e,t){for(var n=e.length;0<=--n;)I[e[n]]+=t},R.sort=function(){c=N.sort(Ce).concat(Ee).sort(Ce)},(R.reset=Te)();var a,c,I,Ee,N,L=R;function Ae(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push(i),a[i]=-.01*n}return t}function Te(){c=null,I=Object.create(a)}function Ce(e,t){return I[t]-I[e]}function R(e){var t=N[e%54];for(e=Math.floor(e/54);0<=--e;e>>=6)t+=c[63&e];return t}return{base54:L,is_lhs:Se,is_funarg:xe,unary_side_effects:we}}),define("skylark-uglifyjs/compress",["./utils","./ast","./output","./parse","./scope"],function(e,t,n,i,r){"use strict";const{AST_Accessor:Je,AST_Array:be,AST_Arrow:d,AST_Assign:xe,AST_AsyncArrow:m,AST_AsyncDefun:te,AST_AsyncFunction:ne,AST_AsyncGeneratorDefun:ie,AST_AsyncGeneratorFunction:re,AST_Atom:s,AST_Await:Xe,AST_BigInt:o,AST_Binary:we,AST_Block:Ke,AST_BlockScope:Qe,AST_BlockStatement:Se,AST_Boolean:l,AST_Break:N,AST_Call:ke,AST_Case:Ze,AST_Catch:se,AST_Class:et,AST_ClassExpression:oe,AST_ClassField:tt,AST_ClassGetter:a,AST_ClassInit:nt,AST_ClassInitBlock:c,AST_ClassMethod:p,AST_ClassProperty:u,AST_ClassSetter:f,AST_Conditional:Ee,AST_Const:ae,AST_Constant:E,AST_Continue:L,AST_Debugger:it,AST_Default:rt,AST_DefaultValue:Ae,AST_DefClass:ce,AST_Definitions:st,AST_Defun:ot,AST_Destructured:Te,AST_DestructuredArray:at,AST_DestructuredKeyVal:ct,AST_DestructuredObject:ut,AST_Directive:w,AST_Do:ft,AST_Dot:lt,AST_DWLoop:pt,AST_EmptyStatement:Z,AST_Exit:ht,AST_ExportDeclaration:ue,AST_ExportDefault:fe,AST_ExportReferences:g,AST_False:le,AST_Finally:P,AST_For:dt,AST_ForEnumeration:mt,AST_ForIn:k,AST_Function:gt,AST_Hole:pe,AST_If:Ce,AST_Import:A,AST_Infinity:_,AST_IterationStatement:_t,AST_Jump:R,AST_LabeledStatement:he,AST_Lambda:Pe,AST_LambdaDefinition:vt,AST_LambdaExpression:yt,AST_Let:bt,AST_LoopControl:xt,AST_NaN:v,AST_New:y,AST_NewTarget:b,AST_Node:Oe,AST_Null:T,AST_Number:De,AST_Object:wt,AST_ObjectKeyVal:St,AST_ObjectGetter:x,AST_ObjectProperty:kt,AST_ObjectIdentity:Et,AST_ObjectMethod:S,AST_ObjectSetter:C,AST_PropAccess:Ie,AST_RegExp:G,AST_Return:Ne,AST_Scope:Le,AST_Sequence:Re,AST_SimpleStatement:je,AST_Spread:Me,AST_Statement:O,AST_String:H,AST_Sub:At,AST_Super:Y,AST_Switch:Tt,AST_SwitchBranch:j,AST_Symbol:Ct,AST_SymbolCatch:de,AST_SymbolClass:D,AST_SymbolConst:I,AST_SymbolDeclaration:Pt,AST_SymbolDefun:Ot,AST_SymbolExport:M,AST_SymbolFunarg:Fe,AST_SymbolImport:me,AST_SymbolLambda:ge,AST_SymbolLet:F,AST_SymbolRef:qe,AST_SymbolVar:Dt,AST_Template:It,AST_This:q,AST_Throw:Nt,AST_Toplevel:Lt,AST_True:B,AST_Try:Rt,AST_Unary:jt,AST_UnaryPostfix:Mt,AST_UnaryPrefix:Be,AST_Undefined:Ve,AST_Var:ee,AST_VarDef:ze,AST_While:Ft,AST_With:qt,AST_Yield:Bt,TreeTransformer:Vt,TreeWalker:Ue,first_in_statement:V,root_expr:zt,is_arrow:Ut,is_generator:$t,is_statement:Ht,is_async:Wt,walk_body:z,walk_lambda:U}=t,{all:$e,defaults:$,Dictionary:Gt,find_if:_e,HOP:J,List:Yt,makePredicate:X,member:Jt,noop:ve,push_uniq:ye,remove:K,return_false:He,return_null:Q,return_true:W,return_this:Xt}=e,{JS_Parse_Error:Kt,parse:Qt,PRECEDENCE:Zt,decode_escape_sequence:en,is_identifier_string:tn,UNARY_POSTFIX:nn}=i,rn=n["OutputStream"],{is_lhs:sn,is_funarg:on,unary_side_effects:an}=r;function cn(e,t){if(!(this instanceof cn))return new cn(e,t);Vt.call(this,this.before,this.after),this.options=$(e,{annotations:!t,arguments:!t,arrows:!t,assignments:!t,awaits:!t,booleans:!t,collapse_vars:!t,comparisons:!t,conditionals:!t,dead_code:!t,default_values:!t,directives:!t,drop_console:!1,drop_debugger:!t,evaluate:!t,expression:!1,functions:!t,global_defs:!1,hoist_exports:!t,hoist_funs:!1,hoist_props:!t,hoist_vars:!1,ie:!1,if_return:!t,imports:!t,inline:!t,join_vars:!t,keep_fargs:t,keep_fnames:!1,keep_infinity:!1,loops:!t,merge_vars:!t,module:!1,negate_iife:!t,objects:!t,optional_chains:!t,passes:1,properties:!t,pure_funcs:null,pure_getters:!t&&"strict",reduce_funcs:!t,reduce_vars:!t,rests:!t,sequences:!t,side_effects:!t,spreads:!t,strings:!t,switches:!t,templates:!t,top_retain:null,toplevel:!(!e||!e.module&&!e.top_retain),typeofs:!t,unsafe:!1,unsafe_comps:!1,unsafe_Function:!1,unsafe_math:!1,unsafe_proto:!1,unsafe_regexp:!1,unsafe_undefined:!1,unused:!t,varify:!t,webkit:!1,yields:!t},!0);var e=this.options.evaluate,n=(this.eval_threshold=/eager/.test(e)?1/0:+e,this.options.global_defs);if("object"==typeof n)for(var i in n)/^@/.test(i)&&J(n,i)&&(n[i.slice(1)]=Qt(n[i],{expression:!0}));!0===this.options.inline&&(this.options.inline=4),this.drop_fargs=this.options.keep_fargs?He:function(e,t){var n;return!e.length_read&&((n=e.name)?n.fixed_value()===e&&!(n=n.definition()).direct_access&&(n=n.escaped)&&1!=n.depth:t&&"Call"==t.TYPE&&t.expression===e)},this.options.module&&(this.directives["use strict"]=!0);var r=this.options.pure_funcs,t=("function"==typeof r?this.pure_funcs=r:"string"==typeof r?this.pure_funcs=function(e){var t;return e instanceof ke?t=e.expression:e instanceof It&&(t=e.tag),!(t&&r===t.print_to_string())}:Array.isArray(r)?this.pure_funcs=function(e){var t;return e instanceof ke?t=e.expression:e instanceof It&&(t=e.tag),!(t&&Jt(t.print_to_string(),r))}:this.pure_funcs=W,this.options.sequences),s=(this.sequences_limit=1==t?800:0|t,this.options.top_retain),e=(s instanceof RegExp?this.top_retain=function(e){return s.test(e.name)}:"function"==typeof s?this.top_retain=s:s&&("string"==typeof s&&(s=s.split(/,/)),this.top_retain=function(e){return Jt(e.name,s)}),this.options.toplevel);this.toplevel="string"==typeof e?{funcs:/funcs/.test(e),vars:/vars/.test(e)}:{funcs:e,vars:e}}function un(e,t){var n,i=t.get_property();if(!(i instanceof Oe)){if(e instanceof be){t=e.elements;if("length"==i)return Jn(t.length,e);"number"==typeof i&&i in t&&(n=t[i])}else if(e instanceof Pe){if("length"==i)return e.length_read=!0,Jn(e.argnames.length,e)}else if(e instanceof wt)for(var i=""+i,r=e.properties,s=r.length;0<=--s;){if(!Dr(r[s]))return;n||r[s].key!==i||(n=r[s].value)}return n instanceof qe&&n.fixed_value()||n}}function fn(e,t,n,i,r,s,o){var a=t.parent(r);if(!(e.option("unsafe")&&a instanceof lt&&(c=i,f=a.property,c instanceof l?es.Boolean[f]:c instanceof De?es.Number[f]:c instanceof H?es.String[f]:"valueOf"!=f&&(c instanceof be?es.Array[f]:c instanceof Pe?es.Function[f]:c instanceof wt?es.Object[f]:c instanceof G&&es.RegExp[f]&&!c.value.global)))){var c,u,f=sn(n,a);if(f)return f;if(0!=r||!i||!i.is_constant()){if(a instanceof be)return fn(e,t,a,a,r+1);if(a instanceof xe)switch(a.operator){case"=":return fn(e,t,a,i,r+1,s,o);case"&&=":case"||=":case"??=":return fn(e,t,a,a,r+1);default:return}return a instanceof we?Ye[a.operator]?fn(e,t,a,a,r+1):void 0:a instanceof ke?!s&&a.expression===n&&!a.is_expr_pure(e)&&(!(i instanceof yt)||!(a instanceof y)&&i.contains_this()):a instanceof Ee?a.condition===n?void 0:fn(e,t,a,a,r+1):a instanceof mt?a.init===n:a instanceof St?a.value!==n?void 0:(c=t.parent(r+1),fn(e,t,c,c,r+2)):a instanceof Ie?a.expression!==n?void 0:(u=un(i,a),(!s||o)&&fn(e,t,a,u,r+1)):a instanceof Re&&a.tail_node()===n?fn(e,t,a,i,r+1,s,o):void 0}}}function ln(e){return e instanceof et||e instanceof Pe}function pn(e){return e instanceof et||e instanceof ot||e instanceof gt}function hn(e){return"arguments"==e.name&&e.scope.uses_arguments}function dn(e,t){do{if(e===t)return;if(t instanceof Le)return 1}while(t=t.parent_scope)}function mn(e,t,n){var i=e.redef||e.definition();return(!e.in_arg||!on(i))&&$e(i.orig,function(e){return e instanceof I||e instanceof F?e instanceof me||t&&ur(t,e):!(n&&e instanceof ge)})}function gn(e,t,n,i){return i instanceof xe?"="==i.operator&&i.right===n:i instanceof ke?i.expression!==n||i instanceof y:i instanceof tt?i.value===n&&!i.static:i instanceof ht?i.value===n&&t.resolve()!==e.scope.resolve():i instanceof ze&&i.value===n}function _n(e,t){var n=We(qe,e);return n.fixed=t||We(Ve,e),n}function vn(n,i){return function(e){var t=n(e),e=_n(t,i),t=t.definition();return t.references.push(e),t.replaced++,e}}function yn(e,t,n){n.assignments=0,n.bool_return=0,n.drop_return=0,n.cross_loop=!1,n.direct_access=!1,n.escaped=[],n.fixed=!n.const_redefs&&!n.scope.pinned()&&!t.exposed(n)&&!(n.init instanceof yt&&n.init!==n.scope)&&n.init,n.reassigned=0,n.recursive_refs=0,n.references=[],n.single_use=void 0}function bn(e,t,n){n.variables.each(function(e){yn(0,t,e)})}function xn(n,i,r){r.fn_defs=[],r.variables.each(function(e){yn(0,i,e);var t=e.init;t instanceof vt&&(r.fn_defs.push(t),t.safe_ids=null),null===e.fixed?(e.safe_ids=n.safe_ids,Cn(n,e)):e.fixed&&(n.loop_ids[e.id]=n.in_loop,Cn(n,e))}),r.may_call_this=function(){r.may_call_this=r.contains_this()?W:He},r.uses_arguments&&r.each_argname(function(e){e.definition().last_ref=!1}),i.option("ie")&&r.variables.each(function(e){var t=e.orig[0].definition();t!==e&&(t.fixed=!1)})}function wn(e,t){t=t.safe_ids;return void 0===t||t===e.safe_ids}function Sn(e,t){var n=e.fn_scanning;(e.fn_scanning=t).walk(e),e.fn_scanning=n}function kn(n,i){i.enclosed.forEach(function(e){var t;i.variables.get(e.name)===e||On(n,e)||(e.single_use=!1,(t="function"==typeof(t=e.fixed)?t():t)instanceof Pe&&void 0!==t.safe_ids)||(e.fixed=!1)})}function En(e,t,n){var i,r=n.safe_ids;void 0!==r&&!1!==r&&(n.parent_scope.resolve().may_call_this===W?Jt(n,e.fn_visited)&&kn(e,n):r?(i=Jt(n,e.fn_visited),r===e.safe_ids?i||Sn(e,n):i?kn(e,n):n.safe_ids=!1):e.fn_scanning&&e.fn_scanning!==t.scope.resolve()?n.safe_ids=!1:(n.safe_ids=e.safe_ids,Sn(e,n)))}function An(t,e){var n=e.fn_defs,i=e.may_call_this===W?n:n.filter(function(e){return!1===e.safe_ids||(e.safe_ids=t.safe_ids,Sn(t,e),!1)});Tn(t),i.forEach(function(e){e.safe_ids=t.safe_ids,Sn(t,e)}),n.forEach(function(e){e.safe_ids=void 0}),e.fn_defs=void 0,e.may_call_this=void 0}function h(e,t){var n=Object.create(e.safe_ids);t||(n.seq={}),e.safe_ids=n}function Tn(e){e.safe_ids=Object.getPrototypeOf(e.safe_ids)}function Cn(e,t){e.safe_ids[t.id]={}}function Pn(e,t){e.references.push(t),!1!==e.last_ref&&(e.last_ref=t)}function On(e,t){var n,i,r;return"m"!=t.single_use&&((n=e.safe_ids[t.id])?((i=J(e.safe_ids,t.id))||(r=e.safe_ids.seq,n.read?n.read!==r&&(n.read=!0):n.read=r),null==t.fixed?!hn(t)&&!(t.global&&"arguments"==t.name||(e.loop_ids[t.id]=null,t.fixed=We(Ve,t.orig[0]),i&&(t.safe_ids=void 0),0)):!n.assign||n.assign===e.safe_ids):t.fixed instanceof vt)}function Dn(e,t,n){if(!n){if(on(t)&&t.scope.uses_arguments&&!e.has_directive("use strict"))return;if(!$e(t.orig,function(e){return!(e instanceof I)}))return}if(void 0===t.fixed)return n||$e(t.orig,function(e){return!(e instanceof F)});if(!1!==t.fixed&&0!==t.fixed){n=e.safe_ids[t.id];if(t.safe_ids)return t.safe_ids[t.id]=!1,t.safe_ids=void 0,null===t.fixed||J(e.safe_ids,t.id)&&!n.read;if(!J(e.safe_ids,t.id)){if(!n)return;if(n.read||e.in_loop){var i=e.find_parent(Qe);if(i instanceof et)return;if(t.scope.resolve()!==i.resolve())return}n.assign=!(!n.assign||n.assign===e.safe_ids)||e.safe_ids}if(null!=t.fixed&&n.read){if(n.read!==e.safe_ids.seq)return;if(e.loop_ids[t.id]!==e.in_loop)return}return On(e,t)&&$e(t.orig,function(e){return!(e instanceof ge)})}}function In(e){var t;return!!e&&(e instanceof xe?"="==(t=e.operator)?In(e.right):!Ye[t.slice(0,-1)]:e instanceof Re?In(e.tail_node()):e.is_constant()||ln(e)||e instanceof Et)}function Nn(e,t,n,i,r,s,o){var a,c=e.parent(s);if(!r||!r.is_constant())if(gn(t,n,i,c))t.escaped.push(c),!(1<o)||r&&r.is_constant_expression(n)||(o=1),(!t.escaped.depth||t.escaped.depth>o)&&(t.escaped.depth=o),t.scope.resolve()!==n.resolve()&&(t.escaped.cross_scope=!0),t.fixed&&(t.fixed.escaped=t.escaped);else{if(u=i,(a=c)instanceof be||(a instanceof we?Ye[a.operator]:a instanceof Ee?a.condition!==u:a instanceof Re?a.tail_node()===u:a instanceof Me))Nn(e,t,n,c,c,s+1,o);else if(c instanceof St&&c.value===i){var u=e.parent(s+1);Nn(e,t,n,u,u,s+2,o)}else if(c instanceof Ie&&c.expression===i&&(Nn(e,t,n,c,r=un(r,c),s+1,o+1),r))return;0<s||c instanceof ke&&c.expression===i||c instanceof Re&&c.tail_node()!==i||c instanceof je||c instanceof jt&&!an[c.operator]||(t.direct_access=!0,t.fixed&&(t.fixed.direct_access=!0))}}function Ln(e){var t;e instanceof At&&(t=e.expression)instanceof qe&&hn(t=t.definition())&&((e=(e=e.property).is_constant()?e.value:e)instanceof Oe||Mr.test(e))&&(t.reassigned++,(e instanceof Oe?t.scope.argnames:[t.scope.argnames[e]]).forEach(function(e){e instanceof Fe&&(e.definition().fixed=!1)}))}function Rn(t,n){var i,r;return function(){var e=t();return r=i!==e?n(i=e):r}}function jn(u,t,e,f,l){var p=new Ue(function(i){var n,r,s,o,a,c,e;return i instanceof Ae?(Fn(i),h(u,!0),i.value.walk(u),Tn(u),(e=f)&&(n=t,r=i,s=e,f=function(){var e,t;return a===r?r:(e=s(),(t=ir(n,e,!0))instanceof Oe?a=r:o!==e&&(o=e,a=void 0===t?Ge(r,[e,r.value]):e),a)}),i.name.walk(p),f=e):i instanceof at?(Fn(i),e=f,i.elements.forEach(function(t,n){if(t instanceof pe)return Fn(t);e&&(f=Rn(e,function(e){return We(At,t,{expression:e,property:We(De,t,{value:n})})})),t.walk(p)}),i.rest&&(e&&(f=t.option("rests")&&Rn(e,function(e){if(!(e instanceof be))return i;for(var t=0,n=i.elements.length;t<n;t++)if(e.elements[t]instanceof Me)return i;return(c=c||We(be,i,{})).elements=e.elements.slice(n),c})),i.rest.walk(p)),f=e):i instanceof ut?(Fn(i),e=f,i.properties.forEach(function(i){Fn(i),i.key instanceof Oe&&(h(u),i.key.walk(u),Tn(u)),e&&(f=Rn(e,function(e){var t=i.key,n=At;return"string"==typeof t&&(tn(t)?n=lt:t=Jn(t,i)),We(n,i,{expression:e,property:t})})),i.value.walk(p)}),i.rest&&(f=!1,i.rest.walk(p)),f=e):l(i,f,function(){for(var e=u.stack.length,t=0,n=p.stack.length-1;t<n;t++)u.stack.push(p.stack[t]);i.walk(u),u.stack.length=e}),!0});e.walk(p)}function Mn(i,e,r){var t,s=this,o=(s.inlined=!1,i.parent()),n=!Wt(s)&&!$t(s),a=!n,c=!1,u=(s.walk(new Ue(function(e){return a?c=!0:e instanceof Ne?a=!0:e instanceof Le&&e!==s||void 0})),c&&h(i,n),xn(i,r,s),!s.uses_arguments||i.has_directive("use strict")),f=(s.argnames.forEach(function(t,e){var n=o.args[e];jn(i,r,t,function(){var e=s.argnames.indexOf(t),e=e<0?n:o.args[e];return(e=e instanceof Re&&e.expressions.length<2?e.expressions[0]:e)||We(Ve,o)},l)}),s.rest),n=(f&&jn(i,r,f,r.option("rests")&&function(){return s.rest!==f?f:((t=t||We(be,s,{})).elements=o.args.slice(s.argnames.length),t)},l),U(s,i),i.safe_ids);return An(i,s),c||(i.safe_ids=n),!0;function l(e,t){var n=e.definition();t&&u&&void 0===n.fixed?(Cn(i,n),i.loop_ids[n.id]=i.in_loop,n.fixed=t,n.fixed.assigns=[e]):n.fixed=!1}}function Fn(e){e._squeezed=!1,e._optimized=!1,e instanceof Qe&&(e._var_names=void 0),e instanceof qe&&(e.fixed=void 0)}function qn(n,i){return this.transform(new Vt(function(e,t){return e instanceof Ae?((e=e.clone()).name=e.name.transform(this),e):e instanceof Te?(t(e=e.clone(),this),e):e instanceof ct?((e=e.clone()).value=e.value.transform(this),e):e.convert_symbol(n,i)}))}function Bn(e,t){e=We(e,this);return t(e,this)||e}function Vn(e){var t=e.definition();t.assignments++,t.references.push(e)}function zn(t,n){var i=new Ue(function(e){return e instanceof Ae?(e.value.walk(n),e.name.walk(i),!0):e instanceof ct?(e.key instanceof Oe&&e.key.walk(n),e.value.walk(i),!0):t(e)});this.walk(i)}function Un(e){return e(this)}function $n(t,n){var i=!1,r=new Ue(function(e){return!!i||(e instanceof Ae?n?(e.name.walk(r),!0):i=!0:e instanceof ct?!n&&e.key instanceof Oe?i=!0:(e.value.walk(r),!0):t(e)?i=!0:void 0)});return this.walk(r),i}function Hn(e){return e instanceof ie||e instanceof re}function Wn(e){var t=0,n=e.self();do{if(n.variables)return n}while(n=e.parent(t++))}function Gn(e,t,n,i,r,s){for(var o;o=e.parent(t++);n=o){if(o===i)return!1;if(s&&o instanceof Pe){if(o.name||Wt(o)||$t(o))return!0}else if(o instanceof Rt){if(o.bfinally&&o.bfinally!==n)return!0;if(r&&o.bcatch&&o.bcatch!==n)return!0}}return!1}function Yn(e,t){if(e instanceof s)return!0;if(e instanceof Et)return!0;if(e instanceof Ie){if("__proto__"===e.property)return!0;if((e=e.expression)instanceof qe){if(e.is_immutable())return!1;e=e.fixed_value()}return e?!!e.tail_node().is_constant()||Yn(e,t):!0}return e instanceof qe&&(!!e.is_immutable()||(e=e.definition(),t.exposed(e)&&Fr[e.name]))}function We(e,t,n){return n?(n.start=t.start,n.end=t.end):n=t,new e(n)}function Ge(e,t){return 1==t.length?t[0]:We(Re,e,{expressions:t.reduce(Zn,[])})}function Jn(e,t){switch(typeof e){case"string":return We(H,t,{value:e});case"number":return isNaN(e)?We(v,t):isFinite(e)?1/e<0?We(Be,t,{operator:"-",expression:We(De,t,{value:-e})}):We(De,t,{value:e}):e<0?We(Be,t,{operator:"-",expression:We(_,t)}):We(_,t);case"boolean":return We(e?B:le,t);case"undefined":return We(Ve,t);default:if(null===e)return We(T,t);if(e instanceof RegExp)return We(G,t,{value:e});throw new Error(string_template("Can't handle constant of type: {type}",{type:typeof e}))}}function Xn(e){return e instanceof Ie||ci(e)&&"eval"==e.name}function Kn(e,t,n){var i=!1;return"Call"==e.TYPE?i=e.expression===t&&Xn(n):e instanceof It?i=e.tag===t&&Xn(n):e instanceof Be&&(i="delete"==e.operator||"typeof"==e.operator&&ci(n)),i?Ge(t,[We(De,t,{value:0}),n]):n}function Qn(e,t){var i=new Gt;return e.walk(new Ue(function(e){var t;e instanceof qe&&(t=e.definition(),(e=e.fixed)&&i.has(t.id)?i.get(t.id)!==e&&i.set(t.id,!1):i.set(t.id,e))})),0<i.size()&&t.walk(new Ue(function(e){var t,n;e instanceof qe&&(t=e.definition(),n=e.fixed)&&i.has(t.id)&&i.get(t.id)!==n&&(e.fixed=!1)})),t}function Zn(e,t){return t instanceof Re?[].push.apply(e,t.expressions):e.push(t),e}function ei(e){return e instanceof ae||e instanceof ce||e instanceof bt}function ti(e){var t,n;return e instanceof vt?(t=e.name.definition(),n=e.name.scope,t.scope===n||$e(t.references,function(e){var t=e.scope;do{if(t===n)return!0}while(t=t.parent_scope)})):!ei(e)}function ni(e){if(null===e)return[];if(e instanceof Se)return $e(e.body,ti)?e.body:[e];if(e instanceof Z)return[];if(Ht(e))return[e];throw new Error("Can't convert thing to statement array")}function ii(e){return null===e||e instanceof Z||e instanceof Se&&0==e.body.length}function ri(e){return $e(e.body,function(e){return ii(e)||e instanceof ot||e instanceof ee&&fi(e)})}function si(e){return e instanceof _t&&e.body instanceof Se?e.body:e}function oi(e){if("Call"!=e.TYPE)return!1;for(;(e=e.expression)instanceof Ie;);return e instanceof yt?!Ut(e):oi(e)}function ai(e){var t,n=e.expression;return!(n.name||e instanceof y&&(t=!1,n.walk(new Ue(function(e){return!!t||(e instanceof b?t=!0:e instanceof Le&&e!==n||void 0)})),t))}function ci(e){return e instanceof qe&&e.definition().undeclared}function ui(e){return e.static&&e.value&&(e instanceof tt||e instanceof nt)}function fi(e){return $e(e.definitions,function(e){return!e.value})}function li(e,t){return e instanceof ce?t&&!e.extends&&$e(e.properties,function(e){return!(e.key instanceof Oe||ui(e))}):e instanceof st?(t||e instanceof ee)&&fi(e):e instanceof ue||e instanceof fe?li(e.body,t):e instanceof vt}function pi(e,t){var n=e.lastIndexOf(t);if(n<0)return!1;for(;++n<e.length;)if(!li(e[n],!0))return!1;return!0}function hi(e,t){var n;if(e.init instanceof Se&&(n=e.init,e.init=n.body.pop(),n.body.push(e)),e.init instanceof ot?((n=n||We(Se,e,{body:[e]})).body.splice(-1,0,e.init),e.init=null):e.init instanceof je?e.init=e.init.body:ii(e.init)&&(e.init=null),n)return t?Yt.splice(n.body):n}function di(e,l){var de,me,ge,_e,ve,ye,D=I(l,function(e){return e instanceof Pe}),t=l.self(),n=0;do{if(!de&&t.variables&&(de=t),t instanceof se)l.parent(n).bfinally&&((ve=ve||{}).bfinally=!0),n++;else if(t instanceof P)n++;else if(t instanceof _t)_e=!0;else{if(t instanceof Le){ye=t;break}t instanceof Rt&&(ve=ve||{},t.bcatch&&(ve.bcatch=!0),t.bfinally)&&(ve.bfinally=!0)}}while(t=l.parent(n++));var i,r,s=10;do{if(r=i,i=0,!(i=!function e(t){var n=!1,i=[];for(var r=0;r<t.length;){var s=t[r];if(s instanceof Se&&$e(s.body,ti))n=!0,e(s.body),[].splice.apply(t,[r,1].concat(s.body)),r+=s.body.length;else{if(s instanceof w){if(Jt(s.value,i)){n=!0,t.splice(r,1);continue}i.push(s.value)}s instanceof Z?(n=!0,t.splice(r,1)):r++}}return n}(e)?i:1)&&1==r)break;if(l.option("dead_code")&&!(i=!function(t,n){var e,i=n.self();i instanceof se?i=n.parent():i instanceof he&&(i=i.body);for(var r=0,s=0,o=t.length;r<o;r++){var a,c=t[r];if(!(c instanceof xt)||si(a=n.loopcontrol_target(c))!==i||c instanceof N&&a instanceof _t?t[s++]=c:c.label&&K(c.label.thedef.references,c),Fi(c)){e=t.slice(r+1);break}}t.length=s,e&&e.forEach(function(e){mi(n,e,t)});return t.length!=o}(e,l)?i:2)&&2==r)break;if(l.option("if_return")&&!(i=!function(o,i){for(var r,a,s,c=!1,u=i.parent(),f=i.self(),e=D&&u&&"Call"==u.TYPE&&u.expression===f,t=D&&i.option("conditionals")&&i.option("sequences"),n=!(ve&&ve.bfinally&&Hn(ye)),l=function(e){for(var t=0,n=e.length;0<=--n;){var i=e[n];if(i instanceof Ce&&i.body instanceof Ne&&1<++t)return!0}return!1}(o),p=o.length;0<=--p;){var h=o[p],d=O(p),m=o[d];if(D&&r&&!m&&h instanceof Ne&&n&&!(f instanceof j)){if(!(y=h.value)){c=!0,o.splice(p,1);continue}var g=y.tail_node();if(gi(g)){c=!0,y instanceof Be?y=y.expression:g instanceof Be&&((y=y.clone()).expressions[y.expressions.length-1]=g.expression),o[p]=We(je,h,{body:y});continue}}if(h instanceof Ce){g=Fi(h.body);if(E(g)){g.label&&K(g.label.thedef.references,g),c=!0,(h=h.clone()).body=We(Se,h,{body:C(h.body,g)}),h.alternative=We(Se,h,{body:ni(h.alternative).concat(A(s,a))}),P(g.value,s),o[p]=h,o[p]=h.transform(i);continue}if(g&&!h.alternative&&m instanceof R){var _=h.condition,v=p+1==d&&h.body instanceof Se;if((_=xi(_,_.negate(i),v))!==h.condition){c=!0,(h=h.clone()).condition=_;var y=h.body;h.body=We(Se,m,{body:A(!0,null,d+1)}),o.splice(p,1,h,y),(!D||f instanceof Ke&&f.body===o)&&(o[p]=h.transform(i));continue}}var b,v=Fi(h.alternative);if(E(v)){v.label&&K(v.label.thedef.references,v),c=!0,(h=h.clone()).body=We(Se,h.body,{body:ni(h.body).concat(A(s,a))}),h.alternative=We(Se,h.alternative,{body:C(h.alternative,v)}),P(v.value,s),o[p]=h,o[p]=h.transform(i);continue}i.option("typeofs")&&(g&&!v&&(b=We(Se,f,{body:o.slice(p+1)}),nr(h.condition,null,b)),!g)&&v&&(b=We(Se,f,{body:o.slice(p+1)}),nr(h.condition,b))}if(h instanceof Ce&&h.body instanceof Ne){var _=h.body.value,x=h.body.in_bool||m instanceof Ne&&m.in_bool;if(!h.alternative&&m instanceof Ne&&(n||!_==!m.value)){c=!0,(h=h.clone()).alternative=We(Se,m,{body:A(!0,null,d+1)}),o[p]=h,o[p]=h.transform(i);continue}if(D&&r&&!m&&!h.alternative&&(x||_&&l||_ instanceof Ee&&(gi(_.consequent,i)||gi(_.alternative,i)))){c=!0,(h=h.clone()).alternative=We(Ne,h,{value:null}),o[p]=h,o[p]=h.transform(i);continue}if(t&&!h.alternative&&(!(w=o[x=function(e){for(var t=e;0<=--t;){var n=o[t];if(!(n instanceof ee)&&!li(n))break}return t}(p)])&&e||w instanceof Ce&&w.body instanceof Ne)&&(m?m instanceof je&&O(d)==o.length:!r)){c=!0;var w=[];h=h.clone(),w.push(h.condition),h.condition=Ge(h,w),h.alternative=We(Se,f,{body:A().concat(We(Ne,f,{value:null}))}),o[p]=h.transform(i),p=x+1;continue}}h instanceof N||h instanceof ht?a=h:r&&a&&a===m&&function e(t,n,i){if(t instanceof ht){var r=!(n&&t instanceof Nt)&&k(t,!0);if(r)return c=!0,(r=T(t.value,r))?We(je,r,{body:r}):i?null:We(Z,t)}else{var s;t instanceof Ce?(t.body=e(t.body,n),t.alternative&&(t.alternative=e(t.alternative,n))):t instanceof he?t.body=e(t.body,n):t instanceof Rt?t.bfinally&&a.value&&!a.value.is_constant()||(t.bcatch&&e(t.bcatch,n),(s=e(t.body.pop(),!0,!0))&&t.body.push(s)):t instanceof Ke&&!(t instanceof Le||t instanceof Tt)&&(s=e(t.body.pop(),n,!0))&&t.body.push(s)}return t}(h)}return c;function S(t){return I(i,function(e){return e===t})}function k(e,t){var n;return!!a&&a.TYPE==e.TYPE&&!!(n=e.value)&&(!(e=!(e=a.equals(e))&&n instanceof Re&&(n=n.tail_node(),a.value)&&a.value.equals(n)?2:e)&&!t&&a.value instanceof Re&&a.value.tail_node().equals(n)?3:e)}function E(e){if(s=!1,function(e){if(e instanceof ht){if(!(s=k(e))){if(!D)return;if(!(e instanceof Ne))return;var t=e.value;if(t&&!gi(t.tail_node()))return;if(f instanceof j){if(!a)return;if(a instanceof ht&&a.value)return;s=4}}return 1}if(e instanceof xt){if(f instanceof j)if(a instanceof ht){if(!D)return;if(a.value)return;s=!0}else if(a){if(i.loopcontrol_target(a)!==u)return;s=!0}else if(!1===a)return;t=i.loopcontrol_target(e);return e instanceof L?S(si(t)):!(t instanceof _t)&&S(t)}}(e)){for(var t=o.length;--t>p;){var n=o[t];if(n instanceof ce){if(n.name.definition().preinit)return}else if((n instanceof ae||n instanceof bt)&&!$e(n.definitions,function(e){return!e.name.match_symbol(function(e){return e instanceof Pt&&e.definition().preinit})}))return}return 1}}function A(e,t,n){var i=[],r=!1,s=p+1,n=(e?t?n=o.lastIndexOf(t):(t=o[n])!==a&&(a=!1):(n=o.length,a=null),o.splice(s,n-s).filter(function(e){return e instanceof vt?(i.push(e),!1):(ei(e)&&(r=!0),!0)}));return 3===e&&(n.push(We(je,t.value,{body:Ge(t.value,t.value.expressions.slice(0,-1))})),t.value=t.value.tail_node()),[].push.apply(r?n:o,i),n}function T(e,t){if(e)switch(t){case 4:return e;case 3:if(!(e instanceof Re))break;case 2:return Ge(e,e.expressions.slice(0,-1))}}function C(e,t){for(var n,e=ni(e),i=e;(n=i[i.length-1])!==t;)i=n.body;i.pop();var r=t.value;return(r=s?T(r,s):r)&&i.push(We(je,r,{body:r})),e}function P(e,t){if(t&&e){switch(t){case 4:return;case 3:case 2:e=e.tail_node()}Qn(e,a.value)}}function O(e){r=!0;for(var t=e;++t<o.length;){var n=o[t];if(!li(n)){if(!(n instanceof ee))break;r=!1}}return t}}(e,l)?i:3)&&3==r)break;if(l.option("awaits")&&l.option("side_effects")&&!(i=!function(e,t){if(!(!D||ve&&ve.bfinally)){for(var n=!1,i=e.length;0<=--i;){var r=e[i];if(!(r instanceof je))break;var s=r.body;if(!(s instanceof Xe))break;s=s.expression;if(!br(t,s))break;if(n=!0,s=s.drop_side_effect_free(t,!0)){r.body=s;break}}return e.length=i+1,n}}(e,l)?i:4)&&4==r)break;if(4<=l.option("inline")&&!(i=!function(e,t){var n=!1,i=e.length-1;{var r;D&&0<=i&&(r=ve&&ve.bfinally&&Hn(ye),o=e[i].try_inline(t,de,r))&&(e[i--]=o,n=!0)}for(var s=_e&&ve&&ve.bfinally?"try":_e;0<=i;i--){var o;(o=e[i].try_inline(t,de,!0,s))&&(e[i]=o,n=!0)}return n}(e,l)?i:5)&&5==r)break;if(0<l.sequences_limit){if(!(i=!function(t,e){if(!(t.length<2)){for(var n=[],i=0,r=0,s=t.length;r<s;r++){var o=t[r];o instanceof je?(n.length>=e.sequences_limit&&a(),Zn(n,o.body)):(li(o)||a(),t[i++]=o)}return a(),(t.length=i)!=s}function a(){var e;n.length&&(e=Ge(n[0],n),t[i++]=We(je,e,{body:e}),n=[])}}(e,l)?i:6)&&6==r)break;if(!(i=!function(e,t){for(var n,i=!1,r=0,s=0;s<e.length;s++){var o,a=e[s];if(n&&(a instanceof ht?!a.value&&Hn(ye)||(a.value=p(a.value||We(Ve,a)).optimize(t)):a instanceof dt?a.init instanceof st||(o=!1,n.body.walk(new Ue(function(e){return!!(o||e instanceof Le)||(e instanceof we&&"in"==e.operator?o=!0:void 0)})),o)||(a.init?a.init=p(a.init):(a.init=n.body,r--,i=!0)):a instanceof k?ei(a.init)||(a.object=p(a.object)):a instanceof Ce?a.condition=p(a.condition):(a instanceof Tt||a instanceof qt)&&(a.expression=p(a.expression))),t.option("conditionals")&&a instanceof Ce){var c=[],u=h(a.body,c),f=h(a.alternative,c);if(!1!==u&&!1!==f&&0<c.length){var l=c.length;c.push(We(Ce,a,{condition:a.condition,body:u||We(Z,a.body),alternative:f})),c.unshift(r,1),[].splice.apply(e,c),s+=l,r+=l+1,i=!(n=null);continue}}e[r++]=a,n=a instanceof je?a:null}return e.length=r,i;function p(e){r--,i=!0;var t=n.body;return Ge(t,[t,e])}}(e,l)?i:7)&&7==r)break}if(l.option("join_vars")&&!(i=!function(e){for(var r,s=!1,t=0,n=-1;t<e.length;t++){var i,o,a,c=e[t],u=e[n];if(c instanceof st)u&&u.TYPE==c.TYPE?(u.definitions=u.definitions.concat(c.definitions),s=!0):r&&r.TYPE==c.TYPE&&fi(c)?(r.definitions=r.definitions.concat(c.definitions),s=!0):c instanceof ee?((o=m(u,c))?(o.length&&(u.body=Ge(u,o),n++),s=!0):n++,e[n]=r=c):e[++n]=c;else{if(c instanceof ht)c.value=f(c.value);else if(c instanceof dt)if(o=d(u,c.init))s=!0,c.init=o.length?Ge(c.init,o):null;else{if(u instanceof ee&&(!c.init||c.init.TYPE==u.TYPE)){c.init&&(u.definitions=u.definitions.concat(c.init.definitions)),c=c.clone(),r=c.init=u,e[n]=l(c),s=!0;continue}if(r&&c.init&&r.TYPE==c.init.TYPE&&fi(c.init))r.definitions=r.definitions.concat(c.init.definitions),c.init=null,s=!0;else if(c.init instanceof ee&&(r=c.init,o=m(u,c.init))){if(s=!0,0==o.length){e[n]=l(c);continue}u.body=Ge(u,o)}}else if(c instanceof mt)r&&r.TYPE==c.init.TYPE&&(i=r.definitions.slice(),c.init=c.init.definitions[0].name.convert_symbol(qe,function(e,t){i.push(We(ze,t,{name:t,value:null})),t.definition().references.push(e)}),r.definitions=i,s=!0),c.object=f(c.object);else if(c instanceof Ce)c.condition=f(c.condition);else if(c instanceof je){if(o=d(u,c.body)){if(s=!0,!o.length)continue;c.body=Ge(c.body,o)}else if(u instanceof st&&(a=e[t+1])&&u.TYPE==a.TYPE&&(a=a.definitions[0]).value){s=!0,a.value=Ge(c,[c.body,a.value]);continue}}else(c instanceof Tt||c instanceof qt)&&(c.expression=f(c.expression));e[++n]=r?l(c):c}}return e.length=n+1,s;function f(e){var t=d(u,e,1);if(!t)return e;s=!0;var n=e.tail_node();return t[t.length-1]!==n&&t.push(n.left),Ge(e,t)}function l(e){return e.transform(new Vt(function(e,t,n){var i;return e instanceof st?r!==e&&r.TYPE==e.TYPE&&!((i=this.parent())instanceof mt&&i.init===e)&&fi(e)?(r.definitions=r.definitions.concat(e.definitions),s=!0,i instanceof dt&&i.init===e?null:n?Yt.skip:We(Z,e)):e:!(e instanceof ue)&&!(e instanceof Le)&&Ht(e)?void 0:e}))}}(e)?i:8)&&8==r)break;!l.option("collapse_vars")||!function(i,p){if(!ye.pinned()){for(var h,M,F=new Gt,d=[],q=!1,m=new Gt,r=i.length,f=new Vt(function(e,t){if(T)return e;if(!A){if(e===g[_]){if(++_<g.length)return I(e,f);A=!0,(l=(v?R:te)(e,0))===e&&(T=!0)}return e}var n,i,r,s=f.parent();if(!y&&Z(e,s)&&(y=s),z&&V&&P&&!y&&e instanceof xe&&"="!=e.operator&&e.left.equals(b))return C++,q=!0,Oe.info("Cascading {this} [{start}]",e),P=!1,S=fe(b),e.right.transform(f),ce(a),i=T?a:(T=!0,We(we,a,{operator:z,left:b.fixed&&b.definition().fixed?b.fixed.to_binary(a):b,right:E})),We(xe,e,{operator:"=",left:e.left,right:We(we,e,{operator:e.operator.slice(0,-1),left:i,right:e.right})});if(function(e,t){if(e===E)return 1;if(t instanceof dt&&e!==t.init)return 1;if(e instanceof xe)return"="!=e.operator&&b.equals(e.left);if(e instanceof ke)return b instanceof Ie&&b.equals(e.expression)&&(!(E instanceof yt)||E.contains_this());return e instanceof et?!p.has_directive("use strict"):e instanceof it||(e instanceof ot?U&&b.name===e.name.name:e instanceof ct?e.key instanceof Oe:e instanceof pt||e instanceof xt||e instanceof Rt||e instanceof qt)}(e,s))return T=!0,e;if(e.single_use)return e;if(e instanceof Pt||!(V&&b.equals(e)||w&&(n=w(e,this))))return function(e,t){if(e instanceof qe){if(e.is_declared(p)){if(e.fixed_value())return;if(mn(e))return!(t instanceof Ie&&t.expression===e)&&hn(e.definition())}else if(Q(e,t))return;if(!K)return 1;w=!1}return}(e,s)?(T=!0,e):((ee(e,s)||$(e))&&(l=e)instanceof Le&&(T=!0),e instanceof Je||e instanceof Te?(r=P,P=!1,t(e,f),P=r,D(e)):e instanceof Ae?(e.name=e.name.transform(f),r=P,P=!1,e.value=e.value.transform(f),P=r,D(e)):!(e instanceof Qe)||e instanceof Le||e.variables&&e.variables.all(function(e){return!G.has(e.name)&&!S.has(e.name)})?I(e,f)?D(e):void 0:(r=P,P=!1,I(e,f)||t(e,f),P=r,D(e)));if(!P||y&&(n||!J||!K))return n||v||(T=!0),e;if(sn(e,s))return v&&!n&&(u=!0),e;if(!n&&B&&e.fixed!==b.fixed)return T=!0,e;if(v)return y&&0==c&&(c=o-C),n||C++,e;if(C++,q=T=!0,Oe.info("Collapsing {this} [{start}]",e),"Binary"==a.TYPE)return ue(a,e),We(xe,a,{operator:"=",left:a.right.left,right:"&&"==a.operator?We(Ee,a,{condition:a.left,consequent:a.right.right,alternative:e}):We(Ee,a,{condition:a.left,consequent:e,alternative:a.right.right})});if(a instanceof Mt)return We(Be,a,{operator:a.operator,expression:b.fixed&&b.definition().fixed?b.fixed.to_prefix(a):b});if(a instanceof Be)return ce(a),a;if(ue(E,e),a instanceof ze)return(i=a.name.definition()).references.length-i.replaced!=1||p.exposed(i)?We(xe,a,{operator:"=",left:e,right:E}):(i.replaced++,Kn(s,e,E));ce(E);t=a.clone();return t.right=E,t},D),s=new Vt(function(e){if(T)return e;if(!A){if(e!==g[_])return e;switch(_++,g.length-_){case 0:if(A=!0,u)return e;if(e!==a)return e;if(e instanceof ze)return e;O.replaced++;var t=s.parent();return t instanceof Re&&t.tail_node()!==e?(v.replaced++,E===k?Yt.skip:Ge(k,k.expressions.slice(0,-1))):E;case 1:if(!u&&e.body===a)return A=!0,O.replaced++,v.replaced++,null;default:return I(e,s)}}if(e instanceof qe&&e.definition()===O){if(sn(e,s.parent()))return e;--C||(T=!0),Oe.info("Replacing {this} [{start}]",e);var n=E.clone();return(n.scope=e.scope,n.reference(),C==c)?(T=!0,We(xe,a,{operator:"=",left:e,right:n})):(O.replaced++,n)}return e instanceof rt||e instanceof Le?e:void 0},function(e){return le(e,s)});0<=--r;){0==r&&p.option("unused")&&!function(){if(!1!==ge){var e=p.parent(),i=p.self();if(void 0===ge){if(!(i instanceof yt)||$t(i)||i.uses_arguments||i.pinned()||!(e instanceof ke)||e.expression!==i||!$e(e.args,function(e){return!(e instanceof Me)}))return ge=!1;if(!ai(e))return;ge=!0}for(var r,s=i.in_strict_mode(p)&&!i.parent_scope.resolve(!0).in_strict_mode(p),o=(Wt(i)?(r=function(e){return e instanceof Ct&&"await"==e.name},me=!0):(r=function(e){return e instanceof Xe&&!t.find_parent(Le)},void 0===me&&(me=Gn(p,1,e,null,!0,!0))),null),t=new Ue(function(e,t){var n;return!f||(r(e)||e instanceof Bt?!(f=null):e instanceof Et?(!s&&o||(f=null),!0):e instanceof qe?((e.in_arg&&!or(e.definition())||(n=i.variables.get(e.name))&&n!==e.definition())&&(f=null),!0):e instanceof Le&&!Ut(e)?(n=o,o=e,t(),o=n,!0):void 0)}),n=(h=e.args.slice()).length,a=new Gt,c=i.argnames.length;0<=--c;){var u=i.argnames[c],f=h[c],l=null;if(u instanceof Ae&&(l=u.value,u=u.name,h[n+c]=l),u instanceof Te){if(me&&N(function(e){return e.has_side_effects(p)},u,f)){d.length=0;break}h[n+c]=i.argnames[c]}else a.has(u.name)||(a.set(u.name,!0),(f=l?gi(f)?l:null:f)||l?f instanceof Pe&&f.pinned()?f=null:f&&f.walk(t):f=We(Ve,u).transform(p),f&&((u=We(ze,u,{name:u,value:f})).name_index=c,u.arg_index=l?n+c:c,d.unshift([u])))}i.rest&&h.push(i.rest)}}();var g=[];for(L(i[r]);0<d.length;){g=d.pop();var o,_=0,a=g[g.length-1],c=-1,u=!1,B=!1,v=null,l=null,y=null,b=function(t){if(t instanceof xe)return(n=t.left)instanceof qe&&(i=n.definition(),ye.uses_arguments&&on(i)||p.exposed(i)||(o=se(i),i.fixed&&n.fixed&&(e=i.references.filter(function(e){return e.fixed===n.fixed}).length-1)<o&&(o=e,B=!(c=0)),"="==t.operator&&re(t.right))),n;if(t instanceof we)return t.right.left;if(t instanceof jt)return t.expression;if(t instanceof ze){var n,e,i=(n=t.name).definition();if(!i.const_redefs)if(Jt(n,i.orig))if(!ye.uses_arguments||!on(i))return e=i.orig.length-i.eliminated-(m.get(i.name)||0),o=se(i),i.fixed&&(o=Math.min(o,i.references.filter(function(e){return!e.fixed||!e.fixed.assigns||(e=e.fixed.assigns[0])===n||oe(e)===t.value}).length)),1<e&&!(n instanceof Fe)?(re(t.value),We(qe,n)):re(t.value)||1==o&&!p.exposed(i)?We(qe,n):void 0}}(a),x=b&&b.has_side_effects(p),V=b&&(!x||b instanceof qe)&&!Yn(b,p),w=function(t){if(!(t instanceof xe&&t.right.single_use)){for(var n,i=Object.create(null),e=new Ue(function(e){e instanceof qe&&(i[e.definition().id]=!0)});t instanceof xe&&"="==t.operator;)t.left.walk(e),t=t.right;if(t instanceof Et)return s;if(t instanceof qe)return(r=t.evaluate(p))===t?s:ae(r,s);if(t.is_truthy())return ae(!0,He);if(t.is_constant()){var r=t.evaluate(p);if(!(r instanceof Oe))return ae(r,s)}return b instanceof qe?!!function e(t){if(t instanceof be)return!1;if(t instanceof we&&Ye[t.operator])return e(t.left)&&e(t.right);if(t instanceof ke)return!1;if(t instanceof Ee)return e(t.consequent)&&e(t.alternative);if(t instanceof wt)return!1;return!t.has_side_effects(p)}(t)&&(t.walk(new Ue(function(e){if(n)return!0;e instanceof qe&&i[e.definition().id]&&(n=!0)})),!n)&&s:!1}function s(e){return t.equals(e)}}(a);if(V||w){var z=a instanceof xe&&a.operator.slice(0,-1),U=a.name instanceof Fe,$=He;if(a.may_throw(p)){if(U&&Wt(ye))continue;$=ve?function(e){return e.has_side_effects(p)}:n}var H=!1,W=!1,G=new Gt,Y=!0,S=fe(a),J=function(e){var t=zt(e);return t instanceof qe&&t.definition().scope.resolve()===ye&&(!_e||!z&&!(a instanceof jt||(t=S.get(t.name))&&t[0]!==e))}(b),k=oe(a),E=k,X=(x||(!z&&E instanceof Re&&(E=E.tail_node()),x=!(a instanceof jt)&&E.has_side_effects(p)),ve||!J?function(e){return e instanceof Te}:He),K=function(e){if(e instanceof jt)return!1;if(x)return!1;if(!v){if(!(b instanceof qe))return!1;var t;if(e instanceof ze)t=1;else{if("="!=e.operator)return!1;t=2}e=b.definition();if(e.references.length-e.replaced!=t){if(!e.fixed)return!1;if(!b.fixed)return!1;var n=b.fixed.assigns,i=0;if(!$e(e.references,function(e,t){e=e.fixed;return!!e&&!e.to_binary&&!e.to_prefix&&(e===b.fixed?(i++,!0):n&&e.assigns&&n[0]!==e.assigns[0])}))return!1;if(i!=t)return!1;B=!0}}return!0}(a),A=U,T=!1,C=0,P=!h||!A;if(!P){for(var t=a.arg_index+1;!T&&t<h.length;t++)h[t]&&h[t].transform(f);P=!0}for(var e=r;!T&&e<i.length;e++)i[e].transform(f);if(v){if(!C||C+u<o){d.push(g),M=!0;continue}C==c&&(u=!0);var O=b.definition();T=!1,_=0,A=U;for(e=r;!T&&e<i.length;e++)i[e].transform(s)||i.splice(e--,1);C=a instanceof ze&&a===g[g.length-1]&&O.references.length==O.replaced&&!p.exposed(O),v.last_ref=!1,v.single_use=!1,q=!0}C&&!function(e){var t,n,c,u,f,l=E===k?null:Ge(k,k.expressions.slice(0,-1)),e=e.name_index;0<=e?(n=ye.argnames[e])instanceof Ae?(ye.argnames[e]=n=n.clone(),n.value=l||We(De,n,{value:0})):(t=p.parent().args)[e]&&(ye.argnames[e]=n.clone(),t[e]=l||We(De,t[e],{value:0})):(c=g.length-1,u=g[c],(u instanceof ze||g[c-1].body===u)&&c--,f=new Vt(function(e,t,n){var i,r,s,o,a;return A||e!==g[_]?e:++_<=c?I(e,f):(A=!0,e instanceof st?(m.set(u.name.name,(m.get(u.name.name)||0)+1),v&&v.replaced++,r=(i=e.definitions).indexOf(u),(s=u.clone()).value=null,l?(o=[We(je,l,{body:l})],0<r&&((a=e.clone()).definitions=i.slice(0,r),o.unshift(a),(e=e.clone()).definitions=i.slice(r)),o.push(e),e.definitions[0]=s,n?Yt.splice(o):We(Se,e,{body:o})):(e.definitions[r]=s,e)):l?Ht(e)?We(je,l,{body:l}):l:n?Yt.skip:null)},function(e,t){return e instanceof dt?hi(e,t):le(e,f)}),A=T=!1,_=0,(i[r]=i[r].transform(f))||i.splice(r,1))}(a)}}}return q}function D(e){return T||(l===e&&(T=!0),y===e&&(y=null)),e}function I(e,t){if(e instanceof Qe){if(e instanceof Le)return e;if(e instanceof et){e.name&&(e.name=e.name.transform(t)),!T&&e.extends&&(e.extends=e.extends.transform(t));for(var n=[],i=[],r=0;!T&&r<e.properties.length;r++)(s=e.properties[r]).key instanceof Oe&&(s.key=s.key.transform(t)),s.static&&(s instanceof tt?s.value&&n.push(s):s instanceof nt&&[].push.apply(i,s.value.body));for(r=0;!T&&r<i.length;r++)i[r].transform(t);for(var s,r=0;!T&&r<n.length;r++)(s=n[r]).value=s.value.transform(t);return e}if(e instanceof mt)return e.object=e.object.transform(t),T=!0,e;if(e instanceof Tt){e.expression=e.expression.transform(t);for(r=0;!T&&r<e.body.length;r++){var o=e.body[r];if(o instanceof Ze){if(!A){if(o!==g[_])continue;_++}if(o.expression=o.expression.transform(t),!K)break;w=!1}}return T=!0,e}}}function Q(e,t){return t instanceof xe?"="==t.operator&&t.left===e:t instanceof Ae?t.name===e:t instanceof at||t instanceof ct&&t.value===e}function Z(e,t){return t instanceof xe?t.left!==e&&Ye[t.operator.slice(0,-1)]:t instanceof we?t.left!==e&&Ye[t.operator]:t instanceof ke?t.optional&&t.expression!==e:t instanceof Ze?t.expression!==e:t instanceof Ee||t instanceof Ce?t.condition!==e:t instanceof At&&t.optional&&t.expression!==e}function ee(e,t){if(e instanceof Xe)return 1;if("Binary"==e.TYPE)return!yr(e.operator,e.right,p);if(e instanceof ke){var n=e.expression;if(n instanceof qe&&(c=n.definition(),n=n.fixed_value()),!(n instanceof Pe))return!e.is_expr_pure(p);if(!c||!kr(p,c,n)){if(n.collapse_scanning)return;n.collapse_scanning=!0;for(var i=P,r=(P=!1,l),s=y,o=0;!T&&o<n.argnames.length;o++)N(u,n.argnames[o],e.args[o])&&(T=!0);if(!T)if(n.rest&&N(u,n.rest,We(be,e,{elements:e.args.slice(o)})))T=!0;else if(Ut(n)&&n.value)n.value.transform(f);else for(o=0;!T&&o<n.body.length;o++){var a=n.body[o];if(a instanceof Ne){a.value&&a.value.transform(f);break}a.transform(f)}if(y=s,l=r,P=i,n.collapse_scanning=!1,!T)return;T=!1}return 1}var c;if(e instanceof et)return ve&&(s=e.extends)&&!pn(s=s instanceof qe?s.fixed_value():s);if(e instanceof ht){if(ve){if(ve.bfinally)return 1;if(ve.bcatch&&e instanceof Nt)return 1}return x||b instanceof Ie||he(b)}if(e instanceof gt)return p.option("ie")&&e.name&&S.has(e.name.name);if(e instanceof Et)return pe(e);if(e instanceof Ie){if(x)return 1;r=e.expression;if(r instanceof qe&&hn(r.definition()))return 1;if(p.option("unsafe")){if(ci(r)&&Wr[r.name])return;if(Ci(r))return}return Y?!v&&(ve||!J)&&!e.optional&&r.may_throw_on_access(p):1}return e instanceof Me||(e instanceof qe?pe(e)?!Q(e,t):x&&he(e)||(c=e.definition(),(ve||c.scope.resolve()!==ye)&&!mn(e)):e instanceof It?!e.is_expr_pure(p):e instanceof ze?X(e.name)||(e.value||t instanceof bt)&&e.name.match_symbol(function(e){return e instanceof Pt&&(S.has(e.name)||x&&he(e))},!0):e instanceof Bt||(i=sn(e.left,e))&&(i instanceof Ie||X(i)||i.match_symbol(function(e){return e instanceof qe&&(S.has(e.name)||H&&p.exposed(e.definition()))},!0)));function u(e){return e.transform(f),T}}function N(n,e,i){return e instanceof Ae?n(e.value)||N(n,e.name,e.value)||!gi(i)&&N(n,e.name,i):i?e instanceof Te?!(!e.rest||!N(n,e.rest))||(e instanceof at?i instanceof be?!$e(e.elements,function(e,t){return!N(n,e,i[t])}):!i.is_string(p)||!$e(e.elements,function(e){return!N(n,e)}):e instanceof ut?!!i.may_throw_on_access(p)||!$e(e.properties,function(e){return!(e.key instanceof Oe&&n(e.key)||N(n,e.value))}):void 0):void 0:!(e instanceof Ct)}function L(e,t){var n,i;g.push(e),e instanceof be?e.elements.forEach(function(e){L(e,t)}):e instanceof xe?((i=e.left)instanceof Te||d.push(g.slice()),L(i),L(e.right),i instanceof qe&&"="==e.operator&&F.set(i.name,(F.get(i.name)||0)+1)):e instanceof Xe?L(e.expression,t):e instanceof we?(i=Ye[e.operator],t&&i&&"??"!=e.operator&&e.right instanceof xe&&"="==e.right.operator&&!(e.right.left instanceof Te)&&d.push(g.slice()),L(e.left,!i&&t),L(e.right,t)):e instanceof ke?(L(e.expression),e.args.forEach(L)):e instanceof Ze?L(e.expression):e instanceof Ee?(L(e.condition),L(e.consequent,t),L(e.alternative,t)):e instanceof st?e.definitions.forEach(L):e instanceof lt?L(e.expression):e instanceof pt?(L(e.condition),e.body instanceof Ke||L(e.body)):e instanceof ht?e.value&&L(e.value):e instanceof dt?(e.init&&L(e.init,!0),e.condition&&L(e.condition),e.step&&L(e.step,!0),e.body instanceof Ke||L(e.body)):e instanceof mt?(L(e.object),e.body instanceof Ke||L(e.body)):e instanceof Ce?(L(e.condition),e.body instanceof Ke||L(e.body),!e.alternative||e.alternative instanceof Ke||L(e.alternative)):e instanceof wt?e.properties.forEach(function(e){g.push(e),e.key instanceof Oe&&L(e.key),e instanceof St&&L(e.value,t),g.pop()}):e instanceof Re?(n=e.expressions.length-(t?0:1),e.expressions.forEach(function(e,t){L(e,t<n)})):e instanceof je?L(e.body,!0):e instanceof Me?L(e.expression):e instanceof At?(L(e.expression),L(e.property)):e instanceof Tt?(L(e.expression),e.body.forEach(L)):e instanceof jt?nn[e.operator]?d.push(g.slice()):L(e.expression):e instanceof ze?(e.name instanceof Dt&&(e.value?(i=e.name.definition()).references.length>i.replaced&&d.push(g.slice()):m.set(e.name.name,(m.get(e.name.name)||0)+1)),e.value&&L(e.value)):e instanceof Bt&&e.expression&&L(e.expression),g.pop()}function te(e,t){var n=f.parent(t);return n instanceof be||n instanceof xe||n instanceof Xe||n instanceof we||n instanceof ke||n instanceof Ze||n instanceof Ee?e:n instanceof st?j(n,t+1):n instanceof ht||n instanceof Ce||n instanceof _t||n instanceof kt||n instanceof Ie?e:n instanceof Re?(n.tail_node()===e?te:j)(n,t+1):n instanceof je?j(n,t+1):n instanceof Me||n instanceof Tt||n instanceof jt||n instanceof ze||n instanceof Bt?e:null}function ne(e,t,n){for(var i;i=e,(e=f.parent(++n))instanceof xe&&e.operator.slice(0,-1)==t||e instanceof we&&e.operator==t;);return i}function ie(e,t,n,i,r){var s=P,o=(P=!1,l),a=y,c=f.stack;return f.stack=[i],e.transform(f),f.stack=c,y=a,l=o,P=s,T?(T=!1,n):t(i,r+1)}function R(e,t){var n,i=f.parent(t);return i instanceof be?R(i,t+1):i instanceof xe?$(i)||i.left.match_symbol(function(e){return e instanceof qe&&(b.name==e.name||v.name==e.name)})?e:i.left!==e&&Ye[n=i.operator.slice(0,-1)]?ne(i,n,t):R(i,t+1):i instanceof Xe?R(i,t+1):i instanceof we?i.left!==e&&Ye[n=i.operator]?ne(i,n,t):R(i,t+1):i instanceof ke?i:i instanceof Ze?i.expression!==e?e:R(i,t+1):i instanceof Ee?i.condition!==e?e:R(i,t+1):i instanceof st?j(i,t+1):i instanceof ft?e:i instanceof ht?j(i,t+1):i instanceof dt?i.init!==e&&i.condition!==e?e:R(i,t+1):i instanceof mt?i.init!==e?e:R(i,t+1):i instanceof Ce?i.condition!==e?e:R(i,t+1):i instanceof kt?(n=f.parent(t+1),$e(n.properties,function(e){return e instanceof St})?R(n,t+2):n):i instanceof Ie?i.expression===e?R(i,t+1):e:i instanceof Re?(i.tail_node()===e?R:j)(i,t+1):i instanceof je?j(i,t+1):i instanceof Me?R(i,t+1):i instanceof Tt?i.expression!==e?e:R(i,t+1):i instanceof jt?"delete"==i.operator?e:R(i,t+1):i instanceof ze?i.name.match_symbol(function(e){return e instanceof Pt&&(b.name==e.name||v.name==e.name)})?e:R(i,t+1):i instanceof Ft?i.condition!==e?e:R(i,t+1):i instanceof Bt?R(i,t+1):null}function j(t,n){var e,i=f.parent(n);return ee(t,i)||Z(t,i)?t:i instanceof be?j(i,n+1):i instanceof xe?r(i.left):i instanceof Xe?t:i instanceof we||i instanceof ke||i instanceof Ze||i instanceof Ee||i instanceof st||i instanceof ht||i instanceof Ce?j(i,n+1):i instanceof _t?t:i instanceof kt?(e=f.parent(n+1),$e(e.properties,function(e){return e instanceof St})?j(e,n+2):e):i instanceof Ie?(e=i.expression)===t?j(i,n+1):ie(e,j,t,i,n):i instanceof Re||i instanceof je?j(i,n+1):i instanceof Me?t:i instanceof Tt||i instanceof jt?j(i,n+1):i instanceof ze?r(i.name):i instanceof Bt?t:null;function r(e){return $(i)?t:e!==t&&e instanceof Te?ie(e,j,t,i,n):j(i,n+1)}}function re(e){if(M)M=!1;else if(!(o<1)){var t=(e=e.tail_node())instanceof xe&&"="==e.operator?e.left:e;if(t instanceof qe){var n=t.definition();if(!n.undeclared&&!hn(n)){if(t!==e){if(Yn(t,p))return;if(n.references.length-n.replaced<2)return;e=a.clone();e[e instanceof xe?"right":"value"]=t,0<=a.name_index&&(e.name_index=a.name_index,e.arg_index=a.arg_index),a=e}return v=n}}}}function se(e){return e.references.length-e.replaced-(F.get(e.name)||0)}function oe(e){var t;return e instanceof xe?e.right:e instanceof we?((t=e.clone()).right=e.right.right,t):e instanceof ze?e.value:void 0}function ae(n,i){return function(e,t){if(t.in_boolean_context()){if(n&&e.is_truthy()&&!e.has_side_effects(p))return!0;if(e.is_constant()){t=e.evaluate(p);if(!(t instanceof Oe))return!t==!n}}return i(e)}}function ce(e){for(;e.write_only&&(e.write_only=!1,e instanceof xe);)e=e.right}function ue(e,t){var n=t.scope||Wn(f)||de;e.walk(new Ue(function(e){if(e instanceof Qe)return!0;e instanceof Ct&&(e.scope=n)}))}function fe(a){var c=new Gt,u=(a instanceof ze&&(a.name.definition().fixed||(Y=!1),c.add(a.name.name,b)),ye.uses_arguments&&!p.has_directive("use strict")),f=ye instanceof Lt,l=new Ue(function(t){var e,n,i;if(t instanceof qe?(e=t.fixed_value())||(n=(e=t).definition(),i=t.fixed&&t.fixed.escaped||n.escaped,n.undeclared)||!n.assignments&&i&&!i.cross_scope||!gn(n,t.scope,t,l.parent())&&Er(n)||(Y=!1):t instanceof Et&&(e=t),e)c.add(t.name,fn(p,l,t,e,0));else{if(t instanceof Pe){for(var r,s=0,o=t;r=l.parent(s++);o=r){if(r instanceof xe){if(r.left===o)break;if("="==r.operator)continue;if(Ye[r.operator.slice(0,-1)])continue;break}if(r instanceof we){if(Ye[r.operator])continue;break}if(r instanceof ke)return;if(r instanceof Le)return;if(r instanceof Re){if(r.tail_node()===o)continue;break}if(r instanceof It){if(r.tag)return;break}}return t.enclosed.forEach(function(e){e.scope!==t&&G.set(e.name,!0)}),!0}u&&t instanceof At&&(ye.each_argname(function(e){p.option("reduce_vars")&&!e.definition().assignments||(e.definition().fixed||(Y=!1),c.add(e.name,!0))}),u=!1)}f&&("Call"==t.TYPE?W||(i=t.expression)instanceof Ie||i instanceof yt&&!i.contains_this()||(W=!0):t instanceof Ie&&function e(t){return t instanceof qe&&!(t=t.fixed_value())||(t instanceof xe?"="==t.operator&&e(t.right):t instanceof Ie||t instanceof Et)}(t.expression)&&(t!==b||a instanceof jt?H=!0:W=!0))});return a.walk(l),c}function le(e,t){if(e instanceof Re)switch(e.expressions.length){case 0:return null;case 1:return Kn(t.parent(),e,e.expressions[0])}}function pe(e){e=S.get(e.name);if(e&&!$e(e,function(e){return!e}))return e[0]!==b||void(w=!1)}function he(e){e=e.definition();return!(1==e.orig.length&&e.orig[0]instanceof Ot||e.scope.resolve()===ye&&(!W||!p.exposed(e))&&$e(e.references,function(e){return e.scope.resolve(!0)===ye}))}function n(e,t){if(e instanceof xe)return n(e.left,!0);if(e instanceof jt)return n(e.expression,!0);if(e instanceof ze)return e.value&&n(e.value);if(t){if(e instanceof lt)return n(e.expression,!0);if(e instanceof At)return n(e.expression,!0);if(e instanceof qe)return e.definition().scope.resolve()!==ye}return!1}}(e,l)||(i=9)}while(i&&0<s--);return e;function I(e,t){var n,i,r=e.self(),s=0;do{r instanceof se?r=e.parent(s++):r instanceof he?r=r.body:r instanceof j&&((i=e.parent(s)).body[i.body.length-1]!==r&&!function(e){for(var t=e.length;0<=--t;)if(e[t]instanceof N)return 1;return}(r.body)||(s++,r=i));do{if(t(n=r))return n}while((r=e.parent(s++))instanceof Ce)}while(n&&(r instanceof Se||r instanceof se||r instanceof Le||r instanceof j||r instanceof Rt)&&pi(r.body,n))}function h(e,t){if(!(e instanceof Se))return e;for(var n=null,i=0;i<e.body.length;i++){var r=e.body[i];if(r instanceof ee&&fi(r))t.push(r);else{if(n||ei(r))return!1;n=r}}return n}function p(e){return e instanceof xe?[e]:e instanceof Re?e.expressions.slice():void 0}function d(e,t,n){var i=p(t);if(i){for(var r=!1,s=i.length-(n=n||0);0<=--s;)if(f(c=i[s])){if(c.left instanceof qe)o=i.slice(s+1);else{if(!(c.left instanceof Ie&&f(c.left.expression)))continue;var o=i.slice(s+1),a=c.clone(),c=c.left.expression;a.left=a.left.clone(),a.left.expression=c.left.clone(),o.unshift(a)}0!=o.length&&_(c.left,c.right,o)&&(r=!0,i=i.slice(0,s).concat(c,o))}if(e instanceof st){for(s=e.definitions.length;0<=--s;){var u=e.definitions[s];if(u.value){_(u.name,u.value,i)&&(r=!0),!function(e,t,n){if(l.option("conditionals")&&!(e.name instanceof Te)){for(var i=!1,r=e.name.definition();t.length>n;){var s=_r(l,r,e.value,t[0]);if(!s)break;e.value=s,t.shift(),i=!0}return i}}(u,i,n)||(r=!0);break}}e instanceof ee&&g(e.definitions,i,n)&&(r=!0)}return r&&i}function f(e){return e instanceof xe&&"="==e.operator}}function m(e,t){if(e instanceof je&&!fi(t)){e=p(e.body);if(e){var n=[];if(g(n,e.reverse(),0))return t.definitions=n.reverse().concat(t.definitions),e.reverse()}}}function g(e,t,n){for(var i=!1;t.length>n;){var r=t[0];if(!(r instanceof xe))break;if("="!=r.operator)break;var s=r.left;if(!(s instanceof qe))break;if(ci(s))break;if(s.scope.resolve()!==ye)break;var o=s.definition();if(o.scope!==ye)break;if(o.orig.length>o.eliminated+1)break;if("SymbolVar"!=o.orig[0].TYPE)break;s=We(Dt,s);e.push(We(ze,r,{name:s,value:r.right})),o.orig.push(s),o.replaced++,t.shift(),i=!0}return i}function _(e,r,t){var s=new Gt;for(s.set(e.name,!0);r instanceof xe&&"="==r.operator;)r.left instanceof qe&&s.set(r.left.name,!0),r=r.right;if(r instanceof wt){var n=!1;do{if(!function e(t){if(!(t instanceof xe))return;if("="!=t.operator)return;if(!(t.left instanceof Ie))return;var n=t.left.expression;if(!(n instanceof qe))return;if(!s.has(n.name))return;if(!t.right.is_constant_expression(ye))return;var i=t.left.property;i instanceof Oe&&(i=(i=e(i)?t.left.property=i.right.clone():i).evaluate(l));if(i instanceof Oe)return;i=""+i;n="__proto__"==i||l.has_directive("use strict")?function(e){e=e.key;return"string"==typeof e&&e!=i&&"__proto__"!=e}:function(e){var t=e.key;return e instanceof x||e instanceof C?"string"==typeof t&&t!=i:"__proto__"!==t};if(!$e(r.properties,n))return;r.properties.push(We(St,t,{key:i,value:t.right}));return!0}(t[0]))break}while(t.shift(),n=!0,t.length);return n}}}function mi(i,r,s){var o,a=!1;function c(e){o?(o.push(e),ti(e)||(o.required=!0)):s.push(e)}r.walk(new Ue(function(e,t){var n;return e instanceof ce?(e.extends=null,e.properties=[],c(e),!0):e instanceof st?(e.remove_initializers(i,n=[])&&Oe.warn("Dropping initialization in unreachable code [{start}]",e),0<n.length&&(e.definitions=n,c(e)),!0):e instanceof vt?(c(e),!0):e instanceof Le||(e instanceof Qe?(n=o,o=[],t(),o.required?s.push(We(Se,r,{body:o})):o.length&&[].push.apply(s,o),o=n,!0):void(e instanceof xt||(a=!0)))})),a&&Oe.warn("Dropping unreachable code [{start}]",r)}function gi(e,t){return null==e||e.is_undefined||e instanceof Ve||e instanceof Be&&"void"==e.operator&&(!t||!e.expression.has_side_effects(t))}function _i(e,t,n){switch(e){case"-":return t.is_negative_zero()&&(!(n instanceof E)||0==n.value);case"&&":case"||":return t.is_negative_zero()||n.is_negative_zero();case"*":case"/":case"%":case"**":return!0;default:return!1}}function vi(e,t){return t||/strict/.test(e.option("pure_getters"))}function yi(e,t,n){switch(t){case"&&":return n.left.is_defined(e)&&n.right.is_defined(e);case"||":return n.left.is_truthy()||n.right.is_defined(e);case"??":return n.left.is_defined(e)||n.right.is_defined(e);default:return!0}}function bi(e){Oe.warn("global_defs {this} redefined [{start}]",e)}function xi(e,t,n){return t.print_to_string().length-e.print_to_string().length<(n||0)?t:e}function wi(e,t,n){return xi(We(je,e,{body:e}),We(je,t,{body:t}),n).body}function Si(e,t,n,i){return(V(e)?wi:xi)(t,n,i)}function ki(t){var n=Object.create(null);return Object.keys(t).forEach(function(e){n[e]=X(t[e])}),n}function Ei(e){for(var t=0;t<e.length;t++){var n=e[t];if(!(n instanceof w))return n}}function Ai(){return this.value?We(Ne,this.value,{value:this.value}):Ei(this.body)}function Ti(e,t){var n=t.evaluate(e);return n===t?t:Si(e,t,Jn(n,t).optimize(e),e.eval_threshold)}function Ci(e){if(e instanceof lt){var t,n=e.expression;if(ci(n))return(t=ts[n.name])&&(t[e.property]||"Math"==n.name&&"random"==e.property)}}function Pi(e){e instanceof at?e.elements.forEach(Pi):e instanceof ut?e.properties.forEach(function(e){Pi(e.value)}):e instanceof Ie?Pi(e.expression):e instanceof qe&&e.definition().references.forEach(function(e){delete e._eval})}function Oi(e,t,n,i,r){for(var s=[],o=0;o<e.length;o++){var a=e[o],c=a._eval(t,n,i,r);if(a===c)return;s.push(c)}return s}function Di(e){return We(Be,e,{operator:"!",expression:e})}function Ii(e,t,n){e=Di(e);return n?xi(e,We(je,t,{body:t}))===e?e:t:xi(e,t)}function Ni(e,t,n){return!$e(e,n?function(e){return e instanceof Me?!n(e,t):!e.has_side_effects(t)}:function(e){return!e.has_side_effects(t)})}function Li(e,t){e=e.expression;return!e.is_string(t)||e.has_side_effects(t)}function Ri(e,t){for(var n=e.length;0<=--n;)if(e[n].may_throw(t))return!0;return!1}function ji(e,t){return!!e.may_throw(t)||!((e=e instanceof qe?e.fixed_value():e)instanceof Pe&&!Ri(e.argnames,t)&&!Ri(e.body,t))||Ut(e)&&e.value&&e.value.may_throw(t)}function Mi(e,t){for(var n=e.length;0<=--n;)if(!e[n].is_constant_expression(t))return!1;return!0}function Fi(e){return e&&e.aborts()}function qi(){var e=this.body.length;return 0<e&&Fi(this.body[e-1])}function Bi(e,t,n){switch(e.body.length){case 0:return n?Yt.skip:We(Z,e);case 1:var i=e.body[0];return ti(i)?t instanceof _t&&i instanceof vt?e:i:e}return e}function Vi(e,t){!t.option("rests")||e.uses_arguments||e.rest instanceof at&&t.drop_fargs(e,t.parent())&&(e.argnames=e.argnames.concat(e.rest.elements),e.rest=e.rest.rest)}function zi(e,t){if(t.option("arrows")){Vi(e,t),e.value&&(e.body=[e.first_statement()]);var n=di(e.body,t);switch(n.length){case 1:var i=n[0];if(i instanceof Ne){e.body.length=0,e.value=i.value;break}default:e.body=n,e.value=null}}return e}function Ui(e,t){for(var n=t.length;0<=--n;)t[n]||(t[n]=We(pe,e))}function $i(e,t){e=We(oe,e);return e.name&&(e.name=t?null:We(D,e.name)),e}function Hi(e,t){var n;switch(e.CTOR){case te:n=ne;break;case ie:n=re;break;case ot:n=gt;break;case AST_GeneratorDefun:n=AST_GeneratorFunction}var i=We(n,e);return i.name=t?null:We(ge,e.name),i}function Wi(t,n){t.walk(new Ue(function(e){return e instanceof Ne?(n(e),!0):e instanceof Le&&e!==t||void 0}))}function Gi(e){var t=Object.create(null);return Wi(e,function(e){var e=e.value;(e=e&&e.tail_node())instanceof qe&&(e=e.definition().id,t[e]=(t[e]||0)+1)}),t}function Yi(e,t,n){if(n.exposed(e))return!1;switch(e.references.length-e.replaced-(t[e.id]||0)){case e.drop_return:return"d";case e.bool_return:return!0}}function Ji(e,i){Wi(e,function(e){e.in_bool=!0;var t,n=e.value;n&&((t=ir(i,n))?t instanceof Oe||(n=n.drop_side_effect_free(i),e.value=n?Ge(e.value,[n,We(De,e.value,{value:1})]):We(De,e.value,{value:1})):(n=n.drop_side_effect_free(i),e.value=n?Ge(e.value,[n,We(De,e.value,{value:0})]):null))})}function Xi(e,t){return!e.name||!t.option("ie")||(e=e.name.definition(),!t.exposed(e)&&$e(e.references,function(e){return!(e instanceof qe)}))}function Ki(s,t,e){if(t instanceof Pe){var n,i=Ut(t),r=Wt(t),o=!1,a=!1;if(i&&s.option("arrows")?t.value?r&&!br(s,t.value)||(n=t.value.drop_side_effect_free(s))!==t.value&&(o=!0,t.value=n):a=!0:$t(t)||(a=!(!e&&t.name)||(n=t.name.definition()).references.length==n.replaced),a&&(t.process_expression(!1,function(e){var t=e.value;if(t){if(r&&!br(s,t))return e;t=t.drop_side_effect_free(s,!0)}return o=!0,t?We(je,e,{body:t}):We(Z,e)}),Wi(t,function(e){var t,n=e.value;!n||r&&!br(s,n)||(t=n.drop_side_effect_free(s))!==n&&(o=!0,t&&r&&!br(s,t)&&(t=t.negate(s)),e.value=t)})),r&&s.option("awaits")){a&&t.process_expression("awaits",function(e){var t=e.body;if(t instanceof Xe){if(br(s,t.expression)){if(o=!0,!(t=t.expression.drop_side_effect_free(s,!0)))return We(Z,e);e.body=t}}else if(t instanceof Re){for(var n=t.expressions,i=n.length;0<=--i;){var r=n[i];if(!(r instanceof Xe))break;r=r.expression;if(!br(s,r))break;if(o=!0,n[i]=r.drop_side_effect_free(s))break}switch(i){case-1:return We(Z,e);case 0:e.body=n[0];break;default:n.length=i+1}}return e});var c,u=!a&&t.name||i&&t.value&&!br(s,t.value),f=new Ue(function(e){return!!u||(f.parent()===t&&e.may_throw(s)||e instanceof Xe||e instanceof AST_ForAwaitOf?u=!0:e instanceof Ne?e.value&&!br(s,e.value)?u=!0:void 0:e instanceof Le&&e!==t||void 0)});if(t.walk(f),!u){switch(t.CTOR){case m:c=d;break;case ne:c=gt;break;case re:c=AST_GeneratorFunction}return We(c,t)}}return o&&t.clone()}}function Qi(e,t,n,i){for(var r=e.length,s=[],o=!1,a=0;a<r;a++){var c=e[a],u=i&&c instanceof Me?i(c,t,n):c.drop_side_effect_free(t,n);u!==c&&(o=!0),u&&(s.push(u),n=!1)}return s.length?o?s:e:null}function Zi(e,t,n){var i=e.expression;return i.is_string(t)?i.drop_side_effect_free(t,n):e}function er(e){return e instanceof Me?We(be,e,{elements:[e]}):e}function tr(t,e,n){n=n||xt;var i=!1,r=new Ue(function(e){return!!(i||e instanceof Le)||(e instanceof n&&r.loopcontrol_target(e)===t?i=!0:void 0)});return e instanceof he&&r.push(e),r.push(t),t.body.walk(r),i}function nr(e,t,n){if((e=e instanceof Re?e.tail_node():e)instanceof we)if(e.left instanceof H){if(e.right instanceof Be&&"typeof"==e.right.operator){var i=e.right.expression;if(ci(i)){var r,s,o,a,c,u,f,l="undefined"==e.left.value;switch(e.operator){case"==":r=l?n:t;break;case"!=":r=l?t:n;break;default:return}r&&(s=!1,o=i.definition(),c=[],u=[],f=new Ue(function(e,t){if(s)return!0;if(e instanceof xe){var n=e.left;if(!(n instanceof qe&&n.definition()===o))return;switch(e.right.walk(f),e.operator){case"=":case"&&=":s=!0}return!0}var i;return e instanceof ke?(t(),(a=e.expression.tail_node())instanceof qe&&(a=a.fixed_value(),i=c.length),a instanceof Pe?ye(u,a)&&a.walk(f):s=!0,0<=i&&(c.length=i),!0):e instanceof pt?(i=c.length,t(),s&&(c.length=i),!0):e instanceof dt?(e.init&&e.init.walk(f),i=c.length,e.condition&&e.condition.walk(f),e.body.walk(f),e.step&&e.step.walk(f),s&&(c.length=i),!0):e instanceof mt?(e.object.walk(f),i=c.length,e.init.walk(f),e.body.walk(f),s&&(c.length=i),!0):e instanceof Le?e!==a||void 0:e instanceof qe?(e.definition()===o&&c.push(e),!0):void 0}),r.walk(f),c.forEach(function(e){e.defined=!0}))}}}else switch(e.operator){case"&&":nr(e.left,t),nr(e.right,t);break;case"||":nr(p(e.left),n),nr(p(e.right),n)}function p(e){if(e instanceof we)switch(e.operator){case"==":return(e=e.clone()).operator="!=",e;case"!=":return(e=e.clone()).operator="==",e}}}function ir(e,t,n){return!!t.truthy||(gi(t)?void 0:!(t.falsy&&!n)&&(!!t.is_truthy()||t.evaluate(e,!0)))}function rr(e,t){var n,i=0,r=!1,s=e.self();if(!Ht(s))for(;;){if(n=s,(s=e.parent(i++))instanceof we)switch(n){case s.left:if(Ye[s.operator])continue;break;case s.right:if(a(s.left))switch(s.operator){case"&&":t[r?"falsy":"truthy"]=!0;break;case"||":case"??":t[r?"truthy":"falsy"]=!0}}else if(s instanceof Ee){var o=s.condition;if(o===n)continue;if(a(o))switch(n){case s.consequent:t[r?"falsy":"truthy"]=!0;break;case s.alternative:t[r?"truthy":"falsy"]=!0}}else{if(s instanceof ht)break;if(s instanceof Ce)break;if(s instanceof Re){if(s.expressions[0]===n)continue}else if(s instanceof je)break}return}for(;;){if(n=s,(s=e.parent(i++))instanceof Se){if(s.body[0]===n)continue}else if(s instanceof Ce&&a(s.condition))switch(n){case s.body:t[r?"falsy":"truthy"]=!0;break;case s.alternative:t[r?"truthy":"falsy"]=!0}return}function a(e){return t.equals(e)||e instanceof Be&&"!"==e.operator&&t.equals(e.expression)&&(r=!0)}}function sr(r){return function(t,n){var i=!1;return this.definitions.forEach(function(e){e.value&&(i=!0),e.name.match_symbol(function(e){e instanceof Pt&&n.push(We(ze,e,{name:e,value:r(t,e)}))},!0)}),i}}function or(e){return"arguments"!=e.name&&e.orig.length<(e.orig[0]instanceof ge?3:2)}function ar(e,t){if(e.exposed(t))return!0;for(var n=t.scope.resolve(),i=t.scope;i!==n;)if((i=i.parent_scope).var_names().has(t.name))return!0}function cr(e,i){return We(ee,e,{definitions:e.definitions.map(function(e){return We(ze,e,{name:e.name.convert_symbol(Dt,function(e,t){var n=e.definition();n.orig[n.orig.indexOf(t)]=e,n.scope!==i&&((n.scope=i).variables.set(n.name,n),i.enclosed.push(n),i.var_names().set(n.name,!0))}),value:e.value})})})}function ur(e,t){t=t.definition();return(t.fixed||0===t.fixed)&&or(t)&&Er(t)&&!ar(e,t)}function fr(e,t){return t.option("varify")&&$e(e.definitions,function(e){return!e.name.match_symbol(function(e){if(e instanceof Pt)return!ur(t,e)},!0)})?cr(e,t.find_parent(Le)):e}function lr(e,t){if(t.option("optional_chains")&&e.terminal)do{var n=e.expression;if(e.optional){var i=ir(t,n,!0);if(null==i)return We(Be,e,{operator:"void",expression:n}).optimize(t);i instanceof Oe||(e.optional=!1)}}while(("Call"==(e=n).TYPE||e instanceof Ie)&&!e.terminal)}function pr(e){var t,n=e.expression;return n instanceof Re?(n=n.expressions.slice(),(t=e.clone()).expression=n.pop(),n.push(t),Ge(e,n)):e}function hr(e,n,t){var i=e.expression,r=i instanceof qe?i.fixed_value():i;if(r instanceof Pe&&!r.uses_arguments&&!(r.pinned()||t&&t.indexOf(r)<0)){var s=e.args;if($e(s,function(e){return!(e instanceof Me)})){var o=r.argnames,t=r===i&&!r.name;if(r.rest){if(!t||!n.option("rests"))return;for(var a=o.length,s=s.slice(0,a);s.length<a;)s.push(We(Ve,e).optimize(n));s.push(We(be,e,{elements:e.args.slice(a)})),o=o.concat(r.rest),r.rest=null}else s=s.slice(),o=o.slice();for(var c=0,u=0,f=t&&n.option("default_values"),l=t&&n.drop_fargs(r,e)?function(e,t){return!e||(e instanceof at?0==e.elements.length&&!e.rest&&t instanceof be:e instanceof ut?0==e.properties.length&&!e.rest&&t&&!t.may_throw_on_access(n):e.unused)}:He,p=[],h=0;h<s.length;h++){var d=o[h];if(f&&d instanceof Ae&&s[h].is_defined(n)&&(o[h]=d=d.name),d&&void 0===d.unused){if(l(d,s[h])){m=s[h].drop_side_effect_free(n);o.splice(h,1),s.splice(h,1),m&&p.push(m),h--;continue}p.push(s[h]),s[c++]=Ge(e,p),p=[]}else{var m=s[h].drop_side_effect_free(n);if(l(d)){d&&o.splice(h,1),s.splice(h,1),m&&p.push(m),h--;continue}if(m)p.push(m),s[c++]=Ge(e,p),p=[];else if(d){if(!p.length){s[c++]=We(De,s[h],{value:0});continue}s[c++]=Ge(e,p),p=[]}}u=c}for(;h<o.length;h++)l(o[h])&&o.splice(h--,1);r.argnames=o,s.length=u,e.args=s,p.length&&(i=Ge(e,p),s.push(s.length<o.length?We(Be,e,{operator:"void",expression:i}):i))}}}function dr(e,t){t=t||e.find_parent(Le);var n=[];return(Wt(t)||t instanceof Lt&&e.option("module"))&&n.push("await"),$t(t)&&n.push("yield"),n.length&&X(n)}function mr(n,i){var r,s;return!i||(r=!0,s=new Ue(function(e){if(!r)return!0;if(e instanceof Le){if(e===n)return;if(Ut(e))for(var t=0;r&&t<e.argnames.length;t++)e.argnames[t].walk(s);else e instanceof vt&&i[e.name.name]&&(r=!1);return!0}e instanceof Ct&&i[e.name]&&e!==n.name&&(r=!1)}),n.walk(s),r)}function gr(e,t){return e.in_strict_mode(t)||!t.has_directive("use strict")}function _r(n,i,e,t){if(t instanceof we&&("&&"==t.operator||"||"==t.operator)&&t.right instanceof xe&&"="==t.right.operator&&t.right.left instanceof qe&&t.right.left.definition()===i&&!e.has_side_effects(n)&&r(t.left)&&r(t.right.right))return i.replaced++,"&&"==t.operator?We(Ee,t,{condition:t.left,consequent:t.right.right,alternative:e}):We(Ee,t,{condition:t.left,consequent:e,alternative:t.right.right});function r(e){var t;if(!e.has_side_effects(n))return t=!1,e.walk(new Ue(function(e){return!!t||(e instanceof qe&&e.definition()===i?t=!0:void 0)})),!t}}function vr(e,t){return e instanceof xe?!t&&"="==e.operator&&vr(e.right):e instanceof y?!t:e instanceof Re?vr(e.tail_node(),t):e instanceof qe?!t&&vr(e.fixed_value()):e instanceof be||e instanceof et||e instanceof Pe||e instanceof wt}function yr(e,t,n){switch(e){case"in":return vr(t)||n&&n.option("unsafe_comps");case"instanceof":return ln(t=t instanceof qe?t.fixed_value():t)||n&&n.option("unsafe_comps");default:return!0}}function br(e,t){var n;return!!t.is_constant()||(t instanceof xe?"="!=t.operator||br(e,t.right):t instanceof we?!Ye[t.operator]||br(e,t.left)&&br(e,t.right):t instanceof ke?Wt(t.expression):t instanceof Ee?br(e,t.consequent)&&br(e,t.alternative):t instanceof Re?br(e,t.tail_node()):t instanceof qe?(n=t.fixed_value())&&br(e,n):t instanceof It?!t.tag||Ar(e,t.tag):t instanceof jt||void 0)}function xr(e,t){return e instanceof xe?Yn(e.left,t)?e:e.left:e instanceof Re?xr(e.tail_node(),t):!(e instanceof Be&&nn[e.operator])||Yn(e.expression,t)?e:e.expression}function wr(e,t){return t instanceof lt?wr(e,t.expression):t instanceof At?wr(e,t.expression)&&wr(e,t.property):t instanceof Ct||!t.has_side_effects(e)}function Sr(e,t){var n,i=e.right.tail_node();i!==e.right&&((n=e.right.expressions.slice(0,-1)).push(i.left),(i=i.clone()).left=Ge(e.right,n),e.right=i),e.left=We(we,e,{operator:e.operator,left:e.left,right:i.left,start:e.left.start,end:i.left.end}),e.right=i.right,t?e.left=e.left.transform(t):e.operator==i.left.operator&&Sr(e.left)}function kr(e,t,n){var i=0,r=e.self();do{if(r===n)return r;if(ln(r)&&r.name&&r.name.definition()===t)return r}while(r=e.parent(i++))}function Er(e){var t=e.scope.resolve();return $e(e.references,function(e){return t===e.scope.resolve()})}function Ar(e,t){return e.option("unsafe")&&t instanceof lt&&"raw"==t.property&&ci(t.expression)&&"String"==t.expression.name}function Tr(e){var n=!1;if(e=e.replace(/\\(u\{[^{}]*\}?|u[\s\S]{0,4}|x[\s\S]{0,2}|[0-9]+|[\s\S])/g,function(e,t){t=en(t);if("string"==typeof t)return t;n=!0}),!n)return e}function Cr(e,t){return e instanceof qe||e.TYPE===t.TYPE}function Pr(n,t){var i=!1,r=new Ue(function(e){return!!i||(e instanceof qe&&Jt(e.definition(),t)?i=!0:void 0)}),s=new Ue(function(e){if(i)return!0;if(e instanceof Pe&&e!==n){if(!(e.name||Wt(e)||$t(e))){var t=s.parent();if(t instanceof ke&&t.expression===e)return}return e.walk(r),!0}});return n.walk(s),i}function Or(e,t){var n;if(e)return"Call"!=(n=t.parent()).TYPE?1:n.expression!==t.self()||(!(e instanceof qe)||(e=e.fixed_value()))&&e instanceof Pe&&!e.contains_this()}function Dr(e){return e instanceof St&&"string"==typeof e.key&&!(e instanceof S&&e.value.contains_super())}function Ir(e){var t=e.definition().redefined();return t&&((e=e.clone()).thedef=t),e}function Nr(t,e){var n=!1;return e.walk(new Ue(function(e){return!!n||(e instanceof qe&&t.variables.get(e.name)===e.definition()?n=!0:void 0)})),n}function Lr(e,t){var n=[];e.references.forEach(function(e){e=e.fixed;e&&ye(n,e)&&(e.assigns?e.assigns.unshift(t):e.assigns=[t])})}function Rr(e,t){var n=We(qe,t),i=We(xe,t,{operator:"=",left:n,right:We(Ve,t).transform(e)}),e=t.definition();return e.fixed&&(n.fixed=function(){return i.right},n.fixed.assigns=[i],Lr(e,i)),e.assignments++,e.references.push(n),i}function jr(e,t,n,i,r,s,o){for(var a=[],c=s.expressions,u=n,f=c.length-(o||0),l=f;0<=--f;r=!(u=!0)){var p=c[f].try_inline(e,t,u,i,r);p&&(h(),a.push(p))}if(0!=a.length)return h(),!n&&a[0]instanceof je&&(a[0]=We(Ne,s,{value:a[0].body})),We(Se,s,{body:a.reverse()});function h(){f+1<l&&a.push(We(je,s,{body:Ge(s,c.slice(f+1,l))})),l=f}}var Mr,Fr,qr,Br,Vr,zr,Ur,$r,Hr,Wr,Ye,Gr,Yr,Jr,Xr,Kr,Qr,Zr,es,ts,ns,is,rs,ss,os,as,cs,us,fs,ls;return(cn.prototype=new Vt(function(e,t,n){var i,r;return e._squeezed?e:((i=e instanceof Le)&&(this.option("arrows")&&Ut(e)&&e.value&&(e.body=[e.first_statement()],e.value=null),e.hoist_properties(this),e.hoist_declarations(this),e.process_returns(this)),t(e,this),t(e,this),r=e.optimize(this),!i||r!==e||this.has_directive("use asm")||r.pinned()||(r.drop_unused(this),r.merge_variables(this)&&r.drop_unused(this),t(r,this)),r===e&&(r._squeezed=!0),r)})).option=function(e){return this.options[e]},cn.prototype.exposed=function(e){var t;return!!e.exported||!!e.undeclared||!!(e.global||e.scope.resolve()instanceof Lt)&&(t=this.toplevel,!$e(e.orig,function(e){return t[e instanceof Ot?"funcs":"vars"]}))},cn.prototype.compress=function(e){(e=e.resolve_defines(this)).hoist_exports(this),this.option("expression")&&e.process_expression(!0);for(var t=this.options.merge_vars,n=+this.options.passes||1,i=1/0,r=!1,s={ie:this.option("ie")},o=0;o<n;o++)if(e.figure_out_scope(s),(0<o||this.option("reduce_vars"))&&e.reset_opt_flags(this),this.options.merge_vars=t&&(r||o==n-1),e=e.transform(this),1<n){var a=0;if(e.walk(new Ue(function(){a++})),Oe.info("pass {pass}: last_count: {min_count}, count: {count}",{pass:o,min_count:i,count:a}),a<i)i=a,r=!1;else{if(r)break;r=!0}}return this.option("expression")&&e.process_expression(!1),e},(t=function(e,t){e.DEFMETHOD("optimize",function(e){return this._optimized||e.has_directive("use asm")?this:((e=t(this,e))._optimized=!0,e)})})(Oe,function(e,t){return e}),Lt.DEFMETHOD("hoist_exports",function(e){if(e.option("hoist_exports")){for(var t=this.body,n=[],i=0;i<t.length;i++){var r=t[i];r instanceof ue?(t[i]=r=r.body,r instanceof st?r.definitions.forEach(function(e){e.name.match_symbol(s,!0)}):s(r.name)):r instanceof g&&(t.splice(i--,1),[].push.apply(n,r.properties))}n.length&&t.push(We(g,this,{properties:n}))}function s(e){e instanceof Pt&&((e=We(M,e)).alias=We(H,e,{value:e.name}),n.push(e))}}),Le.DEFMETHOD("process_expression",function(r,s){var o=this,a=new Vt(function(e){var t;if(r){if((e=e instanceof w?We(je,e,{body:We(H,e)}):e)instanceof je)return s?s(e):We(Ne,e,{value:e.body})}else if(e instanceof Ne)return s?s(e):(t=e.value)instanceof H?We(w,t):We(je,e,{body:t||We(Be,e,{operator:"void",expression:We(De,e,{value:0})})});if(e instanceof Ke){if(e instanceof Pe){if(e!==o)return e}else if("awaits"===r&&e instanceof Rt&&e.bfinally)return e;for(var n=e.body.length;0<=--n;){var i=e.body[n];if(!li(i,!0)){e.body[n]=i.transform(a);break}}}else e instanceof Ce?(e.body=e.body.transform(a),e.alternative&&(e.alternative=e.alternative.transform(a))):e instanceof qt&&(e.body=e.body.transform(a));return e});o.transform(a)}),Lt.DEFMETHOD("unwrap_expression",function(){switch(this.body.length){case 0:return We(Be,this,{operator:"void",expression:We(De,this,{value:0})});case 1:var e=this.body[0];if(e instanceof w)return We(H,e);if(e instanceof je)return e.body;default:return We(ke,this,{expression:We(gt,this,{argnames:[],body:this.body}).init_vars(this),args:[]})}}),Oe.DEFMETHOD("wrap_expression",function(){var e=this;return e=(e=Ht(e)?e:We(je,e,{body:e}))instanceof Lt?e:We(Lt,e,{body:[e]})}),Mr=/^(0|[1-9][0-9]*)$/,(e=function(e,t){e.DEFMETHOD("reduce_vars",t)})(Oe,ve),e(xe,function(s,e,t){var o=this,a=o.left,c=o.right,n=a instanceof qe&&a.definition(),i=n||a instanceof Te;switch(o.operator){case"=":return a.equals(c)&&!a.has_side_effects(t)?(c.walk(s),function e(t){Fn(t);{var n;t instanceof lt?e(t.expression):t instanceof At?(e(t.expression),t.property.walk(s)):t instanceof qe?(Pn(n=t.definition(),t),n.fixed&&(t.fixed=n.fixed,t.fixed.assigns?t.fixed.assigns.push(o):t.fixed.assigns=[o])):t.walk(s)}}(a),o.redundant=!0):n&&c instanceof yt?(l(),c.parent_scope.resolve().fn_defs.push(c),c.safe_ids=null,n.fixed&&o.write_only||En(s,n,c),!0):i?(c.walk(s),l(),!0):void Ln(a);case"&&=":case"||=":case"??=":var r=!0;default:if(!i)return Ln(a),p();n.assignments++;var u,f=n.fixed;return fn(t,s,o,o,0)?(n.fixed=!1,p()):(u=On(s,n),r&&h(s,!0),c.walk(s),r&&Tn(s),u&&!a.in_arg&&Dn(s,n)?(Pn(n,a),Cn(s,n),n.single_use&&(n.single_use=!1),a.fixed=n.fixed=function(){return We(we,o,{operator:o.operator.slice(0,-1),left:_n(a,f),right:o.right})},a.fixed.assigns=f&&f.assigns?f.assigns.slice():[n.orig[0]],a.fixed.assigns.push(o),a.fixed.to_binary=vn(function(e){return e.left},f)):(a.walk(s),n.fixed=!1),!0)}function l(){var e=n&&kr(s,n),r=fn(t,s,o,c,0,In(c),e);jn(s,t,a,function(){return o.right},function(e,t,n){var i;e instanceof qe?((i=e.definition()).assignments++,t&&!e.in_arg&&Dn(s,i)?(Pn(i,e),Cn(s,i),(a instanceof Te||1==i.orig.length&&i.orig[0]instanceof Ot)&&(i.single_use=!1),s.loop_ids[i.id]=s.in_loop,i.fixed=r?0:t,e.fixed=t,e.fixed.assigns=[o],Nn(s,i,e.scope,o,c,0,1)):(n(),i.fixed=!1)):(Ln(e),n())})}function p(){if(r)return a.walk(s),h(s,!0),c.walk(s),Tn(s),!0}}),e(we,function(e){if(Ye[this.operator])return this.left.walk(e),h(e,!0),this.right.walk(e),Tn(e),!0}),e(Qe,function(e,t,n){bn(0,n,this)}),e(ke,function(t,e){var n,i=this.expression;if(i instanceof yt)n=ai(this),this.args.forEach(function(e){e.walk(t),e instanceof Me&&(n=!1)}),n&&(i.reduce_vars=Mn),i.walk(t),n&&delete i.reduce_vars;else{if("Call"==this.TYPE)switch(t.in_boolean_context()){case"d":var r=!0;case!0:!function e(t,n){t instanceof xe?"="==t.operator&&(e(t.left,n),e(t.right,n)):t instanceof we?Ye[t.operator]&&(e(t.left,n),e(t.right,n)):t instanceof Ee?(e(t.consequent,n),e(t.alternative,n)):t instanceof qe&&((t=t.definition()).bool_return++,n)&&t.drop_return++}(i,r)}i.walk(t);var s=this.optional,s=(s&&h(t,!0),this.args.forEach(function(e){e.walk(t)}),s&&Tn(t),i instanceof qe&&i.fixed_value());s instanceof Pe?En(t,i.definition(),s):t.find_parent(Le).may_call_this()}return!0}),e(et,function(t,e,n){var i,r,s=this,n=(bn(0,n,s),s.extends&&s.extends.walk(t),s.properties.filter(function(e){return Fn(e),e.key instanceof Oe&&(t.push(e),e.key.walk(t),t.pop()),e.value}));return s.name&&(i=s.name.definition(),((r=t.parent())instanceof ue||r instanceof fe)&&(i.single_use=!1),Dn(t,i,!0)?(Cn(t,i),t.loop_ids[i.id]=t.in_loop,i.fixed=function(){return s},i.fixed.assigns=[s],or(i)||(i.single_use=!1)):i.fixed=!1),n.forEach(function(e){t.push(e),!e.static||ui(e)&&e.value.contains_this()?(h(t),e.value.walk(t),Tn(t)):e.value.walk(t),t.pop()}),!0}),e(c,function(e,t,n){return h(e,!0),xn(e,n,this),t(),An(e,this),!0}),e(Ee,function(e){return this.condition.walk(e),h(e,!0),this.consequent.walk(e),Tn(e),h(e,!0),this.alternative.walk(e),Tn(e),!0}),e(Ae,function(e){return h(e,!0),this.value.walk(e),Tn(e),this.name.walk(e),!0}),e(ft,function(e){var t=e.in_loop;return e.in_loop=this,h(e),this.body.walk(e),tr(this,e.parent())&&(Tn(e),h(e)),this.condition.walk(e),Tn(e),e.in_loop=t,!0}),e(dt,function(e,t,n){var i=this,n=(bn(0,n,i),i.init&&i.init.walk(e),e.in_loop);return e.in_loop=i,h(e),i.condition&&i.condition.walk(e),i.body.walk(e),i.step&&(tr(i,e.parent())&&(Tn(e),h(e)),i.step.walk(e)),Tn(e),e.in_loop=n,!0}),e(mt,function(e,t,n){bn(0,n,this),this.object.walk(e);var n=e.in_loop,i=(e.in_loop=this,h(e),this.init);return i instanceof st?i.definitions[0].name.mark_symbol(function(e){e instanceof Pt&&((e=e.definition()).assignments++,e.fixed=!1)},e):i instanceof Te||i instanceof qe?i.mark_symbol(function(e){var t;e instanceof qe&&(Pn(t=e.definition(),e),t.assignments++,e.is_immutable()||(t.fixed=!1))},e):i.walk(e),this.body.walk(e),Tn(e),e.in_loop=n,!0}),e(Ce,function(e){return this.condition.walk(e),h(e,!0),this.body.walk(e),Tn(e),this.alternative&&(h(e,!0),this.alternative.walk(e),Tn(e)),!0}),e(he,function(e){return h(e,!0),this.body.walk(e),Tn(e),!0}),e(Pe,function(e,t,n){var i=this;return wn(e,i)&&ye(e.fn_visited,i)&&(i.inlined=!1,h(e),xn(e,n,i),t(),An(e,i),i.name)&&Nn(e,i.name.definition(),i,i.name,i,0,1),!0}),e(vt,function(e,t,n){var i=this.name.definition(),r=e.parent();return(r instanceof ue||r instanceof fe)&&(i.single_use=!1),wn(e,this)&&ye(e.fn_visited,this)&&(this.inlined=!1,h(e),xn(e,n,this),t(),An(e,this)),!0}),e(At,function(e){if(this.optional)return this.expression.walk(e),h(e,!0),this.property.walk(e),Tn(e),!0}),e(Tt,function(t,e,n){bn(0,n,this),this.expression.walk(t);var i=!0;return this.body.forEach(function(e){e instanceof rt||(e.expression.walk(t),i&&h(t,!(i=!1)))}),i||Tn(t),z(this,t),!0}),e(j,function(e){return h(e,!0),z(this,e),Tn(e),!0}),e(de,function(){this.definition().fixed=!1}),e(me,function(){this.definition().fixed=!1}),e(qe,function(n,e,t){var i,r=this,s=r.definition(),o=s.fixed||s.last_ref&&s.last_ref.fixed,a=(Pn(s,r),1==s.references.length&&!s.fixed&&s.orig[0]instanceof Ot&&(n.loop_ids[s.id]=n.in_loop),kr(n,s));switch(a&&a.enclosed.forEach(function(e){var t;s===e||e.scope.resolve()===a||!(t=e.fixed&&e.fixed.assigns)||t[t.length-1]instanceof ze||(t=n.safe_ids[e.id])&&(t.assign=!0)}),"m"==s.single_use&&s.fixed&&(s.fixed=0,s.single_use=!1),s.fixed){case 0:On(n,s)||(s.fixed=!1);case!1:var c=s.redefined();c&&dn(s.scope,r.scope)&&(c.single_use=!1);break;case void 0:s.fixed=!1;break;default:On(n,s)?(r.in_arg&&s.orig[0]instanceof ge&&(r.fixed=s.scope),i=r.fixed_value(),a?s.recursive_refs++:!i||(c=s,!t.option("unused"))||c.scope.pinned()||!1===c.single_use||c.references.length-c.recursive_refs!=1||on(c)&&c.scope.uses_arguments?s.single_use=!1:(s.in_loop=n.loop_ids[s.id]!==n.in_loop,s.single_use=ln(i)&&!i.pinned()&&(!s.in_loop||n.parent()instanceof ke)||!s.in_loop&&s.scope===r.scope.resolve()&&i.is_constant_expression()),fn(t,n,r,i,0,In(i),a)&&(s.single_use?s.single_use="m":s.fixed=0),s.fixed&&n.loop_ids[s.id]!==n.in_loop&&(s.cross_loop=!0),Nn(n,s,r.scope,r,i,0,1)):s.fixed=!1}r.fixed||(r.fixed=0===s.fixed?o:s.fixed),i instanceof Pe&&!((o=n.parent())instanceof ke&&o.expression===r)&&En(n,s,i)}),e(It,function(t,e){var n,i=this.tag;if(i)return i instanceof yt?(this.expressions.forEach(function(e){e.walk(t)}),i.walk(t)):(i.walk(t),this.expressions.forEach(function(e){e.walk(t)}),(n=i instanceof qe&&i.fixed_value())instanceof Pe?En(t,i.definition(),n):t.find_parent(Le).may_call_this()),!0}),e(Lt,function(e,t,n){return this.globals.each(function(e){yn(0,n,e)}),h(e,!0),xn(e,n,this),t(),An(e,this),!0}),e(Rt,function(e,t,n){return bn(0,n,this),h(e,!0),z(this,e),Tn(e),this.bcatch&&(h(e,!0),this.bcatch.walk(e),Tn(e)),this.bfinally&&this.bfinally.walk(e),!0}),e(jt,function(e,t){var n=this;if(nn[n.operator]){var i,r,s=n.expression;if(s instanceof qe)return(i=s.definition()).assignments++,r=i.fixed,On(e,i)&&!s.in_arg&&Dn(e,i)?(Pn(i,s),Cn(e,i),i.single_use&&(i.single_use=!1),i.fixed=function(){return We(we,n,{operator:n.operator.slice(0,-1),left:We(Be,n,{operator:"+",expression:_n(s,r)}),right:We(De,n,{value:1})})},i.fixed.assigns=r&&r.assigns?r.assigns.slice():[],i.fixed.assigns.push(n),n instanceof Be?s.fixed=i.fixed:(s.fixed=function(){return We(Be,n,{operator:"+",expression:_n(s,r)})},s.fixed.assigns=r&&r.assigns,s.fixed.to_prefix=vn(function(e){return e.expression},i.fixed))):(s.walk(e),i.fixed=!1),!0;Ln(s)}}),e(ze,function(i,e,t){var n,r=this,s=r.value;return s instanceof yt&&r.name instanceof Pt?(o(),s.parent_scope.resolve().fn_defs.push(s),s.safe_ids=null,(n=r.name.definition()).fixed||En(i,n,s)):s?(s.walk(i),o()):i.parent()instanceof bt&&o(),!0;function o(){jn(i,t,r.name,function(){return r.value||We(Ve,r)},function(e,t){var n=e.definition();t&&Dn(i,n,!0)?(Cn(i,n),i.loop_ids[n.id]=i.in_loop,n.fixed=t,n.fixed.assigns=[r],(e instanceof I&&n.redefined()||!mn(e)&&!or(n))&&(n.single_use=!1)):n.fixed=!1})}}),e(Ft,function(e,t){var n=e.in_loop;return e.in_loop=this,h(e),t(),Tn(e),e.in_loop=n,!0}),Lt.DEFMETHOD("reset_opt_flags",function(n){var i=new Ue(n.option("reduce_vars")?function(e,t){return Fn(e),e.reduce_vars(i,t,n)}:Fn);i.fn_scanning=null,i.fn_visited=[],i.in_loop=null,i.loop_ids=Object.create(null),i.safe_ids=Object.create(null),i.safe_ids.seq={},this.walk(i)}),Ct.DEFMETHOD("fixed_value",function(e){var t=this.definition(),n=t.fixed;return n?((n=this.fixed?this.fixed:n)instanceof Oe?n:n()).tail_node():(n=0===n&&this.fixed)&&(n=(n instanceof Oe?n:n()).tail_node(),e&&1!=t.escaped.depth&&vr(n,!0)||n.is_constant()?n:void 0)}),qe.DEFMETHOD("is_immutable",function(){var e=this.redef||this.definition();return e.orig[0]instanceof ge&&(1==e.orig.length||!(!this.in_arg||e.orig[1]instanceof Fe))}),Oe.DEFMETHOD("convert_symbol",ve),Ae.DEFMETHOD("convert_symbol",qn),Te.DEFMETHOD("convert_symbol",qn),Pt.DEFMETHOD("convert_symbol",Bn),qe.DEFMETHOD("convert_symbol",Bn),Ae.DEFMETHOD("mark_symbol",zn),Te.DEFMETHOD("mark_symbol",zn),Pt.DEFMETHOD("mark_symbol",Un),qe.DEFMETHOD("mark_symbol",Un),Oe.DEFMETHOD("match_symbol",function(e){return e(this)}),Ae.DEFMETHOD("match_symbol",$n),Te.DEFMETHOD("match_symbol",$n),Fr=X("Infinity NaN undefined"),Wr=X("Array Boolean clearInterval clearTimeout console Date decodeURI decodeURIComponent encodeURI encodeURIComponent Error escape eval EvalError Function isFinite isNaN JSON Map Math Number parseFloat parseInt RangeError ReferenceError RegExp Object Set setInterval setTimeout String SyntaxError TypeError unescape URIError WeakMap WeakSet"),qe.DEFMETHOD("is_declared",function(e){return this.defined||!this.definition().undeclared||e.option("unsafe")&&Wr[this.name]}),(e=function(e,t){e.DEFMETHOD("in_strict_mode",t)})(et,W),e(Le,function(e){for(var t=this.body,n=0;n<t.length;n++){var i=t[n];if(!(i instanceof w))break;if("use strict"==i.value)return!0}var r=this.parent_scope;return r?r.resolve(!0).in_strict_mode(e):e.option("module")}),(e=function(e,t){e.DEFMETHOD("is_truthy",t)})(Oe,He),e(be,W),e(xe,function(){return"="==this.operator&&this.right.is_truthy()}),e(Pe,W),e(wt,W),e(G,W),e(Re,function(){return this.tail_node().is_truthy()}),e(qe,function(){var e=this.fixed_value();if(!e)return!1;this.is_truthy=He;e=e.is_truthy();return delete this.is_truthy,e}),(e=function(e,t){e.DEFMETHOD("is_negative_zero",t)})(Oe,W),e(be,He),e(xe,function(){var e=this.operator;return"="==e?this.right.is_negative_zero():_i(e.slice(0,-1),this.left,this.right)}),e(we,function(){return _i(this.operator,this.left,this.right)}),e(E,function(){return 0==this.value&&1/this.value<0}),e(Pe,He),e(wt,He),e(G,He),e(Re,function(){return this.tail_node().is_negative_zero()}),e(qe,function(){var e=this.fixed_value();if(!e)return!0;this.is_negative_zero=W;e=e.is_negative_zero();return delete this.is_negative_zero,e}),e(Be,function(){return"+"==this.operator&&this.expression.is_negative_zero()||"-"==this.operator}),e=function(e,t){e.DEFMETHOD("_dot_throw",t)},Oe.DEFMETHOD("may_throw_on_access",function(e,t){return!e.option("pure_getters")||this._dot_throw(e,t)}),e(Oe,vi),e(be,He),e(xe,function(e){var t=this.operator,n=this.left,i=this.right;return"="!=t?Ye[t.slice(0,-1)]&&(n._dot_throw(e)||i._dot_throw(e)):!!i._dot_throw(e)&&(!(n instanceof qe&&i instanceof we&&"||"==i.operator&&n.name==i.left.name)||i.right._dot_throw(e))}),e(we,function(e){return Ye[this.operator]&&(this.left._dot_throw(e)||this.right._dot_throw(e))}),e(et,function(e,t){return vi(e,t)&&!$e(this.properties,function(e){return!!e.private||!e.static||!(e instanceof a||e instanceof f)})}),e(Ee,function(e){return this.consequent._dot_throw(e)||this.alternative._dot_throw(e)}),e(E,He),e(lt,function(e,t){return!(!vi(e,t)||((e=this.expression)instanceof qe&&(e=e.fixed_value()),"prototype"==this.property&&ln(e)))}),e(Pe,He),e(T,W),e(wt,function(t,n){return vi(t,n)&&!$e(this.properties,function(e){return!(e instanceof x||e instanceof C||"__proto__"===e.key&&e.value._dot_throw(t,n))})}),e(Et,function(e,t){return vi(e,t)&&!this.scope.resolve().new}),e(Re,function(e){return this.tail_node()._dot_throw(e)}),e(qe,function(e,t){if(this.is_undefined)return!0;if(vi(e,t)&&!(ci(this)&&this.is_declared(e)||this.is_immutable())){t=this.definition();if(hn(t)&&!t.scope.rest&&$e(t.scope.argnames,function(e){return e instanceof Fe}))return 2<t.scope.uses_arguments;t=this.fixed_value(!0);if(!t)return!0;if(this._dot_throw=W,t._dot_throw(e))return delete this._dot_throw,!0;this._dot_throw=He}return!1}),e(Be,function(){return"void"==this.operator}),e(Mt,He),e(Ve,W),(e=function(e,t){e.DEFMETHOD("is_defined",t)})(Oe,He),e(be,W),e(xe,function(e){var t=this.operator;return"="==t?this.right.is_defined(e):yi(e,t.slice(0,-1),this)}),e(we,function(e){return yi(e,this.operator,this)}),e(Ee,function(e){return this.consequent.is_defined(e)&&this.alternative.is_defined(e)}),e(E,W),e(pe,He),e(Pe,W),e(wt,W),e(Re,function(e){return this.tail_node().is_defined(e)}),e(qe,function(e){if(this.is_undefined)return!1;if(ci(this)&&this.is_declared(e))return!0;if(this.is_immutable())return!0;var t=this.fixed_value();if(!t)return!1;this.is_defined=He;t=t.is_defined(e);return delete this.is_defined,t}),e(Be,function(){return"void"!=this.operator}),e(Mt,W),e(Ve,He),(e=function(e,t){e.DEFMETHOD("is_boolean",t)})(Oe,He),e(xe,function(e){return"="==this.operator&&this.right.is_boolean(e)}),qr=X("in instanceof == != === !== < <= >= >"),e(we,function(e){return qr[this.operator]||Ye[this.operator]&&this.left.is_boolean(e)&&this.right.is_boolean(e)}),e(l,W),Br=X("every hasOwnProperty isPrototypeOf propertyIsEnumerable some"),e(ke,function(e){return!!e.option("unsafe")&&(e=this.expression)instanceof lt&&(Br[e.property]||"test"==e.property&&e.expression instanceof G)}),e(Ee,function(e){return this.consequent.is_boolean(e)&&this.alternative.is_boolean(e)}),e(y,He),e(Re,function(e){return this.tail_node().is_boolean(e)}),e(qe,function(e){var t=this.fixed_value();if(!t)return!1;this.is_boolean=He;t=t.is_boolean(e);return delete this.is_boolean,t}),Vr=X("! delete"),e(Be,function(){return Vr[this.operator]}),(e=function(e,t){e.DEFMETHOD("is_number",t)})(Oe,He),zr=X("- * / % ** & | ^ << >> >>>"),e(xe,function(e){return zr[this.operator.slice(0,-1)]||"="==this.operator&&this.right.is_number(e)}),e(we,function(e){return!!zr[this.operator]||"+"==this.operator&&(this.left.is_boolean(e)||this.left.is_number(e))&&(this.right.is_boolean(e)||this.right.is_number(e))}),Ur=X(["charCodeAt","getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","indexOf","lastIndexOf","localeCompare","push","search","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]),e(ke,function(e){return!!e.option("unsafe")&&(e=this.expression)instanceof lt&&(Ur[e.property]||ci(e.expression)&&"Math"==e.expression.name)}),e(Ee,function(e){return this.consequent.is_number(e)&&this.alternative.is_number(e)}),e(y,He),e(De,W),e(Re,function(e){return this.tail_node().is_number(e)}),e(qe,function(e,t){var n=this.fixed_value();if(!n)return!1;if(t&&n instanceof Be&&"+"==n.operator&&n.expression.equals(this))return!1;this.is_number=He;t=n.is_number(e);return delete this.is_number,t}),$r=X("+ - ~ ++ --"),e(jt,function(){return $r[this.operator]}),(e=function(e,t){e.DEFMETHOD("is_string",t)})(Oe,He),e(xe,function(e){switch(this.operator){case"+=":if(this.left.is_string(e))return!0;case"=":return this.right.is_string(e)}}),e(we,function(e){return"+"==this.operator&&(this.left.is_string(e)||this.right.is_string(e))}),Hr=X(["charAt","substr","substring","toExponential","toFixed","toLowerCase","toPrecision","toString","toUpperCase","trim"]),e(ke,function(e){return!!e.option("unsafe")&&(e=this.expression)instanceof lt&&Hr[e.property]}),e(Ee,function(e){return this.consequent.is_string(e)&&this.alternative.is_string(e)}),e(Re,function(e){return this.tail_node().is_string(e)}),e(H,W),e(qe,function(e){var t=this.fixed_value();if(!t)return!1;this.is_string=He;t=t.is_string(e);return delete this.is_string,t}),e(It,function(e){return!this.tag||Ar(e,this.tag)}),e(Be,function(){return"typeof"==this.operator}),Ye=X("&& || ??"),e=function(e,t){e.DEFMETHOD("_find_defs",t)},Lt.DEFMETHOD("resolve_defines",function(s){return s.option("global_defs")?(this.figure_out_scope({ie:s.option("ie")}),this.transform(new Vt(function(e){var t=e._find_defs(s,"");if(t){for(var n,i=0,r=e;(n=this.parent(i++))&&n instanceof Ie&&n.expression===r;)r=n;if(!sn(r,n))return t;bi(e)}}))):this}),e(Oe,ve),e(lt,function(e,t){return this.expression._find_defs(e,"."+this.property+t)}),e(Pt,function(e){this.definition().global&&J(e.option("global_defs"),this.name)&&bi(this)}),e(qe,function(e,t){if(this.definition().global)return e=e.option("global_defs"),t=this.name+t,J(e,t)?function t(e,n){if(e instanceof Oe)return e.clone(!0);if(Array.isArray(e))return We(be,n,{elements:e.map(function(e){return t(e,n)})});if(e&&"object"==typeof e){var i,r=[];for(i in e)J(e,i)&&r.push(We(St,n,{key:i,value:t(e[i],n)}));return We(wt,n,{properties:r})}return Jn(e,n)}(e[t],this):void 0}),d.DEFMETHOD("first_statement",Ai),m.DEFMETHOD("first_statement",Ai),Pe.DEFMETHOD("first_statement",function(){return Ei(this.body)}),Pe.DEFMETHOD("length",function(){for(var e=this.argnames,t=0;t<e.length&&!(e[t]instanceof Ae);t++);return t}),es=ki({Array:["indexOf","join","lastIndexOf","slice"].concat(e=["constructor","toString","valueOf"]),Boolean:e,Function:e,Number:["toExponential","toFixed","toPrecision"].concat(e),Object:e,RegExp:["exec","test"].concat(e),String:["charAt","charCodeAt","concat","indexOf","italics","lastIndexOf","match","replace","search","slice","split","substr","substring","toLowerCase","toUpperCase","trim"].concat(e)}),ts=ki({Array:["isArray"],Math:["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","atan2","pow","max","min"],Number:["isFinite","isNaN"],Object:["create","getOwnPropertyDescriptor","getOwnPropertyNames","getPrototypeOf","isExtensible","isFrozen","isSealed","keys"],String:["fromCharCode","raw"]}),(e=function(e,t){e.DEFMETHOD("is_constant",t)})(Oe,He),e(E,W),e(G,He),Gr=X("! ~ - + void"),e(Be,function(){return Gr[this.operator]&&this.expression instanceof E}),e=function(e,t){e.DEFMETHOD("_eval",t)},Oe.DEFMETHOD("evaluate",function(e,t){var n;return!e.option("evaluate")||(n=this._eval(e,t,e=[],1),e.forEach(function(e){delete e._eval}),!t&&n&&!(n instanceof RegExp)&&("function"==typeof n||"object"==typeof n))?this:n}),Yr=new Ue(function(e){e instanceof xe&&Pi(e.left),e instanceof mt&&Pi(e.init),e instanceof jt&&nn[e.operator]&&Pi(e.expression)}),e(O,function(){throw new Error(string_template("Cannot evaluate a statement [{start}]",this))}),e(Je,Xt),e(o,Xt),e(et,Xt),e(Oe,Xt),e(E,function(){return this.value}),e(xe,function(e,t,n,i){var r=this.left;if(!t){if(!(r instanceof qe))return this;if(!J(r,"_eval")){if(!r.fixed)return this;var s=r.definition();if(!s.fixed)return this;if(s.undeclared)return this;if(s.last_ref!==r)return this;if("m"==s.single_use)return this;if(this.right.has_side_effects(e))return this}}s=this.operator,s=!J(r,"_eval")&&r instanceof qe&&r.fixed&&r.definition().fixed?r:"="==s?this.right:We(we,this,{operator:s.slice(0,-1),left:r,right:this.right}),r.walk(Yr),s=s._eval(e,t,n,i);return"object"==typeof s?this:(Pi(r),s)}),e(Re,function(e,t,n,i){if(!t)return this;for(var r=this.expressions,s=0,o=r.length-1;s<o;s++)r[s].walk(Yr);var a=r[o],e=a._eval(e,t,n,i);return e===a?this:e}),e(Pe,function(e){return e.option("unsafe")?((e=function(){}).node=this,e.toString=function(){return"function(){}"},e):this}),e(be,function(e,t,n,i){if(e.option("unsafe")){for(var r=[],s=0;s<this.elements.length;s++){var o=this.elements[s];if(o instanceof pe)return this;var a=o._eval(e,t,n,i);if(o===a)return this;r.push(a)}return r}return this}),e(wt,function(e,t,n,i){if(e.option("unsafe")){for(var r={},s=0;s<this.properties.length;s++){var o=this.properties[s];if(!(o instanceof St))return this;var a=o.key;if(a instanceof Oe&&(a=a._eval(e,t,n,i))===o.key)return this;switch(a){case"__proto__":case"toString":case"valueOf":return this}if(r[a]=o.value._eval(e,t,n,i),r[a]===o.value)return this}return r}return this}),Jr=X("! typeof void"),e(Be,function(e,t,n,i){var r=this.expression,s=this.operator;if(e.option("typeofs")&&"typeof"==s&&(r instanceof Pe||r instanceof qe&&r.fixed_value()instanceof Pe))return"function";var o=r instanceof qe&&r.definition(),a=(Jr[s]||o&&o.fixed||i++,r.walk(Yr),r._eval(e,t,n,i));if(a===r)return t&&"void"==s?void 0:this;switch(s){case"!":return!a;case"typeof":return a instanceof RegExp?this:typeof a;case"void":return;case"~":return~a;case"-":return-a;case"+":return+a;case"++":case"--":if(!o)return this;if(!t){if(o.undeclared)return this;if(o.last_ref!==r)return this}return J(r,"_eval")&&(a=+(s[0]+1)+ +a),Pi(r),a}return this}),e(Mt,function(e,t,n,i){var r=this.expression;if(r instanceof qe){if(!J(r,"_eval")){if(!r.fixed)return this;if(!t){var s=r.definition();if(!s.fixed)return this;if(s.undeclared)return this;if(s.last_ref!==r)return this}}}else if(!t)return this;r instanceof qe&&r.definition().fixed||i++,r.walk(Yr);s=r._eval(e,t,n,i);return s===r?this:(Pi(r),+s)}),Xr=X("&& || === !=="),e(we,function(e,t,n,i){Xr[this.operator]||i++;var r=this.left._eval(e,t,n,i);if(r===this.left)return this;if(this.operator==(r?"||":"&&"))return r;var s,o=this.right._eval(e,t&&!(r&&"object"==typeof r),n,i);if(o===this.right)return this;switch(this.operator){case"&&":s=r&&o;break;case"||":s=r||o;break;case"??":s=null==r?o:r;break;case"|":s=r|o;break;case"&":s=r&o;break;case"^":s=r^o;break;case"+":s=r+o;break;case"-":s=r-o;break;case"*":s=r*o;break;case"/":s=r/o;break;case"%":s=r%o;break;case"<<":s=r<<o;break;case">>":s=r>>o;break;case">>>":s=r>>>o;break;case"==":s=r==o;break;case"===":s=r===o;break;case"!=":s=r!=o;break;case"!==":s=r!==o;break;case"<":s=r<o;break;case"<=":s=r<=o;break;case">":s=o<r;break;case">=":s=o<=r;break;case"**":s=Math.pow(r,o);break;case"in":if(o&&"object"==typeof o&&J(o,r)){s=!0;break}default:return this}if(isNaN(s))return e.find_parent(qt)?this:s;if(e.option("unsafe_math")&&!t&&s&&"number"==typeof s&&("+"==this.operator||"-"==this.operator)){n=Math.max(0,a(r),a(o));if(n<16)return+s.toFixed(n)}return s;function a(e){e=/(\.[0-9]*)?(e[^e]+)?$/.exec(+e);return(e[1]||".").length-1-(e[2]||"").slice(1)}}),e(Ee,function(e,t,n,i){var r=this.condition._eval(e,t,n,i);return r===this.condition||(e=(r=r?this.consequent:this.alternative)._eval(e,t,n,i))===r?this:e}),e(qe,function(e,t,n,i){var r,s=this.fixed_value();if(!s)return this;if(J(s,"_eval"))r=s._eval();else{if(this._eval=Xt,r=s._eval(e,t,n,i),delete this._eval,r===s)return this;s._eval=function(){return r},n.push(s)}return r&&"object"==typeof r&&!function(t,e){var n=t.definition().escaped;switch(n.length){case 0:return 1;case 1:var i=!1;return n[0].walk(new Ue(function(e){return!!i||(e===t?i=!0:e instanceof Le||void 0)})),i;default:return e<=n.depth}}(this,i)?this:r}),Kr={Array:Array,Math:Math,Number:Number,Object:Object,String:String},Qr=ki({Math:["E","LN10","LN2","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],Number:["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"]}),Zr=X("global ignoreCase multiline source"),e(Ie,function(e,t,n,i){if(e.option("unsafe")){var r,s=this.expression;if(!ci(s)&&(null==(r=s._eval(e,t,n,i+1))||r===s))return this;var o=this.property;if(o instanceof Oe&&(o=o._eval(e,t,n,i))===this.property)return this;if(void 0===r){e=Qr[s.name];if(!e||!e[o])return this;r=Kr[s.name]}else if(r instanceof RegExp){if(!Zr[o])return this}else if("object"==typeof r){if(!J(r,o))return this}else if("function"==typeof r)switch(o){case"name":return r.node.name?r.node.name.name:"";case"length":return r.node.length();default:return this}return r[o]}return this}),e(ke,function(i,r,s,o){var e=this.expression,t=e instanceof qe?e.fixed_value():e;if(t instanceof d||t instanceof ot||t instanceof gt){if(!t.evaluating&&!(t.name&&0<t.name.definition().recursive_refs||this.is_expr_pure(i))){var a=Oi(this.args,i,r,s,o);if($e(t.argnames,function(e,t){if(e instanceof Ae){if(!a)return!1;if(void 0===a[t]){var n=e.value._eval(i,r,s,o);if(n===e.value)return!1;a[t]=n}e=e.name}return!(e instanceof Te)})&&!(t.rest instanceof Te)&&(a||r)){var c,n=t.first_statement();if(n instanceof Ne)return(f=n.value)?(c=[],a&&(!$e(t.argnames,function(e,t){return p(e,a[t])})||t.rest&&!p(t.rest,a.slice(t.argnames.length)))&&!r||(r&&t.argnames.forEach(function(e){e instanceof Ae&&e.value.walk(Yr)}),t.evaluating=!0,f=f._eval(i,r,s,o),t.evaluating=!1),c.forEach(function(e){delete e._eval}),f===n.value?this:f):void 0;if(r){t.walk(Yr);var u=!1;if(t.evaluating=!0,z(t,new Ue(function(e){return!!u||(e instanceof Ne?(e.value&&void 0!==e.value._eval(i,!0,s,o)&&(u=!0),!0):e instanceof Le&&e!==t||void 0)})),t.evaluating=!1,!u)return}}}}else if(i.option("unsafe")&&e instanceof Ie){var f,n=e.property;if(n instanceof Oe&&(n=n._eval(i,r,s,o))===e.property)return this;e=e.expression;if(ci(e)){var l=ts[e.name];if(!l||!l[n])return this;f=Kr[e.name]}else{if(null==(f=e._eval(i,r,s,o+1))||f===e)return this;l=es[f.constructor.name];if(!l||!l[n])return this;if(f instanceof RegExp&&f.global&&!(e instanceof G))return this}if(!(a=Oi(this.args,i,r,s,o)))return this;if("replace"==n&&"function"==typeof a[1])return this;try{return f[n].apply(f,a)}catch(e){Oe.warn("Error evaluating {this} [{start}]",this)}finally{f instanceof RegExp&&(f.lastIndex=0)}}return this;function p(e,t){var n,i=(e=e instanceof Ae?e.name:e).definition();return i.orig[i.orig.length-1]===e&&(n=t,i.references.forEach(function(e){e._eval=function(){return n},c.push(e)}),!0)}}),e(y,Xt),e(It,function(e,t,n,i){if(e.option("templates")){if(this.tag){if(!Ar(e,this.tag))return this;c=function(e){return e}}var r=Oi(this.expressions,e,t,n,i);if(r){for(var s=!1,o=c(this.strings[0]),a=0;a<r.length;a++)o+=r[a]+c(this.strings[a+1]);if(!s)return o;this._eval=Xt}}return this;function c(e){return"string"!=typeof(e=Tr(e))&&(s=!0),e}}),(e=function(e,n){e.DEFMETHOD("negate",function(e,t){return n.call(this,e,t)})})(Oe,function(){return Di(this)}),e(O,function(){throw new Error("Cannot negate a statement")}),e(we,function(e,t){var n=this.clone(),i=this.operator;if(e.option("unsafe_comps"))switch(i){case"<=":return n.operator=">",n;case"<":return n.operator=">=",n;case">=":return n.operator="<",n;case">":return n.operator="<=",n}switch(i){case"==":return n.operator="!=",n;case"!=":return n.operator="==",n;case"===":return n.operator="!==",n;case"!==":return n.operator="===",n;case"&&":return n.operator="||",n.left=n.left.negate(e,t),n.right=n.right.negate(e),Ii(this,n,t);case"||":return n.operator="&&",n.left=n.left.negate(e,t),n.right=n.right.negate(e),Ii(this,n,t)}return Di(this)}),e(oe,function(){return Di(this)}),e(Ee,function(e,t){var n=this.clone();return n.consequent=n.consequent.negate(e),n.alternative=n.alternative.negate(e),Ii(this,n,t)}),e(yt,function(){return Di(this)}),e(Re,function(e){var t=this.expressions.slice();return t.push(t.pop().negate(e)),Ge(this,t)}),e(Be,function(){return"!"==this.operator?this.expression:Di(this)}),ns=X("Boolean decodeURI decodeURIComponent Date encodeURI encodeURIComponent Error escape EvalError isFinite isNaN Number Object parseFloat parseInt RangeError ReferenceError String SyntaxError TypeError unescape URIError"),is=X("Map Set WeakMap WeakSet"),ke.DEFMETHOD("is_expr_pure",function(e){if(e.option("unsafe")){var t=this.expression;if(ci(t)){if(ns[t.name])return!0;if(this instanceof y&&is[t.name])return!0}if(Ci(t))return!0}return e.option("annotations")&&this.pure||!e.pure_funcs(this)}),It.DEFMETHOD("is_expr_pure",function(e){var t,n=this.tag;if(!n)return!0;if(e.option("unsafe")){if(ci(n)&&ns[n.name])return!0;if(n instanceof lt&&ci(n.expression))return(t=ts[n.expression.name])&&(t[n.property]||"Math"==n.expression.name&&"random"==n.property)}return!e.pure_funcs(this)}),Oe.DEFMETHOD("is_call_pure",He),ke.DEFMETHOD("is_call_pure",function(e){if(!e.option("unsafe"))return!1;var t=this.expression;if(!(t instanceof lt))return!1;var n,i=t.expression,r=t.property;if(i instanceof be)n=es.Array;else if(i.is_boolean(e))n=es.Boolean;else if(i.is_number(e))n=es.Number;else if(i instanceof G)n=es.RegExp;else if(i.is_string(e)){if(n=es.String,"replace"==r){i=this.args[1];if(i&&!i.is_string(e))return!1}}else t.may_throw_on_access(e)||(n=es.Object);return n&&n[r]}),(e=function(e,t){e.DEFMETHOD("safe_to_spread",t)})(Oe,He),e(be,W),e(xe,function(){switch(this.operator){case"=":return this.right.safe_to_spread();case"&&=":case"||=":case"??=":return this.left.safe_to_spread()&&this.right.safe_to_spread()}return!0}),e(we,function(){return!Ye[this.operator]||this.left.safe_to_spread()&&this.right.safe_to_spread()}),e(E,W),e(Pe,W),e(wt,function(){return $e(this.properties,function(e){return!(e instanceof x||e instanceof Me)})}),e(Re,function(){return this.tail_node().safe_to_spread()}),e(qe,function(){var e=this.fixed_value();return e&&e.safe_to_spread()}),e(jt,W),(e=function(e,t){e.DEFMETHOD("has_side_effects",t)})(Oe,W),e(be,function(e){return Ni(this.elements,e,Li)}),e(xe,function(e){var t,n=this.left;return!(n instanceof Ie)||!((t=n.expression)instanceof Et)||!t.scope.resolve().new||n instanceof At&&n.property.has_side_effects(e)||this.right.has_side_effects(e)}),e(we,function(e){return this.left.has_side_effects(e)||this.right.has_side_effects(e)||!yr(this.operator,this.right,e)}),e(Ke,function(e){return Ni(this.body,e)}),e(ke,function(e){return!(this.is_expr_pure(e)||this.is_call_pure(e)&&!this.expression.has_side_effects(e))||Ni(this.args,e,Li)}),e(Ze,function(e){return this.expression.has_side_effects(e)||Ni(this.body,e)}),e(et,function(e){var t=this.extends;return!(!t||pn(t=t instanceof qe?t.fixed_value():t))||Ni(this.properties,e)}),e(u,function(e){return this.key instanceof Oe&&this.key.has_side_effects(e)||this.static&&this.value&&this.value.has_side_effects(e)}),e(Ee,function(e){return this.condition.has_side_effects(e)||this.consequent.has_side_effects(e)||this.alternative.has_side_effects(e)}),e(E,He),e(st,function(e){return Ni(this.definitions,e)}),e(at,function(e){return Ni(this.elements,e)}),e(ct,function(e){return this.key instanceof Oe&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),e(ut,function(e){return Ni(this.properties,e)}),e(lt,function(e){return this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)}),e(Z,He),e(Ce,function(e){return this.condition.has_side_effects(e)||this.body&&this.body.has_side_effects(e)||this.alternative&&this.alternative.has_side_effects(e)}),e(he,function(e){return this.body.has_side_effects(e)}),e(Pe,He),e(wt,function(e){return Ni(this.properties,e,function(e,t){e=e.expression;return!e.safe_to_spread()||e.has_side_effects(t)})}),e(Et,He),e(kt,function(e){return this.key instanceof Oe&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),e(Re,function(e){return Ni(this.expressions,e)}),e(je,function(e){return this.body.has_side_effects(e)}),e(At,function(e){return this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)||this.property.has_side_effects(e)}),e(Tt,function(e){return this.expression.has_side_effects(e)||Ni(this.body,e)}),e(Pt,He),e(qe,function(e){return!this.is_declared(e)||!mn(this,e)}),e(It,function(e){return!this.is_expr_pure(e)||Ni(this.expressions,e)}),e(Rt,function(e){return Ni(this.body,e)||this.bcatch&&this.bcatch.has_side_effects(e)||this.bfinally&&this.bfinally.has_side_effects(e)}),e(jt,function(e){return an[this.operator]||this.expression.has_side_effects(e)}),e(ze,function(){return this.value}),(e=function(e,t){e.DEFMETHOD("may_throw",t)})(Oe,W),e(E,He),e(Z,He),e(Pe,He),e(Et,He),e(Pt,He),e(be,function(e){return Ri(this.elements,e)}),e(xe,function(e){return!!this.right.may_throw(e)||!(!e.has_directive("use strict")&&"="==this.operator&&this.left instanceof qe)&&this.left.may_throw(e)}),e(Xe,function(e){return this.expression.may_throw(e)}),e(we,function(e){return this.left.may_throw(e)||this.right.may_throw(e)||!yr(this.operator,this.right,e)}),e(Ke,function(e){return Ri(this.body,e)}),e(ke,function(e){if(Ri(this.args,e))return!0;if(this.is_expr_pure(e))return!1;this.may_throw=W;e=ji(this.expression,e);return delete this.may_throw,e}),e(Ze,function(e){return this.expression.may_throw(e)||Ri(this.body,e)}),e(Ee,function(e){return this.condition.may_throw(e)||this.consequent.may_throw(e)||this.alternative.may_throw(e)}),e(Ae,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)}),e(st,function(e){return Ri(this.definitions,e)}),e(lt,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)}),e(mt,function(e){var t;return!!this.init.may_throw(e)||!!(t=this.object).may_throw(e)||!((t=t.tail_node())instanceof be||t.is_string(e))||this.body.may_throw(e)}),e(Ce,function(e){return this.condition.may_throw(e)||this.body&&this.body.may_throw(e)||this.alternative&&this.alternative.may_throw(e)}),e(he,function(e){return this.body.may_throw(e)}),e(wt,function(e){return Ri(this.properties,e)}),e(kt,function(e){return this.value.may_throw(e)||this.key instanceof Oe&&this.key.may_throw(e)}),e(Ne,function(e){return this.value&&this.value.may_throw(e)}),e(Re,function(e){return Ri(this.expressions,e)}),e(je,function(e){return this.body.may_throw(e)}),e(At,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)||this.property.may_throw(e)}),e(Tt,function(e){return this.expression.may_throw(e)||Ri(this.body,e)}),e(qe,function(e){return!this.is_declared(e)||!mn(this,e)}),e(It,function(e){if(Ri(this.expressions,e))return!0;if(this.is_expr_pure(e))return!1;if(!this.tag)return!1;this.may_throw=W;e=ji(this.tag,e);return delete this.may_throw,e}),e(Rt,function(e){return(this.bcatch?this.bcatch.may_throw(e):Ri(this.body,e))||this.bfinally&&this.bfinally.may_throw(e)}),e(jt,function(e){return this.expression.may_throw(e)&&!("typeof"==this.operator&&this.expression instanceof qe)}),e(ze,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)}),(e=function(e,t){e.DEFMETHOD("is_constant_expression",t)})(Oe,He),e(be,function(e){return Mi(this.elements,e)}),e(we,function(e){return this.left.is_constant_expression(e)&&this.right.is_constant_expression(e)&&yr(this.operator,this.right)}),e(et,function(e){var t=this.extends;return!(t&&!pn(t))&&Mi(this.properties,e)}),e(u,function(e){return"string"==typeof this.key&&(!this.value||this.value.is_constant_expression(e))}),e(E,W),e(Pe,function(i){var r=this,s=!0,o=[];return r.walk(new Ue(function(e,t){if(!s)return!0;if(e instanceof Qe)return e===r?void 0:(o.push(e),t(),o.pop(),!0);if(e instanceof qe){if(r.inlined||e.redef||e.in_arg)return!(s=!1);if(!r.variables.has(e.name)){t=e.definition();if(!Jt(t.scope,o)){if(i&&!t.redefined()){var n=i.find_variable(e.name);if(n?n===t:t.undeclared)return s="f",!0}s=!1}}return!0}return e instanceof Et?(Ut(r)&&$e(o,function(e){return!(e instanceof Le)||Ut(e)})&&(s=!1),!0):void 0})),s}),e(wt,function(e){return Mi(this.properties,e)}),e(kt,function(e){return"string"==typeof this.key&&this.value.is_constant_expression(e)}),e(jt,function(e){return this.expression.is_constant_expression(e)}),(e=function(e,t){e.DEFMETHOD("aborts",t)})(O,Q),e(R,Xt),e(Se,qi),e(j,qi),e(Ce,function(){return this.alternative&&Fi(this.body)&&Fi(this.alternative)&&this}),rs=X(["use asm","use strict"]),t(w,function(e,t){return!t.option("directives")||rs[e.value]&&t.has_directive(e.value)===e?e:We(Z,e)}),t(it,function(e,t){return t.option("drop_debugger")?We(Z,e):e}),t(he,function(e,t){if(e.body instanceof Ce||e.body instanceof N){var n=di([e.body],t);switch(n.length){case 0:e.body=We(Z,e);break;case 1:e.body=n[0];break;default:e.body=We(Se,e,{body:n})}}return t.option("unused")&&0==e.label.references.length?e.body:e}),t(xt,function(e,t){var n,i;return t.option("dead_code")&&(n=e.label)&&(i=t.loopcontrol_target(e),e.label=null,t.loopcontrol_target(e)===i?K(n.thedef.references,e):e.label=n),e}),t(Ke,function(e,t){return e.body=di(e.body,t),e}),t(Se,function(e,t){return e.body=di(e.body,t),Bi(e,t.parent())}),t(Pe,function(e,t){return Vi(e,t),e.body=di(e.body,t),e}),t(d,zi),t(m,zi),t(gt,function(t,e){Vi(t,e),t.body=di(t.body,e);var n=e.parent();if(e.option("inline"))for(var i=0;i<t.body.length;i++){var r=t.body[i];if(!(r instanceof w)){if(r instanceof Ne){if(i!=t.body.length-1)break;var s=r.value;if(!s||"Call"!=s.TYPE)break;if(s.is_expr_pure(e))break;var o,r=s.expression;if(r instanceof qe){if(t.name&&t.name.definition()===r.definition())break;o=r.fixed_value()}else o=r;if(!(o instanceof ot||o instanceof gt))break;if(o.rest)break;if(o.uses_arguments)break;if(o===r){if(o.parent_scope!==t)break;if(!$e(o.enclosed,function(e){return e.scope!==t}))break}if((o!==r||o.name)&&(n instanceof p||n instanceof S)&&n.value===e.self())break;if(o.contains_this())break;var a=o.argnames.length;if(0<a&&e.option("inline")<2)break;if(a>t.argnames.length)break;if(!$e(t.argnames,function(e){return e instanceof Fe}))break;if(!$e(s.args,function(e){return!(e instanceof Me)}))break;for(var c=0;c<a;c++){var u=s.args[c];if(!(u instanceof qe))break;if(u.definition()!==t.argnames[c].definition())break}if(c<a)break;for(;c<s.args.length&&!s.args[c].has_side_effects(e);c++);if(c<s.args.length)break;if(a<t.argnames.length&&!e.drop_fargs(t,n)){if(!e.drop_fargs(o,s))break;for(;o.argnames.push(o.make_var(Fe,o,"argument_"+a)),++a<t.argnames.length;);}return r}break}}return t}),ss=X("arguments await yield"),Le.DEFMETHOD("merge_variables",function(f){if(f.option("merge_vars")){for(var l,p,h=[],d={},m=this,a=[],c=[],u=0,g=new Gt,_=Object.create(null),v=Object.create(null),y=new Ue(function(n,e){var t,i,r,s,o,a;return n instanceof xe?(o=n.left,s=n.right,o instanceof Te?(s.walk(y),k(qe,E,o),!0):Ye[n.operator.slice(0,-1)]?(o.walk(y),w(),s.walk(y),o instanceof qe&&E(o),S(),!0):o instanceof qe?("="!=n.operator&&E(o,!0),s.walk(y),E(o),!0):void 0):n instanceof we?Ye[n.operator]?(u(n),!0):void 0:n instanceof N?((a=y.loopcontrol_target(n))instanceof _t||A(a),!0):n instanceof ke?((i=n.expression)instanceof yt?(n.args.forEach(function(e){e.walk(y)}),i.walk(y)):(e(),c(i)),!0):n instanceof et?(n.name&&n.name.walk(y),n.extends&&n.extends.walk(y),n.properties.filter(function(e){return e.key instanceof Oe&&e.key.walk(y),e.value}).forEach(function(e){e.static?e.value.walk(y):(w(),d.block=n,e.value.walk(y),S())}),!0):n instanceof Ee?(u(n.condition,n.consequent,n.alternative),!0):n instanceof L?((a=y.loopcontrol_target(n))instanceof ft&&A(a),!0):n instanceof ft?(w(),d.block=n,d.loop=!0,r=d,n.body.walk(y),d.inserted===n&&(d=r),n.condition.walk(y),S(),!0):n instanceof dt?(n.init&&n.init.walk(y),w(),d.block=n,d.loop=!0,n.condition&&n.condition.walk(y),n.body.walk(y),n.step&&n.step.walk(y),S(),!0):n instanceof mt?(n.object.walk(y),w(),d.block=n,d.loop=!0,n.init.walk(y),n.body.walk(y),S(),!0):n instanceof Ce?(u(n.condition,n.body,n.alternative),!0):n instanceof he?(w(),d.block=n,r=d,n.body.walk(y),d.inserted===n&&(d=r),S(),!0):n instanceof Le?(w(),(d.block=n)===m&&(p=d),n instanceof Pe&&(n.name&&(_[n.name.definition().id]=!1),t=n.uses_arguments&&!y.has_directive("use strict")?function(e){_[e.definition().id]=!1}:function(e){E(e)},h.push(n),n.argnames.forEach(function(e){k(Fe,t,e)}),n.rest&&k(Fe,t,n.rest),h.pop()),U(n,y),S(),!0):n instanceof At?(i=n.expression,(n.optional?(i.walk(y),w(),n.property.walk(y),S):e)(),c(i),!0):n instanceof Tt?(n.expression.walk(y),r=d,n.body.forEach(function(e){e instanceof rt||(e.expression.walk(y),r===d&&w())}),d=r,n.body.forEach(function(e){w(),d.block=n;var t=d;z(e,y),d.inserted===n&&(d=t),S()}),!0):n instanceof I||n instanceof F?!(_[n.definition().id]=!1):n instanceof qe?(E(n,!0),!0):n instanceof Rt?(s=l,l=n,z(n,y),n.bcatch&&(n.bcatch.argname&&n.bcatch.argname.mark_symbol(function(e){e instanceof de&&(e=e.definition(),_[e.id]=!1,e=e.redefined())&&(_[e.id]=!1)},y),n.bfinally||(l=s)?z(n.bcatch,y):(w(),z(n.bcatch,y),S())),l=s,n.bfinally&&n.bfinally.walk(y),!0):n instanceof jt?nn[n.operator]&&(o=n.expression)instanceof qe?(E(o,!0),!0):void 0:n instanceof ze?((a=n.value)?a.walk(y):a=d.block instanceof mt&&d.block.init===y.parent(),k(Pt,a?function(e){e instanceof Dt?E(e):e.walk(y)}:function(e){var t,n;e instanceof Dt?(t=e.definition().id,(n=_[t])?n.push(e):t in _||g.add(t,e)):e.walk(y)},n.name),!0):n instanceof Ft?(w(),d.block=n,d.loop=!0,e(),S(),!0):void 0;function c(e){f.option("ie")&&(e=zt(e))instanceof qe&&e.walk(y)}function u(e,t,n){var i=d,r=[i,i];if(e instanceof we)switch(e.operator){case"&&":r[0]=u(e.left,e.right)[0];break;case"||":case"??":r[1]=u(e.left,null,e.right)[1];break;default:e.walk(y)}else e instanceof Ee?u(e.condition,e.consequent,e.alternative):e.walk(y);return d=r[0],t&&(w(),t.walk(y)),r[0]=d,d=r[1],n&&(w(),n.walk(y)),r[1]=d,d=i,r}}),e=(y.directives=Object.create(f.directives),m.walk(y),!1),t=Object.create(null);a.length&&c.length;){var n=c.shift();if(n){var i=n.definition,r=_[i.id];if(r){for(r={end:r.end};i.id in t;)i=t[i.id];r.start=_[i.id].start;var s=[];do{var o=a.shift();if(!(n.index>o.index)){var b=o.definition;if(b.id in v){var x=_[b.id];if(x){if(x.start.block===r.start.block&&C(x,r)&&(!x.start.loop&&Er(i)||C(r,x))&&(!f.option("webkit")||on(i)===on(b))&&!b.const_redefs&&$e(x.scopes,function(e){return e.find_variable(i.name)===i})){x.forEach(function(e){e.thedef=i,e.name=i.name,e instanceof qe?(i.references.push(e),b.replaced++):(i.orig.push(e),b.eliminated++)}),b.fixed||(i.fixed=!1),t[b.id]=i,e=!0;break}s.push(o)}}}}while(a.length);s.length&&(a=s.concat(a))}}}return e}function w(){d=Object.create(d)}function S(){d=Object.getPrototypeOf(d)}function k(t,n,e){var i=new Ue(function(e){if(!(e instanceof Te))return e instanceof Ae?(w(),e.value.walk(y),S(),e.name.walk(i)):e instanceof ct?e.key instanceof Oe?e.value instanceof Ie?(w(),(d.block=e).key.walk(y),e.value.walk(i),S()):(e.key.walk(y),e.value.walk(i)):e.value.walk(i):e instanceof t?n(e):e.walk(y),!0});e.walk(i)}function E(t,e){var n,i=t.definition();if(e&&!$e(h,function(e){return!(n=e.variables.get(t.name))||!on(n)||n!==i&&!i.undeclared&&e.parent_scope.find_variable(t.name)!==i}))return _[i.id]=_[n.id]=!1;var r,s=d;if(l&&(w(),s=d,S()),i.id in _){if(!(r=_[i.id]))return;if(r.start.block!==s.block)return _[i.id]=!1;if(o(t),r.end=s,i.id in v)c[v[i.id]]=null;else if(!e)return}else{if((n=m.variables.get(i.name))!==i)return n&&p===s&&(_[n.id]=!1),_[i.id]=!1;if(f.exposed(i)||ss[t.name])return _[i.id]=!1;if((r=g.get(i.id)||[]).scopes=[],o(t),_[i.id]=r,!e)return r.start=s,a.push({index:u++,definition:i});if(s.block!==m)return _[i.id]=!1;r.start=p}function o(e){r.push(e),ye(r.scopes,e.scope);var t=Wn(y);t!==e.scope&&ye(r.scopes,t)}v[i.id]=c.length,c.push({index:u++,definition:i})}function A(e){for(var t=[];;){if(J(d,"block")){var n=d.block;if((n=n instanceof he?n.body:n)===e)break}t.push(d),S()}for(d.inserted=d.block,w();t.length;){var i=t.pop();w(),J(i,"block")&&(d.block=i.block),J(i,"loop")&&(d.loop=i.loop)}}function T(e,t){return e===t||e.isPrototypeOf(t)}function C(e,t){return T(e.start,e.end)||T(e.start,t.start)}}),Le.DEFMETHOD("drop_unused",function(D){if(D.option("unused")){var I=this,N=!(I instanceof Lt)||D.toplevel.funcs,L=!(I instanceof Lt)||D.toplevel.vars,R=/keep_assign/.test(D.option("unused"))?He:function(e,t){var n,i=!1;if(e instanceof xe?!e.write_only&&"="!=e.operator||(n=r(e.left,t)):e instanceof jt&&e.write_only&&(n=r(e.expression,t)),n instanceof qe){e=n.definition();if(!o[e.id]&&!D.exposed(e)&&mn(n,D,i))return n}function r(e,t){if(e instanceof Ie){var n=e.expression;if(!n.may_throw_on_access(D,!0))return i=!0,t&&e instanceof At&&t.unshift(e.property),r(n,t)}else if(e instanceof xe&&"="==e.operator)return e.write_only="p",n=r(e.right),!t||(t.assign=e,n instanceof qe)?n:e.left;return e}},j=Object.create(null),o=Object.create(null),u=function(e){return(u=function e(t,n,i){var r=D.parent(n);if(!r)return i;t=r instanceof Pe&&Jt(t,r.argnames);return e(r,n+1,t?function(e){var t=i(e);if(t)return t;if(t=r.variables.get(e)){e=t.orig[0];if(e instanceof Fe||e instanceof ge)return t}}:r.variables?function(e){return i(e)||r.variables.get(e)}:i)}(I,0,ve))(e)},M=Object.create(null),f=[],F=Object.create(null),l=Object.create(null),p=Object.create(null),h=Object.create(null),q=Object.create(null),d=(I instanceof Lt&&D.top_retain&&I.variables.each(function(e){!D.top_retain(e)||e.id in F||(Oe.info("Retaining variable {name}",e),F[e.id]=!0,f.push(e))}),new Gt),m=new Gt,B=this,V=((g=new Ue(function(a,e){if(a instanceof Pe&&a.uses_arguments&&!g.has_directive("use strict")&&a.each_argname(function(e){e=e.definition();e.id in F||(F[e.id]=!0,f.push(e))}),a!==I){if(B===I){var n,i,t,r;if(a instanceof ce)return r=a.name.definition(),(t=N&&!r.exported)||r.id in F||(F[r.id]=!0,f.push(r)),(n=g.parent()instanceof fe)?o[r.id]=!0:!t||r.id in l||(l[r.id]=1),a.extends&&a.extends.walk(g),i=[],a.properties.forEach(function(e){e.key instanceof Oe&&e.key.walk(g);var t=e.value;t&&(ui(e)?(!n&&t.contains_this()&&(n=!0),s(t)):i.push(t))}),i.forEach(t&&n?s:function(e){m.add(r.id,e)}),!0;if(a instanceof vt)return r=a.name.definition(),(t=N&&!r.exported)||r.id in F||(F[r.id]=!0,f.push(r)),m.add(r.id,a),g.parent()instanceof fe?(o[r.id]=!0,c(a,e,!0)):(!t||r.id in l||(l[r.id]=1),!0);if(a instanceof st)return a.definitions.forEach(function(i){var r=i.value,s=r&&(i.name instanceof Te||r.has_side_effects(D)),o=s&&"="==r.tail_node().operator;i.name.mark_symbol(function(e){var t,n;if(e instanceof Pt)return t=e.definition(),q[t.id]=(q[t.id]||0)+1,a instanceof ee&&t.orig[0]instanceof de&&(n=t.redefined())&&(q[n.id]=(q[n.id]||0)+1),t.id in F||L&&!t.exported&&(a instanceof ae?!t.redefined():!t.const_redefs)&&(a instanceof ee||or(t))||(F[t.id]=!0,f.push(t)),r&&(s?o&&y(t,e,h[t.id]):m.add(t.id,r),d.add(t.id,i)),b(t),!0},g),s&&r.walk(g)}),!0;if(a instanceof Fe)return r=a.definition(),q[r.id]=(q[r.id]||0)+1,d.add(r.id,a),!0;if(a instanceof me)return(r=a.definition()).id in F||L&&or(r)||(F[r.id]=!0,f.push(r)),!0}return c(a,e,!0)}function s(e){var t=B;B=a,e.walk(g),B=t}})).directives=Object.create(D.directives),I.walk(g),D.option("keep_fnames")?He:D.option("ie")?function(e){return!D.exposed(e)&&e.references.length==e.replaced}:function(e){return!(e.id in F)||!(e.orig.length-e.eliminated<2)&&(e.orig[1]instanceof Fe||$e(e.references,function(e){return!e.in_arg}))});D.option("ie")&&m.each(function(e,t){t in F||e.forEach(function(e){e.walk(new Ue(function(e){return e instanceof gt&&e.name&&!V(e.name.definition())?(e.walk(g),!0):e instanceof Le||void 0}))})});for(var g=new Ue(c),e=0;e<f.length;e++){var t=m.get(f[e].id);t&&t.forEach(function(e){e.walk(g)})}Object.keys(j).forEach(function(e){var t,n=j[e];n&&(n=n.reduce(function(t,e){return e.forEach(function(e){ye(t,e)}),t},[]),t=(d.get(e)||[]).filter(function(t){return _e(t instanceof jt?function(e){return e===t}:function(e){return e===t||!(e instanceof jt)&&i(e)===i(t)},n)}),n.length==t.length)?j[e]=t:delete j[e]});var z=[],U=[],$=new Vt(function(n){if(n instanceof Ae)return S($,n);if(n instanceof Te&&n.rest&&(n.rest=n.rest.transform($)),n instanceof at){for(var e=!n.rest,t=n.elements.length;0<=--t;){var i=n.elements[t].transform($);i?(n.elements[t]=i,e=!1):e?n.elements.pop():n.elements[t]=We(pe,n.elements[t])}return n}var r;return n instanceof ut?(r=[],n.properties.forEach(function(e){var t=!1;e.key instanceof Oe&&(e.key=e.key.transform(H),t=e.key.has_side_effects(D)),(t||n.rest)&&((t=e.value)instanceof Ae?t.name:t)instanceof Pt?(e.value=e.value.transform(H),r.push(e)):(t=!(t=e.value.transform($))&&n.rest?e.value instanceof at?We(at,e.value,{elements:[]}):We(ut,e.value,{properties:[]}):t)&&(e.value=t,r.push(e))}),n.properties=r,n):n instanceof Pt?J(n):void 0}),H=new Vt(function(h,t,e){var n,i,d=H.parent();if(L){var r,s,o=[],a=R(h,o);if(a){if(i=h,_=(n=a).definition(),r=!(s=F[_.id])||i[i instanceof xe?"left":"expression"]===n&&(s===n&&_.references.length-_.replaced==1||Y(_,i)<0)?(r=h instanceof xe&&(r=Q(h),!0===h.write_only)?r.drop_side_effect_free(D):r)||We(De,h,{value:0}):r)switch(o.assign&&(s=o.assign.drop_side_effect_free(D))&&(s.write_only=!0,o.unshift(s)),d instanceof Re&&d.tail_node()!==h&&!r.has_side_effects(D)||o.push(r),o.length){case 0:return Yt.skip;case 1:return Kn(d,h,o[0].transform(H));default:return Ge(h,o.map(function(e){return e.transform(H)}))}}else if(h instanceof Mt&&h.expression instanceof qe&&Y(h.expression.definition(),h)<0)return We(Be,h,{operator:"+",expression:h.expression})}if(h instanceof we&&"instanceof"==h.operator)return!((a=h.right)instanceof qe)||a.definition().id in F?void 0:(n=h.left.drop_side_effect_free(D),r=We(le,h).optimize(D),n?Ge(h,[n,r]):r);if(h instanceof ke)return z.push(h),h.args=h.args.map(function(e){return e.transform(H)}),h.expression=h.expression.transform(H),h;if(B===I){if(N&&h!==I&&h instanceof ce)if(!((l=h.name.definition()).id in F))return W(h.name,"Dropping unused class {name}"),l.eliminated++,t(h,H),p=$i(h,!0),d instanceof fe?p:(p=p.drop_side_effect_free(D,!0))?We(je,h,{body:p}):e?Yt.skip:We(Z,h);if(h instanceof oe&&h.name&&V(h.name.definition())&&(h.name=null),h instanceof Pe){if(N&&h!==I&&h instanceof vt)if(!((l=h.name.definition()).id in F))return W(h.name,"Dropping unused function {name}"),l.eliminated++,d instanceof fe?(O(),Hi(h,!0)):e?Yt.skip:We(Z,h);if(O(),h instanceof yt&&h.name&&V(h.name.definition())&&(h.name=null),!(h instanceof Je)){var c,u,f=D.drop_fargs(h,d);if(f&&d instanceof ke&&d.expression===h)for(c=d.args,u=0;u<c.length&&!(c[u]instanceof Me);u++);for(var l,p,m,g=h.argnames,_=h.rest,v=!1,y=!1,b=(_&&(y=!0,!c||u<g.length||_ instanceof Fe?_=_.transform($):(_=(p=X(_,We(be,d,{elements:c.slice(g.length)}),J,!h.uses_arguments,_)).name,c.length=g.length,p.value.elements.length&&[].push.apply(c,p.value.elements)),_ instanceof Te&&!_.rest&&(_ instanceof at?0==_.elements.length&&(_=null):0==_.properties.length&&(_=null)),h.rest=_)&&(v=!(f=!1)),f?-1:h.length()),x=c&&!h.uses_arguments&&d!==D.parent(),w=g.length;0<=--w;)(a=g[w])instanceof Fe?(l=a.definition()).id in F?(f=!1,Y(l,a)<0&&(a.unused=null)):(f&&(W(a,"Dropping unused function argument {name}"),g.pop(),l.eliminated++),a.unused=!0):(y=!0,!c||u<w?m=a.transform($):(m=(p=X(a,c[w],J,x,a)).name,p.value&&(c[w]=p.value)),m?(f=!1,g[w]=m,v=v||!(m instanceof Fe)):f?(G(a,"Dropping unused default argument {name}"),g.pop()):b<w?(G(a,"Dropping unused default argument assignment {name}"),a.name instanceof Fe?a.name.unused=!0:v=!0,g[w]=a.name):(G(a,"Dropping unused default argument value {name}"),g[w]=a=a.clone(),a.value=We(De,a,{value:0}),v=!0));y&&!v&&h.uses_arguments&&!H.has_directive("use strict")&&(h.rest=We(at,h,{elements:[]})),U.push(h)}return h}if(h instanceof se&&h.argname instanceof Te&&h.argname.transform($),!(h instanceof st)||d instanceof mt&&d.init===h)return h instanceof xe?(t(h,H),h.left instanceof Te?(p=X(h.left,h.right,function(e){return e},!0===h.write_only)).name?We(xe,h,{operator:h.operator,left:p.name,right:p.value}):p.value||(d instanceof Re&&d.tail_node()!==h?Yt.skip:We(De,h,{value:0})):h):h instanceof he&&h.body instanceof dt?(t(h,H),h.body instanceof Se?(i=h.body,h.body=i.body.pop(),i.body.push(h),e?Yt.splice(i.body):i):h):h instanceof Le?(O(),h):h instanceof me?!D.option("imports")||h.definition().id in F?h:e?Yt.skip:null:void 0;var S=[],k=[],E=[],A=[],T=0,C=h instanceof ee;switch(h.definitions.forEach(function(e){e.value&&(e.value=e.value.transform(H));var t=e.value;if(e.name instanceof Te)(c=X(e.name,t,function(e){return!L||e.definition().id in F||l(e)||C&&!mn(e)?e:null},!0)).name?(e=We(ze,e,{name:c.name,value:t=c.value}),p()):c.value&&A.push(c.value);else{var n,i,r,s,o,a=e.name.definition(),c=C?mn(e.name):or(a);if(!c||!L||a.id in F)if(t&&((s=Y(a,e))<0||(o=t.tail_node())instanceof qe&&o.definition()===a)&&(e=e.clone(),(t=t.drop_side_effect_free(D))&&Oe.warn("Side effects in definition of variable {name} [{start}]",e.name),h instanceof ae?e.value=t||We(De,e,{value:0}):(e.value=null,t&&A.push(t)),t=null,0<=s)&&(j[a.id][s]=e),t||h instanceof bt)if(D.option("functions")&&!D.option("ie")&&c&&t&&1==q[a.id]&&0==a.assignments&&(o=t.tail_node())instanceof yt&&!hn(a)&&!Ut(o)&&(r=o,0==(s=a.references).length?r===e.name.fixed_value():$e(s,function(e){return r===e.fixed_value()}))&&(i=o,C&&!D.has_directive("use strict")&&i instanceof gt?d instanceof Ke||d instanceof dt&&d.init===h||d instanceof Ce:d instanceof Le)&&!1!==(i=function(n,i){if(!n.name)return null;var r,e=n.name.definition();if(1<e.orig.length)return null;if(0<e.assignments)return!1;if(e.name==i)return e;if(D.option("keep_fnames"))return!1;switch(i){case"await":r=Wt;break;case"yield":r=$t}return $e(e.references,function(e){var t=e.scope;if(t.find_variable(i)!==a)return!1;if(r)do{if(t=t.resolve(),r(t))return!1}while(t!==n&&(t=t.parent_scope));return!0})&&e}(o,e.name.name))){switch(Oe.warn("Declaring {name} as function [{start}]",e.name),o.CTOR){case ne:n=te;break;case re:n=ie;break;case gt:n=ot;break;case AST_GeneratorFunction:n=AST_GeneratorDefun}var u=We(n,o),f=(u.name=We(Ot,e.name),e.name.scope.resolve().def_function(u.name));i&&i.forEach(function(e){e.name=f.name,e.thedef=f,e.reference()}),S.push(u),t!==o&&[].push.apply(A,t.expressions.slice(0,-1))}else c&&1<q[a.id]&&!(d instanceof ue)&&a.orig.indexOf(e.name)>a.eliminated&&(q[a.id]--,T++),p();else d instanceof ue?p():c&&1<q[a.id]?(Oe.info("Dropping declaration of variable {name} [{start}]",e.name),q[a.id]--,a.eliminated++):k.push(e);else l(e.name)?((t=t&&t.drop_side_effect_free(D))&&A.push(t),1<q[a.id]?(Oe.warn("Dropping duplicated declaration of variable {name} [{start}]",e.name),q[a.id]--,a.eliminated++):(e.value=null,k.push(e))):((t=t&&t.drop_side_effect_free(D))?(Oe.warn("Side effects in initialization of unused variable {name} [{start}]",e.name),A.push(t)):W(e.name,"Dropping unused variable {name}"),a.eliminated++)}function l(e){var t=e.definition();return t.orig[0]instanceof de&&t.scope.resolve()===e.scope.resolve()}function p(){0<A.length&&(0==E.length?S.push(We(je,h,{body:Ge(h,A)})):t?(A.push(t),e.value=Ge(t,A)):e.value=We(Be,e,{operator:"void",expression:Ge(e,A)}),A=[]),E.push(e)}}),k.length){case 0:if(0==E.length)break;if(E.length==T){[].unshift.apply(A,E.map(function(e){Oe.info("Dropping duplicated definition of variable {name} [{start}]",e.name);var t=e.name.definition(),n=We(qe,e.name),n=(t.references.push(n),We(xe,e,{operator:"=",left:n,right:e.value})),e=Y(t,e);return 0<=e&&(j[t.id][e]=n),t.assignments++,t.eliminated++,n}));break}case 1:if(0==E.length){var P=k[0].name.definition().id;if(P in M){h.definitions=k,M[P].init=h;break}}default:0<E.length&&(P=E[0].value)instanceof Re&&(E[0].value=P.tail_node(),S.push(We(je,h,{body:Ge(P,P.expressions.slice(0,-1))}))),h.definitions=k.concat(E),S.push(h)}return 0<A.length&&S.push(We(je,h,{body:Ge(h,A)})),K(S,h,e)}function O(){var e=B;t(B=h,H),B=e}},function(e,t){if(e instanceof Se)return Bi(e,H.parent(),t);if(e instanceof ue)return(n=e.body)instanceof Se?(e.body=n.body.pop(),n.body.push(e),t?Yt.splice(n.body):n):void 0;if(e instanceof dt)return hi(e,t);if(e instanceof k){if(!L||!D.option("loops"))return;if(!ii(e.body))return;var n=x(e);if(!n)return;var i=n.definition();if(i.id in F)return;W(n,"Dropping unused loop variable {name}"),M[i.id]===e&&delete M[i.id];var n=[],r=e.object.drop_side_effect_free(D);return r&&(Oe.warn("Side effects in object of for-in loop [{start}]",r),n.push(We(je,e,{body:r}))),e.init instanceof st&&i.orig[0]instanceof de&&n.push(e.init),K(n,e,t)}return e instanceof A?(e.properties&&0==e.properties.length&&(e.properties=null),e):e instanceof Re&&!(1<e.expressions.length)?Kn(H.parent(),e,e.expressions[0]):void 0});H.push(D.parent()),H.directives=Object.create(D.directives),I.transform(H),I instanceof Pe&&1==I.body.length&&I.body[0]instanceof w&&"use strict"==I.body[0].value&&(I.body.length=0),z.forEach(function(e){hr(e,D,U)})}function W(e,t){Oe[0<e.definition().references.length?"info":"warn"](t+" [{start}]",e)}function G(e,t){e.name instanceof Fe?W(e.name,t):Oe.info(t+" [{start}]",e)}function i(e){return e[e instanceof xe?"right":"value"]}function K(e,t,n){switch(e.length){case 0:return n?Yt.skip:We(Z,t);case 1:return e[0];default:return n?Yt.splice(e):We(Se,t,{body:e})}}function _(e,t){return e.scope.resolve()===I&&(e.fixed&&t.fixed||(j[e.id]=!1),!1!==j[e.id])}function v(e,t){j[e.id]||(j[e.id]=[]),t.fixed.assigns&&ye(j[e.id],t.fixed.assigns)}function Y(e,t){e=j[e.id];return e&&e.indexOf(t)}function b(e){1<l[e.id]&&!(e.id in F)&&(F[e.id]=!0,f.push(e)),l[e.id]=0}function y(e,t,n){e.id in F||(t&&n?(F[e.id]=t,f.push(e)):(p[e.id]=t,h[e.id]=n))}function Q(e){var t=e.right;return!e.write_only||!(t instanceof we&&Ye[t.operator])||!(t.left instanceof qe)||!(e.left instanceof qe)||(e=e.left.definition(),t.left.definition()!==e)||t.right.has_side_effects(D)?t:(_(e,t.left)&&v(e,t.left),t.right)}function x(e){var t=e.init;if(t instanceof st)return(t=t.definitions[0].name)instanceof Pt&&t;for(;t instanceof Ie;)t=t.expression.tail_node();return t instanceof qe?t:void 0}function c(e,t,n){e instanceof xe&&e.left instanceof qe&&(r=e.left.definition()).scope.resolve()===I&&d.add(r.id,e),e instanceof qe&&e.in_arg&&(q[e.definition().id]=0),e instanceof jt&&e.expression instanceof qe&&(r=e.expression.definition()).scope.resolve()===I&&d.add(r.id,e);var i,r,s,o=[],a=R(e,o);if(a)return(s=a.definition()).scope.resolve()!==I&&I.variables.get(a.name)!==s||hn(s)&&!$e(I.argnames,function(e){return!e.match_symbol(function(e){if(e instanceof Fe)return(e=e.definition()).references.length>e.replaced},!0)})||"p"===e.write_only&&e.right.may_throw_on_access(D,!0)?void 0:((c=o.assign)&&(c.write_only=!0,c.walk(g)),o.forEach(function(e){e.walk(g)}),e instanceof xe&&(c=Q(e),o=!1,n&&!0===e.write_only&&!c.has_side_effects(D)?m.add(s.id,c):(c.walk(g),o="="==c.tail_node().operator),e.left===a?e.write_only&&!o||y(s,a,h[s.id]):(n=a.fixed_value())&&n.is_constant()||y(s,p[s.id],!0)),_(s,a)&&sn(a,e)!==a&&v(s,a),b(s),!0);if(e instanceof we)return"instanceof"==e.operator&&(a=e.right)instanceof qe&&(i=a.definition().id,l[i])?(e.left.walk(g),l[i]++,!0):void 0;if(e instanceof k){if(e.init instanceof qe&&B===I&&((i=e.init.definition().id)in M||(M[i]=e)),!L||!D.option("loops"))return;if(!ii(e.body))return;if(e.init.has_side_effects(D))return;if(!(a=x(e)))return;if((r=a.definition()).scope.resolve()!==I){var c=u(a.name);if(c===r||c&&c.redefined()===r)return}return e.object.walk(g),!0}return e instanceof qe?((s=e.definition()).id in F||(F[s.id]=!0,f.push(s)),!dn(s.scope,e.scope)||!(o=s.redefined())||o.id in F||(F[o.id]=!0,f.push(o)),_(s,e)&&v(s,e),!0):e instanceof Le?(n=B,B=e,t(),B=n,!0):void 0}function J(e){return e.definition().id in F?e:(e instanceof Fe&&(e.unused=!0),null)}function S(e,t){if(t.value=t.value.transform(H),!t.name.transform(e)){if(t.name instanceof Te)return null;e=t.value.drop_side_effect_free(D);if(!e)return null;W(t.name,"Side effects in default value of unused variable {name}"),(t=t.clone()).name.unused=null,t.value=e}return t}function X(e,g,_,v,y){var b=new Vt(function(r){if(r instanceof Ae){if(!(D.option("default_values")&&g&&g.is_defined(D)))return n=v,v=!1,t=S(b,r),v=n,!t&&v&&(g=g&&g.drop_side_effect_free(D)),t;r===y?y=r=r.name:r=r.name}if(r instanceof at){var e,t,n=v,i=g,s=(g instanceof qe&&(v=!1,g=g.fixed_value()),l=g instanceof be?(e=!0,g.elements):(e=g&&g.is_string(D),!1),[]),o=v&&[],a=0;if(r.elements.forEach(function(e,t){(g=l&&l[t])instanceof pe?g=null:g instanceof Me&&(v&&(o.length=a,Ui(i,o),[].push.apply(o,l.slice(t)),i.elements=o),g=l=!1),(e=e.transform(b))&&(s[a]=e),v&&g&&(o[a]=g),!e&&!g&&v&&l||a++}),g=l&&We(be,i,{elements:l.slice(r.elements.length)}),r.rest&&(t=v,v=!1,r.rest=r.rest.transform(D.option("rests")?b:H),v=t,r.rest)&&(s.length=a),v&&(g=(g=g&&!r.rest?g.drop_side_effect_free(D):g)instanceof be?g.elements:g instanceof Re?g.expressions:g&&[g])&&g.length&&(o.length=a,[].push.apply(o,g)),g=i,v=n,l&&o&&(Ui(g,o),(g=g.clone()).elements=o),e){if(!r.rest)switch(s.length){case 0:if(r===y)break;return v&&(g=g.drop_side_effect_free(D)),null;case 1:if(!v)break;if(r===y)break;var c=s[0];if(c.has_side_effects(D))break;if(g.has_side_effects(D)&&c.match_symbol(function(e){return e instanceof Ie}))break;return g=We(At,r,{expression:g,property:We(De,r,{value:0})}),c}}else s.length=r.elements.length;Ui(r,s),r.elements=s}else if(r instanceof ut){var u,f,l,n=v,i=g,p=(g instanceof qe&&(v=!1,g=g.fixed_value()),g instanceof wt&&(u=[],f=new Gt,l=g.properties.map(function(e,t){var n;return(e=e.clone())instanceof Me?f=!1:((n=(n=e.key)instanceof Oe?n.evaluate(D,!0):n)instanceof Oe?f=!1:!f||e instanceof C||f.set(n,e),u[t]=n),e})),r.rest&&(g=!1,r.rest=r.rest.transform(D.option("rests")?b:H)),new Gt),h=v&&new Gt,d=[];if(r.properties.map(function(e){var t=e.key;return t instanceof Oe&&(e.key=t=t.transform(H),t=t.evaluate(D,!0)),t instanceof Oe?h=!1:p.set(t,!p.has(t)),t}).forEach(function(e,t){var n,i,t=r.properties[t];e instanceof Oe?(g=v=!1,n=t.value.transform(b)||w(t.value)):(v=h&&p.get(e),(!(i=f&&f.get(e))||(g=i.value)instanceof Je)&&(g=!1),(n=t.value.transform(b))?h&&h.set(e,!1):((r.rest||x(t))&&(n=w(t.value)),h&&!h.has(e)&&(i?(h.set(e,i),null===g&&f.set(e,x(i)&&We(St,i,{key:i.key,value:We(De,i,{value:0})}))):h.set(e,!0))),g&&(i.value=g)),n&&(t.value=n,d.push(t))}),g=i,v=n,h&&u&&((g=g.clone()).properties=Yt(l,function(e,t){if(e instanceof Me)return e;t=u[t];if(t instanceof Oe)return e;if(h.has(t)){var n=h.get(t);if(!n)return e;if(n===e)return f.get(t)||Yt.skip}else if(r.rest)return e;n=e.value.drop_side_effect_free(D);return n?(e.value=n,e):x(e)?We(St,e,{key:e.key,value:We(De,e,{value:0})}):Yt.skip})),g&&!r.rest)switch(d.length){case 0:if(r===y)break;if(g.may_throw_on_access(D,!0))break;return v&&(g=g.drop_side_effect_free(D)),null;case 1:if(!v)break;if(r===y)break;var m=d[0];if(m.key instanceof Oe)break;if(m.value.has_side_effects(D))break;if(g.has_side_effects(D)&&m.value.match_symbol(function(e){return e instanceof Ie}))break;return g=We(At,r,{expression:g,property:Jn(m.key,m)}),m.value}r.properties=d}else!(r=r instanceof pe?null:_(r))&&v&&(g=g&&g.drop_side_effect_free(D));return r});return{name:e.transform(b),value:g};function x(e){return e.key instanceof Oe&&e.key.has_side_effects(D)}function w(e){return e instanceof Ae?w(e.name):e instanceof Te?(null===g?g=We(De,e,{value:0}):g&&(g.may_throw_on_access(D,!0)?g=We(be,e,{elements:g instanceof Re?g.expressions:[g]}):function e(t){t instanceof xe?(t.write_only=!1,e(t.right)):t instanceof we?Ye[t.operator]&&(e(t.left),e(t.right)):t instanceof Ee?(e(t.consequent),e(t.alternative)):t instanceof Re?e(t.tail_node()):t instanceof jt&&(t.write_only=!1)}(g)),We(ut,e,{properties:[]})):(e.unused=null,e)}}}),Le.DEFMETHOD("hoist_declarations",function(o){var a,c,u,t,f,l,p,h,d,n;!o.has_directive("use asm")&&(a=o.option("hoist_funs"),c=o.option("hoist_vars"),u=this,c&&(t=0,u.walk(new Ue(function(e){return 1<t||e instanceof ue||e instanceof Le&&e!==u||(e instanceof ee?(t++,!0):void 0)})),t<=1)&&(c=!1),a||c)&&(f=new Gt,l=[],p=[],h=new Gt,d=new Vt(function(e,t,n){if(e!==u){if(e instanceof w)return l.push(e),n?Yt.skip:We(Z,e);var i;if(e instanceof vt)return!a||(i=d.parent())instanceof ue||i instanceof fe||i!==u&&o.has_directive("use strict")?e:(p.push(e),n?Yt.skip:We(Z,e));if(e instanceof ee){if(!c)return e;if((i=d.parent())instanceof ue)return e;if(!$e(e.definitions,function(e){e=e.name;return e instanceof Dt&&!f.has(e.name)&&u.find_variable(e.name)===e.definition()}))return e;e.definitions.forEach(function(e){h.set(e.name.name,e)});var r,s=e.to_assignments();return i instanceof mt&&i.init===e?s||(r=e.definitions[0].name,We(qe,r)):i instanceof dt&&i.init===e?s:s?We(je,e,{body:s}):n?Yt.skip:We(Z,e)}return e instanceof Le?e:e instanceof I?(f.set(e.name,!0),e):void 0}}),u.transform(d),0<h.size()&&(n=[],u instanceof Pe&&u.each_argname(function(e){$e(e.definition().references,function(e){return!e.in_arg})&&h.del(e.name)}),h.each(function(e,t){(e=e.clone()).name=e.name.clone(),e.value=null,n.push(e),h.set(t,e),e.name.definition().orig.unshift(e.name)}),0<n.length)&&p.push(We(ee,u,{definitions:n})),u.body=l.concat(p,u.body))}),Le.DEFMETHOD("process_returns",ve),ot.DEFMETHOD("process_returns",function(e){if(e.option("booleans")&&!(e.parent()instanceof fe))switch(Yi(this.name.definition(),Gi(this),e)){case"d":Ki(e,this,!0);break;case!0:Ji(this,e)}}),gt.DEFMETHOD("process_returns",function(t){if(t.option("booleans")){var n=!0,i=Gi(this);if(!this.name||u(this.name.definition())){var e=t.parent();if(e instanceof xe){if("="!=e.operator)return;if(!((s=e.left)instanceof qe))return;if(!u(s.definition()))return}else if(e instanceof ke&&e.expression!==this){var r=e.expression;if(!((r=r instanceof qe?r.fixed_value():r)instanceof Pe))return;if(r.uses_arguments||r.pinned())return;for(var s,o=e.args,a=0;a<o.length;a++){var c=o[a];if(c===this){if(!(s=r.argnames[a])&&r.rest)return;break}if(c instanceof Me)return}if((s=s instanceof Ae?s.name:s)instanceof Fe&&!u(s.definition()))return}else{if("Call"!=e.TYPE)return;t.pop();e=t.in_boolean_context();switch(t.push(this),e){case!0:n=!1;case"d":break;default:return}}n?Ki(t,this,!0):Ji(this,t)}}function u(e){switch(Yi(e,i,t)){case!0:n=!1;case"d":return 1}}}),Qe.DEFMETHOD("var_names",function(){var n=this._var_names;return n||(this._var_names=n=new Gt,this.enclosed.forEach(function(e){n.set(e.name,!0)}),this.variables.each(function(e,t){n.set(t,!0)})),n}),Le.DEFMETHOD("make_var",function(e,t,n){for(var i=[this],r=(t instanceof Pt&&t.definition().references.forEach(function(e){var t=e.scope;do{if(!ye(i,t))return}while((t=t.parent_scope)&&t!==this)}),n=n.replace(/^[^a-z_$]|[^a-z0-9_$]/gi,"_")),s=0;!$e(i,function(e){return!e.var_names().has(r)});s++)r=n+"$"+s;var e=We(e,t,{name:r,scope:this}),o=this.def_variable(e);return i.forEach(function(e){e.enclosed.push(o),e.var_names().set(r,!0)}),e}),Le.DEFMETHOD("hoist_properties",function(r){var c,s,u,f;function l(e,t,n){var i;return!(e instanceof Ct)||(i=e.definition()).assignments!=n||i.references.length-i.replaced==n||i.single_use||c.find_variable(e.name)!==i||s(i)||e.fixed_value()!==t||(n=e.fixed||i.fixed).direct_access?void 0:(!n.escaped||1!=n.escaped.depth)&&t instanceof wt&&0<t.properties.length&&mn(e,r)&&$e(t.properties,function(e){return Dr(e)&&"__proto__"!==e.key})}!r.option("hoist_props")||r.has_directive("use asm")||(c=this,Ut(c)&&c.value)||(s=c instanceof Lt&&r.top_retain||He,u=Object.create(null),f=new Vt(function(n,e){if(n instanceof xe){if("="!=n.operator)return;if(!n.write_only)return;if(!l(n.left,n.right,1))return;e(n,f);var i=new Gt,r=[],s=[];return n.right.properties.forEach(function(e){var t=a(Dt,n.left,e.key),t=(s.push(We(ze,n,{name:t,value:null})),We(qe,n,{name:t.name,scope:c,thedef:t.definition()}));t.reference(),r.push(We(xe,n,{operator:"=",left:t,right:e.value}))}),i.value=n.right,u[n.left.definition().id]=i,c.body.splice(c.body.indexOf(f.stack[1])+1,0,We(ee,n,{definitions:s})),Ge(n,r)}var t,o;if(n instanceof Le)return n===c||"Call"==(o=f.parent()).TYPE&&o.expression===n?void 0:n;if(n instanceof ze&&l(n.name,n.value,0))return e(n,f),i=new Gt,t=[],(o=n.clone()).value=n.name instanceof I?We(De,n,{value:0}):null,t.push(o),n.value.properties.forEach(function(e){t.push(We(ze,n,{name:a(n.name.CTOR,n.name,e.key),value:e.value}))}),i.value=n.value,u[n.name.definition().id]=i,Yt.splice(t);function a(e,t,n){e=c.make_var(e,t,t.name+"_"+n);return i.set(n,e.definition()),e}}),c.transform(f),c.transform(new Vt(function(e,t){var n;if(e instanceof Ie)return!(e.expression instanceof qe&&(i=u[e.expression.definition().id])&&e.expression.fixed_value()===i.value)?void 0:(n=i.get(e.get_property()),(n=We(qe,e,{name:n.name,scope:e.expression.scope,thedef:n})).reference(),n);if(e instanceof qe){var i=u[e.definition().id];if(i&&e.fixed_value()===i.value)return We(wt,e,{properties:[]})}})))}),(e=function(e,t){e.DEFMETHOD("drop_side_effect_free",t)})(Oe,Xt),e(Je,Q),e(be,function(e,t){e=Qi(this.elements,e,t,Zi);return e?e===this.elements&&$e(e,function(e){return e instanceof Me})?this:Ge(this,e.map(er)):null}),e(xe,function(e){var t=this.left;if(t instanceof Ie){var n=t.expression;if(n.may_throw_on_access(e,!0))return this;if(e.has_directive("use strict")&&n.is_constant())return this}return!t.has_side_effects(e)&&!Ye[this.operator.slice(0,-1)]&&(this.write_only=!0,zt(t).is_constant_expression(e.find_parent(Le)))?this.right.drop_side_effect_free(e):this}),e(Xe,function(e){if(!e.option("awaits"))return this;var t=this.expression;if(!br(e,t))return this;var n=(t=t instanceof Be&&"!"==t.operator?t.expression:t).drop_side_effect_free(e);if(n===t)return this;n?br(e,n)||(n=n.negate(e)):n=We(De,t,{value:0});e=this.clone();return e.expression=n,e}),e(we,function(e,t){var n,i,r,s,o=this.left,a=this.right,c=this.operator;return yr(c,a,e)?(n=a.drop_side_effect_free(e,t))?Ye[c]&&n.has_side_effects(e)?(i=this,n!==a&&((i=i.clone()).right=n.drop_side_effect_free(e)),"??"==c?i:((a=i.clone()).operator="&&"==c?"||":"&&",a.left=o.negate(e,t),(r=a.right.tail_node())instanceof we&&a.operator==r.operator&&Sr(a),r=t?wi:xi,"&&"==c?r(i,a):r(a,i))):(s=o.drop_side_effect_free(e,t))?(n=n.drop_side_effect_free(e))?Ge(this,[s,n]):s:n:o.drop_side_effect_free(e,t):(s=o.drop_side_effect_free(e,t))===o?this:((i=this.clone()).left=s||We(De,o,{value:0}),i)}),e(ke,function(e,t){var n=this;if(n.is_expr_pure(e))return n.pure&&Oe.warn("Dropping __PURE__ call [{start}]",n),(i=Qi(n.args,e,t,Zi))&&Ge(n,i.map(er));var i=n.expression;if(n.is_call_pure(e))return(c=n.args.slice()).unshift(i.expression),(c=Qi(c,e,t,Zi))&&Ge(n,c.map(er));if(e.option("yields")&&$t(i)){var r=n.clone(),s=(r.expression=We(gt,i),r.expression.body=[],r.transform(e));if(s!==r)return s.drop_side_effect_free(e,t)}var o,a,r=Ki(e,i);if(r&&((n=n.clone()).expression=r,i._squeezed)&&(n.expression._squeezed=!0),n instanceof y){var c,s=i;if((s=s instanceof qe?s.fixed_value():s)instanceof Pe){if(o=e,(r=s).new=!0,a=$e(r.body,function(e){return!e.has_side_effects(o)})&&$e(r.argnames,function(e){return!e.match_symbol(He)})&&!(r.rest&&r.rest.match_symbol(He)),r.new=!1,a)return(c=n.args.slice()).unshift(i),(c=Qi(c,e,t,Zi))&&Ge(n,c.map(er));s.contains_this()||((n=We(ke,n)).expression=n.expression.clone(),n.args=n.args.slice())}}return n.call_only=!0,n}),e(oe,function(e,t){for(var n=this,i=[],r=[],s=0,o=n.properties,a=0;a<o.length;a++){var c=o[a];if(c.key instanceof Oe&&i.push(c.key),ui(c)){var u=c.value;if(u.has_side_effects(e)){if(u.contains_this())return n;c instanceof nt?(s++,r.push(c)):r.push(u)}}}var f=n.extends;if(!f||(f=!pn(f=f instanceof qe?f.fixed_value():f))||i.unshift(n.extends),i=Qi(i,e,t),r=Qi(r,e,t=i?!1:t),!i){if(!f&&!r&&!n.name)return null;i=[]}return f||n.name||!e.has_directive("use strict")?(t=$i(n),f||(t.extends=null),t.properties=[],r?r.length==s?(i.length&&r.unshift(We(tt,n,{key:Ge(n,i),value:null})),t.properties=r):t.properties.push(We(tt,n,{static:!0,key:i.length?Ge(n,i):"c",value:l()})):i.length&&t.properties.push(We(p,n,{key:Ge(n,i),value:We(gt,n,{argnames:[],body:[]}).init_vars(t)})),t):(r&&i.push(We(ke,n,{expression:We(d,n,{argnames:[],body:[],value:l()}).init_vars(n.parent_scope),args:[]})),Ge(n,i));function l(){return Ge(n,r.map(function(e){var t;return e instanceof nt?((t=We(d,e.value)).argnames=[],We(ke,e,{expression:t,args:[]})):e}))}}),e(Ee,function(e){var t,n,i=this.consequent.drop_side_effect_free(e),r=this.alternative.drop_side_effect_free(e);return i===this.consequent&&r===this.alternative?this:(e.option("ie")&&(t=[],i instanceof gt&&(t.push(i),i=null),r instanceof gt)&&(t.push(r),r=null),i?r?((n=this.clone()).consequent=i,n.alternative=r):n=We(we,this,{operator:"&&",left:this.condition,right:i}):n=r?We(we,this,{operator:"||",left:this.condition,right:r}):this.condition.drop_side_effect_free(e),t?(n&&t.push(n),0==t.length?null:Ge(this,t)):n)}),e(E,Q),e(lt,function(e,t){var n=this.expression;return n.may_throw_on_access(e)?this:n.drop_side_effect_free(e,t)}),e(gt,function(e){return Xi(this,e)?null:this}),e(yt,Q),e(wt,function(e,t){var n=[],e=(this.properties.forEach(function(e){e instanceof Me?n.push(e):(e.key instanceof Oe&&n.push(e.key),n.push(e.value))}),Qi(n,e,t,function(e,t,n){var i=e.expression;return i.safe_to_spread()?i.drop_side_effect_free(t,n):e}));return e?e!==n||$e(e,function(e){return!(e instanceof Me)})?Ge(this,e.map(function(e){return e instanceof Me?We(wt,e,{properties:[e]}):e})):this:null}),e(Et,Q),e(Re,function(e,t){var n,i,r,s=Qi(this.expressions,e,t);return s?(n=s[r=s.length-1],e.option("awaits")&&0<r&&n instanceof Xe&&n.expression.is_constant()&&(i=(s=s.slice(0,-1))[--r],n.expression=br(e,i)?i:i.negate(e),s[r]=n),e.option("conditionals")&&0<r&&(i=s[r-1])instanceof xe&&"="==i.operator&&(r=i.left)instanceof qe&&(r=_r(e,r.definition(),i.right,n))&&((i=i.clone()).right=r,(s=s.slice(0,-2)).push(i.drop_side_effect_free(e,t))),s===this.expressions?this:Ge(this,s)):null}),e(At,function(e,t){var n,i=this.expression;return i.may_throw_on_access(e)?this:(n=this.property,(i=i.drop_side_effect_free(e,t))?(n=n.drop_side_effect_free(e))?Ge(this,[i,n]):i:n.drop_side_effect_free(e,t))}),e(qe,function(e){return this.is_declared(e)&&mn(this,e)?null:this}),e(It,function(e,t){var n,i=this;return i.is_expr_pure(e)?0==(n=i.expressions).length?null:Ge(i,n).drop_side_effect_free(e,t):((t=Ki(e,n=i.tag))&&((i=i.clone()).tag=t,n._squeezed)&&(i.tag._squeezed=!0),i)}),e(jt,function(e,t){var n,i=this.expression;return an[this.operator]?(this.write_only=!i.has_side_effects(e),this):"typeof"==this.operator&&i instanceof qe&&mn(i,e)?null:(n=i.drop_side_effect_free(e,t),t&&n&&oi(n)?n===i&&"!"==this.operator?this:n.negate(e,t):n)}),t(je,function(e,t){if(t.option("side_effects")){var n=e.body,t=n.drop_side_effect_free(t,!0);if(!t)return Oe.warn("Dropping side-effect-free statement [{start}]",e),We(Z,e);if(t!==n)return We(je,e,{body:t})}return e}),t(Ft,function(e,t){return t.option("loops")?We(dt,e).optimize(t):e}),t(ft,function(n,e){if(!e.option("loops"))return n;var t=ir(e,n.condition);if(!(t instanceof Oe)){if(t&&!tr(n,e.parent(),L))return We(dt,n,{body:We(Se,n.body,{body:[n.body,We(je,n.condition,{body:n.condition})]})}).optimize(e);if(!tr(n,e.parent()))return We(Se,n.body,{body:[n.body,We(je,n.condition,{body:n.condition})]}).optimize(e)}if(n.body instanceof Se&&!tr(n,e.parent(),L)){for(var i=n.body.body,r=i.length;0<=--r;){var s=i[r];if(s instanceof Ce&&!s.alternative&&s.body instanceof N&&e.loopcontrol_target(s.body)===n){if(o(s.condition))break;n.condition=We(we,n,{operator:"&&",left:s.condition.negate(e),right:n.condition}),i.splice(r,1)}else if(s instanceof je){if(o(s.body))break;n.condition=Ge(n,[s.body,n.condition]),i.splice(r,1)}else if(!li(s,!0))break}n.body=Bi(n.body,e.parent())}return n.body instanceof Z?We(dt,n).optimize(e):n.body instanceof je?We(dt,n,{condition:Ge(n.condition,[n.body.body,n.condition]),body:We(Z,n)}).optimize(e):n;function o(e){var t=!1;return e.walk(new Ue(function(e){return!!t||(e instanceof qe?(Jt(e.definition(),n.enclosed)||(t=!0),!0):void 0)})),t}}),t(dt,function(e,t){if(!t.option("loops"))return e;if(t.option("side_effects")&&(e.init&&(e.init=e.init.drop_side_effect_free(t)),e.step)&&(e.step=e.step.drop_side_effect_free(t)),e.condition){var n=ir(t,e.condition);if(n)n instanceof Oe||(e.body=We(Se,e.body,{body:[We(je,e.condition,{body:e.condition}),e.body]}),e.condition=null);else if(t.option("dead_code"))return n=[],Ht(e.init)?n.push(e.init):e.init&&n.push(We(je,e.init,{body:e.init})),n.push(We(je,e.condition,{body:e.condition})),mi(t,e.body,n),We(Se,e,{body:n}).optimize(t)}return function t(n,i){var e=o(n.body);if(i.option("dead_code")&&(e instanceof N||e instanceof L&&a(e)||e instanceof ht))return r=[],Ht(n.init)?r.push(n.init):n.init&&r.push(We(je,n.init,{body:n.init})),s=a(e)||e instanceof ht,n.condition&&s?r.push(We(Ce,n,{condition:n.condition,body:e,alternative:null})):n.condition?r.push(We(je,n.condition,{body:n.condition})):s&&r.push(e),mi(i,n.body,r),We(Se,n,{body:r});if(e instanceof Ce){var r,s=o(e.body);if(s instanceof N&&!a(s))return n.condition?n.condition=We(we,n.condition,{left:n.condition,operator:"&&",right:e.condition.negate(i)}):n.condition=e.condition.negate(i),r=ni(e.alternative),mi(i,e.body,r),c(r);if((s=o(e.alternative))instanceof N&&!a(s))return n.condition?n.condition=We(we,n.condition,{left:n.condition,operator:"&&",right:e.condition}):n.condition=e.condition,r=ni(e.body),mi(i,e.alternative,r),c(r)}return n;function o(e){return e instanceof Se?e.body[0]:e}function a(e){return i.loopcontrol_target(e)!==i.self()}function c(e){return n.body instanceof Se?(n.body=n.body.clone(),n.body.body=e.concat(n.body.body.slice(1)),n.body=n.body.transform(i)):n.body=We(Se,n.body,{body:e}).transform(i),t(n,i)}}(e,t)}),t(mt,function(e,t){var n;return t.option("varify")&&ei(e.init)&&((n=e.init.definitions[0].name)instanceof Te||n instanceof F)&&!n.match_symbol(function(e){if(e instanceof Pt)return!Er(e=e.definition())||ar(t,e)},!0)&&(e.init=cr(e.init,e.resolve())),e}),t(Ce,function(e,u){if(ii(e.alternative)&&(e.alternative=null),u.option("conditionals")){if(u.option("booleans")&&!e.condition.has_side_effects(u)&&rr(u,e.condition),u.option("dead_code")){var t=ir(u,e.condition);if(!t)return Oe.warn("Condition always false [{start}]",e.condition),d=[We(je,e.condition,{body:e.condition}).transform(u)],mi(u,e.body,d),e.alternative&&d.push(e.alternative),We(Se,e,{body:d}).optimize(u);if(!(t instanceof Oe))return Oe.warn("Condition always true [{start}]",e.condition),d=[We(je,e.condition,{body:e.condition}).transform(u),e.body],e.alternative&&mi(u,e.alternative,d),We(Se,e,{body:d}).optimize(u)}var t=e.condition.negate(u),n=e.condition.print_to_string().length,i=t.print_to_string().length,r=i<n,s=(e.alternative&&r&&(r=!1,e.condition=t,s=e.body,e.body=e.alternative,e.alternative=ii(s)?null:s),[]),o=[],a=[],c=C(e.body,s,o,a),f=[],l=[],p=[],h=C(e.alternative,f,l,p);if(c instanceof Se||h instanceof Se){var d=[],m=[];if(c&&([].push.apply(d,s),[].push.apply(m,o),c instanceof Se?e.body=c:0==c.length?e.body=We(Z,e.body):e.body=We(je,e.body,{body:Ge(e.body,c)}),a.forEach(Vn)),h&&([].push.apply(d,f),[].push.apply(m,l),h instanceof Se?e.alternative=h:0==h.length?e.alternative=null:e.alternative=We(je,e.alternative,{body:Ge(e.alternative,h)}),p.forEach(Vn)),0<m.length&&d.push(We(ee,e,{definitions:m})),0<d.length)return d.push(e.transform(u)),We(Se,e,{body:d}).optimize(u)}else if(c&&h)return d=s.concat(f),(0<o.length||0<l.length)&&d.push(We(ee,e,{definitions:o.concat(l)})),0==c.length?d.push(We(je,e.condition,{body:0<h.length?We(we,e,{operator:"||",left:e.condition,right:Ge(e.alternative,h)}).transform(u):e.condition.clone()}).optimize(u)):0==h.length?(n===i&&!r&&e.condition instanceof we&&"||"==e.condition.operator&&(r=!0),d.push(We(je,e,{body:We(we,e,{operator:r?"||":"&&",left:r?t:e.condition,right:Ge(e.body,c)}).transform(u)}).optimize(u))):d.push(We(je,e,{body:We(Ee,e,{condition:e.condition,consequent:Ge(e.body,c),alternative:Ge(e.alternative,h)})}).optimize(u)),a.forEach(Vn),p.forEach(Vn),We(Se,e,{body:d}).optimize(u);if((e=ii(e.body)?We(Ce,e,{condition:t,body:e.alternative,alternative:null}):e).alternative instanceof ht&&e.body.TYPE==e.alternative.TYPE){m=e.body.value,s=e.alternative.value;if(!m&&!s)return We(Se,e,{body:[We(je,e,{body:e.condition}),e.body]}).optimize(u);if(m&&s||!function(){var e=!1,t=0,n=u.self();do{if(n instanceof se)u.parent(t).bfinally&&(e=!0),t++;else if(n instanceof P)t++;else{if(n instanceof Le)return e&&Hn(n);n instanceof Rt&&n.bfinally&&(e=!0)}}while(n=u.parent(t++))}())return(f=We(e.body.CTOR,e,{value:We(Ee,e,{condition:e.condition,consequent:m||We(Ve,e.body).transform(u),alternative:s||We(Ve,e.alternative).transform(u)})}))instanceof Ne&&(f.in_bool=e.body.in_bool||e.alternative.in_bool),f}if(Fi((e=e.body instanceof Ce&&!e.body.alternative&&!e.alternative?We(Ce,e,{condition:We(we,e.condition,{operator:"&&",left:e.condition,right:e.body.condition}),body:e.body.body,alternative:null}):e).body)&&e.alternative)return o=e.alternative,e.alternative=null,We(Se,e,{body:[e,o]}).optimize(u);if(Fi(e.alternative))return d=e.body,e.body=e.alternative,e.condition=r?t:e.condition.negate(u),e.alternative=null,We(Se,e,{body:[e,d]}).optimize(u);if(e.alternative){for(var g=E(e.body),_=A(g),v=E(e.alternative),y=A(v),b=[];0<=_&&0<=y;){var x=g[_],w=v[y];if(x.equals(w))g.splice(_--,1),v.splice(y--,1),b.unshift(Qn(x,w));else{if(!(x instanceof je))break;if(!(w instanceof je))break;var S=x.body.tail_node(),k=w.body.tail_node();if(!S.equals(k))break;_=T(g,x.body,_),y=T(v,w.body,y),b.unshift(We(je,S,{body:Qn(S,k)}))}}if(0<b.length)return e.body=0<g.length?We(Se,e,{body:g}):We(Z,e),e.alternative=0<v.length?We(Se,e,{body:v}):null,b.unshift(e),We(Se,e,{body:b}).optimize(u)}u.option("typeofs")&&nr(e.condition,e.body,e.alternative)}return e;function E(e){return e instanceof Se?e.body:[e]}function A(e){for(var t=e.length;0<=--t&&li(e[t],!0););return t}function T(e,t,n){return t instanceof Re?e[n]=We(je,t,{body:Ge(t,t.expressions.slice(0,-1))}):e.splice(n--,1),n}function C(e,t,n,i){if(null==e)return[];if(e instanceof Se){for(var r=[],s=0;s<e.body.length;s++){var o=e.body[s];if(!(o instanceof Z)){if(o instanceof ht){if(0==s)return;0<r.length&&(o=o.clone(),r.push(o.value||We(Ve,o).transform(u)),o.value=Ge(e,r));var a=e.clone();return a.body=a.body.slice(s+1),a.body.unshift(o),a}if(o instanceof vt)t.push(o);else if(o instanceof je){if(!u.option("sequences")&&0<r.length)return;r.push(o.body)}else{if(!(o instanceof ee))return;if(!u.option("sequences")&&0<r.length)return;o.remove_initializers(u,n),o.definitions.forEach(c)}}}return r}return e instanceof vt?(t.push(e),[]):e instanceof Z?[]:e instanceof je?[e.body]:e instanceof ee?(r=[],e.remove_initializers(u,n),e.definitions.forEach(c),r):void 0;function c(e){e.value&&r.push(We(xe,e,{operator:"=",left:e.name.convert_symbol(qe,function(e){i.push(e)}),right:e.value}))}}}),t(Tt,function(i,n){if(n.option("switches")&&n.option("dead_code")){for(var e,t,r,s=[],o=[],a=[],c=0,u=i.body.length;c<u;c++){if((e=i.body[c])instanceof rt){var f=s[s.length-1];if(t||b(e.body[0],n)&&(!f||Fi(f))){w(e,f);continue}t=e}else{var l=e.expression,p=We(we,i,{operator:"===",left:i.expression,right:l}).evaluate(n,!0);if(!p){l.has_side_effects(n)&&a.push(l),w(e,s[s.length-1]);continue}if(!(p instanceof Oe))for(t&&(p=s.indexOf(t),s.splice(p,1),w(t,s[p-1]),t=null),l.has_side_effects(n)?r=e:t=e=We(rt,e);++c<u;)w(i.body[c],e)}if(u<=c+1||Fi(e)){var h,f=s[s.length-1],d=e.body;if(Fi(f))switch(f.body.length-d.length){case 1:if(!b(h=f.body[f.body.length-1],n))break;d=d.concat(h);case 0:var m=We(Se,f),g=We(Se,e,{body:d});m.equals(g)&&(f.body=[])}}a.length&&(e instanceof rt?s.push(We(Ze,i,{expression:Ge(i,a),body:[]})):(a.push(e.expression),e.expression=Ge(i,a)),a=[]),s.push(e)}for(a.length&&!r&&s.push(We(Ze,i,{expression:Ge(i,a),body:[]}));e=s[s.length-1];){if(b(h=e.body[e.body.length-1],n)&&e.body.pop(),e===t){if(!ri(e))break}else{if(e.expression.has_side_effects(n))break;if(t){if(!ri(t))break;if(s[s.length-2]!==t)break;t.body=t.body.concat(e.body),e.body=[]}else if(!ri(e))break}w(e),s.pop()===t&&(t=null)}if(!e)return o.push(We(je,i.expression,{body:i.expression})),a.length&&o.push(We(je,i,{body:Ge(i,a)})),We(Se,i,{body:o}).optimize(n);if(e===t)for(;(e=s[s.length-2])&&!(e instanceof rt)&&ri(e);){if((l=e.expression).has_side_effects(n)){if((f=s[s.length-3])&&!Fi(f))break;t.body.unshift(We(je,i,{body:l}))}w(e),s.splice(-2,1)}if(s[0].body=o.concat(s[0].body),i.body=s,n.option("conditionals"))switch(s.length){case 1:if(x(s[0]))return l=s[0].expression,d=s[0].body.slice(),(s[0]!==t&&s[0]!==r?We(Ce,i,{condition:We(we,i,{operator:"===",left:i.expression,right:l}),body:We(Se,i,{body:d}),alternative:null}):(l&&d.unshift(We(je,l,{body:l})),d.unshift(We(je,i.expression,{body:i.expression})),We(Se,i,{body:d}))).optimize(n);break;case 2:if(Jt(t,s)&&x(s[1])){var _,v,y=(d=s[0].body.slice()).length&&b(d[d.length-1],n);if(y&&d.pop(),$e(d,x))return _=s[1].body.length&&We(Se,s[1]),v=We(Ce,i,{condition:We(we,i,s[0]===t?{operator:"!==",left:i.expression,right:s[1].expression}:{operator:"===",left:i.expression,right:s[0].expression}),body:We(Se,s[0],{body:d}),alternative:y&&_||null}),(v=!y&&_?We(Se,i,{body:[v,_]}):v).optimize(n)}}}return i;function b(e,t){return e instanceof N&&t.loopcontrol_target(e)===i}function x(e){var t=!1,n=new Ue(function(e){if(t||e instanceof Pe||e instanceof je)return!0;b(e,n)&&(t=!0)});return n.push(i),e.walk(n),!t}function w(e,t){t&&!Fi(t)?t.body=t.body.concat(e.body):mi(n,e,o)}}),t(Rt,function(e,t){if(e.body=di(e.body,t),t.option("dead_code")){if(ri(e)&&!(e.bcatch&&e.bcatch.argname&&e.bcatch.argname.match_symbol(function(e){return e instanceof de&&!mn(e)},!0)))return n=[],e.bcatch&&(mi(t,e.bcatch,n),n.forEach(function(e){e instanceof ee&&e.definitions.forEach(function(e){var t=e.name.definition().redefined();t&&(e.name=e.name.clone(),e.name.thedef=t)})})),n.unshift(We(Se,e).optimize(t)),e.bfinally&&n.push(We(Se,e.bfinally).optimize(t)),We(Se,e,{body:n}).optimize(t);if(e.bfinally&&ri(e.bfinally)){var n=We(Se,e.bfinally).optimize(t);if(n=e.body.concat(n),!e.bcatch)return We(Se,e,{body:n}).optimize(t);e.body=n,e.bfinally=null}}return e}),ae.DEFMETHOD("remove_initializers",sr(function(e,t){return We(Ve,t).optimize(e)})),bt.DEFMETHOD("remove_initializers",sr(Q)),ee.DEFMETHOD("remove_initializers",sr(Q)),st.DEFMETHOD("to_assignments",function(){var e=this.definitions.reduce(function(e,n){var t,i,r,s=n.name.definition(),o=n.value;return o&&(o instanceof Re&&(o=o.clone()),t=We(qe,n.name),i=We(xe,n,{operator:"=",left:t,right:o}),e.push(i),(r=function(){return i.right}).assigns=[i],r.direct_access=s.direct_access,r.escaped=s.escaped,t.fixed=r,s.references.forEach(function(e){var t;e.fixed&&(t=e.fixed.assigns)&&t[0]===n&&(1<t.length||e.fixed.to_binary||e.fixed.to_prefix?t[0]=i:(e.fixed=r,s.fixed===e.fixed&&(s.fixed=r)))}),s.references.push(t)),s.assignments++,s.eliminated++,s.single_use=!1,e},[]);return 0==e.length?null:Ge(this,e)}),t(ae,fr),t(bt,fr),t(ke,function(p,u){var s=p.expression,e=lr(p,u);if(e)return e;if(u.option("sequences"))if(s instanceof Ie){if((y=pr(s))!==s)return(b=p.clone()).expression=y.expressions.pop(),y.expressions.push(b),y.optimize(u)}else if(!Xn(s.tail_node()))if((y=pr(p))!==p)return y.optimize(u);if(u.option("unused")&&hr(p,u),u.option("unsafe"))if(ci(s))switch(s.name){case"Array":if(1==p.args.length){if((a=p.args[0])instanceof De)try{var t=a.value;if(6<t)break;for(var n=Array(t),i=0;i<t;i++)n[i]=We(pe,p);return We(be,p,{elements:n})}catch(e){Oe.warn("Invalid array length: {length} [{start}]",{length:t,start:p.start});break}if(!a.is_boolean(u)&&!a.is_string(u))break}return We(be,p,{elements:p.args});case"Object":if(0==p.args.length)return We(wt,p,{properties:[]});break;case"String":if(0==p.args.length)return We(H,p,{value:""});if(1==p.args.length)return We(we,p,{operator:"+",left:We(H,p,{value:""}),right:p.args[0]}).optimize(u);break;case"Number":if(0==p.args.length)return We(De,p,{value:0});if(1==p.args.length)return We(Be,p,{operator:"+",expression:We(we,p,{operator:"+",left:We(H,p,{value:""}),right:p.args[0]})}).optimize(u);break;case"Boolean":if(0==p.args.length)return We(le,p).optimize(u);if(1==p.args.length)return We(Be,p,{operator:"!",expression:We(Be,p,{operator:"!",expression:p.args[0]})}).optimize(u);break;case"RegExp":var j=[];if($e(p.args,function(e){var t=e.evaluate(u);return j.unshift(t),e!==t}))try{return Si(u,p,We(G,p,{value:RegExp.apply(RegExp,j)}))}catch(e){Oe.warn("Error converting {this} [{start}]",p)}}else if(s instanceof lt)switch(s.property){case"toString":var r=s.expression;if(0!=p.args.length||r.may_throw_on_access(u)||r instanceof Y)break;return We(we,p,{operator:"+",left:We(H,p,{value:""}),right:r}).optimize(u);case"join":if(s.expression instanceof be&&p.args.length<2)e:{var o=p.args[0];if(0==s.expression.elements.length&&!(o instanceof Me))return o?Ge(p,[o,We(H,p,{value:""})]).optimize(u):We(H,p,{value:""});if(!(o&&(o=o.evaluate(u))instanceof Oe)){for(var a,n=[],c=[],i=0;i<s.expression.elements.length;i++){var f=s.expression.elements[i];if((k=f.evaluate(u))!==f)c.push(k);else{if(f instanceof Me)break e;0<c.length&&(n.push(We(H,p,{value:c.join(o)})),c.length=0),n.push(f)}}return(0<c.length&&n.push(We(H,p,{value:c.join(o)})),1==n.length)?n[0].is_string(u)?n[0]:We(we,n[0],{operator:"+",left:We(H,p,{value:""}),right:n[0]}):""==o?(a=n[0].is_string(u)||n[1].is_string(u)?n.shift():We(H,p,{value:""}),n.reduce(function(e,t){return We(we,t,{operator:"+",left:e,right:t})},a).optimize(u)):((N=p.clone()).expression=N.expression.clone(),N.expression.expression=N.expression.expression.clone(),N.expression.expression.elements=n,Si(u,p,N))}}break;case"charAt":if(p.args.length<2)return(N=We(we,p,{operator:"||",left:We(At,p,{expression:s.expression,property:p.args.length?We(we,p.args[0],{operator:"|",left:We(De,p,{value:0}),right:p.args[0]}):We(De,p,{value:0})}).optimize(u),right:We(H,p,{value:""})})).is_string=W,N.optimize(u);break;case"apply":if(2==p.args.length&&p.args[1]instanceof be)return(D=p.args[1].elements.slice()).unshift(p.args[0]),We(ke,p,{expression:We(lt,s,{expression:s.expression,property:"call"}),args:D}).optimize(u);break;case"call":r=s.expression;if((r=r instanceof qe?r.fixed_value():r)instanceof Pe&&!r.contains_this())return(p.args.length?Ge(p,[p.args[0],We(ke,p,{expression:s.expression,args:p.args.slice(1)})]):We(ke,p,{expression:s.expression,args:[]})).optimize(u)}else if(u.option("side_effects")&&s instanceof ke&&1==s.args.length&&ci(s.expression)&&"Object"==s.expression.name)return(b=p.clone()).expression=Kn(p,s,s.args[0]),b.optimize(u);if(u.option("unsafe_Function")&&ci(s)&&"Function"==s.name){if(0==p.args.length)return We(gt,p,{argnames:[],body:[]}).init_vars(s.scope);if($e(p.args,function(e){return e instanceof H}))try{var l,h="n(function("+p.args.slice(0,-1).map(function(e){return e.value}).join()+"){"+p.args[p.args.length-1].value+"})",d=Qt(h),m={ie:u.option("ie")},g=(d.figure_out_scope(m),new cn(u.options)),h=((d=d.transform(g)).figure_out_scope(m),d.compute_char_frequency(m),d.mangle_names(m),d.walk(new Ue(function(e){return!!l||(e instanceof Pe?(l=e,!0):void 0)})),rn());return Se.prototype._codegen.call(l,h),p.args=[We(H,p,{value:l.argnames.map(function(e){return e.print_to_string()}).join()}),We(H,p.args[p.args.length-1],{value:h.get().replace(/^\{|\}$/g,"")})],p}catch(e){if(!(e instanceof Kt))throw e;Oe.warn("Error parsing code passed to new Function [{start}]",p.args[p.args.length-1]),Oe.warn(e.toString())}}var _=s instanceof qe?s.fixed_value():s,e=u.parent(),v=u.self(),y=_ instanceof Pe&&(!Wt(_)||u.option("awaits")&&e instanceof Xe)&&(!$t(_)||u.option("yields")&&v instanceof Bt&&v.nested),b=y&&_.first_statement(),x=0,w=!1,S=!$e(p.args,function(e){return!(e instanceof Me)}),g=y&&$e(_.argnames,function(e,t){if(1==x&&p.args[t]instanceof Me&&(x=2),e instanceof Ae){if(gi(1==(x=x||1)&&p.args[t])||(x=2),Nr(_,e.value))return!1;e=e.name}return!(e instanceof Te&&(w=!0,Nr(_,e)))})&&!(_.rest instanceof Te&&Nr(_,_.rest)),m=g&&u.option("inline")&&!p.is_expr_pure(u)&&(s===_||gr(_,u));if(m&&b instanceof Ne){var k=b.value;if(s===_&&!_.name&&(!k||k.is_constant_expression())&&mr(_,dr(u)))return Ge(p,B(k)).optimize(u)}if(y&&!_.contains_this()){var E,A=!1;if(m&&!_.uses_arguments&&!_.pinned()&&!(_.name&&_ instanceof yt)&&(s===_||!kr(u,E=s.definition(),_)&&_.is_constant_expression(Wn(u)))&&(k=function(e){var t=_.body.length;if(t<2&&(e=z(e)))return e;if(u.option("inline")<3)return!1;e=null;for(var n=0;n<t;n++){var i=_.body[n];if(i instanceof ee){if(A){if(e){if(!(e instanceof je))return!1;fi(i)||(e=null)}}else if(!fi(i)){if(e&&!(e instanceof je))return!1;A=!(e=null)}}else if(!(i instanceof te||i instanceof ot||i instanceof Z)){if(e)return!1;e=i}}return z(e)}(b))){var T,M,C,P,O=s===_||E.single_use&&E.references.length-E.replaced==1;if(function(){if(!(x||w||S||A||_.rest)&&!(u.option("inline")<2&&_.argnames.length)&&_.variables.all(function(e){return e.references.length-e.replaced<2&&e.orig[0]instanceof Fe})){var i,t=u.find_parent(Le),r=!1,s=dr(u,t),o=[],a=!1,c=new Ue(function(e,t){var n;return!!r||(e instanceof we&&Ye[e.operator]||e instanceof Ee?void(o=null):e instanceof Le||s&&e instanceof Ct&&s[e.name]?r=!0:e instanceof qe?(n=e.definition(),_.variables.get(e.name)!==n?void(o=null):n.init instanceof vt||sn(e,c.parent())?r=!0:(n=U(n),i<n||(i=n),o?void(a?o=null:o.push(_.argnames[n])):void 0)):a?void 0:e instanceof xe&&e.left instanceof Ie?(e.left.expression.walk(c),e.left instanceof At&&e.left.property.walk(c),e.right.walk(c),a=!0):e.has_side_effects(u)?(t(),a=!0):void 0)});if(k.walk(c),!r){var e=p.args.length;if(o&&_.argnames.length>=e){for(e=_.argnames.length;e-- >i&&_.argnames[e]===o.pop(););e++}return e<=i||$e(p.args.slice(i,e),a&&!o?function(e){return e.is_constant_expression(t)}:function(e){return!e.has_side_effects(u)})}}}()){var D=p.args.slice(),I=[],d=k.clone(!0).transform(new Vt(function(e){if(e instanceof qe){var t=e.definition();if(_.variables.get(e.name)!==t)return I.push(e),e;var t=U(t),n=D[t];if(!n)return We(Ve,p);D[t]=null;t=this.parent();return t?Kn(t,e,n):n}})),h=_.inlined,F=(s!==_&&(_.inlined=!0),[]),N=(D.forEach(function(e){e&&((e=e.clone(!0)).walk(new Ue(function(e){e instanceof qe&&I.push(e)})),F.push(e))},[]),F.push(d),Ge(p,F).optimize(u));if(_.inlined=h,N=Kn(e,v,N),O||xi(N,p)===N)return I.forEach(function(e){e.scope=s===_?_.parent_scope:s.scope,e.reference();e=e.definition();O&&e.replaced++,e.single_use=!1}),N;N.has_side_effects(u)||(p.drop_side_effect_free=function(e,t){var n=this.args.slice();return n.unshift(this.expression),Ge(this,n).drop_side_effect_free(e,t)})}if(O&&function(){var e,t=new Gt,n=0;P=v;do{if(P.variables&&P.variables.each(function(e){t.set(e.name,!0)}),e=P,(P=u.parent(n++))instanceof tt){if(!P.static)return}else P instanceof pt?C=[]:P instanceof dt?P.init!==e&&(C=[]):P instanceof mt&&P.init!==e&&P.object!==e&&(C=[])}while(!(P instanceof Le));if(!(M=P.body.indexOf(e)+1))return;if(!mr(_,dr(u,P)))return;var i=(s!==_||_.parent_scope.resolve()===P)&&!P.pinned();P instanceof Lt&&(u.toplevel.vars?t.set("arguments",!0):i=!1);T=new Gt;var r=u.option("inline");return function(t,n){var i=!1;return _.each_argname(function(e){if(!i&&!e.unused){if(!n||$(t,e.name))return i=!0;T.set(e.name,!0),C&&C.push(e.definition())}}),!i}(t,2<=r&&i)&&!(!function(t,e){for(var n=0;n<_.body.length;n++){var i=_.body[n];if(i instanceof vt){var r=i.name;if(!e)return;if(T.has(r.name))return;if($(t,r.name))return;if(!$e(i.enclosed,function(e){return e.scope===P||e.scope===i||!t.has(e.name)}))return;C&&C.push(r.definition())}else if(i instanceof ee){if(!e)return;for(var s=i.definitions.length;0<=--s;){r=i.definitions[s].name;if($(t,r.name))return;C&&C.push(r.definition())}}}return 1}(t,3<=r&&i)||C&&0!=C.length&&Pr(_,C))}())return _._squeezed=!0,s!==_&&(_.parent_scope=s.scope),N=Ge(p,function(){var e=[],t=[];(1<x||w||S||_.rest?function(i,r){function t(e,t){if(t.unused)return q(t);var n=t.definition(),e=(n.assignments++,n.references.push(e),We(Dt,t));n.orig.push(e),n.eliminated++,R(i,r,e)}r.push(We(xe,p,{operator:"=",left:We(at,p,{elements:_.argnames.map(function(e){return e.unused?We(pe,e):e.convert_symbol(qe,t)}),rest:_.rest&&_.rest.convert_symbol(qe,t)}),right:We(be,p,{elements:p.args.slice()})}))}:function(e,t){for(var n=_.argnames.length,i=p.args.length;--i>=n;)t.push(p.args[i]);var r,s=[];for(i=n;0<=--i;){var o,a,c=_.argnames[i],u=(r=c instanceof Ae?(s.push(c),c.name):c,p.args[i]);r.unused||P.var_names().has(r.name)?u&&t.push(u):(o=We(Dt,r),(a=r.definition()).orig.push(o),a.eliminated++,void 0!==r.unused?(R(e,t,o),u&&t.push(u)):(!u&&c===r&&(C||"arguments"==r.name&&!Ut(_)&&Ut(P))&&(u=We(Ve,p)),R(e,t,o,u)))}for(e.reverse(),t.reverse(),i=s.length;0<=--i;){var f,l=s[i];void 0!==l.name.unused?t.push(l.value):(f=We(qe,l.name),l.name.definition().references.push(f),t.push(We(xe,l,{operator:"=",left:f,right:l.value})))}})(e,t);var n=function(i,e){var n=[M,0],s=[],r=[],o=[],a=[],c=[];return _.body.filter(C?function(e){var t,n;return!(e instanceof vt&&((n=(t=We(Dt,Ir(e.name))).definition()).fixed=!1,n.orig.push(t),n.eliminated++,R(i,r,t,Hi(e,!0)),1))}:function(e){var t;return!(e instanceof vt&&(t=e.name.definition(),P.functions.set(t.name,t),P.variables.set(t.name,t),P.enclosed.push(t),P.var_names().set(t.name,!0),n.push(e),1))}).forEach(function(e){if(e instanceof ee)for(var t=0;t<e.definitions.length;t++){var n=e.definitions[t],i=Ir(n.name),r=n.value;r&&0<c.length&&(c.push(r),r=Ge(n,c),c=[]),R(s,o,i,r),!C||T.has(i.name)||1==i.definition().orig.length&&_.functions.has(i.name)||a.push(Rr(u,i))}else e instanceof je&&c.push(e.body)}),[].push.apply(i,s),[].push.apply(e,a),[].push.apply(e,r),[].push.apply(e,o),n}(e,t);t.push(k),e.length&&n.push(We(ee,_,{definitions:e}));return[].splice.apply(P.body,n),_.enclosed.forEach(function(e){P.var_names().has(e.name)||(P.enclosed.push(e),P.var_names().set(e.name,!0))}),t}()).optimize(u),Kn(e,v,N)}if(u.option("side_effects")&&g&&$e(_.body,ii)&&(_===s?Xi(_,u):!x&&!w&&!_.rest)&&(!Ut(_)||!_.value)&&mr(_,dr(u)))return Ge(p,B()).optimize(u)}if(u.option("drop_console")&&s instanceof Ie){for(var L=s.expression;L.expression;)L=L.expression;if(ci(L)&&"console"==L.name)return We(Ve,p).optimize(u)}return u.option("negate_iife")&&e instanceof je&&oi(v)?p.negate(u,!0):Ti(u,p);function q(e){return We(At,e,{expression:We(be,e,{elements:[]}),property:We(De,e,{value:0})})}function B(e){var o,n,t=p.args.slice(),i=1<x||w||_.rest;return(i||S)&&(t=[We(be,p,{elements:t})]),i?(o=new Vt(function(i,e){var n,r,s;return i instanceof Ae?We(Ae,i,{name:i.name.transform(o)||q(i),value:i.value}):i instanceof at?(n=[],i.elements.forEach(function(e,t){(e=e.transform(o))&&(n[t]=e)}),Ui(i,n),We(at,i,{elements:n})):i instanceof ut?(r=[],s=[],i.properties.forEach(function(e){var t=e.key,n=e.value.transform(o);n?(s.length&&(t instanceof Oe||(t=Jn(t,e)),s.push(t),t=Ge(i,s),s=[]),r.push(We(ct,e,{key:t,value:n}))):t instanceof Oe&&s.push(t)}),s.length&&r.push(We(ct,i,{key:Ge(i,s),value:q(i)})),We(ut,i,{properties:r})):i instanceof Fe?null:void 0}),n=[],_.argnames.forEach(function(e,t){(e=e.transform(o))&&(n[t]=e)}),(i=_.rest&&_.rest.transform(o))&&(n.length=_.argnames.length),Ui(_,n),t[0]=We(xe,p,{operator:"=",left:We(at,_,{elements:n,rest:i}),right:t[0]})):_.argnames.forEach(function(e){e instanceof Ae&&t.push(e.value)}),t.push(e||We(Ve,p)),t}function V(){return p.call_only?We(De,p,{value:0}):We(Ve,p)}function z(e){return e?e instanceof Ne?e.value||V():e instanceof je?p.call_only?e.body:We(Be,e,{operator:"void",expression:e.body}):void 0:V()}function U(e){for(var t=_.argnames.length;0<=--t;)if(_.argnames[t].definition()===e)return t}function $(e,t){return e.has(t)||Fr[t]||P.var_names().has(t)}function R(e,t,n,i){var r=n.definition();P.var_names().has(n.name)||(P.var_names().set(n.name,!0),e.push(We(ze,n,{name:n,value:null}))),P.variables.set(n.name,r),P.enclosed.push(r),i&&(e=We(qe,n),r.assignments++,r.references.push(e),t.push(We(xe,p,{operator:"=",left:e,right:i})))}}),t(y,function(e,t){if(t.option("unsafe")){var n=e.expression;if(ci(n))switch(n.name){case"Array":case"Error":case"Function":case"Object":case"RegExp":return We(ke,e).transform(t)}}if(t.option("sequences")){n=pr(e);if(n!==e)return n.optimize(t)}return t.option("unused")&&hr(e,t),e}),t(Re,function(e,n){for(var i,r,s,t=n.option("side_effects")?(i=[],r=V(n),s=e.expressions.length-1,e.expressions.forEach(function(e,t){(e=t<s?e.drop_side_effect_free(n,r):e)&&(Zn(i,e),r=!1)}),i):e.expressions,o=t.length-1,a=1;a<o;a++){var c=t[a-1],u=p(c);if(u){var f=t[a];if(n.option("conditionals")){var l=_r(n,u,c.right,f);if(l){c.right=l,t.splice(a--,1),o--;continue}}n.option("dead_code")&&p(f)===u&&f.right.is_constant_expression(u.scope.resolve())&&(t[--a]=c.right)}}if(n.option("side_effects")){for(;0<o&&gi(t[o],n);)o--;o<t.length-1&&(t[o]=We(Be,e,{operator:"void",expression:t[o]}),t.length=o+1)}return 0==o?(e=Kn(n.parent(),n.self(),t[0]))instanceof Re?e:e.optimize(n):(e.expressions=t,e);function p(e){return e instanceof xe&&"="==e.operator&&e.left instanceof qe&&e.left.definition()}}),t(Mt,function(e,t){if(t.option("sequences")){var n=pr(e);if(n!==e)return n.optimize(t)}return Ti(t,e)}),os=X("+ -"),as=X("* / %"),t(Be,function(e,t){var n=e.operator,i=e.expression;if(t.option("sequences")&&function(){switch(n){case"delete":return!o(i.tail_node());case"typeof":return!ci(i.tail_node());default:return 1}}()){var r=pr(e);if(r!==e)return r.optimize(t)}switch(n){case"+":if(!t.option("evaluate"))break;if(!i.is_number(t,!0))break;var s=t.parent();if(s instanceof Be&&"delete"==s.operator)break;return i;case"-":if((i=i instanceof _?i.transform(t):i)instanceof De||i instanceof _)return e;break;case"!":if(t.option("booleans")){if(i.is_truthy())return Ge(e,[i,We(le,e)]).optimize(t);if(t.in_boolean_context()){if(i instanceof Be&&"!"==i.operator)return i.expression;i instanceof we&&(e=((s=V(t))?wi:xi)(e,i.negate(t,s)))}}break;case"delete":if(!t.option("evaluate"))break;if(o(i))break;return Ge(e,[i,We(B,e)]).optimize(t);case"typeof":if(!t.option("booleans"))break;if(!t.in_boolean_context())break;Oe.warn("Boolean expression always true [{start}]",e);s=[We(B,e)];return i instanceof qe&&mn(i,t)||s.unshift(i),Ge(e,s).optimize(t);case"void":if(t.option("side_effects"))return(i=i.drop_side_effect_free(t))?(e.expression=i,e):We(Ve,e).optimize(t)}return t.option("evaluate")&&i instanceof we&&os[n]&&as[i.operator]&&(i.left.is_constant()||!i.right.has_side_effects(t))?We(we,e,{operator:i.operator,left:We(Be,i.left,{operator:n,expression:i.left}),right:i.right}):Ti(t,e);function o(e){return e instanceof _||e instanceof v||e instanceof b||e instanceof Ie||e instanceof qe||e instanceof Ve}}),t(Xe,function(e,t){if(t.option("awaits")){if(t.option("sequences")){var n=pr(e);if(n!==e)return n.optimize(t)}if(t.option("side_effects")){var i=e.expression;if(i instanceof Xe)return i.optimize(t);if(i instanceof Be&&i.expression instanceof Xe)return i.optimize(t);for(var r,s=0,o=e;r=t.parent(s++);o=r){if(Ut(r)){if(r.value===o)return i.optimize(t)}else if(r instanceof Ne){var a=!0;do{if(o=r,(r=t.parent(s++))instanceof Rt&&(r.bfinally||r.bcatch)!==o){a=!1;break}}while(r&&!(r instanceof Le));if(a)return i.optimize(t)}else if(r instanceof Re&&r.tail_node()===o)continue;break}}}return e}),t(Bt,function(e,t){if(t.option("yields")){if(t.option("sequences")){var n=pr(e);if(n!==e)return n.optimize(t)}n=e.expression;if(e.nested&&"Call"==n.TYPE){n=n.clone().optimize(t);if("Call"!=n.TYPE)return n}}return e}),we.DEFMETHOD("lift_sequences",function(e){if(this.left instanceof Ie)return this.left.expression instanceof Re?(t=this.left.expression.expressions.slice(),(n=this.clone()).left=n.left.clone(),n.left.expression=t.pop(),t.push(n),Ge(this,t)):this;if(this.left instanceof Re)return t=this.left.expressions.slice(),(n=this.clone()).left=t.pop(),t.push(n),Ge(this,t);if(this.right instanceof Re){if(this.left.has_side_effects(e))return this;for(var t,n,i="="==this.operator&&this.left instanceof qe,r=(t=this.right.expressions).length-1,s=0;s<r&&(i||!t[s].has_side_effects(e));s++);if(s==r)return t=t.slice(),(n=this.clone()).right=t.pop(),t.push(n),Ge(this,t);if(0<s)return(n=this.clone()).right=Ge(this.right,t.slice(s)),(t=t.slice(0,s)).push(n),Ge(this,t)}return this}),cs=X("indexOf lastIndexOf"),us=X("== === != !== * & | ^"),t(we,function(n,r){if(!us[n.operator]||!n.right.is_constant()||n.left.is_constant()||n.left instanceof we&&Zt[n.left.operator]>=Zt[n.operator]||k(),r.option("sequences")){var e=n.lift_sequences(r);if(e!==n)return e.optimize(r)}if(r.option("assignments")&&Ye[n.operator]){var t,i=xr(n.left,r),e=n.right;if(i instanceof qe&&e instanceof xe&&"="==e.operator&&i.equals(e.left))return i=i.clone(),t=We(xe,n,{operator:"=",left:i,right:We(we,n,{operator:n.operator,left:n.left,right:e.right})}),i.fixed&&(i.fixed=function(){return t.right},i.fixed.assigns=[t]),(e=i.definition()).references.push(i),e.replaced++,t.optimize(r)}if(r.option("comparisons"))switch(n.operator){case"===":case"!==":if(gi(n.left,r)&&n.right.is_defined(r))return Oe.warn("Expression always defined [{start}]",n),Ge(n,[n.right,We("==="==n.operator?le:B,n)]).optimize(r);var s=!0;(n.left.is_string(r)&&n.right.is_string(r)||n.left.is_number(r)&&n.right.is_number(r)||n.left.is_boolean(r)&&n.right.is_boolean(r)||wr(r,n.left)&&n.left.equals(n.right))&&(n.operator=n.operator.slice(0,2));case"==":case"!=":if(!s&&gi(n.left,r))n.left=We(T,n.left);else if(r.option("typeofs")&&n.left instanceof H&&"undefined"==n.left.value&&n.right instanceof Be&&"typeof"==n.right.operator)((o=n.right.expression)instanceof qe?!o.is_declared(r):o instanceof Ie&&r.option("ie"))||(n.right=o,n.left=We(Ve,n.left).optimize(r),2==n.operator.length&&(n.operator+="="));else if(n.left instanceof qe&&n.right instanceof qe&&n.left.definition()===n.right.definition()&&vr(n.left))return We("="==n.operator[0]?B:le,n).optimize(r);break;case"&&":case"||":var o,s=n.left;if(s instanceof we&&(s.operator==("&&"==n.operator?"!==":"===")&&n.right instanceof we&&s.operator==n.right.operator&&(gi(s.left,r)&&n.right.left instanceof T||s.left instanceof T&&gi(n.right.left,r)))){if((o=(o=s.right)instanceof xe&&"="==o.operator?o.left:o).has_side_effects(r))break;if(o.equals(n.right.right))return s.operator=s.operator.slice(0,-1),s.left=We(T,n),s}}var a,c,u=!1,f=r.parent();if(r.option("booleans")){i=xr(n.left,r);if(Ye[n.operator]&&!i.has_side_effects(r)){if(i.equals(n.right))return Kn(f,r.self(),n.left).optimize(r);rr(r,i)}u=r.in_boolean_context()}if(u)switch(n.operator){case"+":var l=n.left.evaluate(r,!0);if(l&&"string"==typeof l||(l=n.right.evaluate(r,!0))&&"string"==typeof l){Oe.warn("+ in boolean context always true [{start}]",n);l=[];if(n.left.evaluate(r)instanceof Oe&&l.push(n.left),n.right.evaluate(r)instanceof Oe&&l.push(n.right),l.length<2)return l.push(We(B,n)),Ge(n,l).optimize(r);n.truthy=!0}break;case"==":if(n.left instanceof H&&""==n.left.value&&n.right.is_string(r))return We(Be,n,{operator:"!",expression:n.right}).optimize(r);break;case"!=":if(n.left instanceof H&&""==n.left.value&&n.right.is_string(r))return n.right.optimize(r)}if(r.option("comparisons")&&n.is_boolean(r)){if("Binary"!=f.TYPE){e=We(Be,n,{operator:"!",expression:n.negate(r)});if(Si(r,n,e)===e)return e}switch(n.operator){case">":k("<");break;case">=":k("<=")}}if(r.option("conditionals")&&Ye[n.operator]&&(n.left instanceof we&&n.operator==n.left.operator&&(a=(e=We(we,n,{operator:n.operator,left:n.left.right,right:n.right})).transform(r),e!==a)&&(n.left=n.left.left,n.right=a),(p=n.right.tail_node())instanceof we)&&n.operator==p.operator&&Sr(n,r),r.option("strings")&&"+"==n.operator){if(n.right instanceof H&&""==n.right.value&&n.left.is_string(r))return n.left.optimize(r);if(n.left instanceof H&&""==n.left.value&&n.right.is_string(r))return n.right.optimize(r);if(n.left instanceof we&&"+"==n.left.operator&&n.left.left instanceof H&&""==n.left.left.value&&n.right.is_string(r)&&(n.left.right.is_constant()||!n.right.has_side_effects(r)))return n.left=n.left.right,n.optimize(r);(p=n.right.tail_node())instanceof we&&n.operator==p.operator&&(n.left.is_string(r)&&p.is_string(r)||p.left.is_string(r)&&(n.left.is_constant()||!p.right.has_side_effects(r)))&&Sr(n,r)}if(r.option("evaluate")){var p,h=!0;switch(n.operator){case"&&":if(!(g=ir(r,n.left)))return Oe.warn("Condition left of && always false [{start}]",n),Kn(f,r.self(),n.left).optimize(r);if(!(g instanceof Oe))return Oe.warn("Condition left of && always true [{start}]",n),Ge(n,[n.left,n.right]).optimize(r);if(n.right.evaluate(r,!0)){if((u||"&&"==f.operator&&f.left===r.self())&&!(n.right.evaluate(r)instanceof Oe))return Oe.warn("Dropping side-effect-free && [{start}]",n),n.left.optimize(r)}else{if(u&&!(n.right.evaluate(r)instanceof Oe))return Oe.warn("Boolean && always false [{start}]",n),Ge(n,[n.left,We(le,n)]).optimize(r);n.falsy=!0}if("||"==n.left.operator)if(!(m=ir(r,n.left.right)))return We(Ee,n,{condition:n.left.left,consequent:n.right,alternative:n.left.right}).optimize(r);break;case"??":var d=!0;case"||":var m,g=ir(r,n.left,d);if(d?null==g:!g)return Oe.warn("Condition left of {operator} always {value} [{start}]",{operator:n.operator,value:d?"nullish":"false",start:n.start}),Ge(n,[n.left,n.right]).optimize(r);if(!(g instanceof Oe))return Oe.warn("Condition left of {operator} always {value} [{start}]",{operator:n.operator,value:d?"defined":"true",start:n.start}),Kn(f,r.self(),n.left).optimize(r);if(d||!(g=n.right.evaluate(r,!0))||g instanceof Oe){if((u||"||"==f.operator&&f.left===r.self())&&!n.right.evaluate(r))return Oe.warn("Dropping side-effect-free {operator} [{start}]",n),n.left.optimize(r)}else{if(u&&!(n.right.evaluate(r)instanceof Oe))return Oe.warn("Boolean || always true [{start}]",n),Ge(n,[n.left,We(B,n)]).optimize(r);n.truthy=!0}if(!d&&"&&"==n.left.operator)if((m=ir(r,n.left.right))&&!(m instanceof Oe))return We(Ee,n,{condition:n.left.left,consequent:n.left.right,alternative:n.right}).optimize(r);break;case"+":if((n=(n=n.left instanceof E&&n.right instanceof we&&"+"==n.right.operator&&n.right.left instanceof E&&n.right.is_string(r)?We(we,n,{operator:"+",left:We(H,n.left,{value:""+n.left.value+n.right.left.value,start:n.left.start,end:n.right.left.end}),right:n.right.right}):n).right instanceof E&&n.left instanceof we&&"+"==n.left.operator&&n.left.right instanceof E&&n.left.is_string(r)?We(we,n,{operator:"+",left:n.left.left,right:We(H,n.right,{value:""+n.left.right.value+n.right.value,start:n.left.right.start,end:n.right.end})}):n).right instanceof Be&&"-"==n.right.operator&&n.left.is_number(r)){n=We(we,n,{operator:"-",left:n.left,right:n.right.expression});break}if(n.left instanceof Be&&"-"==n.left.operator&&S()&&n.right.is_number(r)){n=We(we,n,{operator:"-",left:n.right,right:n.left.expression});break}if(r.option("unsafe_math")&&n.left instanceof we&&Zt[n.left.operator]==Zt[n.operator]&&n.right.is_constant()&&(n.right.is_boolean(r)||n.right.is_number(r))&&n.left.is_number(r)&&!n.left.right.is_constant()&&(n.left.left.is_boolean(r)||n.left.left.is_number(r))){n=We(we,n,{operator:n.left.operator,left:We(we,n,{operator:n.operator,left:n.right,right:n.left.left}),right:n.left.right});break}case"-":if(n.right instanceof Be&&"-"==n.right.operator&&n.left.is_number(r)&&n.right.expression.is_number(r)){n=We(we,n,{operator:"+",left:n.left,right:n.right.expression});break}case"*":case"/":h=r.option("unsafe_math"),"+"!=n.operator&&["left","right"].forEach(function(e){var t=n[e];t instanceof Be&&"+"==t.operator&&((t=t.expression).is_boolean(r)||t.is_number(r)||t.is_string(r))&&(n[e]=t)});case"&":case"|":case"^":"-"==n.operator||"/"==n.operator||!n.left.is_boolean(r)&&!n.left.is_number(r)||!n.right.is_boolean(r)&&!n.right.is_number(r)||!S()||n.left instanceof we&&n.left.operator!=n.operator&&Zt[n.left.operator]>=Zt[n.operator]||(n=Si(r,n,We(we,n,{operator:n.operator,left:n.right,right:n.left}),n.right instanceof E&&!(n.left instanceof E))),h&&n.is_number(r)&&(!(n.right instanceof we&&"%"!=n.right.operator&&Zt[n.right.operator]==Zt[n.operator]&&n.right.is_number(r)&&("+"!=n.operator||n.right.left.is_boolean(r)||n.right.left.is_number(r)))||"-"==n.operator&&n.left.is_negative_zero()||!n.right.left.is_constant_expression()&&n.right.right.has_side_effects(r)||(g=n.right.right,c=!1,g.walk(new Ue(function(e){if(c)return!0;if(e instanceof xe){if(e.left instanceof Ie)return c=!0}else if(e instanceof jt&&an[e.operator]&&e.expression instanceof Ie)return c=!0})),c)||("+"!=(n=We(we,n,{operator:b(n.operator,n.right.operator),left:We(we,n.left,{operator:n.operator,left:n.left,right:n.right.left,start:n.left.start,end:n.right.left.end}),right:n.right.right})).operator||n.right.is_boolean(r)||n.right.is_number(r)||(n.right=We(Be,n.right,{operator:"+",expression:n.right}))),n.right instanceof E)&&n.left instanceof we&&"%"!=n.left.operator&&Zt[n.left.operator]==Zt[n.operator]&&n.left.is_number(r)&&(n.left.left instanceof E?(i=x(n.operator,n.left.left,n.right,{start:n.left.left.start,end:n.right.end}),n=x(n.left.operator,Ti(r,i),n.left.right,n)):n.left.right instanceof E&&(d=b(n.left.operator,n.operator),!(p=Ti(r,x(d,n.left.right,n.right,n.left))).is_constant()||"-"==n.left.operator&&0!=n.right.value&&0==+p.value&&n.left.left.is_negative_zero()||(n=x(n.left.operator,n.left.left,p,n))));break;case"instanceof":if(ln(n.right))return Ge(n,[n,We(le,n)]).optimize(r)}if(!(f instanceof Be&&"delete"==f.operator)){if(n.left instanceof De&&!n.right.is_constant())switch(n.operator){case"+":if(0==n.left.value){if(n.right.is_boolean(r))return We(Be,n,{operator:"+",expression:n.right}).optimize(r);if(n.right.is_number(r)&&!n.right.is_negative_zero())return n.right}break;case"*":if(1==n.left.value)return We(Be,n,{operator:"+",expression:n.right}).optimize(r)}if(n.right instanceof De&&!n.left.is_constant())switch(n.operator){case"+":if(0==n.right.value){if(n.left.is_boolean(r))return We(Be,n,{operator:"+",expression:n.left}).optimize(r);if(n.left.is_number(r)&&!n.left.is_negative_zero())return n.left}break;case"-":if(0==n.right.value)return We(Be,n,{operator:"+",expression:n.left}).optimize(r);break;case"/":if(1==n.right.value)return We(Be,n,{operator:"+",expression:n.left}).optimize(r)}}}if(r.option("typeofs"))switch(n.operator){case"&&":nr(n.left,n.right,null);break;case"||":nr(n.left,null,n.right)}if(r.option("unsafe")){var _=w(n.right);if(u&&_&&("=="==n.operator||"!="==n.operator)&&n.left instanceof De&&0==n.left.value)return("=="==n.operator?We(Be,n,{operator:"!",expression:n.right}):n.right).optimize(r);var v=w(n.left);if(r.option("comparisons")&&function(){switch(n.operator){case"<=":return _&&n.left instanceof De&&0==n.left.value;case"<":if(v&&n.right instanceof De&&0==n.right.value)return 1;case"==":case"!=":return _?n.left instanceof De&&-1==n.left.value||n.left instanceof Be&&"-"==n.left.operator&&n.left.expression instanceof De&&1==n.left.expression.value:void 0}}()){var y=We(Be,n,{operator:"!",expression:We(Be,n,{operator:"~",expression:v?n.left:n.right})});switch(n.operator){case"<":if(v)break;case"<=":case"!=":y=We(Be,n,{operator:"!",expression:y})}return y.optimize(r)}}return Ti(r,n);function b(e,t){switch(e){case"-":return"+"==t?"-":"+";case"/":return"*"==t?"/":"*";default:return t}}function x(e,t,n,i){return"+"==e&&(t.is_boolean(r)||t.is_number(r)||(t=We(Be,t,{operator:"+",expression:t})),n.is_boolean(r)||n.is_number(r)||(n=We(Be,n,{operator:"+",expression:n}))),We(we,i,{operator:e,left:t,right:n})}function w(e){return"Call"==e.TYPE&&e.expression instanceof lt&&cs[e.expression.property]}function S(){return n.left.is_constant()||n.right.is_constant()||!n.left.has_side_effects(r)&&!n.right.has_side_effects(r)}function k(e){S()&&(e&&(n.operator=e),e=n.left,n.left=n.right,n.right=e)}}),t(M,function(e){return e}),t(qe,function(n,e){if(!e.option("ie")&&ci(n)&&(!n.scope.resolve().uses_with||!e.find_parent(qt)))switch(n.name){case"undefined":return We(Ve,n).optimize(e);case"NaN":return We(v,n).optimize(e);case"Infinity":return We(_,n).optimize(e)}var t=e.parent();if(e.option("reduce_vars")&&sn(e.self(),t)!==e.self()){var i,r,s,o,a,c,u,f,l,p=n.definition(),h=n.fixed_value(),t=p.single_use&&!(t instanceof ke&&t.is_expr_pure(e));if(t)if(ln(h)){if(p.scope===n.scope.resolve(!0)&&!p.in_loop||e.option("reduce_funcs")&&1!=p.escaped.depth&&!h.inlined)if(p.redefined())t=!1;else if(kr(e,p,h))t=!1;else if(h.name&&h.name.definition()!==p)t=!1;else if(h.parent_scope!==n.scope||on(p))if(gr(h,e)){if("f"==(t=h.is_constant_expression(n.scope)))for(var d=n.scope;(d instanceof vt||d instanceof yt)&&(d.inlined=!0),d=d.parent_scope;);}else t=!1;else(h.name&&("await"==h.name.name&&Wt(h)||"yield"==h.name.name&&$t(h))||h.has_side_effects(e)||e.option("ie")&&h instanceof et)&&(t=!1);else t=!1;t&&(h.parent_scope=n.scope)}else(!h||0<p.recursive_refs||!h.is_constant_expression()||h.drop_side_effect_free(e))&&(t=!1);if(t){if(p.single_use=!1,h._squeezed=!0,h.single_use=!0,ln(h=(h=h instanceof ce?$i(h):h)instanceof vt?Hi(h):h)){var m=[],d=n.scope;do{if(m.push(d),d===p.scope)break}while(d=d.parent_scope);h.enclosed.forEach(function(e){if(!h.variables.has(e.name))for(var t=0;t<m.length;t++){var n=m[t];if(!ye(n.enclosed,e))return;n.var_names().set(e.name,!0)}})}return 0<p.recursive_refs?(i=(l=h.clone(!0)).name.definition(),r=l.variables.get(l.name.name),s=r&&r.orig[0],t=l instanceof et?(o="def_function",D):(o="def_variable",ge),s instanceof t||(((s=We(t,l.name)).scope=l).name=s,(r=l[o](s)).recursive_refs=p.recursive_refs),l.walk(new Ue(function(e){var t,n;e instanceof Pt?e!==s&&((t=e.definition()).orig.push(e),t.eliminated++):e instanceof qe&&((t=e.definition())===i?e.thedef=t=r:(t.single_use=!1,ln(n=e.fixed_value())&&n.name&&n.name.definition()===t&&t.scope===n.name.scope&&h.variables.get(n.name.name)===t&&(n.name=n.name.clone(),e.thedef=t=l.variables.get(n.name.name)||l[o](n.name))),t.references.push(e))}))):(h instanceof Le?(e.push(h),l=h.optimize(e),e.pop()):l=h.optimize(e),l=l.transform(new Vt(function(e,t){return e instanceof Le||t(e=e.clone(),this),e}))),p.replaced++,l}if(h&&!1!==(a=n.fixed||p.fixed).should_replace)if(h instanceof q?on(p)||!Er(p)||function(e){var t=n.scope;for(;t!==e.scope;){if(t instanceof et)return 1;t=t.parent_scope}}(p)||(c=h):(t=h.evaluate(e,!0))!==h&&"function"!=typeof t&&(null===t||"object"!=typeof t||e.option("unsafe_regexp")&&t instanceof RegExp&&!p.cross_loop&&Er(p))&&(c=Jn(t,h)),c)if(void 0===a.should_replace&&(t=c.optimize(e).print_to_string().length,g(h)||(t=Math.min(t,h.print_to_string().length)),u=p.name.length,e.option("unused")&&!e.exposed(p)&&(f=p.references.length-p.replaced-p.assignments,f=Math.min(f,p.references.filter(function(e){return e.fixed===a}).length),u+=(u+2+t)/Math.max(1,f)),a.should_replace=t-Math.floor(u)<e.eval_threshold),a.should_replace)return g(h)?(l=c.optimize(e))===c&&(l=l.clone(!0)):(l=xi(c.optimize(e),h))!==c&&l!==h||(l=l.clone(!0)),p.replaced++,l}return n;function g(e){var t;return e.walk(new Ue(function(e){if(t=e instanceof qe?!0:t)return!0})),t}}),t(It,function(e,n){if(!n.option("templates"))return e;var i=e.tag;if(!i||Ar(n,i)){for(var t,r=[],s=[],o=0;o<e.strings.length;o++){var a,c=e.strings[o];if(i||(a=Tr(c))&&(c=h(a)),0<o){var u=e.expressions[o-1],f=function(e){var t=e.evaluate(n);if(t!==e&&!(i&&/\r|\\|`/.test(t)||(t=h(""+t)).length>e.print_to_string().length+"${}".length))return t}(u);if(f){var l,f=s[s.length-1]+f+c;if(i||typeof(l=Tr(f))==t){s[s.length-1]=l?h(l):f;continue}}r.push(u)}s.push(c),i||(t=typeof a)}if(!i&&1<s.length){if(""==s[s.length-1])return We(we,e,{operator:"+",left:We(It,e,{expressions:r.slice(0,-1),strings:s.slice(0,-1)}).transform(n),right:r[r.length-1]}).optimize(n);if(""==s[0]){for(var p=We(we,e,{operator:"+",left:We(H,e,{value:""}),right:r[0]}),o=1;""==s[o]&&o<r.length;o++)p=We(we,e,{operator:"+",left:p,right:r[o]});return Si(n,e,We(we,e,{operator:"+",left:p.transform(n),right:We(It,e,{expressions:r.slice(o),strings:s.slice(o)}).transform(n)}).optimize(n))}}e.expressions=r,e.strings=s}return Ti(n,e);function h(e){return e.replace(/\r|\\|`|\${/g,function(e){return"\\"+("\r"==e?"r":e)})}}),t(Ve,function(e,t){if(t.option("unsafe_undefined")){var n=Wn(t).find_variable("undefined");if(n)return(n=We(qe,e,{name:"undefined",scope:n.scope,thedef:n})).is_undefined=!0,n}n=sn(t.self(),t.parent());return n&&Cr(n,e)?e:We(Be,e,{operator:"void",expression:We(De,e,{value:0})})}),t(_,function(e,t){var n=sn(t.self(),t.parent());return(!n||!Cr(n,e))&&(!t.option("keep_infinity")||n||Wn(t).find_variable("Infinity"))?We(we,e,{operator:"/",left:We(De,e,{value:1}),right:We(De,e,{value:0})}):e}),t(v,function(e,t){var n=sn(t.self(),t.parent());return(!n||!Cr(n,e))&&(n||Wn(t).find_variable("NaN"))?We(we,e,{operator:"/",left:We(De,e,{value:0}),right:We(De,e,{value:0})}):e}),fs=X("+ - * / % >> << >>> | ^ &"),ls=X("* | ^ &"),t(xe,function(s,o){if(o.option("dead_code"))if(s.left instanceof Ie){if("="==s.operator){if(s.redundant)return e=[s.left.expression],s.left instanceof At&&e.push(s.left.property),e.push(s.right),Ge(s,e).optimize(o);if(s.left.equals(s.right)&&!s.left.has_side_effects(o))return s.right;var e=s.left.expression;if(e instanceof Pe||!o.has_directive("use strict")&&e instanceof E&&!e.may_throw_on_access(o))return s.left instanceof lt?s.right:Ge(s,[s.left.property,s.right]).optimize(o)}}else if(s.left instanceof qe&&mn(s.left,o)){if("="==s.operator&&s.left.equals(s.right)&&!((c=o.parent())instanceof Be&&"delete"==c.operator))return s.right;if(s.left.is_immutable())return h();var t,n=s.left.definition(),a=n.scope.resolve(),i=a===o.find_parent(Pe),r=0,c=o.self();if(!a.uses_arguments||!on(n)||o.has_directive("use strict"))do{if(t=c,(c=o.parent(r++))instanceof xe){if(c.left instanceof qe&&c.left.definition()===n){if(l(r,c,!i))break;return h(n)}if(c.left.match_symbol(function(e){if(e instanceof Ie)return!0}))break}else{if(c instanceof ht){if(!i)break;if(l(r,c))break;if(Pr(a,[n]))break;return h(n)}if(c instanceof je){if(!i)break;if(Pr(a,[n]))break;do{if(u=c,(c=o.parent(r++))===a&&pi(c.body,u))return h(n)}while(u=u,(f=c)instanceof Se||f instanceof se||f instanceof P?pi(f.body,u):f instanceof Ce?f.body===u||f.alternative===u:f instanceof Rt?f.bfinally?f.bfinally===u:f.bcatch===u:void 0);break}if(c instanceof ze&&c.name instanceof Pt&&c.name.definition()===n){if(l(r,c))break;return h(n)}}}while(function(e,t){if(t instanceof we)switch(e){case t.left:return t.right.is_constant_expression(a);case t.right:return 1;default:return}if(t instanceof Ee)switch(e){case t.condition:return t.consequent.is_constant_expression(a)&&t.alternative.is_constant_expression(a);case t.consequent:case t.alternative:return 1;default:return}if(t instanceof Re){var n=t.expressions,i=n.indexOf(e);if(i<0)return;for(var r=n.length;--r>i;)if(!n[r].is_constant_expression(a))return;return 1}return t instanceof Be}(t,c))}var u,f;if(o.option("sequences")){var e=s.lift_sequences(o);if(e!==s)return e.optimize(o)}if(o.option("assignments")){if("="==s.operator&&s.left instanceof qe&&s.right instanceof we){if(s.right.left instanceof qe&&s.right.left.name==s.left.name&&fs[s.right.operator])return p(s.right.right);if(s.right.right instanceof qe&&s.right.right.name==s.left.name&&ls[s.right.operator]&&!s.right.left.has_side_effects(o))return p(s.right.left)}if(("-="==s.operator||"+="==s.operator&&(s.left.is_boolean(o)||s.left.is_number(o)))&&s.right instanceof De&&1==s.right.value)return e=s.operator.slice(0,-1),We(Be,s,{operator:e+e,expression:s.left})}return Ti(o,s);function l(e,t,n){var i=s.right,r=(s.right=We(T,i),t.may_throw(o));return s.right=i,Gn(o,e,t,a,r,n)}function p(e){var t=s.left.fixed;return t&&(t.to_binary=vn(function(e){return e.left},t)),We(xe,s,{operator:s.right.operator+"=",left:s.left,right:e})}function h(e){return e&&(e.fixed=!1),("="!=s.operator?We(we,s,{operator:s.operator.slice(0,-1),left:s.left,right:s.right}):Kn(o.parent(),s,s.right)).optimize(o)}}),t(Ee,function(o,t){if(t.option("sequences")&&o.condition instanceof Re)return e=o.condition.expressions.slice(),(u=o.clone()).condition=e.pop(),e.push(u),Ge(o,e).optimize(t);if(t.option("conditionals")){var a=o.condition;if(t.option("booleans")&&!a.has_side_effects(t)&&rr(t,a),!(a=ir(t,a)))return Oe.warn("Condition always false [{start}]",o),Ge(o,[o.condition,o.alternative]).optimize(t);if(!(a instanceof Oe))return Oe.warn("Condition always true [{start}]",o),Ge(o,[o.condition,o.consequent]).optimize(t);var e=V(t),n=a.negate(t,e),e=((e?wi:xi)(a,n)===n&&(o=We(Ee,o,{condition:n,consequent:o.alternative,alternative:o.consequent}),n=a,a=o.condition),o.consequent),i=o.alternative,r=xr(a,t);if(wr(t,r)){if(r.equals(e))return We(we,o,{operator:"||",left:a,right:i}).optimize(t);if(r.equals(i))return We(we,o,{operator:"&&",left:a,right:e}).optimize(t)}r=e.tail_node();if(r instanceof xe){var s="="==r.operator,c=s?i.tail_node():i;if((s||e===r)&&c instanceof xe&&r.operator==c.operator&&r.left.equals(c.left)&&(s&&r.left instanceof qe||!a.has_side_effects(t)&&v(e)&&v(i)))return We(xe,o,{operator:r.operator,left:r.left,right:We(Ee,o,{condition:a,consequent:y(e),alternative:y(i)})})}c=i.tail_node();if(r.equals(c))return Ge(o,e.equals(i)?[a,e]:[We(Ee,o,{condition:a,consequent:b(e),alternative:b(i)}),c]).optimize(t);var u,f,s=function e(t,n,i){var r=t.tail_node();var s=n.tail_node();if(!_(r,s))return!i&&We(Ee,o,{condition:a,consequent:t,alternative:n});i=r.clone();t=g(t,r,"expression");n=g(n,s,"expression");s=e(t,n);r.expression instanceof Re&&(s=Kn(r,r.expression,s));i.expression=s;return i}(e,i,!0);if(s)return s;if(e instanceof ke&&i.TYPE==e.TYPE&&0<=(s=m(e,i))&&e.expression.equals(i.expression)&&!a.has_side_effects(t)&&!e.expression.has_side_effects(t))return u=e.clone(),f=e.args[s],u.args[s]=f instanceof Me?We(Me,o,{expression:We(Ee,o,{condition:a,consequent:f.expression,alternative:i.args[s].expression})}):We(Ee,o,{condition:a,consequent:f,alternative:i.args[s]}),u;if(r instanceof Ee&&r.alternative.equals(i))return We(Ee,o,{condition:We(we,o,{left:a,operator:"&&",right:g(e,r,"condition")}),consequent:r.consequent,alternative:Qn(r.alternative,i)});if(r instanceof Ee&&r.consequent.equals(i))return We(Ee,o,{condition:We(we,o,{left:n,operator:"||",right:g(e,r,"condition")}),consequent:Qn(r.consequent,i),alternative:r.alternative});if(c instanceof Ee&&e.equals(c.consequent))return We(Ee,o,{condition:We(we,o,{left:a,operator:"||",right:g(i,c,"condition")}),consequent:Qn(e,c.consequent),alternative:c.alternative});if(c instanceof Ee&&e.equals(c.alternative))return We(Ee,o,{condition:We(we,o,{left:n,operator:"&&",right:g(i,c,"condition")}),consequent:c.consequent,alternative:Qn(e,c.alternative)});if(r instanceof we&&"&&"==r.operator&&r.right.equals(i))return We(we,o,{operator:"&&",left:We(we,o,{operator:"||",left:n,right:g(e,r,"left")}),right:Qn(r.right,i)}).optimize(t);if(r instanceof we&&"||"==r.operator&&r.right.equals(i))return We(we,o,{operator:"||",left:We(we,o,{operator:"&&",left:a,right:g(e,r,"left")}),right:Qn(r.right,i)}).optimize(t);if(c instanceof we&&"&&"==c.operator&&c.right.equals(e))return We(we,o,{operator:"&&",left:We(we,o,{operator:"||",left:a,right:g(i,c,"left")}),right:Qn(e,c.right)}).optimize(t);if(c instanceof we&&"||"==c.operator&&c.right.equals(e))return We(we,o,{operator:"||",left:We(we,o,{operator:"&&",left:n,right:g(i,c,"left")}),right:Qn(e,c.right)}).optimize(t);var l=t.option("booleans")&&t.in_boolean_context();if(h(e))return d(i)?p(a):We(we,o,{operator:"||",left:p(a),right:i}).optimize(t);if(d(e))return h(i)?p(a.negate(t)):We(we,o,{operator:"&&",left:p(a.negate(t)),right:i}).optimize(t);if(h(i))return We(we,o,{operator:"||",left:p(a.negate(t)),right:e}).optimize(t);if(d(i))return We(we,o,{operator:"&&",left:p(a),right:e}).optimize(t);t.option("typeofs")&&nr(a,e,i)}return o;function p(e){return e.is_boolean(t)?e:We(Be,e,{operator:"!",expression:e.negate(t)})}function h(e){return e instanceof B||l&&e instanceof E&&e.value||e instanceof Be&&"!"==e.operator&&e.expression instanceof E&&!e.expression.value}function d(e){return e instanceof le||l&&(e instanceof E&&!e.value||e instanceof Be&&"void"==e.operator&&!e.expression.has_side_effects(t))||e instanceof Be&&"!"==e.operator&&e.expression instanceof E&&e.expression.value}function m(e,t){var n=e.args,i=t.args,r=n.length;if(r!=i.length)return-2;for(var s=0;s<r;s++)if(!n[s].equals(i[s])){if(n[s]instanceof Me!=i[s]instanceof Me)return-3;for(var o=s+1;o<r;o++)if(!n[o].equals(i[o]))return-2;return s}return-1}function g(e,t,n){var i;return e===t?t[n]:((i=e.expressions.slice(0,-1)).push(t[n]),Ge(e,i))}function _(e,t){var n,i;if(e.TYPE==t.TYPE&&e.optional==t.optional)return e instanceof ke?-1!=m(e,t)?void 0:"Call"!=e.TYPE||!(e.expression instanceof Ie||t.expression instanceof Ie)||_(e.expression,t.expression):e instanceof Ie?(n=e.property,i=t.property,(n instanceof Oe?n.equals(i):n==i)&&!(e.expression instanceof Y||t.expression instanceof Y)):void 0}function v(e){return e===e.tail_node()||$e(e.expressions.slice(0,-1),function(e){return!e.has_side_effects(t)})}function y(e){var t;return e instanceof Re?((t=e.expressions.slice()).push(t.pop().right),Ge(e,t)):e.right}function b(e){return e instanceof Re?Ge(e,e.expressions.slice(0,-1)):We(De,e,{value:0})}}),t(l,function(e,t){return t.option("booleans")?t.in_boolean_context()?We(De,e,{value:+e.value}):(t=t.parent())instanceof we&&("=="==t.operator||"!="==t.operator)?(Oe.warn("Non-strict equality against boolean: {operator} {value} [{start}]",{operator:t.operator,value:e.value,start:t.start}),We(De,e,{value:+e.value})):We(Be,e,{operator:"!",expression:We(De,e,{value:1-e.value})}):e}),t(Me,function(e,t){var n=e.expression;return t.option("spreads")&&n instanceof be&&!(t.parent()instanceof wt)?Yt.splice(n.elements.map(function(e){return e instanceof pe?We(Ve,e).optimize(t):e})):e}),t(At,function(e,n){var t=e.expression,i=e.property,r=lr(e,n);if(r)return r;if(n.option("properties")){var s=i.evaluate(n);if(s!==i){"string"==typeof s&&("undefined"==s?s=void 0:(m=parseFloat(s)).toString()==s&&(s=m)),i=e.property=xi(i,Jn(s,i).transform(n));var o=""+s;if(tn(o)&&o.length<=i.print_to_string().length+1)return We(lt,e,{optional:e.optional,expression:t,property:o,quoted:!0}).optimize(n)}}var a,c,u,f,r=n.parent(),l=sn(n.self(),r);if(n.option("arguments")&&t instanceof qe&&hn(a=t.definition())&&!t.in_arg&&i instanceof De&&Math.floor(d=i.value)==d&&(c=a.scope)===function(){var e,t=0;for(;e=n.parent(t++);)if(e instanceof Pe){if(e instanceof Je)return;if(!Ut(e))return u=n.parent(t),e}}()&&c.uses_arguments<(l?2:3)){r instanceof Be&&"delete"==r.operator&&(a.deleted||(a.deleted=[]),a.deleted[d]=!0);var p=c.argnames[d];if(a.deleted&&a.deleted[d])p=null;else if(p)(!(p instanceof Fe&&"await"!=p.name&&t.scope.find_variable(p.name)===(h=p.definition()))||(n.has_directive("use strict")||c.name||c.rest||!(u instanceof ke&&d<u.args.length&&$e(u.args.slice(0,d+1),function(e){return!(e instanceof Me)}))||!$e(c.argnames,function(e){return e instanceof Fe}))&&(b()||h.assignments||1<h.orig.length))&&(p=null);else if((l||!b())&&d<c.argnames.length+5&&n.drop_fargs(c,u)&&!c.rest)for(;d>=c.argnames.length;)p=c.make_var(Fe,c,"argument_"+c.argnames.length),c.argnames.push(p);if(p&&_e(function(e){return e.name===p.name},c.argnames)===p)return l&&a.reassigned--,(h=We(qe,p)).reference(),p.unused=void 0,h}if(l)return e;if(n.option("sequences")&&"Call"!=r.TYPE&&!(r instanceof mt&&r.init===e)){var h=pr(e);if(h!==e)return h.optimize(n)}if(s!==i&&(l=e.flatten_object(o,n))&&(t=e.expression=l.expression,i=e.property=l.property),n.option("properties")&&n.option("side_effects")&&i instanceof De&&t instanceof be&&$e(f=t.elements,function(e){return!(e instanceof Me)})){var d,r=f[d=i.value];if(Or(r,n)){for(var m,g=r instanceof pe,_=!g,v=[],y=f.length;--y>d;)(m=f[y].drop_side_effect_free(n))&&(v.unshift(m),_)&&m.has_side_effects(n)&&(_=!1);for(_||v.unshift(r);0<=--y;)(m=f[y].drop_side_effect_free(n))?v.unshift(m):g?v.unshift(We(pe,f[y])):d--;return _?(v.push(r),Ge(e,v).optimize(n)):We(At,e,{expression:We(be,t,{elements:v}),property:We(De,i,{value:d})})}}return Ti(n,e);function b(){return!n.option("reduce_vars")||a.reassigned}}),yt.DEFMETHOD("contains_super",function(){var t=!1,n=this;return n.walk(new Ue(function(e){return!!t||(e instanceof Y?t=!0:e!==n&&e instanceof Le&&!Ut(e)||void 0)})),t}),(e=function(e,t){e.DEFMETHOD("contains_this",t)})(d,He),e(m,He),e(Oe,function(){var t=!1,n=this;return n.walk(new Ue(function(e){return!!t||(e instanceof q?t=!0:e!==n&&e instanceof Le&&!Ut(e)||void 0)})),t}),Ie.DEFMETHOD("flatten_object",function(e,t){if(t.option("properties")&&"__proto__"!==e){var n=this.expression;if(n instanceof wt)for(var i=n.properties,r=i.length;0<=--r;){var s=i[r];if(s.key===e){if(!$e(i,Dr))return;if(!Or(s.value,t))return;for(var o,a=[],c=0;c<i.length;c++){var u=i[c].value;if(i[c]instanceof S){var f,l,p,h=!(u.uses_arguments||$t(u)||u.contains_this());if(h&&(f=f||t.find_parent(Le),l=dr(t,f),u.each_argname(function(e){l[e.name]&&(h=!1)})),h)p=Wt(u)?m:d;else{if(!(r!=c||(o=t.parent())instanceof ke&&o.expression===this))return;p=u.CTOR}u=We(p,u)}a.push(u)}return We(At,this,{expression:We(be,n,{elements:a}),property:We(De,this,{value:r})})}}}}),t(lt,function(e,t){"arguments"!=e.property&&"caller"!=e.property||Oe.warn("Function.prototype.{property} not supported [{start}]",e);var n=t.parent();if(sn(t.self(),n))return e;var i=lr(e,t);if(i)return i;if(t.option("sequences")&&"Call"!=n.TYPE&&!(n instanceof mt&&n.init===e)){i=pr(e);if(i!==e)return i.optimize(t)}if(t.option("unsafe_proto")&&e.expression instanceof lt&&"prototype"==e.expression.property){var r=e.expression.expression;if(ci(r))switch(r.name){case"Array":e.expression=We(be,e.expression,{elements:[]});break;case"Function":e.expression=We(gt,e.expression,{argnames:[],body:[]}).init_vars(r.scope);break;case"Number":e.expression=We(De,e.expression,{value:0});break;case"Object":e.expression=We(wt,e.expression,{properties:[]});break;case"RegExp":e.expression=We(G,e.expression,{value:/t/});break;case"String":e.expression=We(H,e.expression,{value:""})}}n=e.flatten_object(e.property,t);return n?n.optimize(t):Ti(t,e)}),t(at,function(e,t){return t.option("rests")&&e.rest instanceof at?We(at,e,{elements:e.elements.concat(e.rest.elements),rest:e.rest.rest}):e}),t(ct,function(e,t){var n;return t.option("objects")&&(n=e.key)instanceof Oe&&(n=n.evaluate(t))!==e.key&&(e.key=""+n),e}),t(wt,function(n,i){var r,s,o,a,c,u,f,e;return i.option("objects")&&(o=s=r=!1,a=i.has_directive("use strict"),c=[],u=new Gt,f=[],n.properties.forEach(function(e){if(!(e instanceof Me))return p(e);s=!0;var t=e.expression;i.option("spreads")&&t instanceof wt&&$e(t.properties,function(e){return!(e instanceof x||e instanceof Me||!("__proto__"!==e.key||e instanceof C)&&e.value.has_side_effects(i))})?(r=!0,t.properties.forEach(function(e){var t=e.key,n=e instanceof C;if("__proto__"===t){if(!n)return;t=Jn(t,e)}p(n?We(St,e,{key:t,value:We(Ve,e).optimize(i)}):e)})):(o=!0,l(),f.push(e))}),l(),r)?(s&&o&&1==f.length&&(e=f[0])instanceof kt&&e.key instanceof De&&(e.key=""+e.key.value),We(wt,n,{properties:f})):n;function l(){c.forEach(function(e){var t=u.get(e);switch(t.length){case 0:return;case 1:return f.push(t[0])}r=!0;e=a&&!o&&t.pop();f.push(1==t.length?t[0]:We(St,n,{key:t[0].key,value:Ge(n,t.map(function(e){return e.value}))})),e&&f.push(e),t.length=0}),c=[],u=new Gt}function p(e){var t=e.key;t instanceof Oe&&(s=!0,(t=t.evaluate(i))===e.key||"__proto__"===t?o=!0:t=e.key=""+t),Dr(e)?(e.value.has_side_effects(i)&&l(),c.push(t),u.add(t,e)):(l(),f.push(e)),s&&!o&&"string"==typeof t&&Mr.test(t)&&(o=!0,(e=u.has(t)?u.get(t)[0]:e).key=We(De,e,{value:+t}))}}),(e=function(e,t){e.DEFMETHOD("try_inline",t)})(Oe,ve),e(xe,ve),e(Xe,function(n,e,t,i){if(n.option("awaits")){var r=this,e=r.expression.try_inline(n,e,t,i,!0);if(e)return t||Wi(e,function(e){e.in_bool=!1;var t=e.value;t instanceof Xe||(e.value=We(Xe,r,{expression:t||We(Ve,e).transform(n)}))}),Fi(e)?e:We(Se,r,{body:[e,We(je,r,{body:We(Xe,r,{expression:We(De,r,{value:0})})})]})}}),e(we,function(t,e,n,i,r){if(void 0!==n){var s=this,o=s.operator;if(Ye[o]){e=s.right.try_inline(t,e,n,i,r);if(e)return We(Ce,s,{condition:function(e){switch(o){case"&&":return e;case"||":return e.negate(t);case"??":return We(we,s,{operator:"==",left:We(T,s),right:e})}}(s.left),body:e,alternative:n?null:We(Ne,s,{value:We(Ve,s).transform(t)})})}}}),e(Se,function(e,t,n,i){if(!n&&this.variables){var r=this.body,s=r.length-1;if(!(s<0)){e=r[s].try_inline(e,this,n,i);if(e)return r[s]=e,this}}}),e(ke,function(i,r,e,s,t){if(!(i.option("inline")<4)){var n=this;if(!n.is_expr_pure(i)){var o=n.expression;if(o instanceof yt&&!(o.name||o.uses_arguments||o.pinned()||$t(o))){var a=Ut(o);if(!(a&&o.value||o.body[0]instanceof w||o.contains_this())){r=r||Wn(i);var c=new Gt;for(c.set("NaN",!0);!(r instanceof Le);)r.variables.each(function(e){c.set(e.name,!0)}),r=r.parent_scope;if(Jt(r,i.stack)&&!(r.pinned()&&o.variables.size()>(a?0:1))){if(r instanceof Lt){if(o.variables.size()>(a?0:1)){if(!i.toplevel.vars)return;if(0<o.functions.size()&&!i.toplevel.funcs)return}c.set("arguments",!0)}var u=!t&&Wt(o);if(u){if(!i.option("awaits"))return;if(!Wt(r))return;if(n.may_throw(i))return}var f=r.var_names();if(s=s&&[],o.variables.all(function(e,t){return s&&s.push(e),!c.has(t)&&!f.has(t)||!a&&"arguments"==t&&1==e.orig.length})&&!(s&&0<s.length&&Pr(o,s))){var l,p,h,d,m,g=!0;if($e(o.argnames,function(e){var t=!1,n=new Ue(function(e){return!!t||(e instanceof Ae?Nr(o,e.value)?t=!0:(e.name.walk(n),!0):e instanceof ct?e.key instanceof Oe&&Nr(o,e.key)?t=!0:(e.value.walk(n),!0):e instanceof Fe&&!$e(e.definition().orig,function(e){return!(e instanceof Ot)})?t=!0:void 0)});return e.walk(n),!t&&(e instanceof Fe||(g=!1),!0)})){if(o.rest){if(Nr(o,o.rest))return;g=!1}if(e?l=function(e){var t=!1;return e.walk(new Ue(function(e){return!!t||(u&&(e instanceof Xe||e instanceof AST_ForAwaitOf)||e instanceof Ne?t=!0:e instanceof Le||void 0)})),!t}:(t||Wt(o)||Hn(r))&&(l=function(e){var t=!1,n=new Ue(function(e){return!!t||(e instanceof Ne?t=!0:e instanceof Le||void 0)});return e.walk(new Ue(function(e){return!!t||(e instanceof Rt?(e.bfinally&&$e(e.body,function(e){return e.walk(n),!t})&&e.bcatch&&e.bcatch.walk(n),!0):e instanceof Le||void 0)})),!t}),!l||$e(o.body,l))if(mr(o,dr(i,r)))return o.functions.each(function(e,t){r.functions.set(t,e)}),p=[],o.variables.each(function(t,e){var n;!a&&"arguments"==e&&1==t.orig.length||(f.set(e,!0),r.enclosed.push(t),r.variables.set(e,t),t.single_use=!1,!s)||t.references.length==t.replaced||t.orig.length==t.eliminated||1==t.orig.length&&o.functions.has(e)||!$e(t.orig,function(e){return!(e instanceof I||(e instanceof Fe?e.unused||t.scope.resolve()===o:e instanceof F))})||(n=t.orig[0])instanceof de||p.push(We(je,n,{body:Rr(i,Ir(n))}))}),h=Object.create(null),d=new Gt,g&&$e(n.args,function(e){return!(e instanceof Me)})?(m=n.args.slice(),o.argnames.forEach(function(e){var t=m.shift();e.unused?t&&p.push(We(je,n,{body:t})):(t=We(ze,n,{name:e.convert_symbol(Dt,_),value:t||We(Ve,n).transform(i)}),e instanceof Fe&&Lr(e.definition(),t),p.push(We(ee,n,{definitions:[t]})))}),m.length&&p.push(We(je,n,{body:Ge(n,m)}))):p.push(We(ee,n,{definitions:[We(ze,n,{name:We(at,n,{elements:o.argnames.map(function(e){return e.unused?We(pe,e):e.convert_symbol(Dt,_)}),rest:o.rest&&o.rest.convert_symbol(Dt,_)}),value:We(be,n,{elements:n.args.slice()})})]})),d.each(function(e,t){t=h[t];[].unshift.apply(t.orig,e),t.eliminated+=e.length}),[].push.apply(p,s?o.body.filter(function(e){var t,n;return!(e instanceof vt&&((n=(t=We(Dt,Ir(e.name))).definition()).fixed=!1,n.orig.push(t),n.eliminated++,p.push(We(ee,e,{definitions:[We(ze,e,{name:t,value:Hi(e,!0)})]})),1))}):o.body),t=We(Se,n,{body:p}),e||(u&&Wi(t,function(e){var t=e.value;gi(t)||(e.value=We(Xe,n,{expression:t}))}),p.push(We(Ne,n,{value:Hn(r)?We(Ve,n).transform(i):null}))),t}}}}}}}function _(e,t){t=t.definition();h[t.id]=t,d.add(t.id,e)}}),e(Ee,function(e,t,n,i,r){var s=this.consequent.try_inline(e,t,n,i,r),e=this.alternative.try_inline(e,t,n,i,r);if(s||e)return We(Ce,this,{condition:this.condition,body:s||o(this.consequent),alternative:e||o(this.alternative)});function o(e){return n?We(je,e,{body:e}):We(Ne,e,{value:e})}}),e(dt,function(e,t,n,i){var r=this.body.try_inline(e,t,!0,!0),s=(r&&(this.body=r),this.init);return(s=s&&s.try_inline(e,t,!0,i))?(this.init=null,s instanceof Se?(s.body.push(this),s):We(Se,s,{body:[s,this]})):r&&this}),e(mt,function(e,t,n,i){var r=this.body.try_inline(e,t,!0,!0),s=(r&&(this.body=r),this.object);if(s instanceof Re){e=jr(e,t,!0,i,!1,s,1);if(e)return this.object=s.tail_node(),e.body.push(this),e}return r&&this}),e(Ce,function(e,t,n,i){var r=this.body.try_inline(e,t,n,i),s=(r&&(this.body=r),this.alternative),n=((s=s&&s.try_inline(e,t,n,i))&&(this.alternative=s),this.condition);if(n instanceof Re){e=jr(e,t,!0,i,!1,n,1);if(e)return this.condition=n.tail_node(),e.body.push(this),e}return(r||s)&&this}),e(_t,function(e,t,n,i){e=this.body.try_inline(e,t,!0,!0);if(e)return this.body=e,this}),e(he,function(e,t,n,i){e=this.body.try_inline(e,t,n,i);if(e)return this.body instanceof _t&&e instanceof Se?(t=e.body.pop(),this.body=t,e.body.push(this),e):(this.body=e,this)}),e(y,ve),e(Ne,function(e,t,n,i){var r=this.value;return r&&r.try_inline(e,t,void 0,"try"===i)}),e(Re,function(e,t,n,i,r){return jr(e,t,n,i,r,this)}),e(je,function(e,t,n,i){for(var r=this.body;r instanceof Be;){var s=r.operator;if(an[s])break;if("void"==s)break;r=r.expression}return(r=n||gi(r)?r:We(Be,this,{operator:"void",expression:r})).try_inline(e,t,n||!1,i)}),e(Be,function(n,e,t,i,r){var s=this,o=s.operator;if(!an[o]){e=s.expression.try_inline(n,e,t=t||"void"!=o?t:!1,i,r);if(e)return t||Wi(e,function(e){e.in_bool=!1;var t=e.value;"void"==o&&gi(t)||(e.value=We(Be,s,{operator:o,expression:t||We(Ve,e).transform(n)}))}),e}}),e(qt,function(e,t,n,i){var n=this.body.try_inline(e,t,n,i),r=(n&&(this.body=n),this.expression);if(r instanceof Re){e=jr(e,t,!0,i,!1,r,1);if(e)return this.expression=r.tail_node(),e.body.push(this),e}return n&&this}),e(Bt,function(e,t,n,i){if(e.option("yields")&&this.nested){var r=this.expression;if("Call"==r.TYPE){var s=r.expression;switch(s.CTOR){case re:s=We(ne,s);break;case AST_GeneratorFunction:s=We(gt,s);break;default:return}return(r=r.clone()).expression=s,r.try_inline(e,t,n,i)}}}),t(Ne,function(e,t){var n=e.value;return n&&t.option("side_effects")&&gi(n,t)&&!Hn(t.find_parent(Le))&&(e.value=null),e}),{Compressor:cn}}),define("skylark-uglifyjs/sourcemap",["./utils"],function(e){"use strict";const{characters:t,Dictionary:r}=e;var i=t("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),v=i.reduce(function(e,t,n){return e[t]=n,e},Object.create(null));function y(e){var t="";e=Math.abs(e)<<1|e>>>31;do{var n=31&e}while((e>>>=5)&&(n|=32),t+=i[n],e);return t}function n(){var n=new r,i=[];return i.index=function(e){var t=n.get(e);return 0<=t||(t=i.length,i.push(e),n.set(e,t)),t},i}return{SourceMap:function(l){var o,a=n(),s=l.includeSources&&new r,c=n(),u="",f=(l.orig&&Object.keys(l.orig).forEach(function(e){var t=l.orig[e],n=[0,0,1,0,0];if(l.orig[e]={names:t.names,mappings:t.mappings.split(/;/).map(function(e){return n[0]=0,e.split(/,/).map(function(e){return n.slice(0,function(e,t){for(var n=0,i=0,r=0,s=0;r<t.length;r++){var o=v[t[r]];n+=(31&o)<<i,32&o?i+=5:(e[s++]+=1&n?2147483648|-(n>>1):n>>1,n=i=0)}return s}(n,e))})}),sources:t.sources},s&&t.sourcesContent)for(var i=0;i<t.sources.length;i++){var r=t.sourcesContent[i];r&&s.set(t.sources[i],r)}}),1),p=0,h=0,d=1,m=0,g=0;return{add:l.orig?function(e,t,n,i,r,s){var o=l.orig[e];if(o){var a,c=o.mappings[i-1];if(!c)return;for(var u=0;u<c.length;u++){var f=c[u][0];if(f<=r&&(a=c[u]),r<=f)break}!a||a.length<4?e=null:(e=o.sources[a[1]],i=a[2],r=a[3],4<a.length&&(s=o.names[a[4]]))}_(e,t,n,i,r,s)}:_,setSourceContent:s?function(e,t){s.has(e)||s.set(e,t)}:noop,toString:function(){return JSON.stringify({version:3,file:l.filename||void 0,sourceRoot:l.root||void 0,sources:a,sourcesContent:s?a.map(function(e){return s.get(e)||null}):void 0,names:c,mappings:u})}};function _(e,t,n,i,r,s){if(null!=o||null!=e){if(o=e,f<t)for(p=0;u+=";",++f<t;);else u&&(u+=",");u+=y(n-p),p=n,null!=e&&(n=a.index(e),u+=y(n-h),h=n,u+=y(i-d),d=i,u+=y(r-m),m=r,l.names)&&null!=s&&(e=c.index(s),u+=y(e-g),g=e)}}}}}),define("skylark-uglifyjs/propmangle",["./utils","./ast","./scope"],function(e,t,n){"use strict";const{defaults:m,push_uniq:i,Dictionary:g}=e,_=n["base54"],{AST_Binary:v,AST_Conditional:y,AST_Dot:b,AST_ObjectProperty:x,AST_Sequence:w,AST_String:S,AST_Sub:k,TreeWalker:E}=t;function A(){var t=new g,e=(["NaN","null","true","false","Infinity","-Infinity","undefined"].forEach(n),["encodeURI","encodeURIComponent","escape","eval","decodeURI","decodeURIComponent","isFinite","isNaN","parseFloat","parseInt","unescape"].forEach(n),Function("return this")());return["Array","ArrayBuffer","Atomics","BigInt","Boolean","console","DataView","Date","Error","Function","Int8Array","Intl","JSON","Map","Math","Number","Object","Promise","Proxy","Reflect","RegExp","Set","String","Symbol","WebAssembly"].forEach(function(t){n(t);t=e[t];if(t&&(Object.getOwnPropertyNames(t).map(n),"function"==typeof t)){t.__proto__&&Object.getOwnPropertyNames(t.__proto__).map(n),t.prototype&&Object.getOwnPropertyNames(t.prototype).map(n);try{Object.getOwnPropertyNames(new t).map(n)}catch(e){try{Object.getOwnPropertyNames(t()).map(n)}catch(e){}}}}),(A=function(){return t.clone()})();function n(e){t.set(e,!0)}}function T(e,t){e instanceof y?(T(e.consequent,t),T(e.alternative,t)):e instanceof w?T(e.tail_node(),t):e instanceof S&&t(e.value)}return{mangle_properties:function(e,n){var i,r,t=(n=m(n,{builtins:!1,cache:null,debug:!1,domprops:!1,keep_quoted:!1,regex:null,reserved:null},!0)).builtins?new g:A(),s=(n.domprops||"undefined"==typeof domprops||domprops.forEach(function(e){t.set(e,!0)}),Array.isArray(n.reserved)&&n.reserved.forEach(function(e){t.set(e,!0)}),-1),o=(n.cache?(i=n.cache.props).each(function(e){t.set(e,!0)}):i=new g,n.regex),a=!1!==n.debug,c=(a&&(r=!0===n.debug?"":n.debug),new g),u=t.clone();function f(e){return!u.has(e)&&!/^-?[0-9]+(\.[0-9]+)?(e[+-][0-9]+)?$/.test(e)}function l(e){if(t.has(e))AST_Node.info("Preserving reserved property {this}",e);else{if(!o||o.test(e))return i.has(e)||c.has(e);AST_Node.info("Preserving excluded property {this}",e)}}function p(e){f(e)&&c.set(e,!0),l(e)||u.set(e,!0)}function h(e){if(!l(e))return e;var t,n=i.get(e);if(!n){if(!(n=a&&f(t="_$"+e+"$"+r+"_")?t:n))for(;!f(n=_(++s)););/^#/.test(e)&&(n="#"+n),i.set(e,n)}return AST_Node.info("Mapping property {name} to {mangled}",{mangled:n,name:e}),n}function d(e){e instanceof w?d(e.tail_node()):e instanceof S?e.value=h(e.value):e instanceof y&&(d(e.consequent),d(e.alternative))}e.walk(new E(function(e){if("Call"==e.TYPE){var t=e.expression;if(t instanceof b)switch(t.property){case"defineProperty":case"getOwnPropertyDescriptor":e.args.length<2||(t=t.expression)instanceof AST_SymbolRef&&"Object"==t.name&&t.definition().undeclared&&T(e.args[1],p);break;case"hasOwnProperty":e.args.length<1||T(e.args[0],p)}}else e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof x?e.key instanceof AST_Node?T(e.key,p):p(e.key):e instanceof b?is_lhs(e,this.parent())&&p(e.property):e instanceof k&&is_lhs(e,this.parent())&&T(e.property,p)})),e.walk(new E(function(e){if(e instanceof v)"in"==e.operator&&d(e.left);else if("Call"==e.TYPE){var t=e.expression;if(t instanceof b)switch(t.property){case"defineProperty":case"getOwnPropertyDescriptor":e.args.length<2||(t=t.expression)instanceof AST_SymbolRef&&"Object"==t.name&&t.definition().undeclared&&d(e.args[1]);break;case"hasOwnProperty":e.args.length<1||d(e.args[0])}}else e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof x?e.key instanceof AST_Node?d(e.key):e.key=h(e.key):e instanceof b?e.property=h(e.property):e instanceof k&&(n.keep_quoted||d(e.property))}))},reserve_quoted_keys:function(e,t){function n(e){i(t,e)}e.walk(new E(function(e){e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof x?e.key instanceof AST_Node?T(e.key,n):e.start&&e.start.quote&&n(e.key):e instanceof b?e.quoted&&n(e.property):e instanceof k&&T(e.property,n)}))}}}),define("skylark-uglifyjs/minify",["./utils","./ast","./parse","./output","./compress","./sourcemap","./propmangle"],function(e,t,n,i,r,s,o){"use strict";const{defaults:h,HOP:d}=e,{AST_Toplevel:m,AST_Node:g}=t,_=n["parse"],v=i["OutputStream"],y=r["Compressor"],b=s["SourceMap"],{mangle_properties:x,reserve_quoted_keys:w}=o;var S,k;function E(t){try{return JSON.parse(t)}catch(e){throw new Error("invalid input source map: "+t)}}function A(t,n,e){e.forEach(function(e){n[e]&&("object"!=typeof n[e]&&(n[e]={}),t in n[e]||(n[e][t]=n[t]))})}function T(e){e&&("props"in e?e.props instanceof Dictionary||(e.props=Dictionary.fromObject(e.props)):e.props=new Dictionary)}function C(e){return{props:e.props.toObject()}}return k="undefined"==typeof Buffer?(S=atob,btoa):void 0===Buffer.alloc?(S=function(e){return new Buffer(e,"base64").toString()},function(e){return new Buffer(e).toString("base64")}):(S=function(e){return Buffer.from(e,"base64").toString()},function(e){return Buffer.from(e).toString("base64")}),{minify:function(i,r){try{(r=h(r,{annotations:void 0,compress:{},enclose:!1,expression:!1,ie:!1,ie8:!1,keep_fargs:!1,keep_fnames:!1,mangle:{},module:!1,nameCache:null,output:{},parse:{},rename:void 0,sourceMap:!1,timings:!1,toplevel:!(!r||!r.module),v8:!1,validate:!1,warnings:!1,webkit:!1,wrap:!1},!0)).validate&&g.enable_validation();var e,s,t=r.timings&&{start:Date.now()},n=(void 0!==r.annotations&&A("annotations",r,["compress","output"]),r.expression&&A("expression",r,["compress","parse"]),r.ie8&&(r.ie=r.ie||r.ie8),r.ie&&A("ie",r,["compress","mangle","output","rename"]),r.keep_fargs&&A("keep_fargs",r,["compress","mangle","rename"]),r.keep_fnames&&A("keep_fnames",r,["compress","mangle","rename"]),r.module&&A("module",r,["compress","parse"]),r.toplevel&&A("toplevel",r,["compress","mangle","rename"]),r.v8&&A("v8",r,["mangle","output","rename"]),r.webkit&&A("webkit",r,["compress","mangle","output","rename"]),r.mangle&&(r.mangle=h(r.mangle,{cache:r.nameCache&&(r.nameCache.vars||{}),eval:!1,ie:!1,keep_fargs:!1,keep_fnames:!1,properties:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1},!0),r.mangle.properties&&("object"!=typeof r.mangle.properties&&(r.mangle.properties={}),r.mangle.properties.keep_quoted&&(e=r.mangle.properties.reserved,Array.isArray(e)||(e=[]),r.mangle.properties.reserved=e),!r.nameCache||"cache"in r.mangle.properties||(r.mangle.properties.cache=r.nameCache.props||{})),T(r.mangle.cache),T(r.mangle.properties.cache)),void 0===r.rename&&(r.rename=r.compress&&r.mangle),r.sourceMap&&(r.sourceMap=h(r.sourceMap,{content:null,filename:null,includeSources:!1,names:!0,root:null,url:null},!0)),[]);if(r.warnings&&g.log_function(function(e){n.push(e)},"verbose"==r.warnings),t&&(t.parse=Date.now()),r.parse=r.parse||{},i instanceof g)s=i;else{"string"==typeof i&&(i=[i]),r.parse.toplevel=null;var o,a=r.sourceMap&&r.sourceMap.content;for(f in(a="string"==typeof a&&"inline"!=a?E(a):a)&&(r.sourceMap.orig=Object.create(null)),i)d(i,f)&&(r.parse.filename=f,r.parse.toplevel=s=_(i[f],r.parse),"inline"==a?(o=function(e,t){for(var n=t.end.comments_after,i=n.length;0<=--i;){var r=n[i];if("comment1"!=r.type)break;r=/^# ([^\s=]+)=(\S+)\s*$/.exec(r.value);if(!r)break;if("sourceMappingURL"==r[1]){if(r=/^data:application\/json(;.*?)?;base64,([^,]+)$/.exec(r[2]))return S(r[2]);break}}g.warn("inline source map not found: {name}",{name:e})}(f,s))&&(r.sourceMap.orig[f]=E(o)):a&&(r.sourceMap.orig[f]=a))}r.parse.expression&&(s=s.wrap_expression()),e&&w(s,e),["enclose","wrap"].forEach(function(e){var t,n=r[e];n&&(t=s.print_to_string().slice(0,-1),s=s[e](n),i[s.start.file]=s.print_to_string().replace(t,""))}),r.validate&&s.validate_ast(),t&&(t.rename=Date.now()),r.rename&&(s.figure_out_scope(r.rename),s.expand_names(r.rename)),t&&(t.compress=Date.now()),r.compress&&(s=new y(r.compress).compress(s),r.validate)&&s.validate_ast(),t&&(t.scope=Date.now()),r.mangle&&s.figure_out_scope(r.mangle),t&&(t.mangle=Date.now()),r.mangle&&(s.compute_char_frequency(r.mangle),s.mangle_names(r.mangle)),t&&(t.properties=Date.now()),e&&w(s,e),r.mangle&&r.mangle.properties&&x(s,r.mangle.properties),r.parse.expression&&(s=s.unwrap_expression()),t&&(t.output=Date.now());var c={},u=h(r.output,{ast:!1,code:!0});if(u.ast&&(c.ast=s),u.code){if(r.sourceMap&&(u.source_map=b(r.sourceMap),r.sourceMap.includeSources)){if(i instanceof m)throw new Error("original source content unavailable");for(var f in i)d(i,f)&&u.source_map.setSourceContent(f,i[f])}delete u.ast,delete u.code;var l,p=v(u);s.print(p),c.code=p.get(),r.sourceMap&&(c.map=u.source_map.toString(),l=r.sourceMap.url)&&(c.code=c.code.replace(/\n\/\/# sourceMappingURL=\S+\s*$/,""),c.code+="inline"==l?"\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,"+k(c.map):"\n//# sourceMappingURL="+l)}return r.nameCache&&r.mangle&&(r.mangle.cache&&(r.nameCache.vars=C(r.mangle.cache)),r.mangle.properties)&&r.mangle.properties.cache&&(r.nameCache.props=C(r.mangle.properties.cache)),t&&(t.end=Date.now(),c.timings={parse:.001*(t.rename-t.parse),rename:.001*(t.compress-t.rename),compress:.001*(t.scope-t.compress),scope:.001*(t.mangle-t.scope),mangle:.001*(t.properties-t.mangle),properties:.001*(t.output-t.properties),output:.001*(t.end-t.output),total:.001*(t.end-t.start)}),n.length&&(c.warnings=n),c}finally{g.log_function(),g.disable_validation()}}}}),define("skylark-uglifyjs/main",["./minify"],function(e){return e}),define("skylark-uglifyjs",["skylark-uglifyjs/main"],function(e){return e}),define("skylark-rjs/uglifyjs",["skylark-uglifyjs"],function(e){return e}),define("skylark-sourcemap/util",[],function(){"use strict";var t=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,r=/^data:.+\,.+$/;function a(e){e=e.match(t);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}function c(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function s(e){var t=e,n=a(e);if(n){if(!n.path)return e;t=n.path}for(var i,e=u(t),r=t.split(/\/+/),s=0,o=r.length-1;0<=o;o--)"."===(i=r[o])?r.splice(o,1):".."===i?s++:0<s&&(""===i?(r.splice(o+1,s),s=0):(r.splice(o,2),s--));return""===(t=r.join("/"))&&(t=e?"/":"."),n?(n.path=t,c(n)):t}function i(e,t){""===e&&(e=".");var n=a(t=""===t?".":t),i=a(e);return i&&(e=i.path||"/"),n&&!n.scheme?(i&&(n.scheme=i.scheme),c(n)):n||t.match(r)?t:!i||i.host||i.path?(n="/"===t.charAt(0)?t:s(e.replace(/\/+$/,"")+"/"+t),i?(i.path=n,c(i)):n):(i.host=t,c(i))}function u(e){return"/"===e.charAt(0)||t.test(e)}var e=!("__proto__"in Object.create(null));function n(e){return e}function o(e){if(e){var t=e.length;if(!(t<9)&&95===e.charCodeAt(t-1)&&95===e.charCodeAt(t-2)&&111===e.charCodeAt(t-3)&&116===e.charCodeAt(t-4)&&111===e.charCodeAt(t-5)&&114===e.charCodeAt(t-6)&&112===e.charCodeAt(t-7)&&95===e.charCodeAt(t-8)&&95===e.charCodeAt(t-9)){for(var n=t-10;0<=n;n--)if(36!==e.charCodeAt(n))return;return 1}}}function f(e,t){return e===t?0:null===e||null!==t&&t<e?1:-1}return{toSetString:e?n:function(e){return o(e)?"$"+e:e},fromSetString:e?n:function(e){return o(e)?e.slice(1):e},compareByOriginalPositions:function(e,t,n){var i=f(e.source,t.source);return 0!==i||0!=(i=e.originalLine-t.originalLine)||0!=(i=e.originalColumn-t.originalColumn)||n||0!=(i=e.generatedColumn-t.generatedColumn)||0!=(i=e.generatedLine-t.generatedLine)?i:f(e.name,t.name)},isAbsolute:u,compareByGeneratedPositionsDeflated:function(e,t,n){var i=e.generatedLine-t.generatedLine;return 0!=i||0!=(i=e.generatedColumn-t.generatedColumn)||n||0!==(i=f(e.source,t.source))||0!=(i=e.originalLine-t.originalLine)||0!=(i=e.originalColumn-t.originalColumn)?i:f(e.name,t.name)},compareByGeneratedPositionsInflated:function(e,t){var n=e.generatedLine-t.generatedLine;return 0!=n||0!=(n=e.generatedColumn-t.generatedColumn)||0!==(n=f(e.source,t.source))||0!=(n=e.originalLine-t.originalLine)||0!=(n=e.originalColumn-t.originalColumn)?n:f(e.name,t.name)},parseSourceMapInput:function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},getArg:function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')},urlParse:a,urlGenerate:c,normalize:s,join:i,relative:function(e,t){e=(e=""===e?".":e).replace(/\/$/,"");for(var n=0;0!==t.indexOf(e+"/");){var i=e.lastIndexOf("/");if(i<0)return t;if((e=e.slice(0,i)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)},computeSourceURL:function(e,t,n){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),n){e=a(n);if(!e)throw new Error("sourceMapURL could not be parsed");e.path&&0<=(n=e.path.lastIndexOf("/"))&&(e.path=e.path.substring(0,n+1)),t=i(c(e),t)}return s(t)}}}),define("skylark-sourcemap/array-set",["./util"],function(s){"use strict";var o=Object.prototype.hasOwnProperty,a="undefined"!=typeof Map;function c(){this._array=[],this._set=a?new Map:Object.create(null)}return c.fromArray=function(e,t){for(var n=new c,i=0,r=e.length;i<r;i++)n.add(e[i],t);return n},c.prototype.size=function(){return a?this._set.size:Object.getOwnPropertyNames(this._set).length},c.prototype.add=function(e,t){var n=a?e:s.toSetString(e),i=a?this.has(e):o.call(this._set,n),r=this._array.length;i&&!t||this._array.push(e),i||(a?this._set.set(e,r):this._set[n]=r)},c.prototype.has=function(e){return a?this._set.has(e):(e=s.toSetString(e),o.call(this._set,e))},c.prototype.indexOf=function(e){if(a){var t=this._set.get(e);if(0<=t)return t}else{t=s.toSetString(e);if(o.call(this._set,t))return this._set[t]}throw new Error('"'+e+'" is not in the set.')},c.prototype.at=function(e){if(0<=e&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},c.prototype.toArray=function(){return this._array.slice()},c}),define("skylark-sourcemap/base64",[],function(){"use strict";var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return{encode:function(e){if(0<=e&&e<t.length)return t[e];throw new TypeError("Must be between 0 and 63: "+e)},decode:function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}}}),define("skylark-sourcemap/base64-vlq",["./base64"],function(u){"use strict";return{encode:function(e){for(var t,n="",i=(e=e)<0?1+(-e<<1):e<<1;t=31&i,0<(i>>>=5)&&(t|=32),n+=u.encode(t),0<i;);return n},decode:function(e,t,n){var i,r,s,o=e.length,a=0,c=0;do{if(o<=t)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(r=u.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1))}while(i=!!(32&r),a+=(r&=31)<<c,c+=5,i);n.value=(s=a>>1,1==(1&a)?-s:s),n.rest=t}}}),define("skylark-sourcemap/binary-search",[],function(){"use strict";const u=2;return{GREATEST_LOWER_BOUND:1,LEAST_UPPER_BOUND:u,search:function(e,t,n,i){if(0===t.length)return-1;var r=function e(t,n,i,r,s,o){var a=Math.floor((n-t)/2)+t,c=s(i,r[a],!0);return 0===c?a:0<c?1<n-a?e(a,n,i,r,s,o):o==u?n<r.length?n:-1:a:1<a-t?e(t,a,i,r,s,o):o==u?a:t<0?-1:t}(-1,t.length,e,t,n,i||1);if(r<0)return-1;for(;0<=r-1&&0===n(t[r],t[r-1],!0);)--r;return r}}}),define("skylark-sourcemap/mapping-list",["./util"],function(a){"use strict";function e(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return e.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},e.prototype.add=function(e){var t,n,i,r,s,o;t=this._last,n=e,i=t.generatedLine,r=n.generatedLine,s=t.generatedColumn,o=n.generatedColumn,i<r||r==i&&s<=o||a.compareByGeneratedPositionsInflated(t,n)<=0?this._last=e:this._sorted=!1,this._array.push(e)},e.prototype.toArray=function(){return this._sorted||(this._array.sort(a.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},e}),define("skylark-sourcemap/quick-sort",[],function(){"use strict";function u(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function f(e,t,n,i){if(n<i){c=i;for(var r=(a=n)-1,s=(u(e,Math.round(a+Math.random()*(c-a)),i),e[i]),o=n;o<i;o++)t(e[o],s)<=0&&u(e,r+=1,o);u(e,r+1,o);c=r+1;f(e,t,n,c-1),f(e,t,c+1,i)}var a,c}return{quickSort:function(e,t){f(e,t,0,e.length-1)}}}),define("skylark-sourcemap/source-map-consumer",["./util","./binary-search","./array-set","./base64-vlq","./quick-sort"],function(v,c,p,y,b){"use strict";function o(e,t){var n=e;return new(null!=(n="string"==typeof e?v.parseSourceMapInput(e):n).sections?i:h)(n,t)}function h(e,t){var n=e,e=("string"==typeof e&&(n=v.parseSourceMapInput(e)),v.getArg(n,"version")),i=v.getArg(n,"sources"),r=v.getArg(n,"names",[]),s=v.getArg(n,"sourceRoot",null),o=v.getArg(n,"sourcesContent",null),a=v.getArg(n,"mappings"),n=v.getArg(n,"file",null);if(e!=this._version)throw new Error("Unsupported version: "+e);s=s&&v.normalize(s),i=i.map(String).map(v.normalize).map(function(e){return s&&v.isAbsolute(s)&&v.isAbsolute(e)?v.relative(s,e):e}),this._names=p.fromArray(r.map(String),!0),this._sources=p.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(e){return v.computeSourceURL(s,e,t)}),this.sourceRoot=s,this.sourcesContent=o,this._mappings=a,this._sourceMapURL=t,this.file=n}function x(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function i(e,r){var t=e,e=("string"==typeof e&&(t=v.parseSourceMapInput(e)),v.getArg(t,"version")),t=v.getArg(t,"sections");if(e!=this._version)throw new Error("Unsupported version: "+e);this._sources=new p,this._names=new p;var s={line:-1,column:0};this._sections=t.map(function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=v.getArg(e,"offset"),n=v.getArg(t,"line"),i=v.getArg(t,"column");if(n<s.line||n===s.line&&i<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=t,{generatedOffset:{generatedLine:n+1,generatedColumn:i+1},consumer:new o(v.getArg(e,"map"),r)}})}return o.fromSourceMap=function(e,t){return h.fromSourceMap(e,t)},o.prototype._version=3,o.prototype.__generatedMappings=null,Object.defineProperty(o.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),o.prototype.__originalMappings=null,Object.defineProperty(o.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),o.prototype._charIsMappingSeparator=function(e,t){e=e.charAt(t);return";"===e||","===e},o.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},o.GENERATED_ORDER=1,o.ORIGINAL_ORDER=2,o.GREATEST_LOWER_BOUND=1,o.LEAST_UPPER_BOUND=2,o.prototype.eachMapping=function(e,t,n){var i,t=t||null;switch(n||o.GENERATED_ORDER){case o.GENERATED_ORDER:i=this._generatedMappings;break;case o.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var r=this.sourceRoot;i.map(function(e){var t=null===e.source?null:this._sources.at(e.source);return{source:v.computeSourceURL(r,t,this._sourceMapURL),generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,t)},o.prototype.allGeneratedPositionsFor=function(e){var t=v.getArg(e,"line"),n={source:v.getArg(e,"source"),originalLine:t,originalColumn:v.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],r=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",v.compareByOriginalPositions,c.LEAST_UPPER_BOUND);if(0<=r){var s=this._originalMappings[r];if(void 0===e.column)for(var o=s.originalLine;s&&s.originalLine===o;)i.push({line:v.getArg(s,"generatedLine",null),column:v.getArg(s,"generatedColumn",null),lastColumn:v.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++r];else for(var a=s.originalColumn;s&&s.originalLine===t&&s.originalColumn==a;)i.push({line:v.getArg(s,"generatedLine",null),column:v.getArg(s,"generatedColumn",null),lastColumn:v.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++r]}return i},(h.prototype=Object.create(o.prototype)).consumer=o,h.prototype._findSourceIndex=function(e){var t,n=e;if(null!=this.sourceRoot&&(n=v.relative(this.sourceRoot,n)),this._sources.has(n))return this._sources.indexOf(n);for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==e)return t;return-1},h.fromSourceMap=function(e,t){for(var n=Object.create(h.prototype),i=n._names=p.fromArray(e._names.toArray(),!0),r=n._sources=p.fromArray(e._sources.toArray(),!0),s=(n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=t,n._absoluteSources=n._sources.toArray().map(function(e){return v.computeSourceURL(n.sourceRoot,e,t)}),e._mappings.toArray().slice()),o=n.__generatedMappings=[],a=n.__originalMappings=[],c=0,u=s.length;c<u;c++){var f=s[c],l=new x;l.generatedLine=f.generatedLine,l.generatedColumn=f.generatedColumn,f.source&&(l.source=r.indexOf(f.source),l.originalLine=f.originalLine,l.originalColumn=f.originalColumn,f.name&&(l.name=i.indexOf(f.name)),a.push(l)),o.push(l)}return b(n.__originalMappings,v.compareByOriginalPositions),n},h.prototype._version=3,Object.defineProperty(h.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),h.prototype._parseMappings=function(e,t){for(var n,i,r,s,o=1,a=0,c=0,u=0,f=0,l=0,p=e.length,h=0,d={},m={},g=[],_=[];h<p;)if(";"===e.charAt(h))o++,h++,a=0;else if(","===e.charAt(h))h++;else{for((n=new x).generatedLine=o,s=h;s<p&&!this._charIsMappingSeparator(e,s);s++);if(r=d[i=e.slice(h,s)])h+=i.length;else{for(r=[];h<s;)y.decode(e,h,m),h=m.rest,r.push(m.value);if(2===r.length)throw new Error("Found a source, but no line and column");if(3===r.length)throw new Error("Found a source and line, but no column");d[i]=r}n.generatedColumn=a+r[0],a=n.generatedColumn,1<r.length&&(n.source=f+r[1],f+=r[1],n.originalLine=c+r[2],c=n.originalLine,n.originalLine+=1,n.originalColumn=u+r[3],u=n.originalColumn,4<r.length)&&(n.name=l+r[4],l+=r[4]),_.push(n),"number"==typeof n.originalLine&&g.push(n)}b(_,v.compareByGeneratedPositionsDeflated),this.__generatedMappings=_,b(g,v.compareByOriginalPositions),this.__originalMappings=g},h.prototype._findMapping=function(e,t,n,i,r,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return c.search(e,t,r,s)},h.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},h.prototype.originalPositionFor=function(e){var t={generatedLine:v.getArg(e,"line"),generatedColumn:v.getArg(e,"column")},e=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",v.compareByGeneratedPositionsDeflated,v.getArg(e,"bias",o.GREATEST_LOWER_BOUND));if(0<=e){var n,e=this._generatedMappings[e];if(e.generatedLine===t.generatedLine)return null!==(t=v.getArg(e,"source",null))&&(t=this._sources.at(t),t=v.computeSourceURL(this.sourceRoot,t,this._sourceMapURL)),null!==(n=v.getArg(e,"name",null))&&(n=this._names.at(n)),{source:t,line:v.getArg(e,"originalLine",null),column:v.getArg(e,"originalColumn",null),name:n}}return{source:null,line:null,column:null,name:null}},h.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e})},h.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(0<=n)return this.sourcesContent[n];var i,n=e;if(null!=this.sourceRoot&&(n=v.relative(this.sourceRoot,n)),null!=this.sourceRoot&&(i=v.urlParse(this.sourceRoot))){e=n.replace(/^file:\/\//,"");if("file"==i.scheme&&this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];if((!i.path||"/"==i.path)&&this._sources.has("/"+n))return this.sourcesContent[this._sources.indexOf("/"+n)]}if(t)return null;throw new Error('"'+n+'" is not in the SourceMap.')},h.prototype.generatedPositionFor=function(e){var t=v.getArg(e,"source"),t=this._findSourceIndex(t);if(!(t<0)){t={source:t,originalLine:v.getArg(e,"line"),originalColumn:v.getArg(e,"column")},e=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",v.compareByOriginalPositions,v.getArg(e,"bias",o.GREATEST_LOWER_BOUND));if(0<=e){e=this._originalMappings[e];if(e.source===t.source)return{line:v.getArg(e,"generatedLine",null),column:v.getArg(e,"generatedColumn",null),lastColumn:v.getArg(e,"lastGeneratedColumn",null)}}}return{line:null,column:null,lastColumn:null}},(i.prototype=Object.create(o.prototype)).constructor=o,i.prototype._version=3,Object.defineProperty(i.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),i.prototype.originalPositionFor=function(e){var t={generatedLine:v.getArg(e,"line"),generatedColumn:v.getArg(e,"column")},n=c.search(t,this._sections,function(e,t){var n=e.generatedLine-t.generatedOffset.generatedLine;return n||e.generatedColumn-t.generatedOffset.generatedColumn}),n=this._sections[n];return n?n.consumer.originalPositionFor({line:t.generatedLine-(n.generatedOffset.generatedLine-1),column:t.generatedColumn-(n.generatedOffset.generatedLine===t.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},i.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},i.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var i=this._sections[n].consumer.sourceContentFor(e,!0);if(i)return i}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},i.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var n=this._sections[t];if(-1!==n.consumer._findSourceIndex(v.getArg(e,"source"))){var i=n.consumer.generatedPositionFor(e);if(i)return{line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},i.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],r=i.consumer._generatedMappings,s=0;s<r.length;s++){var o=r[s],a=i.consumer._sources.at(o.source),a=v.computeSourceURL(i.consumer.sourceRoot,a,this._sourceMapURL),c=(this._sources.add(a),a=this._sources.indexOf(a),null),a=(o.name&&(c=i.consumer._names.at(o.name),this._names.add(c),c=this._names.indexOf(c)),{source:a,generatedLine:o.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:o.generatedColumn+(i.generatedOffset.generatedLine===o.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:o.originalLine,originalColumn:o.originalColumn,name:c});this.__generatedMappings.push(a),"number"==typeof a.originalLine&&this.__originalMappings.push(a)}b(this.__generatedMappings,v.compareByGeneratedPositionsDeflated),b(this.__originalMappings,v.compareByOriginalPositions)},{SourceMapConsumer:o,BasicSourceMapConsumer:h,IndexedSourceMapConsumer:i}}),define("skylark-sourcemap/source-map-generator",["./base64-vlq","./util","./array-set","./mapping-list"],function(h,d,t,n){"use strict";function e(e){this._file=d.getArg(e=e||{},"file",null),this._sourceRoot=d.getArg(e,"sourceRoot",null),this._skipValidation=d.getArg(e,"skipValidation",!1),this._sources=new t,this._names=new t,this._mappings=new n,this._sourcesContents=null}return e.prototype._version=3,e.fromSourceMap=function(n){var i=n.sourceRoot,r=new e({file:n.file,sourceRoot:i});return n.eachMapping(function(e){var t={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(t.source=e.source,null!=i&&(t.source=d.relative(i,t.source)),t.original={line:e.originalLine,column:e.originalColumn},null!=e.name)&&(t.name=e.name),r.addMapping(t)}),n.sources.forEach(function(e){var t=e,t=(null!==i&&(t=d.relative(i,e)),r._sources.has(t)||r._sources.add(t),n.sourceContentFor(e));null!=t&&r.setSourceContent(e,t)}),r},e.prototype.addMapping=function(e){var t=d.getArg(e,"generated"),n=d.getArg(e,"original",null),i=d.getArg(e,"source",null),e=d.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,n,i,e),null!=i&&(i=String(i),this._sources.has(i)||this._sources.add(i)),null!=e&&(e=String(e),this._names.has(e)||this._names.add(e)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:i,name:e})},e.prototype.setSourceContent=function(e,t){null!=this._sourceRoot&&(e=d.relative(this._sourceRoot,e)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[d.toSetString(e)]=t):this._sourcesContents&&(delete this._sourcesContents[d.toSetString(e)],0===Object.keys(this._sourcesContents).length)&&(this._sourcesContents=null)},e.prototype.applySourceMap=function(n,e,i){var r=e;if(null==e){if(null==n.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');r=n.file}var s=this._sourceRoot,o=(null!=s&&(r=d.relative(s,r)),new t),a=new t;this._mappings.unsortedForEach(function(e){e.source===r&&null!=e.originalLine&&null!=(t=n.originalPositionFor({line:e.originalLine,column:e.originalColumn})).source&&(e.source=t.source,null!=i&&(e.source=d.join(i,e.source)),null!=s&&(e.source=d.relative(s,e.source)),e.originalLine=t.line,e.originalColumn=t.column,null!=t.name)&&(e.name=t.name);var t=e.source,t=(null==t||o.has(t)||o.add(t),e.name);null==t||a.has(t)||a.add(t)},this),this._sources=o,this._names=a,n.sources.forEach(function(e){var t=n.sourceContentFor(e);null!=t&&(null!=i&&(e=d.join(i,e)),null!=s&&(e=d.relative(s,e)),this.setSourceContent(e,t))},this)},e.prototype._validateMapping=function(e,t,n,i){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&0<e.line&&0<=e.column)||t||n||i)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&0<e.line&&0<=e.column&&0<t.line&&0<=t.column&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:i}))},e.prototype._serializeMappings=function(){for(var e,t,n,i=0,r=1,s=0,o=0,a=0,c=0,u="",f=this._mappings.toArray(),l=0,p=f.length;l<p;l++){if(e="",(t=f[l]).generatedLine!==r)for(i=0;t.generatedLine!==r;)e+=";",r++;else if(0<l){if(!d.compareByGeneratedPositionsInflated(t,f[l-1]))continue;e+=","}e+=h.encode(t.generatedColumn-i),i=t.generatedColumn,null!=t.source&&(n=this._sources.indexOf(t.source),e+=h.encode(n-c),c=n,e+=h.encode(t.originalLine-1-o),o=t.originalLine-1,e+=h.encode(t.originalColumn-s),s=t.originalColumn,null!=t.name)&&(n=this._names.indexOf(t.name),e+=h.encode(n-a),a=n),u+=e}return u},e.prototype._generateSourcesContent=function(e,t){return e.map(function(e){if(!this._sourcesContents)return null;null!=t&&(e=d.relative(t,e));e=d.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,e)?this._sourcesContents[e]:null},this)},e.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},e.prototype.toString=function(){return JSON.stringify(this.toJSON())},e}),define("skylark-sourcemap/source-node",["./source-map-generator","./util"],function(t,p){"use strict";var h=/(\r?\n)/,s="$$$isSourceNode$$$";function d(e,t,n,i,r){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==r?null:r,this[s]=!0,null!=i&&this.add(i)}return d.fromStringWithSourceMap=function(e,n,i){function r(){return e()+(e()||"");function e(){return a<o.length?o[a++]:void 0}}var s=new d,o=e.split(h),a=0,c=1,u=0,f=null;return n.eachMapping(function(e){if(null!==f){var t;if(!(c<e.generatedLine))return t=(n=o[a]||"").substr(0,e.generatedColumn-u),o[a]=n.substr(e.generatedColumn-u),u=e.generatedColumn,l(f,t),void(f=e);l(f,r()),c++,u=0}for(;c<e.generatedLine;)s.add(r()),c++;var n;u<e.generatedColumn&&(n=o[a]||"",s.add(n.substr(0,e.generatedColumn)),o[a]=n.substr(e.generatedColumn),u=e.generatedColumn),f=e},this),a<o.length&&(f&&l(f,r()),s.add(o.splice(a).join(""))),n.sources.forEach(function(e){var t=n.sourceContentFor(e);null!=t&&(null!=i&&(e=p.join(i,e)),s.setSourceContent(e,t))}),s;function l(e,t){var n;null===e||void 0===e.source?s.add(t):(n=i?p.join(i,e.source):e.source,s.add(new d(e.originalLine,e.originalColumn,n,t,e.name)))}},d.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},d.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;0<=t;t--)this.prepend(e[t]);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},d.prototype.walk=function(e){for(var t,n=0,i=this.children.length;n<i;n++)(t=this.children[n])[s]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},d.prototype.join=function(e){var t,n,i=this.children.length;if(0<i){for(t=[],n=0;n<i-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},d.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[s]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},d.prototype.setSourceContent=function(e,t){this.sourceContents[p.toSetString(e)]=t},d.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;t<n;t++)this.children[t][s]&&this.children[t].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),t=0,n=i.length;t<n;t++)e(p.fromSetString(i[t]),this.sourceContents[i[t]])},d.prototype.toString=function(){var t="";return this.walk(function(e){t+=e}),t},d.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},s=new t(e),o=!1,a=null,c=null,u=null,f=null;return this.walk(function(e,t){r.code+=e,null!==t.source&&null!==t.line&&null!==t.column?(a===t.source&&c===t.line&&u===t.column&&f===t.name||s.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:r.line,column:r.column},name:t.name}),a=t.source,c=t.line,u=t.column,f=t.name,o=!0):o&&(s.addMapping({generated:{line:r.line,column:r.column}}),a=null,o=!1);for(var n=0,i=e.length;n<i;n++)10===e.charCodeAt(n)?(r.line++,r.column=0,n+1===i?(a=null,o=!1):o&&s.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:r.line,column:r.column},name:t.name})):r.column++}),this.walkSourceContents(function(e,t){s.setSourceContent(e,t)}),{code:r.code,map:s}},d}),define("skylark-sourcemap/main",["./array-set","./base64-vlq","./binary-search","./mapping-list","./quick-sort","./source-map-consumer","./source-map-generator","./source-node","./util"],function(e,t,n,i,r,s,o,a,c){"use strict";return{ArraySet:e,base64VLQ:t,binarySearch:n,MappingList:i,quickSort:r,consumers:s,SourceMapGenerator:o,SourceNode:a,util:c}}),define("skylark-sourcemap",["skylark-sourcemap/main"],function(e){return e}),define("skylark-rjs/source-map",["skylark-sourcemap"],function(e){return e}),define("skylark-rjs/optimize",["./lang","./logger","./parse","./pragma","./uglifyjs","./source-map"],function(b,x,c,u,p,e){"use strict";var f,w=/\@import\s+(url\()?\s*([^);]+)\s*(\))?([\w, ]*)(;)?/gi,S=/\/\*[^\*]*@import[^\*]*\*\//g,t=/\url\(\s*([^\)]+)\s*\)?/g,l=/^\w+:/;e.SourceMapGenerator,e.SourceMapConsumer;function k(e){return e="'"!==(e=e.replace(/\s+$/,"")).charAt(0)&&'"'!==e.charAt(0)?e:e.substring(1,e.length-1)}function E(a,c,e,u){return e.replace(t,function(e,t){var n,i,r=k(t),s=(r=r.replace(b.backSlashRegExp,"/")).charAt(0),o=l.test(r);for("/"===s||"#"===s||o?o||x.trace(a+"\n  URL not a relative URL, skipping: "+t):t=u+c+r,i=(n=t.split("/")).length-1;0<i;i--)"."===n[i]?n.splice(i,1):".."===n[i]&&0!==i&&".."!==n[i-1]&&(n.splice(i-1,2),--i);return"url("+n.join("/")+")"})}return f={jsFile:function(e,t,n,i,r){var s=i.env.fs;t=t||s.readFile(e),t=f.js(e,t,n,i,r),s.saveUtf8File(n,t)},js:function(t,e,n,i,r){var s=String(i.optimize).split("."),o=s[0],s="keepLines"===s[1],a="";if(e=u.process(t,e,i=i||{},"OnSave",r),o&&"none"!==o){if(!(r=f.optimizers[o]))throw new Error('optimizer with name of "'+o+'" not found for this environment');o=i[o]||{},i.generateSourceMaps&&(o.generateSourceMaps=!!i.generateSourceMaps,o._buildSourceMap=i._buildSourceMap);try{if(i.preserveLicenseComments)try{a=c.getLicenseComments(t,e)}catch(e){throw new Error("Cannot parse file: "+t+" for comments. Skipping it. Error is:\n"+e.toString())}i.generateSourceMaps&&a&&(o.preamble=a,a=""),e=a+r(t,e,n,s,o,i.env.fs),o._buildSourceMap&&o._buildSourceMap!==i._buildSourceMap&&(i._buildSourceMap=o._buildSourceMap)}catch(e){if(i.throwWhen&&i.throwWhen.optimize)throw e;x.error(e)}}else i._buildSourceMap&&(i._buildSourceMap=null);return e},cssFile:function(t,e,n){var i,r,s,o=n.env.fs,a=o.readFile(t),c=function f(l,e,p,h,d,t,m){var n=(l=l.replace(b.backSlashRegExp,"/")).lastIndexOf("/"),g=-1!==n?l.substring(0,n+1):"",_=[],v=[],y=m.env.fs;return e=e.replace(S,""),p&&","!==p.charAt(p.length-1)&&(p+=","),e=e.replace(w,function(t,e,n,i,r){if(r&&"all"!==r.replace(/^\s\s*/,"").replace(/\s\s*$/,""))return v.push(l),t;if(n=k(n),p&&-1!==p.indexOf(n+","))return t;n=n.replace(b.backSlashRegExp,"/");try{var s,o,a,c="/"===n.charAt(0)?n:g+n,u=y.readFile(c);return d[c]?"":(d[c]=!0,u=(a=f(c,u,p,h,d,!1,m)).fileContents,a.importList.length&&_.push.apply(_,a.importList),a.skippedList.length&&v.push.apply(v,a.skippedList),o=-1!==(s=n.lastIndexOf("/"))?n.substring(0,s+1):"",u=E(n,o=o.replace(/^\.\//,""),u,h),_.push(c),u)}catch(e){return x.warn(l+"\n  Cannot inline css import, skipping: "+n),t}}),h&&t&&(e=E(l,"",e,h)),{importList:_,skippedList:v,fileContents:e}}(t,a,n.cssImportIgnore,n.cssPrefix,{},!0,n),u=c.skippedList.length?a:c.fileContents;c.skippedList.length&&x.warn("Cannot inline @imports for "+t+",\nthe following files had media queries in them:\n"+c.skippedList.join("\n"));try{if(-1===n.optimizeCss.indexOf(".keepComments"))for(i=0;-1!==(i=u.indexOf("/*",i));){if(-1===(r=u.indexOf("*/",i+2)))throw"Improper comment in CSS file: "+t;s=u.substring(i,r),i=!n.preserveLicenseComments||-1===s.indexOf("license")&&-1===s.indexOf("opyright")&&-1===s.indexOf("(c)")?(u=u.substring(0,i)+u.substring(r+2,u.length),0):r}u=-1===n.optimizeCss.indexOf(".keepLines")?(u=(u=(u=u.replace(/[\r\n]/g," ")).replace(/\s+/g," ")).replace(/\{\s/g,"{")).replace(/\s\}/g,"}"):(u=u.replace(/(\r\n)+/g,"\r\n")).replace(/(\n)+/g,"\n"),-1===n.optimizeCss.indexOf(".keepWhitespace")&&(u=(u=(u=(u=(u=(u=u.replace(/^[ \t]+/gm,"")).replace(/[ \t]+$/gm,"")).replace(/(;|:|\{|}|,)[ \t]+/g,"$1")).replace(/[ \t]+(\{)/g,"$1")).replace(/([ \t])+/g,"$1")).replace(/^[ \t]*[\r\n]/gm,""))}catch(e){u=a,x.error("Could not optimized CSS file: "+t+", error: "+e)}return o.saveUtf8File(e,u),a="\n"+e.replace(n.dir,"")+"\n----------------\n",c.importList.push(t),a+=c.importList.map(function(e){return e.replace(n.dir,"")}).join("\n"),{importList:c.importList,buildText:a+"\n"}},css:function(e,t){var n,i,r,s="",o=[],a=t.dir&&t.removeCombined,c=t.env.fs;if(-1!==t.optimizeCss.indexOf("standard")){if(r=c.getFilteredFileList(e,/\.css$/,!0))for(n=0;n<r.length;n++)i=r[n],x.trace("Optimizing ("+t.optimizeCss+") CSS file: "+i),s+=(i=f.cssFile(i,i,t)).buildText,a&&(i.importList.pop(),o=o.concat(i.importList));a&&o.forEach(function(e){c.exists(e)&&c.deleteFile(e)})}return s},optimizers:{uglify:function(t,e,n,i,r,s){var o,a,c,u={},f=n+".map",l=t&&t.split("/").pop();b.mixin(u,r=r||{},!0),r.preamble&&(u.output={preamble:r.preamble}),r.generateSourceMaps&&(n||r._buildSourceMap)&&(u.outSourceMap=l+".map",r._buildSourceMap?(a=JSON.parse(r._buildSourceMap),u.inSourceMap=a):s.exists(f)&&(u.inSourceMap=f,a=JSON.parse(s.readFile(f)))),x.trace("Uglify file: "+t);try{o=p.minify(e,u,l+".src.js"),u.outSourceMap&&o.map?(c=o.map,a||r._buildSourceMap||s.saveFile(n+".src.js",e),e=o.code,r._buildSourceMap?r._buildSourceMap=c:s.saveFile(n+".map",c)):e=o.code}catch(e){f=e.toString(),l=/SyntaxError/.test(f);throw console.error(e),new Error("Cannot uglify file: "+t+". Skipping it. Error is:\n"+f+(l?"\n\nIf the source uses ES2015 or later syntax, please pass \"optimize: 'none'\" to r.js and use an ES2015+ compatible minifier after running r.js. The included UglifyJS only understands ES5 or earlier syntax.":""))}return e}}}}),define("skylark-rjs/transform",["./esprima","./parse","./logger","./lang"],function(d,m,g,_){"use strict";var p,l=/^([ \t]+)/,h=/\{[\r\n]+([ \t]+)/,v=/^[_A-Za-z]([A-Za-z\d_]*)$/,y={"\n":/\n/g,"\r\n":/\r\n/g};return p={toTransport:function(c,r,u,t,s,n){n=n||{};function e(e){return e=n.useSourceUrl?'eval("'+_.jsEscape(e)+"\\n//# sourceURL="+(0===u.indexOf("/")?"":"/")+u+'");\n':e}var i,o,a,f,l=0,p=!1,h=[];try{i=d.parse(t,{loc:!0})}catch(e){return g.trace("toTransport skipping "+u+": "+e.toString()),t}return m.traverse(i,function(e){var t,n,i,r,s,o,a;if("VariableDeclarator"===e.type&&e.id&&"define"===e.id.name&&"Identifier"===e.id.type&&!((a=e.init)&&a.callee&&"CallExpression"===a.callee.type&&a.callee.callee&&"Identifier"===a.callee.callee.type&&"require"===a.callee.callee.name&&a.callee.arguments&&1===a.callee.arguments.length&&"Literal"===a.callee.arguments[0].type&&a.callee.arguments[0].value&&-1!==a.callee.arguments[0].value.indexOf("amdefine")))return!1;if(((a=c&&"CallExpression"===e.type&&e.callee&&e.callee.object&&"Identifier"===e.callee.object.type&&e.callee.object.name===c&&"Identifier"===e.callee.property.type&&"define"===e.callee.property.name)||m.isDefineNodeWithArgs(e))&&(t=e.arguments)&&t.length){if(n=(o=t[0]).loc,1===t.length)"Identifier"===o.type?(r=!0,s="empty"):m.isFnExpression(o)?(i=o,r=!0,s="scan"):"ObjectExpression"===o.type||"Literal"===o.type&&"number"==typeof o.value||"UnaryExpression"===o.type&&"-"===o.operator&&o.argument&&"Literal"===o.argument.type&&"number"==typeof o.argument.value?(r=!0,s="skip"):"MemberExpression"===o.type&&o.object&&o.property&&"Identifier"===o.property.type&&(r=!0,s="empty");else if("ArrayExpression"===o.type)r=!0,s="skip";else{if("Literal"!==o.type||"string"!=typeof o.value)return;r=!1,s=2===t.length&&m.isFnExpression(t[1])?(i=t[1],"scan"):"skip"}if((o={foundId:void 0,needsId:r,depAction:s,namespaceExists:a,node:e,defineLoc:e.loc,firstArgLoc:n,factoryNode:i,sourceUrlData:void 0}).needsId){if(f)return g.trace(u+" has more than one anonymous define. May be a built file from another build system like, Ender. Skipping normalization."),!(h=[]);f=o,h.push(o)}else"scan"===s&&(1<(l+=1)?p||(h=f?[f]:[],p=!0):h.push(o))}}),h.length&&(h.reverse(),o=t.split("\n"),a=function(e,t){var n=e.start.column,e=e.start.line-1,i=o[e];o[e]=i.substring(0,n)+t+i.substring(n,i.length)},h.forEach(function(e){var t,n="",i="";e.needsId&&r&&(n+="'"+r+"',"),"scan"===e.depAction&&(i=(t=m.getAnonDepsFromNode(e.factoryNode)).length?"["+t.map(function(e){return"'"+e+"'"})+"]":"[]",i+=",",e.factoryNode?a(e.factoryNode.loc,i):n+=i),n&&a(e.firstArgLoc,n),c&&!e.namespaceExists&&a(e.defineLoc,c+"."),s&&s(e)}),t=o.join("\n")),e(t)},modifyConfig:function(e,t){var n=m.findConfig(e),i=n.config;return(i=i&&t(i))?p.serializeConfig(i,e,n.range[0],n.range[1],{quote:n.quote}):e},serializeConfig:function(e,t,n,i,r){var s,o="",a=t.substring(0,n),c=t.substring(n,i),u=-1===c.indexOf("\r")?"\n":"\r\n",f=a.lastIndexOf("\n");return(f=l.exec(a.substring((f=-1===f?0:f)+1,n)))&&f[1]&&(o=f[1]),s=!(s=(f=h.exec(c))&&f[1]?f[1]:s)||s.length<o?"  ":s.substring(o.length),n=new RegExp("("+u+")"+s,"g"),c=p.objectToString(e,{indent:s,lineReturn:u,outDentRegExp:n,quote:r&&r.quote}),f=o,e=u,a+c.replace(y[e],"$&"+f)+t.substring(i)},objectToString:function(e,n,t){var i,r,s=!0,o="",a=n.lineReturn,c=n.indent,u=n.outDentRegExp,f=n.quote||'"',l=(t=t||"")+c;return null===e?o="null":void 0===e?o="undefined":"number"==typeof e||"boolean"==typeof e?o=e:"string"==typeof e?o=f+_.jsEscape(e)+f:_.isArray(e)?(_.each(e,function(e,t){o+=(0!==t?","+a:"")+l+p.objectToString(e,n,l)}),i="[",r="]"):_.isFunction(e)||_.isRegExp(e)?o=e.toString().replace(u,"$1"):(_.eachProp(e,function(e,t){o+=(s?"":","+a)+l+(v.test(t)?t:f+_.jsEscape(t)+f)+": "+p.objectToString(e,n,l),s=!1}),i="{",r="}"),o=i?i+a+o+a+t+r:o}}}),define("skylark-rjs/commonJs",["./parse"],function(r){"use strict";var u={useLog:!0,convertDir:function(e,t,n){var i,r,s,o,a=/\.js$/,c=n.getFilteredFileList(e,/\w/,!0);if(e=e.replace(/\\/g,"/"),t=t.replace(/\\/g,"/"),"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),"/"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),c&&c.length)for(i=0;i<c.length;i++)s=(r=c[i]).replace(e,t),a.test(r)?(o=n.readFile(r),o=u.convert(r,o,config),n.saveUtf8File(s,o)):n.copyFile(r,s,!0);else u.useLog&&("convert"===e?console.log("\n\n"+u.convert(t,n.readFile(t),config)):console.log("No files to convert in directory: "+e))},convert:function(t,e){try{var n="",i=r.usesCommonJs(t,e);if(r.usesAmdOrRequireJs(t,e)||!i)return e;e="define(function (require, exports, module) {"+(n=i.dirname||i.filename?'var __filename = module.uri || "", __dirname = __filename.substring(0, __filename.lastIndexOf("/") + 1); ':n)+e+"\n});\n"}catch(e){console.log("commonJs.convert: COULD NOT CONVERT: "+t+", so skipping it. Error was: "+e)}return e}};return u}),define("skylark-rjs/build",["./rjs","./lang","./prim","./logger","./parse","./optimize","./pragma","./transform","./commonJs","./source-map"],function(require,lang,prim,logger,parse,optimize,pragma,transform,commonJs,sourceMap){"use strict";var build,SourceMapGenerator=sourceMap.SourceMapGenerator,hasProp=lang.hasProp,getOwn=lang.getOwn,falseProp=lang.falseProp,endsWithSemiColonRegExp=/;\s*$/,endsWithSlashRegExp=/[\/\\]$/,resourceIsModuleIdRegExp=/^[\w\/\\\.]+$/,deepCopyProps={layer:!0};function copyConfig(e){return lang.deeplikeCopy(e,deepCopyProps)}function makeBuildBaseConfig(e){return{appDir:"",pragmas:{},paths:{},optimize:"uglify",optimizeCss:"standard.keepLines.keepWhitespace",inlineText:!0,isBuild:!0,optimizeAllPluginResources:!1,findNestedDependencies:!1,preserveLicenseComments:!0,writeBuildTxt:!0,waitSeconds:30,dirExclusionRegExp:e.dirExclusionRegExp,_buildPathToModuleIndex:{}}}function addSemiColon(e,t){return t.skipSemiColonInsertion||endsWithSemiColonRegExp.test(e)?e:e+";"}function endsWithSlash(e){return"/"!==e.charAt(e.length-1)&&(e+="/"),e}function endsWithNewLine(e){return"\n"!==e.charAt(e.length-1)&&(e+="\n"),e}function makeWriteFile(i,r){function s(e,t){logger.trace("Saving plugin-optimized file: "+e),file.saveUtf8File(e,t)}return s.asModule=function(e,t,n){s(t,build.toTransport(i,e,t,n,r))},s}function appendToFileContents(e,t,n,i,r,s){var o,a,c,u,f;if(s){for(i=i.out?i.baseUrl:r&&r._buildPath?r._buildPath:"",o=1===(r=n.split("!")).length?build.makeRelativeFilePath(i,n):(a=r.shift(),r=r.join("!"),resourceIsModuleIdRegExp.test(r)?build.makeRelativeFilePath(i,require.toUrl(r))+"!"+a:n),c=e.split("\n").length-1,u=t.split("\n").length,f=1;f<=u;f+=1)s.addMapping({generated:{line:c+f,column:0},original:{line:f,column:0},source:o});s.setSourceContent(o,t)}return e+=t}function stringDotToObj(n,e,i){var r=e.split(".");r.forEach(function(e,t){t===r.length-1?n[e]=i:(falseProp(n,e)&&(n[e]={}),n=n[e])})}function mixConfig(e,t,n){var i,r,s;for(i in t)hasProp(t,i)&&(r=t[i],s=lang.isArray(r),"object"!=typeof r||!r||s||lang.isFunction(r)||lang.isRegExp(r)?s?n||(s=e[i],lang.isArray(s)?e[i]=s.concat(r):e[i]=r):e[i]=r:"map"===i?(e.map||(e.map={}),lang.deepMix(e.map,t.map)):e[i]=lang.mixin({},e[i],r,!0));lang.hasProp(e,"logLevel")&&logger.logLevel(e.logLevel)}function flattenWrapFile(e,s,o){var a=e.wrap,t=s+"File",n="__"+s+"Map",c=e.env.fs;if("string"!=typeof a[s]&&a[t])a[s]="","string"==typeof a[t]&&(a[t]=[a[t]]),a[n]=[],a[t].forEach(function(e){var i=build.makeAbsPath(e,o,c),r=endsWithNewLine(c.readFile(i));a[n].push(function(e,t,n){return appendToFileContents(e,r,i,t,null,n)}),a[s]+=r});else if(null===a[s]||void 0===a[s])a[s]="";else{if("string"!=typeof a[s])throw new Error("wrap."+s+" or wrap."+t+" malformed");a[s]=endsWithNewLine(a[s]),a[n]=[function(e,t,n){var i=build.makeAbsPath("config-wrap-"+s+"-default.js",o,c);return appendToFileContents(e,a[s],i,t,null,n)}]}}function normalizeWrapConfig(e,i){var r=e.env.fs;try{e.wrap&&(!0===e.wrap?e.wrap={start:"(function () {\n",end:"}());",__startMap:[function(e,t,n){return appendToFileContents(e,"(function () {\n",build.makeAbsPath("config-wrap-start-default.js",i,r),t,null,n)}],__endMap:[function(e,t,n){return appendToFileContents(e,"}());",build.makeAbsPath("config-wrap-end-default.js",i,r),t,null,n)}]}:(flattenWrapFile(e,"start",i),flattenWrapFile(e,"end",i)))}catch(e){throw new Error("Malformed wrap config: "+e.toString())}}return prim.nextTick=function(e){e()},require._cacheReadAsync=function(t,e,n){var i;return lang.hasProp(require._cachedRawText,t)?((i=prim()).resolve(require._cachedRawText[t]),i.promise):n.readFileAsync(t,e).then(function(e){return require._cachedRawText[t]=e})},build=function(n){var e,t,i,r,s,o,a,c,u,f=/( {4}at[^\n]+)\n/;return prim().start(function(){if(!n||lang.isArray(n)){if(!n||n.length<1)return void logger.error("build.js buildProfile.js\nwhere buildProfile.js is the name of the build file (see example.build.js for hints on how to make a build file).");-1===n[0].indexOf("=")&&(e=n[0],n.splice(0,1)),(t=build.convertArrayToObject(n)).buildFile=e}else t=n;return build._run(t)}).then(null,function(e){var t;if(i=e.toString(),o=e.moduleTree,(s=f.exec(i))&&(i+=i.substring(0,s.index+s[0].length+1)),o&&0<o.length){for(i+="\nIn module tree:\n",a=o.length-1;-1<a;a--)if(u=o[a]){for(c=o.length-a;-1<c;c--)i+="  ";i+=u+"\n"}logger.error(i)}throw r=e.stack,"string"==typeof n&&-1!==n.indexOf("stacktrace=true")?i+="\n"+r:!s&&r&&(s=f.exec(r))&&(i+="\n"+s[0]||""),(t=new Error(i)).originalError=e,t})},build._run=function(t){var n,o,i,a,r,c,u,s,f,l,p,h,d,m,g,_,v,y={},b="",x={};return prim().start(function(){if(c=build.createConfig(t),i=c.paths,v=c.env.fs,c.dir&&!c.keepBuildDir&&v.exists(c.dir)&&v.deleteFile(c.dir),!c.out&&!c.cssIn)if(v.copyDir(c.appDir||c.baseUrl,c.dir,/\w/,!0),n={},c.appDir)for(var e in i)hasProp(i,e)&&(n[e]=i[e].replace(c.appDir,c.dir));else for(e in i)hasProp(i,e)&&(0===i[e].indexOf(c.baseUrl)?n[e]=i[e].replace(c.baseUrl,c.dirBaseUrl):(n[e]="empty:"===i[e]?"empty:":e,0!==(s=i[e]).indexOf("/")&&-1===s.indexOf(":")&&(s=c.baseUrl+s),l=c.dirBaseUrl+n[e],"empty:"!==s&&(v.exists(s)&&v.isDirectory(s)?v.copyDir(s,l,/\w/,!0):(s+=".js",l+=".js",v.copyFile(s,l)))));require({baseUrl:c.baseUrl,paths:i,packagePaths:c.packagePaths,packages:c.packages}),f=require.s.contexts._,(u=c.modules)&&u.forEach(function(e){if(e.name&&(e._sourcePath=f.nameToUrl(e.name),!(v.exists(e._sourcePath)||e.create||-1!==e.name.indexOf("!")||c.rawText&&lang.hasProp(c.rawText,e.name))))throw new Error("ERROR: module path does not exist: "+e._sourcePath+" for module named: "+e.name+". Path is relative to: "+v.absPath("."))}),c.out?(require(c),c.cssIn||(c.modules[0]._buildPath="function"==typeof c.out?"FUNCTION":c.out)):c.cssIn||(r={baseUrl:c.dirBaseUrl,paths:n},lang.mixin(r,c),require(r),u&&u.forEach(function(e){if(e.name){if(e._buildPath=f.nameToUrl(e.name,null),e._buildPath===e._sourcePath&&!c.allowSourceOverwrites)throw new Error("Module ID '"+e.name+"' has a source path that is same as output path: "+e._sourcePath+". Stopping, config is malformed.");e.create||c.rawText&&lang.hasProp(c.rawText,e.name)||v.copyFile(e._sourcePath,e._buildPath)}})),c.optimizeCss&&"none"!==c.optimizeCss&&c.dir&&(b+=optimize.css(c.dir,c))}).then(function(){r=copyConfig(require.s.contexts._.config)}).then(function(){var e;if(u)return e=u.map(function(t,e){return function(){return c._buildPathToModuleIndex[v.normalize(t._buildPath)]=e,build.traceDependencies(t,c,r).then(function(e){t.layer=e})}}),prim.serial(e)}).then(function(){var e;if(u)return e=u.map(function(i){return function(){if(i.exclude)return i.excludeLayers=[],prim.serial(i.exclude.map(function(t,n){return function(){var e=build.findBuildModule(t,u);if(!e)return build.traceDependencies({name:t},c,r).then(function(e){i.excludeLayers[n]={layer:e}});i.excludeLayers[n]=e}}))}}),prim.serial(e)}).then(function(){if(u)return prim.serial(u.map(function(i){return function(){return i.exclude&&i.exclude.forEach(function(e,t){var t=i.excludeLayers[t].layer,n=t.buildFileToModule;t.buildFilePaths.forEach(function(e){build.removeModulePath(n[e],e,i.layer)})}),i.excludeShallow&&i.excludeShallow.forEach(function(e){var t=getOwn(i.layer.buildPathMap,e);t&&build.removeModulePath(e,t,i.layer)}),build.flattenModule(i,i.layer,c).then(function(e){var t;"FUNCTION"===i._buildPath?(i._buildText=e.text,i._buildSourceMap=e.sourceMap):(t=e.text,e.sourceMap&&(t+="\n//# sourceMappingURL="+i._buildPath.split("/").pop()+".map",v.saveUtf8File(i._buildPath+".map",e.sourceMap)),v.saveUtf8File(i._buildPath+"-temp",t)),b+=e.buildText})}}))}).then(function(){var i,e,r={},s=c.bundlesConfigOutFile;if(u&&(u.forEach(function(e){var t,n,i=e._buildPath;"FUNCTION"!==i&&(v.exists(i)&&v.deleteFile(i),v.renameFile(i+"-temp",i),s&&(t=r[e.name]=[],i=v.readFile(i),(n={})[e.name]=!0,i=parse.getAllNamedDefines(i,n),t.push.apply(t,i)),c.removeCombined)&&!c.out&&e.layer.buildFilePaths.forEach(function(t){var e=u.some(function(e){return e._buildPath===t}),n=build.makeRelativeFilePath(c.dir,t);v.exists(t)&&!e&&0!==n.indexOf("..")&&v.deleteFile(t)}),c.onModuleBundleComplete&&c.onModuleBundleComplete(e.onCompleteData)}),s)&&(e=v.readFile(s),e=transform.modifyConfig(e,function(n){return n.bundles||(n.bundles={}),lang.eachProp(r,function(e,t){n.bundles[t]=e}),n}),v.saveUtf8File(s,e)),c.removeCombined&&!c.out&&c.dir&&v.deleteEmptyDirs(c.dir),c.out&&!c.cssIn)"FUNCTION"===(o=c.modules[0]._buildPath)?(e=c.modules[0]._buildSourceMap,c._buildSourceMap=e,c.modules[0]._buildText=optimize.js((c.modules[0].name||c.modules[0].include[0]||o)+".build.js",c.modules[0]._buildText,null,c),c._buildSourceMap&&c._buildSourceMap!==e&&(c.modules[0]._buildSourceMap=c._buildSourceMap,c._buildSourceMap=null)):optimize.jsFile(o,null,o,c);else if(!c.cssIn){for(i in v.getFilteredFileList(c.dir,/\.js$/,!0).forEach(function(e){var t,n;i=(i=e.replace(c.dir,"")).substring(0,i.length-3),(-1<(n=0===(n=getOwn(c._buildPathToModuleIndex,e))||0<n?n:-1)||!c.skipDirOptimize||"all"===c.normalizeDirDefines||c.cjsTranslate)&&(_=v.readFile(e),!c.cjsTranslate||c.shim&&lang.hasProp(c.shim,i)||(_=commonJs.convert(e,_)),-1===n&&(c.onBuildRead&&(_=c.onBuildRead(i,e,_)),"all"===c.normalizeDirDefines&&(_=build.toTransport(c.namespace,null,e,_)),c.onBuildWrite)&&(_=c.onBuildWrite(i,e,_)),t=(t=-1<n?c.modules[n].override:null)?build.createOverrideConfig(c,t):c,-1<n||!c.skipDirOptimize)&&optimize.jsFile(e,_,e,t,x)}),d=require.s.contexts._,x)if(hasProp(x,i))for(h=d.makeModuleMap(i),m=x[i],a=0;a<m.length;a++){if(g=m[a],p=d.makeModuleMap(g,h),falseProp(d.plugins,p.prefix)){if(d.plugins[p.prefix]=!0,!v.exists(require.toUrl(p.prefix+".js")))continue;d.require([p.prefix]),p=d.makeModuleMap(g,h)}falseProp(y,p.id)&&((g=getOwn(d.defined,p.prefix))&&g.writeFile&&g.writeFile(p.prefix,p.name,require,makeWriteFile(c.namespace),d.config),y[p.id]=!0)}c.writeBuildTxt&&v.saveUtf8File(c.dir+"build.txt",b)}return c.cssIn&&(b+=optimize.cssFile(c.cssIn,c.out,c).buildText),"function"==typeof c.out&&c.out(c.modules[0]._buildText,c.modules[0]._buildSourceMap),b?(logger.info(b),b):""})},build.objProps={paths:!0,wrap:!0,pragmas:!0,pragmasOnSave:!0,has:!0,hasOnSave:!0,uglify:!0,uglify2:!0,closure:!0,map:!0,throwWhen:!0,rawText:!0},build.hasDotPropMatch=function(e){var t=e.indexOf(".");return-1!==t&&(e=e.substring(0,t),hasProp(build.objProps,e))},build.convertArrayToObject=function(e){for(var t,n,i={},r={include:!0,exclude:!0,excludeShallow:!0,insertRequire:!0,stubModules:!0,deps:!0,mainConfigFile:!0,"wrap.startFile":!0,"wrap.endFile":!0},s=0;s<e.length;s++)separatorI.ndex=e[s].indexOf("="),"true"===(n=e[s].substring(NaN,e[s].length))?n=!0:"false"===n&&(n=!1),t=e[s].substring(0,void 0),getOwn(r,t)&&(n=n.split(",")),build.hasDotPropMatch(t)?stringDotToObj(i,t,n):i[t]=n;return i},build.makeAbsPath=function(e,t,n){return t?(0!==e.indexOf("/")&&-1===e.indexOf(":")&&(e=t+("/"===t.charAt(t.length-1)?"":"/")+e,e=n.normalize(e)),e.replace(lang.backSlashRegExp,"/")):e},build.makeAbsObject=function(e,t,n,i){var r,s;if(t)for(r=0;r<e.length;r++)s=e[r],hasProp(t,s)&&"string"==typeof t[s]&&(t[s]=build.makeAbsPath(t[s],n,i))},build.makeAbsConfig=function(e,t,n){for(var i,r=["appDir","dir","baseUrl"],s=0;s<r.length;s++)getOwn(e,i=r[s])&&("baseUrl"===i?(e.originalBaseUrl=e.baseUrl,e.appDir?e.baseUrl=build.makeAbsPath(e.originalBaseUrl,e.appDir,n):e.baseUrl=build.makeAbsPath(e[i],t,n)):e[i]=build.makeAbsPath(e[i],t,n),e[i]=endsWithSlash(e[i]));build.makeAbsObject("stdout"===e.out?["cssIn"]:["out","cssIn"],e,t,n),build.makeAbsObject(["startFile","endFile"],e.wrap,t,n),build.makeAbsObject(["externExportsPath"],e.closure,t,n)},build.makeRelativeFilePath=function(e,t,n){var i,r,s,o,a=e.split("/"),e=endsWithSlashRegExp.test(t),c=[];for(t=n.normalize(t),e&&!endsWithSlashRegExp.test(t)&&(t+="/"),n=(o=t.split("/")).pop(),a.pop(),s=a.length,i=0;i<s&&a[i]===o[i];i+=1);for(e=o.slice(i),r=s-i,i=0;-1<i&&i<r;i+=1)c.push("..");return c.join("/")+(c.length?"/":"")+e.join("/")+(e.length?"/":"")+n},build.nestedMix={paths:!0,has:!0,hasOnSave:!0,pragmas:!0,pragmasOnSave:!0},build.createConfig=function(cfg){var fs=cfg.env.fs,buildFileContents,buildFileConfig,mainConfig,mainConfigFile,mainConfigPath,buildFile,absFilePath,config={},buildBaseConfig=makeBuildBaseConfig(fs),absFilePath=fs.absPath(".");if(build.makeAbsConfig(cfg,absFilePath,fs),build.makeAbsConfig(buildBaseConfig,absFilePath,fs),lang.mixin(config,buildBaseConfig),lang.mixin(config,cfg,!0),lang.hasProp(config,"logLevel")&&logger.logLevel(config.logLevel),config.buildFile){if(buildFile=fs.absPath(config.buildFile),!fs.exists(buildFile))throw new Error("ERROR: build file does not exist: "+buildFile);absFilePath=config.baseUrl=fs.absPath(fs.parent(buildFile)),buildFileContents=fs.readFile(buildFile);try{buildFileContents=buildFileContents.replace(/\/\/\#[^\n\r]+[\n\r]*$/,"").trim().replace(/;$/,""),buildFileConfig=eval("("+buildFileContents+")"),build.makeAbsConfig(buildFileConfig,absFilePath,fs),mixConfig(config,buildFileConfig)}catch(e){throw new Error("Build file "+buildFile+" is malformed: "+e)}}if(mainConfigFile=config.mainConfigFile||buildFileConfig&&buildFileConfig.mainConfigFile,mainConfigFile&&("string"==typeof mainConfigFile&&(mainConfigFile=[mainConfigFile]),mainConfigFile.forEach(function(t){if(t=build.makeAbsPath(t,absFilePath,fs),!fs.exists(t))throw new Error(t+" does not exist.");try{mainConfig=parse.findConfig(fs.readFile(t)).config}catch(e){throw new Error("The config in mainConfigFile "+t+" cannot be used because it cannot be evaluated correctly while running in the optimizer. Try only using a config that is also valid JSON, or do not use mainConfigFile and instead copy the config values needed into a build file or command line arguments given to the optimizer.\nSource error from parsing: "+t+": "+e)}mainConfig&&(mainConfigPath=t.substring(0,t.lastIndexOf("/")),config.appDir&&!mainConfig.appDir&&(mainConfig.appDir=config.appDir),mainConfig.baseUrl||(mainConfig.baseUrl=mainConfigPath),build.makeAbsConfig(mainConfig,mainConfigPath,fs),mixConfig(config,mainConfig))})),buildFileConfig&&mixConfig(config,buildFileConfig,!0),mixConfig(config,cfg,!0),lang.eachProp(config.paths,function(e,t){if(lang.isArray(e))throw new Error("paths fallback not supported in optimizer. Please provide a build config path override for "+t);config.paths[t]=build.makeAbsPath(e,config.baseUrl,fs)}),hasProp(config,"baseUrl")){if(config.appDir){if(!config.originalBaseUrl)throw new Error("Please set a baseUrl in the build config");config.dirBaseUrl=build.makeAbsPath(config.originalBaseUrl,config.dir,fs)}else config.dirBaseUrl=config.dir||config.baseUrl;config.dirBaseUrl=endsWithSlash(config.dirBaseUrl)}if(config.bundlesConfigOutFile){if(!config.dir)throw new Error('bundlesConfigOutFile can only be used with optimizations that use "dir".');config.bundlesConfigOutFile=build.makeAbsPath(config.bundlesConfigOutFile,config.dir,fs)}if(config.main)throw new Error('"main" passed as an option, but the supported option is called "name".');if(config.out&&!config.name&&!config.modules&&!config.include&&!config.cssIn)throw new Error('Missing either a "name", "include" or "modules" option');if(config.cssIn){if(config.dir||config.appDir)throw new Error('cssIn is only for the output of single file CSS optimizations and is not compatible with "dir" or "appDir" configuration.');if(!config.out)throw new Error('"out" option missing.')}if(config.cssIn||config.baseUrl||(config.baseUrl="./"),!config.out&&!config.dir)throw new Error('Missing either an "out" or "dir" config value. If using "appDir" for a full project optimization, use "dir". If you want to optimize to one file, use "out".');if(config.appDir&&config.out)throw new Error('"appDir" is not compatible with "out". Use "dir" instead. appDir is used to copy whole projects, where "out" with "baseUrl" is used to just optimize to one file.');if(config.out&&config.dir)throw new Error('The "out" and "dir" options are incompatible. Use "out" if you are targeting a single file for optimization, and "dir" if you want the appDir or baseUrl directories optimized.');if(config.dir&&!config.allowSourceOverwrites&&(config.dir===config.baseUrl||config.dir===config.appDir||config.baseUrl&&0!==build.makeRelativeFilePath(config.dir,config.baseUrl,fs).indexOf("..")||config.appDir&&0!==build.makeRelativeFilePath(config.dir,config.appDir,fs).indexOf("..")))throw new Error('"dir" is set to a parent or same directory as "appDir" or "baseUrl". This can result in the deletion of source code. Stopping. If you want to allow possible overwriting of source code, set "allowSourceOverwrites" to true in the build config, but do so at your own risk. In that case, you may want to also set "keepBuildDir" to true.');if(config.insertRequire&&!lang.isArray(config.insertRequire))throw new Error("insertRequire should be a list of module IDs to insert in to a require([]) call.");if("uglify2"===config.optimize&&(config.optimize="uglify"),config.uglify2&&(config.uglify=config.uglify2,delete config.uglify2),config.generateSourceMaps){if(config.preserveLicenseComments&&"none"!==config.optimize&&"uglify"!==config.optimize)throw new Error("Cannot use preserveLicenseComments and generateSourceMaps together, unless optimize is set to 'uglify'. Either explicitly set preserveLicenseComments to false (default is true) or turn off generateSourceMaps. If you want source maps with license comments, see: http://requirejs.org/docs/errors.html#sourcemapcomments");if("none"!==config.optimize&&"closure"!==config.optimize&&"uglify"!==config.optimize)throw new Error('optimize: "'+config.optimize+'" does not support generateSourceMaps.')}if(!config.name&&!config.include||config.modules){if(config.modules&&config.out)throw new Error('If the "modules" option is used, then there should be a "dir" option set and "out" should not be used since "out" is only for single file optimization output.');if(config.modules&&config.name)throw new Error('"name" and "modules" options are incompatible. Either use "name" if doing a single file optimization, or "modules" if you want to target more than one file for optimization.')}else config.modules=[{name:config.name,out:config.out,create:config.create,include:config.include,exclude:config.exclude,excludeShallow:config.excludeShallow,insertRequire:config.insertRequire,stubModules:config.stubModules}],delete config.stubModules;if(!config.out||config.cssIn||cfg.optimizeCss||(config.optimizeCss="none"),config.cssPrefix?config.cssPrefix=endsWithSlash(config.cssPrefix):config.cssPrefix="",config.modules&&config.modules.length&&config.modules.forEach(function(t){if(lang.isArray(t)||"string"==typeof t||!t)throw new Error("modules config item is malformed: it should be an object with a 'name' property.");config.stubModules&&(t.stubModules=config.stubModules.concat(t.stubModules||[])),t.stubModules&&(t.stubModules._byName={},t.stubModules.forEach(function(e){t.stubModules._byName[e]=!0})),"string"==typeof t.include&&(t.include=[t.include]),t.override&&normalizeWrapConfig(t.override,absFilePath)}),normalizeWrapConfig(config,absFilePath),config.context)throw new Error('The build argument "context" is not supported in a build. It should only be used in web pages.');return hasProp(config,"normalizeDirDefines")||("none"===config.optimize||config.skipDirOptimize?config.normalizeDirDefines="skip":config.normalizeDirDefines="all"),hasProp(config,"fileExclusionRegExp")?"string"==typeof config.fileExclusionRegExp?fs.exclusionRegExp=new RegExp(config.fileExclusionRegExp):fs.exclusionRegExp=config.fileExclusionRegExp:hasProp(config,"dirExclusionRegExp")&&(fs.exclusionRegExp=config.dirExclusionRegExp),config.deps&&(config._depsInclude=config.deps),delete config.deps,delete config.jQuery,delete config.enforceDefine,delete config.urlArgs,config},build.findBuildModule=function(e,t){for(var n,i=0;i<t.length;i++)if((n=t[i]).name===e)return n;return null},build.removeModulePath=function(e,t,n){t=n.buildFilePaths.indexOf(t);-1!==t&&n.buildFilePaths.splice(t,1)},build.traceDependencies=function(e,n,t){var i,r,s,o,a={rhino:!0,node:!0,xpconnect:!0},c=prim();function u(e){var t=!1;if(a[n.env.name])try{build.checkForErrors(s,r)}catch(e){t=!0,c.reject(e)}t||c.resolve(e)}return require._buildReset(),r=require._layer,s=r.context,t&&require(copyConfig(t)),logger.trace("\nTracing dependencies for: "+(e.name||("function"==typeof e.out?"FUNCTION":e.out))),i=(i=n._depsInclude||[]).concat(e.name&&!e.create?[e.name]:[]),e.include&&(i=i.concat(e.include)),e.override&&(o=t?build.createOverrideConfig(t,e.override):copyConfig(e.override),require(o)),(o=require.s.contexts._.config.rawText)&&lang.eachProp(o,function(e,t){t=require.toUrl(t)+".js";require._cachedRawText[t]=e}),c.reject.__requireJsBuild=!0,u.__requireJsBuild=!0,require(i,u,c.reject),a[n.env.name]&&build.checkForErrors(s,r),c.promise.then(function(){return e.override&&t&&require(copyConfig(t)),build.checkForErrors(s,r),r})},build.checkForErrors=function(e,t){var n,i,r,s,o,a="",c={},u=[],f=[],l={},p={},h=!1,d=!1,m=e.defined,g=e.registry;function _(e,t,n){t&&(n||f.push(e),l[t]?(h=!0,p[t]||(p[t]=[],p[t].push(l[t])),p[t].push(e)):n||(l[t]=e))}for(n in g)hasProp(g,n)&&0!==n.indexOf("_@r")&&(d=!0,r=getOwn(g,n),o=(s=n.split("!"))[0],-1===n.indexOf("_unnormalized")&&r&&r.enabled&&_(n,r.map.url),!hasProp(t.modulesWithNames,n))&&1<s.length&&(falseProp(c,o)&&u.push(o),(c[o]||(c[o]=[])).push(n+(r.error?": "+r.error:"")));if(d)for(n in m)hasProp(m,n)&&-1===n.indexOf("!")&&_(n,require.toUrl(n)+".js",!0);if(f.length||u.length){if(u.length&&(a+="Loader plugin"+(1===u.length?"":"s")+" did not call the load callback in the build:\n"+u.map(function(e){return e+":\n  "+c[e].join("\n  ")}).join("\n")+"\n"),a+="Module loading did not complete for: "+f.join(", "),h)for(i in a+="\nThe following modules share the same URL. This could be a misconfiguration if that URL only has one anonymous module in it:",p)hasProp(p,i)&&(a+="\n"+i+": "+p[i].join(", "));throw new Error(a)}},build.createOverrideConfig=function(n,i){var r=copyConfig(n),e=copyConfig(i);return lang.eachProp(e,function(e,t){hasProp(build.objProps,t)?(r[t]={},lang.mixin(r[t],n[t],!0),lang.mixin(r[t],i[t],!0)):r[t]=i[t]}),r},build.flattenModule=function(_,v,y){var b,x,n,w="",S=y.env.fs;return prim().start(function(){var r,e,s,t,o,a,c,u,f,l,p,h=v.context,d=[],m={},g={};return _.override&&(y=build.createOverrideConfig(y,_.override)),f=y.namespace||"",l=f?f+".":"",p=_.stubModules&&_.stubModules._byName||{},_.onCompleteData={name:_.name,path:y.dir?_._buildPath.replace(y.dir,""):_._buildPath,included:[]},w+="\n"+_.onCompleteData.path+"\n----------------\n",v.existingRequireUrl&&-1!==(e=v.buildFilePaths.indexOf(v.existingRequireUrl))&&(v.buildFilePaths.splice(e,1),v.buildFilePaths.unshift(v.existingRequireUrl)),y.generateSourceMaps&&(n=y.dir||y.baseUrl,e="FUNCTION"===_._buildPath?(_.name||_.include[0]||"FUNCTION")+".build.js":y.out?_._buildPath.split("/").pop():_._buildPath.replace(n,""),x=new SourceMapGenerator({file:e})),lang.eachProp(v.context.config.pkgs,function(e,t){g[e]=t}),b="",y.wrap&&y.wrap.__startMap&&y.wrap.__startMap.forEach(function(e){b=e(b,y,x)}),prim.serial(v.buildFilePaths.map(function(i){return function(){var n="";return s=v.buildFileToModule[i],o=getOwn(g,s),prim().start(function(){if(a=h.makeModuleMap(s),!(c=a.prefix&&getOwn(h.defined,a.prefix)))return prim().start(function(){return hasProp(p,s)?hasProp(v.context.plugins,s)?'define({load: function(id){throw new Error("Dynamic load not allowed: " + id);}});':"define({});":require._cacheReadAsync(i,void 0,S)}).then(function(e){var t;r=e,!y.cjsTranslate||y.shim&&lang.hasProp(y.shim,s)||(r=commonJs.convert(i,r)),y.onBuildRead&&(r=y.onBuildRead(s,i,r)),o&&(t=o===parse.getNamedDefine(r)),f&&(r=pragma.namespace(r,f)),r=build.toTransport(f,s,i,r,v,{useSourceUrl:y.useSourceUrl}),o&&!t&&(r=addSemiColon(r,y)+"\n",r+=l+"define('"+o+"', ['"+s+"'], function (main) { return main; });\n"),y.onBuildWrite&&(r=y.onBuildWrite(s,i,r)),n+=addSemiColon(r,y)});c.onLayerEnd&&falseProp(m,a.prefix)&&(d.push(c),m[a.prefix]=!0),c.write&&((u=function(e){n+="\n"+addSemiColon(e,y),y.onBuildWrite&&(n=y.onBuildWrite(s,i,n))}).asModule=function(e,t){n+="\n"+addSemiColon(build.toTransport(f,e,i,t,v,{useSourceUrl:v.context.config.useSourceUrl}),y),y.onBuildWrite&&(n=y.onBuildWrite(e,i,n))},c.write(a.prefix,a.name,u,{name:_.onCompleteData.name,path:_.onCompleteData.path}))}).then(function(){var e=i.replace(y.dir,"");_.onCompleteData.included.push(e),w+=e+"\n",s&&falseProp(v.modulesWithNames,s)&&!y.skipModuleInsertion&&((t=y.shim&&(getOwn(y.shim,s)||o&&getOwn(y.shim,o)))?(e=lang.isArray(t)?t:t.deps,y.wrapShim?n="(function(root) {\n"+l+'define("'+s+'", '+(e&&e.length?build.makeJsArrayString(e)+", ":"[], ")+"function() {\n  return (function() {\n"+n+"\n"+(t.exportsFn?t.exportsFn():"")+"\n  }).apply(root, arguments);\n});\n}(this));\n":n+="\n"+l+'define("'+s+'", '+(e&&e.length?build.makeJsArrayString(e)+", ":"")+(t.exportsFn?t.exportsFn():"function(){}")+");\n"):n+="\n"+l+'define("'+s+'", function(){});\n'),b=appendToFileContents(b,n+="\n",i,y,_,x)})}})).then(function(){d.length&&d.forEach(function(e,t){var n;"string"==typeof _.out?n=_.out:"string"==typeof _._buildPath&&(n=_._buildPath),e.onLayerEnd(function(e){b=appendToFileContents(b,"\n"+addSemiColon(e,y),"onLayerEnd"+t+".js",y,_,x)},{name:_.name,path:n})}),_.create&&(b=appendToFileContents(b,"\n"+l+'define("'+_.name+'", function(){});\n',"module-create.js",y,_,x)),_.insertRequire&&(b=appendToFileContents(b,"\n"+l+'require(["'+_.insertRequire.join('", "')+'"]);\n',"module-insertRequire.js",y,_,x))})}).then(function(){return y.wrap&&y.wrap.__endMap&&y.wrap.__endMap.forEach(function(e){b=e(b,y,x)}),{text:b,buildText:w,sourceMap:x?JSON.stringify(x.toJSON(),null,"  "):void 0}})},build.makeJsArrayString=function(e){return'["'+e.map(function(e){return lang.jsEscape(e)}).join('","')+'"]'},build.toTransport=function(e,t,n,i,r,s){var o=r&&r.context.config.baseUrl;return o&&(n=n.replace(o,"")),transform.toTransport(e,t,n,i,function(e){r&&(e.needsId||e.foundId===t)&&(r.modulesWithNames[t]=!0)},s)},require.build=build}),define("skylark-rjs/main",["./rjs","./build","./lang","./prim","./logger","./parse","./optimize","./pragma","./transform","./commonJs","./source-map"],function(e,t,n,i,r,s,o,a,c,u,f,l){"use strict";return e}),define("skylark-rjs",["skylark-rjs/main"],function(e){return e});
},this,define,require);
//# sourceMappingURL=sourcemaps/skylark-rjs-all.js.map
