/**
 * skylark-rjs - A version of rjs that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(factory,globals){var define=globals.define,require=globals.require,isAmd="function"==typeof define&&define.amd,isCmd=!isAmd&&"undefined"!=typeof exports;if(!isAmd&&!define){var map={};define=globals.define=function(e,n,i){"function"==typeof i?(map[e]={factory:i,deps:n.map(function(n){return function(e,n){if("."!==e[0])return e;var i=n.split("/"),r=e.split("/");i.pop();for(var t=0;t<r.length;t++)"."!=r[t]&&(".."==r[t]?i.pop():i.push(r[t]));return i.join("/")}(n,e)}),resolved:!1,exports:null},require(e)):map[e]={factory:null,resolved:!0,exports:i}},require=globals.require=function(e){if(!map.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=map[e];if(!module.resolved){var n=[];module.deps.forEach(function(e){n.push(require(e))}),module.exports=module.factory.apply(globals,n)||null,module.resolved=!0}return module.exports}}if(!define)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(define,require){define("skylark-rjs/rjs",["skylark-langx-ns"],function(e){return require.define=define,e.attach("intg.rjs",require)}),define("skylark-rjs/lang",[],function(){"use strict";var e,n,i=Object.prototype.hasOwnProperty;function r(e,n){return i.call(e,n)}return n=function(){return!1},"undefined"!=typeof java&&java.lang&&java.lang.Object&&"undefined"!=typeof importPackage&&(n=function(e){return e instanceof java.lang.Object}),e={backSlashRegExp:/\\/g,ostring:Object.prototype.toString,isArray:Array.isArray||function(n){return"[object Array]"===e.ostring.call(n)},isFunction:function(n){return"[object Function]"===e.ostring.call(n)},isRegExp:function(e){return e&&e instanceof RegExp},hasProp:r,falseProp:function(e,n){return!r(e,n)||!e[n]},getOwn:function(e,n){return r(e,n)&&e[n]},_mixin:function(e,n,i){var r;for(r in n)!n.hasOwnProperty(r)||!i&&e.hasOwnProperty(r)||(e[r]=n[r]);return e},mixin:function(n){var i,r,t,o=Array.prototype.slice.call(arguments);for(n||(n={}),o.length>2&&"boolean"==typeof arguments[o.length-1]&&(i=o.pop()),r=1,t=o.length;r<t;r++)e._mixin(n,o[r],i);return n},deepMix:function(n,i){return e.eachProp(i,function(i,r){"object"!=typeof i||!i||e.isArray(i)||e.isFunction(i)||i instanceof RegExp?n[r]=i:(n[r]||(n[r]={}),e.deepMix(n[r],i))}),n},deeplikeCopy:function(i,t){var o,a;return e.isArray(i)?(a=[],i.forEach(function(n){a.push(e.deeplikeCopy(n,t))}),a):(o=typeof i,null===i||void 0===i||"boolean"===o||"string"===o||"number"===o||e.isFunction(i)||e.isRegExp(i)||n(i)?i:(a={},e.eachProp(i,function(n,i){t&&r(t,i)||(a[i]=e.deeplikeCopy(n,t))}),a))},delegate:function(){function n(){}return function(i,r){n.prototype=i;var t=new n;return n.prototype=null,r&&e.mixin(t,r),t}}(),each:function(e,n){var i;if(e)for(i=0;i<e.length&&!n(e[i],i,e);i+=1);},eachProp:function(e,n){var i;for(i in e)if(r(e,i)&&n(e[i],i))break},bind:function(e,n){return function(){return n.apply(e,arguments)}},jsEscape:function(e){return e.replace(/(["'\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}}}),define("skylark-rjs/prim",[],function(){"use strict";var e=Object.prototype,n=e.hasOwnProperty;function i(e,i){return n.call(e,i)}function r(e,n){var i;if(e)for(i=0;i<e.length;i+=1)e[i]&&n(e[i],i,e)}function t(e){if(i(e,"e")||i(e,"v")){if(!a.hideResolutionConflict)throw new Error("Prim promise already resolved: "+JSON.stringify(e));return!1}return!0}function o(e,n){a.nextTick(function(){r(e,function(e){e(n)})})}function a(){var e,n=[],r=[];return e={callback:function(r,t){t&&e.errback(t),i(e,"v")?a.nextTick(function(){r(e.v)}):n.push(r)},errback:function(n){i(e,"e")?a.nextTick(function(){n(e.e)}):r.push(n)},finished:function(){return i(e,"e")||i(e,"v")},rejected:function(){return i(e,"e")},resolve:function(i){return t(e)&&(e.v=i,o(n,i)),e},reject:function(n){return t(e)&&(e.e=n,o(r,n)),e},start:function(n){return e.resolve(),e.promise.then(n)},promise:{then:function(n,i){var r=a();return e.callback(function(e){try{n&&"function"==typeof n&&(e=n(e)),e&&e.then?e.then(r.resolve,r.reject):r.resolve(e)}catch(e){r.reject(e)}},function(e){var n;try{i&&"function"==typeof i?(n=i(e))&&n.then?n.then(r.resolve,r.reject):r.resolve(n):r.reject(e)}catch(e){r.reject(e)}}),r.promise},fail:function(n){return e.promise.then(null,n)},end:function(){e.errback(function(e){throw e})}}}}return a.serial=function(e){var n=a().resolve().promise;return r(e,function(e){n=n.then(function(){return e()})}),n},a.nextTick="function"==typeof setImmediate?setImmediate:"undefined"!=typeof process&&process.nextTick?process.nextTick:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(e){e()},a}),define("skylark-rjs/logger",[],function(){var e={TRACE:0,INFO:1,WARN:2,ERROR:3,SILENT:4,level:0,logPrefix:"",logLevel:function(e){this.level=e},trace:function(e){this.level<=this.TRACE&&this._print(e)},info:function(e){this.level<=this.INFO&&this._print(e)},warn:function(e){this.level<=this.WARN&&this._print(e)},error:function(e){this.level<=this.ERROR&&this._print(e)},_print:function(e){this._sysPrint((this.logPrefix?this.logPrefix+" ":"")+e)},_sysPrint:function(e){var n,i;n=e,console.log(n,i)}};return e}),define("skylark-rjs/esprima",["skylark-espree"],function(e){return e}),define("skylark-rjs/parse",["./esprima","./lang"],function(esprima,lang){"use strict";function arrayToString(e){var n="[";return e&&e.forEach(function(e,i){n+=(i>0?",":"")+'"'+lang.jsEscape(e)+'"'}),n+="]"}var argPropName="arguments",emptyScope={},mixin=lang.mixin,hasProp=lang.hasProp;function traverse(e,n){var i;if(e){if(!1===n.call(null,e))return!1;for(var r=0,t=Object.keys(e);r<t.length;r++)if("object"==typeof(i=e[t[r]])&&null!==i&&!1===traverse(i,n))return!1}}function traverseBroad(e,n){var i;if(e){if(!1===n.call(null,e))return!1;for(var r=0,t=Object.keys(e);r<t.length;r++)"object"==typeof(i=e[key])&&null!==i&&traverseBroad(i,n)}}function getValidDeps(e){if(e&&"ArrayExpression"===e.type&&e.elements){var n=[];return e.elements.some(function(e){"Literal"===e.type&&n.push(e.value)}),n.length?n:void 0}}function isFnExpression(e){return e&&("FunctionExpression"===e.type||"ArrowFunctionExpression"===e.type)}function parse(e,n,i,r){r=r||{};var t,o,a,s=[],l="",u=[],c=!0,f=esprima.parse(i);if(parse.recurse(f,function(n,i,t,o,a,l,f){return o||(o=[]),"define"!==n||t&&t!==e||(c=!1),t?u.push({name:t,deps:o}):s=s.concat(o),"define"===n&&l&&hasProp(f,l)?l:!!r.findNestedDependencies},r),r.insertNeedsDefine&&c&&(l+='require.needsDefine("'+e+'");'),s.length||u.length){for(t=0;t<u.length;t++)o=u[t],l&&(l+="\n"),o.name===e&&(o.deps=o.deps.concat(s),s=[]),a=arrayToString(o.deps),l+='define("'+o.name+'",'+a+");";s.length&&(l&&(l+="\n"),a=arrayToString(s),l+='define("'+e+'",'+a+");")}return l||null}return parse.traverse=traverse,parse.traverseBroad=traverseBroad,parse.isFnExpression=isFnExpression,parse.recurse=function(e,n,i,r){var t,o,a,s,l,u,c,f=i&&i.has;if(r=r||emptyScope,e)if(f&&"IfStatement"===e.type&&e.test.type&&"Literal"===e.test.type)e.test.value?this.recurse(e.consequent,n,i,r):this.recurse(e.alternate,n,i,r);else{if(!1===(a=this.parseNode(e,n,r)))return;if("string"==typeof a)return a;if("ExpressionStatement"===e.type&&e.expression&&"CallExpression"===e.expression.type&&e.expression.callee&&isFnExpression(e.expression.callee)&&(c=e.expression.callee),"UnaryExpression"===e.type&&e.argument&&"CallExpression"===e.argument.type&&e.argument.callee&&isFnExpression(e.argument.callee)&&(c=e.argument.callee),c&&c.params&&c.params.length)for(l=c.params,r=mixin({},r,!0),s=0;s<l.length;s++)"Identifier"===(u=l[s]).type&&(r[u.name]=!0);for(s=0,t=Object.keys(e);s<t.length&&("object"!=typeof(o=e[t[s]])||null===o||"string"!=typeof(a=this.recurse(o,n,i,r))||!hasProp(r,a));s++);if("string"==typeof a)return hasProp(r,a)?a:void 0}},parse.definesRequire=function(e,n){var i=!1,r=!1;return traverse(esprima.parse(n),function(e){if("Program"===e.type&&e.body&&e.body.length&&(i=e.body.some(function(e){if("VariableDeclaration"===e.type){var n=e.declarations;if(n){var i=n.some(function(e){return"VariableDeclarator"===e.type&&e.id&&"Identifier"===e.id.type&&"define"===e.id.name});if(i)return!0}}if("FunctionDeclaration"===e.type&&e.id&&"Identifier"===e.id.type&&"define"===e.id.name)return!0})),i&&parse.hasDefineAmd(e))return r=!0,!1}),i&&r},parse.getAnonDeps=function(e,n){var i="string"==typeof n?esprima.parse(n):n,r=this.findAnonDefineFactory(i);return parse.getAnonDepsFromNode(r)},parse.getAnonDepsFromNode=function(e){var n,i=[];return e&&(this.findRequireDepNames(e,i),(n=e.params&&e.params.length)&&(i=(n>1?["require","exports","module"]:["require"]).concat(i))),i},parse.isDefineNodeWithArgs=function(e){return e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"define"===e.callee.name&&e[argPropName]},parse.findAnonDefineFactory=function(e){var n;return traverse(e,function(e){var i,r;if(parse.isDefineNodeWithArgs(e)){if(isFnExpression(i=e[argPropName][0]))return n=i,!1;if(r=e[argPropName][1],"Literal"===i.type&&isFnExpression(r))return n=r,!1}}),n},parse.findConfig=function(fileContents){var jsConfig,foundConfig,stringData,foundRange,quote,quoteMatch,quoteRegExp=/(:\s|\[\s*)(['"])/,astRoot=esprima.parse(fileContents,{loc:!0});return traverse(astRoot,function(e){var n,i=parse.hasRequire(e);if(!i||"require"!==i&&"requirejs"!==i&&"requireConfig"!==i&&"requirejsConfig"!==i){if(n=parse.getRequireObjectLiteral(e))return stringData=parse.nodeToString(fileContents,n),jsConfig=stringData.value,foundRange=stringData.range,!1}else if((n=e[argPropName]&&e[argPropName][0])&&"ObjectExpression"===n.type)return stringData=parse.nodeToString(fileContents,n),jsConfig=stringData.value,foundRange=stringData.range,!1}),jsConfig&&(quoteMatch=quoteRegExp.exec(jsConfig),quote=quoteMatch&&quoteMatch[2]||'"',foundConfig=eval("("+jsConfig+")")),{config:foundConfig,range:foundRange,quote:quote}},parse.getRequireObjectLiteral=function(e){if(e.id&&"Identifier"===e.id.type&&("require"===e.id.name||"requirejs"===e.id.name)&&e.init&&"ObjectExpression"===e.init.type)return e.init},parse.renameNamespace=function(e,n){var i,r=[],t=esprima.parse(e,{loc:!0});return parse.recurse(t,function(e,n,i,t,o){return r.push(o.loc),"define"!==e},{}),r.length&&(i=e.split("\n"),r.reverse(),r.forEach(function(e){var r=e.start.column,t=e.start.line-1,o=i[t];i[t]=o.substring(0,r)+n+"."+o.substring(r,o.length)}),e=i.join("\n")),e},parse.findDependencies=function(e,n,i){var r=[],t=esprima.parse(n);return parse.recurse(t,function(e,n,i,t){t&&(r=r.concat(t))},i),r},parse.findCjsDependencies=function(e,n){var i=[];return traverse(esprima.parse(n),function(e){var n;e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"require"===e.callee.name&&e[argPropName]&&1===e[argPropName].length&&"Literal"===(n=e[argPropName][0]).type&&i.push(n.value)}),i},parse.hasDefDefine=function(e){return"FunctionDeclaration"===e.type&&e.id&&"Identifier"===e.id.type&&"define"===e.id.name},parse.hasDefineAmd=function(e){return e&&"AssignmentExpression"===e.type&&e.left&&"MemberExpression"===e.left.type&&e.left.object&&"define"===e.left.object.name&&e.left.property&&"amd"===e.left.property.name},parse.refsDefineAmd=function(e){return e&&"MemberExpression"===e.type&&e.object&&"define"===e.object.name&&"Identifier"===e.object.type&&e.property&&"amd"===e.property.name&&"Identifier"===e.property.type},parse.hasRequire=function(e){var n,i=e&&e.callee;return e&&"CallExpression"===e.type&&i&&("Identifier"!==i.type||"require"!==i.name&&"requirejs"!==i.name?"MemberExpression"===i.type&&i.object&&"Identifier"===i.object.type&&("require"===i.object.name||"requirejs"===i.object.name)&&i.property&&"config"===i.property.name&&(n=i.object.name+"Config"):n=i.name),n},parse.hasDefine=function(e){return e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"define"===e.callee.name},parse.getNamedDefine=function(e){var n;return traverse(esprima.parse(e),function(e){if(e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"define"===e.callee.name&&e[argPropName]&&e[argPropName][0]&&"Literal"===e[argPropName][0].type)return n=e[argPropName][0].value,!1}),n},parse.getAllNamedDefines=function(e,n){var i=[];return parse.recurse(esprima.parse(e),function(e,r,t,o,a,s,l){return"define"===e&&t&&(n.hasOwnProperty(t)||i.push(t)),"define"!==e||!s||!hasProp(l,s)||s},{}),i},parse.usesAmdOrRequireJs=function(e,n){var i;return traverse(esprima.parse(n),function(e){var n,r,t;parse.hasDefDefine(e)?n="declaresDefine":parse.hasDefineAmd(e)?n="defineAmd":(r=parse.hasRequire(e))?!(t=e[argPropName]&&e[argPropName][0])||"ObjectExpression"!==t.type&&"ArrayExpression"!==t.type||(n=r):parse.hasDefine(e)&&(n="define"),n&&(i||(i={}),i[n]=!0)}),i},parse.usesCommonJs=function(e,n){var i=null,r=!1;return traverse(esprima.parse(n),function(e){var n,t=e.expression||e.init;"Identifier"!==e.type||"__dirname"!==e.name&&"__filename"!==e.name?"VariableDeclarator"===e.type&&e.id&&"Identifier"===e.id.type&&"exports"===e.id.name?n="varExports":t&&"AssignmentExpression"===t.type&&t.left&&"MemberExpression"===t.left.type&&t.left.object?"module"===t.left.object.name&&t.left.property&&"exports"===t.left.property.name?n="moduleExports":"exports"===t.left.object.name&&t.left.property?n="exports":"MemberExpression"===t.left.object.type&&"module"===t.left.object.object.name&&"exports"===t.left.object.property.name&&"Identifier"===t.left.object.property.type&&(n="moduleExports"):e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"require"===e.callee.name&&e[argPropName]&&1===e[argPropName].length&&"Literal"===e[argPropName][0].type&&(n="require"):n=e.name.substring(2),n&&("varExports"===n?r=!0:"exports"===n&&r||(i||(i={}),i[n]=!0))}),i},parse.findRequireDepNames=function(e,n){traverse(e,function(e){var i;e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"require"===e.callee.name&&e[argPropName]&&1===e[argPropName].length&&"Literal"===(i=e[argPropName][0]).type&&n.push(i.value)})},parse.parseNode=function(e,n,i){var r,t,o,a,s,l,u,c,f=e&&e[argPropName],p=parse.hasRequire(e),d=!1;if("require"===p||"requirejs"===p){if((a=e[argPropName]&&e[argPropName][0])&&"ArrayExpression"!==a.type&&"ObjectExpression"===a.type&&(a=e[argPropName][1]),!(t=getValidDeps(a)))return;return n("require",null,null,t,e)}if(parse.hasDefine(e)&&f&&f.length){if(r=f[0],t=f[1],s=f[2],"ArrayExpression"===r.type?(s=t,t=r,r=null):isFnExpression(r)?(s=r,r=t=null):"Identifier"===r.type&&1===f.length&&hasProp(i,r.name)?(d=!0,s=r,r=null):"Literal"!==r.type&&(r=t=s=null),r&&"Literal"===r.type&&t&&(isFnExpression(t)?(s=t,t=null):"ObjectExpression"===t.type?t=s=null:"Identifier"===t.type&&(2===f.length?t=s=null:3===f.length&&isFnExpression(s)&&(t=null))),t&&"ArrayExpression"===t.type)t=getValidDeps(t);else if(isFnExpression(s))(o=parse.getAnonDepsFromNode(s)).length&&(t=o);else if(t||s&&!d)return;return r&&"Literal"===r.type&&(r=r.value),n("define",null,r,t,e,s&&"Identifier"===s.type?s.name:void 0,i)}if("CallExpression"===e.type&&e.callee&&isFnExpression(e.callee)&&e.callee.body&&e.callee.body.body&&1===e.callee.body.body.length&&"IfStatement"===e.callee.body.body[0].type&&(c=e.callee.body.body[0]).consequent&&c.consequent.body&&"ExpressionStatement"===(l=c.consequent.body[0]).type&&l.expression&&parse.hasDefine(l.expression)&&l.expression.arguments&&1===l.expression.arguments.length&&"Identifier"===l.expression.arguments[0].type&&(traverse(c.test,function(e){if(parse.refsDefineAmd(e))return u=!0,!1}),u))return n("define",null,null,null,l.expression,l.expression.arguments[0].name,i)},parse.nodeToString=function(e,n){var i,r=n.loc,t=e.split("\n"),o=r.start.line>1?t.slice(0,r.start.line-1).join("\n")+"\n":"",a=o+t[r.start.line-1].substring(0,r.start.column);return{value:i=r.start.line===r.end.line?t[r.start.line-1].substring(r.start.column,r.end.column):t[r.start.line-1].substring(r.start.column)+"\n"+t.slice(r.start.line,r.end.line-1).join("\n")+"\n"+t[r.end.line-1].substring(0,r.end.column),range:[a.length,a.length+i.length]}},parse.getLicenseComments=function(e,n){var i,r,t,o,a,s,l=esprima.parse(n,{comment:!0,range:!0}),u="",c={},f=-1===n.indexOf("\r")?"\n":"\r\n";if(l.comments)for(a=0;a<l.comments.length;a++){if("Line"===(i=l.comments[a]).type)if(o="//"+i.value+f,r=i,a+1>=l.comments.length)o+=f;else{for(s=a+1;s<l.comments.length&&("Line"===(t=l.comments[s]).type&&t.range[0]===r.range[1]+1);s++)o+="//"+t.value+f,r=t;o+=f,a=s-1}else o="/*"+i.value+"*/"+f+f;c[o]||-1===o.indexOf("license")&&("Block"!==i.type||0!==o.indexOf("/*!"))&&-1===o.indexOf("opyright")&&-1===o.indexOf("(c)")||(u+=o,c[o]=!0)}return u},parse}),define("skylark-rjs/pragma",["./parse","./logger"],function(parse,logger){"use strict";function Temp(){}function create(e,n){Temp.prototype=e;var i,r=new Temp;if(Temp.prototype=null,n)for(i in n)n.hasOwnProperty(i)&&!r.hasOwnProperty(i)&&(r[i]=n[i]);return r}var pragma={conditionalRegExp:/(exclude|include)Start\s*\(\s*["'](\w+)["']\s*,(.*)\)/,useStrictRegExp:/(^|[^{]\r?\n)['"]use strict['"];/g,hasRegExp:/has\s*\(\s*['"]([^'"]+)['"]\s*\)/g,configRegExp:/(^|[^\.])(requirejs|require)(\.config)\s*\(/g,nsWrapRegExp:/\/\*requirejs namespace: true \*\//,apiDefRegExp:/var requirejs,\s*require,\s*define;/,defineCheckRegExp:/typeof(\s+|\s*\(\s*)define(\s*\))?\s*===?\s*["']function["']\s*&&\s*define\s*\.\s*amd/g,defineStringCheckRegExp:/typeof\s+define\s*===?\s*["']function["']\s*&&\s*define\s*\[\s*["']amd["']\s*\]/g,defineTypeFirstCheckRegExp:/\s*["']function["']\s*==(=?)\s*typeof\s+define\s*&&\s*define\s*\.\s*amd/g,defineJQueryRegExp:/typeof\s+define\s*===?\s*["']function["']\s*&&\s*define\s*\.\s*amd\s*&&\s*define\s*\.\s*amd\s*\.\s*jQuery/g,defineHasRegExp:/typeof\s+define\s*==(=)?\s*['"]function['"]\s*&&\s*typeof\s+define\.amd\s*==(=)?\s*['"]object['"]\s*&&\s*define\.amd/g,defineTernaryRegExp:/typeof\s+define\s*===?\s*['"]function["']\s*&&\s*define\s*\.\s*amd\s*\?\s*define/,defineExistsRegExp:/\s+typeof\s+define\s*!==?\s*['"]undefined["']\s*/,defineExistsAndAmdRegExp:/typeof\s+define\s*!==?\s*['"]undefined["']\s*&&\s*define\s*\.\s*amd\s*/,amdefineRegExp:/if\s*\(\s*typeof define\s*\!==\s*['"]function['"]\s*\)\s*\{\s*[^\{\}]+amdefine[^\{\}]+\}/g,removeStrict:function(e,n){return n.useStrict?e:e.replace(pragma.useStrictRegExp,"$1")},namespace:function(e,n,i){return n&&(e=e.replace(pragma.configRegExp,"$1"+n+".$2$3("),e=(e=(e=(e=(e=(e=(e=(e=(e=parse.renameNamespace(e,n)).replace(pragma.defineTernaryRegExp,"typeof "+n+".define === 'function' && "+n+".define.amd ? "+n+".define")).replace(pragma.defineJQueryRegExp,"typeof "+n+".define === 'function' && "+n+".define.amd && "+n+".define.amd.jQuery")).replace(pragma.defineHasRegExp,"typeof "+n+".define === 'function' && typeof "+n+".define.amd === 'object' && "+n+".define.amd")).replace(pragma.defineExistsAndAmdRegExp,"typeof "+n+".define !== 'undefined' && "+n+".define.amd")).replace(pragma.defineCheckRegExp,"typeof "+n+".define === 'function' && "+n+".define.amd")).replace(pragma.defineStringCheckRegExp,"typeof "+n+".define === 'function' && "+n+".define['amd']")).replace(pragma.defineTypeFirstCheckRegExp,"'function' === typeof "+n+".define && "+n+".define.amd")).replace(pragma.defineExistsRegExp,"typeof "+n+".define !== 'undefined'"),pragma.apiDefRegExp.test(e)&&-1===e.indexOf("if (!"+n+" || !"+n+".requirejs)")&&(e="var "+n+";(function () { if (!"+n+" || !"+n+".requirejs) {\nif (!"+n+") { "+n+" = {}; } else { require = "+n+"; }\n"+e+"\n"+n+".requirejs = requirejs;"+n+".require = require;"+n+".define = define;\n}\n}());"),pragma.nsWrapRegExp.test(e)&&(e=e.replace(pragma.nsWrapRegExp,""),e="(function () {\nvar require = "+n+".require,requirejs = "+n+".requirejs,define = "+n+".define;\n"+e+"\n}());")),e},process:function(fileName,fileContents,config,onLifecycleName,pluginCollector){var foundIndex=-1,startIndex=0,lineEndIndex,conditionLine,matches,type,marker,condition,isTrue,endRegExp,endMatches,endMarkerIndex,shouldInclude,startLength,lifecycleHas,deps,i,dep,moduleName,collectorMod,lifecyclePragmas,pragmas=config.pragmas,hasConfig=config.has,kwArgs=pragmas;if(onLifecycleName&&(lifecyclePragmas=config["pragmas"+onLifecycleName],lifecycleHas=config["has"+onLifecycleName],lifecyclePragmas&&(pragmas=create(pragmas||{},lifecyclePragmas)),lifecycleHas&&(hasConfig=create(hasConfig||{},lifecycleHas))),hasConfig&&(fileContents=fileContents.replace(pragma.hasRegExp,function(e,n){return hasConfig.hasOwnProperty(n)?!!hasConfig[n]:e})),!config.skipPragmas)for(;-1!==(foundIndex=fileContents.indexOf("//>>",startIndex));)if(lineEndIndex=fileContents.indexOf("\n",foundIndex),-1===lineEndIndex&&(lineEndIndex=fileContents.length-1),startIndex=lineEndIndex+1,conditionLine=fileContents.substring(foundIndex,lineEndIndex+1),matches=conditionLine.match(pragma.conditionalRegExp),matches){type=matches[1],marker=matches[2],condition=matches[3],isTrue=!1;try{isTrue=!!eval("("+condition+")")}catch(e){throw"Error in file: "+fileName+". Conditional comment: "+conditionLine+" failed with this error: "+e}if(endRegExp=new RegExp("\\/\\/\\>\\>\\s*"+type+"End\\(\\s*['\"]"+marker+"['\"]\\s*\\)","g"),endMatches=endRegExp.exec(fileContents.substring(startIndex,fileContents.length)),!endMatches)throw"Error in file: "+fileName+". Cannot find end marker for conditional comment: "+conditionLine;endMarkerIndex=startIndex+endRegExp.lastIndex-endMatches[0].length,lineEndIndex=fileContents.indexOf("\n",endMarkerIndex),-1===lineEndIndex&&(lineEndIndex=fileContents.length-1),shouldInclude="exclude"===type&&!isTrue||"include"===type&&isTrue,startLength=startIndex-foundIndex,fileContents=fileContents.substring(0,foundIndex)+(shouldInclude?fileContents.substring(startIndex,endMarkerIndex):"")+fileContents.substring(lineEndIndex+1,fileContents.length),startIndex=foundIndex}if(config.optimizeAllPluginResources&&pluginCollector)try{if(deps=parse.findDependencies(fileName,fileContents),deps.length)for(i=0;i<deps.length;i++)dep=deps[i],-1!==dep.indexOf("!")&&(moduleName=dep.split("!")[0],collectorMod=pluginCollector[moduleName],collectorMod||(collectorMod=pluginCollector[moduleName]=[]),collectorMod.push(dep))}catch(e){logger.error("Parse error looking for plugin resources in "+fileName+", skipping.")}return config.keepAmdefine||(fileContents=fileContents.replace(pragma.amdefineRegExp,"")),"OnSave"===onLifecycleName&&config.namespace&&(fileContents=pragma.namespace(fileContents,config.namespace,onLifecycleName)),pragma.removeStrict(fileContents,config)}};return pragma}),define("skylark-rjs/uglifyjs",["skylark-uglifyjs"],function(e){return e}),define("skylark-rjs/source-map",["skylark-sourcemap"],function(e){return e}),define("skylark-rjs/optimize",["./lang","./logger","./parse","./pragma","./uglifyjs","./source-map"],function(e,n,i,r,t,o){"use strict";var a,s=/\@import\s+(url\()?\s*([^);]+)\s*(\))?([\w, ]*)(;)?/gi,l=/\/\*[^\*]*@import[^\*]*\*\//g,u=/\url\(\s*([^\)]+)\s*\)?/g,c=/^\w+:/;o.SourceMapGenerator,o.SourceMapConsumer;function f(e){return"'"!==(e=e.replace(/\s+$/,"")).charAt(0)&&'"'!==e.charAt(0)||(e=e.substring(1,e.length-1)),e}function p(i,r,t,o){return t.replace(u,function(t,a){var s,l,u,p,d=f(a);for(d=d.replace(e.backSlashRegExp,"/"),s=d.charAt(0),l=c.test(d),"/"===s||"#"===s||l?l||n.trace(i+"\n  URL not a relative URL, skipping: "+a):a=o+r+d,u=a.split("/"),p=u.length-1;p>0;p--)"."===u[p]?u.splice(p,1):".."===u[p]&&0!==p&&".."!==u[p-1]&&(u.splice(p-1,2),p-=1);return"url("+u.join("/")+")"})}return a={jsFile:function(e,n,i,r,t){var o=r.env.fs;n||(n=o.readFile(e)),n=a.js(e,n,i,r,t),o.saveUtf8File(i,n)},js:function(e,t,o,s,l){var u,c,f=String(s.optimize).split("."),p=f[0],d="keepLines"===f[1],g="";if(s=s||{},t=r.process(e,t,s,"OnSave",l),p&&"none"!==p){if(!(u=a.optimizers[p]))throw new Error('optimizer with name of "'+p+'" not found for this environment');c=s[p]||{},s.generateSourceMaps&&(c.generateSourceMaps=!!s.generateSourceMaps,c._buildSourceMap=s._buildSourceMap);try{if(s.preserveLicenseComments)try{g=i.getLicenseComments(e,t)}catch(n){throw new Error("Cannot parse file: "+e+" for comments. Skipping it. Error is:\n"+n.toString())}s.generateSourceMaps&&g&&(c.preamble=g,g=""),t=g+u(e,t,o,d,c,s.env.fs),c._buildSourceMap&&c._buildSourceMap!==s._buildSourceMap&&(s._buildSourceMap=c._buildSourceMap)}catch(e){if(s.throwWhen&&s.throwWhen.optimize)throw e;n.error(e)}}else s._buildSourceMap&&(s._buildSourceMap=null);return t},cssFile:function(i,r,t){var o,a,u,c,d=t.env.fs,g=d.readFile(i),m=function i(r,t,o,a,u,c,d){r=r.replace(e.backSlashRegExp,"/");var g=r.lastIndexOf("/"),m=-1!==g?r.substring(0,g+1):"",h=[],x=[],b=d.env.fs;t=t.replace(l,"");o&&","!==o.charAt(o.length-1)&&(o+=",");t=t.replace(s,function(t,s,l,c,g){if(g&&"all"!==g.replace(/^\s\s*/,"").replace(/\s\s*$/,""))return x.push(r),t;if(l=f(l),o&&-1!==o.indexOf(l+","))return t;l=l.replace(e.backSlashRegExp,"/");try{var y,v,E,C="/"===l.charAt(0)?l:m+l,P=b.readFile(C);return u[C]?"":(u[C]=!0,E=i(C,P,o,a,u,!1,d),P=E.fileContents,E.importList.length&&h.push.apply(h,E.importList),E.skippedList.length&&x.push.apply(x,E.skippedList),y=l.lastIndexOf("/"),v=(v=-1!==y?l.substring(0,y+1):"").replace(/^\.\//,""),P=p(l,v,P,a),h.push(C),P)}catch(e){return n.warn(r+"\n  Cannot inline css import, skipping: "+l),t}});a&&c&&(t=p(r,"",t,a));return{importList:h,skippedList:x,fileContents:t}}(i,g,t.cssImportIgnore,t.cssPrefix,{},!0,t),h=m.skippedList.length?g:m.fileContents;m.skippedList.length&&n.warn("Cannot inline @imports for "+i+",\nthe following files had media queries in them:\n"+m.skippedList.join("\n"));try{if(-1===t.optimizeCss.indexOf(".keepComments"))for(o=0;-1!==(o=h.indexOf("/*",o));){if(-1===(a=h.indexOf("*/",o+2)))throw"Improper comment in CSS file: "+i;c=h.substring(o,a),!t.preserveLicenseComments||-1===c.indexOf("license")&&-1===c.indexOf("opyright")&&-1===c.indexOf("(c)")?(h=h.substring(0,o)+h.substring(a+2,h.length),o=0):o=a}h=-1===t.optimizeCss.indexOf(".keepLines")?(h=(h=(h=h.replace(/[\r\n]/g," ")).replace(/\s+/g," ")).replace(/\{\s/g,"{")).replace(/\s\}/g,"}"):(h=h.replace(/(\r\n)+/g,"\r\n")).replace(/(\n)+/g,"\n"),-1===t.optimizeCss.indexOf(".keepWhitespace")&&(h=(h=(h=(h=(h=(h=h.replace(/^[ \t]+/gm,"")).replace(/[ \t]+$/gm,"")).replace(/(;|:|\{|}|,)[ \t]+/g,"$1")).replace(/[ \t]+(\{)/g,"$1")).replace(/([ \t])+/g,"$1")).replace(/^[ \t]*[\r\n]/gm,""))}catch(e){h=g,n.error("Could not optimized CSS file: "+i+", error: "+e)}return d.saveUtf8File(r,h),u="\n"+r.replace(t.dir,"")+"\n----------------\n",m.importList.push(i),u+=m.importList.map(function(e){return e.replace(t.dir,"")}).join("\n"),{importList:m.importList,buildText:u+"\n"}},css:function(e,i){var r,t,o,s,l="",u=[],c=i.dir&&i.removeCombined,f=i.env.fs;if(-1!==i.optimizeCss.indexOf("standard")){if(s=f.getFilteredFileList(e,/\.css$/,!0))for(r=0;r<s.length;r++)t=s[r],n.trace("Optimizing ("+i.optimizeCss+") CSS file: "+t),o=a.cssFile(t,t,i),l+=o.buildText,c&&(o.importList.pop(),u=u.concat(o.importList));c&&u.forEach(function(e){f.exists(e)&&f.deleteFile(e)})}return l},optimizers:{uglify:function(i,r,o,a,s,l){var u,c,f,p={},d=o+".map",g=i&&i.split("/").pop();s=s||{},e.mixin(p,s,!0),s.preamble&&(p.output={preamble:s.preamble}),s.generateSourceMaps&&(o||s._buildSourceMap)&&(p.outSourceMap=g+".map",s._buildSourceMap?(c=JSON.parse(s._buildSourceMap),p.inSourceMap=c):l.exists(d)&&(p.inSourceMap=d,c=JSON.parse(l.readFile(d)))),n.trace("Uglify file: "+i);try{u=t.minify(r,p,g+".src.js"),p.outSourceMap&&u.map?(f=u.map,c||s._buildSourceMap||l.saveFile(o+".src.js",r),r=u.code,s._buildSourceMap?s._buildSourceMap=f:l.saveFile(o+".map",f)):r=u.code}catch(e){var m=e.toString(),h=/SyntaxError/.test(m);throw new Error("Cannot uglify file: "+i+". Skipping it. Error is:\n"+m+(h?"\n\nIf the source uses ES2015 or later syntax, please pass \"optimize: 'none'\" to r.js and use an ES2015+ compatible minifier after running r.js. The included UglifyJS only understands ES5 or earlier syntax.":""))}return r}}}}),define("skylark-rjs/transform",["./esprima","./parse","./logger","./lang"],function(e,n,i,r){"use strict";var t,o=/^([ \t]+)/,a=/\{[\r\n]+([ \t]+)/,s=/^[_A-Za-z]([A-Za-z\d_]*)$/,l={"\n":/\n/g,"\r\n":/\r\n/g};return t={toTransport:function(t,o,a,s,l,u){u=u||{};var c,f,p,d,g=0,m=!1,h=[],x=function(e){return u.useSourceUrl&&(e='eval("'+r.jsEscape(e)+"\\n//# sourceURL="+(0===a.indexOf("/")?"":"/")+a+'");\n'),e};try{c=e.parse(s,{loc:!0})}catch(e){return i.trace("toTransport skipping "+a+": "+e.toString()),s}return n.traverse(c,function(e){var r,o,s,l,u,c,f,p,x=!1;if("VariableDeclarator"===e.type&&e.id&&"define"===e.id.name&&"Identifier"===e.id.type&&!((f=e.init)&&f.callee&&"CallExpression"===f.callee.type&&f.callee.callee&&"Identifier"===f.callee.callee.type&&"require"===f.callee.callee.name&&f.callee.arguments&&1===f.callee.arguments.length&&"Literal"===f.callee.arguments[0].type&&f.callee.arguments[0].value&&-1!==f.callee.arguments[0].value.indexOf("amdefine")))return!1;if((x=t&&"CallExpression"===e.type&&e.callee&&e.callee.object&&"Identifier"===e.callee.object.type&&e.callee.object.name===t&&"Identifier"===e.callee.property.type&&"define"===e.callee.property.name)||n.isDefineNodeWithArgs(e)){if(!(r=e.arguments)||!r.length)return;if(o=r[0],s=o.loc,1===r.length)"Identifier"===o.type?(u=!0,c="empty"):n.isFnExpression(o)?(l=o,u=!0,c="scan"):"ObjectExpression"===o.type?(u=!0,c="skip"):"Literal"===o.type&&"number"==typeof o.value?(u=!0,c="skip"):"UnaryExpression"===o.type&&"-"===o.operator&&o.argument&&"Literal"===o.argument.type&&"number"==typeof o.argument.value?(u=!0,c="skip"):"MemberExpression"===o.type&&o.object&&o.property&&"Identifier"===o.property.type&&(u=!0,c="empty");else if("ArrayExpression"===o.type)u=!0,c="skip";else{if("Literal"!==o.type||"string"!=typeof o.value)return;u=!1,2===r.length&&n.isFnExpression(r[1])?(l=r[1],c="scan"):c="skip"}if((p={foundId:void 0,needsId:u,depAction:c,namespaceExists:x,node:e,defineLoc:e.loc,firstArgLoc:s,factoryNode:l,sourceUrlData:void 0}).needsId){if(d)return i.trace(a+" has more than one anonymous define. May be a built file from another build system like, Ender. Skipping normalization."),h=[],!1;d=p,h.push(p)}else"scan"===c&&((g+=1)>1?m||(h=d?[d]:[],m=!0):h.push(p))}}),h.length?(h.reverse(),f=s.split("\n"),p=function(e,n){var i=e.start.column,r=e.start.line-1,t=f[r];f[r]=t.substring(0,i)+n+t.substring(i,t.length)},h.forEach(function(e){var i,r="",a="";e.needsId&&o&&(r+="'"+o+"',"),"scan"===e.depAction&&(i=n.getAnonDepsFromNode(e.factoryNode),a=i.length?"["+i.map(function(e){return"'"+e+"'"})+"]":"[]",a+=",",e.factoryNode?p(e.factoryNode.loc,a):r+=a),r&&p(e.firstArgLoc,r),t&&!e.namespaceExists&&p(e.defineLoc,t+"."),l&&l(e)}),s=f.join("\n"),x(s)):x(s)},modifyConfig:function(e,i){var r=n.findConfig(e),o=r.config;return o&&(o=i(o))?t.serializeConfig(o,e,r.range[0],r.range[1],{quote:r.quote}):e},serializeConfig:function(e,n,i,r,s){var u,c,f,p,d="",g=n.substring(0,i),m=n.substring(i,r),h=-1===m.indexOf("\r")?"\n":"\r\n",x=g.lastIndexOf("\n");return-1===x&&(x=0),(c=o.exec(g.substring(x+1,i)))&&c[1]&&(d=c[1]),(c=a.exec(m))&&c[1]&&(u=c[1]),u=!u||u.length<d?"  ":u.substring(d.length),p=new RegExp("("+h+")"+u,"g"),f=function(e,n,i){var r=l[i];return e.replace(r,"$&"+n)}(f=t.objectToString(e,{indent:u,lineReturn:h,outDentRegExp:p,quote:s&&s.quote}),d,h),g+f+n.substring(r)},objectToString:function(e,n,i){var o,a,l,u=!0,c="",f=n.lineReturn,p=n.indent,d=n.outDentRegExp,g=n.quote||'"';return l=(i=i||"")+p,null===e?c="null":void 0===e?c="undefined":"number"==typeof e||"boolean"==typeof e?c=e:"string"==typeof e?c=g+r.jsEscape(e)+g:r.isArray(e)?(r.each(e,function(e,i){c+=(0!==i?","+f:"")+l+t.objectToString(e,n,l)}),o="[",a="]"):r.isFunction(e)||r.isRegExp(e)?c=e.toString().replace(d,"$1"):(r.eachProp(e,function(e,i){c+=(u?"":","+f)+l+(s.test(i)?i:g+r.jsEscape(i)+g)+": "+t.objectToString(e,n,l),u=!1}),o="{",a="}"),o&&(c=o+f+c+f+i+a),c}}}),define("skylark-rjs/commonJs",["./parse"],function(e){"use strict";var n={useLog:!0,convertDir:function(e,i,r){var t,o,a,s,l,u=/\.js$/;if(t=r.getFilteredFileList(e,/\w/,!0),e=e.replace(/\\/g,"/"),i=i.replace(/\\/g,"/"),"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),"/"===i.charAt(i.length-1)&&(i=i.substring(0,i.length-1)),t&&t.length)for(o=0;o<t.length;o++)a=t[o],s=a.replace(e,i),u.test(a)?(l=r.readFile(a),l=n.convert(a,l,config),r.saveUtf8File(s,l)):r.copyFile(a,s,!0);else n.useLog&&("convert"===e?console.log("\n\n"+n.convert(i,r.readFile(i),config)):console.log("No files to convert in directory: "+e))},convert:function(n,i){try{var r="",t=e.usesCommonJs(n,i);if(e.usesAmdOrRequireJs(n,i)||!t)return i;(t.dirname||t.filename)&&(r='var __filename = module.uri || "", __dirname = __filename.substring(0, __filename.lastIndexOf("/") + 1); '),i="define(function (require, exports, module) {"+r+i+"\n});\n"}catch(e){return console.log("commonJs.convert: COULD NOT CONVERT: "+n+", so skipping it. Error was: "+e),i}return i}};return n}),define("skylark-rjs/requirePatch",["./pragma","./parse","./lang","./logger","./commonJs","./prim"],function(pragma,parse,lang,logger,commonJs,prim){var allowRun=!0,hasProp=lang.hasProp,falseProp=lang.falseProp,getOwn=lang.getOwn,useStrictRegExp=/['"]use strict['"];/g,absoluteUrlRegExp=/^[\/\\]|^\w:/;return prim.hideResolutionConflict=!0,function(config){if(allowRun){allowRun=!1;var fs=config.env.fs,layer,pluginBuilderRegExp=/(["']?)pluginBuilder(["']?)\s*[=\:]\s*["']([^'"\s]+)["']/,oldNewContext=require.s.newContext,oldDef,exports,module;require._cacheReset=function(){require._cachedRawText={},require._cachedFileContents={},require._cachedDefinesRequireUrls={}},require._cacheReset(),require._isSupportedBuildUrl=function(e){return-1===e.indexOf("://")&&-1===e.indexOf("?")&&0!==e.indexOf("empty:")&&0!==e.indexOf("//")||(layer.ignoredUrls[e]||(-1===e.indexOf("empty:")&&logger.info("Cannot optimize network URL, skipping: "+e),layer.ignoredUrls[e]=!0),!1)},require.s.newContext=function(name){var context=oldNewContext(name),oldEnable=context.enable,moduleProto=context.Module.prototype,oldInit=moduleProto.init,oldCallPlugin=moduleProto.callPlugin;return"_"===name&&(context.nextTick=function(e){e()},context.needFullExec={},context.fullExec={},context.plugins={},context.buildShimExports={},context.makeShimExports=function(e){return context.config.wrapShim?function(){var n="return ";return e.exports&&-1===e.exports.indexOf(".")&&(n+="root."+e.exports+" = "),e.init&&(n+="("+e.init.toString().replace(useStrictRegExp,"")+".apply(this, arguments))"),e.init&&e.exports&&(n+=" || "),e.exports&&(n+=e.exports),n+=";"}:function(){return"(function (global) {\n    return function () {\n        var ret, fn;\n"+(e.init?"       fn = "+e.init.toString().replace(useStrictRegExp,"")+";\n        ret = fn.apply(global, arguments);\n":"")+(e.exports?"        return ret || global."+e.exports+";\n":"        return ret;\n")+"    };\n}(this))"}},context.enable=function(e,n){var i=e.id,r=n&&n.map.id,t=context.needFullExec,o=context.fullExec,a=getOwn(context.registry,i);return a&&!a.defined?r&&getOwn(t,r)&&(t[i]=e):(getOwn(t,i)&&falseProp(o,i)||r&&getOwn(t,r)&&falseProp(o,i))&&context.require.undef(i),oldEnable.apply(context,arguments)},context.load=function(moduleName,url){var contents,pluginBuilderMatch,builderName,shim,shimExports;0===url.indexOf("empty:")&&delete context.urlFetched[url],require._isSupportedBuildUrl(url)?(url=normalizeUrlWithBase(context,moduleName,url),layer.buildPathMap[moduleName]=url,layer.buildFileToModule[url]=moduleName,hasProp(context.plugins,moduleName)&&(context.needFullExec[moduleName]=!0),prim().start(function(){if(!hasProp(require._cachedFileContents,url)||!falseProp(context.needFullExec,moduleName)&&!getOwn(context.fullExec,moduleName))return require._cacheReadAsync(url,void 0,fs).then(function(e){contents=e,!context.config.cjsTranslate||context.config.shim&&lang.hasProp(context.config.shim,moduleName)||(contents=commonJs.convert(url,contents)),context.config.onBuildRead&&(contents=context.config.onBuildRead(moduleName,url,contents)),contents=pragma.process(url,contents,context.config,"OnExecute");try{!layer.existingRequireUrl&&parse.definesRequire(url,contents)&&(layer.existingRequireUrl=url,require._cachedDefinesRequireUrls[url]=!0)}catch(e){throw new Error("Parse error using esprima for file: "+url+"\n"+e)}}).then(function(){return hasProp(context.plugins,moduleName)&&(pluginBuilderMatch=pluginBuilderRegExp.exec(contents))?(builderName=context.makeModuleMap(pluginBuilderMatch[3],context.makeModuleMap(moduleName),null,!0).id,require._cacheReadAsync(context.nameToUrl(builderName),void 0,fs)):contents}).then(function(e){contents=e;try{falseProp(context.needFullExec,moduleName)&&(contents=parse(moduleName,url,contents,{insertNeedsDefine:!0,has:context.config.has,findNestedDependencies:context.config.findNestedDependencies}))}catch(e){throw new Error("Parse error using esprima for file: "+url+"\n"+e)}require._cachedFileContents[url]=contents});contents=require._cachedFileContents[url],!layer.existingRequireUrl&&require._cachedDefinesRequireUrls[url]&&(layer.existingRequireUrl=url)}).then(function(){contents&&eval(contents);try{getOwn(context.needFullExec,moduleName)&&(shim=getOwn(context.config.shim,moduleName),shim&&shim.exports&&(shimExports=eval(shim.exports),void 0!==shimExports&&(context.buildShimExports[moduleName]=shimExports))),context.completeLoad(moduleName)}catch(e){throw e.moduleTree||(e.moduleTree=[]),e.moduleTree.push(moduleName),e}}).then(null,function(e){throw e.fileName||(e.fileName=url),e}).end()):context.completeLoad(moduleName)},context.execCb=function(e,n,i,exports){var r=getOwn(layer.context.buildShimExports,e);return r||(n.__requireJsBuild||getOwn(layer.context.needFullExec,e)?n.apply(exports,i):void 0)},moduleProto.init=function(e){return context.needFullExec[this.map.id]&&lang.each(e,lang.bind(this,function(e){"string"==typeof e&&(e=context.makeModuleMap(e,this.map.isDefine?this.map:this.map.parentMap,!1,!0)),context.fullExec[e.id]||context.require.undef(e.id)})),oldInit.apply(this,arguments)},moduleProto.callPlugin=function(){var e=this.map,n=context.makeModuleMap(e.prefix),i=n.id,r=getOwn(context.registry,i);return context.plugins[i]=!0,context.needFullExec[i]=e,!falseProp(context.fullExec,i)||r&&!r.defined||context.require.undef(n.id),oldCallPlugin.apply(this,arguments)}),context},delete require.s.contexts._,require._buildReset=function(){var e=require.s.contexts._;return delete require.s.contexts._,require({}),layer=require._layer={buildPathMap:{},buildFileToModule:{},buildFilePaths:[],pathAdded:{},modulesWithNames:{},needsDefine:{},existingRequireUrl:"",ignoredUrls:{},context:require.s.contexts._},e},require._buildReset(),oldDef=define,define=function(e){return"string"==typeof e&&falseProp(layer.needsDefine,e)&&(layer.modulesWithNames[e]=!0),oldDef.apply(require,arguments)},define.amd=oldDef.amd,require._readFile=fs.readFile,require._fileExists=function(e){return fs.exists(e)},require.onResourceLoad=function(e,n){var i,r=n.id;e.plugins&&lang.hasProp(e.plugins,r)&&lang.eachProp(e.needFullExec,function(n,i){if(!0!==n&&n.prefix===r&&n.unnormalized){var t=e.makeModuleMap(n.originalName,n.parentMap);e.needFullExec[t.id]=t}}),e.needFullExec&&getOwn(e.needFullExec,r)&&(e.fullExec[r]=n),n.prefix?falseProp(layer.pathAdded,r)&&(layer.buildFilePaths.push(r),layer.buildPathMap[r]=r,layer.buildFileToModule[r]=r,layer.modulesWithNames[r]=!0,layer.pathAdded[r]=!0):n.url&&require._isSupportedBuildUrl(n.url)&&(i=normalizeUrlWithBase(e,r,n.url),!layer.pathAdded[i]&&getOwn(layer.buildPathMap,r)&&(layer.buildFilePaths.push(i),layer.pathAdded[i]=!0))},require.needsDefine=function(e){layer.needsDefine[e]=!0}}function normalizeUrlWithBase(e,n,i){return require.jsExtRegExp.test(n)&&!absoluteUrlRegExp.test(i)&&(i=(e.config.dir||e.config.dirBaseUrl)+i),i}}}),define("skylark-rjs/build",["./rjs","./lang","./prim","./logger","./parse","./optimize","./pragma","./transform","./requirePatch","./commonJs","./source-map"],function(require,lang,prim,logger,parse,optimize,pragma,transform,requirePatch,commonJs,sourceMap){"use strict";var build,SourceMapGenerator=sourceMap.SourceMapGenerator,hasProp=lang.hasProp,getOwn=lang.getOwn,falseProp=lang.falseProp,endsWithSemiColonRegExp=/;\s*$/,endsWithSlashRegExp=/[\/\\]$/,resourceIsModuleIdRegExp=/^[\w\/\\\.]+$/,deepCopyProps={layer:!0};function copyConfig(e){return lang.deeplikeCopy(e,deepCopyProps)}function makeBuildBaseConfig(e){return{appDir:"",pragmas:{},paths:{},optimize:"uglify",optimizeCss:"standard.keepLines.keepWhitespace",inlineText:!0,isBuild:!0,optimizeAllPluginResources:!1,findNestedDependencies:!1,preserveLicenseComments:!0,writeBuildTxt:!0,waitSeconds:30,dirExclusionRegExp:e.dirExclusionRegExp,_buildPathToModuleIndex:{}}}function addSemiColon(e,n){return n.skipSemiColonInsertion||endsWithSemiColonRegExp.test(e)?e:e+";"}function endsWithSlash(e){return"/"!==e.charAt(e.length-1)&&(e+="/"),e}function endsWithNewLine(e){return"\n"!==e.charAt(e.length-1)&&(e+="\n"),e}function makeWriteFile(e,n){function i(e,n){logger.trace("Saving plugin-optimized file: "+e),file.saveUtf8File(e,n)}return i.asModule=function(r,t,o){i(t,build.toTransport(e,r,t,o,n))},i}function appendToFileContents(e,n,i,r,module,t){var o,a,s,l,u,c,f,p;if(t){for(o=r.out?r.baseUrl:module&&module._buildPath?module._buildPath:"",1===(f=i.split("!")).length?a=build.makeRelativeFilePath(o,i):(l=f.shift(),s=f.join("!"),a=resourceIsModuleIdRegExp.test(s)?build.makeRelativeFilePath(o,require.toUrl(s))+"!"+l:i),u=e.split("\n").length-1,c=n.split("\n").length,p=1;p<=c;p+=1)t.addMapping({generated:{line:u+p,column:0},original:{line:p,column:0},source:a});t.setSourceContent(a,n)}return e+=n}function stringDotToObj(e,n,i){var r=n.split(".");r.forEach(function(n,t){t===r.length-1?e[n]=i:(falseProp(e,n)&&(e[n]={}),e=e[n])})}function mixConfig(e,n,i){var r,t,o,a;for(r in n)hasProp(n,r)&&(t=n[r],o=lang.isArray(t),"object"!=typeof t||!t||o||lang.isFunction(t)||lang.isRegExp(t)?o?i||(a=e[r],lang.isArray(a)?e[r]=a.concat(t):e[r]=t):e[r]=t:"map"===r?(e.map||(e.map={}),lang.deepMix(e.map,n.map)):e[r]=lang.mixin({},e[r],t,!0));lang.hasProp(e,"logLevel")&&logger.logLevel(e.logLevel)}function flattenWrapFile(e,n,i){var r=e.wrap,t=n+"File",o="__"+n+"Map",a=e.env.fs;if("string"!=typeof r[n]&&r[t])r[n]="","string"==typeof r[t]&&(r[t]=[r[t]]),r[o]=[],r[t].forEach(function(e){var t=build.makeAbsPath(e,i,a),s=endsWithNewLine(a.readFile(t));r[o].push(function(e,n,i){return appendToFileContents(e,s,t,n,null,i)}),r[n]+=s});else if(null===r[n]||void 0===r[n])r[n]="";else{if("string"!=typeof r[n])throw new Error("wrap."+n+" or wrap."+t+" malformed");r[n]=endsWithNewLine(r[n]),r[o]=[function(e,t,o){var s=build.makeAbsPath("config-wrap-"+n+"-default.js",i,a);return appendToFileContents(e,r[n],s,t,null,o)}]}}function normalizeWrapConfig(e,n){var i=e.env.fs;try{e.wrap&&(!0===e.wrap?e.wrap={start:"(function () {\n",end:"}());",__startMap:[function(e,r,t){return appendToFileContents(e,"(function () {\n",build.makeAbsPath("config-wrap-start-default.js",n,i),r,null,t)}],__endMap:[function(e,r,t){return appendToFileContents(e,"}());",build.makeAbsPath("config-wrap-end-default.js",n,i),r,null,t)}]}:(flattenWrapFile(e,"start",n),flattenWrapFile(e,"end",n)))}catch(e){throw new Error("Malformed wrap config: "+e.toString())}}return prim.nextTick=function(e){e()},require._cacheReadAsync=function(e,n,i){var r;return lang.hasProp(require._cachedRawText,e)?((r=prim()).resolve(require._cachedRawText[e]),r.promise):i.readFileAsync(e,n).then(function(n){return require._cachedRawText[e]=n,n})},build=function(e){var n,i,r,t,o,a,s,l,u,c=/( {4}at[^\n]+)\n/;return prim().start(function(){if(!e||lang.isArray(e)){if(!e||e.length<1)return void logger.error("build.js buildProfile.js\nwhere buildProfile.js is the name of the build file (see example.build.js for hints on how to make a build file).");-1===e[0].indexOf("=")&&(n=e[0],e.splice(0,1)),(i=build.convertArrayToObject(e)).buildFile=n}else i=e;return build._run(i)}).then(null,function(n){var i;if(r=n.toString(),a=n.moduleTree,(o=c.exec(r))&&(r+=r.substring(0,o.index+o[0].length+1)),a&&a.length>0){for(r+="\nIn module tree:\n",s=a.length-1;s>-1;s--)if(u=a[s]){for(l=a.length-s;l>-1;l--)r+="  ";r+=u+"\n"}logger.error(r)}throw t=n.stack,"string"==typeof e&&-1!==e.indexOf("stacktrace=true")?r+="\n"+t:!o&&t&&(o=c.exec(t))&&(r+="\n"+o[0]||""),(i=new Error(r)).originalError=n,i})},build._run=function(e){var n,i,r,t,o,a,s,l,u,c,f,p,d,g,m,h,x,b,y={},v="",E={};return prim().start(function(){var i;if(a=build.createConfig(e),r=a.paths,b=a.env.fs,requirePatch(a),a.dir&&!a.keepBuildDir&&b.exists(a.dir)&&b.deleteFile(a.dir),!a.out&&!a.cssIn)if(b.copyDir(a.appDir||a.baseUrl,a.dir,/\w/,!0),n={},a.appDir)for(i in r)hasProp(r,i)&&(n[i]=r[i].replace(a.appDir,a.dir));else for(i in r)hasProp(r,i)&&(0===r[i].indexOf(a.baseUrl)?n[i]=r[i].replace(a.baseUrl,a.dirBaseUrl):(n[i]="empty:"===r[i]?"empty:":i,0!==(l=r[i]).indexOf("/")&&-1===l.indexOf(":")&&(l=a.baseUrl+l),c=a.dirBaseUrl+n[i],"empty:"!==l&&(b.exists(l)&&b.isDirectory(l)?b.copyDir(l,c,/\w/,!0):(l+=".js",c+=".js",b.copyFile(l,c)))));require({baseUrl:a.baseUrl,paths:r,packagePaths:a.packagePaths,packages:a.packages}),u=require.s.contexts._,(s=a.modules)&&s.forEach(function(module){if(module.name&&(module._sourcePath=u.nameToUrl(module.name),!(b.exists(module._sourcePath)||module.create||-1!==module.name.indexOf("!")||a.rawText&&lang.hasProp(a.rawText,module.name))))throw new Error("ERROR: module path does not exist: "+module._sourcePath+" for module named: "+module.name+". Path is relative to: "+b.absPath("."))}),a.out?(require(a),a.cssIn||(a.modules[0]._buildPath="function"==typeof a.out?"FUNCTION":a.out)):a.cssIn||(o={baseUrl:a.dirBaseUrl,paths:n},lang.mixin(o,a),require(o),s&&s.forEach(function(module){if(module.name){if(module._buildPath=u.nameToUrl(module.name,null),module._buildPath===module._sourcePath&&!a.allowSourceOverwrites)throw new Error("Module ID '"+module.name+"' has a source path that is same as output path: "+module._sourcePath+". Stopping, config is malformed.");module.create||a.rawText&&lang.hasProp(a.rawText,module.name)||b.copyFile(module._sourcePath,module._buildPath)}})),a.optimizeCss&&"none"!==a.optimizeCss&&a.dir&&(v+=optimize.css(a.dir,a))}).then(function(){o=copyConfig(require.s.contexts._.config)}).then(function(){var e=[];if(s)return e=s.map(function(module,e){return function(){return a._buildPathToModuleIndex[b.normalize(module._buildPath)]=e,build.traceDependencies(module,a,o).then(function(e){module.layer=e})}}),prim.serial(e)}).then(function(){var e;if(s)return e=s.map(function(module){return function(){if(module.exclude)return module.excludeLayers=[],prim.serial(module.exclude.map(function(e,n){return function(){var i=build.findBuildModule(e,s);if(!i)return build.traceDependencies({name:e},a,o).then(function(e){module.excludeLayers[n]={layer:e}});module.excludeLayers[n]=i}}))}}),prim.serial(e)}).then(function(){if(s)return prim.serial(s.map(function(module){return function(){return module.exclude&&module.exclude.forEach(function(e,n){var i=module.excludeLayers[n].layer,r=i.buildFileToModule;i.buildFilePaths.forEach(function(e){build.removeModulePath(r[e],e,module.layer)})}),module.excludeShallow&&module.excludeShallow.forEach(function(e){var n=getOwn(module.layer.buildPathMap,e);n&&build.removeModulePath(e,n,module.layer)}),build.flattenModule(module,module.layer,a).then(function(e){var n,i;"FUNCTION"===module._buildPath?(module._buildText=e.text,module._buildSourceMap=e.sourceMap):(n=e.text,e.sourceMap&&(i=(i=module._buildPath.split("/")).pop(),n+="\n//# sourceMappingURL="+i+".map",b.saveUtf8File(module._buildPath+".map",e.sourceMap)),b.saveUtf8File(module._buildPath+"-temp",n)),v+=e.buildText})}}))}).then(function(){var e,n,r={},o=a.bundlesConfigOutFile;if(s&&(s.forEach(function(module){var e,n=module._buildPath;if("FUNCTION"!==n){if(b.exists(n)&&b.deleteFile(n),b.renameFile(n+"-temp",n),o){e=r[module.name]=[];var i=b.readFile(n),t={};t[module.name]=!0;var l=parse.getAllNamedDefines(i,t);e.push.apply(e,l)}a.removeCombined&&!a.out&&module.layer.buildFilePaths.forEach(function(e){var n=s.some(function(n){return n._buildPath===e}),i=build.makeRelativeFilePath(a.dir,e);b.exists(e)&&!n&&0!==i.indexOf("..")&&b.deleteFile(e)})}a.onModuleBundleComplete&&a.onModuleBundleComplete(module.onCompleteData)}),o)){var l=b.readFile(o);l=transform.modifyConfig(l,function(e){return e.bundles||(e.bundles={}),lang.eachProp(r,function(n,i){e.bundles[i]=n}),e}),b.saveUtf8File(o,l)}if(a.removeCombined&&!a.out&&a.dir&&b.deleteEmptyDirs(a.dir),a.out&&!a.cssIn)"FUNCTION"===(i=a.modules[0]._buildPath)?(n=a.modules[0]._buildSourceMap,a._buildSourceMap=n,a.modules[0]._buildText=optimize.js((a.modules[0].name||a.modules[0].include[0]||i)+".build.js",a.modules[0]._buildText,null,a),a._buildSourceMap&&a._buildSourceMap!==n&&(a.modules[0]._buildSourceMap=a._buildSourceMap,a._buildSourceMap=null)):optimize.jsFile(i,null,i,a);else if(!a.cssIn){for(e in b.getFilteredFileList(a.dir,/\.js$/,!0).forEach(function(n){var i,r,t;e=(e=n.replace(a.dir,"")).substring(0,e.length-3),((t=0===(t=getOwn(a._buildPathToModuleIndex,n))||t>0?t:-1)>-1||!a.skipDirOptimize||"all"===a.normalizeDirDefines||a.cjsTranslate)&&(x=b.readFile(n),!a.cjsTranslate||a.shim&&lang.hasProp(a.shim,e)||(x=commonJs.convert(n,x)),-1===t&&(a.onBuildRead&&(x=a.onBuildRead(e,n,x)),"all"===a.normalizeDirDefines&&(x=build.toTransport(a.namespace,null,n,x)),a.onBuildWrite&&(x=a.onBuildWrite(e,n,x))),r=t>-1?a.modules[t].override:null,i=r?build.createOverrideConfig(a,r):a,(t>-1||!a.skipDirOptimize)&&optimize.jsFile(n,x,n,i,E))}),d=require.s.contexts._,E)if(hasProp(E,e))for(p=d.makeModuleMap(e),g=E[e],t=0;t<g.length;t++){if(m=g[t],f=d.makeModuleMap(m,p),falseProp(d.plugins,f.prefix)){if(d.plugins[f.prefix]=!0,!b.exists(require.toUrl(f.prefix+".js")))continue;d.require([f.prefix]),f=d.makeModuleMap(m,p)}falseProp(y,f.id)&&((h=getOwn(d.defined,f.prefix))&&h.writeFile&&h.writeFile(f.prefix,f.name,require,makeWriteFile(a.namespace),d.config),y[f.id]=!0)}a.writeBuildTxt&&b.saveUtf8File(a.dir+"build.txt",v)}return a.cssIn&&(v+=optimize.cssFile(a.cssIn,a.out,a).buildText),"function"==typeof a.out&&a.out(a.modules[0]._buildText,a.modules[0]._buildSourceMap),v?(logger.info(v),v):""})},build.objProps={paths:!0,wrap:!0,pragmas:!0,pragmasOnSave:!0,has:!0,hasOnSave:!0,uglify:!0,uglify2:!0,closure:!0,map:!0,throwWhen:!0,rawText:!0},build.hasDotPropMatch=function(e){var n,i=e.indexOf(".");return-1!==i&&(n=e.substring(0,i),hasProp(build.objProps,n))},build.convertArrayToObject=function(e){var n,i,r,t={},o={include:!0,exclude:!0,excludeShallow:!0,insertRequire:!0,stubModules:!0,deps:!0,mainConfigFile:!0,"wrap.startFile":!0,"wrap.endFile":!0};for(n=0;n<e.length;n++)separatorI.ndex=e[n].indexOf("="),"true"===(r=e[n].substring(NaN,e[n].length))?r=!0:"false"===r&&(r=!1),i=e[n].substring(0,void 0),getOwn(o,i)&&(r=r.split(",")),build.hasDotPropMatch(i)?stringDotToObj(t,i,r):t[i]=r;return t},build.makeAbsPath=function(e,n,i){return n?(0!==e.indexOf("/")&&-1===e.indexOf(":")&&(e=n+("/"===n.charAt(n.length-1)?"":"/")+e,e=i.normalize(e)),e.replace(lang.backSlashRegExp,"/")):e},build.makeAbsObject=function(e,n,i,r){var t,o;if(n)for(t=0;t<e.length;t++)o=e[t],hasProp(n,o)&&"string"==typeof n[o]&&(n[o]=build.makeAbsPath(n[o],i,r))},build.makeAbsConfig=function(e,n,i){var r,t,o;for(r=["appDir","dir","baseUrl"],o=0;o<r.length;o++)getOwn(e,t=r[o])&&("baseUrl"===t?(e.originalBaseUrl=e.baseUrl,e.appDir?e.baseUrl=build.makeAbsPath(e.originalBaseUrl,e.appDir,i):e.baseUrl=build.makeAbsPath(e[t],n,i)):e[t]=build.makeAbsPath(e[t],n,i),e[t]=endsWithSlash(e[t]));build.makeAbsObject("stdout"===e.out?["cssIn"]:["out","cssIn"],e,n,i),build.makeAbsObject(["startFile","endFile"],e.wrap,n,i),build.makeAbsObject(["externExportsPath"],e.closure,n,i)},build.makeRelativeFilePath=function(e,n,i){var r,t,o,a,s,l,u=e.split("/"),c=endsWithSlashRegExp.test(n),f=[];for(n=i.normalize(n),c&&!endsWithSlashRegExp.test(n)&&(n+="/"),s=n.split("/"),l=s.pop(),u.pop(),a=u.length,r=0;r<a&&u[r]===s[r];r+=1);for(o=s.slice(r),t=a-r,r=0;r>-1&&r<t;r+=1)f.push("..");return f.join("/")+(f.length?"/":"")+o.join("/")+(o.length?"/":"")+l},build.nestedMix={paths:!0,has:!0,hasOnSave:!0,pragmas:!0,pragmasOnSave:!0},build.createConfig=function(cfg){var fs=cfg.env.fs,buildFileContents,buildFileConfig,mainConfig,mainConfigFile,mainConfigPath,buildFile,absFilePath,config={},buildBaseConfig=makeBuildBaseConfig(fs);if(absFilePath=fs.absPath("."),build.makeAbsConfig(cfg,absFilePath,fs),build.makeAbsConfig(buildBaseConfig,absFilePath,fs),lang.mixin(config,buildBaseConfig),lang.mixin(config,cfg,!0),lang.hasProp(config,"logLevel")&&logger.logLevel(config.logLevel),config.buildFile){if(buildFile=fs.absPath(config.buildFile),!fs.exists(buildFile))throw new Error("ERROR: build file does not exist: "+buildFile);absFilePath=config.baseUrl=fs.absPath(fs.parent(buildFile)),buildFileContents=fs.readFile(buildFile);try{buildFileContents=buildFileContents.replace(/\/\/\#[^\n\r]+[\n\r]*$/,"").trim().replace(/;$/,""),buildFileConfig=eval("("+buildFileContents+")"),build.makeAbsConfig(buildFileConfig,absFilePath,fs),mixConfig(config,buildFileConfig)}catch(e){throw new Error("Build file "+buildFile+" is malformed: "+e)}}if(mainConfigFile=config.mainConfigFile||buildFileConfig&&buildFileConfig.mainConfigFile,mainConfigFile&&("string"==typeof mainConfigFile&&(mainConfigFile=[mainConfigFile]),mainConfigFile.forEach(function(e){if(e=build.makeAbsPath(e,absFilePath,fs),!fs.exists(e))throw new Error(e+" does not exist.");try{mainConfig=parse.findConfig(fs.readFile(e)).config}catch(n){throw new Error("The config in mainConfigFile "+e+" cannot be used because it cannot be evaluated correctly while running in the optimizer. Try only using a config that is also valid JSON, or do not use mainConfigFile and instead copy the config values needed into a build file or command line arguments given to the optimizer.\nSource error from parsing: "+e+": "+n)}mainConfig&&(mainConfigPath=e.substring(0,e.lastIndexOf("/")),config.appDir&&!mainConfig.appDir&&(mainConfig.appDir=config.appDir),mainConfig.baseUrl||(mainConfig.baseUrl=mainConfigPath),build.makeAbsConfig(mainConfig,mainConfigPath,fs),mixConfig(config,mainConfig))})),buildFileConfig&&mixConfig(config,buildFileConfig,!0),mixConfig(config,cfg,!0),lang.eachProp(config.paths,function(e,n){if(lang.isArray(e))throw new Error("paths fallback not supported in optimizer. Please provide a build config path override for "+n);config.paths[n]=build.makeAbsPath(e,config.baseUrl,fs)}),hasProp(config,"baseUrl")){if(config.appDir){if(!config.originalBaseUrl)throw new Error("Please set a baseUrl in the build config");config.dirBaseUrl=build.makeAbsPath(config.originalBaseUrl,config.dir,fs)}else config.dirBaseUrl=config.dir||config.baseUrl;config.dirBaseUrl=endsWithSlash(config.dirBaseUrl)}if(config.bundlesConfigOutFile){if(!config.dir)throw new Error('bundlesConfigOutFile can only be used with optimizations that use "dir".');config.bundlesConfigOutFile=build.makeAbsPath(config.bundlesConfigOutFile,config.dir,fs)}if(config.main)throw new Error('"main" passed as an option, but the supported option is called "name".');if(config.out&&!config.name&&!config.modules&&!config.include&&!config.cssIn)throw new Error('Missing either a "name", "include" or "modules" option');if(config.cssIn){if(config.dir||config.appDir)throw new Error('cssIn is only for the output of single file CSS optimizations and is not compatible with "dir" or "appDir" configuration.');if(!config.out)throw new Error('"out" option missing.')}if(config.cssIn||config.baseUrl||(config.baseUrl="./"),!config.out&&!config.dir)throw new Error('Missing either an "out" or "dir" config value. If using "appDir" for a full project optimization, use "dir". If you want to optimize to one file, use "out".');if(config.appDir&&config.out)throw new Error('"appDir" is not compatible with "out". Use "dir" instead. appDir is used to copy whole projects, where "out" with "baseUrl" is used to just optimize to one file.');if(config.out&&config.dir)throw new Error('The "out" and "dir" options are incompatible. Use "out" if you are targeting a single file for optimization, and "dir" if you want the appDir or baseUrl directories optimized.');if(config.dir&&!config.allowSourceOverwrites&&(config.dir===config.baseUrl||config.dir===config.appDir||config.baseUrl&&0!==build.makeRelativeFilePath(config.dir,config.baseUrl,fs).indexOf("..")||config.appDir&&0!==build.makeRelativeFilePath(config.dir,config.appDir,fs).indexOf("..")))throw new Error('"dir" is set to a parent or same directory as "appDir" or "baseUrl". This can result in the deletion of source code. Stopping. If you want to allow possible overwriting of source code, set "allowSourceOverwrites" to true in the build config, but do so at your own risk. In that case, you may want to also set "keepBuildDir" to true.');if(config.insertRequire&&!lang.isArray(config.insertRequire))throw new Error("insertRequire should be a list of module IDs to insert in to a require([]) call.");if("uglify2"===config.optimize&&(config.optimize="uglify"),config.uglify2&&(config.uglify=config.uglify2,delete config.uglify2),config.generateSourceMaps){if(config.preserveLicenseComments&&"none"!==config.optimize&&"uglify"!==config.optimize)throw new Error("Cannot use preserveLicenseComments and generateSourceMaps together, unless optimize is set to 'uglify'. Either explicitly set preserveLicenseComments to false (default is true) or turn off generateSourceMaps. If you want source maps with license comments, see: http://requirejs.org/docs/errors.html#sourcemapcomments");if("none"!==config.optimize&&"closure"!==config.optimize&&"uglify"!==config.optimize)throw new Error('optimize: "'+config.optimize+'" does not support generateSourceMaps.')}if(!config.name&&!config.include||config.modules){if(config.modules&&config.out)throw new Error('If the "modules" option is used, then there should be a "dir" option set and "out" should not be used since "out" is only for single file optimization output.');if(config.modules&&config.name)throw new Error('"name" and "modules" options are incompatible. Either use "name" if doing a single file optimization, or "modules" if you want to target more than one file for optimization.')}else config.modules=[{name:config.name,out:config.out,create:config.create,include:config.include,exclude:config.exclude,excludeShallow:config.excludeShallow,insertRequire:config.insertRequire,stubModules:config.stubModules}],delete config.stubModules;if(config.out&&!config.cssIn&&(cfg.optimizeCss||(config.optimizeCss="none")),config.cssPrefix?config.cssPrefix=endsWithSlash(config.cssPrefix):config.cssPrefix="",config.modules&&config.modules.length&&config.modules.forEach(function(e){if(lang.isArray(e)||"string"==typeof e||!e)throw new Error("modules config item is malformed: it should be an object with a 'name' property.");config.stubModules&&(e.stubModules=config.stubModules.concat(e.stubModules||[])),e.stubModules&&(e.stubModules._byName={},e.stubModules.forEach(function(n){e.stubModules._byName[n]=!0})),"string"==typeof e.include&&(e.include=[e.include]),e.override&&normalizeWrapConfig(e.override,absFilePath)}),normalizeWrapConfig(config,absFilePath),config.context)throw new Error('The build argument "context" is not supported in a build. It should only be used in web pages.');return hasProp(config,"normalizeDirDefines")||("none"===config.optimize||config.skipDirOptimize?config.normalizeDirDefines="skip":config.normalizeDirDefines="all"),hasProp(config,"fileExclusionRegExp")?"string"==typeof config.fileExclusionRegExp?fs.exclusionRegExp=new RegExp(config.fileExclusionRegExp):fs.exclusionRegExp=config.fileExclusionRegExp:hasProp(config,"dirExclusionRegExp")&&(fs.exclusionRegExp=config.dirExclusionRegExp),config.deps&&(config._depsInclude=config.deps),delete config.deps,delete config.jQuery,delete config.enforceDefine,delete config.urlArgs,config},build.findBuildModule=function(e,n){var i,module;for(i=0;i<n.length;i++)if((module=n[i]).name===e)return module;return null},build.removeModulePath=function(module,e,n){var i=n.buildFilePaths.indexOf(e);-1!==i&&n.buildFilePaths.splice(i,1)},build.traceDependencies=function(module,e,n){var i,r,t,o,a,s={rhino:!0,node:!0,xpconnect:!0},l=prim();function u(n){var i=!1;if(s[e.env.name])try{build.checkForErrors(o,t)}catch(e){i=!0,l.reject(e)}i||l.resolve(n)}return require._buildReset(),t=require._layer,o=t.context,n&&require(copyConfig(n)),logger.trace("\nTracing dependencies for: "+(module.name||("function"==typeof module.out?"FUNCTION":module.out))),i=(i=e._depsInclude||[]).concat(module.name&&!module.create?[module.name]:[]),module.include&&(i=i.concat(module.include)),module.override&&(r=n?build.createOverrideConfig(n,module.override):copyConfig(module.override),require(r)),(a=require.s.contexts._.config.rawText)&&lang.eachProp(a,function(e,n){var i=require.toUrl(n)+".js";require._cachedRawText[i]=e}),l.reject.__requireJsBuild=!0,u.__requireJsBuild=!0,require(i,u,l.reject),s[e.env.name]&&build.checkForErrors(o,t),l.promise.then(function(){return module.override&&n&&require(copyConfig(n)),build.checkForErrors(o,t),t})},build.checkForErrors=function(e,n){var i,r,t,o,a,s,l="",u={},c=[],f=[],p={},d={},g=!1,m=!1,h=e.defined,x=e.registry;function b(e,n,i){n&&(i||f.push(e),p[n]?(g=!0,d[n]||(d[n]=[],d[n].push(p[n])),d[n].push(e)):i||(p[n]=e))}for(i in x)hasProp(x,i)&&0!==i.indexOf("_@r")&&(m=!0,t=getOwn(x,i),o=i.split("!"),a=o[0],-1===i.indexOf("_unnormalized")&&t&&t.enabled&&b(i,t.map.url),!hasProp(n.modulesWithNames,i)&&o.length>1&&(falseProp(u,a)&&c.push(a),(s=u[a])||(s=u[a]=[]),s.push(i+(t.error?": "+t.error:""))));if(m)for(i in h)hasProp(h,i)&&-1===i.indexOf("!")&&b(i,require.toUrl(i)+".js",!0);if(f.length||c.length){if(c.length&&(l+="Loader plugin"+(1===c.length?"":"s")+" did not call the load callback in the build:\n"+c.map(function(e){var n=u[e];return e+":\n  "+n.join("\n  ")}).join("\n")+"\n"),l+="Module loading did not complete for: "+f.join(", "),g)for(r in l+="\nThe following modules share the same URL. This could be a misconfiguration if that URL only has one anonymous module in it:",d)hasProp(d,r)&&(l+="\n"+r+": "+d[r].join(", "));throw new Error(l)}},build.createOverrideConfig=function(e,n){var i=copyConfig(e),r=copyConfig(n);return lang.eachProp(r,function(r,t){hasProp(build.objProps,t)?(i[t]={},lang.mixin(i[t],e[t],!0),lang.mixin(i[t],n[t],!0)):i[t]=n[t]}),i},build.flattenModule=function(module,e,n){var i,r,t,o="",a=n.env.fs;return prim().start(function(){var s,l,u,c,f,p,d,g,m,h,x,b,y=e.context,v=[],E={},C={};return module.override&&(n=build.createOverrideConfig(n,module.override)),h=n.namespace||"",x=h?h+".":"",b=module.stubModules&&module.stubModules._byName||{},module.onCompleteData={name:module.name,path:n.dir?module._buildPath.replace(n.dir,""):module._buildPath,included:[]},o+="\n"+module.onCompleteData.path+"\n----------------\n",e.existingRequireUrl&&-1!==(s=e.buildFilePaths.indexOf(e.existingRequireUrl))&&(e.buildFilePaths.splice(s,1),e.buildFilePaths.unshift(e.existingRequireUrl)),n.generateSourceMaps&&(t=n.dir||n.baseUrl,u="FUNCTION"===module._buildPath?(module.name||module.include[0]||"FUNCTION")+".build.js":n.out?module._buildPath.split("/").pop():module._buildPath.replace(t,""),r=new SourceMapGenerator({file:u})),lang.eachProp(e.context.config.pkgs,function(e,n){C[e]=n}),i="",n.wrap&&n.wrap.__startMap&&n.wrap.__startMap.forEach(function(e){i=e(i,n,r)}),prim.serial(e.buildFilePaths.map(function(t){return function(){var s="";return c=e.buildFileToModule[t],p=getOwn(C,c),prim().start(function(){return d=y.makeModuleMap(c),(g=d.prefix&&getOwn(y.defined,d.prefix))?(g.onLayerEnd&&falseProp(E,d.prefix)&&(v.push(g),E[d.prefix]=!0),void(g.write&&((m=function(e){s+="\n"+addSemiColon(e,n),n.onBuildWrite&&(s=n.onBuildWrite(c,t,s))}).asModule=function(i,r){s+="\n"+addSemiColon(build.toTransport(h,i,t,r,e,{useSourceUrl:e.context.config.useSourceUrl}),n),n.onBuildWrite&&(s=n.onBuildWrite(i,t,s))},g.write(d.prefix,d.name,m,{name:module.onCompleteData.name,path:module.onCompleteData.path})))):prim().start(function(){return hasProp(b,c)?hasProp(e.context.plugins,c)?'define({load: function(id){throw new Error("Dynamic load not allowed: " + id);}});':"define({});":require._cacheReadAsync(t,void 0,a)}).then(function(i){var r;l=i,!n.cjsTranslate||n.shim&&lang.hasProp(n.shim,c)||(l=commonJs.convert(t,l)),n.onBuildRead&&(l=n.onBuildRead(c,t,l)),p&&(r=p===parse.getNamedDefine(l)),h&&(l=pragma.namespace(l,h)),l=build.toTransport(h,c,t,l,e,{useSourceUrl:n.useSourceUrl}),p&&!r&&(l=addSemiColon(l,n)+"\n",l+=x+"define('"+p+"', ['"+c+"'], function (main) { return main; });\n"),n.onBuildWrite&&(l=n.onBuildWrite(c,t,l)),s+=addSemiColon(l,n)})}).then(function(){var a,l=t.replace(n.dir,"");module.onCompleteData.included.push(l),o+=l+"\n",c&&falseProp(e.modulesWithNames,c)&&!n.skipModuleInsertion&&((f=n.shim&&(getOwn(n.shim,c)||p&&getOwn(n.shim,p)))?(a=lang.isArray(f)?f:f.deps,n.wrapShim?s="(function(root) {\n"+x+'define("'+c+'", '+(a&&a.length?build.makeJsArrayString(a)+", ":"[], ")+"function() {\n  return (function() {\n"+s+"\n"+(f.exportsFn?f.exportsFn():"")+"\n  }).apply(root, arguments);\n});\n}(this));\n":s+="\n"+x+'define("'+c+'", '+(a&&a.length?build.makeJsArrayString(a)+", ":"")+(f.exportsFn?f.exportsFn():"function(){}")+");\n"):s+="\n"+x+'define("'+c+'", function(){});\n'),i=appendToFileContents(i,s+="\n",t,n,module,r)})}})).then(function(){v.length&&v.forEach(function(e,t){var o;"string"==typeof module.out?o=module.out:"string"==typeof module._buildPath&&(o=module._buildPath),e.onLayerEnd(function(e){i=appendToFileContents(i,"\n"+addSemiColon(e,n),"onLayerEnd"+t+".js",n,module,r)},{name:module.name,path:o})}),module.create&&(i=appendToFileContents(i,"\n"+x+'define("'+module.name+'", function(){});\n',"module-create.js",n,module,r)),module.insertRequire&&(i=appendToFileContents(i,"\n"+x+'require(["'+module.insertRequire.join('", "')+'"]);\n',"module-insertRequire.js",n,module,r))})}).then(function(){return n.wrap&&n.wrap.__endMap&&n.wrap.__endMap.forEach(function(e){i=e(i,n,r)}),{text:i,buildText:o,sourceMap:r?JSON.stringify(r.toJSON(),null,"  "):void 0}})},build.makeJsArrayString=function(e){return'["'+e.map(function(e){return lang.jsEscape(e)}).join('","')+'"]'},build.toTransport=function(e,n,i,r,t,o){var a=t&&t.context.config.baseUrl;return a&&(i=i.replace(a,"")),transform.toTransport(e,n,i,r,function(e){t&&(e.needsId||e.foundId===n)&&(t.modulesWithNames[n]=!0)},o)},require.build=build}),define("skylark-rjs/main",["./rjs","./build","./lang","./prim","./logger","./parse","./optimize","./pragma","./transform","./requirePatch","./commonJs","./source-map"],function(e,n,i,r,t,o,a,s,l,u,c,f,p){"use strict";return e}),define("skylark-rjs",["skylark-rjs/main"],function(e){return e})}(define,require),!isAmd){var skylarkjs=require("skylark-langx-ns");isCmd?module.exports=skylarkjs:globals.skylarkjs=skylarkjs}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-rjs.js.map
