/**
 * skylark-rjs - A version of rjs that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(e,n,t,require){var i,r="function"==typeof t&&t.amd,s=!r&&"undefined"!=typeof exports;if(r||t||(i={},t=n.define=function(s,e,t){"function"==typeof t?(i[s]={factory:t,deps:e.map(function(e){var t=s;if("."!==e[0])return e;var n=t.split("/"),i=e.split("/");n.pop();for(var r=0;r<i.length;r++)"."!=i[r]&&(".."==i[r]?n.pop():n.push(i[r]));return n.join("/")}),resolved:!1,exports:null},require(s)):i[s]={factory:null,resolved:!0,exports:t}},require=n.require=function(e){var module,t;if(i.hasOwnProperty(e))return(module=i[e]).resolved||(t=[],module.deps.forEach(function(e){t.push(require(e))}),module.exports=module.factory.apply(n,t)||null,module.resolved=!0),module.exports;throw new Error("Module "+e+" has not been defined")}),!t)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");e(t,require),r||(e=require("skylark-langx-ns"),s?module.exports=e:n.skylarkjs=e)}(function(define,require){define("skylark-langx-ns/_attach",[],function(){return function(e,t,n){for(var i=(t="string"==typeof t?t.split("."):t).length,r=e,s=0,o=t[s++];s<i;)r=r[o]=r[o]||{},o=t[s++];if(r[o]){if(n)throw new Error("This namespace already exists:"+t)}else r[o]=n||{};return r[o]}}),define("skylark-langx-ns/ns",["./_attach"],function(n){var i={attach:function(e,t){return n(i,e,t)}};return i}),define("skylark-langx-ns/main",["./ns"],function(e){return e}),define("skylark-langx-ns",["skylark-langx-ns/main"],function(e){return e}),define("skylark-rjs/rjs",["skylark-langx-ns"],function(e){return require.define=define,e.attach("intg.rjs",require)}),define("skylark-rjs/lang",[],function(){"use strict";var s,r,n=Object.prototype.hasOwnProperty;function o(e,t){return n.call(e,t)}function i(){}return r=function(){return!1},"undefined"!=typeof java&&java.lang&&java.lang.Object&&"undefined"!=typeof importPackage&&(r=function(e){return e instanceof java.lang.Object}),s={backSlashRegExp:/\\/g,ostring:Object.prototype.toString,isArray:Array.isArray||function(e){return"[object Array]"===s.ostring.call(e)},isFunction:function(e){return"[object Function]"===s.ostring.call(e)},isRegExp:function(e){return e&&e instanceof RegExp},hasProp:o,falseProp:function(e,t){return!o(e,t)||!e[t]},getOwn:function(e,t){return o(e,t)&&e[t]},_mixin:function(e,t,n){for(var i in t)!t.hasOwnProperty(i)||!n&&e.hasOwnProperty(i)||(e[i]=t[i]);return e},mixin:function(e){var t,n,i,r=Array.prototype.slice.call(arguments);for(e=e||{},2<r.length&&"boolean"==typeof arguments[r.length-1]&&(t=r.pop()),n=1,i=r.length;n<i;n++)s._mixin(e,r[n],t);return e},deepMix:function(n,e){return s.eachProp(e,function(e,t){"object"!=typeof e||!e||s.isArray(e)||s.isFunction(e)||e instanceof RegExp?n[t]=e:(n[t]||(n[t]={}),s.deepMix(n[t],e))}),n},deeplikeCopy:function(e,n){var t,i;if(s.isArray(e))i=[],e.forEach(function(e){i.push(s.deeplikeCopy(e,n))});else{if(t=typeof e,null==e||"boolean"==t||"string"==t||"number"==t||s.isFunction(e)||s.isRegExp(e)||r(e))return e;i={},s.eachProp(e,function(e,t){n&&o(n,t)||(i[t]=s.deeplikeCopy(e,n))})}return i},delegate:function(e,t){i.prototype=e;e=new i;return i.prototype=null,t&&s.mixin(e,t),e},each:function(e,t){if(e)for(var n=0;n<e.length&&!t(e[n],n,e);n+=1);},eachProp:function(e,t){for(var n in e)if(o(e,n)&&t(e[n],n))break},bind:function(e,t){return function(){return t.apply(e,arguments)}},jsEscape:function(e){return e.replace(/(["'\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}}}),define("skylark-rjs/prim",[],function(){"use strict";var n=Object.prototype.hasOwnProperty;function i(e,t){return n.call(e,t)}function r(e,t){if(e)for(var n=0;n<e.length;n+=1)e[n]&&t(e[n],n,e)}function s(e){if(i(e,"e")||i(e,"v")){if(a.hideResolutionConflict)return;throw new Error("Prim promise already resolved: "+JSON.stringify(e))}return 1}function o(e,t){a.nextTick(function(){r(e,function(e){e(t)})})}function a(){var r,n=[],t=[];return r={callback:function(e,t){t&&r.errback(t),i(r,"v")?a.nextTick(function(){e(r.v)}):n.push(e)},errback:function(e){i(r,"e")?a.nextTick(function(){e(r.e)}):t.push(e)},finished:function(){return i(r,"e")||i(r,"v")},rejected:function(){return i(r,"e")},resolve:function(e){return s(r)&&(r.v=e,o(n,e)),r},reject:function(e){return s(r)&&(r.e=e,o(t,e)),r},start:function(e){return r.resolve(),r.promise.then(e)},promise:{then:function(t,n){var i=a();return r.callback(function(e){try{(e=t&&"function"==typeof t?t(e):e)&&e.then?e.then(i.resolve,i.reject):i.resolve(e)}catch(e){i.reject(e)}},function(e){var t;try{n&&"function"==typeof n?(t=n(e))&&t.then?t.then(i.resolve,i.reject):i.resolve(t):i.reject(e)}catch(e){i.reject(e)}}),i.promise},fail:function(e){return r.promise.then(null,e)},end:function(){r.errback(function(e){throw e})}}}}return a.serial=function(e){var t=a().resolve().promise;return r(e,function(e){t=t.then(function(){return e()})}),t},a.nextTick="function"==typeof setImmediate?setImmediate:"undefined"!=typeof process&&process.nextTick?process.nextTick:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(e){e()},a}),define("skylark-rjs/logger",[],function(){return{TRACE:0,INFO:1,WARN:2,ERROR:3,SILENT:4,level:0,logPrefix:"",logLevel:function(e){this.level=e},trace:function(e){this.level<=this.TRACE&&this._print(e)},info:function(e){this.level<=this.INFO&&this._print(e)},warn:function(e){this.level<=this.WARN&&this._print(e)},error:function(e){this.level<=this.ERROR&&this._print(e)},_print:function(e){this._sysPrint((this.logPrefix?this.logPrefix+" ":"")+e)},_sysPrint:function(e){var t;console.log(e,t)}}}),define("skylark-acorn/generated/astralIdentifierCodes",[],function(){"use strict";return[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239]}),define("skylark-acorn/generated/astralIdentifierStartCodes",[],function(){"use strict";return[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191]}),define("skylark-acorn/generated/nonASCIIidentifierChars",[],function(){"use strict";return"‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿"}),define("skylark-acorn/generated/nonASCIIidentifierStartChars",[],function(){"use strict";return"ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ"}),define("skylark-acorn/identifier",["./generated/astralIdentifierCodes","./generated/astralIdentifierStartCodes","./generated/nonASCIIidentifierChars","./generated/nonASCIIidentifierStartChars"],function(n,i,e,t){"use strict";var r="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",r={5:r,"5module":r+" export import",6:r+" const class extends export import super"};const s=new RegExp("["+t+"]"),o=new RegExp("["+t+e+"]");function a(t,n){let i=65536;for(let e=0;e<n.length;e+=2){if((i+=n[e])>t)return!1;if((i+=n[e+1])>=t)return!0}return!1}return{reservedWords:{3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},keywords:r,keywordRelationalOperator:/^in(stanceof)?$/,isIdentifierStart:function(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?170<=e&&s.test(String.fromCharCode(e)):!1!==t&&a(e,i)))},isIdentifierChar:function(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?170<=e&&o.test(String.fromCharCode(e)):!1!==t&&(a(e,i)||a(e,n)))))}}}),define("skylark-acorn/tokentype",[],function(){"use strict";class n{constructor(e,t={}){this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null}}function e(e,t){return new n(e,{beforeExpr:!0,binop:t})}var t={beforeExpr:!0},i={startsExpr:!0};const r={};function s(e,t={}){return t.keyword=e,r[e]=new n(e,t)}t={num:new n("num",i),regexp:new n("regexp",i),string:new n("string",i),name:new n("name",i),privateId:new n("privateId",i),eof:new n("eof"),bracketL:new n("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new n("]"),braceL:new n("{",{beforeExpr:!0,startsExpr:!0}),braceR:new n("}"),parenL:new n("(",{beforeExpr:!0,startsExpr:!0}),parenR:new n(")"),comma:new n(",",t),semi:new n(";",t),colon:new n(":",t),dot:new n("."),question:new n("?",t),questionDot:new n("?."),arrow:new n("=>",t),template:new n("template"),invalidTemplate:new n("invalidTemplate"),ellipsis:new n("...",t),backQuote:new n("`",i),dollarBraceL:new n("${",{beforeExpr:!0,startsExpr:!0}),eq:new n("=",{beforeExpr:!0,isAssign:!0}),assign:new n("_=",{beforeExpr:!0,isAssign:!0}),incDec:new n("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new n("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:e("||",1),logicalAND:e("&&",2),bitwiseOR:e("|",3),bitwiseXOR:e("^",4),bitwiseAND:e("&",5),equality:e("==/!=/===/!==",6),relational:e("</>/<=/>=",7),bitShift:e("<</>>/>>>",8),plusMin:new n("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:e("%",10),star:e("*",10),slash:e("/",10),starstar:new n("**",{beforeExpr:!0}),coalesce:e("??",1),_break:s("break"),_case:s("case",t),_catch:s("catch"),_continue:s("continue"),_debugger:s("debugger"),_default:s("default",t),_do:s("do",{isLoop:!0,beforeExpr:!0}),_else:s("else",t),_finally:s("finally"),_for:s("for",{isLoop:!0}),_function:s("function",i),_if:s("if"),_return:s("return",t),_switch:s("switch"),_throw:s("throw",t),_try:s("try"),_var:s("var"),_const:s("const"),_while:s("while",{isLoop:!0}),_with:s("with"),_new:s("new",{beforeExpr:!0,startsExpr:!0}),_this:s("this",i),_super:s("super",i),_class:s("class",i),_extends:s("extends",t),_export:s("export"),_import:s("import",i),_null:s("null",i),_true:s("true",i),_false:s("false",i),_in:s("in",{beforeExpr:!0,binop:7}),_instanceof:s("instanceof",{beforeExpr:!0,binop:7}),_typeof:s("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:s("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:s("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})};return{TokenType:n,keywords:r,types:t}}),define("skylark-acorn/whitespace",[],function(){"use strict";var e=/\r\n?|\n|\u2028|\u2029/;function s(e){return 10===e||13===e||8232===e||8233===e}return{lineBreak:e,lineBreakG:new RegExp(e.source,"g"),isNewLine:s,nextLineBreak:function(t,n,i=t.length){for(let e=n;e<i;e++){var r=t.charCodeAt(e);if(s(r))return e<i-1&&13===r&&10===t.charCodeAt(e+1)?e+2:e+1}return-1},nonASCIIwhitespace:/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,skipWhiteSpace:/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g}}),define("skylark-acorn/util",[],function(){"use strict";const{hasOwnProperty:n,toString:t}=Object.prototype;return{hasOwn:Object.hasOwn||((e,t)=>n.call(e,t)),isArray:Array.isArray||(e=>"[object Array]"===t.call(e)),wordsRegexp:function(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")},codePointToString:function(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))},loneSurrogate:/[\uD800-\uDFFF]/u}}),define("skylark-acorn/locutil",["./whitespace"],function(e){"use strict";const s=e["nextLineBreak"];class o{constructor(e,t){this.line=e,this.column=t}offset(e){return new o(this.line,this.column+e)}}return{Position:o,SourceLocation:class{constructor(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)}},getLineInfo:function(n,i){for(let e=1,t=0;;){var r=s(n,t,i);if(r<0)return new o(e,i-t);++e,t=r}}}}),define("skylark-acorn/options",["./util","./locutil"],function(e,t){"use strict";const{hasOwn:i,isArray:r}=e,c=t["SourceLocation"],s={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};let u=!1;return{defaultOptions:s,getOptions:function(e){var t,o,a,n={};for(t in s)n[t]=(e&&i(e,t)?e:s)[t];if("latest"===n.ecmaVersion?n.ecmaVersion=1e8:null==n.ecmaVersion?(!u&&"object"==typeof console&&console.warn&&(u=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),n.ecmaVersion=11):2015<=n.ecmaVersion&&(n.ecmaVersion-=2009),null==n.allowReserved&&(n.allowReserved=n.ecmaVersion<5),e&&null!=e.allowHashBang||(n.allowHashBang=14<=n.ecmaVersion),r(n.onToken)){let t=n.onToken;n.onToken=e=>t.push(e)}return r(n.onComment)&&(n.onComment=(a=(o=n).onComment,function(e,t,n,i,r,s){e={type:e?"Block":"Line",value:t,start:n,end:i};o.locations&&(e.loc=new c(this,r,s)),o.ranges&&(e.range=[n,i]),a.push(e)})),n}}}),define("skylark-acorn/scopeflags",[],function(){"use strict";return{SCOPE_TOP:1,SCOPE_FUNCTION:2,SCOPE_ASYNC:4,SCOPE_GENERATOR:8,SCOPE_ARROW:16,SCOPE_SIMPLE_CATCH:32,SCOPE_SUPER:64,SCOPE_DIRECT_SUPER:128,SCOPE_CLASS_STATIC_BLOCK:256,SCOPE_VAR:259,functionFlags:function(e,t){return 2|(e?4:0)|(t?8:0)},BIND_NONE:0,BIND_VAR:1,BIND_LEXICAL:2,BIND_FUNCTION:3,BIND_SIMPLE_CATCH:4,BIND_OUTSIDE:5}}),define("skylark-acorn/state",["./identifier","./tokentype","./whitespace","./options","./util","./scopeflags"],function(e,t,n,i,r,s){"use strict";const{reservedWords:o,keywords:a}=e,c=t["types"],u=n["lineBreak"],l=i["getOptions"],f=r["wordsRegexp"],{SCOPE_TOP:p,SCOPE_FUNCTION:h,SCOPE_ASYNC:d,SCOPE_GENERATOR:m,SCOPE_SUPER:g,SCOPE_DIRECT_SUPER:_,SCOPE_CLASS_STATIC_BLOCK:v}=s;return{Parser:class{constructor(e,t,n){this.options=e=l(e),this.sourceFile=e.sourceFile,this.keywords=f(a[6<=e.ecmaVersion?6:"module"===e.sourceType?"5module":5]);let i="";!0!==e.allowReserved&&(i=o[6<=e.ecmaVersion?6:5===e.ecmaVersion?5:3],"module"===e.sourceType)&&(i+=" await"),this.reservedWords=f(i);var r=(i?i+" ":"")+o.strict;this.reservedWordsStrict=f(r),this.reservedWordsStrictBind=f(r+" "+o.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(u).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=c.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(p),this.regexpState=null,this.privateNameStack=[]}parse(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)}get inFunction(){return 0<(this.currentVarScope().flags&h)}get inGenerator(){return 0<(this.currentVarScope().flags&m)&&!this.currentVarScope().inClassFieldInit}get inAsync(){return 0<(this.currentVarScope().flags&d)&&!this.currentVarScope().inClassFieldInit}get canAwait(){for(let e=this.scopeStack.length-1;0<=e;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&v)return!1;if(t.flags&h)return 0<(t.flags&d)}return this.inModule&&13<=this.options.ecmaVersion||this.options.allowAwaitOutsideFunction}get allowSuper(){var{flags:e,inClassFieldInit:t}=this.currentThisScope();return 0<(e&g)||t||this.options.allowSuperOutsideMethod}get allowDirectSuper(){return 0<(this.currentThisScope().flags&_)}get treatFunctionsAsVar(){return this.treatFunctionsAsVarInScope(this.currentScope())}get allowNewDotTarget(){var{flags:e,inClassFieldInit:t}=this.currentThisScope();return 0<(e&(h|v))||t}get inClassStaticBlock(){return 0<(this.currentVarScope().flags&v)}static extend(...t){let n=this;for(let e=0;e<t.length;e++)n=t[e](n);return n}static parse(e,t){return new this(t,e).parse()}static parseExpressionAt(e,t,n){n=new this(n,e,t);return n.nextToken(),n.parseExpression()}static tokenizer(e,t){return new this(t,e)}}}}),define("skylark-acorn/parseutil",["./tokentype","./state","./whitespace"],function(e,t,n){"use strict";const i=e["types"];e=t.Parser;const{lineBreak:s,skipWhiteSpace:o}=n;t=e.prototype;const a=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;t.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){o.lastIndex=e,e+=o.exec(this.input)[0].length;var t,n,i,r=a.exec(this.input.slice(e));if(!r)return!1;if("use strict"===(r[1]||r[2]))return o.lastIndex=e+r[0].length,n=(t=o.exec(this.input)).index+t[0].length,";"===(i=this.input.charAt(n))||"}"===i||s.test(t[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||"!"===i&&"="===this.input.charAt(n+1));e+=r[0].length,o.lastIndex=e,e+=o.exec(this.input)[0].length,";"===this.input[e]&&e++}},t.eat=function(e){return this.type===e&&(this.next(),!0)},t.isContextual=function(e){return this.type===i.name&&this.value===e&&!this.containsEsc},t.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},t.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},t.canInsertSemicolon=function(){return this.type===i.eof||this.type===i.braceR||s.test(this.input.slice(this.lastTokEnd,this.start))},t.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},t.semicolon=function(){this.eat(i.semi)||this.insertSemicolon()||this.unexpected()},t.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},t.expect=function(e){this.eat(e)||this.unexpected()},t.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")};return t.checkPatternErrors=function(e,t){e&&(-1<e.trailingComma&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element"),-1<(e=t?e.parenthesizedAssign:e.parenthesizedBind))&&this.raiseRecoverable(e,t?"Assigning to rvalue":"Parenthesized pattern")},t.checkExpressionErrors=function(e,t){var n;return!!e&&({shorthandAssign:e,doubleProto:n}=e,t?(0<=e&&this.raise(e,"Shorthand property assignments are valid only in destructuring patterns"),void(0<=n&&this.raiseRecoverable(n,"Redefinition of __proto__ property"))):0<=e||0<=n)},t.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},t.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type},{DestructuringErrors:class{constructor(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}}}}),define("skylark-acorn/statement",["./tokentype","./state","./whitespace","./identifier","./util","./parseutil","./scopeflags"],function(e,t,n,i,r,s,o){"use strict";const u=e["types"];e=t.Parser;const{lineBreak:a,skipWhiteSpace:c}=n,{isIdentifierStart:l,isIdentifierChar:f,keywordRelationalOperator:p}=i,{hasOwn:h,loneSurrogate:d}=r,m=s["DestructuringErrors"],{functionFlags:g,SCOPE_SIMPLE_CATCH:_,BIND_SIMPLE_CATCH:v,BIND_LEXICAL:y,BIND_VAR:b,BIND_FUNCTION:x,SCOPE_CLASS_STATIC_BLOCK:w,SCOPE_SUPER:S}=o;t=e.prototype;t.parseTopLevel=function(e){var exports=Object.create(null);for(e.body||(e.body=[]);this.type!==u.eof;){var t=this.parseStatement(null,!0,exports);e.body.push(t)}if(this.inModule)for(var n of Object.keys(this.undefinedExports))this.raiseRecoverable(this.undefinedExports[n].start,`Export '${n}' is not defined`);return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};const k={kind:"loop"},A={kind:"switch"},T=(t.isLet=function(e){if(!(this.options.ecmaVersion<6)&&this.isContextual("let")){c.lastIndex=this.pos;var i=c.exec(this.input);let t=this.pos+i[0].length,n=this.input.charCodeAt(t);if(91===n||92===n)return!0;if(!e){if(123===n||55295<n&&n<56320)return!0;if(l(n,!0)){let e=t+1;for(;f(n=this.input.charCodeAt(e),!0);)++e;if(92===n||55295<n&&n<56320)return!0;i=this.input.slice(t,e);if(!p.test(i))return!0}}}return!1},t.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;c.lastIndex=this.pos;var e=c.exec(this.input),e=this.pos+e[0].length;return!(a.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!==this.input.length&&(f(e=this.input.charCodeAt(e+8))||55295<e&&e<56320))},t.parseStatement=function(e,t,exports){let n=this.type,i=this.startNode(),r;switch(this.isLet(e)&&(n=u._var,r="let"),n){case u._break:case u._continue:return this.parseBreakContinueStatement(i,n.keyword);case u._debugger:return this.parseDebuggerStatement(i);case u._do:return this.parseDoStatement(i);case u._for:return this.parseForStatement(i);case u._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case u._class:return e&&this.unexpected(),this.parseClass(i,!0);case u._if:return this.parseIfStatement(i);case u._return:return this.parseReturnStatement(i);case u._switch:return this.parseSwitchStatement(i);case u._throw:return this.parseThrowStatement(i);case u._try:return this.parseTryStatement(i);case u._const:case u._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(i,r);case u._while:return this.parseWhileStatement(i);case u._with:return this.parseWithStatement(i);case u.braceL:return this.parseBlock(!0,i);case u.semi:return this.parseEmptyStatement(i);case u._export:case u._import:if(10<this.options.ecmaVersion&&n===u._import){c.lastIndex=this.pos;var s=c.exec(this.input),s=this.pos+s[0].length,s=this.input.charCodeAt(s);if(40===s||46===s)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule)||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"),n===u._import?this.parseImport(i):this.parseExport(i,exports);default:var o;return this.isAsyncFunction()?(e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e)):(s=this.value,o=this.parseExpression(),n===u.name&&"Identifier"===o.type&&this.eat(u.colon)?this.parseLabeledStatement(i,s,o,e):this.parseExpressionStatement(i,o))}},t.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(u.semi)||this.insertSemicolon()?e.label=null:this.type!==u.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());let i=0;for(;i<this.labels.length;++i){var r=this.labels[i];if(null==e.label||r.name===e.label.name){if(null!=r.kind&&(n||"loop"===r.kind))break;if(e.label&&n)break}}return i===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},t.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},t.parseDoStatement=function(e){return this.next(),this.labels.push(k),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(u._while),e.test=this.parseParenExpression(),6<=this.options.ecmaVersion?this.eat(u.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},t.parseForStatement=function(e){this.next();var t=9<=this.options.ecmaVersion&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(k),this.enterScope(0),this.expect(u.parenL),this.type===u.semi)return-1<t&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===u._var||this.type===u._const||n)return s=this.startNode(),n=n?"let":this.value,this.next(),this.parseVar(s,!0,n),this.finishNode(s,"VariableDeclaration"),(this.type===u._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===s.declarations.length?(9<=this.options.ecmaVersion&&(this.type===u._in?-1<t&&this.unexpected(t):e.await=-1<t),this.parseForIn(e,s)):(-1<t&&this.unexpected(t),this.parseFor(e,s));let i=this.isContextual("let"),r=!1;var n=new m,s=this.parseExpression(!(-1<t)||"await",n);return this.type===u._in||(r=6<=this.options.ecmaVersion&&this.isContextual("of"))?(9<=this.options.ecmaVersion&&(this.type===u._in?-1<t&&this.unexpected(t):e.await=-1<t),i&&r&&this.raise(s.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(s,!1,n),this.checkLValPattern(s),this.parseForIn(e,s)):(this.checkExpressionErrors(n,!0),-1<t&&this.unexpected(t),this.parseFor(e,s))},t.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,E|(n?0:C),!1,t)},t.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(u._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},t.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(u.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},t.parseSwitchStatement=function(t){this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(u.braceL),this.labels.push(A),this.enterScope(0);let n;for(let e=!1;this.type!==u.braceR;){var i;this.type===u._case||this.type===u._default?(i=this.type===u._case,n&&this.finishNode(n,"SwitchCase"),t.cases.push(n=this.startNode()),n.consequent=[],this.next(),i?n.test=this.parseExpression():(e&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),e=!0,n.test=null),this.expect(u.colon)):(n||this.unexpected(),n.consequent.push(this.parseStatement(null)))}return this.exitScope(),n&&this.finishNode(n,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},t.parseThrowStatement=function(e){return this.next(),a.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")},[]),E=(t.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t="Identifier"===e.type;return this.enterScope(t?_:0),this.checkLValPattern(e,t?v:y),this.expect(u.parenR),e},t.parseTryStatement=function(e){var t;return this.next(),e.block=this.parseBlock(),e.handler=null,this.type===u._catch&&(t=this.startNode(),this.next(),this.eat(u.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")),e.finalizer=this.eat(u._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},t.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")},t.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(k),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},t.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},t.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},t.parseLabeledStatement=function(t,e,n,i){for(var r of this.labels)r.name===e&&this.raise(n.start,"Label '"+e+"' is already declared");var s=this.type.isLoop?"loop":this.type===u._switch?"switch":null;for(let e=this.labels.length-1;0<=e;e--){var o=this.labels[e];if(o.statementStart!==t.start)break;o.statementStart=this.start,o.kind=s}return this.labels.push({name:e,kind:s,statementStart:this.start}),t.body=this.parseStatement(i?-1===i.indexOf("label")?i+"label":i:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},t.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},t.parseBlock=function(e=!0,t=this.startNode(),n){for(t.body=[],this.expect(u.braceL),e&&this.enterScope(0);this.type!==u.braceR;){var i=this.parseStatement(null);t.body.push(i)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")},t.parseFor=function(e,t){return e.init=t,this.expect(u.semi),e.test=this.type===u.semi?null:this.parseExpression(),this.expect(u.semi),e.update=this.type===u.parenR?null:this.parseExpression(),this.expect(u.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},t.parseForIn=function(e,t){var n=this.type===u._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)&&this.raise(t.start,`${n?"for-in":"for-of"} loop variable declaration may not have an initializer`),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(u.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")},t.parseVar=function(e,t,n,i){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(u.eq)?r.init=this.parseMaybeAssign(t):i||"const"!==n||this.type===u._in||6<=this.options.ecmaVersion&&this.isContextual("of")?i||"Identifier"===r.id.type||t&&(this.type===u._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(u.comma))break}return e},t.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,"var"===t?b:y,!1)},1),C=2;function P(e,t){var{computed:e,key:n}=e;return!e&&("Identifier"===n.type&&n.name===t||"Literal"===n.type&&n.value===t)}t.parseFunction=function(e,t,n,i,r){this.initFunction(e),(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!i)&&(this.type===u.star&&t&C&&this.unexpected(),e.generator=this.eat(u.star)),8<=this.options.ecmaVersion&&(e.async=!!i),t&E&&(e.id=4&t&&this.type!==u.name?null:this.parseIdent(),!e.id||t&C||this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?b:y:x));var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(g(e.async,e.generator)),t&E||(e.id=this.type===u.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,t&E?"FunctionDeclaration":"FunctionExpression")},t.parseFunctionParams=function(e){this.expect(u.parenL),e.params=this.parseBindingList(u.parenR,!1,8<=this.options.ecmaVersion),this.checkYieldAwaitInDefaultParams()},t.parseClass=function(e,t){this.next();var n=this.strict,i=(this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e),this.enterClassBody()),r=this.startNode();let s=!1;for(r.body=[],this.expect(u.braceL);this.type!==u.braceR;){var o=this.parseClassElement(null!==e.superClass);o&&(r.body.push(o),"MethodDefinition"===o.type&&"constructor"===o.kind?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&"PrivateIdentifier"===o.key.type&&function(e,t){var n=t.key.name,i=e[n];let r="true";"MethodDefinition"!==t.type||"get"!==t.kind&&"set"!==t.kind||(r=(t.static?"s":"i")+t.kind);if("iget"===i&&"iset"===r||"iset"===i&&"iget"===r||"sget"===i&&"sset"===r||"sset"===i&&"sget"===r)e[n]="true";else{if(i)return 1;e[n]=r}}(i,o)&&this.raiseRecoverable(o.key.start,`Identifier '#${o.key.name}' has already been declared`))}return this.strict=n,this.next(),e.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},t.parseClassElement=function(e){if(this.eat(u.semi))return null;var t,n=this.options.ecmaVersion,i=this.startNode();let r="",s=!1,o=!1,a="method",c=!1;if(this.eatContextual("static")){if(13<=n&&this.eat(u.braceL))return this.parseClassStaticBlock(i),i;this.isClassElementNameStart()||this.type===u.star?c=!0:r="static"}return i.static=c,!r&&8<=n&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==u.star||this.canInsertSemicolon()?r="async":o=!0),!r&&(9<=n||!o)&&this.eat(u.star)&&(s=!0),r||o||s||(t=this.value,(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=t:r=t)),r?(i.computed=!1,i.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),i.key.name=r,this.finishNode(i.key,"Identifier")):this.parseClassElementName(i),n<13||this.type===u.parenL||"method"!==a||s||o?(n=(t=!i.static&&P(i,"constructor"))&&e,t&&"method"!==a&&this.raise(i.key.start,"Constructor can't have get/set modifier"),i.kind=t?"constructor":a,this.parseClassMethod(i,s,o,n)):this.parseClassField(i),i},t.isClassElementNameStart=function(){return this.type===u.name||this.type===u.privateId||this.type===u.num||this.type===u.string||this.type===u.bracketL||this.type.keyword},t.parseClassElementName=function(e){this.type===u.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)},t.parseClassMethod=function(e,t,n,i){var r=e.key,r=("constructor"===e.kind?(t&&this.raise(r.start,"Constructor can't be a generator"),n&&this.raise(r.start,"Constructor can't be an async method")):e.static&&P(e,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype"),e.value=this.parseMethod(t,n,i));return"get"===e.kind&&0!==r.params.length&&this.raiseRecoverable(r.start,"getter should have no params"),"set"===e.kind&&1!==r.params.length&&this.raiseRecoverable(r.start,"setter should have exactly one param"),"set"===e.kind&&"RestElement"===r.params[0].type&&this.raiseRecoverable(r.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")},t.parseClassField=function(e){var t,n;return P(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&P(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(u.eq)?(n=(t=this.currentThisScope()).inClassFieldInit,t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n):e.value=null,this.semicolon(),this.finishNode(e,"PropertyDefinition")},t.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(w|S);this.type!==u.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")},t.parseClassId=function(e,t){this.type===u.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,y,!1)):(!0===t&&this.unexpected(),e.id=null)},t.parseClassSuper=function(e){e.superClass=this.eat(u._extends)?this.parseExprSubscripts(null,!1):null},t.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared},t.exitClassBody=function(){var{declared:t,used:n}=this.privateNameStack.pop();if(this.options.checkPrivateFields){var e=this.privateNameStack.length,i=0===e?null:this.privateNameStack[e-1];for(let e=0;e<n.length;++e){var r=n[e];h(t,r.name)||(i?i.used.push(r):this.raiseRecoverable(r.start,`Private field '#${r.name}' must be declared in an enclosing class`))}}},t.parseExportAllDeclaration=function(e,exports){return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(exports,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==u.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")},t.parseExport=function(e,exports){if(this.next(),this.eat(u.star))return this.parseExportAllDeclaration(e,exports);if(this.eat(u._default))return this.checkExport(exports,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(exports,e.declaration.declarations):this.checkExport(exports,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(exports),this.eatContextual("from"))this.type!==u.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var t of e.specifiers)this.checkUnreserved(t.local),this.checkLocalExport(t.local),"Literal"===t.local.type&&this.raise(t.local.start,"A string literal cannot be used as an exported binding without `from`.");e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},t.parseExportDeclaration=function(e){return this.parseStatement(null)},t.parseExportDefaultDeclaration=function(){let e;var t;return this.type===u._function||(e=this.isAsyncFunction())?(t=this.startNode(),this.next(),e&&this.next(),this.parseFunction(t,4|E,!1,e)):this.type===u._class?(t=this.startNode(),this.parseClass(t,"nullableID")):(t=this.parseMaybeAssign(),this.semicolon(),t)},t.checkExport=function(exports,e,t){exports&&("string"!=typeof e&&(e="Identifier"===e.type?e.name:e.value),h(exports,e)&&this.raiseRecoverable(t,"Duplicate export '"+e+"'"),exports[e]=!0)},t.checkPatternExport=function(exports,e){var t=e.type;if("Identifier"===t)this.checkExport(exports,e,e.start);else if("ObjectPattern"===t)for(var n of e.properties)this.checkPatternExport(exports,n);else if("ArrayPattern"===t)for(var i of e.elements)i&&this.checkPatternExport(exports,i);else"Property"===t?this.checkPatternExport(exports,e.value):"AssignmentPattern"===t?this.checkPatternExport(exports,e.left):"RestElement"===t?this.checkPatternExport(exports,e.argument):"ParenthesizedExpression"===t&&this.checkPatternExport(exports,e.expression)},t.checkVariableExport=function(exports,e){if(exports)for(var t of e)this.checkPatternExport(exports,t.id)},t.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},t.parseExportSpecifier=function(exports){var e=this.startNode();return e.local=this.parseModuleExportName(),e.exported=this.eatContextual("as")?this.parseModuleExportName():e.local,this.checkExport(exports,e.exported,e.exported.start),this.finishNode(e,"ExportSpecifier")},t.parseExportSpecifiers=function(exports){let e=[],t=!0;for(this.expect(u.braceL);!this.eat(u.braceR);){if(t)t=!1;else if(this.expect(u.comma),this.afterTrailingComma(u.braceR))break;e.push(this.parseExportSpecifier(exports))}return e},t.parseImport=function(e){return this.next(),this.type===u.string?(e.specifiers=T,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===u.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},t.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,y),this.finishNode(e,"ImportSpecifier")},t.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,y),this.finishNode(e,"ImportDefaultSpecifier")},t.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,y),this.finishNode(e,"ImportNamespaceSpecifier")},t.parseImportSpecifiers=function(){let e=[],t=!0;if(this.type!==u.name||(e.push(this.parseImportDefaultSpecifier()),this.eat(u.comma)))if(this.type===u.star)e.push(this.parseImportNamespaceSpecifier());else for(this.expect(u.braceL);!this.eat(u.braceR);){if(t)t=!1;else if(this.expect(u.comma),this.afterTrailingComma(u.braceR))break;e.push(this.parseImportSpecifier())}return e},t.parseModuleExportName=function(){var e;return 13<=this.options.ecmaVersion&&this.type===u.string?(e=this.parseLiteral(this.value),d.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e):this.parseIdent(!0)},t.adaptDirectivePrologue=function(t){for(let e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},t.isDirectiveCandidate=function(e){return 5<=this.options.ecmaVersion&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])}}),define("skylark-acorn/lval",["./tokentype","./state","./util","./scopeflags"],function(e,t,n,i){"use strict";const a=e["types"];e=t.Parser;const r=n["hasOwn"],{BIND_NONE:s,BIND_OUTSIDE:o,BIND_LEXICAL:c}=i;t=e.prototype;t.toAssignable=function(e,t,n){if(6<=this.options.ecmaVersion&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var i of e.properties)this.toAssignable(i,t),"RestElement"!==i.type||"ArrayPattern"!==i.argument.type&&"ObjectPattern"!==i.argument.type||this.raise(i.argument.start,"Unexpected token");break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},t.toAssignableList=function(t,n){var e,i=t.length;for(let e=0;e<i;e++){var r=t[e];r&&this.toAssignable(r,n)}return i&&(e=t[i-1],6===this.options.ecmaVersion)&&n&&e&&"RestElement"===e.type&&"Identifier"!==e.argument.type&&this.unexpected(e.argument.start),t},t.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},t.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==a.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},t.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case a.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(a.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case a.braceL:return this.parseObj(!0)}return this.parseIdent()},t.parseBindingList=function(e,t,n,i){let r=[],s=!0;for(;!this.eat(e);)if(s?s=!1:this.expect(a.comma),t&&this.type===a.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===a.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),r.push(o),this.type===a.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}r.push(this.parseAssignableListItem(i))}return r},t.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t},t.parseBindingListItem=function(e){return e},t.parseMaybeDefault=function(e,t,n){return n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(a.eq)?n:((e=this.startNodeAt(e,t)).left=n,e.right=this.parseMaybeAssign(),this.finishNode(e,"AssignmentPattern"))},t.checkLValSimple=function(e,t=s,n){var i=t!==s;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(i?"Binding ":"Assigning to ")+e.name+" in strict mode"),i&&(t===c&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(r(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==o)&&this.declareName(e.name,t,e.start);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(i?"Binding":"Assigning to")+" rvalue")}},t.checkLValPattern=function(e,t=s,n){switch(e.type){case"ObjectPattern":for(var i of e.properties)this.checkLValInnerPattern(i,t,n);break;case"ArrayPattern":for(var r of e.elements)r&&this.checkLValInnerPattern(r,t,n);break;default:this.checkLValSimple(e,t,n)}},t.checkLValInnerPattern=function(e,t=s,n){switch(e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}}}),define("skylark-acorn/tokencontext",["./state","./tokentype","./whitespace"],function(e,t,n){"use strict";e=e.Parser;const i=t["types"],r=n["lineBreak"];class s{constructor(e,t,n,i,r){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=i,this.generator=!!r}}const o={b_stat:new s("{",!1),b_expr:new s("{",!0),b_tmpl:new s("${",!1),p_stat:new s("(",!1),p_expr:new s("(",!0),q_tmpl:new s("`",!0,!0,e=>e.tryReadTemplateToken()),f_stat:new s("function",!1),f_expr:new s("function",!0),f_expr_gen:new s("function",!0,!1,null,!0),f_gen:new s("function",!1,!1,null,!0)};t=e.prototype;return t.initialContext=function(){return[o.b_stat]},t.curContext=function(){return this.context[this.context.length-1]},t.braceIsBlock=function(e){var t=this.curContext();return t===o.f_expr||t===o.f_stat||(e!==i.colon||t!==o.b_stat&&t!==o.b_expr?e===i._return||e===i.name&&this.exprAllowed?r.test(this.input.slice(this.lastTokEnd,this.start)):e===i._else||e===i.semi||e===i.eof||e===i.parenR||e===i.arrow||(e===i.braceL?t===o.b_stat:e!==i._var&&e!==i._const&&e!==i.name&&!this.exprAllowed):!t.isExpr)},t.inGeneratorContext=function(){for(let e=this.context.length-1;1<=e;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},t.updateContext=function(e){var t,n=this.type;n.keyword&&e===i.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},t.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)},i.parenR.updateContext=i.braceR.updateContext=function(){if(1===this.context.length)this.exprAllowed=!0;else{let e=this.context.pop();e===o.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}},i.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?o.b_stat:o.b_expr),this.exprAllowed=!0},i.dollarBraceL.updateContext=function(){this.context.push(o.b_tmpl),this.exprAllowed=!0},i.parenL.updateContext=function(e){e=e===i._if||e===i._for||e===i._with||e===i._while;this.context.push(e?o.p_stat:o.p_expr),this.exprAllowed=!0},i.incDec.updateContext=function(){},i._function.updateContext=i._class.updateContext=function(e){!e.beforeExpr||e===i._else||e===i.semi&&this.curContext()!==o.p_stat||e===i._return&&r.test(this.input.slice(this.lastTokEnd,this.start))||(e===i.colon||e===i.braceL)&&this.curContext()===o.b_stat?this.context.push(o.f_stat):this.context.push(o.f_expr),this.exprAllowed=!1},i.backQuote.updateContext=function(){this.curContext()===o.q_tmpl?this.context.pop():this.context.push(o.q_tmpl),this.exprAllowed=!1},i.star.updateContext=function(e){e===i._function&&(e=this.context.length-1,this.context[e]===o.f_expr?this.context[e]=o.f_expr_gen:this.context[e]=o.f_gen),this.exprAllowed=!0},i.name.updateContext=function(e){let t=!1;6<=this.options.ecmaVersion&&e!==i.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t},{TokContext:s,types:o}}),define("skylark-acorn/expression",["./tokentype","./tokencontext","./state","./parseutil","./whitespace","./scopeflags"],function(e,t,n,i,r,s){"use strict";const _=e["types"],u=t["types"];e=n.Parser;const v=i["DestructuringErrors"],o=r["lineBreak"],{functionFlags:a,SCOPE_ARROW:c,SCOPE_SUPER:l,SCOPE_DIRECT_SUPER:f,BIND_OUTSIDE:p,BIND_VAR:h}=s;t=e.prototype;t.checkPropClash=function(i,r,t){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===i.type||6<=this.options.ecmaVersion&&(i.computed||i.method||i.shorthand))){let n=i["key"],e;switch(n.type){case"Identifier":e=n.name;break;case"Literal":e=String(n.value);break;default:return}i=i["kind"];if(6<=this.options.ecmaVersion)"__proto__"===e&&"init"===i&&(r.proto&&(t?t.doubleProto<0&&(t.doubleProto=n.start):this.raiseRecoverable(n.start,"Redefinition of __proto__ property")),r.proto=!0);else{let t=r[e="$"+e];if(t){let e;(e="init"===i?this.strict&&t.init||t.get||t.set:t.init||t[i])&&this.raiseRecoverable(n.start,"Redefinition of property")}else t=r[e]={init:!1,get:!1,set:!1};t[i]=!0}}},t.parseExpression=function(e,t){var n=this.start,i=this.startLoc,r=this.parseMaybeAssign(e,t);if(this.type!==_.comma)return r;var s=this.startNodeAt(n,i);for(s.expressions=[r];this.eat(_.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")},t.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}let i=!1,r=-1,s=-1,o=-1;t?(r=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new v,i=!0);var a=this.start,c=this.startLoc;this.type!==_.parenL&&this.type!==_.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===e);let u=this.parseMaybeConditional(e,t);return n&&(u=n.call(this,u,a,c)),this.type.isAssign?((n=this.startNodeAt(a,c)).operator=this.value,this.type===_.eq&&(u=this.toAssignable(u,!1,t)),i||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=u.start&&(t.shorthandAssign=-1),this.type===_.eq?this.checkLValPattern(u):this.checkLValSimple(u),n.left=u,this.next(),n.right=this.parseMaybeAssign(e),-1<o&&(t.doubleProto=o),this.finishNode(n,"AssignmentExpression")):(i&&this.checkExpressionErrors(t,!0),-1<r&&(t.parenthesizedAssign=r),-1<s&&(t.trailingComma=s),u)},t.parseMaybeConditional=function(e,t){var n=this.start,i=this.startLoc,r=this.parseExprOps(e,t);return!this.checkExpressionErrors(t)&&this.eat(_.question)?((t=this.startNodeAt(n,i)).test=r,t.consequent=this.parseMaybeAssign(),this.expect(_.colon),t.alternate=this.parseMaybeAssign(e),this.finishNode(t,"ConditionalExpression")):r},t.parseExprOps=function(e,t){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||r.start===n&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,n,i,-1,e)},t.parseExprOp=function(e,t,n,i,r){let s=this.type.binop;var o,a,c,u,l;if(null!=s&&(!r||this.type!==_._in)&&s>i)return o=this.type===_.logicalOR||this.type===_.logicalAND,(a=this.type===_.coalesce)&&(s=_.logicalAND.binop),c=this.value,this.next(),u=this.start,l=this.startLoc,u=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),u,l,s,r),l=this.buildBinary(t,n,e,u,c,o||a),(o&&this.type===_.coalesce||a&&(this.type===_.logicalOR||this.type===_.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(l,t,n,i,r);return e},t.buildBinary=function(e,t,n,i,r,s){"PrivateIdentifier"===i.type&&this.raise(i.start,"Private identifier can only be left side of binary expression");e=this.startNodeAt(e,t);return e.left=n,e.operator=r,e.right=i,this.finishNode(e,s?"LogicalExpression":"BinaryExpression")},t.parseMaybeUnary=function(e,t,n,i){let r=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(i),t=!0;else if(this.type.prefix){var a=this.startNode(),c=this.type===_.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,c,i),this.checkExpressionErrors(e,!0),c?this.checkLValSimple(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):"delete"===a.operator&&function e(t){return"MemberExpression"===t.type&&"PrivateIdentifier"===t.property.type||"ChainExpression"===t.type&&e(t.expression)}(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,c?"UpdateExpression":"UnaryExpression")}else if(t||this.type!==_.privateId){if(o=this.parseExprSubscripts(e,i),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=this.startNodeAt(r,s);u.operator=this.value,u.prefix=!1,u.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(u,"UpdateExpression")}}else(i||0===this.privateNameStack.length)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==_._in&&this.unexpected();return n||!this.eat(_.starstar)?o:t?void this.unexpected(this.lastTokStart):this.buildBinary(r,s,o,this.parseMaybeUnary(null,!1,!1,i),"**",!1)},t.parseExprSubscripts=function(e,t){var n=this.start,i=this.startLoc,r=this.parseExprAtom(e,t);return"ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd)||(r=this.parseSubscripts(r,n,i,!1,t),e&&"MemberExpression"===r.type&&(e.parenthesizedAssign>=r.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=r.start&&(e.parenthesizedBind=-1),e.trailingComma>=r.start)&&(e.trailingComma=-1)),r},t.parseSubscripts=function(t,n,i,r,s){var o,a=8<=this.options.ecmaVersion&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start==5&&this.potentialArrowAt===t.start;let c=!1;for(;;){let e=this.parseSubscript(t,n,i,r,a,c,s);if(e.optional&&(c=!0),e===t||"ArrowFunctionExpression"===e.type)return c&&((o=this.startNodeAt(n,i)).expression=e,e=this.finishNode(o,"ChainExpression")),e;t=e}},t.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(_.arrow)},t.parseSubscriptAsyncArrow=function(e,t,n,i){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,i)},t.parseSubscript=function(e,t,n,i,r,s,o){var a=11<=this.options.ecmaVersion,c=a&&this.eat(_.questionDot),u=(i&&c&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions"),this.eat(_.bracketL));if(u||c&&this.type!==_.parenL&&this.type!==_.backQuote||this.eat(_.dot)){var l=this.startNodeAt(t,n);l.object=e,u?(l.property=this.parseExpression(),this.expect(_.bracketR)):this.type===_.privateId&&"Super"!==e.type?l.property=this.parsePrivateIdent():l.property=this.parseIdent("never"!==this.options.allowReserved),l.computed=!!u,a&&(l.optional=c),e=this.finishNode(l,"MemberExpression")}else if(!i&&this.eat(_.parenL)){var u=new v,l=this.yieldPos,i=this.awaitPos,f=this.awaitIdentPos,p=(this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.parseExprList(_.parenR,8<=this.options.ecmaVersion,!1,u));if(r&&!c&&this.shouldParseAsyncArrow())return this.checkPatternErrors(u,!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=l,this.awaitPos=i,this.awaitIdentPos=f,this.parseSubscriptAsyncArrow(t,n,p,o);this.checkExpressionErrors(u,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=i||this.awaitPos,this.awaitIdentPos=f||this.awaitIdentPos;r=this.startNodeAt(t,n);r.callee=e,r.arguments=p,a&&(r.optional=c),e=this.finishNode(r,"CallExpression")}else this.type===_.backQuote&&((c||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),(o=this.startNodeAt(t,n)).tag=e,o.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(o,"TaggedTemplateExpression"));return e},t.parseExprAtom=function(t,n,i){this.type===_.slash&&this.readRegexp();let r,s=this.potentialArrowAt===this.start;switch(this.type){case _._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type!==_.parenL||this.allowDirectSuper||this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==_.dot&&this.type!==_.bracketL&&this.type!==_.parenL&&this.unexpected(),this.finishNode(r,"Super");case _._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case _.name:var o=this.start,a=this.startLoc,c=this.containsEsc;let e=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!c&&"async"===e.name&&!this.canInsertSemicolon()&&this.eat(_._function))return this.overrideContext(u.f_expr),this.parseFunction(this.startNodeAt(o,a),0,!1,!0,n);if(s&&!this.canInsertSemicolon()){if(this.eat(_.arrow))return this.parseArrowExpression(this.startNodeAt(o,a),[e],!1,n);if(8<=this.options.ecmaVersion&&"async"===e.name&&this.type===_.name&&!c&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return e=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(_.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(o,a),[e],!0,n)}return e;case _.regexp:c=this.value;return(r=this.parseLiteral(c.value)).regex={pattern:c.pattern,flags:c.flags},r;case _.num:case _.string:return this.parseLiteral(this.value);case _._null:case _._true:case _._false:return(r=this.startNode()).value=this.type===_._null?null:this.type===_._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case _.parenL:o=this.start,a=this.parseParenAndDistinguishExpression(s,n);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(a)&&(t.parenthesizedAssign=o),t.parenthesizedBind<0)&&(t.parenthesizedBind=o),a;case _.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(_.bracketR,!0,!0,t),this.finishNode(r,"ArrayExpression");case _.braceL:return this.overrideContext(u.b_expr),this.parseObj(!1,t);case _._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case _._class:return this.parseClass(this.startNode(),!1);case _._new:return this.parseNew();case _.backQuote:return this.parseTemplate();case _._import:return 11<=this.options.ecmaVersion?this.parseExprImport(i):this.unexpected();default:return this.parseExprAtomDefault()}},t.parseExprAtomDefault=function(){this.unexpected()},t.parseExprImport=function(e){var t=this.startNode(),n=(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.parseIdent(!0));return this.type!==_.parenL||e?this.type===_.dot?(t.meta=n,this.parseImportMeta(t)):void this.unexpected():this.parseDynamicImport(t)},t.parseDynamicImport=function(e){var t;return this.next(),e.source=this.parseMaybeAssign(),this.eat(_.parenR)||(t=this.start,this.eat(_.comma)&&this.eat(_.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)),this.finishNode(e,"ImportExpression")},t.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),"meta"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")},t.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")},t.parseParenExpression=function(){this.expect(_.parenL);var e=this.parseExpression();return this.expect(_.parenR),e},t.shouldParseArrow=function(e){return!this.canInsertSemicolon()},t.parseParenAndDistinguishExpression=function(a,c){let u=this.start,l=this.startLoc,f,p=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var h=this.start,d=this.startLoc;let e=[],t=!0,n=!1,i=new v,r=this.yieldPos,s=this.awaitPos,o;for(this.yieldPos=0,this.awaitPos=0;this.type!==_.parenR;){if(t?t=!1:this.expect(_.comma),p&&this.afterTrailingComma(_.parenR,!0)){n=!0;break}if(this.type===_.ellipsis){o=this.start,e.push(this.parseParenItem(this.parseRestBinding())),this.type===_.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}e.push(this.parseMaybeAssign(!1,i,this.parseParenItem))}var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(_.parenR),a&&this.shouldParseArrow(e)&&this.eat(_.arrow))return this.checkPatternErrors(i,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=r,this.awaitPos=s,this.parseParenArrowList(u,l,e,c);e.length&&!n||this.unexpected(this.lastTokStart),o&&this.unexpected(o),this.checkExpressionErrors(i,!0),this.yieldPos=r||this.yieldPos,this.awaitPos=s||this.awaitPos,1<e.length?((f=this.startNodeAt(h,d)).expressions=e,this.finishNodeAt(f,"SequenceExpression",m,g)):f=e[0]}else f=this.parseParenExpression();return this.options.preserveParens?((a=this.startNodeAt(u,l)).expression=f,this.finishNode(a,"ParenthesizedExpression")):f},t.parseParenItem=function(e){return e},t.parseParenArrowList=function(e,t,n,i){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,i)};const d=[];t.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e,t=this.startNode(),n=this.parseIdent(!0);return 6<=this.options.ecmaVersion&&this.eat(_.dot)?(t.meta=n,n=this.containsEsc,t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")):(n=this.start,e=this.startLoc,t.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),n,e,!0,!1),this.eat(_.parenL)?t.arguments=this.parseExprList(_.parenR,8<=this.options.ecmaVersion,!1):t.arguments=d,this.finishNode(t,"NewExpression"))},t.parseTemplateElement=function({isTagged:e}){var t=this.startNode();return this.type===_.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),t.value={raw:this.value,cooked:null}):t.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),t.tail=this.type===_.backQuote,this.finishNode(t,"TemplateElement")},t.parseTemplate=function({isTagged:e=!1}={}){var t=this.startNode();this.next(),t.expressions=[];let n=this.parseTemplateElement({isTagged:e});for(t.quasis=[n];!n.tail;)this.type===_.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(_.dollarBraceL),t.expressions.push(this.parseExpression()),this.expect(_.braceR),t.quasis.push(n=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(t,"TemplateLiteral")},t.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===_.name||this.type===_.num||this.type===_.string||this.type===_.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===_.star)&&!o.test(this.input.slice(this.lastTokEnd,this.start))},t.parseObj=function(e,t){let n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(_.braceR);){if(i)i=!1;else if(this.expect(_.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma(_.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,r,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},t.parseProperty=function(e,t){let n=this.startNode(),i,r,s,o;if(9<=this.options.ecmaVersion&&this.eat(_.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===_.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===_.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));6<=this.options.ecmaVersion&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(i=this.eat(_.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&8<=this.options.ecmaVersion&&!i&&this.isAsyncProp(n)?(r=!0,i=9<=this.options.ecmaVersion&&this.eat(_.star),this.parsePropertyName(n)):r=!1,this.parsePropertyValue(n,e,i,r,s,o,t,a),this.finishNode(n,"Property")},t.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t="get"===e.kind?0:1;e.value.params.length!==t?(t=e.value.start,"get"===e.kind?this.raiseRecoverable(t,"getter should have no params"):this.raiseRecoverable(t,"setter should have exactly one param")):"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")},t.parsePropertyValue=function(e,t,n,i,r,s,o,a){(n||i)&&this.type===_.colon&&this.unexpected(),this.eat(_.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):6<=this.options.ecmaVersion&&this.type===_.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,i)):t||a||!(5<=this.options.ecmaVersion)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===_.comma||this.type===_.braceR||this.type===_.eq?6<=this.options.ecmaVersion&&!e.computed&&"Identifier"===e.key.type?((n||i)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=r),e.kind="init",t?e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key)):this.type===_.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected():((n||i)&&this.unexpected(),this.parseGetterSetter(e))},t.parsePropertyName=function(e){if(6<=this.options.ecmaVersion){if(this.eat(_.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(_.bracketR),e.key;e.computed=!1}return e.key=this.type===_.num||this.type===_.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},t.initFunction=function(e){e.id=null,6<=this.options.ecmaVersion&&(e.generator=e.expression=!1),8<=this.options.ecmaVersion&&(e.async=!1)},t.parseMethod=function(e,t,n){var i=this.startNode(),r=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(i),6<=this.options.ecmaVersion&&(i.generator=e),8<=this.options.ecmaVersion&&(i.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(a(t,i.generator)|l|(n?f:0)),this.expect(_.parenL),i.params=this.parseBindingList(_.parenR,!1,8<=this.options.ecmaVersion),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(i,"FunctionExpression")},t.parseArrowExpression=function(e,t,n,i){var r=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(a(n,!1)|c),this.initFunction(e),8<=this.options.ecmaVersion&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,i),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")},t.parseFunctionBody=function(e,t,n,i){var r=t&&this.type!==_.braceL;let s=this.strict,o=!1;r?(e.body=this.parseMaybeAssign(i),e.expression=!0,this.checkParams(e,!1)):(r=7<=this.options.ecmaVersion&&!this.isSimpleParamList(e.params),s&&!r||(o=this.strictDirective(this.end))&&r&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"),i=this.labels,this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,p),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=i),this.exitScope()},t.isSimpleParamList=function(e){for(var t of e)if("Identifier"!==t.type)return!1;return!0},t.checkParams=function(e,t){var n,i=Object.create(null);for(n of e.params)this.checkLValInnerPattern(n,h,t?null:i)},t.parseExprList=function(t,n,i,r){let s=[],o=!0;for(;!this.eat(t);){if(o)o=!1;else if(this.expect(_.comma),n&&this.afterTrailingComma(t))break;let e;i&&this.type===_.comma?e=null:this.type===_.ellipsis?(e=this.parseSpread(r),r&&this.type===_.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):e=this.parseMaybeAssign(!1,r),s.push(e)}return s},t.checkUnreserved=function({start:e,end:t,name:n}){this.inGenerator&&"yield"===n&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===n&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===n&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==n&&"await"!==n||this.raise(e,`Cannot use ${n} in class static initialization block`),this.keywords.test(n)&&this.raise(e,`Unexpected keyword '${n}'`),this.options.ecmaVersion<6&&-1!==this.input.slice(e,t).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(n)&&(this.inAsync||"await"!==n||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,`The keyword '${n}' is reserved`))},t.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),"await"!==t.name)||this.awaitIdentPos||(this.awaitIdentPos=t.start),t},t.parseIdentNode=function(){var e=this.startNode();return this.type===_.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,"class"!==e.name&&"function"!==e.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),e},t.parsePrivateIdent=function(){var e=this.startNode();return this.type===_.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(0===this.privateNameStack.length?this.raise(e.start,`Private field '#${e.name}' must be declared in an enclosing class`):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e},t.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===_.semi||this.canInsertSemicolon()||this.type!==_.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(_.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},t.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")}}),define("skylark-acorn/location",["./state","./locutil"],function(e,t){"use strict";e=e.Parser;const{Position:n,getLineInfo:i}=t;t=e.prototype;t.raise=function(e,t){var n=i(this.input,e),t=(t+=" ("+n.line+":"+n.column+")",new SyntaxError(t));throw t.pos=e,t.loc=n,t.raisedAt=this.pos,t},t.raiseRecoverable=t.raise,t.curPosition=function(){if(this.options.locations)return new n(this.curLine,this.pos-this.lineStart)}}),define("skylark-acorn/scope",["./state","./scopeflags"],function(e,t){"use strict";e=e.Parser;const{SCOPE_VAR:o,SCOPE_FUNCTION:n,SCOPE_TOP:a,SCOPE_ARROW:i,SCOPE_SIMPLE_CATCH:c,BIND_LEXICAL:u,BIND_SIMPLE_CATCH:l,BIND_FUNCTION:f}=t;t=e.prototype;class r{constructor(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1}}t.enterScope=function(e){this.scopeStack.push(new r(e))},t.exitScope=function(){this.scopeStack.pop()},t.treatFunctionsAsVarInScope=function(e){return e.flags&n||!this.inModule&&e.flags&a},t.declareName=function(t,e,n){let i=!1;if(e===u){var r=this.currentScope();i=-1<r.lexical.indexOf(t)||-1<r.functions.indexOf(t)||-1<r.var.indexOf(t),r.lexical.push(t),this.inModule&&r.flags&a&&delete this.undefinedExports[t]}else if(e===l)this.currentScope().lexical.push(t);else if(e===f){r=this.currentScope();i=this.treatFunctionsAsVar?-1<r.lexical.indexOf(t):-1<r.lexical.indexOf(t)||-1<r.var.indexOf(t),r.functions.push(t)}else for(let e=this.scopeStack.length-1;0<=e;--e){var s=this.scopeStack[e];if(-1<s.lexical.indexOf(t)&&!(s.flags&c&&s.lexical[0]===t)||!this.treatFunctionsAsVarInScope(s)&&-1<s.functions.indexOf(t)){i=!0;break}if(s.var.push(t),this.inModule&&s.flags&a&&delete this.undefinedExports[t],s.flags&o)break}i&&this.raiseRecoverable(n,`Identifier '${t}' has already been declared`)},t.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},t.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},t.currentVarScope=function(){for(let e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&o)return t}},t.currentThisScope=function(){for(let e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&o&&!(t.flags&i))return t}}}),define("skylark-acorn/node",["./state","./locutil"],function(e,t){"use strict";e=e.Parser;const i=t["SourceLocation"];class r{constructor(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new i(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])}}t=e.prototype;function s(e,t,n,i){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=i),this.options.ranges&&(e.range[1]=n),e}return t.startNode=function(){return new r(this,this.start,this.startLoc)},t.startNodeAt=function(e,t){return new r(this,e,t)},t.finishNode=function(e,t){return s.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},t.finishNodeAt=function(e,t,n,i){return s.call(this,e,t,n,i)},t.copyNode=function(e){var t,n=new r(this,e.start,this.startLoc);for(t in e)n[t]=e[t];return n},{Node:r}}),define("skylark-acorn/unicode-property-data",["./util"],function(e){"use strict";const t=e["wordsRegexp"];var e="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",n=e+" Extended_Pictographic",i=n+" EBase EComp EMod EPres ExtPict";const r={9:e,10:n,11:n,12:i,13:i,14:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"};const s={9:"",10:"",11:"",12:"",13:"",14:"Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji"},o="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu";var a,e="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",n=e+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",i=n+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",c=i+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",u=c+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith";const l={9:e,10:n,11:i,12:c,13:u,14:"Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz"},f={};for(const p of[9,10,11,12,13,14])a=p,(a=f[a]={binary:t(r[a]+" "+o),binaryOfStrings:t(s[a]),nonBinary:{General_Category:t(o),Script:t(l[a])}}).nonBinary.Script_Extensions=a.nonBinary.Script,a.nonBinary.gc=a.nonBinary.General_Category,a.nonBinary.sc=a.nonBinary.Script,a.nonBinary.scx=a.nonBinary.Script_Extensions;return f}),define("skylark-acorn/regexp",["./identifier","./state","./unicode-property-data","./util"],function(e,t,n,i){"use strict";const{isIdentifierStart:r,isIdentifierChar:s}=e;e=t.Parser;const{hasOwn:o,codePointToString:a}=i;t=e.prototype;function c(e){return 36===e||40<=e&&e<=43||46===e||63===e||91<=e&&e<=94||123<=e&&e<=125}function u(e){return 65<=e&&e<=90||97<=e&&e<=122}t.validateRegExpFlags=function(t){var n=t.validFlags,i=t.flags;let r=!1,s=!1;for(let e=0;e<i.length;e++){var o=i.charAt(e);-1===n.indexOf(o)&&this.raise(t.start,"Invalid regular expression flag"),-1<i.indexOf(o,e+1)&&this.raise(t.start,"Duplicate regular expression flag"),"u"===o&&(r=!0),"v"===o&&(s=!0)}15<=this.options.ecmaVersion&&r&&s&&this.raise(t.start,"Invalid regular expression flag")},t.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&9<=this.options.ecmaVersion&&0<e.groupNames.length&&(e.switchN=!0,this.regexp_pattern(e))},t.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets"),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(const t of e.backReferenceNames)-1===e.groupNames.indexOf(t)&&e.raise("Invalid named capture referenced")},t.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},t.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},t.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!(e.switchU?!this.regexp_eatAtom(e):!this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},t.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){let e=!1;if(9<=this.options.ecmaVersion&&(e=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!e,!0}return t.pos=e,!1},t.regexp_eatQuantifier=function(e,t=!1){return!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},t.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},t.regexp_eatBracedQuantifier=function(n,i){var r=n.pos;if(n.eat(123)){let e,t=-1;if(this.regexp_eatDecimalDigits(n)&&(e=n.lastIntValue,n.eat(44)&&this.regexp_eatDecimalDigits(n)&&(t=n.lastIntValue),n.eat(125)))return-1!==t&&t<e&&!i&&n.raise("numbers out of order in {} quantifier"),!0;n.switchU&&!i&&n.raise("Incomplete quantifier"),n.pos=r}return!1},t.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},t.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},t.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},t.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(9<=this.options.ecmaVersion?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},t.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},t.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},t.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!c(t)&&(e.lastIntValue=t,e.advance(),!0)},t.regexp_eatPatternCharacters=function(e){for(var t,n=e.pos;-1!==(t=e.current())&&!c(t);)e.advance();return e.pos!==n},t.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||40<=t&&t<=43||46===t||63===t||91===t||94===t||124===t||(e.advance(),0))},t.regexp_groupSpecifier=function(e){e.eat(63)&&(this.regexp_eatGroupName(e)?(-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue)):e.raise("Invalid group"))},t.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},t.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=a(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=a(e.lastIntValue);return!0}return!1},t.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=11<=this.options.ecmaVersion;let i=e.current(n);return e.advance(n),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),n=i,r(n,!0)||36===n||95===n?(e.lastIntValue=i,!0):(e.pos=t,!1)},t.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=11<=this.options.ecmaVersion;let i=e.current(n);return e.advance(n),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),n=i,s(n,!0)||36===n||95===n||8204===n||8205===n?(e.lastIntValue=i,!0):(e.pos=t,!1)},t.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},t.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},t.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},t.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},t.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},t.regexp_eatZero=function(e){return 48===e.current()&&!f(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},t.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},t.regexp_eatControlLetter=function(e){var t=e.current();return!!u(t)&&(e.lastIntValue=t%32,e.advance(),!0)},t.regexp_eatRegExpUnicodeEscapeSequence=function(e,t=!1){var n=e.pos,t=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(t&&55296<=i&&i<=56319){var r=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var s=e.lastIntValue;if(56320<=s&&s<=57343)return e.lastIntValue=1024*(i-55296)+(s-56320)+65536,!0}e.pos=r,e.lastIntValue=i}return!0}if(t&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&0<=(s=e.lastIntValue)&&s<=1114111)return!0;t&&e.raise("Invalid unicode escape"),e.pos=n}return!1},t.regexp_eatIdentityEscape=function(e){var t;return e.switchU?!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0):!(99===(t=e.current())||e.switchN&&107===t||(e.lastIntValue=t,e.advance(),0))},t.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;let t=e.current();if(49<=t&&t<=57){for(;e.lastIntValue=10*e.lastIntValue+(t-48),e.advance(),48<=(t=e.current())&&t<=57;);return!0}return!1};function l(e){return u(e)||95===e}function f(e){return 48<=e&&e<=57}function p(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function h(e){return 65<=e&&e<=70?e-65+10:97<=e&&e<=102?e-97+10:e-48}function d(e){return 48<=e&&e<=55}return t.regexp_eatCharacterClassEscape=function(t){var e,n=t.current();if(100===(e=n)||68===e||115===e||83===e||119===e||87===e)return t.lastIntValue=-1,t.advance(),1;let i=!1;if(t.switchU&&9<=this.options.ecmaVersion&&((i=80===n)||112===n)){t.lastIntValue=-1,t.advance();let e;if(t.eat(123)&&(e=this.regexp_eatUnicodePropertyValueExpression(t))&&t.eat(125))return i&&2===e&&t.raise("Invalid property name"),e;t.raise("Invalid property name")}return 0},t.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n,i=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e))return n=e.lastStringValue,this.regexp_validateUnicodePropertyNameAndValue(e,i,n),1}return e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)?(i=e.lastStringValue,this.regexp_validateUnicodePropertyNameOrValue(e,i)):0},t.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){o(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},t.regexp_validateUnicodePropertyNameOrValue=function(e,t){return e.unicodeProperties.binary.test(t)?1:e.switchV&&e.unicodeProperties.binaryOfStrings.test(t)?2:void e.raise("Invalid property name")},t.regexp_eatUnicodePropertyName=function(e){var t;for(e.lastStringValue="";l(t=e.current());)e.lastStringValue+=a(t),e.advance();return""!==e.lastStringValue},t.regexp_eatUnicodePropertyValue=function(e){var t,n;for(e.lastStringValue="";l(n=t=e.current())||f(n);)e.lastStringValue+=a(t),e.advance();return""!==e.lastStringValue},t.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},t.regexp_eatCharacterClass=function(e){var t,n;return!!e.eat(91)&&(t=e.eat(94),n=this.regexp_classContents(e),e.eat(93)||e.raise("Unterminated character class"),t&&2===n&&e.raise("Negated character class may contain strings"),!0)},t.regexp_classContents=function(e){if(93!==e.current()){if(e.switchV)return this.regexp_classSetExpression(e);this.regexp_nonEmptyClassRanges(e)}return 1},t.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t,n=e.lastIntValue;e.eat(45)&&this.regexp_eatClassAtom(e)&&(t=e.lastIntValue,!e.switchU||-1!==n&&-1!==t||e.raise("Invalid character class"),-1!==n)&&-1!==t&&t<n&&e.raise("Range out of order in character class")}},t.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){const n=e.current();99!==n&&!d(n)||e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}const n=e.current();return 93!==n&&(e.lastIntValue=n,e.advance(),!0)},t.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},t.regexp_classSetExpression=function(e){let t=1,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){2===n&&(t=2);for(var i=e.pos;e.eatChars([38,38]);)38!==e.current()&&(n=this.regexp_eatClassSetOperand(e))?2!==n&&(t=1):e.raise("Invalid character in character class");if(i!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(i!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(!(n=this.regexp_eatClassSetOperand(e)))return t;2===n&&(t=2)}},t.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n,i=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e))return n=e.lastIntValue,-1!==i&&-1!==n&&n<i&&e.raise("Range out of order in character class"),!0;e.pos=t}return!1},t.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?1:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)},t.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),i=this.regexp_classContents(e);if(e.eat(93))return n&&2===i&&e.raise("Negated character class may contain strings"),i;e.pos=t}if(e.eat(92)){n=this.regexp_eatCharacterClassEscape(e);if(n)return n;e.pos=t}return null},t.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null},t.regexp_classStringDisjunctionContents=function(e){let t=this.regexp_classString(e);for(;e.eat(124);)2===this.regexp_classString(e)&&(t=2);return t},t.regexp_classString=function(e){let t=0;for(;this.regexp_eatClassSetCharacter(e);)t++;return 1===t?1:2},t.regexp_eatClassSetCharacter=function(e){var t,n=e.pos;return e.eat(92)?!(!this.regexp_eatCharacterEscape(e)&&!this.regexp_eatClassSetReservedPunctuator(e)&&(e.eat(98)?(e.lastIntValue=8,0):(e.pos=n,1))):!((n=e.current())<0||n===e.lookahead()&&(33===(t=n)||35<=t&&t<=38||42<=t&&t<=44||46===t||58<=t&&t<=64||94===t||96===t||126===t)||40===(t=n)||41===t||45===t||47===t||91<=t&&t<=93||123<=t&&t<=125||(e.advance(),e.lastIntValue=n,0))},t.regexp_eatClassSetReservedPunctuator=function(e){var t,n=e.current();return(33===(t=n)||35===t||37===t||38===t||44===t||45===t||58<=t&&t<=62||64===t||96===t||126===t)&&(e.lastIntValue=n,e.advance(),!0)},t.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!f(t)&&95!==t||(e.lastIntValue=t%32,e.advance(),0))},t.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},t.regexp_eatDecimalDigits=function(e){var t,n=e.pos;for(e.lastIntValue=0;f(t=e.current());)e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();return e.pos!==n},t.regexp_eatHexDigits=function(e){var t,n=e.pos;for(e.lastIntValue=0;p(t=e.current());)e.lastIntValue=16*e.lastIntValue+h(t),e.advance();return e.pos!==n},t.regexp_eatLegacyOctalEscapeSequence=function(e){var t,n;return!!this.regexp_eatOctalDigit(e)&&(t=e.lastIntValue,this.regexp_eatOctalDigit(e)?(n=e.lastIntValue,t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n):e.lastIntValue=t,!0)},t.regexp_eatOctalDigit=function(e){var t=e.current();return d(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},t.regexp_eatFixedHexDigits=function(t,n){var i=t.pos;for(let e=t.lastIntValue=0;e<n;++e){var r=t.current();if(!p(r))return t.pos=i,!1;t.lastIntValue=16*t.lastIntValue+h(r),t.advance()}return!0},{RegExpValidationState:class{constructor(e){this.parser=e,this.validFlags="gim"+(6<=e.options.ecmaVersion?"uy":"")+(9<=e.options.ecmaVersion?"s":"")+(13<=e.options.ecmaVersion?"d":"")+(15<=e.options.ecmaVersion?"v":""),this.unicodeProperties=n[14<=e.options.ecmaVersion?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]}reset(e,t,n){var i=-1!==n.indexOf("v"),r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,i&&15<=this.parser.options.ecmaVersion?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=r&&6<=this.parser.options.ecmaVersion,this.switchV=!1,this.switchN=r&&9<=this.parser.options.ecmaVersion)}raise(e){this.parser.raiseRecoverable(this.start,`Invalid regular expression: /${this.source}/: `+e)}at(e,t=!1){var n,i=this.source,r=i.length;return r<=e?-1:(n=i.charCodeAt(e),!(!t&&!this.switchU||n<=55295||57344<=n||r<=e+1)&&56320<=(t=i.charCodeAt(e+1))&&t<=57343?(n<<10)+t-56613888:n)}nextIndex(e,t=!1){var n=this.source,i=n.length;if(i<=e)return i;let r=n.charCodeAt(e),s;return!t&&!this.switchU||r<=55295||57344<=r||i<=e+1||(s=n.charCodeAt(e+1))<56320||57343<s?e+1:e+2}current(e=!1){return this.at(this.pos,e)}lookahead(e=!1){return this.at(this.nextIndex(this.pos,e),e)}advance(e=!1){this.pos=this.nextIndex(this.pos,e)}eat(e,t=!1){return this.current(t)===e&&(this.advance(t),!0)}eatChars(e,t=!1){let n=this.pos;for(const r of e){var i=this.at(n,t);if(-1===i||i!==r)return!1;n=this.nextIndex(n,t)}return this.pos=n,!0}}}}),define("skylark-acorn/tokenize",["./identifier","./tokentype","./state","./locutil","./regexp","./whitespace","./util"],function(e,t,n,i,r,s,o){"use strict";const{isIdentifierStart:a,isIdentifierChar:c}=e,{types:u,keywords:l}=t;e=n.Parser;const f=i["SourceLocation"],p=r["RegExpValidationState"],{lineBreak:h,nextLineBreak:d,isNewLine:m,nonASCIIwhitespace:g}=s,_=o["codePointToString"];class v{constructor(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new f(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])}}t=e.prototype;function y(e){return"function"!=typeof BigInt?null:BigInt(e.replace(/_/g,""))}t.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new v(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},t.getToken=function(){return this.next(),new v(this)},"undefined"!=typeof Symbol&&(t[Symbol.iterator]=function(){return{next:()=>{var e=this.getToken();return{done:e.type===u.eof,value:e}}}}),t.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(u.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},t.readToken=function(e){return a(e,6<=this.options.ecmaVersion)||92===e?this.readWord():this.getTokenFromCode(e)},t.fullCharCodeAtPos=function(){var e,t=this.input.charCodeAt(this.pos);return t<=55295||56320<=t||(e=this.input.charCodeAt(this.pos+1))<=56319||57344<=e?t:(t<<10)+e-56613888},t.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),n=this.pos,t=this.input.indexOf("*/",this.pos+=2);if(-1===t&&this.raise(this.pos-2,"Unterminated comment"),this.pos=t+2,this.options.locations)for(let e,t=n;-1<(e=d(this.input,t,this.pos));)++this.curLine,t=this.lineStart=e;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,t),n,this.pos,e,this.curPosition())},t.skipLineComment=function(e){var t=this.pos,n=this.options.onComment&&this.curPosition();let i=this.input.charCodeAt(this.pos+=e);for(;this.pos<this.input.length&&!m(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},t.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(8<e&&e<14||5760<=e&&g.test(String.fromCharCode(e))))break e;++this.pos}}},t.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},t.readToken_dot=function(){var e,t=this.input.charCodeAt(this.pos+1);return 48<=t&&t<=57?this.readNumber(!0):(e=this.input.charCodeAt(this.pos+2),6<=this.options.ecmaVersion&&46===t&&46===e?(this.pos+=3,this.finishToken(u.ellipsis)):(++this.pos,this.finishToken(u.dot)))},t.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(u.assign,2):this.finishOp(u.slash,1)},t.readToken_mult_modulo_exp=function(e){let t=this.input.charCodeAt(this.pos+1),n=1,i=42===e?u.star:u.modulo;return 7<=this.options.ecmaVersion&&42===e&&42===t&&(++n,i=u.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(u.assign,n+1):this.finishOp(i,n)},t.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t!==e)return 61===t?this.finishOp(u.assign,2):this.finishOp(124===e?u.bitwiseOR:u.bitwiseAND,1);if(12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2))return this.finishOp(u.assign,3);return this.finishOp(124===e?u.logicalOR:u.logicalAND,2)},t.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(u.assign,2):this.finishOp(u.bitwiseXOR,1)},t.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!h.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(u.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(u.assign,2):this.finishOp(u.plusMin,1)},t.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1);let n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(u.assign,n+1):this.finishOp(u.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(u.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},t.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(u.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(u.arrow)):this.finishOp(61===e?u.eq:u.prefix,1)},t.readToken_question=function(){var e=this.options.ecmaVersion;if(11<=e){var t=this.input.charCodeAt(this.pos+1);if(46===t){var n=this.input.charCodeAt(this.pos+2);if(n<48||57<n)return this.finishOp(u.questionDot,2)}if(63===t){if(12<=e)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(u.assign,3);return this.finishOp(u.coalesce,2)}}return this.finishOp(u.question,1)},t.readToken_numberSign=function(){var e=this.options.ecmaVersion;let t=35;if(13<=e&&(++this.pos,t=this.fullCharCodeAtPos(),a(t,!0)||92===t))return this.finishToken(u.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+_(t)+"'")},t.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(u.parenL);case 41:return++this.pos,this.finishToken(u.parenR);case 59:return++this.pos,this.finishToken(u.semi);case 44:return++this.pos,this.finishToken(u.comma);case 91:return++this.pos,this.finishToken(u.bracketL);case 93:return++this.pos,this.finishToken(u.bracketR);case 123:return++this.pos,this.finishToken(u.braceL);case 125:return++this.pos,this.finishToken(u.braceR);case 58:return++this.pos,this.finishToken(u.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(u.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(u.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+_(e)+"'")},t.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},t.readRegexp=function(){let e,t,n=this.pos;for(;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(h.test(i)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===i)t=!0;else if("]"===i&&t)t=!1;else if("/"===i&&!t)break;e="\\"===i}++this.pos}var r=this.input.slice(n,this.pos),s=(++this.pos,this.pos),o=this.readWord1(),s=(this.containsEsc&&this.unexpected(s),this.regexpState||(this.regexpState=new p(this)));s.reset(n,r,o),this.validateRegExpFlags(s),this.validateRegExpPattern(s);let a=null;try{a=new RegExp(r,o)}catch(e){}return this.finishToken(u.regexp,{pattern:r,flags:o,value:a})},t.readInt=function(i,t,e){var r=12<=this.options.ecmaVersion&&void 0===t,s=e&&48===this.input.charCodeAt(this.pos);let n=this.pos,o=0,a=0;for(let n=0,e=null==t?1/0:t;n<e;++n,++this.pos){let e=this.input.charCodeAt(this.pos),t;if(r&&95===e)s&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===a&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===n&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=e;else{if((t=97<=e?e-97+10:65<=e?e-65+10:48<=e&&e<=57?e-48:1/0)>=i)break;a=e,o=o*i+t}}return r&&95===a&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===n||null!=t&&this.pos-n!==t?null:o},t.readRadixNumber=function(e){var t=this.pos;this.pos+=2;let n=this.readInt(e);return null==n&&this.raise(this.start+2,"Expected number in radix "+e),11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(n=y(this.input.slice(t,this.pos)),++this.pos):a(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(u.num,n)},t.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10,void 0,!0)||this.raise(t,"Invalid number");let n=2<=this.pos-t&&48===this.input.charCodeAt(t),i=(n&&this.strict&&this.raise(t,"Invalid number"),this.input.charCodeAt(this.pos));if(!n&&!e&&11<=this.options.ecmaVersion&&110===i)return e=y(this.input.slice(t,this.pos)),++this.pos,a(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(u.num,e);n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),46!==i||n||(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),69!==i&&101!==i||n||(43!==(i=this.input.charCodeAt(++this.pos))&&45!==i||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),a(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");e=this.input.slice(t,this.pos);t=n?parseInt(e,8):parseFloat(e.replace(/_/g,""));return this.finishToken(u.num,t)},t.readCodePoint=function(){let e=this.input.charCodeAt(this.pos),t;var n;return 123===e?(this.options.ecmaVersion<6&&this.unexpected(),n=++this.pos,t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,1114111<t&&this.invalidStringToken(n,"Code point out of bounds")):t=this.readHexChar(4),t},t.readString=function(e){let t="",n=++this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===e)break;92===i?(t=(t+=this.input.slice(n,this.pos))+this.readEscapedChar(!1),n=this.pos):8232===i||8233===i?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(m(i)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(u.string,t)};const b={};return t.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==b)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},t.invalidStringToken=function(e,t){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw b;this.raise(e,t)},t.readTmplToken=function(){let e="",t=this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==u.template&&this.type!==u.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(u.template,e)):36===n?(this.pos+=2,this.finishToken(u.dollarBraceL)):(++this.pos,this.finishToken(u.backQuote));if(92===n)e=(e+=this.input.slice(t,this.pos))+this.readEscapedChar(!0),t=this.pos;else if(m(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},t.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(u.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},t.readEscapedChar=function(n){let i=this.input.charCodeAt(++this.pos);switch(++this.pos,i){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return _(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:var e;this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),n&&(e=this.pos-1,this.invalidStringToken(e,"Invalid escape sequence in template string"));default:if(48<=i&&i<=55){let e=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],t=parseInt(e,8);return 255<t&&(e=e.slice(0,-1),t=parseInt(e,8)),this.pos+=e.length-1,i=this.input.charCodeAt(this.pos),"0"===e&&56!==i&&57!==i||!this.strict&&!n||this.invalidStringToken(this.pos-1-e.length,n?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(t)}return m(i)?"":String.fromCharCode(i)}},t.readHexChar=function(e){var t=this.pos,e=this.readInt(16,e);return null===e&&this.invalidStringToken(t,"Bad character escape sequence"),e},t.readWord1=function(){let e="",t=!(this.containsEsc=!1),n=this.pos;for(var i=6<=this.options.ecmaVersion;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(c(r,i))this.pos+=r<=65535?1:2;else{if(92!==r)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var r=this.pos,s=(117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,this.readCodePoint());(t?a:c)(s,i)||this.invalidStringToken(r,"Invalid Unicode escape"),e+=_(s),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},t.readWord=function(){var e=this.readWord1();let t=u.name;return this.keywords.test(e)&&(t=l[e]),this.finishToken(t,e)},{Token:v}}),define("skylark-acorn/main",["./state","./parseutil","./statement","./lval","./expression","./location","./scope","./options","./locutil","./node","./tokentype","./tokencontext","./identifier","./tokenize","./whitespace"],function(e,t,n,i,r,s,o,a,c,u,l,f,p,h,d){"use strict";const m=e["Parser"];var e=a["defaultOptions"],{Position:a,SourceLocation:c,getLineInfo:g}=c,u=u["Node"],{TokenType:l,types:_,keywords:v}=l,{TokContext:f,types:y}=f,{isIdentifierChar:p,isIdentifierStart:b}=p,h=h["Token"],{isNewLine:d,lineBreak:x,lineBreakG:w,nonASCIIwhitespace:S}=d;return m.acorn={Parser:m,version:"8.10.0",defaultOptions:e,Position:a,SourceLocation:c,getLineInfo:g,Node:u,TokenType:l,tokTypes:_,keywordTypes:v,TokContext:f,tokContexts:y,isIdentifierChar:p,isIdentifierStart:b,Token:h,isNewLine:d,lineBreak:x,lineBreakG:w,nonASCIIwhitespace:S},{version:"8.10.0",Parser:m,defaultOptions:e,Position:a,SourceLocation:c,getLineInfo:g,Node:u,TokenType:l,tokTypes:_,keywordTypes:v,TokContext:f,tokContexts:y,isIdentifierChar:p,isIdentifierStart:b,Token:h,isNewLine:d,lineBreak:x,lineBreakG:w,nonASCIIwhitespace:S,parse:function(e,t){return m.parse(e,t)},parseExpressionAt:function(e,t,n){return m.parseExpressionAt(e,t,n)},tokenizer:function(e,t){return m.tokenizer(e,t)}}}),define("skylark-acorn",["skylark-acorn/main"],function(e){return e}),define("skylark-acorn/plugins/jsx",[],function(){const d={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"},m=/^[\da-fA-F]+$/,g=/^\d+$/,c=new WeakMap;function _(e){e=e.Parser.acorn||e;let t=c.get(e);if(!t){const r=e.tokTypes;var n=e.TokContext,i=e.TokenType;const s=new n("<tag",!1),o=new n("</tag",!1),a=new n("<tag>...</tag>",!0,!0);n={tc_oTag:s,tc_cTag:o,tc_expr:a},i={jsxName:new i("jsxName"),jsxText:new i("jsxText",{beforeExpr:!0}),jsxTagStart:new i("jsxTagStart",{startsExpr:!0}),jsxTagEnd:new i("jsxTagEnd")};i.jsxTagStart.updateContext=function(){this.context.push(a),this.context.push(s),this.exprAllowed=!1},i.jsxTagEnd.updateContext=function(e){var t=this.context.pop();t===s&&e===r.slash||t===o?(this.context.pop(),this.exprAllowed=this.curContext()===a):this.exprAllowed=!0},t={tokContexts:n,tokTypes:i},c.set(e,t)}return t}function v(e){return e&&("JSXIdentifier"===e.type?e.name:"JSXNamespacedName"===e.type?e.namespace.name+":"+e.name.name:"JSXMemberExpression"===e.type?v(e.object)+"."+v(e.property):void 0)}function e(h){return h=h||{},function(e){{var r={allowNamespaces:!1!==h.allowNamespaces,allowNamespacedObjects:!!h.allowNamespacedObjects};const t=e.acorn||require("acorn"),n=_(t),a=t.tokTypes,c=n.tokTypes,i=t.tokContexts,s=n.tokContexts.tc_oTag,o=n.tokContexts.tc_cTag,u=n.tokContexts.tc_expr,l=t.isNewLine,f=t.isIdentifierStart,p=t.isIdentifierChar;return class extends e{static get acornJsx(){return n}jsx_readToken(){let e="",t=this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated JSX contents");var n=this.input.charCodeAt(this.pos);switch(n){case 60:case 123:return this.pos===this.start?60===n&&this.exprAllowed?(++this.pos,this.finishToken(c.jsxTagStart)):this.getTokenFromCode(n):(e+=this.input.slice(t,this.pos),this.finishToken(c.jsxText,e));case 38:e=(e+=this.input.slice(t,this.pos))+this.jsx_readEntity(),t=this.pos;break;case 62:case 125:this.raise(this.pos,"Unexpected token `"+this.input[this.pos]+"`. Did you mean `"+(62===n?"&gt;":"&rbrace;")+'` or `{"'+this.input[this.pos]+'"}`?');default:l(n)?(e=(e+=this.input.slice(t,this.pos))+this.jsx_readNewLine(!0),t=this.pos):++this.pos}}}jsx_readNewLine(e){var t=this.input.charCodeAt(this.pos);let n;return++this.pos,n=13===t&&10===this.input.charCodeAt(this.pos)?(++this.pos,e?"\n":"\r\n"):String.fromCharCode(t),this.options.locations&&(++this.curLine,this.lineStart=this.pos),n}jsx_readString(e){let t="",n=++this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===e)break;38===i?(t=(t+=this.input.slice(n,this.pos))+this.jsx_readEntity(),n=this.pos):l(i)?(t=(t+=this.input.slice(n,this.pos))+this.jsx_readNewLine(!1),n=this.pos):++this.pos}return t+=this.input.slice(n,this.pos++),this.finishToken(a.string,t)}jsx_readEntity(){let e="",t=0,n;"&"!==this.input[this.pos]&&this.raise(this.pos,"Entity must start with an ampersand");for(var i,r=++this.pos;this.pos<this.input.length&&t++<10;){if(";"===(i=this.input[this.pos++])){"#"===e[0]?"x"===e[1]?(e=e.substr(2),m.test(e)&&(n=String.fromCharCode(parseInt(e,16)))):(e=e.substr(1),g.test(e)&&(n=String.fromCharCode(parseInt(e,10)))):n=d[e];break}e+=i}return n||(this.pos=r,"&")}jsx_readWord(){for(var e,t=this.pos;e=this.input.charCodeAt(++this.pos),p(e)||45===e;);return this.finishToken(c.jsxName,this.input.slice(t,this.pos))}jsx_parseIdentifier(){var e=this.startNode();return this.type===c.jsxName?e.name=this.value:this.type.keyword?e.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(e,"JSXIdentifier")}jsx_parseNamespacedName(){var e=this.start,t=this.startLoc,n=this.jsx_parseIdentifier();return r.allowNamespaces&&this.eat(a.colon)?((e=this.startNodeAt(e,t)).namespace=n,e.name=this.jsx_parseIdentifier(),this.finishNode(e,"JSXNamespacedName")):n}jsx_parseElementName(){if(this.type===c.jsxTagEnd)return"";var e=this.start,t=this.startLoc;let n=this.jsx_parseNamespacedName();for(this.type!==a.dot||"JSXNamespacedName"!==n.type||r.allowNamespacedObjects||this.unexpected();this.eat(a.dot);){var i=this.startNodeAt(e,t);i.object=n,i.property=this.jsx_parseIdentifier(),n=this.finishNode(i,"JSXMemberExpression")}return n}jsx_parseAttributeValue(){switch(this.type){case a.braceL:var e=this.jsx_parseExpressionContainer();return"JSXEmptyExpression"===e.expression.type&&this.raise(e.start,"JSX attributes must only be assigned a non-empty expression"),e;case c.jsxTagStart:case a.string:return this.parseExprAtom();default:this.raise(this.start,"JSX value should be either an expression or a quoted JSX text")}}jsx_parseEmptyExpression(){var e=this.startNodeAt(this.lastTokEnd,this.lastTokEndLoc);return this.finishNodeAt(e,"JSXEmptyExpression",this.start,this.startLoc)}jsx_parseExpressionContainer(){var e=this.startNode();return this.next(),e.expression=this.type===a.braceR?this.jsx_parseEmptyExpression():this.parseExpression(),this.expect(a.braceR),this.finishNode(e,"JSXExpressionContainer")}jsx_parseAttribute(){var e=this.startNode();return this.eat(a.braceL)?(this.expect(a.ellipsis),e.argument=this.parseMaybeAssign(),this.expect(a.braceR),this.finishNode(e,"JSXSpreadAttribute")):(e.name=this.jsx_parseNamespacedName(),e.value=this.eat(a.eq)?this.jsx_parseAttributeValue():null,this.finishNode(e,"JSXAttribute"))}jsx_parseOpeningElementAt(e,t){var n=this.startNodeAt(e,t),e=(n.attributes=[],this.jsx_parseElementName());for(e&&(n.name=e);this.type!==a.slash&&this.type!==c.jsxTagEnd;)n.attributes.push(this.jsx_parseAttribute());return n.selfClosing=this.eat(a.slash),this.expect(c.jsxTagEnd),this.finishNode(n,e?"JSXOpeningElement":"JSXOpeningFragment")}jsx_parseClosingElementAt(e,t){e=this.startNodeAt(e,t),t=this.jsx_parseElementName();return t&&(e.name=t),this.expect(c.jsxTagEnd),this.finishNode(e,t?"JSXClosingElement":"JSXClosingFragment")}jsx_parseElementAt(e,t){var n=this.startNodeAt(e,t),i=[],r=this.jsx_parseOpeningElementAt(e,t);let s=null;if(!r.selfClosing){e:for(;;)switch(this.type){case c.jsxTagStart:if(e=this.start,t=this.startLoc,this.next(),this.eat(a.slash)){s=this.jsx_parseClosingElementAt(e,t);break e}i.push(this.jsx_parseElementAt(e,t));break;case c.jsxText:i.push(this.parseExprAtom());break;case a.braceL:i.push(this.jsx_parseExpressionContainer());break;default:this.unexpected()}v(s.name)!==v(r.name)&&this.raise(s.start,"Expected corresponding JSX closing tag for <"+v(r.name)+">")}var o=r.name?"Element":"Fragment";return n["opening"+o]=r,n["closing"+o]=s,n.children=i,this.type===a.relational&&"<"===this.value&&this.raise(this.start,"Adjacent JSX elements must be wrapped in an enclosing tag"),this.finishNode(n,"JSX"+o)}jsx_parseText(){var e=this.parseLiteral(this.value);return e.type="JSXText",e}jsx_parseElement(){var e=this.start,t=this.startLoc;return this.next(),this.jsx_parseElementAt(e,t)}parseExprAtom(e){return this.type===c.jsxText?this.jsx_parseText():this.type===c.jsxTagStart?this.jsx_parseElement():super.parseExprAtom(e)}readToken(e){var t=this.curContext();if(t===u)return this.jsx_readToken();if(t===s||t===o){if(f(e))return this.jsx_readWord();if(62==e)return++this.pos,this.finishToken(c.jsxTagEnd);if((34===e||39===e)&&t==s)return this.jsx_readString(e)}return 60===e&&this.exprAllowed&&33!==this.input.charCodeAt(this.pos+1)?(++this.pos,this.finishToken(c.jsxTagStart)):super.readToken(e)}updateContext(e){if(this.type==a.braceL){var t=this.curContext();t==s?this.context.push(i.b_expr):t==u?this.context.push(i.b_tmpl):super.updateContext(e),this.exprAllowed=!0}else{if(this.type!==a.slash||e!==c.jsxTagStart)return super.updateContext(e);this.context.length-=2,this.context.push(o),this.exprAllowed=!1}}}}}}return Object.defineProperty(e,"tokTypes",{get:function(){return _(require("acorn")).tokTypes},configurable:!0,enumerable:!0}),e}),define("skylark-espree/lib/token-translator",[],function(){const a={Boolean:"Boolean",EOF:"<end>",Identifier:"Identifier",PrivateIdentifier:"PrivateIdentifier",Keyword:"Keyword",Null:"Null",Numeric:"Numeric",Punctuator:"Punctuator",String:"String",RegularExpression:"RegularExpression",Template:"Template",JSXIdentifier:"JSXIdentifier",JSXText:"JSXText"};function e(e,t){this._acornTokTypes=e,this._tokens=[],this._curlyBrace=null,this._code=t}return e.prototype={constructor:e,translate(e,t){var n=e.type,i=this._acornTokTypes;return n===i.name?(e.type=a.Identifier,"static"===e.value&&(e.type=a.Keyword),5<t.ecmaVersion&&("yield"===e.value||"let"===e.value)&&(e.type=a.Keyword)):n===i.privateId?e.type=a.PrivateIdentifier:n===i.semi||n===i.comma||n===i.parenL||n===i.parenR||n===i.braceL||n===i.braceR||n===i.dot||n===i.bracketL||n===i.colon||n===i.question||n===i.bracketR||n===i.ellipsis||n===i.arrow||n===i.jsxTagStart||n===i.incDec||n===i.starstar||n===i.jsxTagEnd||n===i.prefix||n===i.questionDot||n.binop&&!n.keyword||n.isAssign?(e.type=a.Punctuator,e.value=this._code.slice(e.start,e.end)):n===i.jsxName?e.type=a.JSXIdentifier:"jsxText"===n.label||n===i.jsxAttrValueToken?e.type=a.JSXText:n.keyword?"true"===n.keyword||"false"===n.keyword?e.type=a.Boolean:"null"===n.keyword?e.type=a.Null:e.type=a.Keyword:n===i.num?(e.type=a.Numeric,e.value=this._code.slice(e.start,e.end)):n===i.string?(t.jsxAttrValueToken?(t.jsxAttrValueToken=!1,e.type=a.JSXText):e.type=a.String,e.value=this._code.slice(e.start,e.end)):n===i.regexp&&(e.type=a.RegularExpression,t=e.value,e.regex={flags:t.flags,pattern:t.pattern},e.value=`/${t.pattern}/`+t.flags),e},onToken(e,t){const i=this,n=this._acornTokTypes,r=t.tokens,s=this._tokens;function o(){var e,t,n;r.push((e=i._tokens,t=i._code,n=e[0],e=e[e.length-1],t={type:a.Template,value:t.slice(n.start,e.end)},n.loc&&(t.loc={start:n.loc.start,end:e.loc.end}),n.range&&(t.start=n.range[0],t.end=e.range[1],t.range=[t.start,t.end]),t)),i._tokens=[]}e.type===n.eof?this._curlyBrace&&r.push(this.translate(this._curlyBrace,t)):e.type===n.backQuote?(this._curlyBrace&&(r.push(this.translate(this._curlyBrace,t)),this._curlyBrace=null),s.push(e),1<s.length&&o()):e.type===n.dollarBraceL?(s.push(e),o()):e.type===n.braceR?(this._curlyBrace&&r.push(this.translate(this._curlyBrace,t)),this._curlyBrace=e):e.type===n.template||e.type===n.invalidTemplate?(this._curlyBrace&&(s.push(this._curlyBrace),this._curlyBrace=null),s.push(e)):(this._curlyBrace&&(r.push(this.translate(this._curlyBrace,t)),this._curlyBrace=null),r.push(this.translate(e,t)))}},e}),define("skylark-espree/lib/options",[],function(){const a=[3,5,6,7,8,9,10,11,12,13,14,15];function c(){return a[a.length-1]}return{getLatestEcmaVersion:c,getSupportedEcmaVersions:function(){return[...a]},normalizeOptions:function(e){var t=function(e="latest"){let t="latest"===e?c():e;if("number"!=typeof t)throw new Error(`ecmaVersion must be a number or "latest". Received value of type ${typeof e} instead.`);if(2015<=t&&(t-=2009),a.includes(t))return t;throw new Error("Invalid ecmaVersion.")}(e.ecmaVersion),n=function(e="script"){if("script"===e||"module"===e)return e;if("commonjs"===e)return"script";throw new Error("Invalid sourceType.")}(e.sourceType),i=!0===e.range,r=!0===e.loc;if(3!==t&&e.allowReserved)throw new Error("`allowReserved` is only supported when ecmaVersion is 3");if(void 0!==e.allowReserved&&"boolean"!=typeof e.allowReserved)throw new Error("`allowReserved`, when present, must be `true` or `false`");var s=3===t&&(e.allowReserved||"never"),o=e.ecmaFeatures||{},o="commonjs"===e.sourceType||Boolean(o.globalReturn);if("module"===n&&t<6)throw new Error("sourceType 'module' is not supported when ecmaVersion < 2015. Consider adding `{ ecmaVersion: 2015 }` to the parser options.");return Object.assign({},e,{ecmaVersion:t,sourceType:n,ranges:i,locations:r,allowReserved:s,allowReturnOutsideFunction:o})}}}),define("skylark-espree/lib/espree",["./token-translator","./options"],function(s,e){const c=e["normalizeOptions"],u=Symbol("espree's internal state"),t=Symbol("espree's esprimaFinishNode");function l(e,t,n,i,r,s,o){let a;e={type:a=e?"Block":"#!"===o.slice(n,n+2)?"Hashbang":"Line",value:t};return"number"==typeof n&&(e.start=n,e.end=i,e.range=[n,i]),"object"==typeof r&&(e.loc={start:r,end:s}),e}return()=>i=>{const r=Object.assign({},i.acorn.tokTypes);return i.acornJsx&&Object.assign(r,i.acornJsx.tokTypes),class extends i{constructor(e,o){"object"==typeof e&&null!==e||(e={}),"string"==typeof o||o instanceof String||(o=String(o));var t=e.sourceType,e=c(e),n=e.ecmaFeatures||{};const i=!0===e.tokens?new s(r,o):null,a={originalSourceType:t||e.sourceType,tokens:i?[]:null,comments:!0===e.comment?[]:null,impliedStrict:!0===n.impliedStrict&&5<=e.ecmaVersion,ecmaVersion:e.ecmaVersion,jsxAttrValueToken:!1,lastToken:null,templateElements:[]};super({ecmaVersion:e.ecmaVersion,sourceType:e.sourceType,ranges:e.ranges,locations:e.locations,allowReserved:e.allowReserved,allowReturnOutsideFunction:e.allowReturnOutsideFunction,onToken:e=>{i&&i.onToken(e,a),e.type!==r.eof&&(a.lastToken=e)},onComment:(e,t,n,i,r,s)=>{a.comments&&(e=l(e,t,n,i,r,s,o),a.comments.push(e))}},o),this[u]=a}tokenize(){for(;this.next(),this.type!==r.eof;);this.next();var e=this[u],t=e.tokens;return e.comments&&(t.comments=e.comments),t}finishNode(...e){e=super.finishNode(...e);return this[t](e)}finishNodeAt(...e){e=super.finishNodeAt(...e);return this[t](e)}parse(){var e,t=this[u],n=super.parse();return n.sourceType=t.originalSourceType,t.comments&&(n.comments=t.comments),t.tokens&&(n.tokens=t.tokens),n.body.length&&([e]=n.body,n.range&&(n.range[0]=e.range[0]),n.loc&&(n.loc.start=e.loc.start),n.start=e.start),t.lastToken&&(n.range&&(n.range[1]=t.lastToken.range[1]),n.loc&&(n.loc.end=t.lastToken.loc.end),n.end=t.lastToken.end),this[u].templateElements.forEach(e=>{var t=e.tail?1:2;e.start+=-1,e.end+=t,e.range&&(e.range[0]+=-1,e.range[1]+=t),e.loc&&(e.loc.start.column+=-1,e.loc.end.column+=t)}),n}parseTopLevel(e){return this[u].impliedStrict&&(this.strict=!0),super.parseTopLevel(e)}raise(e,t){var n=i.acorn.getLineInfo(this.input,e),t=new SyntaxError(t);throw t.index=e,t.lineNumber=n.line,t.column=n.column+1,t}raiseRecoverable(e,t){this.raise(e,t)}unexpected(e){let t="Unexpected token";if(null!=e){if(this.pos=e,this.options.locations)for(;this.pos<this.lineStart;)this.lineStart=this.input.lastIndexOf("\n",this.lineStart-2)+1,--this.curLine;this.nextToken()}this.end>this.start&&(t+=" "+this.input.slice(this.start,this.end)),this.raise(this.start,t)}jsx_readString(e){e=super.jsx_readString(e);return this.type===r.string&&(this[u].jsxAttrValueToken=!0),e}[t](e){return"TemplateElement"===e.type&&this[u].templateElements.push(e),e.type.includes("Function")&&!e.generator&&(e.generator=!1),e}}}}),define("skylark-espree/lib/version",[],function(){return"main"}),define("skylark-espree/eslint-visitor-keys",[],function(){const s={ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],AwaitExpression:["argument"],BinaryExpression:["left","right"],BlockStatement:["body"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExperimentalRestProperty:["argument"],ExperimentalSpreadProperty:["argument"],ExportAllDeclaration:["exported","source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],ForStatement:["init","test","update","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportExpression:["source"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],JSXAttribute:["name","value"],JSXClosingElement:["name"],JSXClosingFragment:[],JSXElement:["openingElement","children","closingElement"],JSXEmptyExpression:[],JSXExpressionContainer:["expression"],JSXFragment:["openingFragment","children","closingFragment"],JSXIdentifier:[],JSXMemberExpression:["object","property"],JSXNamespacedName:["namespace","name"],JSXOpeningElement:["name","attributes"],JSXOpeningFragment:[],JSXSpreadAttribute:["argument"],JSXSpreadChild:["expression"],JSXText:[],LabeledStatement:["label","body"],Literal:[],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],StaticBlock:["body"],Super:[],SwitchCase:["test","consequent"],SwitchStatement:["discriminant","cases"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};for(const e of Object.keys(s))Object.freeze(s[e]);Object.freeze(s);const t=new Set(["parent","leadingComments","trailingComments"]);function n(e){return!t.has(e)&&"_"!==e[0]}return{KEYS:s,getKeys:function(e){return Object.keys(e).filter(n)},unionWith:function(e){var t=Object.assign({},s);for(const i of Object.keys(e))if(Object.prototype.hasOwnProperty.call(t,i)){var n=new Set(e[i]);for(const r of t[i])n.add(r);t[i]=Object.freeze(Array.from(n))}else t[i]=Object.freeze(Array.from(e[i]));return Object.freeze(t)}}}),define("skylark-espree/espree",["skylark-acorn","skylark-acorn/plugins/jsx","./lib/espree","./lib/version","./lib/options","./eslint-visitor-keys"],function(e,t,n,i,r,s){var{getLatestEcmaVersion:r,getSupportedEcmaVersions:o}=r;const a={_regular:null,_jsx:null,get regular(){return null===this._regular&&(this._regular=e.Parser.extend(n())),this._regular},get jsx(){return null===this._jsx&&(this._jsx=e.Parser.extend(t(),n())),this._jsx},get(e){return Boolean(e&&e.ecmaFeatures&&e.ecmaFeatures.jsx)?this.jsx:this.regular}};const c=s.KEYS;s=function(){let e,t={};for(e in"function"==typeof Object.create&&(t=Object.create(null)),c)Object.hasOwnProperty.call(c,e)&&(t[e]=e);return"function"==typeof Object.freeze&&Object.freeze(t),t}(),r=r(),o=o();return{tokenize:function(e,t){return new(a.get(t))(t=t&&!0===t.tokens?t:Object.assign({},t,{tokens:!0}),e).tokenize()},parse:function(e,t){return new(a.get(t))(t,e).parse()},version:i,name:"espree",VisitorKeys:c,Syntax:s,latestEcmaVersion:r,supportedEcmaVersions:o}}),define("skylark-espree/main",["./espree"],function(e){return e}),define("skylark-espree",["skylark-espree/main"],function(e){return e}),define("skylark-rjs/esprima",["skylark-espree"],function(e){return e}),define("skylark-rjs/parse",["./esprima","./lang"],function(esprima,lang){"use strict";function arrayToString(e){var n="[";return e&&e.forEach(function(e,t){n+=(0<t?",":"")+'"'+lang.jsEscape(e)+'"'}),n+="]"}var argPropName="arguments",emptyScope={},mixin=lang.mixin,hasProp=lang.hasProp;function traverse(e,t){var n;if(e){if(!1===t.call(null,e))return!1;for(var i=0,r=Object.keys(e);i<r.length;i++)if("object"==typeof(n=e[r[i]])&&null!==n&&!1===traverse(n,t))return!1}}function traverseBroad(e,t){var n;if(e){if(!1===t.call(null,e))return!1;for(var i=0,r=Object.keys(e);i<r.length;i++)"object"==typeof(n=e[key])&&null!==n&&traverseBroad(n,t)}}function getValidDeps(e){var t;if(e&&"ArrayExpression"===e.type&&e.elements)return t=[],e.elements.some(function(e){"Literal"===e.type&&t.push(e.value)}),t.length?t:void 0}function isFnExpression(e){return e&&("FunctionExpression"===e.type||"ArrowFunctionExpression"===e.type)}function parse(a,e,t,c){c=c||{};var n,i,r,u=[],s="",l=[],f=!0,t=esprima.parse(t);if(parse.recurse(t,function(e,t,n,i,r,s,o){return i=i||[],"define"!==e||n&&n!==a||(f=!1),n?l.push({name:n,deps:i}):u=u.concat(i),"define"===e&&s&&hasProp(o,s)?s:!!c.findNestedDependencies},c),c.insertNeedsDefine&&f&&(s+='require.needsDefine("'+a+'");'),u.length||l.length){for(n=0;n<l.length;n++)s&&(s+="\n"),(i=l[n]).name===a&&(i.deps=i.deps.concat(u),u=[]),r=arrayToString(i.deps),s+='define("'+i.name+'",'+r+");";u.length&&(s&&(s+="\n"),r=arrayToString(u),s+='define("'+a+'",'+r+");")}return s||null}return parse.traverse=traverse,parse.traverseBroad=traverseBroad,parse.isFnExpression=isFnExpression,parse.recurse=function(e,t,n,i){var r,s,o,a,c,u,l,f=n&&n.has;if(i=i||emptyScope,e)if(f&&"IfStatement"===e.type&&e.test.type&&"Literal"===e.test.type)e.test.value?this.recurse(e.consequent,t,n,i):this.recurse(e.alternate,t,n,i);else if(!1!==(o=this.parseNode(e,t,i))){if("string"==typeof o)return o;if("ExpressionStatement"===e.type&&e.expression&&"CallExpression"===e.expression.type&&e.expression.callee&&isFnExpression(e.expression.callee)&&(l=e.expression.callee),(l="UnaryExpression"===e.type&&e.argument&&"CallExpression"===e.argument.type&&e.argument.callee&&isFnExpression(e.argument.callee)?e.argument.callee:l)&&l.params&&l.params.length)for(c=l.params,i=mixin({},i,!0),a=0;a<c.length;a++)"Identifier"===(u=c[a]).type&&(i[u.name]=!0);for(a=0,r=Object.keys(e);a<r.length&&("object"!=typeof(s=e[r[a]])||null===s||"string"!=typeof(o=this.recurse(s,t,n,i))||!hasProp(i,o));a++);return"string"==typeof o&&hasProp(i,o)?o:void 0}},parse.definesRequire=function(e,t){var n=!1,i=!1;return traverse(esprima.parse(t),function(e){if((n="Program"===e.type&&e.body&&e.body.length?e.body.some(function(e){if("VariableDeclaration"===e.type){var t=e.declarations;if(t)if(t.some(function(e){return"VariableDeclarator"===e.type&&e.id&&"Identifier"===e.id.type&&"define"===e.id.name}))return!0}if("FunctionDeclaration"===e.type&&e.id&&"Identifier"===e.id.type&&"define"===e.id.name)return!0}):n)&&parse.hasDefineAmd(e))return!(i=!0)}),n&&i},parse.getAnonDeps=function(e,t){t="string"==typeof t?esprima.parse(t):t,t=this.findAnonDefineFactory(t);return parse.getAnonDepsFromNode(t)},parse.getAnonDepsFromNode=function(e){var t=[];return t=e&&(this.findRequireDepNames(e,t),e=e.params&&e.params.length)?(1<e?["require","exports","module"]:["require"]).concat(t):t},parse.isDefineNodeWithArgs=function(e){return e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"define"===e.callee.name&&e[argPropName]},parse.findAnonDefineFactory=function(e){var n;return traverse(e,function(e){var t;if(parse.isDefineNodeWithArgs(e))return isFnExpression(t=e[argPropName][0])?(n=t,!1):(e=e[argPropName][1],"Literal"===t.type&&isFnExpression(e)?(n=e,!1):void 0)}),n},parse.findConfig=function(fileContents){var jsConfig,foundConfig,stringData,foundRange,quote,quoteMatch,quoteRegExp=/(:\s|\[\s*)(['"])/,astRoot=esprima.parse(fileContents,{loc:!0});return traverse(astRoot,function(e){var t,n=parse.hasRequire(e);if(!n||"require"!==n&&"requirejs"!==n&&"requireConfig"!==n&&"requirejsConfig"!==n){if(t=parse.getRequireObjectLiteral(e))return stringData=parse.nodeToString(fileContents,t),jsConfig=stringData.value,foundRange=stringData.range,!1}else if((t=e[argPropName]&&e[argPropName][0])&&"ObjectExpression"===t.type)return stringData=parse.nodeToString(fileContents,t),jsConfig=stringData.value,foundRange=stringData.range,!1}),jsConfig&&(quoteMatch=quoteRegExp.exec(jsConfig),quote=quoteMatch&&quoteMatch[2]||'"',foundConfig=eval("("+jsConfig+")")),{config:foundConfig,range:foundRange,quote:quote}},parse.getRequireObjectLiteral=function(e){if(e.id&&"Identifier"===e.id.type&&("require"===e.id.name||"requirejs"===e.id.name)&&e.init&&"ObjectExpression"===e.init.type)return e.init},parse.renameNamespace=function(e,i){var r,s=[],t=esprima.parse(e,{loc:!0});return parse.recurse(t,function(e,t,n,i,r){return s.push(r.loc),"define"!==e},{}),s.length&&(r=e.split("\n"),s.reverse(),s.forEach(function(e){var t=e.start.column,e=e.start.line-1,n=r[e];r[e]=n.substring(0,t)+i+"."+n.substring(t,n.length)}),e=r.join("\n")),e},parse.findDependencies=function(e,t,n){var r=[],t=esprima.parse(t);return parse.recurse(t,function(e,t,n,i){i&&(r=r.concat(i))},n),r},parse.findCjsDependencies=function(e,t){var n=[];return traverse(esprima.parse(t),function(e){e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"require"===e.callee.name&&e[argPropName]&&1===e[argPropName].length&&"Literal"===(e=e[argPropName][0]).type&&n.push(e.value)}),n},parse.hasDefDefine=function(e){return"FunctionDeclaration"===e.type&&e.id&&"Identifier"===e.id.type&&"define"===e.id.name},parse.hasDefineAmd=function(e){return e&&"AssignmentExpression"===e.type&&e.left&&"MemberExpression"===e.left.type&&e.left.object&&"define"===e.left.object.name&&e.left.property&&"amd"===e.left.property.name},parse.refsDefineAmd=function(e){return e&&"MemberExpression"===e.type&&e.object&&"define"===e.object.name&&"Identifier"===e.object.type&&e.property&&"amd"===e.property.name&&"Identifier"===e.property.type},parse.hasRequire=function(e){var t,n=e&&e.callee;return e&&"CallExpression"===e.type&&n&&("Identifier"!==n.type||"require"!==n.name&&"requirejs"!==n.name?"MemberExpression"===n.type&&n.object&&"Identifier"===n.object.type&&("require"===n.object.name||"requirejs"===n.object.name)&&n.property&&"config"===n.property.name&&(t=n.object.name+"Config"):t=n.name),t},parse.hasDefine=function(e){return e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"define"===e.callee.name},parse.getNamedDefine=function(e){var t;return traverse(esprima.parse(e),function(e){if(e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"define"===e.callee.name&&e[argPropName]&&e[argPropName][0]&&"Literal"===e[argPropName][0].type)return t=e[argPropName][0].value,!1}),t},parse.getAllNamedDefines=function(e,a){var c=[];return parse.recurse(esprima.parse(e),function(e,t,n,i,r,s,o){return"define"===e&&n&&!a.hasOwnProperty(n)&&c.push(n),"define"!==e||!s||!hasProp(o,s)||s},{}),c},parse.usesAmdOrRequireJs=function(e,t){var r;return traverse(esprima.parse(t),function(e){var t,n,i;parse.hasDefDefine(e)?t="declaresDefine":parse.hasDefineAmd(e)?t="defineAmd":(n=parse.hasRequire(e))?!(i=e[argPropName]&&e[argPropName][0])||"ObjectExpression"!==i.type&&"ArrayExpression"!==i.type||(t=n):parse.hasDefine(e)&&(t="define"),t&&((r=r||{})[t]=!0)}),r},parse.usesCommonJs=function(e,t){var i=null,r=!1;return traverse(esprima.parse(t),function(e){var t,n=e.expression||e.init;"Identifier"!==e.type||"__dirname"!==e.name&&"__filename"!==e.name?"VariableDeclarator"===e.type&&e.id&&"Identifier"===e.id.type&&"exports"===e.id.name?t="varExports":n&&"AssignmentExpression"===n.type&&n.left&&"MemberExpression"===n.left.type&&n.left.object?"module"===n.left.object.name&&n.left.property&&"exports"===n.left.property.name?t="moduleExports":"exports"===n.left.object.name&&n.left.property?t="exports":"MemberExpression"===n.left.object.type&&"module"===n.left.object.object.name&&"exports"===n.left.object.property.name&&"Identifier"===n.left.object.property.type&&(t="moduleExports"):e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"require"===e.callee.name&&e[argPropName]&&1===e[argPropName].length&&"Literal"===e[argPropName][0].type&&(t="require"):t=e.name.substring(2),t&&("varExports"===t?r=!0:"exports"===t&&r||((i=i||{})[t]=!0))}),i},parse.findRequireDepNames=function(e,t){traverse(e,function(e){e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"require"===e.callee.name&&e[argPropName]&&1===e[argPropName].length&&"Literal"===(e=e[argPropName][0]).type&&t.push(e.value)})},parse.parseNode=function(e,t,n){var i,r,s,o=e&&e[argPropName],a=parse.hasRequire(e),c=!1;if("require"===a||"requirejs"===a){if(i=getValidDeps(a=(a=e[argPropName]&&e[argPropName][0])&&"ArrayExpression"!==a.type&&"ObjectExpression"===a.type?e[argPropName][1]:a))return t("require",null,null,i,e)}else{if(parse.hasDefine(e)&&o&&o.length){if(a=o[0],i=o[1],r=o[2],"ArrayExpression"===a.type?(r=i,i=a,a=null):isFnExpression(a)?(r=a,a=i=null):"Identifier"===a.type&&1===o.length&&hasProp(n,a.name)?(c=!0,r=a,a=null):"Literal"!==a.type&&(a=i=r=null),a&&"Literal"===a.type&&i&&(isFnExpression(i)?(r=i,i=null):"ObjectExpression"===i.type?i=r=null:"Identifier"===i.type&&(2===o.length?i=r=null:3===o.length&&isFnExpression(r)&&(i=null))),i&&"ArrayExpression"===i.type)i=getValidDeps(i);else if(isFnExpression(r))(o=parse.getAnonDepsFromNode(r)).length&&(i=o);else if(i||r&&!c)return;return t("define",null,a=a&&"Literal"===a.type?a.value:a,i,e,r&&"Identifier"===r.type?r.name:void 0,n)}if("CallExpression"===e.type&&e.callee&&isFnExpression(e.callee)&&e.callee.body&&e.callee.body.body&&1===e.callee.body.body.length&&"IfStatement"===e.callee.body.body[0].type&&(o=e.callee.body.body[0]).consequent&&o.consequent.body&&"ExpressionStatement"===(c=o.consequent.body[0]).type&&c.expression&&parse.hasDefine(c.expression)&&c.expression.arguments&&1===c.expression.arguments.length&&"Identifier"===c.expression.arguments[0].type&&(traverse(o.test,function(e){if(parse.refsDefineAmd(e))return!(s=!0)}),s))return t("define",null,null,null,c.expression,c.expression.arguments[0].name,n)}},parse.nodeToString=function(e,t){var t=t.loc,e=e.split("\n"),n=(1<t.start.line?e.slice(0,t.start.line-1).join("\n")+"\n":"")+e[t.start.line-1].substring(0,t.start.column),e=t.start.line===t.end.line?e[t.start.line-1].substring(t.start.column,t.end.column):e[t.start.line-1].substring(t.start.column)+"\n"+e.slice(t.start.line,t.end.line-1).join("\n")+"\n"+e[t.end.line-1].substring(0,t.end.column);return{value:e,range:[n.length,n.length+e.length]}},parse.getLicenseComments=function(e,t){var n,i,r,s,o,a,c=esprima.parse(t,{comment:!0,range:!0}),u="",l={},f=-1===t.indexOf("\r")?"\n":"\r\n";if(c.comments)for(o=0;o<c.comments.length;o++){if("Line"===(n=c.comments[o]).type)if(s="//"+n.value+f,i=n,o+1>=c.comments.length)s+=f;else{for(a=o+1;a<c.comments.length&&("Line"===(r=c.comments[a]).type&&r.range[0]===i.range[1]+1);a++)s+="//"+r.value+f,i=r;s+=f,o=a-1}else s="/*"+n.value+"*/"+f+f;l[s]||-1===s.indexOf("license")&&("Block"!==n.type||0!==s.indexOf("/*!"))&&-1===s.indexOf("opyright")&&-1===s.indexOf("(c)")||(u+=s,l[s]=!0)}return u},parse}),define("skylark-rjs/pragma",["./parse","./logger"],function(parse,logger){"use strict";function Temp(){}function create(e,t){Temp.prototype=e;var n,i=new Temp;if(Temp.prototype=null,t)for(n in t)t.hasOwnProperty(n)&&!i.hasOwnProperty(n)&&(i[n]=t[n]);return i}var pragma={conditionalRegExp:/(exclude|include)Start\s*\(\s*["'](\w+)["']\s*,(.*)\)/,useStrictRegExp:/(^|[^{]\r?\n)['"]use strict['"];/g,hasRegExp:/has\s*\(\s*['"]([^'"]+)['"]\s*\)/g,configRegExp:/(^|[^\.])(requirejs|require)(\.config)\s*\(/g,nsWrapRegExp:/\/\*requirejs namespace: true \*\//,apiDefRegExp:/var requirejs,\s*require,\s*define;/,defineCheckRegExp:/typeof(\s+|\s*\(\s*)define(\s*\))?\s*===?\s*["']function["']\s*&&\s*define\s*\.\s*amd/g,defineStringCheckRegExp:/typeof\s+define\s*===?\s*["']function["']\s*&&\s*define\s*\[\s*["']amd["']\s*\]/g,defineTypeFirstCheckRegExp:/\s*["']function["']\s*==(=?)\s*typeof\s+define\s*&&\s*define\s*\.\s*amd/g,defineJQueryRegExp:/typeof\s+define\s*===?\s*["']function["']\s*&&\s*define\s*\.\s*amd\s*&&\s*define\s*\.\s*amd\s*\.\s*jQuery/g,defineHasRegExp:/typeof\s+define\s*==(=)?\s*['"]function['"]\s*&&\s*typeof\s+define\.amd\s*==(=)?\s*['"]object['"]\s*&&\s*define\.amd/g,defineTernaryRegExp:/typeof\s+define\s*===?\s*['"]function["']\s*&&\s*define\s*\.\s*amd\s*\?\s*define/,defineExistsRegExp:/\s+typeof\s+define\s*!==?\s*['"]undefined["']\s*/,defineExistsAndAmdRegExp:/typeof\s+define\s*!==?\s*['"]undefined["']\s*&&\s*define\s*\.\s*amd\s*/,amdefineRegExp:/if\s*\(\s*typeof define\s*\!==\s*['"]function['"]\s*\)\s*\{\s*[^\{\}]+amdefine[^\{\}]+\}/g,removeStrict:function(e,t){return t.useStrict?e:e.replace(pragma.useStrictRegExp,"$1")},namespace:function(e,t,n){return e=t&&(e=e.replace(pragma.configRegExp,"$1"+t+".$2$3("),e=(e=(e=(e=(e=(e=(e=(e=(e=parse.renameNamespace(e,t)).replace(pragma.defineTernaryRegExp,"typeof "+t+".define === 'function' && "+t+".define.amd ? "+t+".define")).replace(pragma.defineJQueryRegExp,"typeof "+t+".define === 'function' && "+t+".define.amd && "+t+".define.amd.jQuery")).replace(pragma.defineHasRegExp,"typeof "+t+".define === 'function' && typeof "+t+".define.amd === 'object' && "+t+".define.amd")).replace(pragma.defineExistsAndAmdRegExp,"typeof "+t+".define !== 'undefined' && "+t+".define.amd")).replace(pragma.defineCheckRegExp,"typeof "+t+".define === 'function' && "+t+".define.amd")).replace(pragma.defineStringCheckRegExp,"typeof "+t+".define === 'function' && "+t+".define['amd']")).replace(pragma.defineTypeFirstCheckRegExp,"'function' === typeof "+t+".define && "+t+".define.amd")).replace(pragma.defineExistsRegExp,"typeof "+t+".define !== 'undefined'"),pragma.apiDefRegExp.test(e)&&-1===e.indexOf("if (!"+t+" || !"+t+".requirejs)")&&(e="var "+t+";(function () { if (!"+t+" || !"+t+".requirejs) {\nif (!"+t+") { "+t+" = {}; } else { require = "+t+"; }\n"+e+"\n"+t+".requirejs = requirejs;"+t+".require = require;"+t+".define = define;\n}\n}());"),pragma.nsWrapRegExp.test(e))?"(function () {\nvar require = "+t+".require,requirejs = "+t+".requirejs,define = "+t+".define;\n"+(e=e.replace(pragma.nsWrapRegExp,""))+"\n}());":e},process:function(fileName,fileContents,config,onLifecycleName,pluginCollector){var foundIndex=-1,startIndex=0,lineEndIndex,conditionLine,matches,type,marker,condition,isTrue,endRegExp,endMatches,endMarkerIndex,shouldInclude,startLength,lifecycleHas,deps,i,dep,moduleName,collectorMod,lifecyclePragmas,pragmas=config.pragmas,hasConfig=config.has,kwArgs=pragmas;if(onLifecycleName&&(lifecyclePragmas=config["pragmas"+onLifecycleName],lifecycleHas=config["has"+onLifecycleName],lifecyclePragmas&&(pragmas=create(pragmas||{},lifecyclePragmas)),lifecycleHas)&&(hasConfig=create(hasConfig||{},lifecycleHas)),hasConfig&&(fileContents=fileContents.replace(pragma.hasRegExp,function(e,t){return hasConfig.hasOwnProperty(t)?!!hasConfig[t]:e})),!config.skipPragmas)for(;-1!==(foundIndex=fileContents.indexOf("//>>",startIndex));)if(lineEndIndex=fileContents.indexOf("\n",foundIndex),-1===lineEndIndex&&(lineEndIndex=fileContents.length-1),startIndex=lineEndIndex+1,conditionLine=fileContents.substring(foundIndex,lineEndIndex+1),matches=conditionLine.match(pragma.conditionalRegExp),matches){type=matches[1],marker=matches[2],condition=matches[3],isTrue=!1;try{isTrue=!!eval("("+condition+")")}catch(e){throw"Error in file: "+fileName+". Conditional comment: "+conditionLine+" failed with this error: "+e}if(endRegExp=new RegExp("\\/\\/\\>\\>\\s*"+type+"End\\(\\s*['\"]"+marker+"['\"]\\s*\\)","g"),endMatches=endRegExp.exec(fileContents.substring(startIndex,fileContents.length)),!endMatches)throw"Error in file: "+fileName+". Cannot find end marker for conditional comment: "+conditionLine;endMarkerIndex=startIndex+endRegExp.lastIndex-endMatches[0].length,lineEndIndex=fileContents.indexOf("\n",endMarkerIndex),-1===lineEndIndex&&(lineEndIndex=fileContents.length-1),shouldInclude="exclude"===type&&!isTrue||"include"===type&&isTrue,startLength=startIndex-foundIndex,fileContents=fileContents.substring(0,foundIndex)+(shouldInclude?fileContents.substring(startIndex,endMarkerIndex):"")+fileContents.substring(lineEndIndex+1,fileContents.length),startIndex=foundIndex}if(config.optimizeAllPluginResources&&pluginCollector)try{if(deps=parse.findDependencies(fileName,fileContents),deps.length)for(i=0;i<deps.length;i++)dep=deps[i],-1!==dep.indexOf("!")&&(moduleName=dep.split("!")[0],collectorMod=pluginCollector[moduleName],collectorMod=collectorMod||(pluginCollector[moduleName]=[]),collectorMod.push(dep))}catch(eDep){logger.error("Parse error looking for plugin resources in "+fileName+", skipping.")}return config.keepAmdefine||(fileContents=fileContents.replace(pragma.amdefineRegExp,"")),"OnSave"===onLifecycleName&&config.namespace&&(fileContents=pragma.namespace(fileContents,config.namespace,onLifecycleName)),pragma.removeStrict(fileContents,config)}};return pragma}),define("skylark-uglifyjs/utils",[],function(){"use strict";function e(e){Object.defineProperty(e.prototype,"stack",{get:function(){var e=new Error(this.message);e.name=this.name;try{throw e}catch(e){return e.stack}}})}function r(e,t){this.message=e,this.defs=t}((r.prototype=Object.create(Error.prototype)).constructor=r).prototype.name="DefaultsError",e(r);n.is_op=function(e){return e===s||e instanceof o},n.splice=function(e){return new o(e)},s=n.skip={};var s,t=n;function n(e,t){for(var n=[],i=0;i<e.length;i++){var r=t(e[i],i);r!==s&&(r instanceof o?n.push.apply(n,r.v):n.push(r))}return n}function o(e){this.v=e}function i(){this.values=Object.create(null)}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}return i.prototype={set:function(e,t){return"__proto__"==e?this.proto_value=t:this.values[e]=t,this},add:function(e,t){var n=this.get(e);return n?n.push(t):this.set(e,[t]),this},get:function(e){return"__proto__"==e?this.proto_value:this.values[e]},del:function(e){return"__proto__"==e?delete this.proto_value:delete this.values[e],this},has:function(e){return"__proto__"==e?"proto_value"in this:e in this.values},all:function(e){for(var t in this.values)if(!e(this.values[t],t))return!1;return!("proto_value"in this&&!e(this.proto_value,"__proto__"))},each:function(e){for(var t in this.values)e(this.values[t],t);"proto_value"in this&&e(this.proto_value,"__proto__")},size:function(){return Object.keys(this.values).length+("proto_value"in this)},map:function(e){var t,n=[];for(t in this.values)n.push(e(this.values[t],t));return"proto_value"in this&&n.push(e(this.proto_value,"__proto__")),n},clone:function(){var n=new i;return this.each(function(e,t){n.set(t,e)}),n},toObject:function(){var n={};return this.each(function(e,t){n["$"+t]=e}),n}},i.fromObject=function(e){var t,n=new i;for(t in e)a(e,t)&&n.set(t.slice(1),e[t]);return n},{characters:function(e){return e.split("")},member:function(e,t){return 0<=t.indexOf(e)},find_if:function(e,t){for(var n=t.length;0<=--n;)if(e(t[n]))return t[n]},configure_error_stack:e,defaults:function(e,t,n){if(n)for(var i in e)if(a(e,i)&&!a(t,i))throw new r("`"+i+"` is not a supported option",t);for(var i in e)a(e,i)&&(t[i]=e[i]);return t},DefaultsError:r,noop:function(){},return_false:function(){return!1},return_true:function(){return!0},return_this:function(){return this},return_null:function(){return null},List:t,push_uniq:function(e,t){if(e.indexOf(t)<0)return e.push(t)},string_template:function(e,n){return e.replace(/\{([^{}]+)\}/g,function(e,t){t="this"==t?n:n[t];return t instanceof AST_Node?t.print_to_string():t instanceof AST_Token?t.file+":"+t.line+","+t.col:t})},remove:function(e,t){0<=(t=e.indexOf(t))&&e.splice(t,1)},makePredicate:function(e){Array.isArray(e)||(e=e.split(" "));var t=Object.create(null);return e.forEach(function(e){t[e]=!0}),t},all:function(e,t){for(var n=e.length;0<=--n;)if(!t(e[n],n))return!1;return!0},Dictionary:i,HOP:a,DEF_BITPROPS:function(i,e){if(31<e.length)throw new Error("Too many properties: "+e.length+"\n"+e.join(", "));e.forEach(function(e,t){var n=1<<t;Object.defineProperty(i.prototype,e,{get:function(){return!!(this._bits&n)},set:function(e){e?this._bits|=n:this._bits&=~n}})})}}}),define("skylark-uglifyjs/ast",["./utils"],function(j){"use strict";const{HOP:M,List:F,noop:q,DEF_BITPROPS:B,return_true:V,return_this:z}=j;var U;function e(e,t,n,i){void 0===i&&(i=u);var r,s=t=t?t.split(/\s+/):[],o=(i&&i.PROPS&&(t=t.concat(i.PROPS)),["return function AST_",e,"(props){","this._bits=0;","if(props){"]),a=(t.forEach(function(e){o.push("this.",e,"=props.",e,";")}),o.push("}"),Object.create(i&&i.prototype)),c=((n.initialize||a.initialize)&&o.push("this.initialize();"),o.push("};"),new Function(o.join(""))());for(r in c.prototype=a,(c.prototype.CTOR=c).prototype.TYPE=c.TYPE=e,i&&(c.BASE=i).SUBCLASSES.push(c),c.DEFMETHOD=function(e,t){this.prototype[e]=t},c.PROPS=t,c.SELF_PROPS=s,c.SUBCLASSES=[],n)M(n,r)&&(/^\$/.test(r)?c[r.substr(1)]=n[r]:c.DEFMETHOD(r,n[r]));return"undefined"!=typeof exports&&(exports["AST_"+e]=c),c}var j=e("Token","type value line col pos endline endcol endpos nlb comments_before comments_after file raw",{},null),u=e("Node","start end",{_clone:function(e){var t;return e?(t=this.clone()).transform(new Yt(function(e){if(e!==t)return e.clone(!0)})):new this.CTOR(this)},clone:function(e){return this._clone(e)},$documentation:"Base class of all AST nodes",$propdoc:{start:"[AST_Token] The first token of this node",end:"[AST_Token] The last token of this node"},equals:function(e){return this.TYPE==e.TYPE&&this._equals(e)},walk:function(e){e.visit(this)},_validate:function(){if("Node"==this.TYPE)throw new Error("should not instantiate AST_Node")},validate:function(){for(var e=this.CTOR;e.prototype._validate.call(this),e=e.BASE;);},validate_ast:function(){var t={};this.walk(new L(function(e){if(e.validate_visited===t)throw new Error(string_template("cannot reuse AST_{TYPE} from [{start}]",e));e.validate_visited=t}))}},null),$=(B(u,["_optimized","_squeezed","call_only","collapse_scanning","defined","evaluating","falsy","in_arg","in_bool","is_undefined","inlined","length_read","nested","new","optional","private","pure","redundant","single_use","static","terminal","truthy","uses_eval","uses_with"]),(u.log_function=function(t,e){var n;function i(e){n[e]||(n[e]=!0,t(e))}"function"!=typeof t?u.info=u.warn=q:(n=Object.create(null),u.info=e?function(e,t){i("INFO: "+string_template(e,t))}:q,u.warn=function(e,t){i("WARN: "+string_template(e,t))})})(),[]);function i(e,n){return e.length==n.length&&all(e,function(e,t){return e.equals(n[t])})}function r(e,t){return e===t||(null==e?null==t:e instanceof u&&t instanceof u&&e.equals(t))}u.enable_validation=function(){u.disable_validation(),function e(t){var n;t.SUBCLASSES.forEach(e),M(t.prototype,"transform")&&(n=t.prototype.transform,t.prototype.transform=function(e,t){e=n.call(this,e,t);if(e instanceof u)e.validate();else if(!(null===e||t&&F.is_op(e)))throw new Error("invalid transformed value: "+e);return e},$.push(function(){t.prototype.transform=n}))}(this)},u.disable_validation=function(){for(var e;e=$.pop();)e()};var t=e("Statement",null,{$documentation:"Base class of all statements",_validate:function(){if("Statement"==this.TYPE)throw new Error("should not instantiate AST_Statement")}}),H=e("Debugger",null,{$documentation:"Represents a debugger statement",_equals:V},t),s=e("Directive","quote value",{$documentation:'Represents a directive, like "use strict";',$propdoc:{quote:"[string?] the original quote character",value:"[string] The value of this directive as a plain string (it's not an AST_String!)"},_equals:function(e){return this.value==e.value},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},t),G=e("EmptyStatement",null,{$documentation:"The empty statement (empty block or simply a semicolon)",_equals:V},t);function o(e){return e instanceof t&&!(e instanceof ye)&&!(e instanceof g)}function W(e,t,n,i,r){if(n=n?"contain":"be",!(e instanceof u))throw new Error(t+" must "+n+" AST_Node");if(e instanceof We)throw new Error(t+" cannot "+n+" AST_DefaultValue");if(e instanceof A)throw new Error(t+" cannot "+n+" AST_Destructured");if(e instanceof Ut&&!r)throw new Error(t+" cannot "+n+" AST_Hole");if(e instanceof et&&!i)throw new Error(t+" cannot "+n+" AST_Spread");if(o(e))throw new Error(t+" cannot "+n+" AST_Statement");if(e instanceof O)throw new Error(t+" cannot "+n+" AST_SymbolDeclaration")}function n(e,t){W(e[t],t)}var Y=e("SimpleStatement","body",{$documentation:"A statement consisting of an expression, i.e. a = 1 + 2",$propdoc:{body:"[AST_Node] an expression node (should not be instanceof AST_Statement)"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.body.walk(e)})},_validate:function(){n(this,"body")}},t),a=e("BlockScope","_var_names enclosed functions make_def parent_scope variables",{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{enclosed:"[SymbolDef*/S] a list of all symbol definitions that are accessed from this scope or any inner scopes",functions:"[Dictionary/S] like `variables`, but only lists function declarations",parent_scope:"[AST_Scope?/S] link to the parent scope",variables:"[Dictionary/S] a map of name ---\x3e SymbolDef for all variables/functions defined in this scope"},clone:function(e){e=this._clone(e);return this.enclosed&&(e.enclosed=this.enclosed.slice()),this.functions&&(e.functions=this.functions.clone()),this.variables&&(e.variables=this.variables.clone()),e},pinned:function(){return this.resolve().pinned()},resolve:function(){return this.parent_scope.resolve()},_validate:function(){if("BlockScope"==this.TYPE)throw new Error("should not instantiate AST_BlockScope");if(null!=this.parent_scope){if(!(this.parent_scope instanceof a))throw new Error("parent_scope must be AST_BlockScope");if(!(this.resolve()instanceof h))throw new Error("must be contained within AST_Scope")}}},t);function c(e,t){e.body.forEach(function(e){e.walk(t)})}var l=e("Block","body",{$documentation:"A body of statements (usually braced)",$propdoc:{body:"[AST_Statement*] an array of statements"},_equals:function(e){return i(this.body,e.body)},walk:function(e){var t=this;e.visit(t,function(){c(t,e)})},_validate:function(){if("Block"==this.TYPE)throw new Error("should not instantiate AST_Block");this.body.forEach(function(e){if(!o(e))throw new Error("body must contain AST_Statement")})}},a),J=e("BlockStatement",null,{$documentation:"A block statement"},l),f=e("StatementWithBody","body",{$documentation:"Base class for all statements that contain one nested body: `For`, `ForIn`, `Do`, `While`, `With`",$propdoc:{body:"[AST_Statement] the body; this should always be present, even if it's an AST_EmptyStatement"},_validate:function(){if("StatementWithBody"==this.TYPE)throw new Error("should not instantiate AST_StatementWithBody");if(!o(this.body))throw new Error("body must be AST_Statement")}},a),X=e("LabeledStatement","label",{$documentation:"Statement with a label",$propdoc:{label:"[AST_Label] a label definition"},_equals:function(e){return this.label.equals(e.label)&&this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.label.walk(e),t.body.walk(e)})},clone:function(e){var t,n,i=this._clone(e);return e&&(t=i.label,n=this.label,i.walk(new L(function(e){return e instanceof x?e.label&&e.label.thedef===n?((e.label.thedef=t).references.push(e),!0):void 0:e instanceof h||void 0}))),i},_validate:function(){if(!(this.label instanceof Ct))throw new Error("label must be AST_Label")}},f),p=e("IterationStatement",null,{$documentation:"Internal class.  All loops inherit from it.",_validate:function(){if("IterationStatement"==this.TYPE)throw new Error("should not instantiate AST_IterationStatement")}},f),K=e("DWLoop","condition",{$documentation:"Base class for do/while statements",$propdoc:{condition:"[AST_Node] the loop condition.  Should not be instanceof AST_Statement"},_equals:function(e){return this.body.equals(e.body)&&this.condition.equals(e.condition)},_validate:function(){if("DWLoop"==this.TYPE)throw new Error("should not instantiate AST_DWLoop");n(this,"condition")}},p),Q=e("Do",null,{$documentation:"A `do` statement",walk:function(e){var t=this;e.visit(t,function(){t.body.walk(e),t.condition.walk(e)})}},K),Z=e("While",null,{$documentation:"A `while` statement",walk:function(e){var t=this;e.visit(t,function(){t.condition.walk(e),t.body.walk(e)})}},K),ee=e("For","init condition step",{$documentation:"A `for` statement",$propdoc:{init:"[AST_Node?] the `for` initialization code, or null if empty",condition:"[AST_Node?] the `for` termination clause, or null if empty",step:"[AST_Node?] the `for` update clause, or null if empty"},_equals:function(e){return r(this.init,e.init)&&r(this.condition,e.condition)&&r(this.step,e.step)&&this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.init&&t.init.walk(e),t.condition&&t.condition.walk(e),t.step&&t.step.walk(e),t.body.walk(e)})},_validate:function(){if(null!=this.init){if(!(this.init instanceof u))throw new Error("init must be AST_Node");if(o(this.init)&&!(this.init instanceof w))throw new Error("init cannot be AST_Statement")}null!=this.condition&&n(this,"condition"),null!=this.step&&n(this,"step")}},p),te=e("ForEnumeration","init object",{$documentation:"Base class for enumeration loops, i.e. `for ... in`, `for ... of` & `for await ... of`",$propdoc:{init:"[AST_Node] the assignment target during iteration",object:"[AST_Node] the object to iterate over"},_equals:function(e){return this.init.equals(e.init)&&this.object.equals(e.object)&&this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.init.walk(e),t.object.walk(e),t.body.walk(e)})},_validate:function(){if("ForEnumeration"==this.TYPE)throw new Error("should not instantiate AST_ForEnumeration");if(this.init instanceof w){if(1!=this.init.definitions.length)throw new Error("init must have single declaration")}else T(this.init,function(e){if(!(e instanceof k||e instanceof Pt))throw new Error("init must be assignable: "+e.TYPE)});n(this,"object")}},p),ne=e("ForIn",null,{$documentation:"A `for ... in` statement"},te),ie=e("ForOf",null,{$documentation:"A `for ... of` statement"},te),re=e("ForAwaitOf",null,{$documentation:"A `for await ... of` statement"},ie),se=e("With","expression",{$documentation:"A `with` statement",$propdoc:{expression:"[AST_Node] the `with` expression"},_equals:function(e){return this.expression.equals(e.expression)&&this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e),t.body.walk(e)})},_validate:function(){n(this,"expression")}},f),h=e("Scope","fn_defs may_call_this uses_eval uses_with",{$documentation:"Base class for all statements introducing a lambda scope",$propdoc:{uses_eval:"[boolean/S] tells whether this scope contains a direct call to the global `eval`",uses_with:"[boolean/S] tells whether this scope uses the `with` statement"},pinned:function(){return this.uses_eval||this.uses_with},resolve:z,_validate:function(){if("Scope"==this.TYPE)throw new Error("should not instantiate AST_Scope")}},l),oe=e("Toplevel","globals",{$documentation:"The toplevel scope",$propdoc:{globals:"[Dictionary/S] a map of name ---\x3e SymbolDef for all undeclared names"},wrap:function(e){var t=this.body;return U.parse(["(function(exports){'$ORIG';})(typeof ",e,"=='undefined'?(",e,"={}):",e,");"].join(""),{filename:"wrap="+JSON.stringify(e)}).transform(new Yt(function(e){if(e instanceof s&&"$ORIG"==e.value)return F.splice(t)}))},enclose:function(e){var t=(e="string"!=typeof e?"":e).indexOf(":"),n=(t<0&&(t=e.length),this.body);return U.parse(["(function(",e.slice(0,t),'){"$ORIG"})(',e.slice(t+1),")"].join(""),{filename:"enclose="+JSON.stringify(e)}).transform(new Yt(function(e){if(e instanceof s&&"$ORIG"==e.value)return F.splice(n)}))}},h),ae=e("ClassInitBlock",null,{$documentation:"Value for `class` static initialization blocks"},h),d=e("Lambda","argnames length_read rest safe_ids uses_arguments",{$documentation:"Base class for functions",$propdoc:{argnames:"[(AST_DefaultValue|AST_Destructured|AST_SymbolFunarg)*] array of function arguments and/or destructured literals",length_read:"[boolean/S] whether length property of this function is accessed",rest:"[(AST_Destructured|AST_SymbolFunarg)?] rest parameter, or null if absent",uses_arguments:"[boolean|number/S] whether this function accesses the arguments array"},each_argname:function(t){var n=new L(function(e){return e instanceof We?(e.name.walk(n),!0):e instanceof ft?(e.value.walk(n),!0):void(e instanceof wt&&t(e))});this.argnames.forEach(function(e){e.walk(n)}),this.rest&&this.rest.walk(n)},_equals:function(e){return r(this.rest,e.rest)&&r(this.name,e.name)&&r(this.value,e.value)&&i(this.argnames,e.argnames)&&i(this.body,e.body)},walk:function(t){var e=this;t.visit(e,function(){e.name&&e.name.walk(t),e.argnames.forEach(function(e){e.walk(t)}),e.rest&&e.rest.walk(t),c(e,t)})},_validate:function(){if("Lambda"==this.TYPE)throw new Error("should not instantiate AST_Lambda");this.argnames.forEach(function(e){T(e,function(e){if(!(e instanceof wt))throw new Error("argnames must be AST_SymbolFunarg[]")},!0)}),null!=this.rest&&T(this.rest,function(e){if(!(e instanceof wt))throw new Error("rest must be AST_SymbolFunarg")})}},h),m=e("Accessor",null,{$documentation:"A getter/setter function",_validate:function(){if(null!=this.name)throw new Error("name must be null")}},d),g=e("LambdaExpression","inlined",{$documentation:"Base class for function expressions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined"},_validate:function(){if("LambdaExpression"==this.TYPE)throw new Error("should not instantiate AST_LambdaExpression")}},d);function _(e){return e instanceof ce||e instanceof ue}var ce=e("Arrow","value",{$documentation:"An arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(t){var e=this;t.visit(e,function(){e.argnames.forEach(function(e){e.walk(t)}),e.rest&&e.rest.walk(t),e.value?e.value.walk(t):c(e,t)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(n(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},g),ue=e("AsyncArrow","value",{$documentation:"An asynchronous arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(t){var e=this;t.visit(e,function(){e.argnames.forEach(function(e){e.walk(t)}),e.rest&&e.rest.walk(t),e.value?e.value.walk(t):c(e,t)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(n(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},g),le=e("AsyncFunction","name",{$documentation:"An asynchronous function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof kt))throw new Error("name must be AST_SymbolLambda")}},g),fe=e("AsyncGeneratorFunction","name",{$documentation:"An asynchronous generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof kt))throw new Error("name must be AST_SymbolLambda")}},g),pe=e("Function","name",{$documentation:"A function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof kt))throw new Error("name must be AST_SymbolLambda")}},g),he=e("GeneratorFunction","name",{$documentation:"A generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof kt))throw new Error("name must be AST_SymbolLambda")}},g),v=e("LambdaDefinition","inlined name",{$documentation:"Base class for function definitions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined",name:"[AST_SymbolDefun] the name of this function"},_validate:function(){if("LambdaDefinition"==this.TYPE)throw new Error("should not instantiate AST_LambdaDefinition");if(!(this.name instanceof St))throw new Error("name must be AST_SymbolDefun")}},d),de=e("AsyncDefun",null,{$documentation:"An asynchronous function definition"},v),me=e("AsyncGeneratorDefun",null,{$documentation:"An asynchronous generator function definition"},v),ge=e("Defun",null,{$documentation:"A function definition"},v),_e=e("GeneratorDefun",null,{$documentation:"A generator function definition"},v),y=e("Class","extends name properties",{$documentation:"Base class for class literals",$propdoc:{extends:"[AST_Node?] the super class, or null if not specified",properties:"[AST_ClassProperty*] array of class properties"},_equals:function(e){return r(this.name,e.name)&&r(this.extends,e.extends)&&i(this.properties,e.properties)},resolve:function(e){return e?this:this.parent_scope.resolve()},walk:function(t){var e=this;t.visit(e,function(){e.name&&e.name.walk(t),e.extends&&e.extends.walk(t),e.properties.forEach(function(e){e.walk(t)})})},_validate:function(){if("Class"==this.TYPE)throw new Error("should not instantiate AST_Class");null!=this.extends&&n(this,"extends"),this.properties.forEach(function(e){if(!(e instanceof b))throw new Error("properties must contain AST_ClassProperty")})}},a),ve=e("DefClass",null,{$documentation:"A class definition",$propdoc:{name:"[AST_SymbolDefClass] the name of this class"},_validate:function(){if(!(this.name instanceof At))throw new Error("name must be AST_SymbolDefClass")}},y),ye=e("ClassExpression",null,{$documentation:"A class expression",$propdoc:{name:"[AST_SymbolClass?] the name of this class, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof Tt))throw new Error("name must be AST_SymbolClass")}},y),b=e("ClassProperty","key private static value",{$documentation:"Base class for `class` properties",$propdoc:{key:"[string|AST_Node?] property name (AST_Node for computed property, null for initialization block)",private:"[boolean] whether this is a private property",static:"[boolean] whether this is a static property",value:"[AST_Node?] property value (AST_Accessor for getters/setters, AST_LambdaExpression for methods, null if not specified for fields)"},_equals:function(e){return!this.private==!e.private&&!this.static==!e.static&&r(this.key,e.key)&&r(this.value,e.value)},walk:function(e){var t=this;e.visit(t,function(){t.key instanceof u&&t.key.walk(e),t.value&&t.value.walk(e)})},_validate:function(){if("ClassProperty"==this.TYPE)throw new Error("should not instantiate AST_ClassProperty");if(this instanceof ke){if(null!=this.key)throw new Error("key must be null")}else if("string"!=typeof this.key){if(!(this.key instanceof u))throw new Error("key must be string or AST_Node");n(this,"key")}if(null!=this.value&&!(this.value instanceof u))throw new Error("value must be AST_Node")}}),be=e("ClassField",null,{$documentation:"A `class` field",_validate:function(){null!=this.value&&n(this,"value")}},b),xe=e("ClassGetter",null,{$documentation:"A `class` getter",_validate:function(){if(!(this.value instanceof m))throw new Error("value must be AST_Accessor")}},b),we=e("ClassSetter",null,{$documentation:"A `class` setter",_validate:function(){if(!(this.value instanceof m))throw new Error("value must be AST_Accessor")}},b),Se=e("ClassMethod",null,{$documentation:"A `class` method",_validate:function(){if(!(this.value instanceof g))throw new Error("value must be AST_LambdaExpression");if(_(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of class method's lambda must be null")}},b),ke=e("ClassInit",null,{$documentation:"A `class` static initialization block",_validate:function(){if(!this.static)throw new Error("static must be true");if(!(this.value instanceof ae))throw new Error("value must be AST_ClassInitBlock")},initialize:function(){this.static=!0}},b),Ae=e("Jump",null,{$documentation:"Base class for “jumps” (for now that's `return`, `throw`, `break` and `continue`)",_validate:function(){if("Jump"==this.TYPE)throw new Error("should not instantiate AST_Jump")}},t),Te=e("Exit","value",{$documentation:"Base class for “exits” (`return` and `throw`)",$propdoc:{value:"[AST_Node?] the value returned or thrown by this statement; could be null for AST_Return"},_equals:function(e){return r(this.value,e.value)},walk:function(e){var t=this;e.visit(t,function(){t.value&&t.value.walk(e)})},_validate:function(){if("Exit"==this.TYPE)throw new Error("should not instantiate AST_Exit")}},Ae),Ee=e("Return",null,{$documentation:"A `return` statement",_validate:function(){null!=this.value&&n(this,"value")}},Te),Ce=e("Throw",null,{$documentation:"A `throw` statement",_validate:function(){n(this,"value")}},Te),x=e("LoopControl","label",{$documentation:"Base class for loop control statements (`break` and `continue`)",$propdoc:{label:"[AST_LabelRef?] the label, or null if none"},_equals:function(e){return r(this.label,e.label)},walk:function(e){var t=this;e.visit(t,function(){t.label&&t.label.walk(e)})},_validate:function(){if("LoopControl"==this.TYPE)throw new Error("should not instantiate AST_LoopControl");if(null!=this.label&&!(this.label instanceof Dt))throw new Error("label must be AST_LabelRef")}},Ae),Pe=e("Break",null,{$documentation:"A `break` statement"},x),Oe=e("Continue",null,{$documentation:"A `continue` statement"},x),De=e("If","condition alternative",{$documentation:"A `if` statement",$propdoc:{condition:"[AST_Node] the `if` condition",alternative:"[AST_Statement?] the `else` part, or null if not present"},_equals:function(e){return this.body.equals(e.body)&&this.condition.equals(e.condition)&&r(this.alternative,e.alternative)},walk:function(e){var t=this;e.visit(t,function(){t.condition.walk(e),t.body.walk(e),t.alternative&&t.alternative.walk(e)})},_validate:function(){if(n(this,"condition"),null!=this.alternative&&!o(this.alternative))throw new Error("alternative must be AST_Statement")}},f),Ie=e("Switch","expression",{$documentation:"A `switch` statement",$propdoc:{expression:"[AST_Node] the `switch` “discriminant”"},_equals:function(e){return this.expression.equals(e.expression)&&i(this.body,e.body)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e),c(t,e)})},_validate:function(){n(this,"expression"),this.body.forEach(function(e){if(!(e instanceof Ne))throw new Error("body must be AST_SwitchBranch[]")})}},l),Ne=e("SwitchBranch",null,{$documentation:"Base class for `switch` branches",_validate:function(){if("SwitchBranch"==this.TYPE)throw new Error("should not instantiate AST_SwitchBranch")}},l),Le=e("Default",null,{$documentation:"A `default` switch branch"},Ne),Re=e("Case","expression",{$documentation:"A `case` switch branch",$propdoc:{expression:"[AST_Node] the `case` expression"},_equals:function(e){return this.expression.equals(e.expression)&&i(this.body,e.body)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e),c(t,e)})},_validate:function(){n(this,"expression")}},Ne),je=e("Try","bcatch bfinally",{$documentation:"A `try` statement",$propdoc:{bcatch:"[AST_Catch?] the catch block, or null if not present",bfinally:"[AST_Finally?] the finally block, or null if not present"},_equals:function(e){return i(this.body,e.body)&&r(this.bcatch,e.bcatch)&&r(this.bfinally,e.bfinally)},walk:function(e){var t=this;e.visit(t,function(){c(t,e),t.bcatch&&t.bcatch.walk(e),t.bfinally&&t.bfinally.walk(e)})},_validate:function(){if(null!=this.bcatch&&!(this.bcatch instanceof Me))throw new Error("bcatch must be AST_Catch");if(null!=this.bfinally&&!(this.bfinally instanceof Fe))throw new Error("bfinally must be AST_Finally")}},l),Me=e("Catch","argname",{$documentation:"A `catch` node; only makes sense as part of a `try` statement",$propdoc:{argname:"[(AST_Destructured|AST_SymbolCatch)?] symbol for the exception, or null if not present"},_equals:function(e){return r(this.argname,e.argname)&&i(this.body,e.body)},walk:function(e){var t=this;e.visit(t,function(){t.argname&&t.argname.walk(e),c(t,e)})},_validate:function(){null!=this.argname&&T(this.argname,function(e){if(!(e instanceof Et))throw new Error("argname must be AST_SymbolCatch")})}},l),Fe=e("Finally",null,{$documentation:"A `finally` node; only makes sense as part of a `try` statement"},l),w=e("Definitions","definitions",{$documentation:"Base class for `var` nodes (variable declarations/initializations)",$propdoc:{definitions:"[AST_VarDef*] array of variable definitions"},_equals:function(e){return i(this.definitions,e.definitions)},walk:function(t){var e=this;t.visit(e,function(){e.definitions.forEach(function(e){e.walk(t)})})},_validate:function(){if("Definitions"==this.TYPE)throw new Error("should not instantiate AST_Definitions");if(this.definitions.length<1)throw new Error("must have at least one definition")}},t),qe=e("Const",null,{$documentation:"A `const` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof S))throw new Error("definitions must be AST_VarDef[]");T(e.name,function(e){if(!(e instanceof vt))throw new Error("name must be AST_SymbolConst")})})}},w),Be=e("Let",null,{$documentation:"A `let` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof S))throw new Error("definitions must be AST_VarDef[]");T(e.name,function(e){if(!(e instanceof bt))throw new Error("name must be AST_SymbolLet")})})}},w),Ve=e("Var",null,{$documentation:"A `var` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof S))throw new Error("definitions must be AST_VarDef[]");T(e.name,function(e){if(!(e instanceof xt))throw new Error("name must be AST_SymbolVar")})})}},w),S=e("VarDef","name value",{$documentation:"A variable declaration; only appears in a AST_Definitions node",$propdoc:{name:"[AST_Destructured|AST_SymbolVar] name of the variable",value:"[AST_Node?] initializer, or null of there's no initializer"},_equals:function(e){return this.name.equals(e.name)&&r(this.value,e.value)},walk:function(e){var t=this;e.visit(t,function(){t.name.walk(e),t.value&&t.value.walk(e)})},_validate:function(){null!=this.value&&n(this,"value")}}),ze=e("ExportDeclaration","body",{$documentation:"An `export` statement",$propdoc:{body:"[AST_DefClass|AST_Definitions|AST_LambdaDefinition] the statement to export"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.body.walk(e)})},_validate:function(){if(!(this.body instanceof ve||this.body instanceof w||this.body instanceof v))throw new Error("body must be AST_DefClass, AST_Definitions or AST_LambdaDefinition")}},t),Ue=e("ExportDefault","body",{$documentation:"An `export default` statement",$propdoc:{body:"[AST_Node] the default export"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.body.walk(e)})},_validate:function(){this.body instanceof ve||this.body instanceof v||n(this,"body")}},t),$e=e("ExportForeign","aliases keys path",{$documentation:"An `export ... from '...'` statement",$propdoc:{aliases:"[AST_String*] array of aliases to export",keys:"[AST_String*] array of keys to import",path:"[AST_String] the path to import module"},_equals:function(e){return this.path.equals(e.path)&&i(this.aliases,e.aliases)&&i(this.keys,e.keys)},_validate:function(){if(this.aliases.length!=this.keys.length)throw new Error("aliases:key length mismatch: "+this.aliases.length+" != "+this.keys.length);if(this.aliases.forEach(function(e){if(!(e instanceof I))throw new Error("aliases must contain AST_String")}),this.keys.forEach(function(e){if(!(e instanceof I))throw new Error("keys must contain AST_String")}),!(this.path instanceof I))throw new Error("path must be AST_String")}},t),He=e("ExportReferences","properties",{$documentation:"An `export { ... }` statement",$propdoc:{properties:"[AST_SymbolExport*] array of aliases to export"},_equals:function(e){return i(this.properties,e.properties)},walk:function(t){var e=this;t.visit(e,function(){e.properties.forEach(function(e){e.walk(t)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof Ot))throw new Error("properties must contain AST_SymbolExport")})}},t),Ge=e("Import","all default path properties",{$documentation:"An `import` statement",$propdoc:{all:"[AST_SymbolImport?] the imported namespace, or null if not specified",default:"[AST_SymbolImport?] the alias for default `export`, or null if not specified",path:"[AST_String] the path to import module",properties:"[(AST_SymbolImport*)?] array of aliases, or null if not specified"},_equals:function(e){return this.path.equals(e.path)&&r(this.all,e.all)&&r(this.default,e.default)&&!this.properties==!e.properties&&(!this.properties||i(this.properties,e.properties))},walk:function(t){var e=this;t.visit(e,function(){e.all&&e.all.walk(t),e.default&&e.default.walk(t),e.properties&&e.properties.forEach(function(e){e.walk(t)})})},_validate:function(){if(null!=this.all){if(!(this.all instanceof yt))throw new Error("all must be AST_SymbolImport");if(null!=this.properties)throw new Error("cannot import both * and {} in the same statement")}if(null!=this.default){if(!(this.default instanceof yt))throw new Error("default must be AST_SymbolImport");if(""!==this.default.key.value)throw new Error("invalid default key: "+this.default.key.value)}if(!(this.path instanceof I))throw new Error("path must be AST_String");null!=this.properties&&this.properties.forEach(function(e){if(!(e instanceof yt))throw new Error("properties must contain AST_SymbolImport")})}},t),We=e("DefaultValue","name value",{$documentation:"A default value declaration",$propdoc:{name:"[AST_Destructured|AST_SymbolDeclaration] name of the variable",value:"[AST_Node] value to assign if variable is `undefined`"},_equals:function(e){return this.name.equals(e.name)&&this.value.equals(e.value)},walk:function(e){var t=this;e.visit(t,function(){t.name.walk(e),t.value.walk(e)})},_validate:function(){n(this,"value")}});function Ye(e,t,n,i){e[t].forEach(function(e){W(e,t,!0,n,i)})}var Je=e("Call","args expression optional pure terminal",{$documentation:"A function call expression",$propdoc:{args:"[AST_Node*] array of arguments",expression:"[AST_Node] expression to invoke as function",optional:"[boolean] whether the expression is optional chaining",pure:"[boolean/S] marker for side-effect-free call expression",terminal:"[boolean] whether the chain has ended"},_equals:function(e){return!this.optional==!e.optional&&this.expression.equals(e.expression)&&i(this.args,e.args)},walk:function(t){var e=this;t.visit(e,function(){e.expression.walk(t),e.args.forEach(function(e){e.walk(t)})})},_validate:function(){n(this,"expression"),Ye(this,"args",!0)}}),Xe=e("New",null,{$documentation:"An object instantiation.  Derives from a function call since it has exactly the same properties",_validate:function(){if(this.optional)throw new Error("optional must be false");if(this.terminal)throw new Error("terminal must be false")}},Je),Ke=e("Sequence","expressions",{$documentation:"A sequence expression (comma-separated expressions)",$propdoc:{expressions:"[AST_Node*] array of expressions (at least two)"},_equals:function(e){return i(this.expressions,e.expressions)},walk:function(t){var e=this;t.visit(e,function(){e.expressions.forEach(function(e){e.walk(t)})})},_validate:function(){if(this.expressions.length<2)throw new Error("expressions must contain multiple elements");Ye(this,"expressions")}});var k=e("PropAccess","expression optional property terminal",{$documentation:'Base class for property access expressions, i.e. `a.foo` or `a["foo"]`',$propdoc:{expression:"[AST_Node] the “container” expression",optional:"[boolean] whether the expression is optional chaining",property:"[AST_Node|string] the property to access.  For AST_Dot this is always a plain string, while for AST_Sub it's an arbitrary AST_Node",terminal:"[boolean] whether the chain has ended"},_equals:function(e){return!this.optional==!e.optional&&r(this.property,e.property)&&this.expression.equals(e.expression)},get_property:function(){var e=this.property;return e instanceof D?e.value:e instanceof nt&&"void"==e.operator&&e.expression instanceof D?void 0:e},_validate:function(){if("PropAccess"==this.TYPE)throw new Error("should not instantiate AST_PropAccess");n(this,"expression")}}),Qe=e("Dot","quoted",{$documentation:"A dotted property access expression",$propdoc:{quoted:"[boolean] whether property is transformed from a quoted string"},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e)})},_validate:function(){if("string"!=typeof this.property)throw new Error("property must be string")}},k),Ze=e("Sub",null,{$documentation:'Index-style property access, i.e. `a["foo"]`',walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e),t.property.walk(e)})},_validate:function(){n(this,"property")}},k),et=e("Spread","expression",{$documentation:"Spread expression in array/object literals or function calls",$propdoc:{expression:"[AST_Node] expression to be expanded"},_equals:function(e){return this.expression.equals(e.expression)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e)})},_validate:function(){n(this,"expression")}}),tt=e("Unary","operator expression",{$documentation:"Base class for unary expressions",$propdoc:{operator:"[string] the operator",expression:"[AST_Node] expression that this unary operator applies to"},_equals:function(e){return this.operator==e.operator&&this.expression.equals(e.expression)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e)})},_validate:function(){if("Unary"==this.TYPE)throw new Error("should not instantiate AST_Unary");if("string"!=typeof this.operator)throw new Error("operator must be string");n(this,"expression")}}),nt=e("UnaryPrefix",null,{$documentation:"Unary prefix expression, i.e. `typeof i` or `++i`"},tt),it=e("UnaryPostfix",null,{$documentation:"Unary postfix expression, i.e. `i++`"},tt),rt=e("Binary","operator left right",{$documentation:"Binary expression, i.e. `a + b`",$propdoc:{left:"[AST_Node] left-hand side expression",operator:"[string] the operator",right:"[AST_Node] right-hand side expression"},_equals:function(e){return this.operator==e.operator&&this.left.equals(e.left)&&this.right.equals(e.right)},walk:function(e){var t=this;e.visit(t,function(){t.left.walk(e),t.right.walk(e)})},_validate:function(){if(this instanceof ot||n(this,"left"),"string"!=typeof this.operator)throw new Error("operator must be string");n(this,"right")}}),st=e("Conditional","condition consequent alternative",{$documentation:"Conditional expression using the ternary operator, i.e. `a ? b : c`",$propdoc:{condition:"[AST_Node]",consequent:"[AST_Node]",alternative:"[AST_Node]"},_equals:function(e){return this.condition.equals(e.condition)&&this.consequent.equals(e.consequent)&&this.alternative.equals(e.alternative)},walk:function(e){var t=this;e.visit(t,function(){t.condition.walk(e),t.consequent.walk(e),t.alternative.walk(e)})},_validate:function(){n(this,"condition"),n(this,"consequent"),n(this,"alternative")}}),ot=e("Assign",null,{$documentation:"An assignment expression — `a = b + 5`",_validate:function(){if(this.operator.indexOf("=")<0)throw new Error('operator must contain "="');if(this.left instanceof A){if("="!=this.operator)throw new Error("invalid destructuring operator: "+this.operator);T(this.left,function(e){if(!(e instanceof k||e instanceof Pt))throw new Error("left must be assignable: "+e.TYPE)})}else if(!(this.left instanceof $t||this.left instanceof Vt||this.left instanceof k&&!this.left.optional||this.left instanceof Pt||this.left instanceof zt))throw new Error("left must be assignable")}},rt),at=e("Await","expression",{$documentation:"An await expression",$propdoc:{expression:"[AST_Node] expression with Promise to resolve on"},_equals:function(e){return this.expression.equals(e.expression)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e)})},_validate:function(){n(this,"expression")}}),ct=e("Yield","expression nested",{$documentation:"A yield expression",$propdoc:{expression:"[AST_Node?] return value for iterator, or null if undefined",nested:"[boolean] whether to iterate over expression as generator"},_equals:function(e){return!this.nested==!e.nested&&r(this.expression,e.expression)},walk:function(e){var t=this;e.visit(t,function(){t.expression&&t.expression.walk(e)})},_validate:function(){if(null!=this.expression)n(this,"expression");else if(this.nested)throw new Error("yield* must contain expression")}}),ut=e("Array","elements",{$documentation:"An array literal",$propdoc:{elements:"[AST_Node*] array of elements"},_equals:function(e){return i(this.elements,e.elements)},walk:function(t){var e=this;t.visit(e,function(){e.elements.forEach(function(e){e.walk(t)})})},_validate:function(){Ye(this,"elements",!0,!0)}}),A=e("Destructured","rest",{$documentation:"Base class for destructured literal",$propdoc:{rest:"[(AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)?] rest parameter, or null if absent"},_validate:function(){if("Destructured"==this.TYPE)throw new Error("should not instantiate AST_Destructured")}});function T(e,t,n){if(e instanceof We&&n)return T(e.name,t);if(e instanceof A){if(null!=e.rest&&T(e.rest,t),e instanceof lt)return e.elements.forEach(function(e){e instanceof Ut||T(e,t,!0)});if(e instanceof pt)return e.properties.forEach(function(e){T(e.value,t,!0)})}t(e)}var E,lt=e("DestructuredArray","elements",{$documentation:"A destructured array literal",$propdoc:{elements:"[(AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)*] array of elements"},_equals:function(e){return r(this.rest,e.rest)&&i(this.elements,e.elements)},walk:function(t){var e=this;t.visit(e,function(){e.elements.forEach(function(e){e.walk(t)}),e.rest&&e.rest.walk(t)})}},A),ft=e("DestructuredKeyVal","key value",{$documentation:"A key: value destructured property",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef] property value"},_equals:function(e){return r(this.key,e.key)&&this.value.equals(e.value)},walk:function(e){var t=this;e.visit(t,function(){t.key instanceof u&&t.key.walk(e),t.value.walk(e)})},_validate:function(){if("string"!=typeof this.key){if(!(this.key instanceof u))throw new Error("key must be string or AST_Node");n(this,"key")}if(!(this.value instanceof u))throw new Error("value must be AST_Node")}}),pt=e("DestructuredObject","properties",{$documentation:"A destructured object literal",$propdoc:{properties:"[AST_DestructuredKeyVal*] array of properties"},_equals:function(e){return r(this.rest,e.rest)&&i(this.properties,e.properties)},walk:function(t){var e=this;t.visit(e,function(){e.properties.forEach(function(e){e.walk(t)}),e.rest&&e.rest.walk(t)})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof ft))throw new Error("properties must be AST_DestructuredKeyVal[]")})}},A),ht=e("Object","properties",{$documentation:"An object literal",$propdoc:{properties:"[(AST_ObjectProperty|AST_Spread)*] array of properties"},_equals:function(e){return i(this.properties,e.properties)},walk:function(t){var e=this;t.visit(e,function(){e.properties.forEach(function(e){e.walk(t)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof C||e instanceof et))throw new Error("properties must contain AST_ObjectProperty and/or AST_Spread only")})}}),C=e("ObjectProperty","key value",{$documentation:"Base class for literal object properties",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_Node] property value.  For getters and setters this is an AST_Accessor."},_equals:function(e){return r(this.key,e.key)&&this.value.equals(e.value)},walk:function(e){var t=this;e.visit(t,function(){t.key instanceof u&&t.key.walk(e),t.value.walk(e)})},_validate:function(){if("ObjectProperty"==this.TYPE)throw new Error("should not instantiate AST_ObjectProperty");if("string"!=typeof this.key){if(!(this.key instanceof u))throw new Error("key must be string or AST_Node");n(this,"key")}if(!(this.value instanceof u))throw new Error("value must be AST_Node")}}),dt=e("ObjectKeyVal",null,{$documentation:"A key: value object property",_validate:function(){n(this,"value")}},C),mt=e("ObjectMethod",null,{$documentation:"A key(){} object property",_validate:function(){if(!(this.value instanceof g))throw new Error("value must be AST_LambdaExpression");if(_(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of object method's lambda must be null")}},dt),gt=e("ObjectSetter",null,{$documentation:"An object setter property",_validate:function(){if(!(this.value instanceof m))throw new Error("value must be AST_Accessor")}},C),_t=e("ObjectGetter",null,{$documentation:"An object getter property",_validate:function(){if(!(this.value instanceof m))throw new Error("value must be AST_Accessor")}},C),P=e("Symbol","scope name thedef",{$documentation:"Base class for all symbols",$propdoc:{name:"[string] name of this symbol",scope:"[AST_Scope/S] the current scope (not necessarily the definition scope)",thedef:"[SymbolDef/S] the definition of this symbol"},_equals:function(e){return this.thedef?this.thedef===e.thedef:this.name==e.name},_validate:function(){if("Symbol"==this.TYPE)throw new Error("should not instantiate AST_Symbol");if("string"!=typeof this.name)throw new Error("name must be string")}}),O=e("SymbolDeclaration","init",{$documentation:"A declaration symbol (symbol in var, function name or argument, symbol in catch)"},P),vt=e("SymbolConst",null,{$documentation:"Symbol defining a constant"},O),yt=e("SymbolImport","key",{$documentation:"Symbol defined by an `import` statement",$propdoc:{key:"[AST_String] the original `export` name"},_equals:function(e){return this.name==e.name&&this.key.equals(e.key)},_validate:function(){if(!(this.key instanceof I))throw new Error("key must be AST_String")}},vt),bt=e("SymbolLet",null,{$documentation:"Symbol defining a lexical-scoped variable"},O),xt=e("SymbolVar",null,{$documentation:"Symbol defining a variable"},O),wt=e("SymbolFunarg","unused",{$documentation:"Symbol naming a function argument"},xt),St=e("SymbolDefun",null,{$documentation:"Symbol defining a function"},O),kt=e("SymbolLambda",null,{$documentation:"Symbol naming a function expression"},O),At=e("SymbolDefClass",null,{$documentation:"Symbol defining a class"},vt),Tt=e("SymbolClass",null,{$documentation:"Symbol naming a class expression"},vt),Et=e("SymbolCatch",null,{$documentation:"Symbol naming the exception in catch"},O),Ct=e("Label","references",{$documentation:"Symbol naming a label (declaration)",$propdoc:{references:"[AST_LoopControl*] a list of nodes referring to this label"},initialize:function(){this.references=[],this.thedef=this}},P),Pt=e("SymbolRef","fixed in_arg redef",{$documentation:"Reference to some symbol (not definition/declaration)"},P),Ot=e("SymbolExport","alias",{$documentation:"Reference in an `export` statement",$propdoc:{alias:"[AST_String] the `export` alias"},_equals:function(e){return this.name==e.name&&this.alias.equals(e.alias)},_validate:function(){if(!(this.alias instanceof I))throw new Error("alias must be AST_String")}},Pt),Dt=e("LabelRef",null,{$documentation:"Reference to a label symbol"},P),It=e("ObjectIdentity",null,{$documentation:"Base class for `super` & `this`",_equals:V,_validate:function(){if("ObjectIdentity"==this.TYPE)throw new Error("should not instantiate AST_ObjectIdentity")}},P),Nt=e("Super",null,{$documentation:"The `super` symbol",_validate:function(){if("super"!==this.name)throw new Error('name must be "super"')}},It),Lt=e("This",null,{$documentation:"The `this` symbol",_validate:function(){if("This"==this.TYPE&&"this"!==this.name)throw new Error('name must be "this"')}},It),Rt=e("NewTarget",null,{$documentation:"The `new.target` symbol",initialize:function(){this.name="new.target"},_validate:function(){if("new.target"!==this.name)throw new Error('name must be "new.target": '+this.name)}},Lt),jt=e("Template","expressions strings tag",{$documentation:"A template literal, i.e. tag`str1${expr1}...strN${exprN}strN+1`",$propdoc:{expressions:"[AST_Node*] the placeholder expressions",strings:"[string*] the raw text segments",tag:"[AST_Node?] tag function, or null if absent"},_equals:function(e){return r(this.tag,e.tag)&&(t=this.strings,n=e.strings,t.length==n.length)&&all(t,function(e,t){return e==n[t]})&&i(this.expressions,e.expressions);var t,n},walk:function(t){var e=this;t.visit(e,function(){e.tag&&e.tag.walk(t),e.expressions.forEach(function(e){e.walk(t)})})},_validate:function(){if(this.expressions.length+1!=this.strings.length)throw new Error("malformed template with "+this.expressions.length+" placeholder(s) but "+this.strings.length+" text segment(s)");Ye(this,"expressions"),this.strings.forEach(function(e){if("string"!=typeof e)throw new Error("strings must contain string")}),null!=this.tag&&n(this,"tag")}}),D=e("Constant",null,{$documentation:"Base class for all constants",_equals:function(e){return this.value===e.value},_validate:function(){if("Constant"==this.TYPE)throw new Error("should not instantiate AST_Constant")}}),I=e("String","quote value",{$documentation:"A string literal",$propdoc:{quote:"[string?] the original quote character",value:"[string] the contents of this string"},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},D),Mt=e("Number","value",{$documentation:"A number literal",$propdoc:{value:"[number] the numeric value"},_validate:function(){if("number"!=typeof this.value)throw new Error("value must be number");if(!isFinite(this.value))throw new Error("value must be finite");if(this.value<0)throw new Error("value cannot be negative")}},D),Ft=e("BigInt","value",{$documentation:"A BigInt literal",$propdoc:{value:"[string] the numeric representation"},_validate:function(){if("string"!=typeof this.value)throw new Error("value must be string");if("-"==this.value[0])throw new Error("value cannot be negative")}},D),qt=e("RegExp","value",{$documentation:"A regexp literal",$propdoc:{value:"[RegExp] the actual regexp"},_equals:function(e){return""+this.value==""+e.value},_validate:function(){if(!(this.value instanceof RegExp))throw new Error("value must be RegExp")}},D),N=e("Atom",null,{$documentation:"Base class for atoms",_equals:V,_validate:function(){if("Atom"==this.TYPE)throw new Error("should not instantiate AST_Atom")}},D),Bt=e("Null",null,{$documentation:"The `null` atom",value:null},N),Vt=e("NaN",null,{$documentation:"The impossible value",value:NaN},N),zt=e("Undefined",null,{$documentation:"The `undefined` value",value:void 0},N),Ut=e("Hole",null,{$documentation:"A hole in an array",value:void 0},N),$t=e("Infinity",null,{$documentation:"The `Infinity` value",value:1/0},N),Ht=e("Boolean",null,{$documentation:"Base class for booleans",_validate:function(){if("Boolean"==this.TYPE)throw new Error("should not instantiate AST_Boolean")}},N),Gt=e("False",null,{$documentation:"The `false` atom",value:!1},Ht),Wt=e("True",null,{$documentation:"The `true` atom",value:!0},Ht);function L(e){this.callback=e,this.directives=Object.create(null),this.stack=[]}function Yt(e,t){L.call(this),this.before=e,this.after=t}function R(e,t){return F(e,function(e){return e.transform(t,!0)})}function Jt(e,t){e.argnames=R(e.argnames,t),e.rest&&(e.rest=e.rest.transform(t)),e.value?e.value=e.value.transform(t):e.body=R(e.body,t)}return L.prototype={visit:function(e,t){this.push(e),!this.callback(e,t||q)&&t&&t(),this.pop()},parent:function(e){return this.stack[this.stack.length-2-(e||0)]},push:function(e){var t;e instanceof y?(this.directives=Object.create(this.directives),t="use strict"):e instanceof s?t=e.value:e instanceof d&&(this.directives=Object.create(this.directives)),t&&!this.directives[t]&&(this.directives[t]=e),this.stack.push(e)},pop:function(){var e=this.stack.pop();(e instanceof y||e instanceof d)&&(this.directives=Object.getPrototypeOf(this.directives))},self:function(){return this.stack[this.stack.length-1]},find_parent:function(e){for(var t=this.stack,n=t.length-1;0<=--n;){var i=t[n];if(i instanceof e)return i}},has_directive:function(e){var t=this.directives[e];if(t)return t;var n=this.stack[this.stack.length-1];if(n instanceof h)for(var i=0;i<n.body.length;++i){var r=n.body[i];if(!(r instanceof s))break;if(r.value==e)return r}},loopcontrol_target:function(e){var t,n=this.stack;if(e.label){for(var i=n.length;0<=--i;)if((t=n[i])instanceof X&&t.label.name==e.label.name)return t.body}else for(i=n.length;0<=--i;)if((t=n[i])instanceof p||e instanceof Pe&&t instanceof Ie)return t},in_boolean_context:function(){for(var e,t=!0,n=0,i=this.self();e=this.parent(n++);i=e){if(e instanceof rt)switch(e.operator){case"&&":case"||":e.left===i&&(t=!1);continue;default:return!1}if(!(e instanceof st)){if(e instanceof K)return e.condition===i;if(e instanceof ee)return e.condition===i;if(e instanceof De)return e.condition===i;if(e instanceof Ee){if(e.in_bool)return!0;for(;e=this.parent(n++);)if(e instanceof d){if(e.name)return!1;if("Call"!=(e=this.parent(n++)).TYPE)return!1;break}}if(e instanceof Ke){if(e.tail_node()===i)continue;return!t||"d"}return e instanceof Y?!t||"d":e instanceof nt&&"!"==e.operator}if(e.condition===i)return!0}}},Yt.prototype=new L,(E=function(e,i){e.DEFMETHOD("transform",function(e,t){var n;return e.push(this),void 0===(n=e.before?e.before(this,i,t):n)&&(i(n=this,e),e.after)&&void 0!==(t=e.after(n,t))&&(n=t),e.pop(),n})})(u,q),E(X,function(e,t){e.label=e.label.transform(t),e.body=e.body.transform(t)}),E(Y,function(e,t){e.body=e.body.transform(t)}),E(l,function(e,t){e.body=R(e.body,t)}),E(Q,function(e,t){e.body=e.body.transform(t),e.condition=e.condition.transform(t)}),E(Z,function(e,t){e.condition=e.condition.transform(t),e.body=e.body.transform(t)}),E(ee,function(e,t){e.init&&(e.init=e.init.transform(t)),e.condition&&(e.condition=e.condition.transform(t)),e.step&&(e.step=e.step.transform(t)),e.body=e.body.transform(t)}),E(te,function(e,t){e.init=e.init.transform(t),e.object=e.object.transform(t),e.body=e.body.transform(t)}),E(se,function(e,t){e.expression=e.expression.transform(t),e.body=e.body.transform(t)}),E(Te,function(e,t){e.value&&(e.value=e.value.transform(t))}),E(x,function(e,t){e.label&&(e.label=e.label.transform(t))}),E(De,function(e,t){e.condition=e.condition.transform(t),e.body=e.body.transform(t),e.alternative&&(e.alternative=e.alternative.transform(t))}),E(Ie,function(e,t){e.expression=e.expression.transform(t),e.body=R(e.body,t)}),E(Re,function(e,t){e.expression=e.expression.transform(t),e.body=R(e.body,t)}),E(je,function(e,t){e.body=R(e.body,t),e.bcatch&&(e.bcatch=e.bcatch.transform(t)),e.bfinally&&(e.bfinally=e.bfinally.transform(t))}),E(Me,function(e,t){e.argname&&(e.argname=e.argname.transform(t)),e.body=R(e.body,t)}),E(w,function(e,t){e.definitions=R(e.definitions,t)}),E(S,function(e,t){e.name=e.name.transform(t),e.value&&(e.value=e.value.transform(t))}),E(We,function(e,t){e.name=e.name.transform(t),e.value=e.value.transform(t)}),E(d,function(e,t){e.name&&(e.name=e.name.transform(t)),e.argnames=R(e.argnames,t),e.rest&&(e.rest=e.rest.transform(t)),e.body=R(e.body,t)}),E(ce,Jt),E(ue,Jt),E(y,function(e,t){e.name&&(e.name=e.name.transform(t)),e.extends&&(e.extends=e.extends.transform(t)),e.properties=R(e.properties,t)}),E(b,function(e,t){e.key instanceof u&&(e.key=e.key.transform(t)),e.value&&(e.value=e.value.transform(t))}),E(Je,function(e,t){e.expression=e.expression.transform(t),e.args=R(e.args,t)}),E(Ke,function(e,t){e.expressions=R(e.expressions,t)}),E(at,function(e,t){e.expression=e.expression.transform(t)}),E(ct,function(e,t){e.expression&&(e.expression=e.expression.transform(t))}),E(Qe,function(e,t){e.expression=e.expression.transform(t)}),E(Ze,function(e,t){e.expression=e.expression.transform(t),e.property=e.property.transform(t)}),E(et,function(e,t){e.expression=e.expression.transform(t)}),E(tt,function(e,t){e.expression=e.expression.transform(t)}),E(rt,function(e,t){e.left=e.left.transform(t),e.right=e.right.transform(t)}),E(st,function(e,t){e.condition=e.condition.transform(t),e.consequent=e.consequent.transform(t),e.alternative=e.alternative.transform(t)}),E(ut,function(e,t){e.elements=R(e.elements,t)}),E(lt,function(e,t){e.elements=R(e.elements,t),e.rest&&(e.rest=e.rest.transform(t))}),E(ft,function(e,t){e.key instanceof u&&(e.key=e.key.transform(t)),e.value=e.value.transform(t)}),E(pt,function(e,t){e.properties=R(e.properties,t),e.rest&&(e.rest=e.rest.transform(t))}),E(ht,function(e,t){e.properties=R(e.properties,t)}),E(C,function(e,t){e.key instanceof u&&(e.key=e.key.transform(t)),e.value=e.value.transform(t)}),E(ze,function(e,t){e.body=e.body.transform(t)}),E(Ue,function(e,t){e.body=e.body.transform(t)}),E(He,function(e,t){e.properties=R(e.properties,t)}),E(Ge,function(e,t){e.all&&(e.all=e.all.transform(t)),e.default&&(e.default=e.default.transform(t)),e.properties&&(e.properties=R(e.properties,t))}),E(jt,function(e,t){e.tag&&(e.tag=e.tag.transform(t)),e.expressions=R(e.expressions,t)}),U={parse:null,DEFNODE:e,AST_Token:j,AST_Node:u,AST_Statement:t,AST_Debugger:H,AST_Directive:s,AST_EmptyStatement:G,AST_SimpleStatement:Y,AST_BlockScope:a,AST_Block:l,AST_BlockStatement:J,AST_StatementWithBody:f,AST_LabeledStatement:X,AST_IterationStatement:p,AST_DWLoop:K,AST_Do:Q,AST_While:Z,AST_For:ee,AST_ForEnumeration:te,AST_ForIn:ne,AST_ForOf:ie,AST_ForAwaitOf:re,AST_With:se,AST_Scope:h,AST_Toplevel:oe,AST_ClassInitBlock:ae,AST_Lambda:d,AST_Accessor:m,AST_LambdaExpression:g,AST_Arrow:ce,AST_AsyncArrow:ue,AST_AsyncFunction:le,AST_Function:pe,AST_GeneratorFunction:he,AST_AsyncGeneratorFunction:fe,AST_LambdaDefinition:v,AST_AsyncDefun:de,AST_AsyncGeneratorDefun:me,AST_Defun:ge,AST_GeneratorDefun:_e,AST_Class:y,AST_DefClass:ve,AST_ClassExpression:ye,AST_ClassProperty:b,AST_ClassField:be,AST_ClassGetter:xe,AST_ClassSetter:we,AST_ClassMethod:Se,AST_ClassInit:ke,AST_Jump:Ae,AST_Exit:Te,AST_Return:Ee,AST_Throw:Ce,AST_LoopControl:x,AST_Break:Pe,AST_Continue:Oe,AST_If:De,AST_Switch:Ie,AST_SwitchBranch:Ne,AST_Default:Le,AST_Case:Re,AST_Try:je,AST_Catch:Me,AST_Finally:Fe,AST_Definitions:w,AST_Const:qe,AST_Let:Be,AST_Var:Ve,AST_VarDef:S,AST_ExportDeclaration:ze,AST_ExportDefault:Ue,AST_ExportForeign:$e,AST_ExportReferences:He,AST_Import:Ge,AST_DefaultValue:We,AST_Call:Je,AST_New:Xe,AST_Sequence:Ke,AST_PropAccess:k,AST_Dot:Qe,AST_Sub:Ze,AST_Spread:et,AST_Unary:tt,AST_UnaryPrefix:nt,AST_UnaryPostfix:it,AST_Binary:rt,AST_Conditional:st,AST_Assign:ot,AST_Await:at,AST_Yield:ct,AST_Array:ut,AST_Destructured:A,AST_DestructuredArray:lt,AST_DestructuredKeyVal:ft,AST_DestructuredObject:pt,AST_Object:ht,AST_ObjectProperty:C,AST_ObjectKeyVal:dt,AST_ObjectMethod:mt,AST_ObjectSetter:gt,AST_ObjectGetter:_t,AST_Symbol:P,AST_SymbolDeclaration:O,AST_SymbolConst:vt,AST_SymbolImport:yt,AST_SymbolLet:bt,AST_SymbolVar:xt,AST_SymbolFunarg:wt,AST_SymbolDefun:St,AST_SymbolLambda:kt,AST_SymbolDefClass:At,AST_SymbolClass:Tt,AST_SymbolCatch:Et,AST_Label:Ct,AST_SymbolRef:Pt,AST_SymbolExport:Ot,AST_LabelRef:Dt,AST_ObjectIdentity:It,AST_Super:Nt,AST_This:Lt,AST_NewTarget:Rt,AST_Template:jt,AST_Constant:D,AST_String:I,AST_Number:Mt,AST_BigInt:Ft,AST_RegExp:qt,AST_Atom:N,AST_Null:Bt,AST_NaN:Vt,AST_Undefined:zt,AST_Hole:Ut,AST_Infinity:$t,AST_Boolean:Ht,AST_False:Gt,AST_True:Wt,first_in_statement:function(e,t,n){for(var i,r=e.parent(-1),s=0;i=e.parent(s++);r=i){if(_(i))return t&&i.value===r;if(i instanceof rt){if(i.left===r)continue}else if("Call"==i.TYPE){if(i.expression===r)continue}else if(i instanceof st){if(i.condition===r)continue}else{if(i instanceof Ue)return n;if(i instanceof k){if(i.expression===r)continue}else if(i instanceof Ke){if(i.expressions[0]===r)continue}else{if(i instanceof Y)return!0;if(i instanceof jt){if(i.tag===r)continue}else if(i instanceof it&&i.expression===r)continue}}return!1}},is_arrow:_,is_generator:function(e){return e instanceof me||e instanceof fe||e instanceof _e||e instanceof he},walk_lambda:function(e,t){_(e)&&e.value?e.value.walk(t):c(e,t)},walk_body:c,TreeWalker:L,TreeTransformer:Yt}}),define("skylark-uglifyjs/parse",["./utils","./ast"],function(e,t){"use strict";const{characters:n,defaults:Ie,makePredicate:i,configure_error_stack:r,HOP:Ne,all:fe}=e,{AST_Accessor:A,AST_Array:pe,AST_Arrow:Le,AST_Assign:he,AST_Await:Re,AST_BigInt:je,AST_Binary:Me,AST_BlockStatement:Fe,AST_Break:qe,AST_Call:de,AST_Case:Be,AST_Catch:Ve,AST_ClassExpression:me,AST_Conditional:ze,AST_Const:Ue,AST_Continue:ge,AST_Debugger:$e,AST_Default:He,AST_DefClass:_e,AST_Definitions:Ge,AST_Defun:ve,AST_Directive:We,AST_Do:Ye,AST_Dot:Je,AST_EmptyStatement:Xe,AST_False:Ke,AST_Finally:Qe,AST_For:Ze,AST_ForIn:ye,AST_ForOf:et,AST_Function:be,AST_Hole:xe,AST_If:tt,AST_Import:nt,AST_IterationStatement:it,AST_Label:rt,AST_LabeledStatement:st,AST_LabelRef:ot,AST_Let:at,AST_New:ct,AST_NewTarget:ut,AST_Null:lt,AST_Number:ft,AST_Object:we,AST_ObjectGetter:pt,AST_ObjectKeyVal:Se,AST_ObjectSetter:ht,AST_PropAccess:dt,AST_RegExp:mt,AST_Return:gt,AST_Sequence:ke,AST_SimpleStatement:_t,AST_String:Ae,AST_Sub:vt,AST_Super:yt,AST_Switch:bt,AST_SymbolCatch:xt,AST_SymbolClass:wt,AST_SymbolConst:St,AST_SymbolDeclaration:kt,AST_SymbolDefClass:At,AST_SymbolDefun:Tt,AST_SymbolExport:Et,AST_SymbolFunarg:Te,AST_SymbolImport:Ee,AST_SymbolLambda:Ct,AST_SymbolLet:Pt,AST_SymbolRef:Ce,AST_SymbolVar:Ot,AST_This:Dt,AST_Throw:It,AST_Token:R,AST_Toplevel:Nt,AST_True:Lt,AST_Try:Rt,AST_UnaryPostfix:jt,AST_UnaryPrefix:Mt,AST_Var:Ft,AST_VarDef:qt,AST_While:Bt,AST_With:Vt,AST_Yield:zt}=t;var e=["abstract async await boolean byte char double enum export final float goto implements import int interface let long native package private protected public short static super synchronized this throws transient volatile yield",E="false null true",Pe="break case catch class const continue debugger default delete do else extends finally for function if in instanceof new return switch throw try typeof var void while with"].join(" "),T="return new delete throw else case",Pe=i(Pe),e=i(e),T=i(T),E=i(E),j=/^0b([01]+)$/i,M=/^0x([0-9a-f]+)$/i,F=/^0o?([0-7]+)$/i,q=i(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%","**",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=","**=",">>=","<<=",">>>=","&=","|=","^=","&&","||","??","&&=","||=","??="]),C="\n\r\u2028\u2029",P="+-*&%=<>!?|~^",Oe=",;:)}]",O="[{(,;:",D=O+"`)}]",I=C+"  \t\f\v​             　\ufeff",B=i(n("./'\"#"+P+D+I));function V(e){return 48<=e&&e<=57}function N(e){return!B[e]}function Ut(e){return/^[a-z_$][a-z0-9_$]*$/i.test(e)}function s(e,t,n,i,r){this.message=e,this.filename=t,this.line=n,this.col=i,this.pos=r}function $t(e,t,n,i,r){throw new s(e,t,n,i,r)}function De(e,t,n){return e.type==t&&(null==n||e.value==n)}C=i(n(C)),P=i(n(P)),Oe=i(n(Oe)),O=i(n(O)),D=i(n(D)),I=i(n(I)),((s.prototype=Object.create(Error.prototype)).constructor=s).prototype.name="SyntaxError",r(s);var L={};function Ht(i,r,s,o){var a={text:i,filename:r,pos:0,tokpos:0,line:1,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[],directives:Object.create(null),read_template:e("Unterminated template literal",function(e){for(var t="";;){var n=i();switch(n){case"\\":n+=i();break;case"`":return void e.push(t);case"$":if("{"==u())return l(),e.push(t),a.regex_allowed=!0}t+=n}function i(){var e=l(!0,!0);return"\r"==e?"\n":e}})},c=!1;function u(){return a.text.charAt(a.pos)}function l(e,t){var n=a.text.charAt(a.pos++);if(e&&!n)throw L;return C[n]?(a.col=0,a.line++,t||(a.newline_before=!0),"\r"==n&&"\n"==u()&&(a.pos++,n="\n")):a.col++,n}function f(e){for(;0<e--;)l()}function p(e){return a.text.substr(a.pos,e.length)==e}function h(){a.tokline=a.line,a.tokcol=a.col,a.tokpos=a.pos}function d(e,t,n){a.regex_allowed="operator"==e&&!Wt[t]||"keyword"==e&&T[t]||"punc"==e&&O[t],"punc"==e&&"."==t?c=!0:n||(c=!1);t={type:e,value:t,line:a.tokline,col:a.tokcol,pos:a.tokpos,endline:a.line,endcol:a.col,endpos:a.pos,nlb:a.newline_before,file:r};return/^(?:num|string|regexp)$/i.test(e)&&(t.raw=i.substring(t.pos,t.endpos)),n||(t.comments_before=a.comments_before,t.comments_after=a.comments_before=[]),a.newline_before=!1,new R(t)}function m(e){$t(e,r,a.tokline,a.tokcol,a.tokpos)}function g(e){return/^0[0-7_]+$/.test(e)}function _(e){var t,n=!1,i=!1,r=!1,s="."==e,o=function(e){for(var t,n="";(t=u())&&e(t,n);)n+=l();return n}(function(e,t){switch(e){case"x":case"X":return!r&&(r=!0);case"e":case"E":return r||!n&&(n=i=!0);case"+":case"-":return i;case i=!1,".":return!(s||n||r||g(t))&&(s=!0)}return/[_0-9a-dfo]/i.test(e)}),e=(g(o=e?e+o:o)?A.has_directive("use strict")&&m("Legacy octal literals are not allowed in strict mode"):o=o.replace(r?/([1-9a-f]|.0)_(?=[0-9a-f])/gi:/([1-9]|.0)_(?=[0-9])/gi,"$1"),e=o,(t=j.exec(e))?parseInt(t[1],2):(t=M.exec(e))?parseInt(t[1],16):(t=F.exec(e))?parseInt(t[1],8):(t=parseFloat(e))==e?t:void 0);return isNaN(e)&&m("Invalid syntax: "+o),s||n||"n"!=u()?d("num",e):d("bigint",o.toLowerCase()+l())}function v(e){var t,n=l(!0,e);if("0"<=n&&n<="7")return t=n,"0"<=(r=u())&&r<="7"&&(t+=l(!0))[0]<="3"&&"0"<=(r=u())&&r<="7"&&(t+=l(!0)),"0"===t?"\0":(0<t.length&&A.has_directive("use strict")&&m("Legacy octal escape sequences are not allowed in strict mode"),String.fromCharCode(parseInt(t,8)));if("u"==n){var i=l(!0,e);if(n+=i,"{"!=i)n+=l(!0,e)+l(!0,e)+l(!0,e);else for(;n+=i=l(!0,e),"}"!=i;);}else"x"==n&&(n+=l(!0,e)+l(!0,e));var r=function(e){switch(e[0]){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"u":if("{"==e[1]&&"}"==e.slice(-1))t=e.slice(2,-1);else{if(5!=e.length)return;t=e.slice(1)}return(t=parseInt(t,16))<0||isNaN(t)?void 0:t<65536?String.fromCharCode(t):1114111<t?void 0:String.fromCharCode(55232+(t>>10))+String.fromCharCode(56320+(1023&t));case"v":return"\v";case"x":var t;return 3!=e.length?void 0:(t=parseInt(e.slice(1),16))<0||isNaN(t)?void 0:String.fromCharCode(t);case"\r":case"\n":return"";default:return"0"==e?"\0":"0"<=e[0]&&e[0]<="9"?void 0:e}}(n);return"string"!=typeof r&&m("Invalid escape sequence: \\"+n),r}var y=e("Unterminated string constant",function(e){for(var t=l(),n="";;){var i=l(!0,!0);if("\\"==i)i=v(!0);else if(C[i])m("Unterminated string constant");else if(i==t)break;n+=i}var r=d("string",n);return r.quote=e,r});function b(e){var t,n=a.regex_allowed,i=function(){for(var e=a.text,t=a.pos;t<a.text.length;++t)if(C[e[t]])return t;return-1}();return-1==i?(t=a.text.substr(a.pos),a.pos=a.text.length):(t=a.text.substring(a.pos,i),a.pos=i),a.col=a.tokcol+(a.pos-a.tokpos),a.comments_before.push(d(e,t,!0)),a.regex_allowed=n,A}var x=e("Unterminated multiline comment",function(){var e=a.regex_allowed,t=function(e,t){if(e=a.text.indexOf(e,a.pos),t&&-1==e)throw L;return e}("*/",!0),t=a.text.substring(a.pos,t).replace(/\r\n|\r|\u2028|\u2029/g,"\n");return f(t.length+2),a.comments_before.push(d("comment2",t,!0)),a.regex_allowed=e,A});function w(){for(var e,t,n=!1,i=!1,r="#"==u()?l():"";e=u();)if(n)"u"!=e&&m("Expecting UnicodeEscapeSequence -- uXXXX"),N(e=v())||m("Unicode char: "+e.charCodeAt(0)+" is not valid in identifier"),r+=e,n=!1;else if("\\"==e)i=n=!0,l();else{if(!N(e))break;r+=l()}return Pe[r]&&i&&(t=r.charCodeAt(0).toString(16).toUpperCase(),r="\\u"+"0000".substr(t.length)+t+r.slice(1)),r}var S=e("Unterminated regular expression",function(e){for(var t,n=!1,i=!1;t=l(!0);)if(C[t])m("Unexpected line terminator");else if(n)e+="\\"+t,n=!1;else if("["==t)i=!0,e+=t;else if("]"==t&&i)i=!1,e+=t;else{if("/"==t&&!i)break;"\\"==t?n=!0:e+=t}var r=w();try{var s=new RegExp(e,r);return s.raw_source=e,d("regexp",s)}catch(e){m(e.message)}});function k(e){return d("operator",function e(t){var n;return u()&&(n=t+u(),q[n])?(l(),e(n)):t}(e||l()))}function e(t,n){return function(e){try{return n(e)}catch(e){if(e!==L)throw e;m(t)}}}function A(e){if(null!=e)return S(e);for(o&&0==a.pos&&p("#!")&&(h(),f(2),b("comment5"));;){for(;I[u()];)l();if(h(),s){if(p("\x3c!--")){f(4),b("comment3");continue}if(p("--\x3e")&&a.newline_before){f(3),b("comment4");continue}}var t=u();if(!t)return d("eof");var n=t.charCodeAt(0);switch(n){case 34:case 39:return y(t);case 46:return l(),p("..")?d("operator","."+l()+l()):V(u().charCodeAt(0))?_("."):d("punc",".");case 47:var i=function(){switch(l(),u()){case"/":return l(),b("comment1");case"*":return l(),x()}return a.regex_allowed?S(""):k("/")}();if(i===A)continue;return i}if(V(n))return _();if(D[t])return d("punc",l());if(p("=>"))return d("punc",l()+l());if(P[t])return k();if(35!=n&&92!=n&&B[t])break;return n=void 0,n=w(),c?d("name",n):E[n]?d("atom",n):Pe[n]?q[n]?d("operator",n):d("keyword",n):d("name",n)}m("Unexpected character '"+t+"'")}return A.context=function(e){return a=e?e:a},A.add_directive=function(e){a.directives[e]=!0},A.push_directives_stack=function(){a.directives=Object.create(a.directives)},A.pop_directives_stack=function(){a.directives=Object.getPrototypeOf(a.directives)},A.has_directive=function(e){return!!a.directives[e]},A}var Gt=i("typeof void delete -- ++ ! ~ - +"),Wt=i("-- ++"),Yt=i("= += -= /= *= %= **= >>= <<= >>>= &= |= ^= &&= ||= ??="),Jt=function(e,t){for(var n=0;n<e.length;)for(var i=e[n++],r=0;r<i.length;r++)t[i[r]]=n;return t}([["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"],["**"]],{}),Xt=i("atom bigint num regexp string");function o(e,T){T=Ie(T,{bare_returns:!1,expression:!1,filename:null,html5_comments:!0,module:!1,shebang:!0,strict:!1,toplevel:null},!0);var E={input:"string"==typeof e?Ht(e,T.filename,T.html5_comments,T.shebang):e,in_async:!1,in_directives:!0,in_funarg:-1,in_function:0,in_generator:!1,in_loop:0,labels:[],peeked:null,prev:null,token:null};function C(e,t){return De(E.token,e,t)}function P(){return E.peeked||(E.peeked=E.input())}function O(){return E.prev=E.token,E.peeked?(E.token=E.peeked,E.peeked=null):E.token=E.input(),E.in_directives=E.in_directives&&("string"==E.token.type||C("punc",";")),E.token}function D(){return E.prev}function I(e,t,n,i){var r=E.input.context();$t(e,r.filename,null!=t?t:r.tokline,null!=n?n:r.tokcol,null!=i?i:r.tokpos)}function N(e,t){I(t,e.line,e.col)}function i(e,t){return e+(void 0===t?"":" «"+t+"»")}function L(e){N(e=null==e?E.token:e,"Unexpected token: "+i(e.type,e.value))}function R(e,t){if(C(e,t))return O();N(E.token,"Unexpected token: "+i(E.token.type,E.token.value)+", expected: "+i(e,t))}function j(e){R("punc",e)}function M(e){return e.nlb||!fe(e.comments_before,function(e){return!e.nlb})}function Z(){return!T.strict&&(C("eof")||C("punc","}")||M(E.token))}function F(e){C("punc",";")?O():e||Z()||j(";")}function q(){j("(");var e=K();return j(")"),e}function t(i){return function(){var e=E.token,t=i.apply(null,arguments),n=D();return t.start=e,t.end=n,t}}function B(){(C("operator","/")||C("operator","/="))&&(E.peeked=null,E.token=E.input(E.token.value.substr(1)))}E.token=O();var V=t(function(e){switch(B(),E.token.type){case"string":var t=E.in_directives,n=K();return t&&(n instanceof Ae?(x=n.start.raw.slice(1,-1),E.input.add_directive(x),n.value=x):E.in_directives=t=!1),F(),t?new We(n):new _t({body:n});case"num":case"bigint":case"regexp":case"operator":case"atom":return z();case"name":switch(E.token.value){case"async":if(De(P(),"keyword","function"))return O(),O(),C("operator","*")?(O(),U(AST_AsyncGeneratorDefun)):U(AST_AsyncDefun);break;case"await":if(E.in_async)return z();break;case"export":if(e||""===T.module||L(),O(),C("operator","*"))return o=s=E.token,O(),C("name","as")&&(O(),ne()||R("name"),o=E.token,O()),R("name","from"),new AST_ExportForeign({aliases:[$(o)],keys:[$(s)],path:ie()});if(C("punc","{")){O();for(var i=[],r=[];ne();){var s=E.token;O(),r.push(s),C("name","as")?(O(),ne()||R("name"),i.push(E.token),O()):i.push(s),C("punc","}")||j(",")}return(j("}"),C("name","from"))?(O(),new AST_ExportForeign({aliases:i.map($),keys:r.map($),path:ie()})):(F(),new AST_ExportReferences({properties:r.map(function(e,t){De(e,"name")||N(e,"Name expected");e=le(Et,e);return e.alias=$(i[t]),e})}))}return C("keyword","default")?(O(),o=E.token,(u=function(){if(C("name","async")){if(De(P(),"keyword","function"))return O(),O(),C("operator","*")?(O(),H(AST_AsyncGeneratorDefun,U(AST_AsyncGeneratorFunction))):H(AST_AsyncDefun,U(AST_AsyncFunction))}else if(C("keyword"))switch(E.token.value){case"class":return O(),H(_e,te(me));case"function":return(O(),C("operator","*"))?(O(),H(AST_GeneratorDefun,U(AST_GeneratorFunction))):H(ve,U(be))}}())?(u.start=o,u.end=D()):(B(),u=K(),F()),new AST_ExportDefault({body:u})):new AST_ExportDeclaration({body:re()});case"import":var o=P();if("punc"==o.type&&/^[(.]$/.test(o.value))break;e||""===T.module||L(),O();var a,c,u=null,l=W(Ee,!0),f=null;if(l?(l.key=new Ae({start:l.start,value:"",end:l.end}),(a=C("punc",","))&&O()):a=!C("string"),a)if(C("operator","*")){var p=E.token;O(),R("name","as"),(u=W(Ee)).key=$(p)}else{for(j("{"),f=[];ne();)De(P(),"name","as")?(p=E.token,O(),O(),(c=W(Ee)).key=$(p)):(c=W(Ee)).key=new Ae({start:c.start,value:c.name,end:c.end}),f.push(c),C("punc","}")||j(",");j("}")}return(u||l||f)&&R("name","from"),new nt({all:u,default:l,path:ie(),properties:f});case"let":if(oe())return O(),h=ce(),F(),h;break;case"yield":if(E.in_generator)return z()}return(De(P(),"punc",":")?function(){var t=W(rt);fe(E.labels,function(e){return e.name!=t.name})||I("Label "+t.name+" defined twice");j(":"),E.labels.push(t);var e=V();E.labels.pop(),e instanceof it||t.references.forEach(function(e){e instanceof ge&&N(e.label.start,"Continue label `"+t.name+"` must refer to IterationStatement")});return new st({body:e,label:t})}:z)();case"punc":switch(E.token.value){case"{":return new Fe({start:E.token,body:G(),end:D()});case"[":case"(":case"`":return z();case";":return E.in_directives=!1,O(),new Xe;default:L()}case"keyword":switch(E.token.value){case"break":return O(),ee(qe);case"class":return O(),te(_e);case"const":O();var h=ae();return F(),h;case"continue":return O(),ee(ge);case"debugger":return O(),F(),new $e;case"do":O();var n=Q(V),d=(R("keyword","while"),q());return F(!0),new Ye({body:n,condition:d});case"while":return O(),new Bt({condition:q(),body:Q(V)});case"for":O();var d=C("name","await")&&O(),m=(j("("),null);if(!d&&C("punc",";")||(m=(C("keyword","const")?(O(),ae):C("name","let")&&oe()?(O(),ce):C("keyword","var")?(O(),ue):K)(!0),d?(R("name","of"),y=AST_ForAwaitOf):C("operator","in")?(O(),y=ye):C("name","of")&&(O(),y=et),!y))return g=m,j(";"),_=C("punc",";")?null:K(),j(";"),v=C("punc",")")?null:K(),j(")"),new Ze({init:g,condition:_,step:v,body:Q(V)});m instanceof Ge?(1<m.definitions.length&&N(m.start,"Only one variable declaration allowed in for..in/of loop"),y!==ye&&m.definitions[0].value&&N(m.definitions[0].value.start,"No initializers allowed in for..of loop")):J(m)||(m=X(m))instanceof AST_Destructured||N(m.start,"Invalid left-hand side in for..in/of loop");var g=y,_=m,v=(B(),K());return j(")"),new g({init:_,object:v,body:Q(V)});case"function":return(O(),C("operator","*"))?(O(),U(AST_GeneratorDefun)):U(ve);case"if":O();var y=q(),m=V(),b=null;return C("keyword","else")&&(O(),b=V()),new tt({condition:y,body:m,alternative:b});case"return":0!=E.in_function||T.bare_returns||I("'return' outside of function"),O();var x=null;return C("punc",";")?O():Z()||(x=K(),F()),new gt({value:x});case"switch":return O(),new bt({expression:q(),body:Q(se)});case"throw":O(),M(E.token)&&I("Illegal newline after 'throw'");x=K();return F(),new It({value:x});case"try":O();var w,S,b=G(),k=null,A=null;return C("keyword","catch")&&(S=E.token,O(),w=null,C("punc","(")&&(O(),w=Y(xt),j(")")),k=new Ve({start:S,argname:w,body:G(),end:D()})),C("keyword","finally")&&(S=E.token,O(),A=new Qe({start:S,body:G(),end:D()})),k||A||I("Missing catch/finally blocks"),new Rt({body:b,bcatch:k,bfinally:A});case"var":O();h=ue();return F(),h;case"with":return E.input.has_directive("use strict")&&I("Strict mode may not include a with statement"),O(),new Vt({expression:q(),body:V()})}}L()});function z(){var e=K();return F(),new _t({body:e})}function ee(e){var t,n=null,e=(null!=(n=Z()?n:W(ot,!0))?((t=find_if(function(e){return e.name==n.name},E.labels))||N(n.start,"Undefined label "+n.name),n.thedef=t):0==E.in_loop&&I(e.TYPE+" not inside a loop or switch"),F(),new e({label:n}));return t&&t.references.push(e),e}function g(e,t){if(C("name",e)){e=P();if(e&&!De(e,"operator","=")&&!("punc"==e.type&&/^[(;}]$/.test(e.value)||t&&M(e)))return O()}}function te(e){for(var t,n=E.in_async,i=E.in_generator,r=(E.input.push_directives_stack(),E.input.add_directive("use strict"),t=e===_e?W(At):W(wt,!0),null),s=(C("keyword","extends")&&(O(),B(),r=_(!0)),j("{"),[]);!C("punc","}");)if(C("punc",";"))O();else{var o=E.token,a=!!g("static"),c=g("async",!0);if(C("operator","*")){O();var u=C("name")&&/^#/.test(E.token.value),l=d(),f=E.token,p=U(c?AST_AsyncGeneratorFunction:AST_GeneratorFunction);p.start=f,p.end=D(),s.push(new AST_ClassMethod({start:o,static:a,private:u,key:l,value:p,end:D()}))}else if(a&&C("punc","{"))s.push(new AST_ClassInit({start:o,value:new AST_ClassInitBlock({start:o,body:G(),end:D()}),end:D()}));else{u=C("name")&&/^#/.test(E.token.value),l=d();if(C("punc","(")){f=E.token,p=U(c?AST_AsyncFunction:be);p.start=f,p.end=D(),s.push(new AST_ClassMethod({start:o,static:a,private:u,key:l,value:p,end:D()}))}else{c&&L(c);c=null;if(C("operator","="))O(),E.in_async=!1,E.in_generator=!1,c=m(),E.in_generator=i,E.in_async=n;else if(!C("punc",";")&&!C("punc","}")){var h=null;switch(l){case"get":h=AST_ClassGetter;break;case"set":h=AST_ClassSetter}if(h){s.push(new h({start:o,static:a,private:C("name")&&/^#/.test(E.token.value),key:d(),value:y(),end:D()}));continue}}F(),s.push(new AST_ClassField({start:o,static:a,private:u,key:l,value:c,end:D()}))}}}return O(),E.input.pop_directives_stack(),E.in_generator=i,E.in_async=n,new e({extends:r,name:t,properties:s})}function f(e){var t;return e instanceof pe?(t=null,e.elements[e.elements.length-1]instanceof AST_Spread&&(t=f(e.elements.pop().expression)),new AST_DestructuredArray({start:e.start,elements:e.elements.map(f),rest:t,end:e.end})):e instanceof he?new AST_DefaultValue({start:e.start,name:f(e.left),value:e.right,end:e.end}):e instanceof AST_DefaultValue?(e.name=f(e.name),e):e instanceof AST_DestructuredArray?(e.elements=e.elements.map(f),e.rest&&(e.rest=f(e.rest)),e):e instanceof AST_DestructuredObject?(e.properties.forEach(function(e){e.value=f(e.value)}),e.rest&&(e.rest=f(e.rest)),e):e instanceof xe?e:e instanceof we?(t=null,e.properties[e.properties.length-1]instanceof AST_Spread&&(t=f(e.properties.pop().expression)),new AST_DestructuredObject({start:e.start,properties:e.properties.map(function(e){return e instanceof Se||N(e.start,"Invalid destructuring assignment"),new AST_DestructuredKeyVal({start:e.start,key:e.key,value:f(e.value),end:e.end})}),rest:t,end:e.end})):e instanceof Te?e:e instanceof Ce?new Te(e):e instanceof zt?new Te({start:e.start,name:"yield",end:e.end}):void N(e.start,"Invalid arrow parameter")}function l(e,t,n){var i,r,s=E.in_async,o=E.in_generator,a=(E.in_async=n,E.in_generator=!1,E.in_funarg),c=(E.in_funarg=E.in_function,e.map(f)),e=(e=e.rest||null)&&f(e),a=(E.in_funarg=a,j("=>"),E.in_loop),u=E.labels,l=(++E.in_function,E.input.push_directives_stack(),E.in_loop=0,E.labels=[],r=C("punc","{")?(E.in_directives=!0,i=G(),null):(i=[],B(),m()),E.input.has_directive("use strict")),a=(E.input.pop_directives_stack(),--E.in_function,E.in_loop=a,E.labels=u,E.in_generator=o,E.in_async=s,new(n?AST_AsyncArrow:Le)({start:t,argnames:c,rest:e,body:i,value:r,end:D()}));return l&&a.each_argname(x),a}var U=function(e){var t,n=E.in_async,i=E.in_generator,r=(/Defun$/.test(e.TYPE)?(t=W(Tt),E.in_async=/^Async/.test(e.TYPE),E.in_generator=/Generator/.test(e.TYPE)):(E.in_async=/^Async/.test(e.TYPE),E.in_generator=/Generator/.test(e.TYPE),t=W(Ct,!0)),!t||e===A||t instanceof kt||L(D()),j("("),E.in_funarg),s=(E.in_funarg=E.in_function,p(")",!T.strict,!1,function(){return u(Te)})),r=(E.in_funarg=r,E.in_loop),o=E.labels,a=(++E.in_function,E.in_directives=!0,E.input.push_directives_stack(),E.in_loop=0,E.labels=[],G()),c=E.input.has_directive("use strict"),r=(E.input.pop_directives_stack(),--E.in_function,E.in_loop=r,E.labels=o,E.in_generator=i,E.in_async=n,new e({name:t,argnames:s,rest:s.rest||null,body:a}));return c&&(t&&x(t),r.each_argname(x)),r};function ne(){return C("name")||C("string")||Ut(E.token.value)}function $(e){return new Ae({start:e,quote:e.quote,value:e.value,end:e})}function ie(){var e=E.token;return R("string"),F(),$(e)}function H(e,t){return t.name&&((t=new e(t)).name=new(e===_e?At:Tt)(t.name)),t}var re=t(function(){if(C("name"))switch(E.token.value){case"async":return(O(),R("keyword","function"),C("operator","*"))?(O(),U(AST_AsyncGeneratorDefun)):U(AST_AsyncDefun);case"let":O();var e=ce();return F(),e}else if(C("keyword"))switch(E.token.value){case"class":return O(),te(_e);case"const":O();e=ae();return F(),e;case"function":return(O(),C("operator","*"))?(O(),U(AST_GeneratorDefun)):U(ve);case"var":O();e=ue();return F(),e}L()});function G(){j("{");for(var e=[];!C("punc","}");)C("eof")&&j("}"),e.push(V());return O(),e}function se(){j("{");for(var e,t,n,i,r=[];!C("punc","}");)C("eof")&&j("}"),C("keyword","case")?(e&&(e.end=D()),t=[],e=new Be({start:(i=E.token,O(),i),expression:K(),body:t}),r.push(e),j(":")):C("keyword","default")?(e&&(e.end=D()),n&&I("More than one default clause in switch statement"),t=[],e=new He({start:(i=E.token,O(),j(":"),i),body:t}),r.push(e),n=e):(t||L(),t.push(V()));return e&&(e.end=D()),O(),r}function r(e,t){for(var n=[];;){var i=E.token,r=Y(e),s=null;if(C("operator","=")?(O(),s=m(t)):!t&&(e===St||r instanceof AST_Destructured)&&I("Missing initializer in declaration"),n.push(new qt({start:i,name:r,value:s,end:D()})),!C("punc",","))break;O()}return n}function oe(){var e=P();return De(e,"name")||De(e,"punc","[")||De(e,"punc","{")}var ae=function(e){return new Ue({start:D(),definitions:r(St,e),end:D()})},ce=function(e){return new at({start:D(),definitions:r(Pt,e),end:D()})},ue=function(e){return new Ft({start:D(),definitions:r(Ot,e),end:D()})};var _=function(e){if(C("operator","new"))return t=e,a=E.token,R("operator","new"),(c=C("punc",".")&&De(P(),"name","target")?(O(),O(),new ut):(c=_(!1),u=C("punc","(")?(O(),p(")",!T.strict)):[],new ct({expression:c,args:u}))).start=a,c.end=D(),h(c,t);var t,n,i,r=E.token;if(C("punc")){switch(r.value){case"`":return h(w(null),e);case"(":return(O(),C("punc",")"))?(O(),l([],r)):(n=K(!1,!0),i=r.comments_before.length,[].unshift.apply(n.start.comments_before,r.comments_before),r.comments_before.length=0,r.comments_before=n.start.comments_before,0==(r.comments_before_length=i)&&0<r.comments_before.length&&((i=r.comments_before[0]).nlb||(i.nlb=r.nlb,r.nlb=!1)),r.comments_after=n.start.comments_after,n.start=r,j(")"),(i=D()).comments_before=n.end.comments_before,i.comments_after.forEach(function(e){n.end.comments_after.push(e),e.nlb&&(E.token.nlb=!0)}),i.comments_after.length=0,i.comments_after=n.end.comments_after,n.end=i,C("punc","=>")?l(n instanceof ke?n.expressions:[n],r):h(n,e));case"[":return h(v(),e);case"{":return h(b(),e)}L()}if(C("keyword"))switch(r.value){case"class":O();var s=te(me);return s.start=r,s.end=D(),h(s,e);case"function":return O(),(o=C("operator","*")?(O(),U(AST_GeneratorFunction)):U(be)).start=r,o.end=D(),h(o,e)}if(C("name")){var o,a,c,u=le(Ce,r);if(O(),"async"==u.name){if(C("keyword","function"))return O(),(o=C("operator","*")?(O(),U(AST_AsyncGeneratorFunction)):U(AST_AsyncFunction)).start=r,o.end=D(),h(o,e);if(C("name")&&De(P(),"punc","=>"))return r=E.token,u=le(Ce,r),O(),l([u],r,!0);if(C("punc","("))return a=h(u,e),C("punc","=>")?((c=a.args)[c.length-1]instanceof AST_Spread&&(c.rest=c.pop().expression),l(c,r,!0)):a}return C("punc","=>")?l([u],r):h(u,e)}if(Xt[E.token.type])return h(function(){var e,t=E.token,n=t.value;switch(t.type){case"num":isFinite(n)?e=new ft({value:n}):(e=new AST_Infinity,n<0&&(e=new Mt({operator:"-",expression:e})));break;case"bigint":e=new je({value:n});break;case"string":e=new Ae({value:n,quote:t.quote});break;case"regexp":e=new mt({value:n});break;case"atom":switch(n){case"false":e=new Ke;break;case"true":e=new Lt;break;case"null":e=new lt;break;default:L()}break;default:L()}return O(),e.start=e.end=t,e}(),e);L()};function p(e,t,n,i){i=i||m;for(var r=!0,s=[];!C("punc",e)&&(r?r=!1:j(","),!t||!C("punc",e));)if(n&&C("punc",","))s.push(new xe({start:E.token,end:E.token}));else if(C("operator","...")){if(i!==m){O(),s.rest=i(),s.rest instanceof AST_DefaultValue&&N(s.rest.start,"Invalid rest parameter");break}s.push(new AST_Spread({start:E.token,expression:(O(),i()),end:D()}))}else s.push(i());return j(e),s}var v=t(function(){return j("["),new pe({elements:p("]",!T.strict,!0)})}),y=t(function(){return U(A)}),b=t(function(){j("{");for(var e=!0,t=[];!C("punc","}")&&(e?e=!1:j(","),T.strict||!C("punc","}"));){var n=E.token;if(C("operator","*")){O();var i=d(),r=E.token,s=U(AST_GeneratorFunction);s.start=r,s.end=D(),t.push(new AST_ObjectMethod({start:n,key:i,value:s,end:D()}))}else if(C("operator","..."))O(),t.push(new AST_Spread({start:n,expression:m(),end:D()}));else if(De(P(),"operator","=")){r=W(Ce);O(),t.push(new Se({start:n,key:n.value,value:new he({start:n,left:r,operator:"=",right:m(),end:D()}),end:D()}))}else if(De(P(),"punc",",")||De(P(),"punc","}"))t.push(new Se({start:n,key:n.value,value:W(Ce),end:D()}));else{i=d();if(C("punc","(")){var o=E.token;(a=U(be)).start=o,a.end=D(),t.push(new AST_ObjectMethod({start:n,key:i,value:a,end:D()}))}else if(C("punc",":"))O(),t.push(new Se({start:n,key:i,value:m(),end:D()}));else{if("name"==n.type)switch(i){case"async":var a,c=C("operator","*")&&O(),o=(i=d(),E.token);(a=U(c?AST_AsyncGeneratorFunction:AST_AsyncFunction)).start=o,a.end=D(),t.push(new AST_ObjectMethod({start:n,key:i,value:a,end:D()}));continue;case"get":t.push(new pt({start:n,key:d(),value:y(),end:D()}));continue;case"set":t.push(new ht({start:n,key:d(),value:y(),end:D()}));continue}L()}}}return O(),new we({properties:t})});function d(){var e=E.token;switch(e.type){case"operator":Pe[e.value]||L();case"num":case"string":case"name":case"keyword":case"atom":return O(),""+e.value;case"punc":j("[");var t=m();return j("]"),t;default:L()}}function le(e,t){var n=t.value;switch(n){case"await":E.in_async&&L(t);break;case"super":e=yt;break;case"this":e=Dt;break;case"yield":E.in_generator&&L(t)}return new e({name:""+n,start:t,end:t})}function x(e){"arguments"!=e.name&&"eval"!=e.name&&"let"!=e.name||N(e.start,"Unexpected "+e.name+" in strict mode")}function W(e,t){return C("name")?(e=le(e,E.token),E.input.has_directive("use strict")&&e instanceof kt&&x(e),O(),e):(t||I("Name expected"),null)}function Y(e){var t,n=E.token;if(C("punc","["))return O(),t=p("]",!T.strict,!0,function(){return u(e)}),new AST_DestructuredArray({start:n,elements:t,rest:t.rest||null,end:D()});if(C("punc","{")){O();for(var i=!0,r=[],s=null;!C("punc","}")&&(i?i=!1:j(","),T.strict||!C("punc","}"));){var o=E.token;if(C("punc","[")||De(P(),"punc",":")){var a=d();j(":"),r.push(new AST_DestructuredKeyVal({start:o,key:a,value:u(e),end:D()}))}else{if(C("operator","...")){O(),s=Y(e);break}a=W(e);C("operator","=")&&(O(),a=new AST_DefaultValue({start:a.start,name:a,value:m(),end:D()})),r.push(new AST_DestructuredKeyVal({start:o,key:o.value,value:a,end:D()}))}}return j("}"),new AST_DestructuredObject({start:n,properties:r,rest:s,end:D()})}return W(e)}function u(e){var t=E.token,e=Y(e);return C("operator","=")?(O(),new AST_DefaultValue({start:t,name:e,value:m(),end:D()})):e}function w(e){for(var t=e?e.start:E.token,n=E.input.context().read_template,i=[],r=[];n(i);)O(),r.push(K()),C("punc","}")||L();return O(),new AST_Template({start:t,expressions:r,strings:i,tag:e,end:D()})}function h(e,t){for(var n=e.start,i=null;;)if(C("operator","?")&&De(P(),"punc",".")&&(O(),O(),i=e),C("punc","[")){O();var r=K();j("]"),e=new vt({start:n,optional:i===e,expression:e,property:r,end:D()})}else if(t&&C("punc","("))O(),e=new de({start:n,optional:i===e,expression:e,args:p(")",!T.strict),end:D()});else if(i===e||C("punc","."))i!==e&&O(),e=new Je({start:n,optional:i===e,expression:e,property:(r=void 0,r=E.token.value,R("name"),r),end:D()});else{if(!C("punc","`"))break;i&&I("Invalid template on optional chain"),e=w(e)}if(i&&(e.terminal=!0),e instanceof de&&!e.pure)for(var s=(n=e.start).comments_before,o=Ne(n,"comments_before_length")?n.comments_before_length:s.length;0<=--o;)if(/[@#]__PURE__/.test(s[o].value)){e.pure=!0;break}return e}function s(e){var t,n,i=E.token;if(E.in_async&&C("name","await"))return E.in_funarg===E.in_function&&I("Invalid use of await in function argument"),E.input.context().regex_allowed=!0,O(),new Re({start:i,expression:s(e),end:D()});if(E.in_generator&&C("name","yield"))return E.in_funarg===E.in_function&&I("Invalid use of yield in function argument"),E.input.context().regex_allowed=!0,O(),n=null,t=!1,C("operator","*")?(O(),n=m(e),t=!0):(C("punc")?Oe[E.token.value]:Z())||(n=m(e)),new zt({start:i,expression:n,nested:t,end:D()});if(C("operator")&&Gt[i.value])return O(),B(),(n=o(Mt,i,s(e))).start=i,n.end=D(),n;for(var r=_(!0);C("operator")&&Wt[E.token.value]&&!M(E.token);)(r=o(jt,E.token,r)).start=i,r.end=E.token,O();return r}function o(e,t,n){var i=t.value;switch(i){case"++":case"--":J(n)||N(t,"Invalid use of "+i+" operator");break;case"delete":n instanceof Ce&&E.input.has_directive("use strict")&&N(n.start,"Calling delete on expression not allowed in strict mode")}return new e({operator:i,expression:n})}var a=function(e,t,n){var i=C("operator")?E.token.value:null,r=null!=(i="in"==i&&n?null:i)?Jt[i]:null;return null!=r&&t<r?(O(),r=a(s(n),"**"==i?r-1:r,n),a(new Me({start:e.start,left:e,operator:i,right:r,end:r.end}),t,n)):e};var c=function(e){var t,n=E.token,i=a(s(i=e),0,i);return C("operator","?")?(O(),t=m(),j(":"),new ze({start:n,condition:i,consequent:t,alternative:m(e),end:D()})):i};function J(e){return e instanceof dt&&!e.optional||e instanceof Ce}function X(e){var t;if(e instanceof pe)return n=null,(!(e.elements[e.elements.length-1]instanceof AST_Spread)||(n=X(e.elements.pop().expression))instanceof AST_Destructured||J(n))&&(t=e.elements.map(X),fe(t,function(e){return e instanceof AST_DefaultValue||e instanceof AST_Destructured||e instanceof xe||J(e)}))?new AST_DestructuredArray({start:e.start,elements:t,rest:n,end:e.end}):e;if(e instanceof he)return(t=X(e.left))instanceof AST_Destructured||J(t)?new AST_DefaultValue({start:e.start,name:t,value:e.right,end:e.end}):e;if(!(e instanceof we))return e;var n=null;if(e.properties[e.properties.length-1]instanceof AST_Spread&&!((n=X(e.properties.pop().expression))instanceof AST_Destructured||J(n)))return e;for(var i=[],r=0;r<e.properties.length;r++){var s=e.properties[r];if(!(s instanceof Se))return e;var o=X(s.value);if(!(o instanceof AST_DefaultValue||o instanceof AST_Destructured||J(o)))return e;i.push(new AST_DestructuredKeyVal({start:s.start,key:s.key,value:o,end:s.end}))}return new AST_DestructuredObject({start:e.start,properties:i,rest:n,end:e.end})}function m(e){var t=E.token,n=c(e),i=E.token.value;if(C("operator")&&Yt[i]){if(J(n)||"="==i&&(n=X(n))instanceof AST_Destructured)return O(),new he({start:t,left:n,operator:i,right:m(e),end:D()});I("Invalid assignment")}return n}function K(e,t){for(var n=E.token,i=[];;){if(t&&C("operator","...")){O(),i.rest=Y(Te);break}if(i.push(m(e)),!C("punc",","))break;if(O(),t&&C("punc",")")&&De(P(),"punc","=>"))break}return 1!=i.length||i.rest?new ke({start:n,expressions:i,end:D()}):i[0]}function Q(e){++E.in_loop;e=e();return--E.in_loop,e}if(T.expression)return B(),e=K(),R("eof"),e;var e=E.token,S=[];for(T.module&&(E.in_async=!0,E.input.add_directive("use strict")),E.input.push_directives_stack();!C("eof");)S.push(V(!0));E.input.pop_directives_stack();var k=D()||e,n=T.toplevel;return n?(n.body=n.body.concat(S),n.end=k):n=new Nt({start:e,body:S,end:k}),n}return{is_identifier_string:Ut,is_identifier_char:N,is_surrogate_pair_head:function(e){return 55296<=e&&e<=56319},is_surrogate_pair_tail:function(e){return 56320<=e&&e<=57343},tokenizer:Ht,parse:t.parse=o,KEYWORDS:Pe,RESERVED_WORDS:e,KEYWORDS_BEFORE_EXPRESSION:T,KEYWORDS_ATOM:E}}),define("skylark-uglifyjs/output",["./utils","./ast","./parse"],function(O,D,I){"use strict";const{defaults:X,makePredicate:K,noop:$,return_false:H,return_true:Q}=O,{AST_Array:t,AST_Arrow:N,AST_AsyncArrow:L,AST_AsyncDefun:R,AST_AsyncFunction:j,AST_AsyncGeneratorDefun:M,AST_AsyncGeneratorFunction:F,AST_Assign:n,AST_Await:s,AST_Binary:G,AST_BlockStatement:i,AST_Break:q,AST_Call:o,AST_Case:B,AST_Catch:V,AST_Class:a,AST_ClassExpression:z,AST_ClassField:U,AST_ClassGetter:Z,AST_ClassInit:ee,AST_ClassMethod:te,AST_ClassProperty:ne,AST_ClassSetter:ie,AST_Conditional:W,AST_Const:r,AST_Constant:re,AST_Continue:se,AST_Debugger:oe,AST_Default:ae,AST_DefaultValue:c,AST_Definitions:ce,AST_DestructuredArray:ue,AST_DestructuredKeyVal:le,AST_DestructuredObject:fe,AST_Destructured:pe,AST_Directive:he,AST_Do:de,AST_Dot:me,AST_EmptyStatement:u,AST_Exit:ge,AST_ExportDeclaration:_e,AST_ExportDefault:ve,AST_ExportForeign:ye,AST_ExportReferences:be,AST_Finally:xe,AST_For:we,AST_ForAwaitOf:Se,AST_ForIn:ke,AST_ForOf:Ae,AST_Function:Te,AST_GeneratorDefun:Ee,AST_GeneratorFunction:Ce,AST_Hole:Pe,AST_If:Oe,AST_Import:De,AST_Jump:Ie,AST_LabeledStatement:Ne,AST_Lambda:Le,AST_Let:Re,AST_New:l,AST_Node:Y,AST_Number:je,AST_Object:Me,AST_ObjectGetter:Fe,AST_ObjectKeyVal:qe,AST_ObjectMethod:Be,AST_ObjectProperty:Ve,AST_ObjectSetter:ze,AST_PropAccess:f,AST_RegExp:Ue,AST_Return:$e,AST_Scope:He,AST_Sequence:Ge,AST_SimpleStatement:We,AST_Spread:Ye,AST_Statement:Je,AST_StatementWithBody:Xe,AST_String:Ke,AST_Sub:Qe,AST_Switch:Ze,AST_SwitchBranch:et,AST_Symbol:p,AST_SymbolExport:tt,AST_SymbolImport:nt,AST_Template:h,AST_Throw:it,AST_Toplevel:rt,AST_Try:st,AST_Unary:d,AST_UnaryPostfix:ot,AST_UnaryPrefix:at,AST_Var:ct,AST_VarDef:ut,AST_While:lt,AST_With:ft,AST_Yield:J,TreeWalker:pt,is_arrow:ht,is_generator:dt,first_in_statement:mt}=D,{is_identifier_char:gt,is_identifier_string:_t,is_surrogate_pair_head:vt,is_surrogate_pair_tail:yt,PRECEDENCE:bt,RESERVED_WORDS:xt}=I;function wt(e){return"comment2"==e.type&&/@preserve|@license|@cc_on/i.test(e.value)}function St(c){c=X(c,{annotations:!1,ascii_only:!1,beautify:!1,braces:!1,comments:!1,extendscript:!1,galio:!1,ie:!1,indent_level:4,indent_start:0,inline_script:!0,keep_quoted_props:!1,max_line_len:!1,preamble:null,preserve_line:!1,quote_keys:!1,quote_style:0,semicolons:!0,shebang:!0,source_map:null,v8:!1,webkit:!1,width:80,wrap_iife:!1},!0);var t,u=H;function e(e){if("number"==typeof e)return new Array(e+1).join(" ");if(!e)return"";if(/^\s*$/.test(e))return e;throw new Error("unsupported indentation: "+JSON.stringify(""+e))}c.comments&&(t=c.comments,"string"==typeof c.comments&&/^\/.*\/[a-zA-Z]*$/.test(c.comments)&&(L=c.comments.lastIndexOf("/"),t=new RegExp(c.comments.substr(1,L-1),c.comments.substr(L+1))),u=t instanceof RegExp?function(e){return"comment5"!=e.type&&t.test(e.value)}:"function"==typeof t?function(e){return"comment5"!=e.type&&t(this,e)}:"some"===t?wt:Q);var r,s,o,a,l,f,n,p=0,h=1,i=e(c.indent_start),d=e(c.indent_level),j=d.length+1>>1,m=0,g=!0,_=c.source_map&&[],v=!1,y=!1,b="";function x(){l=a=!1,n=[];var e=f;return f=r="",e}x();var w=c.ascii_only?function(e,n){return(e=n?e.replace(/[\ud800-\udbff][\udc00-\udfff]/g,function(e){return"\\u{"+(e.charCodeAt(0)-55232<<10|e.charCodeAt(1)-56320).toString(16)+"}"}):e).replace(/[\u0000-\u001f\u007f-\uffff]/g,function(e){var t=e.charCodeAt(0).toString(16);if(t.length<=2&&!n){for(;t.length<2;)t="0"+t;return"\\x"+t}for(;t.length<4;)t="0"+t;return"\\u"+t})}:function(e){for(var t="",n=0,i=0;n<e.length;n++){var r=e.charCodeAt(n);if(vt(r)){if(yt(e.charCodeAt(n+1))){n++;continue}}else if(!yt(r))continue;t+=e.slice(i,n)+"\\u"+r.toString(16),i=n+1}return 0==i?e:t+e.slice(i)};function S(e){return"'"+e.replace(/\x27/g,"\\'")+"'"}function k(e){return'"'+e.replace(/\x22/g,'\\"')+'"'}var M=[null,S,k,function(e,t){return("'"==t?S:k)(e)}][c.quote_style]||function(e,t,n,i){return(i<n?S:k)(e)};function A(n,e){var i=0,r=0;return n=n.replace(/[\\\b\f\n\r\v\t\x22\x27\u2028\u2029\0\ufeff]/g,function(e,t){switch(e){case'"':return++i,'"';case"'":return++r,"'";case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\v":return c.ie?"\\x0B":"\\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case"\ufeff":return"\\ufeff";case"\0":return/[0-9]/.test(n.charAt(t+1))?"\\x00":"\\0"}return e}),M(w(n),e,i,r)}var F=_?function(t,n){_.forEach(function(e){e.line+=t,e.col+=n})}:$,T=_?function(){_.forEach(function(e){c.source_map.add(e.token.file,e.line,e.col,e.token.line,e.token.col,e.name||"name"!=e.token.type?e.name:e.token.value)}),_=[]}:$;function E(e){b+=f.slice(0,m);var t=(f=f.slice(m)).length;for(F(e,t-p),h+=e,p=t;e--;)b+="\n"}var C=c.max_line_len?function(e){g?p>c.max_line_len&&Y.warn("Output exceeds {max_line_len} characters",c):(p>c.max_line_len&&(E(1),g=!0),(g||e)&&T())}:$,q=K("( [ + * / - , .");function P(e,t,n){return gt(e)&&(gt(t)||"\\"==t)||"/"==t&&t==e||("+"==t||"-"==t)&&t==r||"--"==r&&">"==t||"!"==r&&"--"==n||"/"==e&&("in"==n||"instanceof"==n)}var O=c.beautify||c.comments||c.max_line_len||c.preserve_line||c.shebang||!c.semicolons||c.source_map||c.width?function(e){var t=e.charAt(0),n=(v&&t&&(v=!1,"\n"!=t)&&(O("\n"),I()),y&&t&&(y=!1,/[\s;})]/.test(t)||D()),r.slice(-1)),i=(l&&(l=!1,":"==n&&"}"==t||";"!=n&&(!t||";}".indexOf(t)<0))&&((i=q[t])||c.semicolons?(f+=";",p++,g||(C(),g&&!i&&";"==f&&(f="",p=0)),m==f.length-1&&m++):(C(),f+="\n",h++,p=0,/^\s+$/.test(e)&&(l=!0)),c.beautify||(a=!1)),a&&(P(n,t,e)&&(f+=" ",p++),"<"==n&&"!"==e||(a=!1)),o&&(_.push({token:o,name:s,line:h,col:p}),o=!1,g)&&T(),f+=e,e.split(/\r?\n/)),t=i.length-1;h+=t,p+=i[0].length,0<t&&(C(),p=i[t].length),r=e}:function(e){var t=e.charAt(0),n=r.slice(-1);l&&(l=!1,":"==n&&"}"==t||(!t||";}".indexOf(t)<0)&&";"!=n)&&(f+=";",a=!1),a&&(P(n,t,e)&&(f+=" "),"<"==n&&"!"==e||(a=!1)),f+=e,r=e},D=c.beautify?function(){O(" ")}:function(){a=!0},I=c.beautify?function(e){v&&O("\n"),O(e?i.slice(0,-j):i)}:$,B=c.beautify?function(e){var t=i;i+=d,e(),i=t}:function(e){e()},N=c.max_line_len||c.preserve_line?function(){C(),m=f.length,g=!1}:$,V=c.beautify?function(){O("\n"),m=f.length}:N,L=c.beautify?function(){O(";")}:function(){l=!0};var z=_?function(e,t){o=e,s=t}:$;function R(e,t){v||(!e.nlb||!t&&/(^|\n) *$/.test(f)?t&&(y=!0):v=!0)}function U(e){var t=e.value.replace(/[@#]__PURE__/g," ");return(!/^\s*$/.test(t)||/^\s*$/.test(e.value))&&(/comment[134]/.test(e.type)?(O("//"+t),v=!0):"comment2"==e.type&&O("/*"+t+"*/"),1)}return{get:function(){return g||C(!0),b+f},reset:x,indent:I,should_break:c.beautify&&c.width?function(){return p>=c.width}:H,has_parens:function(){return"("==r.slice(-1)},newline:V,print:O,space:D,comma:function(){N(),O(","),N(),D()},colon:function(){O(":"),D()},last:function(){return r},semicolon:L,force_semicolon:function(){l&&O(";"),O(";")},to_utf8:w,print_name:function(e){O(w(e.toString(),!0))},print_string:c.inline_script?function(e,t){e=A(e,t).replace(/<\x2f(script)([>\/\t\n\f\r ])/gi,"<\\/$1$2"),O(e.replace(/\x3c!--/g,"\\x3c!--").replace(/--\x3e/g,"--\\x3e"))}:function(e,t){O(A(e,t))},with_indent:B,with_block:function(e,t){O("{"),V(),B(e),z(t),I(),O("}")},with_parens:function(e){O("("),N(),e(),N(),O(")")},with_square:function(e){O("["),N(),e(),N(),O("]")},add_mapping:z,option:function(e){return c[e]},prepend_comments:c.comments||c.shebang?function(e){var n,i=this;e instanceof ge?n=e.value:e instanceof J&&(n=e.expression);var r,t,s=(s=a(e))||[],o=(n&&((r=new pt(function(e){if(n=e,!((t=r.parent())instanceof G?t.left===n:"Call"==t.TYPE?t.expression===n:t instanceof W?t.condition===n:t instanceof me?t.expression===n:t instanceof ge||(t instanceof Ge?t.expressions[0]===n:t instanceof Qe?t.expression===n:t instanceof ot||t instanceof J)))return!0;var t,n=a(e);n&&(s=s.concat(n))})).push(e),n.walk(r)),1==h&&0==p&&(0<s.length&&c.shebang&&"comment5"==s[0].type&&(O("#!"+s.shift().value+"\n"),I()),t=c.preamble)&&O(t.replace(/\r\n?|\u2028|\u2029|(^|\S)\s*$/g,"$1\n")),s=s.filter(u,e),!1);function a(e){var t=e.start;if(!t){if(!n)return;e.start=t=new AST_Token}e=t.comments_before;if(!e){if(!n)return;t.comments_before=e=[]}if(e._dumped!==i)return e._dumped=i,e}s.forEach(function(e,t){R(e,t),U(e)&&(o=!0)}),o&&R(e.start,!0)}:$,append_comments:c.comments?function(e,n){var t=e.end;t&&(t=t[n?"comments_before":"comments_after"])&&t._dumped!==this&&(e instanceof Je||all(t,function(e){return!/comment[134]/.test(e.type)}))&&(t._dumped=this,t.filter(u,e).forEach(function(e,t){R(e,t||!n),U(e)}))}:$,push_node:function(e){n.push(e)},pop_node:c.preserve_line?function(){var e=n.pop();e.start&&e.start.line>h&&E(e.start.line-h)}:function(){n.pop()},parent:function(e){return n[n.length-2-(e||0)]}}}function e(e,t){e.DEFMETHOD("_codegen",t)}function m(e,t){e.DEFMETHOD("needs_parens",t)}function g(e){var t=e.parent();return!e.has_parens()&&mt(e,!1,!0)?this.name||!(t instanceof ve):!!(e.option("webkit")&&t instanceof f&&t.expression===this)||!!(e.option("wrap_iife")&&t instanceof o&&t.expression===this)||void 0}function kt(e){return!e.has_parens()&&mt(e,!0)}function At(e){e=e.parent();return e instanceof G?"**"==e.operator&&e.left===this:e instanceof o?e.expression===this:e instanceof a||(e instanceof f?e.expression===this:e instanceof h?e.tag===this:void 0)}function Tt(e,t){return!!e.terminal&&(t instanceof o||t instanceof f)&&t.expression===e}function _(e,t){t=t.parent();return t instanceof s||(t instanceof G?!(t instanceof n):t instanceof o?t.expression===e:t instanceof a||(t instanceof W?t.condition===e:t instanceof f?t.expression===e:t instanceof h?t.tag===e:t instanceof d||void 0))}function Et(e,n,i,t){var r=e.length-1,s=t,t=P;e.forEach(function(e,t){s&&(e instanceof he?"use asm"==e.value&&(P=!0):e instanceof u||(e instanceof We&&e.body instanceof Ke&&i.force_semicolon(),s=!1)),e instanceof u||(i.indent(),e.print(i),t==r&&n)||(i.newline(),n&&i.newline())}),P=t}function v(e,t){t.print("{"),t.with_indent(function(){t.append_comments(e,!0)}),t.print("}")}function y(e,t,n){0<e.body.length?t.with_block(function(){Et(e.body,!1,t,n)},e.end):v(e,t)}function Ct(n,i){return function(e){var t=this;e.print(n),e.space(),e.with_parens(function(){t.init.print(e),e.space(),e.print(i),e.space(),t.object.print(e)}),E(t.body,e)}}function b(e,t){var n=e.value;"*"==n||_t(n)?t.print_name(n):t.print_string(n,e.quote)}function Pt(e,n){n.with_parens(function(){e.argnames.forEach(function(e,t){t&&n.comma(),e.print(n)}),e.rest&&(e.argnames.length&&n.comma(),n.print("..."),e.rest.print(n))})}function Ot(e,t){var n=1==e.argnames.length&&!e.rest&&e.argnames[0];n instanceof AST_SymbolFunarg&&"yield"!=n.name?n.print(t):Pt(e,t),t.space(),t.print("=>"),t.space(),e.value?e.value.print(t):y(e,t,!0)}function x(e,t){e.name&&(t.space(),e.name.print(t)),Pt(e,t),t.space(),y(e,t,!0)}function Dt(e){e.print("async"),e.space(),e.print("function"),x(this,e)}function It(e){e.print("async"),e.space(),e.print("function*"),x(this,e)}function Nt(e){e.print("function*"),x(this,e)}function Lt(e,t){var n=e.value;is_async(n)&&(t.print("async"),t.space()),dt(n)&&t.print("*"),k(e,t),x(e.value,t)}function w(n,i){return function(e){e.print(n);var t=this[i];t&&(e.space(),t.print(e)),e.semicolon()}}function Rt(e,t){t.newline(),e.body.forEach(function(e){t.indent(),e.print(t),t.newline()})}function jt(t){return function(n){n.print(t),n.space(),this.definitions.forEach(function(e,t){t&&n.comma(),e.print(n)});var e=n.parent();e instanceof AST_IterationStatement&&e.init===this||n.semicolon()}}function Mt(e,t,n){var i=!1;n&&e.walk(new pt(function(e){return!!i||(e instanceof G&&"in"==e.operator?i=!0:e instanceof He&&(!ht(e)||!e.value)||void 0)})),e.print(t,i)}function Ft(e,t){if(t.option("annotations")&&e.pure){var n,i=0,r=e;do{if(n=r,(r=t.parent(i++))instanceof o&&r.expression===n)return}while(r instanceof f&&r.expression===n);t.print("/*@__PURE__*/")}}function qt(e,n){n.with_parens(function(){e.args.forEach(function(e,t){t&&n.comma(),e.print(n)}),n.add_mapping(e.end)})}function S(e,n,i){var t=e.properties;0<t.length?n.with_block(function(){t.forEach(function(e,t){t&&(i||n.print(","),n.newline()),n.indent(),e.print(n)}),n.newline()},e.end):v(e,n)}function k(e,t){var n=e.key;if(n instanceof Y)return t.with_square(function(){n.print(t)});var i=e.start&&e.start.quote;if(t.option("quote_keys")||i&&t.option("keep_quoted_props"))t.print_string(n,i);else if(""+ +n==n&&0<=n)t.print(Vt(n));else if(e.private)t.print_name(n);else{if(xt[n]?!t.option("ie"):_t(n))return t.print_name(n),n;t.print_string(n,i)}}function A(t){return function(e){this.static&&(e.print("static"),e.space()),e.print(t),e.space(),k(this,e),x(this.value,e)}}function T(e){var t=e.definition();return t&&t.mangled_name||e.name}function E(e,t){t.option("braces")&&!(e instanceof r||e instanceof Re)?C(e,t):e instanceof u?t.force_semicolon():(t.space(),e.print(t))}function Bt(e,t){return 0<e.args.length||t.option("beautify")}function Vt(e){for(var t,n,i=e.toString(10).replace(/^0\./,".").replace("e+","e"),r=[i],s=(Math.floor(e)===e&&r.push(e<0?"-0x"+(-e).toString(16).toLowerCase():"0x"+e.toString(16).toLowerCase()),(e=/^\.0+/.exec(i))?(t=e[0].length,n=i.slice(t),r.push(n+"e-"+(n.length+t-1))):(e=/[^0]0+$/.exec(i))?(t=e[0].length-1,r.push(i.slice(0,-t)+"e"+t)):(e=/^(\d)\.(\d+)e(-?\d+)$/.exec(i))&&r.push(e[1]+e[2]+"e"+(e[3]-e[2].length)),r),o=s[0],a=o.length,c=1;c<s.length;++c)s[c].length<a&&(a=(o=s[c]).length);return o}function C(e,t){t.space(),e instanceof u?v(e,t):e instanceof i?e.print(t):t.with_block(function(){t.indent(),e.print(t),t.newline()},e.end)}function zt(e,t){e.forEach(function(e){e.DEFMETHOD("add_source_map",t)})}var P,Ut;return P=!1,Y.DEFMETHOD("print",function(e,t){var n=this;function i(){e.prepend_comments(n),n.add_source_map(e),n._codegen(e),e.append_comments(n)}e.push_node(n),t||n.needs_parens(e)?e.with_parens(i):i(),e.pop_node()}),Ut=St({inline_script:!1,shebang:!1,width:!1}),Y.DEFMETHOD("print_to_string",function(e){return e?(e=St(e),this.print(e),e.get()):(this.print(Ut),Ut.reset())}),m(Y,H),m(j,g),m(F,g),m(z,g),m(Te,g),m(Ce,g),m(Me,kt),m(s,At),m(d,At),m(Ge,function(e){e=e.parent();return e instanceof t||ht(e)&&e.value===this||e instanceof s||e instanceof G||e instanceof o||e instanceof a||e instanceof ne||e instanceof W||e instanceof c||e instanceof le||e instanceof ve||e instanceof Ae||e instanceof Ve||e instanceof f&&e.expression===this||e instanceof Ye||e instanceof h&&e.tag===this||e instanceof d||e instanceof ut||e instanceof J}),m(G,function(e){var t,n,i,r,e=e.parent();return e instanceof s||(e instanceof G?(t=e.operator,n=bt[t],i=this.operator,(r=bt[i])<n||"??"==t&&("&&"==i||"||"==i)||n==r&&this===e["**"==t?"left":"right"]):e instanceof o?e.expression===this:e instanceof a||(e instanceof f?e.expression===this:e instanceof h?e.tag===this:e instanceof d||void 0))}),m(f,function(e){e=e.parent();return e instanceof l&&e.expression===this&&"Call"==root_expr(this).TYPE||Tt(this,e)}),m(o,function(e){var t=e.parent();if(t instanceof l)return t.expression===this;if(e.option("webkit")&&this.expression instanceof Te&&t instanceof f&&t.expression===this){e=e.parent(1);if(e instanceof n&&e.left===t)return!0}return Tt(this,t)}),m(l,function(e){return!Bt(this,e)&&((e=e.parent())instanceof o?e.expression===this:e instanceof f||(e instanceof h?e.tag===this:void 0))}),m(je,function(e){return!!e.option("galio")&&(e=e.parent())instanceof f&&e.expression===this&&/^0/.test(Vt(this.value))}),m(N,function(e){return _(this,e)}),m(n,function(e){return!!_(this,e)||(e.option("v8")?this.left instanceof pe:this.left instanceof fe?kt(e):void 0)}),m(L,function(e){return _(this,e)}),m(W,function(e){return _(this,e)||e.option("extendscript")&&e.parent()instanceof W}),m(J,function(e){return _(this,e)}),e(he,function(e){var t=this.quote,n=this.value;switch(e.option("quote_style")){case 0:case 2:-1==n.indexOf('"')&&(t='"');break;case 1:-1==n.indexOf("'")&&(t="'")}e.print(t+n+t),e.semicolon()}),e(oe,function(e){e.print("debugger"),e.semicolon()}),e(rt,function(e){Et(this.body,!0,e,!0),e.print("")}),e(Ne,function(e){this.label.print(e),e.colon(),this.body.print(e)}),e(We,function(e){this.body.print(e),e.semicolon()}),e(i,function(e){y(this,e)}),e(u,function(e){e.semicolon()}),e(de,function(e){var t=this;e.print("do"),C(t.body,e),e.space(),e.print("while"),e.space(),e.with_parens(function(){t.condition.print(e)}),e.semicolon()}),e(lt,function(e){var t=this;e.print("while"),e.space(),e.with_parens(function(){t.condition.print(e)}),E(t.body,e)}),e(we,function(e){var t=this;e.print("for"),e.space(),e.with_parens(function(){t.init?(t.init instanceof ce?t.init.print(e):Mt(t.init,e,!0),e.print(";"),e.space()):e.print(";"),t.condition?(t.condition.print(e),e.print(";"),e.space()):e.print(";"),t.step&&t.step.print(e)}),E(t.body,e)}),e(Se,Ct("for await","of")),e(ke,Ct("for","in")),e(Ae,Ct("for","of")),e(ft,function(e){var t=this;e.print("with"),e.space(),e.with_parens(function(){t.expression.print(e)}),E(t.body,e)}),e(_e,function(e){e.print("export"),e.space(),this.body.print(e)}),e(ve,function(e){e.print("export"),e.space(),e.print("default"),e.space();var t=this.body;t.print(e),t instanceof z&&!t.name||t instanceof AST_DefClass||t instanceof AST_LambdaDefinition||t instanceof AST_LambdaExpression&&!t.name&&!ht(t)||e.semicolon()}),e(ye,function(n){var i=this,t=(n.print("export"),n.space(),i.keys.length);function r(e){var t=i.aliases[e],e=i.keys[e];b(e,n),t.value!=e.value&&(n.space(),n.print("as"),n.space(),b(t,n))}0==t?v(i,n):"*"==i.keys[0].value?r(0):n.with_block(function(){n.indent(),r(0);for(var e=1;e<t;e++)n.print(","),n.newline(),n.indent(),r(e);n.newline()},i.end),n.space(),n.print("from"),n.space(),i.path.print(n),n.semicolon()}),e(be,function(e){e.print("export"),e.space(),S(this,e),e.semicolon()}),e(De,function(e){var t=this;e.print("import"),e.space(),t.default&&t.default.print(e),t.all&&(t.default&&e.comma(),t.all.print(e)),t.properties&&(t.default&&e.comma(),S(t,e)),(t.all||t.default||t.properties)&&(e.space(),e.print("from"),e.space()),t.path.print(e),e.semicolon()}),e(N,function(e){Ot(this,e)}),e(L,function(e){e.print("async"),e.space(),Ot(this,e)}),e(Le,function(e){e.print("function"),x(this,e)}),e(R,Dt),e(j,Dt),e(M,It),e(F,It),e(Ee,Nt),e(Ce,Nt),e(a,function(e){e.print("class"),this.name&&(e.space(),this.name.print(e)),this.extends&&(e.space(),e.print("extends"),e.space(),this.extends.print(e)),e.space(),S(this,e,!0)}),e(U,function(e){this.static&&(e.print("static"),e.space()),k(this,e),this.value&&(e.space(),e.print("="),e.space(),this.value.print(e)),e.semicolon()}),e(Z,A("get")),e(ie,A("set")),e(te,function(e){this.static&&(e.print("static"),e.space()),Lt(this,e)}),e(ee,function(e){e.print("static"),e.space(),y(this.value,e)}),e($e,w("return","value")),e(it,w("throw","value")),e(q,w("break","label")),e(se,w("continue","label")),e(Oe,function(e){var t=this;e.print("if"),e.space(),e.with_parens(function(){t.condition.print(e)}),t.alternative?(function(e,t){var n=e.body;if(t.option("braces")&&!(n instanceof r||n instanceof Re)||t.option("ie")&&n instanceof de)return C(n,t);if(!n)return t.force_semicolon();for(;;)if(n instanceof Oe){if(!n.alternative)return C(e.body,t);n=n.alternative}else{if(!(n instanceof Xe))break;n=n.body}E(e.body,t)}(t,e),e.space(),e.print("else"),t.alternative instanceof Oe?(e.space(),t.alternative.print(e)):E(t.alternative,e)):E(t.body,e)}),e(Ze,function(n){var e=this,i=(n.print("switch"),n.space(),n.with_parens(function(){e.expression.print(n)}),n.space(),e.body.length-1);i<0?v(e,n):n.with_block(function(){e.body.forEach(function(e,t){n.indent(!0),e.print(n),t<i&&0<e.body.length&&n.newline()})},e.end)}),e(ae,function(e){e.print("default:"),Rt(this,e)}),e(B,function(e){e.print("case"),e.space(),this.expression.print(e),e.print(":"),Rt(this,e)}),e(st,function(e){e.print("try"),e.space(),y(this,e),this.bcatch&&(e.space(),this.bcatch.print(e)),this.bfinally&&(e.space(),this.bfinally.print(e))}),e(V,function(e){var t=this;e.print("catch"),t.argname&&(e.space(),e.with_parens(function(){t.argname.print(e)})),e.space(),y(t,e)}),e(xe,function(e){e.print("finally"),e.space(),y(this,e)}),e(r,jt("const")),e(Re,jt("let")),e(ct,jt("var")),e(ut,function(e){var t;this.name.print(e),this.value&&(e.space(),e.print("="),e.space(),t=(t=e.parent(1))instanceof we||t instanceof AST_ForEnumeration,Mt(this.value,e,t))}),e(c,function(e){this.name.print(e),e.space(),e.print("="),e.space(),this.value.print(e)}),e(o,function(e){Ft(this,e),this.expression.print(e),this.optional&&e.print("?."),qt(this,e)}),e(l,function(e){Ft(this,e),e.print("new"),e.space(),this.expression.print(e),Bt(this,e)&&qt(this,e)}),e(Ge,function(n){this.expressions.forEach(function(e,t){0<t&&(n.comma(),n.should_break())&&(n.newline(),n.indent()),e.print(n)})}),e(me,function(e){var t=this,n=t.expression,i=(n.print(e),t.property);e.option("ie")&&xt[i]||t.quoted&&e.option("keep_quoted_props")?(t.optional&&e.print("?."),e.with_square(function(){e.add_mapping(t.end),e.print_string(i)})):(n instanceof je&&!/[ex.)]/i.test(e.last())&&e.print("."),e.print(t.optional?"?.":"."),e.add_mapping(t.end),e.print_name(i))}),e(Qe,function(e){var t=this;t.expression.print(e),t.optional&&e.print("?."),e.with_square(function(){t.property.print(e)})}),e(Ye,function(e){e.print("..."),this.expression.print(e)}),e(at,function(e){var t=this.operator,n=this.expression;e.print(t),(/^[a-z]/i.test(t)||/[+-]$/.test(t)&&n instanceof at&&/^[+-]/.test(n.operator))&&e.space(),n.print(e)}),e(ot,function(e){this.expression.print(e),e.add_mapping(this.end),e.print(this.operator)}),e(G,function(e){this.left.print(e),e.space(),e.print(this.operator),e.space(),this.right.print(e)}),e(W,function(e){this.condition.print(e),e.space(),e.print("?"),e.space(),this.consequent.print(e),e.space(),e.colon(),this.alternative.print(e)}),e(s,function(e){e.print("await"),e.space(),this.expression.print(e)}),e(J,function(e){e.print(this.nested?"yield*":"yield"),this.expression&&(e.space(),this.expression.print(e))}),e(t,function(n){var e=this.elements,i=e.length;n.with_square(0<i?function(){n.space(),e.forEach(function(e,t){t&&n.comma(),e.print(n),t===i-1&&e instanceof Pe&&n.comma()}),n.space()}:$)}),e(ue,function(n){var e=this.elements,t=e.length,i=this.rest;n.with_square(t||i?function(){n.space(),e.forEach(function(e,t){t&&n.comma(),e.print(n)}),i?(t&&n.comma(),n.print("..."),i.print(n)):e[t-1]instanceof Pe&&n.comma(),n.space()}:$)}),e(le,function(e){var t=k(this,e),n=this.value;if(t)if(n instanceof c){if(n.name instanceof p&&t==T(n.name))return e.space(),e.print("="),e.space(),void n.value.print(e)}else if(n instanceof p&&t==T(n))return;e.colon(),n.print(e)}),e(fe,function(n){var e=this.properties,t=e.length,i=this.rest;t||i?n.with_block(function(){e.forEach(function(e,t){t&&(n.print(","),n.newline()),n.indent(),e.print(n)}),i&&(t&&(n.print(","),n.newline()),n.indent(),n.print("..."),i.print(n)),n.newline()},this.end):v(this,n)}),e(Me,function(e){S(this,e)}),e(qe,function(e){k(this,e),e.colon(),this.value.print(e)}),e(Be,function(e){Lt(this,e)}),e(Fe,A("get")),e(ze,A("set")),e(p,function(e){e.print_name(T(this))}),e(tt,function(e){var t=T(this),n=(e.print_name(t),this.alias);n.value!=t&&(e.space(),e.print("as"),e.space(),b(n,e))}),e(nt,function(e){var t=T(this),n=this.key;n.value&&n.value!=t&&(b(n,e),e.space(),e.print("as"),e.space()),e.print_name(t)}),e(Pe,$),e(h,function(e){this.tag&&this.tag.print(e),e.print("`");for(var t=0;t<this.expressions.length;t++)e.print(this.strings[t]),e.print("${"),this.expressions[t].print(e),e.print("}");e.print(this.strings[t]),e.print("`")}),e(re,function(e){e.print(""+this.value)}),e(Ke,function(e){e.print_string(this.value,this.quote)}),e(je,function(e){var t=this.start;P&&t&&null!=t.raw?e.print(t.raw):e.print(Vt(this.value))}),e(Ue,function(e){var t=this.value,n=t.toString(),i=n.lastIndexOf("/");t.raw_source?n="/"+t.raw_source+n.slice(i):1==i?n="/(?:)"+n.slice(i):n.indexOf("/",1)<i&&(n="/"+n.slice(1,i).replace(/\\\\|[^/]?\//g,function(e){return"\\"==e[0]?e:e.slice(0,-1)+"\\/"})+n.slice(i)),e.print(e.to_utf8(n).replace(/\\(?:\0(?![0-9])|[^\0])/g,function(e){switch(e[1]){case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\t";case"\b":return"\b";case"\f":return"\f";case"\0":return"\0";case"\v":return"\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}}).replace(/[\n\r\u2028\u2029]/g,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}}))}),zt([Y,Ne],$),zt([t,s,i,V,re,oe,ce,pe,he,xe,Ie,Le,l,Me,Ye,Xe,p,Ze,et,st,at,J],function(e){e.add_mapping(this.start)}),zt([ne,le,Ve],function(e){"string"==typeof this.key&&e.add_mapping(this.start,this.key)}),{OutputStream:St}}),define("skylark-uglifyjs/scope",["./utils","./ast","./parse"],function(j,M,F){"use strict";const{defaults:t,member:q,push_uniq:m,return_false:B,return_this:V,DEF_BITPROPS:z,makePredicate:n,Dictionary:u}=j,{AST_Arrow:U,AST_Assign:$,AST_AsyncArrow:H,AST_Block:G,AST_Catch:W,AST_Conditional:Y,AST_DefClass:J,AST_Definitions:X,AST_DefaultValue:K,AST_Defun:Q,AST_Destructured:g,AST_DestructuredKeyVal:Z,AST_Dot:i,AST_ForEnumeration:ee,AST_IterationStatement:te,AST_Label:_,AST_LabeledStatement:l,AST_Lambda:v,AST_LambdaDefinition:y,AST_LoopControl:ne,AST_Node:ie,AST_Scope:b,AST_Sequence:r,AST_String:re,AST_Sub:s,AST_SwitchBranch:se,AST_Symbol:x,AST_SymbolCatch:w,AST_SymbolClass:oe,AST_SymbolConst:S,AST_SymbolDeclaration:ae,AST_SymbolDefClass:ce,AST_SymbolDefun:k,AST_SymbolFunarg:A,AST_SymbolImport:ue,AST_SymbolLambda:T,AST_SymbolLet:E,AST_SymbolRef:le,AST_SymbolVar:C,AST_Toplevel:f,AST_Try:fe,AST_VarDef:pe,AST_With:he,TreeWalker:e,walk_body:P,walk_lambda:de,AST_BlockScope:O,AST_Unary:me}=M,p=F["RESERVED_WORDS"];function D(e,t,n,i){this._bits=0,this.defun=void 0,this.eliminated=0,this.id=e,this.init=i,this.mangled_name=null,this.name=n.name,this.orig=[n],this.references=[],this.replaced=0,this.safe_ids=void 0,this.scope=t}D.prototype={forEach:function(e){this.orig.forEach(e),this.references.forEach(e)},mangle:function(e){var t,n;this.mangled_name||((t=this.global&&e.cache&&e.cache.props)&&t.has(this.name)?this.mangled_name=t.get(this.name):this.unmangleable(e)?h(this.scope,e).set(this.name,!0):(n=this.redefined(),this.mangled_name=n?n.mangled_name||n.name:function(e,n){var t,i=e.scope,r=h(i,n),s=i.cname_holes,o=new u,a=[i];e.forEach(function(e){var t=e.scope;do{if(q(t,a))break;h(t,n).each(function(e,t){o.set(t,e)}),a.push(t)}while(t=t.parent_scope)});for(var c=0;c<s.length;c++)if(t=L(s[c]),!o.has(t))return s.splice(c,1),r.set(t,!0),t;for(;;)if(t=L(++i.cname),!(r.has(t)||p[t]||n.reserved.has[t])){if(!o.has(t))break;s.push(i.cname)}return r.set(t,!0),t}(this,e),t&&t.set(this.name,this.mangled_name)))},redefined:function(){var t,e=this.defun;if(e)return t=this.name,(e=e.variables.get(t)||e instanceof f&&e.globals.get(t)||this.orig[0]instanceof S&&find_if(function(e){return e.name==t},e.enclosed))&&e!==this?e.redefined()||e:void 0},unmangleable:function(e){if(this.exported)return!0;if(this.undeclared)return!0;if(!e.eval&&this.scope.pinned())return!0;if(e.keep_fargs&&((t=this).orig[0]instanceof A||t.orig[1]instanceof A))return!0;if(e.keep_fnames){var t=this.orig[0];if(t instanceof oe)return!0;if(t instanceof ce)return!0;if(t instanceof k)return!0;if(t instanceof T)return!0}return!(e.toplevel||!this.global)}},z(D,["const_redefs","cross_loop","direct_access","exported","global","undeclared"]);var ge=n("delete ++ --");function _e(e,t){return t instanceof $?t.left===e&&e:t instanceof K?t.name===e&&e:t instanceof g||t instanceof Z?e:t instanceof ee?t.init===e&&e:t instanceof me?ge[t.operator]&&t.expression:void 0}function ve(e,t){e.enclosed=[],e.parent_scope=t,e.functions=new u,e.variables=new u,t&&(e.make_def=t.make_def)}function o(e,t){ve(e,t),e.uses_eval=!1,e.uses_with=!1}function h(e,t){var n,i=e.names_in_use;return i||(e.cname=-1,e.cname_holes=[],e.names_in_use=i=new u,n=t.cache&&t.cache.props,e.enclosed.forEach(function(e){e.unmangleable(t)&&i.set(e.name,!0),e.global&&n&&n.has(e.name)&&i.set(n.get(e.name),!0)})),i}function d(e){return e=t(e,{eval:!1,ie:!1,keep_fargs:!1,keep_fnames:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1}),Array.isArray(e.reserved)||(e.reserved=[]),m(e.reserved,"arguments"),e.reserved.has=n(e.reserved),e}f.DEFMETHOD("figure_out_scope",function(l){l=t(l,{cache:null,ie:!1});var f=this,o=null,a=!1,n=0,c=f.parent_scope=null,p=new e(function(i,e){var t,n;if(i instanceof J)return t=a,a=p.parent()instanceof AST_ExportDeclaration,i.name.walk(p),a=t,s(function(){i.extends&&i.extends.walk(p),i.properties.forEach(function(e){e.walk(p)})}),!0;if(i instanceof X)return t=a,a=p.parent()instanceof AST_ExportDeclaration,e(),a=t,!0;if(i instanceof y)return t=a,a=p.parent()instanceof AST_ExportDeclaration,i.name.walk(p),a=t,s(function(){i.argnames.forEach(function(e){e.walk(p)}),i.rest&&i.rest.walk(p),P(i,p)}),!0;if(i instanceof se)return i.init_vars(c),e(),!0;if(i instanceof fe)return s(function(){P(i,p)}),i.bcatch&&i.bcatch.walk(p),i.bfinally&&i.bfinally.walk(p),!0;if(i instanceof he){for(var r=c;!(r=r.resolve()).uses_with&&(r.uses_with=!0,r=r.parent_scope););return s(e),!0}if(i instanceof O)return s(e),!0;function s(e){i.init_vars(c);var t=o,n=c;i instanceof b&&(o=i),c=i,e(),c=n,o=t}i instanceof x&&(i.scope=c),i instanceof _&&((i.thedef=i).references=[]),i instanceof w?c.def_variable(i).defun=o:i instanceof S?((n=c.def_variable(i)).defun=o,a&&(n.exported=!0)):i instanceof k?(n=o.def_function(i,p.parent()),a&&(n.exported=!0)):i instanceof A?o.def_variable(i):i instanceof T?(n=o.def_function(i,"arguments"==i.name?void 0:o),l.ie&&"arguments"!=i.name&&(n.defun=o.parent_scope.resolve())):i instanceof E?(n=c.def_variable(i),a&&(n.exported=!0)):i instanceof C&&(n=o.def_variable(i,i instanceof ue?void 0:null),a)&&(n.exported=!0)}),h=(f.make_def=function(e,t){return new D(++n,this,e,t)},f.walk(p),f.globals=new u,[]),p=new e(function(e){if(e instanceof W)return e.argname instanceof g?(h.push(e),e.argname.walk(p),h.pop(),P(e,p),!0):void 0;if(e instanceof v)return h.push(e),e.name&&e.name.walk(p),e.argnames.forEach(function(e){e.walk(p)}),e.rest&&e.rest.walk(p),h.pop(),de(e,p),!0;if(e instanceof ne)return e.label&&e.label.thedef.references.push(e),!0;if(e instanceof ae){var t,n=e.definition();if(n.preinit=n.references.length,e instanceof w){if(t=n.redefined())for(var i=e.scope;i&&m(i.enclosed,t)&&i!==t.scope;i=i.parent_scope);}else e instanceof S?(t=n.redefined())&&(t.const_redefs=!0):n.scope!==e.scope&&(e instanceof k||e instanceof A||e instanceof C)&&(e.mark_enclosed(l),t=e.scope.find_variable(e.name),e.thedef!==t)&&((e.thedef=t).orig.push(e),e.mark_enclosed(l));return"arguments"!=e.name||(r=e instanceof C&&p.parent())instanceof pe&&!r.value||(o=e.scope.resolve().find_variable("arguments"))&&d(o)&&(o.scope.uses_arguments=3),!0}if(e instanceof le){for(var r,s=e.name,o=e.scope.find_variable(s),a=h.length;0<a&&o&&!((a=h.lastIndexOf(o.scope,a-1))<0);){var c=o.orig[0];if(c instanceof w||c instanceof A||c instanceof T){e.in_arg=!0;break}o=o.scope.parent_scope.find_variable(s)}if(o?"arguments"==s&&d(o)&&(_e(e,r=p.parent())?o.scope.uses_arguments=3:o.scope.uses_arguments<2&&!(r instanceof AST_PropAccess&&r.expression===e)?o.scope.uses_arguments=2:o.scope.uses_arguments||(o.scope.uses_arguments=!0)):o=f.def_global(e),"eval"==s)if("Call"==(r=p.parent()).TYPE&&r.expression===e)for(i=e.scope;!(i=i.resolve()).uses_eval&&(i.uses_eval=!0,i=i.parent_scope););else o.undeclared&&(f.uses_eval=!0);if(o.init instanceof y&&o.scope!==o.init.name.scope){var u=e.scope;do{if(u===o.init.name.scope)break}while(u=u.parent_scope);u||(o.init=void 0)}return e.thedef=o,e.reference(l),!0}});function d(e){return e.orig[0]instanceof A&&!(e.orig[1]instanceof A||e.orig[2]instanceof A)&&!is_arrow(e.scope)}function i(e,t){var n,i,r=e.name,s=e.thedef;if(all(s.orig,function(e){return!(e instanceof S||e instanceof E)}))return(n=t.find_variable(r))?(i=n.redefined())&&(n=i):n=f.globals.get(r),n?n.orig.push(e):n=t.def_variable(e),n.undeclared&&f.variables.set(r,n),"arguments"==r&&d(s)&&e instanceof T||(s.defun=n.scope,s.forEach(function(e){e.redef=s,e.thedef=n,e.reference(l)})),1}f.walk(p),l.ie&&f.walk(new e(function(e){var t,n;return e instanceof w?(t=(n=e.thedef).defun,i(e,t="arguments"!=n.name&&t.name instanceof T&&t.name.name==n.name?t.parent_scope.resolve():t),!0):e instanceof T?(n=e.thedef,i(e,e.scope.parent_scope.resolve())?void 0!==e.thedef.init?e.thedef.init=!1:n.init&&(e.thedef.init=n.init):n.defun=void 0,!0):void 0}))}),f.DEFMETHOD("def_global",function(e){var t=this.globals,n=e.name;return t.has(n)?t.get(n):((e=this.make_def(e)).undeclared=!0,e.global=!0,t.set(n,e),e)}),O.DEFMETHOD("init_vars",function(e){ve(this,e)}),b.DEFMETHOD("init_vars",function(e){o(this,e)}),U.DEFMETHOD("init_vars",function(e){return o(this,e),this}),H.DEFMETHOD("init_vars",function(e){o(this,e)}),v.DEFMETHOD("init_vars",function(e){return o(this,e),this.uses_arguments=!1,this.def_variable(new A({name:"arguments",scope:this,start:this.start,end:this.end})),this}),x.DEFMETHOD("mark_enclosed",function(e){for(var t=this.definition(),n=this.scope;n&&m(n.enclosed,t)&&(e?(e.keep_fargs&&n instanceof v&&n.each_argname(function(e){m(t.scope.enclosed,e.definition())}),e.keep_fnames&&n.functions.each(function(e){m(t.scope.enclosed,e)})):n._var_names=void 0,n!==t.scope);n=n.parent_scope);}),x.DEFMETHOD("reference",function(e){this.definition().references.push(this),this.mark_enclosed(e)}),O.DEFMETHOD("find_variable",function(e){return this.variables.get(e)||this.parent_scope&&this.parent_scope.find_variable(e)}),O.DEFMETHOD("def_function",function(e,t){var n=this.def_variable(e,t);return(!n.init||n.init instanceof y)&&(n.init=t),this.functions.set(e.name,n),n}),O.DEFMETHOD("def_variable",function(e,t){var n=this.variables.get(e.name);return n?(n.orig.push(e),n.init instanceof AST_LambdaExpression&&(n.init=t)):(n=this.make_def(e,t),this.variables.set(e.name,n),n.global=!this.parent_scope),e.thedef=n}),x.DEFMETHOD("unmangleable",function(e){var t=this.definition();return!t||t.unmangleable(e)}),_.DEFMETHOD("unmangleable",B),x.DEFMETHOD("definition",function(){return this.thedef}),f.DEFMETHOD("mangle_names",function(s){(s=d(s)).cache&&s.cache.props&&(t=h(this,s),s.cache.props.each(function(e){t.set(e,!0)}));var t,o=-1,a=[],c=new e(function(e,t){var n,i,r;if(e instanceof O)return e instanceof l&&(n=o),s.webkit&&e instanceof te&&e.init instanceof AST_Let&&e.init.definitions.forEach(function(e){e.name.match_symbol(function(e){var t,n,i;e instanceof E&&(t=e.definition(),n=e.scope.parent_scope,i=n.def_variable(e),e.thedef=t,n.to_mangle.push(i),t.redefined=function(){return i})})},!0),i=e.to_mangle=[],e.variables.each(function(e){!function(t){var e=t.orig[0],n=t.redefined();if(!n){if(!(e instanceof S))return;var i=t.scope.resolve();if(t.scope===i)return;if(t.scope.parent_scope.find_variable(e.name))return;n=i.def_variable(e),i.to_mangle.push(n)}a.push(t),t.references.forEach(r),(e instanceof w||e instanceof S)&&(r(e),t.redefined=function(){return n});return 1;function r(e){e.thedef=n,e.reference(s),e.thedef=t}}(e)&&i.push(e)}),t(),s.cache&&e instanceof f&&e.globals.each(u),e instanceof Q&&c.has_directive("use asm")&&((t=new le(e.name)).scope=e,t.reference(s)),(i=36<i.length?(t=i.map(function(e,t){return t}).sort(function(e,t){return i[t].references.length-i[e].references.length||e-t})).slice(0,36).sort(function(e,t){return e-t}).map(function(e){return i[e]}).concat(t.slice(36).sort(function(e,t){return e-t}).map(function(e){return i[e]})):i).forEach(u),!(e instanceof l)||s.v8&&function(e){var t,n=0;for(;t=e.parent(n++);){if(t instanceof G)return t instanceof f&&!s.toplevel;if(t instanceof l)return 1}}(c)||(o=n),!0;if(e instanceof _){for(;r=L(++o),p[r];);return e.mangled_name=r,!0}});function u(e){s.reserved.has[e.name]||e.mangle(s)}this.walk(c),a.forEach(u)}),f.DEFMETHOD("find_colliding_names",function(n){var i=n.cache&&n.cache.props,t=Object.create(p);return n.reserved.forEach(r),this.globals.each(s),this.walk(new e(function(e){e instanceof O&&e.variables.each(s)})),t;function r(e){t[e]=!0}function s(e){var t=e.name;if(e.global&&i&&i.has(t))t=i.get(t);else if(!e.unmangleable(n))return;r(t)}}),f.DEFMETHOD("expand_names",function(i){L.reset(),L.sort(),i=d(i);var r=this.find_colliding_names(i),s=0;function t(t){var e,n;t.global&&i.cache||t.unmangleable(i)||i.reserved.has[t.name]||(e=t.redefined(),n=e?e.rename||e.name:function(){for(var e;e=L(s++),r[e];);return e}(),t.rename=n,t.forEach(function(e){e.definition()===t&&(e.name=n)}))}this.globals.each(t),this.walk(new e(function(e){e instanceof O&&e.variables.each(t)}))}),ie.DEFMETHOD("tail_node",V),r.DEFMETHOD("tail_node",function(){return this.expressions[this.expressions.length-1]}),f.DEFMETHOD("compute_char_frequency",function(e){e=d(e),L.reset();var t=x.prototype.add_source_map;try{x.prototype.add_source_map=function(){this.unmangleable(e)||L.consider(this.name,-1)},e.properties&&(i.prototype.add_source_map=function(){L.consider(this.property,-1)},s.prototype.add_source_map=function(){!function e(t){t instanceof re?L.consider(t.value,-1):t instanceof Y?(e(t.consequent),e(t.alternative)):t instanceof r&&e(t.tail_node())}(this.property)}),L.consider(this.print_to_string(),1)}finally{x.prototype.add_source_map=t,delete i.prototype.add_source_map,delete s.prototype.add_source_map}L.sort()});a=Object.create(null),ye=be("0123456789"),N=be("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_"),R.consider=function(e,t){for(var n=e.length;0<=--n;)I[e[n]]+=t},R.sort=function(){c=N.sort(we).concat(ye).sort(we)},(R.reset=xe)();var a,c,I,ye,N,L=R;function be(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push(i),a[i]=-.01*n}return t}function xe(){c=null,I=Object.create(a)}function we(e,t){return I[t]-I[e]}function R(e){var t=N[e%54];for(e=Math.floor(e/54);0<=--e;e>>=6)t+=c[63&e];return t}return{base54:L,is_lhs:_e}}),define("skylark-uglifyjs/compress",["./utils","./ast","./output","./parse","./scope"],function(e,t,n,i,r){"use strict";const{AST_Accessor:Je,AST_Array:be,AST_Arrow:d,AST_Assign:xe,AST_AsyncArrow:m,AST_Await:Xe,AST_BigInt:s,AST_Binary:we,AST_Block:Ke,AST_BlockScope:Qe,AST_BlockStatement:Se,AST_Boolean:f,AST_Break:N,AST_Call:ke,AST_Case:Ze,AST_Catch:te,AST_Class:et,AST_ClassExpression:ne,AST_ClassInitBlock:o,AST_ClassProperty:a,AST_Conditional:Ae,AST_Const:ie,AST_Constant:A,AST_Continue:L,AST_Debugger:tt,AST_Default:nt,AST_DefaultValue:Te,AST_DefClass:re,AST_Definitions:it,AST_Defun:rt,AST_Destructured:Ee,AST_DestructuredArray:st,AST_DestructuredKeyVal:ot,AST_DestructuredObject:at,AST_Directive:w,AST_Do:ct,AST_Dot:ut,AST_DWLoop:lt,AST_EmptyStatement:Z,AST_Exit:ft,AST_ExportDeclaration:se,AST_ExportDefault:oe,AST_ExportReferences:c,AST_False:ae,AST_Finally:P,AST_For:pt,AST_ForEnumeration:ht,AST_ForIn:k,AST_Function:dt,AST_Hole:ce,AST_If:Ce,AST_Import:T,AST_Infinity:_,AST_IterationStatement:mt,AST_Jump:R,AST_LabeledStatement:ue,AST_Lambda:Pe,AST_LambdaDefinition:le,AST_LambdaExpression:gt,AST_Let:_t,AST_LoopControl:vt,AST_NaN:v,AST_New:p,AST_Node:Oe,AST_Null:E,AST_Number:De,AST_Object:yt,AST_ObjectKeyVal:bt,AST_ObjectProperty:xt,AST_ObjectIdentity:wt,AST_ObjectMethod:g,AST_PropAccess:Ie,AST_RegExp:W,AST_Return:Ne,AST_Scope:Le,AST_Sequence:Re,AST_SimpleStatement:je,AST_Spread:Me,AST_Statement:u,AST_String:H,AST_Sub:St,AST_Switch:kt,AST_SwitchBranch:j,AST_Symbol:At,AST_SymbolCatch:fe,AST_SymbolConst:O,AST_SymbolDeclaration:Tt,AST_SymbolDefun:Et,AST_SymbolExport:l,AST_SymbolFunarg:Fe,AST_SymbolImport:pe,AST_SymbolLambda:C,AST_SymbolLet:D,AST_SymbolRef:qe,AST_Template:Ct,AST_This:y,AST_Toplevel:Pt,AST_True:I,AST_Try:Ot,AST_Unary:Dt,AST_UnaryPostfix:It,AST_UnaryPrefix:Be,AST_Undefined:Ve,AST_Var:ee,AST_VarDef:ze,AST_While:Nt,AST_With:Lt,AST_Yield:Rt,TreeTransformer:jt,TreeWalker:Ue,first_in_statement:x,is_arrow:Mt,is_generator:Ft,walk_body:M,walk_lambda:F}=t,{all:$e,defaults:b,Dictionary:qt,HOP:q,makePredicate:S,member:Bt,noop:he,push_uniq:de,remove:B,return_false:He,return_null:V,return_true:G,return_this:z}=e,{JS_Parse_Error:Y,parse:J,PRECEDENCE:U,is_identifier_string:$}=i,X=n["OutputStream"],Vt=r["is_lhs"];function K(e,t){if(!(this instanceof K))return new K(e,t);jt.call(this,this.before,this.after),this.options=b(e,{annotations:!t,arguments:!t,arrows:!t,assignments:!t,awaits:!t,booleans:!t,collapse_vars:!t,comparisons:!t,conditionals:!t,dead_code:!t,default_values:!t,directives:!t,drop_console:!1,drop_debugger:!t,evaluate:!t,expression:!1,functions:!t,global_defs:!1,hoist_exports:!t,hoist_funs:!1,hoist_props:!t,hoist_vars:!1,ie:!1,if_return:!t,imports:!t,inline:!t,join_vars:!t,keep_fargs:t,keep_fnames:!1,keep_infinity:!1,loops:!t,merge_vars:!t,module:!1,negate_iife:!t,objects:!t,optional_chains:!t,passes:1,properties:!t,pure_funcs:null,pure_getters:!t&&"strict",reduce_funcs:!t,reduce_vars:!t,rests:!t,sequences:!t,side_effects:!t,spreads:!t,strings:!t,switches:!t,templates:!t,top_retain:null,toplevel:!(!e||!e.module&&!e.top_retain),typeofs:!t,unsafe:!1,unsafe_comps:!1,unsafe_Function:!1,unsafe_math:!1,unsafe_proto:!1,unsafe_regexp:!1,unsafe_undefined:!1,unused:!t,varify:!t,webkit:!1,yields:!t},!0);var e=this.options.evaluate,n=(this.eval_threshold=/eager/.test(e)?1/0:+e,this.options.global_defs);if("object"==typeof n)for(var i in n)/^@/.test(i)&&q(n,i)&&(n[i.slice(1)]=J(n[i],{expression:!0}));!0===this.options.inline&&(this.options.inline=4),this.drop_fargs=this.options.keep_fargs?He:function(e,t){var n;return!e.length_read&&((n=e.name)?n.fixed_value()===e&&!(n=n.definition()).direct_access&&(n=n.escaped)&&1!=n.depth:t&&"Call"==t.TYPE&&t.expression===e)},this.options.module&&(this.directives["use strict"]=!0);var r=this.options.pure_funcs,t=("function"==typeof r?this.pure_funcs=r:"string"==typeof r?this.pure_funcs=function(e){var t;return e instanceof ke?t=e.expression:e instanceof Ct&&(t=e.tag),!(t&&r===t.print_to_string())}:Array.isArray(r)?this.pure_funcs=function(e){var t;return e instanceof ke?t=e.expression:e instanceof Ct&&(t=e.tag),!(t&&Bt(t.print_to_string(),r))}:this.pure_funcs=G,this.options.sequences),s=(this.sequences_limit=1==t?800:0|t,this.options.top_retain),e=(s instanceof RegExp?this.top_retain=function(e){return s.test(e.name)}:"function"==typeof s?this.top_retain=s:s&&("string"==typeof s&&(s=s.split(/,/)),this.top_retain=function(e){return Bt(e.name,s)}),this.options.toplevel);this.toplevel="string"==typeof e?{funcs:/funcs/.test(e),vars:/vars/.test(e)}:{funcs:e,vars:e}}function Q(e,t){var n,i=t.get_property();if(!(i instanceof Oe)){if(e instanceof be){t=e.elements;if("length"==i)return Sn(t.length,e);"number"==typeof i&&i in t&&(n=t[i])}else if(e instanceof Pe){if("length"==i)return e.length_read=!0,Sn(e.argnames.length,e)}else if(e instanceof yt)for(var i=""+i,r=e.properties,s=r.length;0<=--s;){if(!sr(r[s]))return;n||r[s].key!==i||(n=r[s].value)}return n instanceof qe&&n.fixed_value()||n}}function zt(e,t,n,i,r,s,o){var a=t.parent(r);if(!(e.option("unsafe")&&a instanceof ut&&(c=i,l=a.property,c instanceof f?Cr.Boolean[l]:c instanceof De?Cr.Number[l]:c instanceof H?Cr.String[l]:"valueOf"!=l&&(c instanceof be?Cr.Array[l]:c instanceof Pe?Cr.Function[l]:c instanceof yt?Cr.Object[l]:c instanceof W&&Cr.RegExp[l]&&!c.value.global)))){var c,u,l=Vt(n,a);if(l)return l;if(0!=r||!i||!i.is_constant()){if(a instanceof be)return zt(e,t,a,a,r+1);if(a instanceof xe)switch(a.operator){case"=":return zt(e,t,a,i,r+1,s,o);case"&&=":case"||=":case"??=":return zt(e,t,a,a,r+1);default:return}return a instanceof we?Ye[a.operator]?zt(e,t,a,a,r+1):void 0:a instanceof ke?!s&&a.expression===n&&!a.is_expr_pure(e)&&(!(i instanceof gt)||!(a instanceof p)&&i.contains_this()):a instanceof Ae?a.condition===n?void 0:zt(e,t,a,a,r+1):a instanceof ht?a.init===n:a instanceof bt?a.value!==n?void 0:(c=t.parent(r+1),zt(e,t,c,c,r+2)):a instanceof Ie?a.expression!==n?void 0:(u=Q(i,a),(!s||o)&&zt(e,t,a,u,r+1)):a instanceof Re&&a.tail_node()===n?zt(e,t,a,i,r+1,s,o):void 0}}}function me(e){return e instanceof et||e instanceof Pe}function Ut(e){return e instanceof et||e instanceof rt||e instanceof dt}function $t(e){return"arguments"==e.name&&e.scope.uses_arguments}function ge(e,t){do{if(e===t)return;if(t instanceof Le)return 1}while(t=t.parent_scope)}function Ht(e,t,n){var i=e.redef||e.definition();return(!e.in_arg||!is_funarg(i))&&$e(i.orig,function(e){return e instanceof O||e instanceof D?e instanceof pe||t&&Mi(t,e):!(n&&e instanceof C)})}function Gt(e,t,n,i){return i instanceof xe?"="==i.operator&&i.right===n:i instanceof ke?i.expression!==n||i instanceof p:i instanceof AST_ClassField?i.value===n&&!i.static:i instanceof ft?i.value===n&&t.resolve()!==e.scope.resolve():i instanceof ze&&i.value===n}function _e(e,t){var n=Ge(qe,e);return n.fixed=t||Ge(Ve,e),n}function ve(n,i){return function(e){var t=n(e),e=_e(t,i),t=t.definition();return t.references.push(e),t.replaced++,e}}function ye(e,t,n){n.assignments=0,n.bool_return=0,n.drop_return=0,n.cross_loop=!1,n.direct_access=!1,n.escaped=[],n.fixed=!n.const_redefs&&!n.scope.pinned()&&!t.exposed(n)&&!(n.init instanceof gt&&n.init!==n.scope)&&n.init,n.reassigned=0,n.recursive_refs=0,n.references=[],n.single_use=void 0}function Wt(e,t,n){n.variables.each(function(e){ye(0,t,e)})}function Yt(n,i,r){r.fn_defs=[],r.variables.each(function(e){ye(0,i,e);var t=e.init;t instanceof le&&(r.fn_defs.push(t),t.safe_ids=null),null===e.fixed?(e.safe_ids=n.safe_ids,tn(n,e)):e.fixed&&(n.loop_ids[e.id]=n.in_loop,tn(n,e))}),r.may_call_this=function(){r.may_call_this=r.contains_this()?G:He},r.uses_arguments&&r.each_argname(function(e){e.definition().last_ref=!1}),i.option("ie")&&r.variables.each(function(e){var t=e.orig[0].definition();t!==e&&(t.fixed=!1)})}function Jt(e,t){t=t.safe_ids;return void 0===t||t===e.safe_ids}function Xt(e,t){var n=e.fn_scanning;(e.fn_scanning=t).walk(e),e.fn_scanning=n}function Kt(n,i){i.enclosed.forEach(function(e){var t;i.variables.get(e.name)===e||rn(n,e)||(e.single_use=!1,(t="function"==typeof(t=e.fixed)?t():t)instanceof Pe&&void 0!==t.safe_ids)||(e.fixed=!1)})}function Qt(e,t,n){var i,r=n.safe_ids;void 0!==r&&!1!==r&&(n.parent_scope.resolve().may_call_this===G?Bt(n,e.fn_visited)&&Kt(e,n):r?(i=Bt(n,e.fn_visited),r===e.safe_ids?i||Xt(e,n):i?Kt(e,n):n.safe_ids=!1):e.fn_scanning&&e.fn_scanning!==t.scope.resolve()?n.safe_ids=!1:(n.safe_ids=e.safe_ids,Xt(e,n)))}function Zt(t,e){var n=e.fn_defs,i=e.may_call_this===G?n:n.filter(function(e){return!1===e.safe_ids||(e.safe_ids=t.safe_ids,Xt(t,e),!1)});en(t),i.forEach(function(e){e.safe_ids=t.safe_ids,Xt(t,e)}),n.forEach(function(e){e.safe_ids=void 0}),e.fn_defs=void 0,e.may_call_this=void 0}function h(e,t){var n=Object.create(e.safe_ids);t||(n.seq={}),e.safe_ids=n}function en(e){e.safe_ids=Object.getPrototypeOf(e.safe_ids)}function tn(e,t){e.safe_ids[t.id]={}}function nn(e,t){e.references.push(t),!1!==e.last_ref&&(e.last_ref=t)}function rn(e,t){var n,i,r;return"m"!=t.single_use&&((n=e.safe_ids[t.id])?((i=q(e.safe_ids,t.id))||(r=e.safe_ids.seq,n.read?n.read!==r&&(n.read=!0):n.read=r),null==t.fixed?!$t(t)&&!(t.global&&"arguments"==t.name||(e.loop_ids[t.id]=null,t.fixed=Ge(Ve,t.orig[0]),i&&(t.safe_ids=void 0),0)):!n.assign||n.assign===e.safe_ids):t.fixed instanceof le)}function sn(e,t,n){if(!n){if(is_funarg(t)&&t.scope.uses_arguments&&!e.has_directive("use strict"))return;if(!$e(t.orig,function(e){return!(e instanceof O)}))return}if(void 0===t.fixed)return n||$e(t.orig,function(e){return!(e instanceof D)});if(!1!==t.fixed&&0!==t.fixed){n=e.safe_ids[t.id];if(t.safe_ids)return t.safe_ids[t.id]=!1,t.safe_ids=void 0,null===t.fixed||q(e.safe_ids,t.id)&&!n.read;if(!q(e.safe_ids,t.id)){if(!n)return;if(n.read||e.in_loop){var i=e.find_parent(Qe);if(i instanceof et)return;if(t.scope.resolve()!==i.resolve())return}n.assign=!(!n.assign||n.assign===e.safe_ids)||e.safe_ids}if(null!=t.fixed&&n.read){if(n.read!==e.safe_ids.seq)return;if(e.loop_ids[t.id]!==e.in_loop)return}return rn(e,t)&&$e(t.orig,function(e){return!(e instanceof C)})}}function on(e){var t;return!!e&&(e instanceof xe?"="==(t=e.operator)?on(e.right):!Ye[t.slice(0,-1)]:e instanceof Re?on(e.tail_node()):e.is_constant()||me(e)||e instanceof wt)}function an(e,t,n,i,r,s,o){var a,c=e.parent(s);if(!r||!r.is_constant())if(Gt(t,n,i,c))t.escaped.push(c),!(1<o)||r&&r.is_constant_expression(n)||(o=1),(!t.escaped.depth||t.escaped.depth>o)&&(t.escaped.depth=o),t.scope.resolve()!==n.resolve()&&(t.escaped.cross_scope=!0),t.fixed&&(t.fixed.escaped=t.escaped);else{if(u=i,(a=c)instanceof be||(a instanceof we?Ye[a.operator]:a instanceof Ae?a.condition!==u:a instanceof Re?a.tail_node()===u:a instanceof Me))an(e,t,n,c,c,s+1,o);else if(c instanceof bt&&c.value===i){var u=e.parent(s+1);an(e,t,n,u,u,s+2,o)}else if(c instanceof Ie&&c.expression===i&&(an(e,t,n,c,r=Q(r,c),s+1,o+1),r))return;0<s||c instanceof ke&&c.expression===i||c instanceof Re&&c.tail_node()!==i||c instanceof je||c instanceof Dt&&!unary_side_effects[c.operator]||(t.direct_access=!0,t.fixed&&(t.fixed.direct_access=!0))}}function cn(e){var t;e instanceof St&&(t=e.expression)instanceof qe&&$t(t=t.definition())&&((e=(e=e.property).is_constant()?e.value:e)instanceof Oe||fr.test(e))&&(t.reassigned++,(e instanceof Oe?t.scope.argnames:[t.scope.argnames[e]]).forEach(function(e){e instanceof Fe&&(e.definition().fixed=!1)}))}function un(t,n){var i,r;return function(){var e=t();return r=i!==e?n(i=e):r}}function ln(u,t,e,l,f){var p=new Ue(function(i){var n,r,s,o,a,c,e;return i instanceof Te?(pn(i),h(u,!0),i.value.walk(u),en(u),(e=l)&&(n=t,r=i,s=e,l=function(){var e,t;return a===r?r:(e=s(),(t=Di(n,e,!0))instanceof Oe?a=r:o!==e&&(o=e,a=void 0===t?We(r,[e,r.value]):e),a)}),i.name.walk(p),l=e):i instanceof st?(pn(i),e=l,i.elements.forEach(function(t,n){if(t instanceof ce)return pn(t);e&&(l=un(e,function(e){return Ge(St,t,{expression:e,property:Ge(De,t,{value:n})})})),t.walk(p)}),i.rest&&(e&&(l=t.option("rests")&&un(e,function(e){if(!(e instanceof be))return i;for(var t=0,n=i.elements.length;t<n;t++)if(e.elements[t]instanceof Me)return i;return(c=c||Ge(be,i,{})).elements=e.elements.slice(n),c})),i.rest.walk(p)),l=e):i instanceof at?(pn(i),e=l,i.properties.forEach(function(i){pn(i),i.key instanceof Oe&&(h(u),i.key.walk(u),en(u)),e&&(l=un(e,function(e){var t=i.key,n=St;return"string"==typeof t&&($(t)?n=ut:t=Sn(t,i)),Ge(n,i,{expression:e,property:t})})),i.value.walk(p)}),i.rest&&(l=!1,i.rest.walk(p)),l=e):f(i,l,function(){for(var e=u.stack.length,t=0,n=p.stack.length-1;t<n;t++)u.stack.push(p.stack[t]);i.walk(u),u.stack.length=e}),!0});e.walk(p)}function fn(i,e,r){var t,s=this,o=(s.inlined=!1,i.parent()),n=!is_async(s)&&!Ft(s),a=!n,c=!1,u=(s.walk(new Ue(function(e){return a?c=!0:e instanceof Ne?a=!0:e instanceof Le&&e!==s||void 0})),c&&h(i,n),Yt(i,r,s),!s.uses_arguments||i.has_directive("use strict")),l=(s.argnames.forEach(function(t,e){var n=o.args[e];ln(i,r,t,function(){var e=s.argnames.indexOf(t),e=e<0?n:o.args[e];return(e=e instanceof Re&&e.expressions.length<2?e.expressions[0]:e)||Ge(Ve,o)},f)}),s.rest),n=(l&&ln(i,r,l,r.option("rests")&&function(){return s.rest!==l?l:((t=t||Ge(be,s,{})).elements=o.args.slice(s.argnames.length),t)},f),F(s,i),i.safe_ids);return Zt(i,s),c||(i.safe_ids=n),!0;function f(e,t){var n=e.definition();t&&u&&void 0===n.fixed?(tn(i,n),i.loop_ids[n.id]=i.in_loop,n.fixed=t,n.fixed.assigns=[e]):n.fixed=!1}}function pn(e){e._squeezed=!1,e._optimized=!1,e instanceof Qe&&(e._var_names=void 0),e instanceof qe&&(e.fixed=void 0)}function hn(n,i){return this.transform(new jt(function(e,t){return e instanceof Te?((e=e.clone()).name=e.name.transform(this),e):e instanceof Ee?(t(e=e.clone(),this),e):e instanceof ot?((e=e.clone()).value=e.value.transform(this),e):e.convert_symbol(n,i)}))}function dn(e,t){e=Ge(e,this);return t(e,this)||e}function mn(e){var t=e.definition();t.assignments++,t.references.push(e)}function gn(t,n){var i=new Ue(function(e){return e instanceof Te?(e.value.walk(n),e.name.walk(i),!0):e instanceof ot?(e.key instanceof Oe&&e.key.walk(n),e.value.walk(i),!0):t(e)});this.walk(i)}function _n(e){return e(this)}function vn(t,n){var i=!1,r=new Ue(function(e){return!!i||(e instanceof Te?n?(e.name.walk(r),!0):i=!0:e instanceof ot?!n&&e.key instanceof Oe?i=!0:(e.value.walk(r),!0):t(e)?i=!0:void 0)});return this.walk(r),i}function yn(e){return e instanceof AST_AsyncGeneratorDefun||e instanceof AST_AsyncGeneratorFunction}function bn(e){var t=0,n=e.self();do{if(n.variables)return n}while(n=e.parent(t++))}function xn(e,t,n,i,r,s){for(var o;o=e.parent(t++);n=o){if(o===i)return!1;if(s&&o instanceof Pe){if(o.name||is_async(o)||Ft(o))return!0}else if(o instanceof Ot){if(o.bfinally&&o.bfinally!==n)return!0;if(r&&o.bcatch&&o.bcatch!==n)return!0}}return!1}function wn(e,t){if(e instanceof AST_Atom)return!0;if(e instanceof wt)return!0;if(e instanceof Ie){if("__proto__"===e.property)return!0;if((e=e.expression)instanceof qe){if(e.is_immutable())return!1;e=e.fixed_value()}return e?!!e.tail_node().is_constant()||wn(e,t):!0}return e instanceof qe&&(!!e.is_immutable()||(e=e.definition(),t.exposed(e)&&pr[e.name]))}function Ge(e,t,n){return n?(n.start=t.start,n.end=t.end):n=t,new e(n)}function We(e,t){return 1==t.length?t[0]:Ge(Re,e,{expressions:t.reduce(En,[])})}function Sn(e,t){switch(typeof e){case"string":return Ge(H,t,{value:e});case"number":return isNaN(e)?Ge(v,t):isFinite(e)?1/e<0?Ge(Be,t,{operator:"-",expression:Ge(De,t,{value:-e})}):Ge(De,t,{value:e}):e<0?Ge(Be,t,{operator:"-",expression:Ge(_,t)}):Ge(_,t);case"boolean":return Ge(e?I:ae,t);case"undefined":return Ge(Ve,t);default:if(null===e)return Ge(E,t);if(e instanceof RegExp)return Ge(W,t,{value:e});throw new Error(string_template("Can't handle constant of type: {type}",{type:typeof e}))}}function kn(e){return e instanceof Ie||jn(e)&&"eval"==e.name}function An(e,t,n){var i=!1;return"Call"==e.TYPE?i=e.expression===t&&kn(n):e instanceof Ct?i=e.tag===t&&kn(n):e instanceof Be&&(i="delete"==e.operator||"typeof"==e.operator&&jn(n)),i?We(t,[Ge(De,t,{value:0}),n]):n}function Tn(e,t){var i=new qt;return e.walk(new Ue(function(e){var t;e instanceof qe&&(t=e.definition(),(e=e.fixed)&&i.has(t.id)?i.get(t.id)!==e&&i.set(t.id,!1):i.set(t.id,e))})),0<i.size()&&t.walk(new Ue(function(e){var t,n;e instanceof qe&&(t=e.definition(),n=e.fixed)&&i.has(t.id)&&i.get(t.id)!==n&&(e.fixed=!1)})),t}function En(e,t){return t instanceof Re?[].push.apply(e,t.expressions):e.push(t),e}function Cn(e){return e instanceof ie||e instanceof re||e instanceof _t}function Pn(e){var t,n;return e instanceof le?(t=e.name.definition(),n=e.name.scope,t.scope===n||$e(t.references,function(e){var t=e.scope;do{if(t===n)return!0}while(t=t.parent_scope)})):!Cn(e)}function On(e){if(null===e)return[];if(e instanceof Se)return $e(e.body,Pn)?e.body:[e];if(e instanceof Z)return[];if(is_statement(e))return[e];throw new Error("Can't convert thing to statement array")}function Dn(e){return null===e||e instanceof Z||e instanceof Se&&0==e.body.length}function In(e){return $e(e.body,function(e){return Dn(e)||e instanceof rt||e instanceof ee&&Fn(e)})}function Nn(e){return e instanceof mt&&e.body instanceof Se?e.body:e}function Ln(e){if("Call"!=e.TYPE)return!1;for(;(e=e.expression)instanceof Ie;);return e instanceof gt?!Mt(e):Ln(e)}function Rn(e){var t,n=e.expression;return!(n.name||e instanceof p&&(t=!1,n.walk(new Ue(function(e){return!!t||(e instanceof AST_NewTarget?t=!0:e instanceof Le&&e!==n||void 0)})),t))}function jn(e){return e instanceof qe&&e.definition().undeclared}function Mn(e){return e.static&&e.value&&(e instanceof AST_ClassField||e instanceof AST_ClassInit)}function Fn(e){return $e(e.definitions,function(e){return!e.value})}function qn(e,t){return e instanceof re?t&&!e.extends&&$e(e.properties,function(e){return!(e.key instanceof Oe||Mn(e))}):e instanceof it?(t||e instanceof ee)&&Fn(e):e instanceof se||e instanceof oe?qn(e.body,t):e instanceof le}function Bn(e,t){var n=e.lastIndexOf(t);if(n<0)return!1;for(;++n<e.length;)if(!qn(e[n],!0))return!1;return!0}function Vn(e,t){var n;if(e.init instanceof Se&&(n=e.init,e.init=n.body.pop(),n.body.push(e)),e.init instanceof rt?((n=n||Ge(Se,e,{body:[e]})).body.splice(-1,0,e.init),e.init=null):e.init instanceof je?e.init=e.init.body:Dn(e.init)&&(e.init=null),n)return t?List.splice(n.body):n}function zn(e,f){var de,me,ge,_e,ve,ye,D=I(f,function(e){return e instanceof Pe}),t=f.self(),n=0;do{if(!de&&t.variables&&(de=t),t instanceof te)f.parent(n).bfinally&&((ve=ve||{}).bfinally=!0),n++;else if(t instanceof P)n++;else if(t instanceof mt)_e=!0;else{if(t instanceof Le){ye=t;break}t instanceof Ot&&(ve=ve||{},t.bcatch&&(ve.bcatch=!0),t.bfinally)&&(ve.bfinally=!0)}}while(t=f.parent(n++));var i,r,s=10;do{if(r=i,i=0,!(i=!function e(t){var n=!1,i=[];for(var r=0;r<t.length;){var s=t[r];if(s instanceof Se&&$e(s.body,Pn))n=!0,e(s.body),[].splice.apply(t,[r,1].concat(s.body)),r+=s.body.length;else{if(s instanceof w){if(Bt(s.value,i)){n=!0,t.splice(r,1);continue}i.push(s.value)}s instanceof Z?(n=!0,t.splice(r,1)):r++}}return n}(e)?i:1)&&1==r)break;if(f.option("dead_code")&&!(i=!function(t,n){var e,i=n.self();i instanceof te?i=n.parent():i instanceof ue&&(i=i.body);for(var r=0,s=0,o=t.length;r<o;r++){var a,c=t[r];if(!(c instanceof vt)||Nn(a=n.loopcontrol_target(c))!==i||c instanceof N&&a instanceof mt?t[s++]=c:c.label&&B(c.label.thedef.references,c),pi(c)){e=t.slice(r+1);break}}t.length=s,e&&e.forEach(function(e){Un(n,e,t)});return t.length!=o}(e,f)?i:2)&&2==r)break;if(f.option("if_return")&&!(i=!function(o,i){for(var r,a,s,c=!1,u=i.parent(),l=i.self(),e=D&&u&&"Call"==u.TYPE&&u.expression===l,t=D&&i.option("conditionals")&&i.option("sequences"),n=!(ve&&ve.bfinally&&yn(ye)),f=function(e){for(var t=0,n=e.length;0<=--n;){var i=e[n];if(i instanceof Ce&&i.body instanceof Ne&&1<++t)return!0}return!1}(o),p=o.length;0<=--p;){var h=o[p],d=O(p),m=o[d];if(D&&r&&!m&&h instanceof Ne&&n&&!(l instanceof j)){if(!(y=h.value)){c=!0,o.splice(p,1);continue}var g=y.tail_node();if($n(g)){c=!0,y instanceof Be?y=y.expression:g instanceof Be&&((y=y.clone()).expressions[y.expressions.length-1]=g.expression),o[p]=Ge(je,h,{body:y});continue}}if(h instanceof Ce){g=pi(h.body);if(A(g)){g.label&&B(g.label.thedef.references,g),c=!0,(h=h.clone()).body=Ge(Se,h,{body:C(h.body,g)}),h.alternative=Ge(Se,h,{body:On(h.alternative).concat(T(s,a))}),P(g.value,s),o[p]=h,o[p]=h.transform(i);continue}if(g&&!h.alternative&&m instanceof R){var _=h.condition,v=p+1==d&&h.body instanceof Se;if((_=Jn(_,_.negate(i),v))!==h.condition){c=!0,(h=h.clone()).condition=_;var y=h.body;h.body=Ge(Se,m,{body:T(!0,null,d+1)}),o.splice(p,1,h,y),(!D||l instanceof Ke&&l.body===o)&&(o[p]=h.transform(i));continue}}var b,v=pi(h.alternative);if(A(v)){v.label&&B(v.label.thedef.references,v),c=!0,(h=h.clone()).body=Ge(Se,h.body,{body:On(h.body).concat(T(s,a))}),h.alternative=Ge(Se,h.alternative,{body:C(h.alternative,v)}),P(v.value,s),o[p]=h,o[p]=h.transform(i);continue}i.option("typeofs")&&(g&&!v&&(b=Ge(Se,l,{body:o.slice(p+1)}),Oi(h.condition,null,b)),!g)&&v&&(b=Ge(Se,l,{body:o.slice(p+1)}),Oi(h.condition,b))}if(h instanceof Ce&&h.body instanceof Ne){var _=h.body.value,x=h.body.in_bool||m instanceof Ne&&m.in_bool;if(!h.alternative&&m instanceof Ne&&(n||!_==!m.value)){c=!0,(h=h.clone()).alternative=Ge(Se,m,{body:T(!0,null,d+1)}),o[p]=h,o[p]=h.transform(i);continue}if(D&&r&&!m&&!h.alternative&&(x||_&&f||_ instanceof Ae&&($n(_.consequent,i)||$n(_.alternative,i)))){c=!0,(h=h.clone()).alternative=Ge(Ne,h,{value:null}),o[p]=h,o[p]=h.transform(i);continue}if(t&&!h.alternative&&(!(w=o[x=function(e){for(var t=e;0<=--t;){var n=o[t];if(!(n instanceof ee)&&!qn(n))break}return t}(p)])&&e||w instanceof Ce&&w.body instanceof Ne)&&(m?m instanceof je&&O(d)==o.length:!r)){c=!0;var w=[];h=h.clone(),w.push(h.condition),h.condition=We(h,w),h.alternative=Ge(Se,l,{body:T().concat(Ge(Ne,l,{value:null}))}),o[p]=h.transform(i),p=x+1;continue}}h instanceof N||h instanceof ft?a=h:r&&a&&a===m&&function e(t,n,i){if(t instanceof ft){var r=!(n&&t instanceof AST_Throw)&&k(t,!0);if(r)return c=!0,(r=E(t.value,r))?Ge(je,r,{body:r}):i?null:Ge(Z,t)}else{var s;t instanceof Ce?(t.body=e(t.body,n),t.alternative&&(t.alternative=e(t.alternative,n))):t instanceof ue?t.body=e(t.body,n):t instanceof Ot?t.bfinally&&a.value&&!a.value.is_constant()||(t.bcatch&&e(t.bcatch,n),(s=e(t.body.pop(),!0,!0))&&t.body.push(s)):t instanceof Ke&&!(t instanceof Le||t instanceof kt)&&(s=e(t.body.pop(),n,!0))&&t.body.push(s)}return t}(h)}return c;function S(t){return I(i,function(e){return e===t})}function k(e,t){var n;return!!a&&a.TYPE==e.TYPE&&!!(n=e.value)&&(!(e=!(e=a.equals(e))&&n instanceof Re&&(n=n.tail_node(),a.value)&&a.value.equals(n)?2:e)&&!t&&a.value instanceof Re&&a.value.tail_node().equals(n)?3:e)}function A(e){if(s=!1,function(e){if(e instanceof ft){if(!(s=k(e))){if(!D)return;if(!(e instanceof Ne))return;var t=e.value;if(t&&!$n(t.tail_node()))return;if(l instanceof j){if(!a)return;if(a instanceof ft&&a.value)return;s=4}}return 1}if(e instanceof vt){if(l instanceof j)if(a instanceof ft){if(!D)return;if(a.value)return;s=!0}else if(a){if(i.loopcontrol_target(a)!==u)return;s=!0}else if(!1===a)return;t=i.loopcontrol_target(e);return e instanceof L?S(Nn(t)):!(t instanceof mt)&&S(t)}}(e)){for(var t=o.length;--t>p;){var n=o[t];if(n instanceof re){if(n.name.definition().preinit)return}else if((n instanceof ie||n instanceof _t)&&!$e(n.definitions,function(e){return!e.name.match_symbol(function(e){return e instanceof Tt&&e.definition().preinit})}))return}return 1}}function T(e,t,n){var i=[],r=!1,s=p+1,n=(e?t?n=o.lastIndexOf(t):(t=o[n])!==a&&(a=!1):(n=o.length,a=null),o.splice(s,n-s).filter(function(e){return e instanceof le?(i.push(e),!1):(Cn(e)&&(r=!0),!0)}));return 3===e&&(n.push(Ge(je,t.value,{body:We(t.value,t.value.expressions.slice(0,-1))})),t.value=t.value.tail_node()),[].push.apply(r?n:o,i),n}function E(e,t){if(e)switch(t){case 4:return e;case 3:if(!(e instanceof Re))break;case 2:return We(e,e.expressions.slice(0,-1))}}function C(e,t){for(var n,e=On(e),i=e;(n=i[i.length-1])!==t;)i=n.body;i.pop();var r=t.value;return(r=s?E(r,s):r)&&i.push(Ge(je,r,{body:r})),e}function P(e,t){if(t&&e){switch(t){case 4:return;case 3:case 2:e=e.tail_node()}Tn(e,a.value)}}function O(e){r=!0;for(var t=e;++t<o.length;){var n=o[t];if(!qn(n)){if(!(n instanceof ee))break;r=!1}}return t}}(e,f)?i:3)&&3==r)break;if(f.option("awaits")&&f.option("side_effects")&&!(i=!function(e,t){if(!(!D||ve&&ve.bfinally)){for(var n=!1,i=e.length;0<=--i;){var r=e[i];if(!(r instanceof je))break;var s=r.body;if(!(s instanceof Xe))break;s=s.expression;if(!Yi(t,s))break;if(n=!0,s=s.drop_side_effect_free(t,!0)){r.body=s;break}}return e.length=i+1,n}}(e,f)?i:4)&&4==r)break;if(4<=f.option("inline")&&!(i=!function(e,t){var n=!1,i=e.length-1;{var r;D&&0<=i&&(r=ve&&ve.bfinally&&yn(ye),o=e[i].try_inline(t,de,r))&&(e[i--]=o,n=!0)}for(var s=_e&&ve&&ve.bfinally?"try":_e;0<=i;i--){var o;(o=e[i].try_inline(t,de,!0,s))&&(e[i]=o,n=!0)}return n}(e,f)?i:5)&&5==r)break;if(0<f.sequences_limit){if(!(i=!function(t,e){if(!(t.length<2)){for(var n=[],i=0,r=0,s=t.length;r<s;r++){var o=t[r];o instanceof je?(n.length>=e.sequences_limit&&a(),En(n,o.body)):(qn(o)||a(),t[i++]=o)}return a(),(t.length=i)!=s}function a(){var e;n.length&&(e=We(n[0],n),t[i++]=Ge(je,e,{body:e}),n=[])}}(e,f)?i:6)&&6==r)break;if(!(i=!function(e,t){for(var n,i=!1,r=0,s=0;s<e.length;s++){var o,a=e[s];if(n&&(a instanceof ft?!a.value&&yn(ye)||(a.value=p(a.value||Ge(Ve,a)).optimize(t)):a instanceof pt?a.init instanceof it||(o=!1,n.body.walk(new Ue(function(e){return!!(o||e instanceof Le)||(e instanceof we&&"in"==e.operator?o=!0:void 0)})),o)||(a.init?a.init=p(a.init):(a.init=n.body,r--,i=!0)):a instanceof k?Cn(a.init)||(a.object=p(a.object)):a instanceof Ce?a.condition=p(a.condition):(a instanceof kt||a instanceof Lt)&&(a.expression=p(a.expression))),t.option("conditionals")&&a instanceof Ce){var c=[],u=h(a.body,c),l=h(a.alternative,c);if(!1!==u&&!1!==l&&0<c.length){var f=c.length;c.push(Ge(Ce,a,{condition:a.condition,body:u||Ge(Z,a.body),alternative:l})),c.unshift(r,1),[].splice.apply(e,c),s+=f,r+=f+1,i=!(n=null);continue}}e[r++]=a,n=a instanceof je?a:null}return e.length=r,i;function p(e){r--,i=!0;var t=n.body;return We(t,[t,e])}}(e,f)?i:7)&&7==r)break}if(f.option("join_vars")&&!(i=!function(e){for(var r,s=!1,t=0,n=-1;t<e.length;t++){var i,o,a,c=e[t],u=e[n];if(c instanceof it)u&&u.TYPE==c.TYPE?(u.definitions=u.definitions.concat(c.definitions),s=!0):r&&r.TYPE==c.TYPE&&Fn(c)?(r.definitions=r.definitions.concat(c.definitions),s=!0):c instanceof ee?((o=m(u,c))?(o.length&&(u.body=We(u,o),n++),s=!0):n++,e[n]=r=c):e[++n]=c;else{if(c instanceof ft)c.value=l(c.value);else if(c instanceof pt)if(o=d(u,c.init))s=!0,c.init=o.length?We(c.init,o):null;else{if(u instanceof ee&&(!c.init||c.init.TYPE==u.TYPE)){c.init&&(u.definitions=u.definitions.concat(c.init.definitions)),c=c.clone(),r=c.init=u,e[n]=f(c),s=!0;continue}if(r&&c.init&&r.TYPE==c.init.TYPE&&Fn(c.init))r.definitions=r.definitions.concat(c.init.definitions),c.init=null,s=!0;else if(c.init instanceof ee&&(r=c.init,o=m(u,c.init))){if(s=!0,0==o.length){e[n]=f(c);continue}u.body=We(u,o)}}else if(c instanceof ht)r&&r.TYPE==c.init.TYPE&&(i=r.definitions.slice(),c.init=c.init.definitions[0].name.convert_symbol(qe,function(e,t){i.push(Ge(ze,t,{name:t,value:null})),t.definition().references.push(e)}),r.definitions=i,s=!0),c.object=l(c.object);else if(c instanceof Ce)c.condition=l(c.condition);else if(c instanceof je){if(o=d(u,c.body)){if(s=!0,!o.length)continue;c.body=We(c.body,o)}else if(u instanceof it&&(a=e[t+1])&&u.TYPE==a.TYPE&&(a=a.definitions[0]).value){s=!0,a.value=We(c,[c.body,a.value]);continue}}else(c instanceof kt||c instanceof Lt)&&(c.expression=l(c.expression));e[++n]=r?f(c):c}}return e.length=n+1,s;function l(e){var t=d(u,e,1);if(!t)return e;s=!0;var n=e.tail_node();return t[t.length-1]!==n&&t.push(n.left),We(e,t)}function f(e){return e.transform(new jt(function(e,t,n){var i;return e instanceof it?r!==e&&r.TYPE==e.TYPE&&!((i=this.parent())instanceof ht&&i.init===e)&&Fn(e)?(r.definitions=r.definitions.concat(e.definitions),s=!0,i instanceof pt&&i.init===e?null:n?List.skip:Ge(Z,e)):e:!(e instanceof se)&&!(e instanceof Le)&&is_statement(e)?void 0:e}))}}(e)?i:8)&&8==r)break;!f.option("collapse_vars")||!function(i,p){if(!ye.pinned()){for(var h,M,F=new qt,d=[],q=!1,m=new qt,r=i.length,l=new jt(function(e,t){if(E)return e;if(!T){if(e===g[_]){if(++_<g.length)return I(e,l);T=!0,(f=(v?R:te)(e,0))===e&&(E=!0)}return e}var n,i,r,s=l.parent();if(!y&&Z(e,s)&&(y=s),z&&V&&P&&!y&&e instanceof xe&&"="!=e.operator&&e.left.equals(b))return C++,q=!0,Oe.info("Cascading {this} [{start}]",e),P=!1,S=le(b),e.right.transform(l),ce(a),i=E?a:(E=!0,Ge(we,a,{operator:z,left:b.fixed&&b.definition().fixed?b.fixed.to_binary(a):b,right:A})),Ge(xe,e,{operator:"=",left:e.left,right:Ge(we,e,{operator:e.operator.slice(0,-1),left:i,right:e.right})});if(function(e,t){if(e===A)return 1;if(t instanceof pt&&e!==t.init)return 1;if(e instanceof xe)return"="!=e.operator&&b.equals(e.left);if(e instanceof ke)return b instanceof Ie&&b.equals(e.expression)&&(!(A instanceof gt)||A.contains_this());return e instanceof et?!p.has_directive("use strict"):e instanceof tt||(e instanceof rt?U&&b.name===e.name.name:e instanceof ot?e.key instanceof Oe:e instanceof lt||e instanceof vt||e instanceof Ot||e instanceof Lt)}(e,s))return E=!0,e;if(e.single_use)return e;if(e instanceof Tt||!(V&&b.equals(e)||w&&(n=w(e,this))))return function(e,t){if(e instanceof qe){if(e.is_declared(p)){if(e.fixed_value())return;if(Ht(e))return!(t instanceof Ie&&t.expression===e)&&$t(e.definition())}else if(Q(e,t))return;if(!K)return 1;w=!1}return}(e,s)?(E=!0,e):((ee(e,s)||$(e))&&(f=e)instanceof Le&&(E=!0),e instanceof Je||e instanceof Ee?(r=P,P=!1,t(e,l),P=r,D(e)):e instanceof Te?(e.name=e.name.transform(l),r=P,P=!1,e.value=e.value.transform(l),P=r,D(e)):!(e instanceof Qe)||e instanceof Le||e.variables&&e.variables.all(function(e){return!W.has(e.name)&&!S.has(e.name)})?I(e,l)?D(e):void 0:(r=P,P=!1,I(e,l)||t(e,l),P=r,D(e)));if(!P||y&&(n||!J||!K))return n||v||(E=!0),e;if(Vt(e,s))return v&&!n&&(u=!0),e;if(!n&&B&&e.fixed!==b.fixed)return E=!0,e;if(v)return y&&0==c&&(c=o-C),n||C++,e;if(C++,q=E=!0,Oe.info("Collapsing {this} [{start}]",e),"Binary"==a.TYPE)return ue(a,e),Ge(xe,a,{operator:"=",left:a.right.left,right:"&&"==a.operator?Ge(Ae,a,{condition:a.left,consequent:a.right.right,alternative:e}):Ge(Ae,a,{condition:a.left,consequent:e,alternative:a.right.right})});if(a instanceof It)return Ge(Be,a,{operator:a.operator,expression:b.fixed&&b.definition().fixed?b.fixed.to_prefix(a):b});if(a instanceof Be)return ce(a),a;if(ue(A,e),a instanceof ze)return(i=a.name.definition()).references.length-i.replaced!=1||p.exposed(i)?Ge(xe,a,{operator:"=",left:e,right:A}):(i.replaced++,An(s,e,A));ce(A);t=a.clone();return t.right=A,t},D),s=new jt(function(e){if(E)return e;if(!T){if(e!==g[_])return e;switch(_++,g.length-_){case 0:if(T=!0,u)return e;if(e!==a)return e;if(e instanceof ze)return e;O.replaced++;var t=s.parent();return t instanceof Re&&t.tail_node()!==e?(v.replaced++,A===k?List.skip:We(k,k.expressions.slice(0,-1))):A;case 1:if(!u&&e.body===a)return T=!0,O.replaced++,v.replaced++,null;default:return I(e,s)}}if(e instanceof qe&&e.definition()===O){if(Vt(e,s.parent()))return e;--C||(E=!0),Oe.info("Replacing {this} [{start}]",e);var n=A.clone();return(n.scope=e.scope,n.reference(),C==c)?(E=!0,Ge(xe,a,{operator:"=",left:e,right:n})):(O.replaced++,n)}return e instanceof nt||e instanceof Le?e:void 0},function(e){return fe(e,s)});0<=--r;){0==r&&p.option("unused")&&!function(){if(!1!==ge){var e=p.parent(),i=p.self();if(void 0===ge){if(!(i instanceof gt)||Ft(i)||i.uses_arguments||i.pinned()||!(e instanceof ke)||e.expression!==i||!$e(e.args,function(e){return!(e instanceof Me)}))return ge=!1;if(!Rn(e))return;ge=!0}for(var r,s=i.in_strict_mode(p)&&!i.parent_scope.resolve(!0).in_strict_mode(p),o=(is_async(i)?(r=function(e){return e instanceof At&&"await"==e.name},me=!0):(r=function(e){return e instanceof Xe&&!t.find_parent(Le)},void 0===me&&(me=xn(p,1,e,null,!0,!0))),null),t=new Ue(function(e,t){var n;return!l||(r(e)||e instanceof Rt?!(l=null):e instanceof wt?(!s&&o||(l=null),!0):e instanceof qe?((e.in_arg&&!Li(e.definition())||(n=i.variables.get(e.name))&&n!==e.definition())&&(l=null),!0):e instanceof Le&&!Mt(e)?(n=o,o=e,t(),o=n,!0):void 0)}),n=(h=e.args.slice()).length,a=new qt,c=i.argnames.length;0<=--c;){var u=i.argnames[c],l=h[c],f=null;if(u instanceof Te&&(f=u.value,u=u.name,h[n+c]=f),u instanceof Ee){if(me&&N(function(e){return e.has_side_effects(p)},u,l)){d.length=0;break}h[n+c]=i.argnames[c]}else a.has(u.name)||(a.set(u.name,!0),(l=f?$n(l)?f:null:l)||f?l instanceof Pe&&l.pinned()?l=null:l&&l.walk(t):l=Ge(Ve,u).transform(p),l&&((u=Ge(ze,u,{name:u,value:l})).name_index=c,u.arg_index=f?n+c:c,d.unshift([u])))}i.rest&&h.push(i.rest)}}();var g=[];for(L(i[r]);0<d.length;){g=d.pop();var o,_=0,a=g[g.length-1],c=-1,u=!1,B=!1,v=null,f=null,y=null,b=function(t){if(t instanceof xe)return(n=t.left)instanceof qe&&(i=n.definition(),ye.uses_arguments&&is_funarg(i)||p.exposed(i)||(o=se(i),i.fixed&&n.fixed&&(e=i.references.filter(function(e){return e.fixed===n.fixed}).length-1)<o&&(o=e,B=!(c=0)),"="==t.operator&&re(t.right))),n;if(t instanceof we)return t.right.left;if(t instanceof Dt)return t.expression;if(t instanceof ze){var n,e,i=(n=t.name).definition();if(!i.const_redefs)if(Bt(n,i.orig))if(!ye.uses_arguments||!is_funarg(i))return e=i.orig.length-i.eliminated-(m.get(i.name)||0),o=se(i),i.fixed&&(o=Math.min(o,i.references.filter(function(e){return!e.fixed||!e.fixed.assigns||(e=e.fixed.assigns[0])===n||oe(e)===t.value}).length)),1<e&&!(n instanceof Fe)?(re(t.value),Ge(qe,n)):re(t.value)||1==o&&!p.exposed(i)?Ge(qe,n):void 0}}(a),x=b&&b.has_side_effects(p),V=b&&(!x||b instanceof qe)&&!wn(b,p),w=function(t){if(!(t instanceof xe&&t.right.single_use)){for(var n,i=Object.create(null),e=new Ue(function(e){e instanceof qe&&(i[e.definition().id]=!0)});t instanceof xe&&"="==t.operator;)t.left.walk(e),t=t.right;if(t instanceof wt)return s;if(t instanceof qe)return(r=t.evaluate(p))===t?s:ae(r,s);if(t.is_truthy())return ae(!0,He);if(t.is_constant()){var r=t.evaluate(p);if(!(r instanceof Oe))return ae(r,s)}return b instanceof qe?!!function e(t){if(t instanceof be)return!1;if(t instanceof we&&Ye[t.operator])return e(t.left)&&e(t.right);if(t instanceof ke)return!1;if(t instanceof Ae)return e(t.consequent)&&e(t.alternative);if(t instanceof yt)return!1;return!t.has_side_effects(p)}(t)&&(t.walk(new Ue(function(e){if(n)return!0;e instanceof qe&&i[e.definition().id]&&(n=!0)})),!n)&&s:!1}function s(e){return t.equals(e)}}(a);if(V||w){var z=a instanceof xe&&a.operator.slice(0,-1),U=a.name instanceof Fe,$=He;if(a.may_throw(p)){if(U&&is_async(ye))continue;$=ve?function(e){return e.has_side_effects(p)}:n}var H=!1,G=!1,W=new qt,Y=!0,S=le(a),J=function(e){var t=root_expr(e);return t instanceof qe&&t.definition().scope.resolve()===ye&&(!_e||!z&&!(a instanceof Dt||(t=S.get(t.name))&&t[0]!==e))}(b),k=oe(a),A=k,X=(x||(!z&&A instanceof Re&&(A=A.tail_node()),x=!(a instanceof Dt)&&A.has_side_effects(p)),ve||!J?function(e){return e instanceof Ee}:He),K=function(e){if(e instanceof Dt)return!1;if(x)return!1;if(!v){if(!(b instanceof qe))return!1;var t;if(e instanceof ze)t=1;else{if("="!=e.operator)return!1;t=2}e=b.definition();if(e.references.length-e.replaced!=t){if(!e.fixed)return!1;if(!b.fixed)return!1;var n=b.fixed.assigns,i=0;if(!$e(e.references,function(e,t){e=e.fixed;return!!e&&!e.to_binary&&!e.to_prefix&&(e===b.fixed?(i++,!0):n&&e.assigns&&n[0]!==e.assigns[0])}))return!1;if(i!=t)return!1;B=!0}}return!0}(a),T=U,E=!1,C=0,P=!h||!T;if(!P){for(var t=a.arg_index+1;!E&&t<h.length;t++)h[t]&&h[t].transform(l);P=!0}for(var e=r;!E&&e<i.length;e++)i[e].transform(l);if(v){if(!C||C+u<o){d.push(g),M=!0;continue}C==c&&(u=!0);var O=b.definition();E=!1,_=0,T=U;for(e=r;!E&&e<i.length;e++)i[e].transform(s)||i.splice(e--,1);C=a instanceof ze&&a===g[g.length-1]&&O.references.length==O.replaced&&!p.exposed(O),v.last_ref=!1,v.single_use=!1,q=!0}C&&!function(e){var t,n,c,u,l,f=A===k?null:We(k,k.expressions.slice(0,-1)),e=e.name_index;0<=e?(n=ye.argnames[e])instanceof Te?(ye.argnames[e]=n=n.clone(),n.value=f||Ge(De,n,{value:0})):(t=p.parent().args)[e]&&(ye.argnames[e]=n.clone(),t[e]=f||Ge(De,t[e],{value:0})):(c=g.length-1,u=g[c],(u instanceof ze||g[c-1].body===u)&&c--,l=new jt(function(e,t,n){var i,r,s,o,a;return T||e!==g[_]?e:++_<=c?I(e,l):(T=!0,e instanceof it?(m.set(u.name.name,(m.get(u.name.name)||0)+1),v&&v.replaced++,r=(i=e.definitions).indexOf(u),(s=u.clone()).value=null,f?(o=[Ge(je,f,{body:f})],0<r&&((a=e.clone()).definitions=i.slice(0,r),o.unshift(a),(e=e.clone()).definitions=i.slice(r)),o.push(e),e.definitions[0]=s,n?List.splice(o):Ge(Se,e,{body:o})):(e.definitions[r]=s,e)):f?is_statement(e)?Ge(je,f,{body:f}):f:n?List.skip:null)},function(e,t){return e instanceof pt?Vn(e,t):fe(e,l)}),T=E=!1,_=0,(i[r]=i[r].transform(l))||i.splice(r,1))}(a)}}}return q}function D(e){return E||(f===e&&(E=!0),y===e&&(y=null)),e}function I(e,t){if(e instanceof Qe){if(e instanceof Le)return e;if(e instanceof et){e.name&&(e.name=e.name.transform(t)),!E&&e.extends&&(e.extends=e.extends.transform(t));for(var n=[],i=[],r=0;!E&&r<e.properties.length;r++)(s=e.properties[r]).key instanceof Oe&&(s.key=s.key.transform(t)),s.static&&(s instanceof AST_ClassField?s.value&&n.push(s):s instanceof AST_ClassInit&&[].push.apply(i,s.value.body));for(r=0;!E&&r<i.length;r++)i[r].transform(t);for(var s,r=0;!E&&r<n.length;r++)(s=n[r]).value=s.value.transform(t);return e}if(e instanceof ht)return e.object=e.object.transform(t),E=!0,e;if(e instanceof kt){e.expression=e.expression.transform(t);for(r=0;!E&&r<e.body.length;r++){var o=e.body[r];if(o instanceof Ze){if(!T){if(o!==g[_])continue;_++}if(o.expression=o.expression.transform(t),!K)break;w=!1}}return E=!0,e}}}function Q(e,t){return t instanceof xe?"="==t.operator&&t.left===e:t instanceof Te?t.name===e:t instanceof st||t instanceof ot&&t.value===e}function Z(e,t){return t instanceof xe?t.left!==e&&Ye[t.operator.slice(0,-1)]:t instanceof we?t.left!==e&&Ye[t.operator]:t instanceof ke?t.optional&&t.expression!==e:t instanceof Ze?t.expression!==e:t instanceof Ae||t instanceof Ce?t.condition!==e:t instanceof St&&t.optional&&t.expression!==e}function ee(e,t){if(e instanceof Xe)return 1;if("Binary"==e.TYPE)return!Wi(e.operator,e.right,p);if(e instanceof ke){var n=e.expression;if(n instanceof qe&&(c=n.definition(),n=n.fixed_value()),!(n instanceof Pe))return!e.is_expr_pure(p);if(!c||!Qi(p,c,n)){if(n.collapse_scanning)return;n.collapse_scanning=!0;for(var i=P,r=(P=!1,f),s=y,o=0;!E&&o<n.argnames.length;o++)N(u,n.argnames[o],e.args[o])&&(E=!0);if(!E)if(n.rest&&N(u,n.rest,Ge(be,e,{elements:e.args.slice(o)})))E=!0;else if(Mt(n)&&n.value)n.value.transform(l);else for(o=0;!E&&o<n.body.length;o++){var a=n.body[o];if(a instanceof Ne){a.value&&a.value.transform(l);break}a.transform(l)}if(y=s,f=r,P=i,n.collapse_scanning=!1,!E)return;E=!1}return 1}var c;if(e instanceof et)return ve&&(s=e.extends)&&!Ut(s=s instanceof qe?s.fixed_value():s);if(e instanceof ft){if(ve){if(ve.bfinally)return 1;if(ve.bcatch&&e instanceof AST_Throw)return 1}return x||b instanceof Ie||he(b)}if(e instanceof dt)return p.option("ie")&&e.name&&S.has(e.name.name);if(e instanceof wt)return pe(e);if(e instanceof Ie){if(x)return 1;r=e.expression;if(r instanceof qe&&$t(r.definition()))return 1;if(p.option("unsafe")){if(jn(r)&&br[r.name])return;if(ni(r))return}return Y?!v&&(ve||!J)&&!e.optional&&r.may_throw_on_access(p):1}return e instanceof Me||(e instanceof qe?pe(e)?!Q(e,t):x&&he(e)||(c=e.definition(),(ve||c.scope.resolve()!==ye)&&!Ht(e)):e instanceof Ct?!e.is_expr_pure(p):e instanceof ze?X(e.name)||(e.value||t instanceof _t)&&e.name.match_symbol(function(e){return e instanceof Tt&&(S.has(e.name)||x&&he(e))},!0):e instanceof Rt||(i=Vt(e.left,e))&&(i instanceof Ie||X(i)||i.match_symbol(function(e){return e instanceof qe&&(S.has(e.name)||H&&p.exposed(e.definition()))},!0)));function u(e){return e.transform(l),E}}function N(n,e,i){return e instanceof Te?n(e.value)||N(n,e.name,e.value)||!$n(i)&&N(n,e.name,i):i?e instanceof Ee?!(!e.rest||!N(n,e.rest))||(e instanceof st?i instanceof be?!$e(e.elements,function(e,t){return!N(n,e,i[t])}):!i.is_string(p)||!$e(e.elements,function(e){return!N(n,e)}):e instanceof at?!!i.may_throw_on_access(p)||!$e(e.properties,function(e){return!(e.key instanceof Oe&&n(e.key)||N(n,e.value))}):void 0):void 0:!(e instanceof At)}function L(e,t){var n,i;g.push(e),e instanceof be?e.elements.forEach(function(e){L(e,t)}):e instanceof xe?((i=e.left)instanceof Ee||d.push(g.slice()),L(i),L(e.right),i instanceof qe&&"="==e.operator&&F.set(i.name,(F.get(i.name)||0)+1)):e instanceof Xe?L(e.expression,t):e instanceof we?(i=Ye[e.operator],t&&i&&"??"!=e.operator&&e.right instanceof xe&&"="==e.right.operator&&!(e.right.left instanceof Ee)&&d.push(g.slice()),L(e.left,!i&&t),L(e.right,t)):e instanceof ke?(L(e.expression),e.args.forEach(L)):e instanceof Ze?L(e.expression):e instanceof Ae?(L(e.condition),L(e.consequent,t),L(e.alternative,t)):e instanceof it?e.definitions.forEach(L):e instanceof ut?L(e.expression):e instanceof lt?(L(e.condition),e.body instanceof Ke||L(e.body)):e instanceof ft?e.value&&L(e.value):e instanceof pt?(e.init&&L(e.init,!0),e.condition&&L(e.condition),e.step&&L(e.step,!0),e.body instanceof Ke||L(e.body)):e instanceof ht?(L(e.object),e.body instanceof Ke||L(e.body)):e instanceof Ce?(L(e.condition),e.body instanceof Ke||L(e.body),!e.alternative||e.alternative instanceof Ke||L(e.alternative)):e instanceof yt?e.properties.forEach(function(e){g.push(e),e.key instanceof Oe&&L(e.key),e instanceof bt&&L(e.value,t),g.pop()}):e instanceof Re?(n=e.expressions.length-(t?0:1),e.expressions.forEach(function(e,t){L(e,t<n)})):e instanceof je?L(e.body,!0):e instanceof Me?L(e.expression):e instanceof St?(L(e.expression),L(e.property)):e instanceof kt?(L(e.expression),e.body.forEach(L)):e instanceof Dt?UNARY_POSTFIX[e.operator]?d.push(g.slice()):L(e.expression):e instanceof ze?(e.name instanceof AST_SymbolVar&&(e.value?(i=e.name.definition()).references.length>i.replaced&&d.push(g.slice()):m.set(e.name.name,(m.get(e.name.name)||0)+1)),e.value&&L(e.value)):e instanceof Rt&&e.expression&&L(e.expression),g.pop()}function te(e,t){var n=l.parent(t);return n instanceof be||n instanceof xe||n instanceof Xe||n instanceof we||n instanceof ke||n instanceof Ze||n instanceof Ae?e:n instanceof it?j(n,t+1):n instanceof ft||n instanceof Ce||n instanceof mt||n instanceof xt||n instanceof Ie?e:n instanceof Re?(n.tail_node()===e?te:j)(n,t+1):n instanceof je?j(n,t+1):n instanceof Me||n instanceof kt||n instanceof Dt||n instanceof ze||n instanceof Rt?e:null}function ne(e,t,n){for(var i;i=e,(e=l.parent(++n))instanceof xe&&e.operator.slice(0,-1)==t||e instanceof we&&e.operator==t;);return i}function ie(e,t,n,i,r){var s=P,o=(P=!1,f),a=y,c=l.stack;return l.stack=[i],e.transform(l),l.stack=c,y=a,f=o,P=s,E?(E=!1,n):t(i,r+1)}function R(e,t){var n,i=l.parent(t);return i instanceof be?R(i,t+1):i instanceof xe?$(i)||i.left.match_symbol(function(e){return e instanceof qe&&(b.name==e.name||v.name==e.name)})?e:i.left!==e&&Ye[n=i.operator.slice(0,-1)]?ne(i,n,t):R(i,t+1):i instanceof Xe?R(i,t+1):i instanceof we?i.left!==e&&Ye[n=i.operator]?ne(i,n,t):R(i,t+1):i instanceof ke?i:i instanceof Ze?i.expression!==e?e:R(i,t+1):i instanceof Ae?i.condition!==e?e:R(i,t+1):i instanceof it?j(i,t+1):i instanceof ct?e:i instanceof ft?j(i,t+1):i instanceof pt?i.init!==e&&i.condition!==e?e:R(i,t+1):i instanceof ht?i.init!==e?e:R(i,t+1):i instanceof Ce?i.condition!==e?e:R(i,t+1):i instanceof xt?(n=l.parent(t+1),$e(n.properties,function(e){return e instanceof bt})?R(n,t+2):n):i instanceof Ie?i.expression===e?R(i,t+1):e:i instanceof Re?(i.tail_node()===e?R:j)(i,t+1):i instanceof je?j(i,t+1):i instanceof Me?R(i,t+1):i instanceof kt?i.expression!==e?e:R(i,t+1):i instanceof Dt?"delete"==i.operator?e:R(i,t+1):i instanceof ze?i.name.match_symbol(function(e){return e instanceof Tt&&(b.name==e.name||v.name==e.name)})?e:R(i,t+1):i instanceof Nt?i.condition!==e?e:R(i,t+1):i instanceof Rt?R(i,t+1):null}function j(t,n){var e,i=l.parent(n);return ee(t,i)||Z(t,i)?t:i instanceof be?j(i,n+1):i instanceof xe?r(i.left):i instanceof Xe?t:i instanceof we||i instanceof ke||i instanceof Ze||i instanceof Ae||i instanceof it||i instanceof ft||i instanceof Ce?j(i,n+1):i instanceof mt?t:i instanceof xt?(e=l.parent(n+1),$e(e.properties,function(e){return e instanceof bt})?j(e,n+2):e):i instanceof Ie?(e=i.expression)===t?j(i,n+1):ie(e,j,t,i,n):i instanceof Re||i instanceof je?j(i,n+1):i instanceof Me?t:i instanceof kt||i instanceof Dt?j(i,n+1):i instanceof ze?r(i.name):i instanceof Rt?t:null;function r(e){return $(i)?t:e!==t&&e instanceof Ee?ie(e,j,t,i,n):j(i,n+1)}}function re(e){if(M)M=!1;else if(!(o<1)){var t=(e=e.tail_node())instanceof xe&&"="==e.operator?e.left:e;if(t instanceof qe){var n=t.definition();if(!n.undeclared&&!$t(n)){if(t!==e){if(wn(t,p))return;if(n.references.length-n.replaced<2)return;e=a.clone();e[e instanceof xe?"right":"value"]=t,0<=a.name_index&&(e.name_index=a.name_index,e.arg_index=a.arg_index),a=e}return v=n}}}}function se(e){return e.references.length-e.replaced-(F.get(e.name)||0)}function oe(e){var t;return e instanceof xe?e.right:e instanceof we?((t=e.clone()).right=e.right.right,t):e instanceof ze?e.value:void 0}function ae(n,i){return function(e,t){if(t.in_boolean_context()){if(n&&e.is_truthy()&&!e.has_side_effects(p))return!0;if(e.is_constant()){t=e.evaluate(p);if(!(t instanceof Oe))return!t==!n}}return i(e)}}function ce(e){for(;e.write_only&&(e.write_only=!1,e instanceof xe);)e=e.right}function ue(e,t){var n=t.scope||bn(l)||de;e.walk(new Ue(function(e){if(e instanceof Qe)return!0;e instanceof At&&(e.scope=n)}))}function le(a){var c=new qt,u=(a instanceof ze&&(a.name.definition().fixed||(Y=!1),c.add(a.name.name,b)),ye.uses_arguments&&!p.has_directive("use strict")),l=ye instanceof Pt,f=new Ue(function(t){var e,n,i;if(t instanceof qe?(e=t.fixed_value())||(n=(e=t).definition(),i=t.fixed&&t.fixed.escaped||n.escaped,n.undeclared)||!n.assignments&&i&&!i.cross_scope||!Gt(n,t.scope,t,f.parent())&&Zi(n)||(Y=!1):t instanceof wt&&(e=t),e)c.add(t.name,zt(p,f,t,e,0));else{if(t instanceof Pe){for(var r,s=0,o=t;r=f.parent(s++);o=r){if(r instanceof xe){if(r.left===o)break;if("="==r.operator)continue;if(Ye[r.operator.slice(0,-1)])continue;break}if(r instanceof we){if(Ye[r.operator])continue;break}if(r instanceof ke)return;if(r instanceof Le)return;if(r instanceof Re){if(r.tail_node()===o)continue;break}if(r instanceof Ct){if(r.tag)return;break}}return t.enclosed.forEach(function(e){e.scope!==t&&W.set(e.name,!0)}),!0}u&&t instanceof St&&(ye.each_argname(function(e){p.option("reduce_vars")&&!e.definition().assignments||(e.definition().fixed||(Y=!1),c.add(e.name,!0))}),u=!1)}l&&("Call"==t.TYPE?G||(i=t.expression)instanceof Ie||i instanceof gt&&!i.contains_this()||(G=!0):t instanceof Ie&&function e(t){return t instanceof qe&&!(t=t.fixed_value())||(t instanceof xe?"="==t.operator&&e(t.right):t instanceof Ie||t instanceof wt)}(t.expression)&&(t!==b||a instanceof Dt?H=!0:G=!0))});return a.walk(f),c}function fe(e,t){if(e instanceof Re)switch(e.expressions.length){case 0:return null;case 1:return An(t.parent(),e,e.expressions[0])}}function pe(e){e=S.get(e.name);if(e&&!$e(e,function(e){return!e}))return e[0]!==b||void(w=!1)}function he(e){e=e.definition();return!(1==e.orig.length&&e.orig[0]instanceof Et||e.scope.resolve()===ye&&(!G||!p.exposed(e))&&$e(e.references,function(e){return e.scope.resolve(!0)===ye}))}function n(e,t){if(e instanceof xe)return n(e.left,!0);if(e instanceof Dt)return n(e.expression,!0);if(e instanceof ze)return e.value&&n(e.value);if(t){if(e instanceof ut)return n(e.expression,!0);if(e instanceof St)return n(e.expression,!0);if(e instanceof qe)return e.definition().scope.resolve()!==ye}return!1}}(e,f)||(i=9)}while(i&&0<s--);return e;function I(e,t){var n,i,r=e.self(),s=0;do{r instanceof te?r=e.parent(s++):r instanceof ue?r=r.body:r instanceof j&&((i=e.parent(s)).body[i.body.length-1]!==r&&!function(e){for(var t=e.length;0<=--t;)if(e[t]instanceof N)return 1;return}(r.body)||(s++,r=i));do{if(t(n=r))return n}while((r=e.parent(s++))instanceof Ce)}while(n&&(r instanceof Se||r instanceof te||r instanceof Le||r instanceof j||r instanceof Ot)&&Bn(r.body,n))}function h(e,t){if(!(e instanceof Se))return e;for(var n=null,i=0;i<e.body.length;i++){var r=e.body[i];if(r instanceof ee&&Fn(r))t.push(r);else{if(n||Cn(r))return!1;n=r}}return n}function p(e){return e instanceof xe?[e]:e instanceof Re?e.expressions.slice():void 0}function d(e,t,n){var i=p(t);if(i){for(var r=!1,s=i.length-(n=n||0);0<=--s;)if(l(c=i[s])){if(c.left instanceof qe)o=i.slice(s+1);else{if(!(c.left instanceof Ie&&l(c.left.expression)))continue;var o=i.slice(s+1),a=c.clone(),c=c.left.expression;a.left=a.left.clone(),a.left.expression=c.left.clone(),o.unshift(a)}0!=o.length&&_(c.left,c.right,o)&&(r=!0,i=i.slice(0,s).concat(c,o))}if(e instanceof it){for(s=e.definitions.length;0<=--s;){var u=e.definitions[s];if(u.value){_(u.name,u.value,i)&&(r=!0),!function(e,t,n){if(f.option("conditionals")&&!(e.name instanceof Ee)){for(var i=!1,r=e.name.definition();t.length>n;){var s=Hi(f,r,e.value,t[0]);if(!s)break;e.value=s,t.shift(),i=!0}return i}}(u,i,n)||(r=!0);break}}e instanceof ee&&g(e.definitions,i,n)&&(r=!0)}return r&&i}function l(e){return e instanceof xe&&"="==e.operator}}function m(e,t){if(e instanceof je&&!Fn(t)){e=p(e.body);if(e){var n=[];if(g(n,e.reverse(),0))return t.definitions=n.reverse().concat(t.definitions),e.reverse()}}}function g(e,t,n){for(var i=!1;t.length>n;){var r=t[0];if(!(r instanceof xe))break;if("="!=r.operator)break;var s=r.left;if(!(s instanceof qe))break;if(jn(s))break;if(s.scope.resolve()!==ye)break;var o=s.definition();if(o.scope!==ye)break;if(o.orig.length>o.eliminated+1)break;if("SymbolVar"!=o.orig[0].TYPE)break;s=Ge(AST_SymbolVar,s);e.push(Ge(ze,r,{name:s,value:r.right})),o.orig.push(s),o.replaced++,t.shift(),i=!0}return i}function _(e,r,t){var s=new qt;for(s.set(e.name,!0);r instanceof xe&&"="==r.operator;)r.left instanceof qe&&s.set(r.left.name,!0),r=r.right;if(r instanceof yt){var n=!1;do{if(!function e(t){if(!(t instanceof xe))return;if("="!=t.operator)return;if(!(t.left instanceof Ie))return;var n=t.left.expression;if(!(n instanceof qe))return;if(!s.has(n.name))return;if(!t.right.is_constant_expression(ye))return;var i=t.left.property;i instanceof Oe&&(i=(i=e(i)?t.left.property=i.right.clone():i).evaluate(f));if(i instanceof Oe)return;i=""+i;n="__proto__"==i||f.has_directive("use strict")?function(e){e=e.key;return"string"==typeof e&&e!=i&&"__proto__"!=e}:function(e){var t=e.key;return e instanceof AST_ObjectGetter||e instanceof AST_ObjectSetter?"string"==typeof t&&t!=i:"__proto__"!==t};if(!$e(r.properties,n))return;r.properties.push(Ge(bt,t,{key:i,value:t.right}));return!0}(t[0]))break}while(t.shift(),n=!0,t.length);return n}}}function Un(i,r,s){var o,a=!1;function c(e){o?(o.push(e),Pn(e)||(o.required=!0)):s.push(e)}r.walk(new Ue(function(e,t){var n;return e instanceof re?(e.extends=null,e.properties=[],c(e),!0):e instanceof it?(e.remove_initializers(i,n=[])&&Oe.warn("Dropping initialization in unreachable code [{start}]",e),0<n.length&&(e.definitions=n,c(e)),!0):e instanceof le?(c(e),!0):e instanceof Le||(e instanceof Qe?(n=o,o=[],t(),o.required?s.push(Ge(Se,r,{body:o})):o.length&&[].push.apply(s,o),o=n,!0):void(e instanceof vt||(a=!0)))})),a&&Oe.warn("Dropping unreachable code [{start}]",r)}function $n(e,t){return null==e||e.is_undefined||e instanceof Ve||e instanceof Be&&"void"==e.operator&&(!t||!e.expression.has_side_effects(t))}function Hn(e,t,n){switch(e){case"-":return t.is_negative_zero()&&(!(n instanceof A)||0==n.value);case"&&":case"||":return t.is_negative_zero()||n.is_negative_zero();case"*":case"/":case"%":case"**":return!0;default:return!1}}function Gn(e,t){return t||/strict/.test(e.option("pure_getters"))}function Wn(e,t,n){switch(t){case"&&":return n.left.is_defined(e)&&n.right.is_defined(e);case"||":return n.left.is_truthy()||n.right.is_defined(e);case"??":return n.left.is_defined(e)||n.right.is_defined(e);default:return!0}}function Yn(e){Oe.warn("global_defs {this} redefined [{start}]",e)}function Jn(e,t,n){return t.print_to_string().length-e.print_to_string().length<(n||0)?t:e}function Xn(e,t,n){return Jn(Ge(je,e,{body:e}),Ge(je,t,{body:t}),n).body}function Kn(e,t,n,i){return(x(e)?Xn:Jn)(t,n,i)}function Qn(t){var n=Object.create(null);return Object.keys(t).forEach(function(e){n[e]=S(t[e])}),n}function Zn(e){for(var t=0;t<e.length;t++){var n=e[t];if(!(n instanceof w))return n}}function ei(){return this.value?Ge(Ne,this.value,{value:this.value}):Zn(this.body)}function ti(e,t){var n=t.evaluate(e);return n===t?t:Kn(e,t,Sn(n,t).optimize(e),e.eval_threshold)}function ni(e){if(e instanceof ut){var t,n=e.expression;if(jn(n))return(t=Pr[n.name])&&(t[e.property]||"Math"==n.name&&"random"==e.property)}}function ii(e){e instanceof st?e.elements.forEach(ii):e instanceof at?e.properties.forEach(function(e){ii(e.value)}):e instanceof Ie?ii(e.expression):e instanceof qe&&e.definition().references.forEach(function(e){delete e._eval})}function ri(e,t,n,i,r){for(var s=[],o=0;o<e.length;o++){var a=e[o],c=a._eval(t,n,i,r);if(a===c)return;s.push(c)}return s}function si(e){return Ge(Be,e,{operator:"!",expression:e})}function oi(e,t,n){e=si(e);return n?Jn(e,Ge(je,t,{body:t}))===e?e:t:Jn(e,t)}function ai(e,t,n){return!$e(e,n?function(e){return e instanceof Me?!n(e,t):!e.has_side_effects(t)}:function(e){return!e.has_side_effects(t)})}function ci(e,t){e=e.expression;return!e.is_string(t)||e.has_side_effects(t)}function ui(e,t){for(var n=e.length;0<=--n;)if(e[n].may_throw(t))return!0;return!1}function li(e,t){return!!e.may_throw(t)||!((e=e instanceof qe?e.fixed_value():e)instanceof Pe&&!ui(e.argnames,t)&&!ui(e.body,t))||Mt(e)&&e.value&&e.value.may_throw(t)}function fi(e,t){for(var n=e.length;0<=--n;)if(!e[n].is_constant_expression(t))return!1;return!0}function pi(e){return e&&e.aborts()}function hi(){var e=this.body.length;return 0<e&&pi(this.body[e-1])}function di(e,t,n){switch(e.body.length){case 0:return n?List.skip:Ge(Z,e);case 1:var i=e.body[0];return Pn(i)?t instanceof mt&&i instanceof le?e:i:e}return e}function mi(e,t){!t.option("rests")||e.uses_arguments||e.rest instanceof st&&t.drop_fargs(e,t.parent())&&(e.argnames=e.argnames.concat(e.rest.elements),e.rest=e.rest.rest)}function gi(e,t){if(t.option("arrows")){mi(e,t),e.value&&(e.body=[e.first_statement()]);var n=zn(e.body,t);switch(n.length){case 1:var i=n[0];if(i instanceof Ne){e.body.length=0,e.value=i.value;break}default:e.body=n,e.value=null}}return e}function _i(e,t){for(var n=t.length;0<=--n;)t[n]||(t[n]=Ge(ce,e))}function vi(e,t){e=Ge(ne,e);return e.name&&(e.name=t?null:Ge(AST_SymbolClass,e.name)),e}function yi(e,t){var n;switch(e.CTOR){case AST_AsyncDefun:n=AST_AsyncFunction;break;case AST_AsyncGeneratorDefun:n=AST_AsyncGeneratorFunction;break;case rt:n=dt;break;case AST_GeneratorDefun:n=AST_GeneratorFunction}var i=Ge(n,e);return i.name=t?null:Ge(C,e.name),i}function bi(t,n){t.walk(new Ue(function(e){return e instanceof Ne?(n(e),!0):e instanceof Le&&e!==t||void 0}))}function xi(e){var t=Object.create(null);return bi(e,function(e){var e=e.value;(e=e&&e.tail_node())instanceof qe&&(e=e.definition().id,t[e]=(t[e]||0)+1)}),t}function wi(e,t,n){if(n.exposed(e))return!1;switch(e.references.length-e.replaced-(t[e.id]||0)){case e.drop_return:return"d";case e.bool_return:return!0}}function Si(e,i){bi(e,function(e){e.in_bool=!0;var t,n=e.value;n&&((t=Di(i,n))?t instanceof Oe||(n=n.drop_side_effect_free(i),e.value=n?We(e.value,[n,Ge(De,e.value,{value:1})]):Ge(De,e.value,{value:1})):(n=n.drop_side_effect_free(i),e.value=n?We(e.value,[n,Ge(De,e.value,{value:0})]):null))})}function ki(e,t){return!e.name||!t.option("ie")||(e=e.name.definition(),!t.exposed(e)&&$e(e.references,function(e){return!(e instanceof qe)}))}function Ai(s,t,e){if(t instanceof Pe){var n,i=Mt(t),r=is_async(t),o=!1,a=!1;if(i&&s.option("arrows")?t.value?r&&!Yi(s,t.value)||(n=t.value.drop_side_effect_free(s))!==t.value&&(o=!0,t.value=n):a=!0:Ft(t)||(a=!(!e&&t.name)||(n=t.name.definition()).references.length==n.replaced),a&&(t.process_expression(!1,function(e){var t=e.value;if(t){if(r&&!Yi(s,t))return e;t=t.drop_side_effect_free(s,!0)}return o=!0,t?Ge(je,e,{body:t}):Ge(Z,e)}),bi(t,function(e){var t,n=e.value;!n||r&&!Yi(s,n)||(t=n.drop_side_effect_free(s))!==n&&(o=!0,t&&r&&!Yi(s,t)&&(t=t.negate(s)),e.value=t)})),r&&s.option("awaits")){a&&t.process_expression("awaits",function(e){var t=e.body;if(t instanceof Xe){if(Yi(s,t.expression)){if(o=!0,!(t=t.expression.drop_side_effect_free(s,!0)))return Ge(Z,e);e.body=t}}else if(t instanceof Re){for(var n=t.expressions,i=n.length;0<=--i;){var r=n[i];if(!(r instanceof Xe))break;r=r.expression;if(!Yi(s,r))break;if(o=!0,n[i]=r.drop_side_effect_free(s))break}switch(i){case-1:return Ge(Z,e);case 0:e.body=n[0];break;default:n.length=i+1}}return e});var c,u=!a&&t.name||i&&t.value&&!Yi(s,t.value),l=new Ue(function(e){return!!u||(l.parent()===t&&e.may_throw(s)||e instanceof Xe||e instanceof AST_ForAwaitOf?u=!0:e instanceof Ne?e.value&&!Yi(s,e.value)?u=!0:void 0:e instanceof Le&&e!==t||void 0)});if(t.walk(l),!u){switch(t.CTOR){case m:c=d;break;case AST_AsyncFunction:c=dt;break;case AST_AsyncGeneratorFunction:c=AST_GeneratorFunction}return Ge(c,t)}}return o&&t.clone()}}function Ti(e,t,n,i){for(var r=e.length,s=[],o=!1,a=0;a<r;a++){var c=e[a],u=i&&c instanceof Me?i(c,t,n):c.drop_side_effect_free(t,n);u!==c&&(o=!0),u&&(s.push(u),n=!1)}return s.length?o?s:e:null}function Ei(e,t,n){var i=e.expression;return i.is_string(t)?i.drop_side_effect_free(t,n):e}function Ci(e){return e instanceof Me?Ge(be,e,{elements:[e]}):e}function Pi(t,e,n){n=n||vt;var i=!1,r=new Ue(function(e){return!!(i||e instanceof Le)||(e instanceof n&&r.loopcontrol_target(e)===t?i=!0:void 0)});return e instanceof ue&&r.push(e),r.push(t),t.body.walk(r),i}function Oi(e,t,n){if((e=e instanceof Re?e.tail_node():e)instanceof we)if(e.left instanceof H){if(e.right instanceof Be&&"typeof"==e.right.operator){var i=e.right.expression;if(jn(i)){var r,s,o,a,c,u,l,f="undefined"==e.left.value;switch(e.operator){case"==":r=f?n:t;break;case"!=":r=f?t:n;break;default:return}r&&(s=!1,o=i.definition(),c=[],u=[],l=new Ue(function(e,t){if(s)return!0;if(e instanceof xe){var n=e.left;if(!(n instanceof qe&&n.definition()===o))return;switch(e.right.walk(l),e.operator){case"=":case"&&=":s=!0}return!0}var i;return e instanceof ke?(t(),(a=e.expression.tail_node())instanceof qe&&(a=a.fixed_value(),i=c.length),a instanceof Pe?de(u,a)&&a.walk(l):s=!0,0<=i&&(c.length=i),!0):e instanceof lt?(i=c.length,t(),s&&(c.length=i),!0):e instanceof pt?(e.init&&e.init.walk(l),i=c.length,e.condition&&e.condition.walk(l),e.body.walk(l),e.step&&e.step.walk(l),s&&(c.length=i),!0):e instanceof ht?(e.object.walk(l),i=c.length,e.init.walk(l),e.body.walk(l),s&&(c.length=i),!0):e instanceof Le?e!==a||void 0:e instanceof qe?(e.definition()===o&&c.push(e),!0):void 0}),r.walk(l),c.forEach(function(e){e.defined=!0}))}}}else switch(e.operator){case"&&":Oi(e.left,t),Oi(e.right,t);break;case"||":Oi(p(e.left),n),Oi(p(e.right),n)}function p(e){if(e instanceof we)switch(e.operator){case"==":return(e=e.clone()).operator="!=",e;case"!=":return(e=e.clone()).operator="==",e}}}function Di(e,t,n){return!!t.truthy||($n(t)?void 0:!(t.falsy&&!n)&&(!!t.is_truthy()||t.evaluate(e,!0)))}function Ii(e,t){var n,i=0,r=!1,s=e.self();if(!is_statement(s))for(;;){if(n=s,(s=e.parent(i++))instanceof we)switch(n){case s.left:if(Ye[s.operator])continue;break;case s.right:if(a(s.left))switch(s.operator){case"&&":t[r?"falsy":"truthy"]=!0;break;case"||":case"??":t[r?"truthy":"falsy"]=!0}}else if(s instanceof Ae){var o=s.condition;if(o===n)continue;if(a(o))switch(n){case s.consequent:t[r?"falsy":"truthy"]=!0;break;case s.alternative:t[r?"truthy":"falsy"]=!0}}else{if(s instanceof ft)break;if(s instanceof Ce)break;if(s instanceof Re){if(s.expressions[0]===n)continue}else if(s instanceof je)break}return}for(;;){if(n=s,(s=e.parent(i++))instanceof Se){if(s.body[0]===n)continue}else if(s instanceof Ce&&a(s.condition))switch(n){case s.body:t[r?"falsy":"truthy"]=!0;break;case s.alternative:t[r?"truthy":"falsy"]=!0}return}function a(e){return t.equals(e)||e instanceof Be&&"!"==e.operator&&t.equals(e.expression)&&(r=!0)}}function Ni(r){return function(t,n){var i=!1;return this.definitions.forEach(function(e){e.value&&(i=!0),e.name.match_symbol(function(e){e instanceof Tt&&n.push(Ge(ze,e,{name:e,value:r(t,e)}))},!0)}),i}}function Li(e){return"arguments"!=e.name&&e.orig.length<(e.orig[0]instanceof C?3:2)}function Ri(e,t){if(e.exposed(t))return!0;for(var n=t.scope.resolve(),i=t.scope;i!==n;)if((i=i.parent_scope).var_names().has(t.name))return!0}function ji(e,i){return Ge(ee,e,{definitions:e.definitions.map(function(e){return Ge(ze,e,{name:e.name.convert_symbol(AST_SymbolVar,function(e,t){var n=e.definition();n.orig[n.orig.indexOf(t)]=e,n.scope!==i&&((n.scope=i).variables.set(n.name,n),i.enclosed.push(n),i.var_names().set(n.name,!0))}),value:e.value})})})}function Mi(e,t){t=t.definition();return(t.fixed||0===t.fixed)&&Li(t)&&Zi(t)&&!Ri(e,t)}function Fi(e,t){return t.option("varify")&&$e(e.definitions,function(e){return!e.name.match_symbol(function(e){if(e instanceof Tt)return!Mi(t,e)},!0)})?ji(e,t.find_parent(Le)):e}function qi(e,t){if(t.option("optional_chains")&&e.terminal)do{var n=e.expression;if(e.optional){var i=Di(t,n,!0);if(null==i)return Ge(Be,e,{operator:"void",expression:n}).optimize(t);i instanceof Oe||(e.optional=!1)}}while(("Call"==(e=n).TYPE||e instanceof Ie)&&!e.terminal)}function Bi(e){var t,n=e.expression;return n instanceof Re?(n=n.expressions.slice(),(t=e.clone()).expression=n.pop(),n.push(t),We(e,n)):e}function Vi(e,n,t){var i=e.expression,r=i instanceof qe?i.fixed_value():i;if(r instanceof Pe&&!r.uses_arguments&&!(r.pinned()||t&&t.indexOf(r)<0)){var s=e.args;if($e(s,function(e){return!(e instanceof Me)})){var o=r.argnames,t=r===i&&!r.name;if(r.rest){if(!t||!n.option("rests"))return;for(var a=o.length,s=s.slice(0,a);s.length<a;)s.push(Ge(Ve,e).optimize(n));s.push(Ge(be,e,{elements:e.args.slice(a)})),o=o.concat(r.rest),r.rest=null}else s=s.slice(),o=o.slice();for(var c=0,u=0,l=t&&n.option("default_values"),f=t&&n.drop_fargs(r,e)?function(e,t){return!e||(e instanceof st?0==e.elements.length&&!e.rest&&t instanceof be:e instanceof at?0==e.properties.length&&!e.rest&&t&&!t.may_throw_on_access(n):e.unused)}:He,p=[],h=0;h<s.length;h++){var d=o[h];if(l&&d instanceof Te&&s[h].is_defined(n)&&(o[h]=d=d.name),d&&void 0===d.unused){if(f(d,s[h])){m=s[h].drop_side_effect_free(n);o.splice(h,1),s.splice(h,1),m&&p.push(m),h--;continue}p.push(s[h]),s[c++]=We(e,p),p=[]}else{var m=s[h].drop_side_effect_free(n);if(f(d)){d&&o.splice(h,1),s.splice(h,1),m&&p.push(m),h--;continue}if(m)p.push(m),s[c++]=We(e,p),p=[];else if(d){if(!p.length){s[c++]=Ge(De,s[h],{value:0});continue}s[c++]=We(e,p),p=[]}}u=c}for(;h<o.length;h++)f(o[h])&&o.splice(h--,1);r.argnames=o,s.length=u,e.args=s,p.length&&(i=We(e,p),s.push(s.length<o.length?Ge(Be,e,{operator:"void",expression:i}):i))}}}function zi(e,t){t=t||e.find_parent(Le);var n=[];return(is_async(t)||t instanceof Pt&&e.option("module"))&&n.push("await"),Ft(t)&&n.push("yield"),n.length&&S(n)}function Ui(n,i){var r,s;return!i||(r=!0,s=new Ue(function(e){if(!r)return!0;if(e instanceof Le){if(e===n)return;if(Mt(e))for(var t=0;r&&t<e.argnames.length;t++)e.argnames[t].walk(s);else e instanceof le&&i[e.name.name]&&(r=!1);return!0}e instanceof At&&i[e.name]&&e!==n.name&&(r=!1)}),n.walk(s),r)}function $i(e,t){return e.in_strict_mode(t)||!t.has_directive("use strict")}function Hi(n,i,e,t){if(t instanceof we&&("&&"==t.operator||"||"==t.operator)&&t.right instanceof xe&&"="==t.right.operator&&t.right.left instanceof qe&&t.right.left.definition()===i&&!e.has_side_effects(n)&&r(t.left)&&r(t.right.right))return i.replaced++,"&&"==t.operator?Ge(Ae,t,{condition:t.left,consequent:t.right.right,alternative:e}):Ge(Ae,t,{condition:t.left,consequent:e,alternative:t.right.right});function r(e){var t;if(!e.has_side_effects(n))return t=!1,e.walk(new Ue(function(e){return!!t||(e instanceof qe&&e.definition()===i?t=!0:void 0)})),!t}}function Gi(e,t){return e instanceof xe?!t&&"="==e.operator&&Gi(e.right):e instanceof p?!t:e instanceof Re?Gi(e.tail_node(),t):e instanceof qe?!t&&Gi(e.fixed_value()):e instanceof be||e instanceof et||e instanceof Pe||e instanceof yt}function Wi(e,t,n){switch(e){case"in":return Gi(t)||n&&n.option("unsafe_comps");case"instanceof":return me(t=t instanceof qe?t.fixed_value():t)||n&&n.option("unsafe_comps");default:return!0}}function Yi(e,t){var n;return!!t.is_constant()||(t instanceof xe?"="!=t.operator||Yi(e,t.right):t instanceof we?!Ye[t.operator]||Yi(e,t.left)&&Yi(e,t.right):t instanceof ke?is_async(t.expression):t instanceof Ae?Yi(e,t.consequent)&&Yi(e,t.alternative):t instanceof Re?Yi(e,t.tail_node()):t instanceof qe?(n=t.fixed_value())&&Yi(e,n):t instanceof Ct?!t.tag||er(e,t.tag):t instanceof Dt||void 0)}function Ji(e,t){return e instanceof xe?wn(e.left,t)?e:e.left:e instanceof Re?Ji(e.tail_node(),t):!(e instanceof Be&&UNARY_POSTFIX[e.operator])||wn(e.expression,t)?e:e.expression}function Xi(e,t){return t instanceof ut?Xi(e,t.expression):t instanceof St?Xi(e,t.expression)&&Xi(e,t.property):t instanceof At||!t.has_side_effects(e)}function Ki(e,t){var n,i=e.right.tail_node();i!==e.right&&((n=e.right.expressions.slice(0,-1)).push(i.left),(i=i.clone()).left=We(e.right,n),e.right=i),e.left=Ge(we,e,{operator:e.operator,left:e.left,right:i.left,start:e.left.start,end:i.left.end}),e.right=i.right,t?e.left=e.left.transform(t):e.operator==i.left.operator&&Ki(e.left)}function Qi(e,t,n){var i=0,r=e.self();do{if(r===n)return r;if(me(r)&&r.name&&r.name.definition()===t)return r}while(r=e.parent(i++))}function Zi(e){var t=e.scope.resolve();return $e(e.references,function(e){return t===e.scope.resolve()})}function er(e,t){return e.option("unsafe")&&t instanceof ut&&"raw"==t.property&&jn(t.expression)&&"String"==t.expression.name}function tr(e){var n=!1;if(e=e.replace(/\\(u\{[^{}]*\}?|u[\s\S]{0,4}|x[\s\S]{0,2}|[0-9]+|[\s\S])/g,function(e,t){t=decode_escape_sequence(t);if("string"==typeof t)return t;n=!0}),!n)return e}function nr(e,t){return e instanceof qe||e.TYPE===t.TYPE}function ir(n,t){var i=!1,r=new Ue(function(e){return!!i||(e instanceof qe&&Bt(e.definition(),t)?i=!0:void 0)}),s=new Ue(function(e){if(i)return!0;if(e instanceof Pe&&e!==n){if(!(e.name||is_async(e)||Ft(e))){var t=s.parent();if(t instanceof ke&&t.expression===e)return}return e.walk(r),!0}});return n.walk(s),i}function rr(e,t){var n;if(e)return"Call"!=(n=t.parent()).TYPE?1:n.expression!==t.self()||(!(e instanceof qe)||(e=e.fixed_value()))&&e instanceof Pe&&!e.contains_this()}function sr(e){return e instanceof bt&&"string"==typeof e.key&&!(e instanceof g&&e.value.contains_super())}function or(e){var t=e.definition().redefined();return t&&((e=e.clone()).thedef=t),e}function ar(t,e){var n=!1;return e.walk(new Ue(function(e){return!!n||(e instanceof qe&&t.variables.get(e.name)===e.definition()?n=!0:void 0)})),n}function cr(e,t){var n=[];e.references.forEach(function(e){e=e.fixed;e&&de(n,e)&&(e.assigns?e.assigns.unshift(t):e.assigns=[t])})}function ur(e,t){var n=Ge(qe,t),i=Ge(xe,t,{operator:"=",left:n,right:Ge(Ve,t).transform(e)}),e=t.definition();return e.fixed&&(n.fixed=function(){return i.right},n.fixed.assigns=[i],cr(e,i)),e.assignments++,e.references.push(n),i}function lr(e,t,n,i,r,s,o){for(var a=[],c=s.expressions,u=n,l=c.length-(o||0),f=l;0<=--l;r=!(u=!0)){var p=c[l].try_inline(e,t,u,i,r);p&&(h(),a.push(p))}if(0!=a.length)return h(),!n&&a[0]instanceof je&&(a[0]=Ge(Ne,s,{value:a[0].body})),Ge(Se,s,{body:a.reverse()});function h(){l+1<f&&a.push(Ge(je,s,{body:We(s,c.slice(l+1,f))})),f=l}}var fr,pr,hr,dr,mr,gr,_r,vr,yr,br,Ye,xr,wr,Sr,kr,Ar,Tr,Er,Cr,Pr,Or,Dr,Ir,Nr,Lr,Rr,jr,Mr,Fr,qr;return(K.prototype=new jt(function(e,t,n){var i,r;return e._squeezed?e:((i=e instanceof Le)&&(this.option("arrows")&&Mt(e)&&e.value&&(e.body=[e.first_statement()],e.value=null),e.hoist_properties(this),e.hoist_declarations(this),e.process_returns(this)),t(e,this),t(e,this),r=e.optimize(this),!i||r!==e||this.has_directive("use asm")||r.pinned()||(r.drop_unused(this),r.merge_variables(this)&&r.drop_unused(this),t(r,this)),r===e&&(r._squeezed=!0),r)})).option=function(e){return this.options[e]},K.prototype.exposed=function(e){var t;return!!e.exported||!!e.undeclared||!!(e.global||e.scope.resolve()instanceof Pt)&&(t=this.toplevel,!$e(e.orig,function(e){return t[e instanceof Et?"funcs":"vars"]}))},K.prototype.compress=function(e){(e=e.resolve_defines(this)).hoist_exports(this),this.option("expression")&&e.process_expression(!0);for(var t=this.options.merge_vars,n=+this.options.passes||1,i=1/0,r=!1,s={ie:this.option("ie")},o=0;o<n;o++)if(e.figure_out_scope(s),(0<o||this.option("reduce_vars"))&&e.reset_opt_flags(this),this.options.merge_vars=t&&(r||o==n-1),e=e.transform(this),1<n){var a=0;if(e.walk(new Ue(function(){a++})),Oe.info("pass {pass}: last_count: {min_count}, count: {count}",{pass:o,min_count:i,count:a}),a<i)i=a,r=!1;else{if(r)break;r=!0}}return this.option("expression")&&e.process_expression(!1),e},(t=function(e,t){e.DEFMETHOD("optimize",function(e){return this._optimized||e.has_directive("use asm")?this:((e=t(this,e))._optimized=!0,e)})})(Oe,function(e,t){return e}),Pt.DEFMETHOD("hoist_exports",function(e){if(e.option("hoist_exports")){for(var t=this.body,n=[],i=0;i<t.length;i++){var r=t[i];r instanceof se?(t[i]=r=r.body,r instanceof it?r.definitions.forEach(function(e){e.name.match_symbol(s,!0)}):s(r.name)):r instanceof c&&(t.splice(i--,1),[].push.apply(n,r.properties))}n.length&&t.push(Ge(c,this,{properties:n}))}function s(e){e instanceof Tt&&((e=Ge(l,e)).alias=Ge(H,e,{value:e.name}),n.push(e))}}),Le.DEFMETHOD("process_expression",function(r,s){var o=this,a=new jt(function(e){var t;if(r){if((e=e instanceof w?Ge(je,e,{body:Ge(H,e)}):e)instanceof je)return s?s(e):Ge(Ne,e,{value:e.body})}else if(e instanceof Ne)return s?s(e):(t=e.value)instanceof H?Ge(w,t):Ge(je,e,{body:t||Ge(Be,e,{operator:"void",expression:Ge(De,e,{value:0})})});if(e instanceof Ke){if(e instanceof Pe){if(e!==o)return e}else if("awaits"===r&&e instanceof Ot&&e.bfinally)return e;for(var n=e.body.length;0<=--n;){var i=e.body[n];if(!qn(i,!0)){e.body[n]=i.transform(a);break}}}else e instanceof Ce?(e.body=e.body.transform(a),e.alternative&&(e.alternative=e.alternative.transform(a))):e instanceof Lt&&(e.body=e.body.transform(a));return e});o.transform(a)}),Pt.DEFMETHOD("unwrap_expression",function(){switch(this.body.length){case 0:return Ge(Be,this,{operator:"void",expression:Ge(De,this,{value:0})});case 1:var e=this.body[0];if(e instanceof w)return Ge(H,e);if(e instanceof je)return e.body;default:return Ge(ke,this,{expression:Ge(dt,this,{argnames:[],body:this.body}).init_vars(this),args:[]})}}),Oe.DEFMETHOD("wrap_expression",function(){var e=this;return e=(e=is_statement(e)?e:Ge(je,e,{body:e}))instanceof Pt?e:Ge(Pt,e,{body:[e]})}),fr=/^(0|[1-9][0-9]*)$/,(e=function(e,t){e.DEFMETHOD("reduce_vars",t)})(Oe,he),e(xe,function(s,e,t){var o=this,a=o.left,c=o.right,n=a instanceof qe&&a.definition(),i=n||a instanceof Ee;switch(o.operator){case"=":return a.equals(c)&&!a.has_side_effects(t)?(c.walk(s),function e(t){pn(t);{var n;t instanceof ut?e(t.expression):t instanceof St?(e(t.expression),t.property.walk(s)):t instanceof qe?(nn(n=t.definition(),t),n.fixed&&(t.fixed=n.fixed,t.fixed.assigns?t.fixed.assigns.push(o):t.fixed.assigns=[o])):t.walk(s)}}(a),o.redundant=!0):n&&c instanceof gt?(f(),c.parent_scope.resolve().fn_defs.push(c),c.safe_ids=null,n.fixed&&o.write_only||Qt(s,n,c),!0):i?(c.walk(s),f(),!0):void cn(a);case"&&=":case"||=":case"??=":var r=!0;default:if(!i)return cn(a),p();n.assignments++;var u,l=n.fixed;return zt(t,s,o,o,0)?(n.fixed=!1,p()):(u=rn(s,n),r&&h(s,!0),c.walk(s),r&&en(s),u&&!a.in_arg&&sn(s,n)?(nn(n,a),tn(s,n),n.single_use&&(n.single_use=!1),a.fixed=n.fixed=function(){return Ge(we,o,{operator:o.operator.slice(0,-1),left:_e(a,l),right:o.right})},a.fixed.assigns=l&&l.assigns?l.assigns.slice():[n.orig[0]],a.fixed.assigns.push(o),a.fixed.to_binary=ve(function(e){return e.left},l)):(a.walk(s),n.fixed=!1),!0)}function f(){var e=n&&Qi(s,n),r=zt(t,s,o,c,0,on(c),e);ln(s,t,a,function(){return o.right},function(e,t,n){var i;e instanceof qe?((i=e.definition()).assignments++,t&&!e.in_arg&&sn(s,i)?(nn(i,e),tn(s,i),(a instanceof Ee||1==i.orig.length&&i.orig[0]instanceof Et)&&(i.single_use=!1),s.loop_ids[i.id]=s.in_loop,i.fixed=r?0:t,e.fixed=t,e.fixed.assigns=[o],an(s,i,e.scope,o,c,0,1)):(n(),i.fixed=!1)):(cn(e),n())})}function p(){if(r)return a.walk(s),h(s,!0),c.walk(s),en(s),!0}}),e(we,function(e){if(Ye[this.operator])return this.left.walk(e),h(e,!0),this.right.walk(e),en(e),!0}),e(Qe,function(e,t,n){Wt(0,n,this)}),e(ke,function(t,e){var n,i=this.expression;if(i instanceof gt)n=Rn(this),this.args.forEach(function(e){e.walk(t),e instanceof Me&&(n=!1)}),n&&(i.reduce_vars=fn),i.walk(t),n&&delete i.reduce_vars;else{if("Call"==this.TYPE)switch(t.in_boolean_context()){case"d":var r=!0;case!0:!function e(t,n){t instanceof xe?"="==t.operator&&(e(t.left,n),e(t.right,n)):t instanceof we?Ye[t.operator]&&(e(t.left,n),e(t.right,n)):t instanceof Ae?(e(t.consequent,n),e(t.alternative,n)):t instanceof qe&&((t=t.definition()).bool_return++,n)&&t.drop_return++}(i,r)}i.walk(t);var s=this.optional,s=(s&&h(t,!0),this.args.forEach(function(e){e.walk(t)}),s&&en(t),i instanceof qe&&i.fixed_value());s instanceof Pe?Qt(t,i.definition(),s):t.find_parent(Le).may_call_this()}return!0}),e(et,function(t,e,n){var i,r,s=this,n=(Wt(0,n,s),s.extends&&s.extends.walk(t),s.properties.filter(function(e){return pn(e),e.key instanceof Oe&&(t.push(e),e.key.walk(t),t.pop()),e.value}));return s.name&&(i=s.name.definition(),((r=t.parent())instanceof se||r instanceof oe)&&(i.single_use=!1),sn(t,i,!0)?(tn(t,i),t.loop_ids[i.id]=t.in_loop,i.fixed=function(){return s},i.fixed.assigns=[s],Li(i)||(i.single_use=!1)):i.fixed=!1),n.forEach(function(e){t.push(e),!e.static||Mn(e)&&e.value.contains_this()?(h(t),e.value.walk(t),en(t)):e.value.walk(t),t.pop()}),!0}),e(o,function(e,t,n){return h(e,!0),Yt(e,n,this),t(),Zt(e,this),!0}),e(Ae,function(e){return this.condition.walk(e),h(e,!0),this.consequent.walk(e),en(e),h(e,!0),this.alternative.walk(e),en(e),!0}),e(Te,function(e){return h(e,!0),this.value.walk(e),en(e),this.name.walk(e),!0}),e(ct,function(e){var t=e.in_loop;return e.in_loop=this,h(e),this.body.walk(e),Pi(this,e.parent())&&(en(e),h(e)),this.condition.walk(e),en(e),e.in_loop=t,!0}),e(pt,function(e,t,n){var i=this,n=(Wt(0,n,i),i.init&&i.init.walk(e),e.in_loop);return e.in_loop=i,h(e),i.condition&&i.condition.walk(e),i.body.walk(e),i.step&&(Pi(i,e.parent())&&(en(e),h(e)),i.step.walk(e)),en(e),e.in_loop=n,!0}),e(ht,function(e,t,n){Wt(0,n,this),this.object.walk(e);var n=e.in_loop,i=(e.in_loop=this,h(e),this.init);return i instanceof it?i.definitions[0].name.mark_symbol(function(e){e instanceof Tt&&((e=e.definition()).assignments++,e.fixed=!1)},e):i instanceof Ee||i instanceof qe?i.mark_symbol(function(e){var t;e instanceof qe&&(nn(t=e.definition(),e),t.assignments++,e.is_immutable()||(t.fixed=!1))},e):i.walk(e),this.body.walk(e),en(e),e.in_loop=n,!0}),e(Ce,function(e){return this.condition.walk(e),h(e,!0),this.body.walk(e),en(e),this.alternative&&(h(e,!0),this.alternative.walk(e),en(e)),!0}),e(ue,function(e){return h(e,!0),this.body.walk(e),en(e),!0}),e(Pe,function(e,t,n){var i=this;return Jt(e,i)&&de(e.fn_visited,i)&&(i.inlined=!1,h(e),Yt(e,n,i),t(),Zt(e,i),i.name)&&an(e,i.name.definition(),i,i.name,i,0,1),!0}),e(le,function(e,t,n){var i=this.name.definition(),r=e.parent();return(r instanceof se||r instanceof oe)&&(i.single_use=!1),Jt(e,this)&&de(e.fn_visited,this)&&(this.inlined=!1,h(e),Yt(e,n,this),t(),Zt(e,this)),!0}),e(St,function(e){if(this.optional)return this.expression.walk(e),h(e,!0),this.property.walk(e),en(e),!0}),e(kt,function(t,e,n){Wt(0,n,this),this.expression.walk(t);var i=!0;return this.body.forEach(function(e){e instanceof nt||(e.expression.walk(t),i&&h(t,!(i=!1)))}),i||en(t),M(this,t),!0}),e(j,function(e){return h(e,!0),M(this,e),en(e),!0}),e(fe,function(){this.definition().fixed=!1}),e(pe,function(){this.definition().fixed=!1}),e(qe,function(n,e,t){var i,r=this,s=r.definition(),o=s.fixed||s.last_ref&&s.last_ref.fixed,a=(nn(s,r),1==s.references.length&&!s.fixed&&s.orig[0]instanceof Et&&(n.loop_ids[s.id]=n.in_loop),Qi(n,s));switch(a&&a.enclosed.forEach(function(e){var t;s===e||e.scope.resolve()===a||!(t=e.fixed&&e.fixed.assigns)||t[t.length-1]instanceof ze||(t=n.safe_ids[e.id])&&(t.assign=!0)}),"m"==s.single_use&&s.fixed&&(s.fixed=0,s.single_use=!1),s.fixed){case 0:rn(n,s)||(s.fixed=!1);case!1:var c=s.redefined();c&&ge(s.scope,r.scope)&&(c.single_use=!1);break;case void 0:s.fixed=!1;break;default:rn(n,s)?(r.in_arg&&s.orig[0]instanceof C&&(r.fixed=s.scope),i=r.fixed_value(),a?s.recursive_refs++:!i||(c=s,!t.option("unused"))||c.scope.pinned()||!1===c.single_use||c.references.length-c.recursive_refs!=1||is_funarg(c)&&c.scope.uses_arguments?s.single_use=!1:(s.in_loop=n.loop_ids[s.id]!==n.in_loop,s.single_use=me(i)&&!i.pinned()&&(!s.in_loop||n.parent()instanceof ke)||!s.in_loop&&s.scope===r.scope.resolve()&&i.is_constant_expression()),zt(t,n,r,i,0,on(i),a)&&(s.single_use?s.single_use="m":s.fixed=0),s.fixed&&n.loop_ids[s.id]!==n.in_loop&&(s.cross_loop=!0),an(n,s,r.scope,r,i,0,1)):s.fixed=!1}r.fixed||(r.fixed=0===s.fixed?o:s.fixed),i instanceof Pe&&!((o=n.parent())instanceof ke&&o.expression===r)&&Qt(n,s,i)}),e(Ct,function(t,e){var n,i=this.tag;if(i)return i instanceof gt?(this.expressions.forEach(function(e){e.walk(t)}),i.walk(t)):(i.walk(t),this.expressions.forEach(function(e){e.walk(t)}),(n=i instanceof qe&&i.fixed_value())instanceof Pe?Qt(t,i.definition(),n):t.find_parent(Le).may_call_this()),!0}),e(Pt,function(e,t,n){return this.globals.each(function(e){ye(0,n,e)}),h(e,!0),Yt(e,n,this),t(),Zt(e,this),!0}),e(Ot,function(e,t,n){return Wt(0,n,this),h(e,!0),M(this,e),en(e),this.bcatch&&(h(e,!0),this.bcatch.walk(e),en(e)),this.bfinally&&this.bfinally.walk(e),!0}),e(Dt,function(e,t){var n=this;if(UNARY_POSTFIX[n.operator]){var i,r,s=n.expression;if(s instanceof qe)return(i=s.definition()).assignments++,r=i.fixed,rn(e,i)&&!s.in_arg&&sn(e,i)?(nn(i,s),tn(e,i),i.single_use&&(i.single_use=!1),i.fixed=function(){return Ge(we,n,{operator:n.operator.slice(0,-1),left:Ge(Be,n,{operator:"+",expression:_e(s,r)}),right:Ge(De,n,{value:1})})},i.fixed.assigns=r&&r.assigns?r.assigns.slice():[],i.fixed.assigns.push(n),n instanceof Be?s.fixed=i.fixed:(s.fixed=function(){return Ge(Be,n,{operator:"+",expression:_e(s,r)})},s.fixed.assigns=r&&r.assigns,s.fixed.to_prefix=ve(function(e){return e.expression},i.fixed))):(s.walk(e),i.fixed=!1),!0;cn(s)}}),e(ze,function(i,e,t){var n,r=this,s=r.value;return s instanceof gt&&r.name instanceof Tt?(o(),s.parent_scope.resolve().fn_defs.push(s),s.safe_ids=null,(n=r.name.definition()).fixed||Qt(i,n,s)):s?(s.walk(i),o()):i.parent()instanceof _t&&o(),!0;function o(){ln(i,t,r.name,function(){return r.value||Ge(Ve,r)},function(e,t){var n=e.definition();t&&sn(i,n,!0)?(tn(i,n),i.loop_ids[n.id]=i.in_loop,n.fixed=t,n.fixed.assigns=[r],(e instanceof O&&n.redefined()||!Ht(e)&&!Li(n))&&(n.single_use=!1)):n.fixed=!1})}}),e(Nt,function(e,t){var n=e.in_loop;return e.in_loop=this,h(e),t(),en(e),e.in_loop=n,!0}),Pt.DEFMETHOD("reset_opt_flags",function(n){var i=new Ue(n.option("reduce_vars")?function(e,t){return pn(e),e.reduce_vars(i,t,n)}:pn);i.fn_scanning=null,i.fn_visited=[],i.in_loop=null,i.loop_ids=Object.create(null),i.safe_ids=Object.create(null),i.safe_ids.seq={},this.walk(i)}),At.DEFMETHOD("fixed_value",function(e){var t=this.definition(),n=t.fixed;return n?((n=this.fixed?this.fixed:n)instanceof Oe?n:n()).tail_node():(n=0===n&&this.fixed)&&(n=(n instanceof Oe?n:n()).tail_node(),e&&1!=t.escaped.depth&&Gi(n,!0)||n.is_constant()?n:void 0)}),qe.DEFMETHOD("is_immutable",function(){var e=this.redef||this.definition();return e.orig[0]instanceof C&&(1==e.orig.length||!(!this.in_arg||e.orig[1]instanceof Fe))}),Oe.DEFMETHOD("convert_symbol",he),Te.DEFMETHOD("convert_symbol",hn),Ee.DEFMETHOD("convert_symbol",hn),Tt.DEFMETHOD("convert_symbol",dn),qe.DEFMETHOD("convert_symbol",dn),Te.DEFMETHOD("mark_symbol",gn),Ee.DEFMETHOD("mark_symbol",gn),Tt.DEFMETHOD("mark_symbol",_n),qe.DEFMETHOD("mark_symbol",_n),Oe.DEFMETHOD("match_symbol",function(e){return e(this)}),Te.DEFMETHOD("match_symbol",vn),Ee.DEFMETHOD("match_symbol",vn),pr=S("Infinity NaN undefined"),br=S("Array Boolean clearInterval clearTimeout console Date decodeURI decodeURIComponent encodeURI encodeURIComponent Error escape eval EvalError Function isFinite isNaN JSON Map Math Number parseFloat parseInt RangeError ReferenceError RegExp Object Set setInterval setTimeout String SyntaxError TypeError unescape URIError WeakMap WeakSet"),qe.DEFMETHOD("is_declared",function(e){return this.defined||!this.definition().undeclared||e.option("unsafe")&&br[this.name]}),(e=function(e,t){e.DEFMETHOD("in_strict_mode",t)})(et,G),e(Le,function(e){for(var t=this.body,n=0;n<t.length;n++){var i=t[n];if(!(i instanceof w))break;if("use strict"==i.value)return!0}var r=this.parent_scope;return r?r.resolve(!0).in_strict_mode(e):e.option("module")}),(e=function(e,t){e.DEFMETHOD("is_truthy",t)})(Oe,He),e(be,G),e(xe,function(){return"="==this.operator&&this.right.is_truthy()}),e(Pe,G),e(yt,G),e(W,G),e(Re,function(){return this.tail_node().is_truthy()}),e(qe,function(){var e=this.fixed_value();if(!e)return!1;this.is_truthy=He;e=e.is_truthy();return delete this.is_truthy,e}),(e=function(e,t){e.DEFMETHOD("is_negative_zero",t)})(Oe,G),e(be,He),e(xe,function(){var e=this.operator;return"="==e?this.right.is_negative_zero():Hn(e.slice(0,-1),this.left,this.right)}),e(we,function(){return Hn(this.operator,this.left,this.right)}),e(A,function(){return 0==this.value&&1/this.value<0}),e(Pe,He),e(yt,He),e(W,He),e(Re,function(){return this.tail_node().is_negative_zero()}),e(qe,function(){var e=this.fixed_value();if(!e)return!0;this.is_negative_zero=G;e=e.is_negative_zero();return delete this.is_negative_zero,e}),e(Be,function(){return"+"==this.operator&&this.expression.is_negative_zero()||"-"==this.operator}),e=function(e,t){e.DEFMETHOD("_dot_throw",t)},Oe.DEFMETHOD("may_throw_on_access",function(e,t){return!e.option("pure_getters")||this._dot_throw(e,t)}),e(Oe,Gn),e(be,He),e(xe,function(e){var t=this.operator,n=this.left,i=this.right;return"="!=t?Ye[t.slice(0,-1)]&&(n._dot_throw(e)||i._dot_throw(e)):!!i._dot_throw(e)&&(!(n instanceof qe&&i instanceof we&&"||"==i.operator&&n.name==i.left.name)||i.right._dot_throw(e))}),e(we,function(e){return Ye[this.operator]&&(this.left._dot_throw(e)||this.right._dot_throw(e))}),e(et,function(e,t){return Gn(e,t)&&!$e(this.properties,function(e){return!!e.private||!e.static||!(e instanceof AST_ClassGetter||e instanceof AST_ClassSetter)})}),e(Ae,function(e){return this.consequent._dot_throw(e)||this.alternative._dot_throw(e)}),e(A,He),e(ut,function(e,t){return!(!Gn(e,t)||((e=this.expression)instanceof qe&&(e=e.fixed_value()),"prototype"==this.property&&me(e)))}),e(Pe,He),e(E,G),e(yt,function(t,n){return Gn(t,n)&&!$e(this.properties,function(e){return!(e instanceof AST_ObjectGetter||e instanceof AST_ObjectSetter||"__proto__"===e.key&&e.value._dot_throw(t,n))})}),e(wt,function(e,t){return Gn(e,t)&&!this.scope.resolve().new}),e(Re,function(e){return this.tail_node()._dot_throw(e)}),e(qe,function(e,t){if(this.is_undefined)return!0;if(Gn(e,t)&&!(jn(this)&&this.is_declared(e)||this.is_immutable())){t=this.definition();if($t(t)&&!t.scope.rest&&$e(t.scope.argnames,function(e){return e instanceof Fe}))return 2<t.scope.uses_arguments;t=this.fixed_value(!0);if(!t)return!0;if(this._dot_throw=G,t._dot_throw(e))return delete this._dot_throw,!0;this._dot_throw=He}return!1}),e(Be,function(){return"void"==this.operator}),e(It,He),e(Ve,G),(e=function(e,t){e.DEFMETHOD("is_defined",t)})(Oe,He),e(be,G),e(xe,function(e){var t=this.operator;return"="==t?this.right.is_defined(e):Wn(e,t.slice(0,-1),this)}),e(we,function(e){return Wn(e,this.operator,this)}),e(Ae,function(e){return this.consequent.is_defined(e)&&this.alternative.is_defined(e)}),e(A,G),e(ce,He),e(Pe,G),e(yt,G),e(Re,function(e){return this.tail_node().is_defined(e)}),e(qe,function(e){if(this.is_undefined)return!1;if(jn(this)&&this.is_declared(e))return!0;if(this.is_immutable())return!0;var t=this.fixed_value();if(!t)return!1;this.is_defined=He;t=t.is_defined(e);return delete this.is_defined,t}),e(Be,function(){return"void"!=this.operator}),e(It,G),e(Ve,He),(e=function(e,t){e.DEFMETHOD("is_boolean",t)})(Oe,He),e(xe,function(e){return"="==this.operator&&this.right.is_boolean(e)}),hr=S("in instanceof == != === !== < <= >= >"),e(we,function(e){return hr[this.operator]||Ye[this.operator]&&this.left.is_boolean(e)&&this.right.is_boolean(e)}),e(f,G),dr=S("every hasOwnProperty isPrototypeOf propertyIsEnumerable some"),e(ke,function(e){return!!e.option("unsafe")&&(e=this.expression)instanceof ut&&(dr[e.property]||"test"==e.property&&e.expression instanceof W)}),e(Ae,function(e){return this.consequent.is_boolean(e)&&this.alternative.is_boolean(e)}),e(p,He),e(Re,function(e){return this.tail_node().is_boolean(e)}),e(qe,function(e){var t=this.fixed_value();if(!t)return!1;this.is_boolean=He;t=t.is_boolean(e);return delete this.is_boolean,t}),mr=S("! delete"),e(Be,function(){return mr[this.operator]}),(e=function(e,t){e.DEFMETHOD("is_number",t)})(Oe,He),gr=S("- * / % ** & | ^ << >> >>>"),e(xe,function(e){return gr[this.operator.slice(0,-1)]||"="==this.operator&&this.right.is_number(e)}),e(we,function(e){return!!gr[this.operator]||"+"==this.operator&&(this.left.is_boolean(e)||this.left.is_number(e))&&(this.right.is_boolean(e)||this.right.is_number(e))}),_r=S(["charCodeAt","getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","indexOf","lastIndexOf","localeCompare","push","search","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]),e(ke,function(e){return!!e.option("unsafe")&&(e=this.expression)instanceof ut&&(_r[e.property]||jn(e.expression)&&"Math"==e.expression.name)}),e(Ae,function(e){return this.consequent.is_number(e)&&this.alternative.is_number(e)}),e(p,He),e(De,G),e(Re,function(e){return this.tail_node().is_number(e)}),e(qe,function(e,t){var n=this.fixed_value();if(!n)return!1;if(t&&n instanceof Be&&"+"==n.operator&&n.expression.equals(this))return!1;this.is_number=He;t=n.is_number(e);return delete this.is_number,t}),vr=S("+ - ~ ++ --"),e(Dt,function(){return vr[this.operator]}),(e=function(e,t){e.DEFMETHOD("is_string",t)})(Oe,He),e(xe,function(e){switch(this.operator){case"+=":if(this.left.is_string(e))return!0;case"=":return this.right.is_string(e)}}),e(we,function(e){return"+"==this.operator&&(this.left.is_string(e)||this.right.is_string(e))}),yr=S(["charAt","substr","substring","toExponential","toFixed","toLowerCase","toPrecision","toString","toUpperCase","trim"]),e(ke,function(e){return!!e.option("unsafe")&&(e=this.expression)instanceof ut&&yr[e.property]}),e(Ae,function(e){return this.consequent.is_string(e)&&this.alternative.is_string(e)}),e(Re,function(e){return this.tail_node().is_string(e)}),e(H,G),e(qe,function(e){var t=this.fixed_value();if(!t)return!1;this.is_string=He;t=t.is_string(e);return delete this.is_string,t}),e(Ct,function(e){return!this.tag||er(e,this.tag)}),e(Be,function(){return"typeof"==this.operator}),Ye=S("&& || ??"),e=function(e,t){e.DEFMETHOD("_find_defs",t)},Pt.DEFMETHOD("resolve_defines",function(s){return s.option("global_defs")?(this.figure_out_scope({ie:s.option("ie")}),this.transform(new jt(function(e){var t=e._find_defs(s,"");if(t){for(var n,i=0,r=e;(n=this.parent(i++))&&n instanceof Ie&&n.expression===r;)r=n;if(!Vt(r,n))return t;Yn(e)}}))):this}),e(Oe,he),e(ut,function(e,t){return this.expression._find_defs(e,"."+this.property+t)}),e(Tt,function(e){this.definition().global&&q(e.option("global_defs"),this.name)&&Yn(this)}),e(qe,function(e,t){if(this.definition().global)return e=e.option("global_defs"),t=this.name+t,q(e,t)?function t(e,n){if(e instanceof Oe)return e.clone(!0);if(Array.isArray(e))return Ge(be,n,{elements:e.map(function(e){return t(e,n)})});if(e&&"object"==typeof e){var i,r=[];for(i in e)q(e,i)&&r.push(Ge(bt,n,{key:i,value:t(e[i],n)}));return Ge(yt,n,{properties:r})}return Sn(e,n)}(e[t],this):void 0}),d.DEFMETHOD("first_statement",ei),m.DEFMETHOD("first_statement",ei),Pe.DEFMETHOD("first_statement",function(){return Zn(this.body)}),Pe.DEFMETHOD("length",function(){for(var e=this.argnames,t=0;t<e.length&&!(e[t]instanceof Te);t++);return t}),Cr=Qn({Array:["indexOf","join","lastIndexOf","slice"].concat(e=["constructor","toString","valueOf"]),Boolean:e,Function:e,Number:["toExponential","toFixed","toPrecision"].concat(e),Object:e,RegExp:["exec","test"].concat(e),String:["charAt","charCodeAt","concat","indexOf","italics","lastIndexOf","match","replace","search","slice","split","substr","substring","toLowerCase","toUpperCase","trim"].concat(e)}),Pr=Qn({Array:["isArray"],Math:["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","atan2","pow","max","min"],Number:["isFinite","isNaN"],Object:["create","getOwnPropertyDescriptor","getOwnPropertyNames","getPrototypeOf","isExtensible","isFrozen","isSealed","keys"],String:["fromCharCode","raw"]}),(e=function(e,t){e.DEFMETHOD("is_constant",t)})(Oe,He),e(A,G),e(W,He),xr=S("! ~ - + void"),e(Be,function(){return xr[this.operator]&&this.expression instanceof A}),e=function(e,t){e.DEFMETHOD("_eval",t)},Oe.DEFMETHOD("evaluate",function(e,t){var n;return!e.option("evaluate")||(n=this._eval(e,t,e=[],1),e.forEach(function(e){delete e._eval}),!t&&n&&!(n instanceof RegExp)&&("function"==typeof n||"object"==typeof n))?this:n}),wr=new Ue(function(e){e instanceof xe&&ii(e.left),e instanceof ht&&ii(e.init),e instanceof Dt&&UNARY_POSTFIX[e.operator]&&ii(e.expression)}),e(u,function(){throw new Error(string_template("Cannot evaluate a statement [{start}]",this))}),e(Je,z),e(s,z),e(et,z),e(Oe,z),e(A,function(){return this.value}),e(xe,function(e,t,n,i){var r=this.left;if(!t){if(!(r instanceof qe))return this;if(!q(r,"_eval")){if(!r.fixed)return this;var s=r.definition();if(!s.fixed)return this;if(s.undeclared)return this;if(s.last_ref!==r)return this;if("m"==s.single_use)return this;if(this.right.has_side_effects(e))return this}}s=this.operator,s=!q(r,"_eval")&&r instanceof qe&&r.fixed&&r.definition().fixed?r:"="==s?this.right:Ge(we,this,{operator:s.slice(0,-1),left:r,right:this.right}),r.walk(wr),s=s._eval(e,t,n,i);return"object"==typeof s?this:(ii(r),s)}),e(Re,function(e,t,n,i){if(!t)return this;for(var r=this.expressions,s=0,o=r.length-1;s<o;s++)r[s].walk(wr);var a=r[o],e=a._eval(e,t,n,i);return e===a?this:e}),e(Pe,function(e){return e.option("unsafe")?((e=function(){}).node=this,e.toString=function(){return"function(){}"},e):this}),e(be,function(e,t,n,i){if(e.option("unsafe")){for(var r=[],s=0;s<this.elements.length;s++){var o=this.elements[s];if(o instanceof ce)return this;var a=o._eval(e,t,n,i);if(o===a)return this;r.push(a)}return r}return this}),e(yt,function(e,t,n,i){if(e.option("unsafe")){for(var r={},s=0;s<this.properties.length;s++){var o=this.properties[s];if(!(o instanceof bt))return this;var a=o.key;if(a instanceof Oe&&(a=a._eval(e,t,n,i))===o.key)return this;switch(a){case"__proto__":case"toString":case"valueOf":return this}if(r[a]=o.value._eval(e,t,n,i),r[a]===o.value)return this}return r}return this}),Sr=S("! typeof void"),e(Be,function(e,t,n,i){var r=this.expression,s=this.operator;if(e.option("typeofs")&&"typeof"==s&&(r instanceof Pe||r instanceof qe&&r.fixed_value()instanceof Pe))return"function";var o=r instanceof qe&&r.definition(),a=(Sr[s]||o&&o.fixed||i++,r.walk(wr),r._eval(e,t,n,i));if(a===r)return t&&"void"==s?void 0:this;switch(s){case"!":return!a;case"typeof":return a instanceof RegExp?this:typeof a;case"void":return;case"~":return~a;case"-":return-a;case"+":return+a;case"++":case"--":if(!o)return this;if(!t){if(o.undeclared)return this;if(o.last_ref!==r)return this}return q(r,"_eval")&&(a=+(s[0]+1)+ +a),ii(r),a}return this}),e(It,function(e,t,n,i){var r=this.expression;if(r instanceof qe){if(!q(r,"_eval")){if(!r.fixed)return this;if(!t){var s=r.definition();if(!s.fixed)return this;if(s.undeclared)return this;if(s.last_ref!==r)return this}}}else if(!t)return this;r instanceof qe&&r.definition().fixed||i++,r.walk(wr);s=r._eval(e,t,n,i);return s===r?this:(ii(r),+s)}),kr=S("&& || === !=="),e(we,function(e,t,n,i){kr[this.operator]||i++;var r=this.left._eval(e,t,n,i);if(r===this.left)return this;if(this.operator==(r?"||":"&&"))return r;var s,o=this.right._eval(e,t&&!(r&&"object"==typeof r),n,i);if(o===this.right)return this;switch(this.operator){case"&&":s=r&&o;break;case"||":s=r||o;break;case"??":s=null==r?o:r;break;case"|":s=r|o;break;case"&":s=r&o;break;case"^":s=r^o;break;case"+":s=r+o;break;case"-":s=r-o;break;case"*":s=r*o;break;case"/":s=r/o;break;case"%":s=r%o;break;case"<<":s=r<<o;break;case">>":s=r>>o;break;case">>>":s=r>>>o;break;case"==":s=r==o;break;case"===":s=r===o;break;case"!=":s=r!=o;break;case"!==":s=r!==o;break;case"<":s=r<o;break;case"<=":s=r<=o;break;case">":s=o<r;break;case">=":s=o<=r;break;case"**":s=Math.pow(r,o);break;case"in":if(o&&"object"==typeof o&&q(o,r)){s=!0;break}default:return this}if(isNaN(s))return e.find_parent(Lt)?this:s;if(e.option("unsafe_math")&&!t&&s&&"number"==typeof s&&("+"==this.operator||"-"==this.operator)){n=Math.max(0,a(r),a(o));if(n<16)return+s.toFixed(n)}return s;function a(e){e=/(\.[0-9]*)?(e[^e]+)?$/.exec(+e);return(e[1]||".").length-1-(e[2]||"").slice(1)}}),e(Ae,function(e,t,n,i){var r=this.condition._eval(e,t,n,i);return r===this.condition||(e=(r=r?this.consequent:this.alternative)._eval(e,t,n,i))===r?this:e}),e(qe,function(e,t,n,i){var r,s=this.fixed_value();if(!s)return this;if(q(s,"_eval"))r=s._eval();else{if(this._eval=z,r=s._eval(e,t,n,i),delete this._eval,r===s)return this;s._eval=function(){return r},n.push(s)}return r&&"object"==typeof r&&!function(t,e){var n=t.definition().escaped;switch(n.length){case 0:return 1;case 1:var i=!1;return n[0].walk(new Ue(function(e){return!!i||(e===t?i=!0:e instanceof Le||void 0)})),i;default:return e<=n.depth}}(this,i)?this:r}),Ar={Array:Array,Math:Math,Number:Number,Object:Object,String:String},Tr=Qn({Math:["E","LN10","LN2","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],Number:["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"]}),Er=S("global ignoreCase multiline source"),e(Ie,function(e,t,n,i){if(e.option("unsafe")){var r,s=this.expression;if(!jn(s)&&(null==(r=s._eval(e,t,n,i+1))||r===s))return this;var o=this.property;if(o instanceof Oe&&(o=o._eval(e,t,n,i))===this.property)return this;if(void 0===r){e=Tr[s.name];if(!e||!e[o])return this;r=Ar[s.name]}else if(r instanceof RegExp){if(!Er[o])return this}else if("object"==typeof r){if(!q(r,o))return this}else if("function"==typeof r)switch(o){case"name":return r.node.name?r.node.name.name:"";case"length":return r.node.length();default:return this}return r[o]}return this}),e(ke,function(i,r,s,o){var e=this.expression,t=e instanceof qe?e.fixed_value():e;if(t instanceof d||t instanceof rt||t instanceof dt){if(!t.evaluating&&!(t.name&&0<t.name.definition().recursive_refs||this.is_expr_pure(i))){var a=ri(this.args,i,r,s,o);if($e(t.argnames,function(e,t){if(e instanceof Te){if(!a)return!1;if(void 0===a[t]){var n=e.value._eval(i,r,s,o);if(n===e.value)return!1;a[t]=n}e=e.name}return!(e instanceof Ee)})&&!(t.rest instanceof Ee)&&(a||r)){var c,n=t.first_statement();if(n instanceof Ne)return(l=n.value)?(c=[],a&&(!$e(t.argnames,function(e,t){return p(e,a[t])})||t.rest&&!p(t.rest,a.slice(t.argnames.length)))&&!r||(r&&t.argnames.forEach(function(e){e instanceof Te&&e.value.walk(wr)}),t.evaluating=!0,l=l._eval(i,r,s,o),t.evaluating=!1),c.forEach(function(e){delete e._eval}),l===n.value?this:l):void 0;if(r){t.walk(wr);var u=!1;if(t.evaluating=!0,M(t,new Ue(function(e){return!!u||(e instanceof Ne?(e.value&&void 0!==e.value._eval(i,!0,s,o)&&(u=!0),!0):e instanceof Le&&e!==t||void 0)})),t.evaluating=!1,!u)return}}}}else if(i.option("unsafe")&&e instanceof Ie){var l,n=e.property;if(n instanceof Oe&&(n=n._eval(i,r,s,o))===e.property)return this;e=e.expression;if(jn(e)){var f=Pr[e.name];if(!f||!f[n])return this;l=Ar[e.name]}else{if(null==(l=e._eval(i,r,s,o+1))||l===e)return this;f=Cr[l.constructor.name];if(!f||!f[n])return this;if(l instanceof RegExp&&l.global&&!(e instanceof W))return this}if(!(a=ri(this.args,i,r,s,o)))return this;if("replace"==n&&"function"==typeof a[1])return this;try{return l[n].apply(l,a)}catch(e){Oe.warn("Error evaluating {this} [{start}]",this)}finally{l instanceof RegExp&&(l.lastIndex=0)}}return this;function p(e,t){var n,i=(e=e instanceof Te?e.name:e).definition();return i.orig[i.orig.length-1]===e&&(n=t,i.references.forEach(function(e){e._eval=function(){return n},c.push(e)}),!0)}}),e(p,z),e(Ct,function(e,t,n,i){if(e.option("templates")){if(this.tag){if(!er(e,this.tag))return this;c=function(e){return e}}var r=ri(this.expressions,e,t,n,i);if(r){for(var s=!1,o=c(this.strings[0]),a=0;a<r.length;a++)o+=r[a]+c(this.strings[a+1]);if(!s)return o;this._eval=z}}return this;function c(e){return"string"!=typeof(e=tr(e))&&(s=!0),e}}),(e=function(e,n){e.DEFMETHOD("negate",function(e,t){return n.call(this,e,t)})})(Oe,function(){return si(this)}),e(u,function(){throw new Error("Cannot negate a statement")}),e(we,function(e,t){var n=this.clone(),i=this.operator;if(e.option("unsafe_comps"))switch(i){case"<=":return n.operator=">",n;case"<":return n.operator=">=",n;case">=":return n.operator="<",n;case">":return n.operator="<=",n}switch(i){case"==":return n.operator="!=",n;case"!=":return n.operator="==",n;case"===":return n.operator="!==",n;case"!==":return n.operator="===",n;case"&&":return n.operator="||",n.left=n.left.negate(e,t),n.right=n.right.negate(e),oi(this,n,t);case"||":return n.operator="&&",n.left=n.left.negate(e,t),n.right=n.right.negate(e),oi(this,n,t)}return si(this)}),e(ne,function(){return si(this)}),e(Ae,function(e,t){var n=this.clone();return n.consequent=n.consequent.negate(e),n.alternative=n.alternative.negate(e),oi(this,n,t)}),e(gt,function(){return si(this)}),e(Re,function(e){var t=this.expressions.slice();return t.push(t.pop().negate(e)),We(this,t)}),e(Be,function(){return"!"==this.operator?this.expression:si(this)}),Or=S("Boolean decodeURI decodeURIComponent Date encodeURI encodeURIComponent Error escape EvalError isFinite isNaN Number Object parseFloat parseInt RangeError ReferenceError String SyntaxError TypeError unescape URIError"),Dr=S("Map Set WeakMap WeakSet"),ke.DEFMETHOD("is_expr_pure",function(e){if(e.option("unsafe")){var t=this.expression;if(jn(t)){if(Or[t.name])return!0;if(this instanceof p&&Dr[t.name])return!0}if(ni(t))return!0}return e.option("annotations")&&this.pure||!e.pure_funcs(this)}),Ct.DEFMETHOD("is_expr_pure",function(e){var t,n=this.tag;if(!n)return!0;if(e.option("unsafe")){if(jn(n)&&Or[n.name])return!0;if(n instanceof ut&&jn(n.expression))return(t=Pr[n.expression.name])&&(t[n.property]||"Math"==n.expression.name&&"random"==n.property)}return!e.pure_funcs(this)}),Oe.DEFMETHOD("is_call_pure",He),ke.DEFMETHOD("is_call_pure",function(e){if(!e.option("unsafe"))return!1;var t=this.expression;if(!(t instanceof ut))return!1;var n,i=t.expression,r=t.property;if(i instanceof be)n=Cr.Array;else if(i.is_boolean(e))n=Cr.Boolean;else if(i.is_number(e))n=Cr.Number;else if(i instanceof W)n=Cr.RegExp;else if(i.is_string(e)){if(n=Cr.String,"replace"==r){i=this.args[1];if(i&&!i.is_string(e))return!1}}else t.may_throw_on_access(e)||(n=Cr.Object);return n&&n[r]}),(e=function(e,t){e.DEFMETHOD("safe_to_spread",t)})(Oe,He),e(be,G),e(xe,function(){switch(this.operator){case"=":return this.right.safe_to_spread();case"&&=":case"||=":case"??=":return this.left.safe_to_spread()&&this.right.safe_to_spread()}return!0}),e(we,function(){return!Ye[this.operator]||this.left.safe_to_spread()&&this.right.safe_to_spread()}),e(A,G),e(Pe,G),e(yt,function(){return $e(this.properties,function(e){return!(e instanceof AST_ObjectGetter||e instanceof Me)})}),e(Re,function(){return this.tail_node().safe_to_spread()}),e(qe,function(){var e=this.fixed_value();return e&&e.safe_to_spread()}),e(Dt,G),(e=function(e,t){e.DEFMETHOD("has_side_effects",t)})(Oe,G),e(be,function(e){return ai(this.elements,e,ci)}),e(xe,function(e){var t,n=this.left;return!(n instanceof Ie)||!((t=n.expression)instanceof wt)||!t.scope.resolve().new||n instanceof St&&n.property.has_side_effects(e)||this.right.has_side_effects(e)}),e(we,function(e){return this.left.has_side_effects(e)||this.right.has_side_effects(e)||!Wi(this.operator,this.right,e)}),e(Ke,function(e){return ai(this.body,e)}),e(ke,function(e){return!(this.is_expr_pure(e)||this.is_call_pure(e)&&!this.expression.has_side_effects(e))||ai(this.args,e,ci)}),e(Ze,function(e){return this.expression.has_side_effects(e)||ai(this.body,e)}),e(et,function(e){var t=this.extends;return!(!t||Ut(t=t instanceof qe?t.fixed_value():t))||ai(this.properties,e)}),e(a,function(e){return this.key instanceof Oe&&this.key.has_side_effects(e)||this.static&&this.value&&this.value.has_side_effects(e)}),e(Ae,function(e){return this.condition.has_side_effects(e)||this.consequent.has_side_effects(e)||this.alternative.has_side_effects(e)}),e(A,He),e(it,function(e){return ai(this.definitions,e)}),e(st,function(e){return ai(this.elements,e)}),e(ot,function(e){return this.key instanceof Oe&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),e(at,function(e){return ai(this.properties,e)}),e(ut,function(e){return this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)}),e(Z,He),e(Ce,function(e){return this.condition.has_side_effects(e)||this.body&&this.body.has_side_effects(e)||this.alternative&&this.alternative.has_side_effects(e)}),e(ue,function(e){return this.body.has_side_effects(e)}),e(Pe,He),e(yt,function(e){return ai(this.properties,e,function(e,t){e=e.expression;return!e.safe_to_spread()||e.has_side_effects(t)})}),e(wt,He),e(xt,function(e){return this.key instanceof Oe&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),e(Re,function(e){return ai(this.expressions,e)}),e(je,function(e){return this.body.has_side_effects(e)}),e(St,function(e){return this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)||this.property.has_side_effects(e)}),e(kt,function(e){return this.expression.has_side_effects(e)||ai(this.body,e)}),e(Tt,He),e(qe,function(e){return!this.is_declared(e)||!Ht(this,e)}),e(Ct,function(e){return!this.is_expr_pure(e)||ai(this.expressions,e)}),e(Ot,function(e){return ai(this.body,e)||this.bcatch&&this.bcatch.has_side_effects(e)||this.bfinally&&this.bfinally.has_side_effects(e)}),e(Dt,function(e){return unary_side_effects[this.operator]||this.expression.has_side_effects(e)}),e(ze,function(){return this.value}),(e=function(e,t){e.DEFMETHOD("may_throw",t)})(Oe,G),e(A,He),e(Z,He),e(Pe,He),e(wt,He),e(Tt,He),e(be,function(e){return ui(this.elements,e)}),e(xe,function(e){return!!this.right.may_throw(e)||!(!e.has_directive("use strict")&&"="==this.operator&&this.left instanceof qe)&&this.left.may_throw(e)}),e(Xe,function(e){return this.expression.may_throw(e)}),e(we,function(e){return this.left.may_throw(e)||this.right.may_throw(e)||!Wi(this.operator,this.right,e)}),e(Ke,function(e){return ui(this.body,e)}),e(ke,function(e){if(ui(this.args,e))return!0;if(this.is_expr_pure(e))return!1;this.may_throw=G;e=li(this.expression,e);return delete this.may_throw,e}),e(Ze,function(e){return this.expression.may_throw(e)||ui(this.body,e)}),e(Ae,function(e){return this.condition.may_throw(e)||this.consequent.may_throw(e)||this.alternative.may_throw(e)}),e(Te,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)}),e(it,function(e){return ui(this.definitions,e)}),e(ut,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)}),e(ht,function(e){var t;return!!this.init.may_throw(e)||!!(t=this.object).may_throw(e)||!((t=t.tail_node())instanceof be||t.is_string(e))||this.body.may_throw(e)}),e(Ce,function(e){return this.condition.may_throw(e)||this.body&&this.body.may_throw(e)||this.alternative&&this.alternative.may_throw(e)}),e(ue,function(e){return this.body.may_throw(e)}),e(yt,function(e){return ui(this.properties,e)}),e(xt,function(e){return this.value.may_throw(e)||this.key instanceof Oe&&this.key.may_throw(e)}),e(Ne,function(e){return this.value&&this.value.may_throw(e)}),e(Re,function(e){return ui(this.expressions,e)}),e(je,function(e){return this.body.may_throw(e)}),e(St,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)||this.property.may_throw(e)}),e(kt,function(e){return this.expression.may_throw(e)||ui(this.body,e)}),e(qe,function(e){return!this.is_declared(e)||!Ht(this,e)}),e(Ct,function(e){if(ui(this.expressions,e))return!0;if(this.is_expr_pure(e))return!1;if(!this.tag)return!1;this.may_throw=G;e=li(this.tag,e);return delete this.may_throw,e}),e(Ot,function(e){return(this.bcatch?this.bcatch.may_throw(e):ui(this.body,e))||this.bfinally&&this.bfinally.may_throw(e)}),e(Dt,function(e){return this.expression.may_throw(e)&&!("typeof"==this.operator&&this.expression instanceof qe)}),e(ze,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)}),(e=function(e,t){e.DEFMETHOD("is_constant_expression",t)})(Oe,He),e(be,function(e){return fi(this.elements,e)}),e(we,function(e){return this.left.is_constant_expression(e)&&this.right.is_constant_expression(e)&&Wi(this.operator,this.right)}),e(et,function(e){var t=this.extends;return!(t&&!Ut(t))&&fi(this.properties,e)}),e(a,function(e){return"string"==typeof this.key&&(!this.value||this.value.is_constant_expression(e))}),e(A,G),e(Pe,function(i){var r=this,s=!0,o=[];return r.walk(new Ue(function(e,t){if(!s)return!0;if(e instanceof Qe)return e===r?void 0:(o.push(e),t(),o.pop(),!0);if(e instanceof qe){if(r.inlined||e.redef||e.in_arg)return!(s=!1);if(!r.variables.has(e.name)){t=e.definition();if(!Bt(t.scope,o)){if(i&&!t.redefined()){var n=i.find_variable(e.name);if(n?n===t:t.undeclared)return s="f",!0}s=!1}}return!0}return e instanceof wt?(Mt(r)&&$e(o,function(e){return!(e instanceof Le)||Mt(e)})&&(s=!1),!0):void 0})),s}),e(yt,function(e){return fi(this.properties,e)}),e(xt,function(e){return"string"==typeof this.key&&this.value.is_constant_expression(e)}),e(Dt,function(e){return this.expression.is_constant_expression(e)}),(e=function(e,t){e.DEFMETHOD("aborts",t)})(u,V),e(R,z),e(Se,hi),e(j,hi),e(Ce,function(){return this.alternative&&pi(this.body)&&pi(this.alternative)&&this}),Ir=S(["use asm","use strict"]),t(w,function(e,t){return!t.option("directives")||Ir[e.value]&&t.has_directive(e.value)===e?e:Ge(Z,e)}),t(tt,function(e,t){return t.option("drop_debugger")?Ge(Z,e):e}),t(ue,function(e,t){if(e.body instanceof Ce||e.body instanceof N){var n=zn([e.body],t);switch(n.length){case 0:e.body=Ge(Z,e);break;case 1:e.body=n[0];break;default:e.body=Ge(Se,e,{body:n})}}return t.option("unused")&&0==e.label.references.length?e.body:e}),t(vt,function(e,t){var n,i;return t.option("dead_code")&&(n=e.label)&&(i=t.loopcontrol_target(e),e.label=null,t.loopcontrol_target(e)===i?B(n.thedef.references,e):e.label=n),e}),t(Ke,function(e,t){return e.body=zn(e.body,t),e}),t(Se,function(e,t){return e.body=zn(e.body,t),di(e,t.parent())}),t(Pe,function(e,t){return mi(e,t),e.body=zn(e.body,t),e}),t(d,gi),t(m,gi),t(dt,function(t,e){mi(t,e),t.body=zn(t.body,e);var n=e.parent();if(e.option("inline"))for(var i=0;i<t.body.length;i++){var r=t.body[i];if(!(r instanceof w)){if(r instanceof Ne){if(i!=t.body.length-1)break;var s=r.value;if(!s||"Call"!=s.TYPE)break;if(s.is_expr_pure(e))break;var o,r=s.expression;if(r instanceof qe){if(t.name&&t.name.definition()===r.definition())break;o=r.fixed_value()}else o=r;if(!(o instanceof rt||o instanceof dt))break;if(o.rest)break;if(o.uses_arguments)break;if(o===r){if(o.parent_scope!==t)break;if(!$e(o.enclosed,function(e){return e.scope!==t}))break}if((o!==r||o.name)&&(n instanceof AST_ClassMethod||n instanceof g)&&n.value===e.self())break;if(o.contains_this())break;var a=o.argnames.length;if(0<a&&e.option("inline")<2)break;if(a>t.argnames.length)break;if(!$e(t.argnames,function(e){return e instanceof Fe}))break;if(!$e(s.args,function(e){return!(e instanceof Me)}))break;for(var c=0;c<a;c++){var u=s.args[c];if(!(u instanceof qe))break;if(u.definition()!==t.argnames[c].definition())break}if(c<a)break;for(;c<s.args.length&&!s.args[c].has_side_effects(e);c++);if(c<s.args.length)break;if(a<t.argnames.length&&!e.drop_fargs(t,n)){if(!e.drop_fargs(o,s))break;for(;o.argnames.push(o.make_var(Fe,o,"argument_"+a)),++a<t.argnames.length;);}return r}break}}return t}),Nr=S("arguments await yield"),Le.DEFMETHOD("merge_variables",function(l){if(l.option("merge_vars")){for(var f,p,h=[],d={},m=this,a=[],c=[],u=0,g=new qt,_=Object.create(null),v=Object.create(null),y=new Ue(function(n,e){var t,i,r,s,o,a;return n instanceof xe?(o=n.left,s=n.right,o instanceof Ee?(s.walk(y),k(qe,A,o),!0):Ye[n.operator.slice(0,-1)]?(o.walk(y),w(),s.walk(y),o instanceof qe&&A(o),S(),!0):o instanceof qe?("="!=n.operator&&A(o,!0),s.walk(y),A(o),!0):void 0):n instanceof we?Ye[n.operator]?(u(n),!0):void 0:n instanceof N?((a=y.loopcontrol_target(n))instanceof mt||T(a),!0):n instanceof ke?((i=n.expression)instanceof gt?(n.args.forEach(function(e){e.walk(y)}),i.walk(y)):(e(),c(i)),!0):n instanceof et?(n.name&&n.name.walk(y),n.extends&&n.extends.walk(y),n.properties.filter(function(e){return e.key instanceof Oe&&e.key.walk(y),e.value}).forEach(function(e){e.static?e.value.walk(y):(w(),d.block=n,e.value.walk(y),S())}),!0):n instanceof Ae?(u(n.condition,n.consequent,n.alternative),!0):n instanceof L?((a=y.loopcontrol_target(n))instanceof ct&&T(a),!0):n instanceof ct?(w(),d.block=n,d.loop=!0,r=d,n.body.walk(y),d.inserted===n&&(d=r),n.condition.walk(y),S(),!0):n instanceof pt?(n.init&&n.init.walk(y),w(),d.block=n,d.loop=!0,n.condition&&n.condition.walk(y),n.body.walk(y),n.step&&n.step.walk(y),S(),!0):n instanceof ht?(n.object.walk(y),w(),d.block=n,d.loop=!0,n.init.walk(y),n.body.walk(y),S(),!0):n instanceof Ce?(u(n.condition,n.body,n.alternative),!0):n instanceof ue?(w(),d.block=n,r=d,n.body.walk(y),d.inserted===n&&(d=r),S(),!0):n instanceof Le?(w(),(d.block=n)===m&&(p=d),n instanceof Pe&&(n.name&&(_[n.name.definition().id]=!1),t=n.uses_arguments&&!y.has_directive("use strict")?function(e){_[e.definition().id]=!1}:function(e){A(e)},h.push(n),n.argnames.forEach(function(e){k(Fe,t,e)}),n.rest&&k(Fe,t,n.rest),h.pop()),F(n,y),S(),!0):n instanceof St?(i=n.expression,(n.optional?(i.walk(y),w(),n.property.walk(y),S):e)(),c(i),!0):n instanceof kt?(n.expression.walk(y),r=d,n.body.forEach(function(e){e instanceof nt||(e.expression.walk(y),r===d&&w())}),d=r,n.body.forEach(function(e){w(),d.block=n;var t=d;M(e,y),d.inserted===n&&(d=t),S()}),!0):n instanceof O||n instanceof D?!(_[n.definition().id]=!1):n instanceof qe?(A(n,!0),!0):n instanceof Ot?(s=f,f=n,M(n,y),n.bcatch&&(n.bcatch.argname&&n.bcatch.argname.mark_symbol(function(e){e instanceof fe&&(e=e.definition(),_[e.id]=!1,e=e.redefined())&&(_[e.id]=!1)},y),n.bfinally||(f=s)?M(n.bcatch,y):(w(),M(n.bcatch,y),S())),f=s,n.bfinally&&n.bfinally.walk(y),!0):n instanceof Dt?UNARY_POSTFIX[n.operator]&&(o=n.expression)instanceof qe?(A(o,!0),!0):void 0:n instanceof ze?((a=n.value)?a.walk(y):a=d.block instanceof ht&&d.block.init===y.parent(),k(Tt,a?function(e){e instanceof AST_SymbolVar?A(e):e.walk(y)}:function(e){var t,n;e instanceof AST_SymbolVar?(t=e.definition().id,(n=_[t])?n.push(e):t in _||g.add(t,e)):e.walk(y)},n.name),!0):n instanceof Nt?(w(),d.block=n,d.loop=!0,e(),S(),!0):void 0;function c(e){l.option("ie")&&(e=root_expr(e))instanceof qe&&e.walk(y)}function u(e,t,n){var i=d,r=[i,i];if(e instanceof we)switch(e.operator){case"&&":r[0]=u(e.left,e.right)[0];break;case"||":case"??":r[1]=u(e.left,null,e.right)[1];break;default:e.walk(y)}else e instanceof Ae?u(e.condition,e.consequent,e.alternative):e.walk(y);return d=r[0],t&&(w(),t.walk(y)),r[0]=d,d=r[1],n&&(w(),n.walk(y)),r[1]=d,d=i,r}}),e=(y.directives=Object.create(l.directives),m.walk(y),!1),t=Object.create(null);a.length&&c.length;){var n=c.shift();if(n){var i=n.definition,r=_[i.id];if(r){for(r={end:r.end};i.id in t;)i=t[i.id];r.start=_[i.id].start;var s=[];do{var o=a.shift();if(!(n.index>o.index)){var b=o.definition;if(b.id in v){var x=_[b.id];if(x){if(x.start.block===r.start.block&&C(x,r)&&(!x.start.loop&&Zi(i)||C(r,x))&&(!l.option("webkit")||is_funarg(i)===is_funarg(b))&&!b.const_redefs&&$e(x.scopes,function(e){return e.find_variable(i.name)===i})){x.forEach(function(e){e.thedef=i,e.name=i.name,e instanceof qe?(i.references.push(e),b.replaced++):(i.orig.push(e),b.eliminated++)}),b.fixed||(i.fixed=!1),t[b.id]=i,e=!0;break}s.push(o)}}}}while(a.length);s.length&&(a=s.concat(a))}}}return e}function w(){d=Object.create(d)}function S(){d=Object.getPrototypeOf(d)}function k(t,n,e){var i=new Ue(function(e){if(!(e instanceof Ee))return e instanceof Te?(w(),e.value.walk(y),S(),e.name.walk(i)):e instanceof ot?e.key instanceof Oe?e.value instanceof Ie?(w(),(d.block=e).key.walk(y),e.value.walk(i),S()):(e.key.walk(y),e.value.walk(i)):e.value.walk(i):e instanceof t?n(e):e.walk(y),!0});e.walk(i)}function A(t,e){var n,i=t.definition();if(e&&!$e(h,function(e){return!(n=e.variables.get(t.name))||!is_funarg(n)||n!==i&&!i.undeclared&&e.parent_scope.find_variable(t.name)!==i}))return _[i.id]=_[n.id]=!1;var r,s=d;if(f&&(w(),s=d,S()),i.id in _){if(!(r=_[i.id]))return;if(r.start.block!==s.block)return _[i.id]=!1;if(o(t),r.end=s,i.id in v)c[v[i.id]]=null;else if(!e)return}else{if((n=m.variables.get(i.name))!==i)return n&&p===s&&(_[n.id]=!1),_[i.id]=!1;if(l.exposed(i)||Nr[t.name])return _[i.id]=!1;if((r=g.get(i.id)||[]).scopes=[],o(t),_[i.id]=r,!e)return r.start=s,a.push({index:u++,definition:i});if(s.block!==m)return _[i.id]=!1;r.start=p}function o(e){r.push(e),de(r.scopes,e.scope);var t=bn(y);t!==e.scope&&de(r.scopes,t)}v[i.id]=c.length,c.push({index:u++,definition:i})}function T(e){for(var t=[];;){if(q(d,"block")){var n=d.block;if((n=n instanceof ue?n.body:n)===e)break}t.push(d),S()}for(d.inserted=d.block,w();t.length;){var i=t.pop();w(),q(i,"block")&&(d.block=i.block),q(i,"loop")&&(d.loop=i.loop)}}function E(e,t){return e===t||e.isPrototypeOf(t)}function C(e,t){return E(e.start,e.end)||E(e.start,t.start)}}),Le.DEFMETHOD("drop_unused",function(D){if(D.option("unused")){var I=this,N=!(I instanceof Pt)||D.toplevel.funcs,L=!(I instanceof Pt)||D.toplevel.vars,R=/keep_assign/.test(D.option("unused"))?He:function(e,t){var n,i=!1;if(e instanceof xe?!e.write_only&&"="!=e.operator||(n=r(e.left,t)):e instanceof Dt&&e.write_only&&(n=r(e.expression,t)),n instanceof qe){e=n.definition();if(!o[e.id]&&!D.exposed(e)&&Ht(n,D,i))return n}function r(e,t){if(e instanceof Ie){var n=e.expression;if(!n.may_throw_on_access(D,!0))return i=!0,t&&e instanceof St&&t.unshift(e.property),r(n,t)}else if(e instanceof xe&&"="==e.operator)return e.write_only="p",n=r(e.right),!t||(t.assign=e,n instanceof qe)?n:e.left;return e}},j=Object.create(null),o=Object.create(null),u=function(e){return(u=function e(t,n,i){var r=D.parent(n);if(!r)return i;t=r instanceof Pe&&Bt(t,r.argnames);return e(r,n+1,t?function(e){var t=i(e);if(t)return t;if(t=r.variables.get(e)){e=t.orig[0];if(e instanceof Fe||e instanceof C)return t}}:r.variables?function(e){return i(e)||r.variables.get(e)}:i)}(I,0,he))(e)},M=Object.create(null),l=[],F=Object.create(null),f=Object.create(null),p=Object.create(null),h=Object.create(null),q=Object.create(null),d=(I instanceof Pt&&D.top_retain&&I.variables.each(function(e){!D.top_retain(e)||e.id in F||(Oe.info("Retaining variable {name}",e),F[e.id]=!0,l.push(e))}),new qt),m=new qt,B=this,V=((g=new Ue(function(a,e){if(a instanceof Pe&&a.uses_arguments&&!g.has_directive("use strict")&&a.each_argname(function(e){e=e.definition();e.id in F||(F[e.id]=!0,l.push(e))}),a!==I){if(B===I){var n,i,t,r;if(a instanceof re)return r=a.name.definition(),(t=N&&!r.exported)||r.id in F||(F[r.id]=!0,l.push(r)),(n=g.parent()instanceof oe)?o[r.id]=!0:!t||r.id in f||(f[r.id]=1),a.extends&&a.extends.walk(g),i=[],a.properties.forEach(function(e){e.key instanceof Oe&&e.key.walk(g);var t=e.value;t&&(Mn(e)?(!n&&t.contains_this()&&(n=!0),s(t)):i.push(t))}),i.forEach(t&&n?s:function(e){m.add(r.id,e)}),!0;if(a instanceof le)return r=a.name.definition(),(t=N&&!r.exported)||r.id in F||(F[r.id]=!0,l.push(r)),m.add(r.id,a),g.parent()instanceof oe?(o[r.id]=!0,c(a,e,!0)):(!t||r.id in f||(f[r.id]=1),!0);if(a instanceof it)return a.definitions.forEach(function(i){var r=i.value,s=r&&(i.name instanceof Ee||r.has_side_effects(D)),o=s&&"="==r.tail_node().operator;i.name.mark_symbol(function(e){var t,n;if(e instanceof Tt)return t=e.definition(),q[t.id]=(q[t.id]||0)+1,a instanceof ee&&t.orig[0]instanceof fe&&(n=t.redefined())&&(q[n.id]=(q[n.id]||0)+1),t.id in F||L&&!t.exported&&(a instanceof ie?!t.redefined():!t.const_redefs)&&(a instanceof ee||Li(t))||(F[t.id]=!0,l.push(t)),r&&(s?o&&y(t,e,h[t.id]):m.add(t.id,r),d.add(t.id,i)),b(t),!0},g),s&&r.walk(g)}),!0;if(a instanceof Fe)return r=a.definition(),q[r.id]=(q[r.id]||0)+1,d.add(r.id,a),!0;if(a instanceof pe)return(r=a.definition()).id in F||L&&Li(r)||(F[r.id]=!0,l.push(r)),!0}return c(a,e,!0)}function s(e){var t=B;B=a,e.walk(g),B=t}})).directives=Object.create(D.directives),I.walk(g),D.option("keep_fnames")?He:D.option("ie")?function(e){return!D.exposed(e)&&e.references.length==e.replaced}:function(e){return!(e.id in F)||!(e.orig.length-e.eliminated<2)&&(e.orig[1]instanceof Fe||$e(e.references,function(e){return!e.in_arg}))});D.option("ie")&&m.each(function(e,t){t in F||e.forEach(function(e){e.walk(new Ue(function(e){return e instanceof dt&&e.name&&!V(e.name.definition())?(e.walk(g),!0):e instanceof Le||void 0}))})});for(var g=new Ue(c),e=0;e<l.length;e++){var t=m.get(l[e].id);t&&t.forEach(function(e){e.walk(g)})}Object.keys(j).forEach(function(e){var t,n=j[e];n&&(n=n.reduce(function(t,e){return e.forEach(function(e){de(t,e)}),t},[]),t=(d.get(e)||[]).filter(function(t){return find_if(t instanceof Dt?function(e){return e===t}:function(e){return e===t||!(e instanceof Dt)&&i(e)===i(t)},n)}),n.length==t.length)?j[e]=t:delete j[e]});var z=[],U=[],$=new jt(function(n){if(n instanceof Te)return S($,n);if(n instanceof Ee&&n.rest&&(n.rest=n.rest.transform($)),n instanceof st){for(var e=!n.rest,t=n.elements.length;0<=--t;){var i=n.elements[t].transform($);i?(n.elements[t]=i,e=!1):e?n.elements.pop():n.elements[t]=Ge(ce,n.elements[t])}return n}var r;return n instanceof at?(r=[],n.properties.forEach(function(e){var t=!1;e.key instanceof Oe&&(e.key=e.key.transform(H),t=e.key.has_side_effects(D)),(t||n.rest)&&((t=e.value)instanceof Te?t.name:t)instanceof Tt?(e.value=e.value.transform(H),r.push(e)):(t=!(t=e.value.transform($))&&n.rest?e.value instanceof st?Ge(st,e.value,{elements:[]}):Ge(at,e.value,{properties:[]}):t)&&(e.value=t,r.push(e))}),n.properties=r,n):n instanceof Tt?J(n):void 0}),H=new jt(function(h,t,e){var n,i,d=H.parent();if(L){var r,s,o=[],a=R(h,o);if(a){if(i=h,_=(n=a).definition(),r=!(s=F[_.id])||i[i instanceof xe?"left":"expression"]===n&&(s===n&&_.references.length-_.replaced==1||Y(_,i)<0)?(r=h instanceof xe&&(r=Q(h),!0===h.write_only)?r.drop_side_effect_free(D):r)||Ge(De,h,{value:0}):r)switch(o.assign&&(s=o.assign.drop_side_effect_free(D))&&(s.write_only=!0,o.unshift(s)),d instanceof Re&&d.tail_node()!==h&&!r.has_side_effects(D)||o.push(r),o.length){case 0:return List.skip;case 1:return An(d,h,o[0].transform(H));default:return We(h,o.map(function(e){return e.transform(H)}))}}else if(h instanceof It&&h.expression instanceof qe&&Y(h.expression.definition(),h)<0)return Ge(Be,h,{operator:"+",expression:h.expression})}if(h instanceof we&&"instanceof"==h.operator)return!((a=h.right)instanceof qe)||a.definition().id in F?void 0:(n=h.left.drop_side_effect_free(D),r=Ge(ae,h).optimize(D),n?We(h,[n,r]):r);if(h instanceof ke)return z.push(h),h.args=h.args.map(function(e){return e.transform(H)}),h.expression=h.expression.transform(H),h;if(B===I){if(N&&h!==I&&h instanceof re)if(!((f=h.name.definition()).id in F))return G(h.name,"Dropping unused class {name}"),f.eliminated++,t(h,H),p=vi(h,!0),d instanceof oe?p:(p=p.drop_side_effect_free(D,!0))?Ge(je,h,{body:p}):e?List.skip:Ge(Z,h);if(h instanceof ne&&h.name&&V(h.name.definition())&&(h.name=null),h instanceof Pe){if(N&&h!==I&&h instanceof le)if(!((f=h.name.definition()).id in F))return G(h.name,"Dropping unused function {name}"),f.eliminated++,d instanceof oe?(O(),yi(h,!0)):e?List.skip:Ge(Z,h);if(O(),h instanceof gt&&h.name&&V(h.name.definition())&&(h.name=null),!(h instanceof Je)){var c,u,l=D.drop_fargs(h,d);if(l&&d instanceof ke&&d.expression===h)for(c=d.args,u=0;u<c.length&&!(c[u]instanceof Me);u++);for(var f,p,m,g=h.argnames,_=h.rest,v=!1,y=!1,b=(_&&(y=!0,!c||u<g.length||_ instanceof Fe?_=_.transform($):(_=(p=X(_,Ge(be,d,{elements:c.slice(g.length)}),J,!h.uses_arguments,_)).name,c.length=g.length,p.value.elements.length&&[].push.apply(c,p.value.elements)),_ instanceof Ee&&!_.rest&&(_ instanceof st?0==_.elements.length&&(_=null):0==_.properties.length&&(_=null)),h.rest=_)&&(v=!(l=!1)),l?-1:h.length()),x=c&&!h.uses_arguments&&d!==D.parent(),w=g.length;0<=--w;)(a=g[w])instanceof Fe?(f=a.definition()).id in F?(l=!1,Y(f,a)<0&&(a.unused=null)):(l&&(G(a,"Dropping unused function argument {name}"),g.pop(),f.eliminated++),a.unused=!0):(y=!0,!c||u<w?m=a.transform($):(m=(p=X(a,c[w],J,x,a)).name,p.value&&(c[w]=p.value)),m?(l=!1,g[w]=m,v=v||!(m instanceof Fe)):l?(W(a,"Dropping unused default argument {name}"),g.pop()):b<w?(W(a,"Dropping unused default argument assignment {name}"),a.name instanceof Fe?a.name.unused=!0:v=!0,g[w]=a.name):(W(a,"Dropping unused default argument value {name}"),g[w]=a=a.clone(),a.value=Ge(De,a,{value:0}),v=!0));y&&!v&&h.uses_arguments&&!H.has_directive("use strict")&&(h.rest=Ge(st,h,{elements:[]})),U.push(h)}return h}if(h instanceof te&&h.argname instanceof Ee&&h.argname.transform($),!(h instanceof it)||d instanceof ht&&d.init===h)return h instanceof xe?(t(h,H),h.left instanceof Ee?(p=X(h.left,h.right,function(e){return e},!0===h.write_only)).name?Ge(xe,h,{operator:h.operator,left:p.name,right:p.value}):p.value||(d instanceof Re&&d.tail_node()!==h?List.skip:Ge(De,h,{value:0})):h):h instanceof ue&&h.body instanceof pt?(t(h,H),h.body instanceof Se?(i=h.body,h.body=i.body.pop(),i.body.push(h),e?List.splice(i.body):i):h):h instanceof Le?(O(),h):h instanceof pe?!D.option("imports")||h.definition().id in F?h:e?List.skip:null:void 0;var S=[],k=[],A=[],T=[],E=0,C=h instanceof ee;switch(h.definitions.forEach(function(e){e.value&&(e.value=e.value.transform(H));var t=e.value;if(e.name instanceof Ee)(c=X(e.name,t,function(e){return!L||e.definition().id in F||f(e)||C&&!Ht(e)?e:null},!0)).name?(e=Ge(ze,e,{name:c.name,value:t=c.value}),p()):c.value&&T.push(c.value);else{var n,i,r,s,o,a=e.name.definition(),c=C?Ht(e.name):Li(a);if(!c||!L||a.id in F)if(t&&((s=Y(a,e))<0||(o=t.tail_node())instanceof qe&&o.definition()===a)&&(e=e.clone(),(t=t.drop_side_effect_free(D))&&Oe.warn("Side effects in definition of variable {name} [{start}]",e.name),h instanceof ie?e.value=t||Ge(De,e,{value:0}):(e.value=null,t&&T.push(t)),t=null,0<=s)&&(j[a.id][s]=e),t||h instanceof _t)if(D.option("functions")&&!D.option("ie")&&c&&t&&1==q[a.id]&&0==a.assignments&&(o=t.tail_node())instanceof gt&&!$t(a)&&!Mt(o)&&(r=o,0==(s=a.references).length?r===e.name.fixed_value():$e(s,function(e){return r===e.fixed_value()}))&&(i=o,C&&!D.has_directive("use strict")&&i instanceof dt?d instanceof Ke||d instanceof pt&&d.init===h||d instanceof Ce:d instanceof Le)&&!1!==(i=function(n,i){if(!n.name)return null;var r,e=n.name.definition();if(1<e.orig.length)return null;if(0<e.assignments)return!1;if(e.name==i)return e;if(D.option("keep_fnames"))return!1;switch(i){case"await":r=is_async;break;case"yield":r=Ft}return $e(e.references,function(e){var t=e.scope;if(t.find_variable(i)!==a)return!1;if(r)do{if(t=t.resolve(),r(t))return!1}while(t!==n&&(t=t.parent_scope));return!0})&&e}(o,e.name.name))){switch(Oe.warn("Declaring {name} as function [{start}]",e.name),o.CTOR){case AST_AsyncFunction:n=AST_AsyncDefun;break;case AST_AsyncGeneratorFunction:n=AST_AsyncGeneratorDefun;break;case dt:n=rt;break;case AST_GeneratorFunction:n=AST_GeneratorDefun}var u=Ge(n,o),l=(u.name=Ge(Et,e.name),e.name.scope.resolve().def_function(u.name));i&&i.forEach(function(e){e.name=l.name,e.thedef=l,e.reference()}),S.push(u),t!==o&&[].push.apply(T,t.expressions.slice(0,-1))}else c&&1<q[a.id]&&!(d instanceof se)&&a.orig.indexOf(e.name)>a.eliminated&&(q[a.id]--,E++),p();else d instanceof se?p():c&&1<q[a.id]?(Oe.info("Dropping declaration of variable {name} [{start}]",e.name),q[a.id]--,a.eliminated++):k.push(e);else f(e.name)?((t=t&&t.drop_side_effect_free(D))&&T.push(t),1<q[a.id]?(Oe.warn("Dropping duplicated declaration of variable {name} [{start}]",e.name),q[a.id]--,a.eliminated++):(e.value=null,k.push(e))):((t=t&&t.drop_side_effect_free(D))?(Oe.warn("Side effects in initialization of unused variable {name} [{start}]",e.name),T.push(t)):G(e.name,"Dropping unused variable {name}"),a.eliminated++)}function f(e){var t=e.definition();return t.orig[0]instanceof fe&&t.scope.resolve()===e.scope.resolve()}function p(){0<T.length&&(0==A.length?S.push(Ge(je,h,{body:We(h,T)})):t?(T.push(t),e.value=We(t,T)):e.value=Ge(Be,e,{operator:"void",expression:We(e,T)}),T=[]),A.push(e)}}),k.length){case 0:if(0==A.length)break;if(A.length==E){[].unshift.apply(T,A.map(function(e){Oe.info("Dropping duplicated definition of variable {name} [{start}]",e.name);var t=e.name.definition(),n=Ge(qe,e.name),n=(t.references.push(n),Ge(xe,e,{operator:"=",left:n,right:e.value})),e=Y(t,e);return 0<=e&&(j[t.id][e]=n),t.assignments++,t.eliminated++,n}));break}case 1:if(0==A.length){var P=k[0].name.definition().id;if(P in M){h.definitions=k,M[P].init=h;break}}default:0<A.length&&(P=A[0].value)instanceof Re&&(A[0].value=P.tail_node(),S.push(Ge(je,h,{body:We(P,P.expressions.slice(0,-1))}))),h.definitions=k.concat(A),S.push(h)}return 0<T.length&&S.push(Ge(je,h,{body:We(h,T)})),K(S,h,e)}function O(){var e=B;t(B=h,H),B=e}},function(e,t){if(e instanceof Se)return di(e,H.parent(),t);if(e instanceof se)return(n=e.body)instanceof Se?(e.body=n.body.pop(),n.body.push(e),t?List.splice(n.body):n):void 0;if(e instanceof pt)return Vn(e,t);if(e instanceof k){if(!L||!D.option("loops"))return;if(!Dn(e.body))return;var n=x(e);if(!n)return;var i=n.definition();if(i.id in F)return;G(n,"Dropping unused loop variable {name}"),M[i.id]===e&&delete M[i.id];var n=[],r=e.object.drop_side_effect_free(D);return r&&(Oe.warn("Side effects in object of for-in loop [{start}]",r),n.push(Ge(je,e,{body:r}))),e.init instanceof it&&i.orig[0]instanceof fe&&n.push(e.init),K(n,e,t)}return e instanceof T?(e.properties&&0==e.properties.length&&(e.properties=null),e):e instanceof Re&&!(1<e.expressions.length)?An(H.parent(),e,e.expressions[0]):void 0});H.push(D.parent()),H.directives=Object.create(D.directives),I.transform(H),I instanceof Pe&&1==I.body.length&&I.body[0]instanceof w&&"use strict"==I.body[0].value&&(I.body.length=0),z.forEach(function(e){Vi(e,D,U)})}function G(e,t){Oe[0<e.definition().references.length?"info":"warn"](t+" [{start}]",e)}function W(e,t){e.name instanceof Fe?G(e.name,t):Oe.info(t+" [{start}]",e)}function i(e){return e[e instanceof xe?"right":"value"]}function K(e,t,n){switch(e.length){case 0:return n?List.skip:Ge(Z,t);case 1:return e[0];default:return n?List.splice(e):Ge(Se,t,{body:e})}}function _(e,t){return e.scope.resolve()===I&&(e.fixed&&t.fixed||(j[e.id]=!1),!1!==j[e.id])}function v(e,t){j[e.id]||(j[e.id]=[]),t.fixed.assigns&&de(j[e.id],t.fixed.assigns)}function Y(e,t){e=j[e.id];return e&&e.indexOf(t)}function b(e){1<f[e.id]&&!(e.id in F)&&(F[e.id]=!0,l.push(e)),f[e.id]=0}function y(e,t,n){e.id in F||(t&&n?(F[e.id]=t,l.push(e)):(p[e.id]=t,h[e.id]=n))}function Q(e){var t=e.right;return!e.write_only||!(t instanceof we&&Ye[t.operator])||!(t.left instanceof qe)||!(e.left instanceof qe)||(e=e.left.definition(),t.left.definition()!==e)||t.right.has_side_effects(D)?t:(_(e,t.left)&&v(e,t.left),t.right)}function x(e){var t=e.init;if(t instanceof it)return(t=t.definitions[0].name)instanceof Tt&&t;for(;t instanceof Ie;)t=t.expression.tail_node();return t instanceof qe?t:void 0}function c(e,t,n){e instanceof xe&&e.left instanceof qe&&(r=e.left.definition()).scope.resolve()===I&&d.add(r.id,e),e instanceof qe&&e.in_arg&&(q[e.definition().id]=0),e instanceof Dt&&e.expression instanceof qe&&(r=e.expression.definition()).scope.resolve()===I&&d.add(r.id,e);var i,r,s,o=[],a=R(e,o);if(a)return(s=a.definition()).scope.resolve()!==I&&I.variables.get(a.name)!==s||$t(s)&&!$e(I.argnames,function(e){return!e.match_symbol(function(e){if(e instanceof Fe)return(e=e.definition()).references.length>e.replaced},!0)})||"p"===e.write_only&&e.right.may_throw_on_access(D,!0)?void 0:((c=o.assign)&&(c.write_only=!0,c.walk(g)),o.forEach(function(e){e.walk(g)}),e instanceof xe&&(c=Q(e),o=!1,n&&!0===e.write_only&&!c.has_side_effects(D)?m.add(s.id,c):(c.walk(g),o="="==c.tail_node().operator),e.left===a?e.write_only&&!o||y(s,a,h[s.id]):(n=a.fixed_value())&&n.is_constant()||y(s,p[s.id],!0)),_(s,a)&&Vt(a,e)!==a&&v(s,a),b(s),!0);if(e instanceof we)return"instanceof"==e.operator&&(a=e.right)instanceof qe&&(i=a.definition().id,f[i])?(e.left.walk(g),f[i]++,!0):void 0;if(e instanceof k){if(e.init instanceof qe&&B===I&&((i=e.init.definition().id)in M||(M[i]=e)),!L||!D.option("loops"))return;if(!Dn(e.body))return;if(e.init.has_side_effects(D))return;if(!(a=x(e)))return;if((r=a.definition()).scope.resolve()!==I){var c=u(a.name);if(c===r||c&&c.redefined()===r)return}return e.object.walk(g),!0}return e instanceof qe?((s=e.definition()).id in F||(F[s.id]=!0,l.push(s)),!ge(s.scope,e.scope)||!(o=s.redefined())||o.id in F||(F[o.id]=!0,l.push(o)),_(s,e)&&v(s,e),!0):e instanceof Le?(n=B,B=e,t(),B=n,!0):void 0}function J(e){return e.definition().id in F?e:(e instanceof Fe&&(e.unused=!0),null)}function S(e,t){if(t.value=t.value.transform(H),!t.name.transform(e)){if(t.name instanceof Ee)return null;e=t.value.drop_side_effect_free(D);if(!e)return null;G(t.name,"Side effects in default value of unused variable {name}"),(t=t.clone()).name.unused=null,t.value=e}return t}function X(e,g,_,v,y){var b=new jt(function(r){if(r instanceof Te){if(!(D.option("default_values")&&g&&g.is_defined(D)))return n=v,v=!1,t=S(b,r),v=n,!t&&v&&(g=g&&g.drop_side_effect_free(D)),t;r===y?y=r=r.name:r=r.name}if(r instanceof st){var e,t,n=v,i=g,s=(g instanceof qe&&(v=!1,g=g.fixed_value()),f=g instanceof be?(e=!0,g.elements):(e=g&&g.is_string(D),!1),[]),o=v&&[],a=0;if(r.elements.forEach(function(e,t){(g=f&&f[t])instanceof ce?g=null:g instanceof Me&&(v&&(o.length=a,_i(i,o),[].push.apply(o,f.slice(t)),i.elements=o),g=f=!1),(e=e.transform(b))&&(s[a]=e),v&&g&&(o[a]=g),!e&&!g&&v&&f||a++}),g=f&&Ge(be,i,{elements:f.slice(r.elements.length)}),r.rest&&(t=v,v=!1,r.rest=r.rest.transform(D.option("rests")?b:H),v=t,r.rest)&&(s.length=a),v&&(g=(g=g&&!r.rest?g.drop_side_effect_free(D):g)instanceof be?g.elements:g instanceof Re?g.expressions:g&&[g])&&g.length&&(o.length=a,[].push.apply(o,g)),g=i,v=n,f&&o&&(_i(g,o),(g=g.clone()).elements=o),e){if(!r.rest)switch(s.length){case 0:if(r===y)break;return v&&(g=g.drop_side_effect_free(D)),null;case 1:if(!v)break;if(r===y)break;var c=s[0];if(c.has_side_effects(D))break;if(g.has_side_effects(D)&&c.match_symbol(function(e){return e instanceof Ie}))break;return g=Ge(St,r,{expression:g,property:Ge(De,r,{value:0})}),c}}else s.length=r.elements.length;_i(r,s),r.elements=s}else if(r instanceof at){var u,l,f,n=v,i=g,p=(g instanceof qe&&(v=!1,g=g.fixed_value()),g instanceof yt&&(u=[],l=new qt,f=g.properties.map(function(e,t){var n;return(e=e.clone())instanceof Me?l=!1:((n=(n=e.key)instanceof Oe?n.evaluate(D,!0):n)instanceof Oe?l=!1:!l||e instanceof AST_ObjectSetter||l.set(n,e),u[t]=n),e})),r.rest&&(g=!1,r.rest=r.rest.transform(D.option("rests")?b:H)),new qt),h=v&&new qt,d=[];if(r.properties.map(function(e){var t=e.key;return t instanceof Oe&&(e.key=t=t.transform(H),t=t.evaluate(D,!0)),t instanceof Oe?h=!1:p.set(t,!p.has(t)),t}).forEach(function(e,t){var n,i,t=r.properties[t];e instanceof Oe?(g=v=!1,n=t.value.transform(b)||w(t.value)):(v=h&&p.get(e),(!(i=l&&l.get(e))||(g=i.value)instanceof Je)&&(g=!1),(n=t.value.transform(b))?h&&h.set(e,!1):((r.rest||x(t))&&(n=w(t.value)),h&&!h.has(e)&&(i?(h.set(e,i),null===g&&l.set(e,x(i)&&Ge(bt,i,{key:i.key,value:Ge(De,i,{value:0})}))):h.set(e,!0))),g&&(i.value=g)),n&&(t.value=n,d.push(t))}),g=i,v=n,h&&u&&((g=g.clone()).properties=List(f,function(e,t){if(e instanceof Me)return e;t=u[t];if(t instanceof Oe)return e;if(h.has(t)){var n=h.get(t);if(!n)return e;if(n===e)return l.get(t)||List.skip}else if(r.rest)return e;n=e.value.drop_side_effect_free(D);return n?(e.value=n,e):x(e)?Ge(bt,e,{key:e.key,value:Ge(De,e,{value:0})}):List.skip})),g&&!r.rest)switch(d.length){case 0:if(r===y)break;if(g.may_throw_on_access(D,!0))break;return v&&(g=g.drop_side_effect_free(D)),null;case 1:if(!v)break;if(r===y)break;var m=d[0];if(m.key instanceof Oe)break;if(m.value.has_side_effects(D))break;if(g.has_side_effects(D)&&m.value.match_symbol(function(e){return e instanceof Ie}))break;return g=Ge(St,r,{expression:g,property:Sn(m.key,m)}),m.value}r.properties=d}else!(r=r instanceof ce?null:_(r))&&v&&(g=g&&g.drop_side_effect_free(D));return r});return{name:e.transform(b),value:g};function x(e){return e.key instanceof Oe&&e.key.has_side_effects(D)}function w(e){return e instanceof Te?w(e.name):e instanceof Ee?(null===g?g=Ge(De,e,{value:0}):g&&(g.may_throw_on_access(D,!0)?g=Ge(be,e,{elements:g instanceof Re?g.expressions:[g]}):function e(t){t instanceof xe?(t.write_only=!1,e(t.right)):t instanceof we?Ye[t.operator]&&(e(t.left),e(t.right)):t instanceof Ae?(e(t.consequent),e(t.alternative)):t instanceof Re?e(t.tail_node()):t instanceof Dt&&(t.write_only=!1)}(g)),Ge(at,e,{properties:[]})):(e.unused=null,e)}}}),Le.DEFMETHOD("hoist_declarations",function(o){var a,c,u,t,l,f,p,h,d,n;!o.has_directive("use asm")&&(a=o.option("hoist_funs"),c=o.option("hoist_vars"),u=this,c&&(t=0,u.walk(new Ue(function(e){return 1<t||e instanceof se||e instanceof Le&&e!==u||(e instanceof ee?(t++,!0):void 0)})),t<=1)&&(c=!1),a||c)&&(l=new qt,f=[],p=[],h=new qt,d=new jt(function(e,t,n){if(e!==u){if(e instanceof w)return f.push(e),n?List.skip:Ge(Z,e);var i;if(e instanceof le)return!a||(i=d.parent())instanceof se||i instanceof oe||i!==u&&o.has_directive("use strict")?e:(p.push(e),n?List.skip:Ge(Z,e));if(e instanceof ee){if(!c)return e;if((i=d.parent())instanceof se)return e;if(!$e(e.definitions,function(e){e=e.name;return e instanceof AST_SymbolVar&&!l.has(e.name)&&u.find_variable(e.name)===e.definition()}))return e;e.definitions.forEach(function(e){h.set(e.name.name,e)});var r,s=e.to_assignments();return i instanceof ht&&i.init===e?s||(r=e.definitions[0].name,Ge(qe,r)):i instanceof pt&&i.init===e?s:s?Ge(je,e,{body:s}):n?List.skip:Ge(Z,e)}return e instanceof Le?e:e instanceof O?(l.set(e.name,!0),e):void 0}}),u.transform(d),0<h.size()&&(n=[],u instanceof Pe&&u.each_argname(function(e){$e(e.definition().references,function(e){return!e.in_arg})&&h.del(e.name)}),h.each(function(e,t){(e=e.clone()).name=e.name.clone(),e.value=null,n.push(e),h.set(t,e),e.name.definition().orig.unshift(e.name)}),0<n.length)&&p.push(Ge(ee,u,{definitions:n})),u.body=f.concat(p,u.body))}),Le.DEFMETHOD("process_returns",he),rt.DEFMETHOD("process_returns",function(e){if(e.option("booleans")&&!(e.parent()instanceof oe))switch(wi(this.name.definition(),xi(this),e)){case"d":Ai(e,this,!0);break;case!0:Si(this,e)}}),dt.DEFMETHOD("process_returns",function(t){if(t.option("booleans")){var n=!0,i=xi(this);if(!this.name||u(this.name.definition())){var e=t.parent();if(e instanceof xe){if("="!=e.operator)return;if(!((s=e.left)instanceof qe))return;if(!u(s.definition()))return}else if(e instanceof ke&&e.expression!==this){var r=e.expression;if(!((r=r instanceof qe?r.fixed_value():r)instanceof Pe))return;if(r.uses_arguments||r.pinned())return;for(var s,o=e.args,a=0;a<o.length;a++){var c=o[a];if(c===this){if(!(s=r.argnames[a])&&r.rest)return;break}if(c instanceof Me)return}if((s=s instanceof Te?s.name:s)instanceof Fe&&!u(s.definition()))return}else{if("Call"!=e.TYPE)return;t.pop();e=t.in_boolean_context();switch(t.push(this),e){case!0:n=!1;case"d":break;default:return}}n?Ai(t,this,!0):Si(this,t)}}function u(e){switch(wi(e,i,t)){case!0:n=!1;case"d":return 1}}}),Qe.DEFMETHOD("var_names",function(){var n=this._var_names;return n||(this._var_names=n=new qt,this.enclosed.forEach(function(e){n.set(e.name,!0)}),this.variables.each(function(e,t){n.set(t,!0)})),n}),Le.DEFMETHOD("make_var",function(e,t,n){for(var i=[this],r=(t instanceof Tt&&t.definition().references.forEach(function(e){var t=e.scope;do{if(!de(i,t))return}while((t=t.parent_scope)&&t!==this)}),n=n.replace(/^[^a-z_$]|[^a-z0-9_$]/gi,"_")),s=0;!$e(i,function(e){return!e.var_names().has(r)});s++)r=n+"$"+s;var e=Ge(e,t,{name:r,scope:this}),o=this.def_variable(e);return i.forEach(function(e){e.enclosed.push(o),e.var_names().set(r,!0)}),e}),Le.DEFMETHOD("hoist_properties",function(r){var c,s,u,l;function f(e,t,n){var i;return!(e instanceof At)||(i=e.definition()).assignments!=n||i.references.length-i.replaced==n||i.single_use||c.find_variable(e.name)!==i||s(i)||e.fixed_value()!==t||(n=e.fixed||i.fixed).direct_access?void 0:(!n.escaped||1!=n.escaped.depth)&&t instanceof yt&&0<t.properties.length&&Ht(e,r)&&$e(t.properties,function(e){return sr(e)&&"__proto__"!==e.key})}!r.option("hoist_props")||r.has_directive("use asm")||(c=this,Mt(c)&&c.value)||(s=c instanceof Pt&&r.top_retain||He,u=Object.create(null),l=new jt(function(n,e){if(n instanceof xe){if("="!=n.operator)return;if(!n.write_only)return;if(!f(n.left,n.right,1))return;e(n,l);var i=new qt,r=[],s=[];return n.right.properties.forEach(function(e){var t=a(AST_SymbolVar,n.left,e.key),t=(s.push(Ge(ze,n,{name:t,value:null})),Ge(qe,n,{name:t.name,scope:c,thedef:t.definition()}));t.reference(),r.push(Ge(xe,n,{operator:"=",left:t,right:e.value}))}),i.value=n.right,u[n.left.definition().id]=i,c.body.splice(c.body.indexOf(l.stack[1])+1,0,Ge(ee,n,{definitions:s})),We(n,r)}var t,o;if(n instanceof Le)return n===c||"Call"==(o=l.parent()).TYPE&&o.expression===n?void 0:n;if(n instanceof ze&&f(n.name,n.value,0))return e(n,l),i=new qt,t=[],(o=n.clone()).value=n.name instanceof O?Ge(De,n,{value:0}):null,t.push(o),n.value.properties.forEach(function(e){t.push(Ge(ze,n,{name:a(n.name.CTOR,n.name,e.key),value:e.value}))}),i.value=n.value,u[n.name.definition().id]=i,List.splice(t);function a(e,t,n){e=c.make_var(e,t,t.name+"_"+n);return i.set(n,e.definition()),e}}),c.transform(l),c.transform(new jt(function(e,t){var n;if(e instanceof Ie)return!(e.expression instanceof qe&&(i=u[e.expression.definition().id])&&e.expression.fixed_value()===i.value)?void 0:(n=i.get(e.get_property()),(n=Ge(qe,e,{name:n.name,scope:e.expression.scope,thedef:n})).reference(),n);if(e instanceof qe){var i=u[e.definition().id];if(i&&e.fixed_value()===i.value)return Ge(yt,e,{properties:[]})}})))}),(e=function(e,t){e.DEFMETHOD("drop_side_effect_free",t)})(Oe,z),e(Je,V),e(be,function(e,t){e=Ti(this.elements,e,t,Ei);return e?e===this.elements&&$e(e,function(e){return e instanceof Me})?this:We(this,e.map(Ci)):null}),e(xe,function(e){var t=this.left;if(t instanceof Ie){var n=t.expression;if(n.may_throw_on_access(e,!0))return this;if(e.has_directive("use strict")&&n.is_constant())return this}return!t.has_side_effects(e)&&!Ye[this.operator.slice(0,-1)]&&(this.write_only=!0,root_expr(t).is_constant_expression(e.find_parent(Le)))?this.right.drop_side_effect_free(e):this}),e(Xe,function(e){if(!e.option("awaits"))return this;var t=this.expression;if(!Yi(e,t))return this;var n=(t=t instanceof Be&&"!"==t.operator?t.expression:t).drop_side_effect_free(e);if(n===t)return this;n?Yi(e,n)||(n=n.negate(e)):n=Ge(De,t,{value:0});e=this.clone();return e.expression=n,e}),e(we,function(e,t){var n,i,r,s,o=this.left,a=this.right,c=this.operator;return Wi(c,a,e)?(n=a.drop_side_effect_free(e,t))?Ye[c]&&n.has_side_effects(e)?(i=this,n!==a&&((i=i.clone()).right=n.drop_side_effect_free(e)),"??"==c?i:((a=i.clone()).operator="&&"==c?"||":"&&",a.left=o.negate(e,t),(r=a.right.tail_node())instanceof we&&a.operator==r.operator&&Ki(a),r=t?Xn:Jn,"&&"==c?r(i,a):r(a,i))):(s=o.drop_side_effect_free(e,t))?(n=n.drop_side_effect_free(e))?We(this,[s,n]):s:n:o.drop_side_effect_free(e,t):(s=o.drop_side_effect_free(e,t))===o?this:((i=this.clone()).left=s||Ge(De,o,{value:0}),i)}),e(ke,function(e,t){var n=this;if(n.is_expr_pure(e))return n.pure&&Oe.warn("Dropping __PURE__ call [{start}]",n),(i=Ti(n.args,e,t,Ei))&&We(n,i.map(Ci));var i=n.expression;if(n.is_call_pure(e))return(c=n.args.slice()).unshift(i.expression),(c=Ti(c,e,t,Ei))&&We(n,c.map(Ci));if(e.option("yields")&&Ft(i)){var r=n.clone(),s=(r.expression=Ge(dt,i),r.expression.body=[],r.transform(e));if(s!==r)return s.drop_side_effect_free(e,t)}var o,a,r=Ai(e,i);if(r&&((n=n.clone()).expression=r,i._squeezed)&&(n.expression._squeezed=!0),n instanceof p){var c,s=i;if((s=s instanceof qe?s.fixed_value():s)instanceof Pe){if(o=e,(r=s).new=!0,a=$e(r.body,function(e){return!e.has_side_effects(o)})&&$e(r.argnames,function(e){return!e.match_symbol(He)})&&!(r.rest&&r.rest.match_symbol(He)),r.new=!1,a)return(c=n.args.slice()).unshift(i),(c=Ti(c,e,t,Ei))&&We(n,c.map(Ci));s.contains_this()||((n=Ge(ke,n)).expression=n.expression.clone(),n.args=n.args.slice())}}return n.call_only=!0,n}),e(ne,function(e,t){for(var n=this,i=[],r=[],s=0,o=n.properties,a=0;a<o.length;a++){var c=o[a];if(c.key instanceof Oe&&i.push(c.key),Mn(c)){var u=c.value;if(u.has_side_effects(e)){if(u.contains_this())return n;c instanceof AST_ClassInit?(s++,r.push(c)):r.push(u)}}}var l=n.extends;if(!l||(l=!Ut(l=l instanceof qe?l.fixed_value():l))||i.unshift(n.extends),i=Ti(i,e,t),r=Ti(r,e,t=i?!1:t),!i){if(!l&&!r&&!n.name)return null;i=[]}return l||n.name||!e.has_directive("use strict")?(t=vi(n),l||(t.extends=null),t.properties=[],r?r.length==s?(i.length&&r.unshift(Ge(AST_ClassField,n,{key:We(n,i),value:null})),t.properties=r):t.properties.push(Ge(AST_ClassField,n,{static:!0,key:i.length?We(n,i):"c",value:f()})):i.length&&t.properties.push(Ge(AST_ClassMethod,n,{key:We(n,i),value:Ge(dt,n,{argnames:[],body:[]}).init_vars(t)})),t):(r&&i.push(Ge(ke,n,{expression:Ge(d,n,{argnames:[],body:[],value:f()}).init_vars(n.parent_scope),args:[]})),We(n,i));function f(){return We(n,r.map(function(e){var t;return e instanceof AST_ClassInit?((t=Ge(d,e.value)).argnames=[],Ge(ke,e,{expression:t,args:[]})):e}))}}),e(Ae,function(e){var t,n,i=this.consequent.drop_side_effect_free(e),r=this.alternative.drop_side_effect_free(e);return i===this.consequent&&r===this.alternative?this:(e.option("ie")&&(t=[],i instanceof dt&&(t.push(i),i=null),r instanceof dt)&&(t.push(r),r=null),i?r?((n=this.clone()).consequent=i,n.alternative=r):n=Ge(we,this,{operator:"&&",left:this.condition,right:i}):n=r?Ge(we,this,{operator:"||",left:this.condition,right:r}):this.condition.drop_side_effect_free(e),t?(n&&t.push(n),0==t.length?null:We(this,t)):n)}),e(A,V),e(ut,function(e,t){var n=this.expression;return n.may_throw_on_access(e)?this:n.drop_side_effect_free(e,t)}),e(dt,function(e){return ki(this,e)?null:this}),e(gt,V),e(yt,function(e,t){var n=[],e=(this.properties.forEach(function(e){e instanceof Me?n.push(e):(e.key instanceof Oe&&n.push(e.key),n.push(e.value))}),Ti(n,e,t,function(e,t,n){var i=e.expression;return i.safe_to_spread()?i.drop_side_effect_free(t,n):e}));return e?e!==n||$e(e,function(e){return!(e instanceof Me)})?We(this,e.map(function(e){return e instanceof Me?Ge(yt,e,{properties:[e]}):e})):this:null}),e(wt,V),e(Re,function(e,t){var n,i,r,s=Ti(this.expressions,e,t);return s?(n=s[r=s.length-1],e.option("awaits")&&0<r&&n instanceof Xe&&n.expression.is_constant()&&(i=(s=s.slice(0,-1))[--r],n.expression=Yi(e,i)?i:i.negate(e),s[r]=n),e.option("conditionals")&&0<r&&(i=s[r-1])instanceof xe&&"="==i.operator&&(r=i.left)instanceof qe&&(r=Hi(e,r.definition(),i.right,n))&&((i=i.clone()).right=r,(s=s.slice(0,-2)).push(i.drop_side_effect_free(e,t))),s===this.expressions?this:We(this,s)):null}),e(St,function(e,t){var n,i=this.expression;return i.may_throw_on_access(e)?this:(n=this.property,(i=i.drop_side_effect_free(e,t))?(n=n.drop_side_effect_free(e))?We(this,[i,n]):i:n.drop_side_effect_free(e,t))}),e(qe,function(e){return this.is_declared(e)&&Ht(this,e)?null:this}),e(Ct,function(e,t){var n,i=this;return i.is_expr_pure(e)?0==(n=i.expressions).length?null:We(i,n).drop_side_effect_free(e,t):((t=Ai(e,n=i.tag))&&((i=i.clone()).tag=t,n._squeezed)&&(i.tag._squeezed=!0),i)}),e(Dt,function(e,t){var n,i=this.expression;return unary_side_effects[this.operator]?(this.write_only=!i.has_side_effects(e),this):"typeof"==this.operator&&i instanceof qe&&Ht(i,e)?null:(n=i.drop_side_effect_free(e,t),t&&n&&Ln(n)?n===i&&"!"==this.operator?this:n.negate(e,t):n)}),t(je,function(e,t){if(t.option("side_effects")){var n=e.body,t=n.drop_side_effect_free(t,!0);if(!t)return Oe.warn("Dropping side-effect-free statement [{start}]",e),Ge(Z,e);if(t!==n)return Ge(je,e,{body:t})}return e}),t(Nt,function(e,t){return t.option("loops")?Ge(pt,e).optimize(t):e}),t(ct,function(n,e){if(!e.option("loops"))return n;var t=Di(e,n.condition);if(!(t instanceof Oe)){if(t&&!Pi(n,e.parent(),L))return Ge(pt,n,{body:Ge(Se,n.body,{body:[n.body,Ge(je,n.condition,{body:n.condition})]})}).optimize(e);if(!Pi(n,e.parent()))return Ge(Se,n.body,{body:[n.body,Ge(je,n.condition,{body:n.condition})]}).optimize(e)}if(n.body instanceof Se&&!Pi(n,e.parent(),L)){for(var i=n.body.body,r=i.length;0<=--r;){var s=i[r];if(s instanceof Ce&&!s.alternative&&s.body instanceof N&&e.loopcontrol_target(s.body)===n){if(o(s.condition))break;n.condition=Ge(we,n,{operator:"&&",left:s.condition.negate(e),right:n.condition}),i.splice(r,1)}else if(s instanceof je){if(o(s.body))break;n.condition=We(n,[s.body,n.condition]),i.splice(r,1)}else if(!qn(s,!0))break}n.body=di(n.body,e.parent())}return n.body instanceof Z?Ge(pt,n).optimize(e):n.body instanceof je?Ge(pt,n,{condition:We(n.condition,[n.body.body,n.condition]),body:Ge(Z,n)}).optimize(e):n;function o(e){var t=!1;return e.walk(new Ue(function(e){return!!t||(e instanceof qe?(Bt(e.definition(),n.enclosed)||(t=!0),!0):void 0)})),t}}),t(pt,function(e,t){if(!t.option("loops"))return e;if(t.option("side_effects")&&(e.init&&(e.init=e.init.drop_side_effect_free(t)),e.step)&&(e.step=e.step.drop_side_effect_free(t)),e.condition){var n=Di(t,e.condition);if(n)n instanceof Oe||(e.body=Ge(Se,e.body,{body:[Ge(je,e.condition,{body:e.condition}),e.body]}),e.condition=null);else if(t.option("dead_code"))return n=[],is_statement(e.init)?n.push(e.init):e.init&&n.push(Ge(je,e.init,{body:e.init})),n.push(Ge(je,e.condition,{body:e.condition})),Un(t,e.body,n),Ge(Se,e,{body:n}).optimize(t)}return function t(n,i){var e=o(n.body);if(i.option("dead_code")&&(e instanceof N||e instanceof L&&a(e)||e instanceof ft))return r=[],is_statement(n.init)?r.push(n.init):n.init&&r.push(Ge(je,n.init,{body:n.init})),s=a(e)||e instanceof ft,n.condition&&s?r.push(Ge(Ce,n,{condition:n.condition,body:e,alternative:null})):n.condition?r.push(Ge(je,n.condition,{body:n.condition})):s&&r.push(e),Un(i,n.body,r),Ge(Se,n,{body:r});if(e instanceof Ce){var r,s=o(e.body);if(s instanceof N&&!a(s))return n.condition?n.condition=Ge(we,n.condition,{left:n.condition,operator:"&&",right:e.condition.negate(i)}):n.condition=e.condition.negate(i),r=On(e.alternative),Un(i,e.body,r),c(r);if((s=o(e.alternative))instanceof N&&!a(s))return n.condition?n.condition=Ge(we,n.condition,{left:n.condition,operator:"&&",right:e.condition}):n.condition=e.condition,r=On(e.body),Un(i,e.alternative,r),c(r)}return n;function o(e){return e instanceof Se?e.body[0]:e}function a(e){return i.loopcontrol_target(e)!==i.self()}function c(e){return n.body instanceof Se?(n.body=n.body.clone(),n.body.body=e.concat(n.body.body.slice(1)),n.body=n.body.transform(i)):n.body=Ge(Se,n.body,{body:e}).transform(i),t(n,i)}}(e,t)}),t(ht,function(e,t){var n;return t.option("varify")&&Cn(e.init)&&((n=e.init.definitions[0].name)instanceof Ee||n instanceof D)&&!n.match_symbol(function(e){if(e instanceof Tt)return!Zi(e=e.definition())||Ri(t,e)},!0)&&(e.init=ji(e.init,e.resolve())),e}),t(Ce,function(e,u){if(Dn(e.alternative)&&(e.alternative=null),u.option("conditionals")){if(u.option("booleans")&&!e.condition.has_side_effects(u)&&Ii(u,e.condition),u.option("dead_code")){var t=Di(u,e.condition);if(!t)return Oe.warn("Condition always false [{start}]",e.condition),d=[Ge(je,e.condition,{body:e.condition}).transform(u)],Un(u,e.body,d),e.alternative&&d.push(e.alternative),Ge(Se,e,{body:d}).optimize(u);if(!(t instanceof Oe))return Oe.warn("Condition always true [{start}]",e.condition),d=[Ge(je,e.condition,{body:e.condition}).transform(u),e.body],e.alternative&&Un(u,e.alternative,d),Ge(Se,e,{body:d}).optimize(u)}var t=e.condition.negate(u),n=e.condition.print_to_string().length,i=t.print_to_string().length,r=i<n,s=(e.alternative&&r&&(r=!1,e.condition=t,s=e.body,e.body=e.alternative,e.alternative=Dn(s)?null:s),[]),o=[],a=[],c=C(e.body,s,o,a),l=[],f=[],p=[],h=C(e.alternative,l,f,p);if(c instanceof Se||h instanceof Se){var d=[],m=[];if(c&&([].push.apply(d,s),[].push.apply(m,o),c instanceof Se?e.body=c:0==c.length?e.body=Ge(Z,e.body):e.body=Ge(je,e.body,{body:We(e.body,c)}),a.forEach(mn)),h&&([].push.apply(d,l),[].push.apply(m,f),h instanceof Se?e.alternative=h:0==h.length?e.alternative=null:e.alternative=Ge(je,e.alternative,{body:We(e.alternative,h)}),p.forEach(mn)),0<m.length&&d.push(Ge(ee,e,{definitions:m})),0<d.length)return d.push(e.transform(u)),Ge(Se,e,{body:d}).optimize(u)}else if(c&&h)return d=s.concat(l),(0<o.length||0<f.length)&&d.push(Ge(ee,e,{definitions:o.concat(f)})),0==c.length?d.push(Ge(je,e.condition,{body:0<h.length?Ge(we,e,{operator:"||",left:e.condition,right:We(e.alternative,h)}).transform(u):e.condition.clone()}).optimize(u)):0==h.length?(n===i&&!r&&e.condition instanceof we&&"||"==e.condition.operator&&(r=!0),d.push(Ge(je,e,{body:Ge(we,e,{operator:r?"||":"&&",left:r?t:e.condition,right:We(e.body,c)}).transform(u)}).optimize(u))):d.push(Ge(je,e,{body:Ge(Ae,e,{condition:e.condition,consequent:We(e.body,c),alternative:We(e.alternative,h)})}).optimize(u)),a.forEach(mn),p.forEach(mn),Ge(Se,e,{body:d}).optimize(u);if((e=Dn(e.body)?Ge(Ce,e,{condition:t,body:e.alternative,alternative:null}):e).alternative instanceof ft&&e.body.TYPE==e.alternative.TYPE){m=e.body.value,s=e.alternative.value;if(!m&&!s)return Ge(Se,e,{body:[Ge(je,e,{body:e.condition}),e.body]}).optimize(u);if(m&&s||!function(){var e=!1,t=0,n=u.self();do{if(n instanceof te)u.parent(t).bfinally&&(e=!0),t++;else if(n instanceof P)t++;else{if(n instanceof Le)return e&&yn(n);n instanceof Ot&&n.bfinally&&(e=!0)}}while(n=u.parent(t++))}())return(l=Ge(e.body.CTOR,e,{value:Ge(Ae,e,{condition:e.condition,consequent:m||Ge(Ve,e.body).transform(u),alternative:s||Ge(Ve,e.alternative).transform(u)})}))instanceof Ne&&(l.in_bool=e.body.in_bool||e.alternative.in_bool),l}if(pi((e=e.body instanceof Ce&&!e.body.alternative&&!e.alternative?Ge(Ce,e,{condition:Ge(we,e.condition,{operator:"&&",left:e.condition,right:e.body.condition}),body:e.body.body,alternative:null}):e).body)&&e.alternative)return o=e.alternative,e.alternative=null,Ge(Se,e,{body:[e,o]}).optimize(u);if(pi(e.alternative))return d=e.body,e.body=e.alternative,e.condition=r?t:e.condition.negate(u),e.alternative=null,Ge(Se,e,{body:[e,d]}).optimize(u);if(e.alternative){for(var g=A(e.body),_=T(g),v=A(e.alternative),y=T(v),b=[];0<=_&&0<=y;){var x=g[_],w=v[y];if(x.equals(w))g.splice(_--,1),v.splice(y--,1),b.unshift(Tn(x,w));else{if(!(x instanceof je))break;if(!(w instanceof je))break;var S=x.body.tail_node(),k=w.body.tail_node();if(!S.equals(k))break;_=E(g,x.body,_),y=E(v,w.body,y),b.unshift(Ge(je,S,{body:Tn(S,k)}))}}if(0<b.length)return e.body=0<g.length?Ge(Se,e,{body:g}):Ge(Z,e),e.alternative=0<v.length?Ge(Se,e,{body:v}):null,b.unshift(e),Ge(Se,e,{body:b}).optimize(u)}u.option("typeofs")&&Oi(e.condition,e.body,e.alternative)}return e;function A(e){return e instanceof Se?e.body:[e]}function T(e){for(var t=e.length;0<=--t&&qn(e[t],!0););return t}function E(e,t,n){return t instanceof Re?e[n]=Ge(je,t,{body:We(t,t.expressions.slice(0,-1))}):e.splice(n--,1),n}function C(e,t,n,i){if(null==e)return[];if(e instanceof Se){for(var r=[],s=0;s<e.body.length;s++){var o=e.body[s];if(!(o instanceof Z)){if(o instanceof ft){if(0==s)return;0<r.length&&(o=o.clone(),r.push(o.value||Ge(Ve,o).transform(u)),o.value=We(e,r));var a=e.clone();return a.body=a.body.slice(s+1),a.body.unshift(o),a}if(o instanceof le)t.push(o);else if(o instanceof je){if(!u.option("sequences")&&0<r.length)return;r.push(o.body)}else{if(!(o instanceof ee))return;if(!u.option("sequences")&&0<r.length)return;o.remove_initializers(u,n),o.definitions.forEach(c)}}}return r}return e instanceof le?(t.push(e),[]):e instanceof Z?[]:e instanceof je?[e.body]:e instanceof ee?(r=[],e.remove_initializers(u,n),e.definitions.forEach(c),r):void 0;function c(e){e.value&&r.push(Ge(xe,e,{operator:"=",left:e.name.convert_symbol(qe,function(e){i.push(e)}),right:e.value}))}}}),t(kt,function(i,n){if(n.option("switches")&&n.option("dead_code")){for(var e,t,r,s=[],o=[],a=[],c=0,u=i.body.length;c<u;c++){if((e=i.body[c])instanceof nt){var l=s[s.length-1];if(t||b(e.body[0],n)&&(!l||pi(l))){w(e,l);continue}t=e}else{var f=e.expression,p=Ge(we,i,{operator:"===",left:i.expression,right:f}).evaluate(n,!0);if(!p){f.has_side_effects(n)&&a.push(f),w(e,s[s.length-1]);continue}if(!(p instanceof Oe))for(t&&(p=s.indexOf(t),s.splice(p,1),w(t,s[p-1]),t=null),f.has_side_effects(n)?r=e:t=e=Ge(nt,e);++c<u;)w(i.body[c],e)}if(u<=c+1||pi(e)){var h,l=s[s.length-1],d=e.body;if(pi(l))switch(l.body.length-d.length){case 1:if(!b(h=l.body[l.body.length-1],n))break;d=d.concat(h);case 0:var m=Ge(Se,l),g=Ge(Se,e,{body:d});m.equals(g)&&(l.body=[])}}a.length&&(e instanceof nt?s.push(Ge(Ze,i,{expression:We(i,a),body:[]})):(a.push(e.expression),e.expression=We(i,a)),a=[]),s.push(e)}for(a.length&&!r&&s.push(Ge(Ze,i,{expression:We(i,a),body:[]}));e=s[s.length-1];){if(b(h=e.body[e.body.length-1],n)&&e.body.pop(),e===t){if(!In(e))break}else{if(e.expression.has_side_effects(n))break;if(t){if(!In(t))break;if(s[s.length-2]!==t)break;t.body=t.body.concat(e.body),e.body=[]}else if(!In(e))break}w(e),s.pop()===t&&(t=null)}if(!e)return o.push(Ge(je,i.expression,{body:i.expression})),a.length&&o.push(Ge(je,i,{body:We(i,a)})),Ge(Se,i,{body:o}).optimize(n);if(e===t)for(;(e=s[s.length-2])&&!(e instanceof nt)&&In(e);){if((f=e.expression).has_side_effects(n)){if((l=s[s.length-3])&&!pi(l))break;t.body.unshift(Ge(je,i,{body:f}))}w(e),s.splice(-2,1)}if(s[0].body=o.concat(s[0].body),i.body=s,n.option("conditionals"))switch(s.length){case 1:if(x(s[0]))return f=s[0].expression,d=s[0].body.slice(),(s[0]!==t&&s[0]!==r?Ge(Ce,i,{condition:Ge(we,i,{operator:"===",left:i.expression,right:f}),body:Ge(Se,i,{body:d}),alternative:null}):(f&&d.unshift(Ge(je,f,{body:f})),d.unshift(Ge(je,i.expression,{body:i.expression})),Ge(Se,i,{body:d}))).optimize(n);break;case 2:if(Bt(t,s)&&x(s[1])){var _,v,y=(d=s[0].body.slice()).length&&b(d[d.length-1],n);if(y&&d.pop(),$e(d,x))return _=s[1].body.length&&Ge(Se,s[1]),v=Ge(Ce,i,{condition:Ge(we,i,s[0]===t?{operator:"!==",left:i.expression,right:s[1].expression}:{operator:"===",left:i.expression,right:s[0].expression}),body:Ge(Se,s[0],{body:d}),alternative:y&&_||null}),(v=!y&&_?Ge(Se,i,{body:[v,_]}):v).optimize(n)}}}return i;function b(e,t){return e instanceof N&&t.loopcontrol_target(e)===i}function x(e){var t=!1,n=new Ue(function(e){if(t||e instanceof Pe||e instanceof je)return!0;b(e,n)&&(t=!0)});return n.push(i),e.walk(n),!t}function w(e,t){t&&!pi(t)?t.body=t.body.concat(e.body):Un(n,e,o)}}),t(Ot,function(e,t){if(e.body=zn(e.body,t),t.option("dead_code")){if(In(e)&&!(e.bcatch&&e.bcatch.argname&&e.bcatch.argname.match_symbol(function(e){return e instanceof fe&&!Ht(e)},!0)))return n=[],e.bcatch&&(Un(t,e.bcatch,n),n.forEach(function(e){e instanceof ee&&e.definitions.forEach(function(e){var t=e.name.definition().redefined();t&&(e.name=e.name.clone(),e.name.thedef=t)})})),n.unshift(Ge(Se,e).optimize(t)),e.bfinally&&n.push(Ge(Se,e.bfinally).optimize(t)),Ge(Se,e,{body:n}).optimize(t);if(e.bfinally&&In(e.bfinally)){var n=Ge(Se,e.bfinally).optimize(t);if(n=e.body.concat(n),!e.bcatch)return Ge(Se,e,{body:n}).optimize(t);e.body=n,e.bfinally=null}}return e}),ie.DEFMETHOD("remove_initializers",Ni(function(e,t){return Ge(Ve,t).optimize(e)})),_t.DEFMETHOD("remove_initializers",Ni(V)),ee.DEFMETHOD("remove_initializers",Ni(V)),it.DEFMETHOD("to_assignments",function(){var e=this.definitions.reduce(function(e,n){var t,i,r,s=n.name.definition(),o=n.value;return o&&(o instanceof Re&&(o=o.clone()),t=Ge(qe,n.name),i=Ge(xe,n,{operator:"=",left:t,right:o}),e.push(i),(r=function(){return i.right}).assigns=[i],r.direct_access=s.direct_access,r.escaped=s.escaped,t.fixed=r,s.references.forEach(function(e){var t;e.fixed&&(t=e.fixed.assigns)&&t[0]===n&&(1<t.length||e.fixed.to_binary||e.fixed.to_prefix?t[0]=i:(e.fixed=r,s.fixed===e.fixed&&(s.fixed=r)))}),s.references.push(t)),s.assignments++,s.eliminated++,s.single_use=!1,e},[]);return 0==e.length?null:We(this,e)}),t(ie,Fi),t(_t,Fi),t(ke,function(p,u){var s=p.expression,e=qi(p,u);if(e)return e;if(u.option("sequences"))if(s instanceof Ie){if((y=Bi(s))!==s)return(b=p.clone()).expression=y.expressions.pop(),y.expressions.push(b),y.optimize(u)}else if(!kn(s.tail_node()))if((y=Bi(p))!==p)return y.optimize(u);if(u.option("unused")&&Vi(p,u),u.option("unsafe"))if(jn(s))switch(s.name){case"Array":if(1==p.args.length){if((a=p.args[0])instanceof De)try{var t=a.value;if(6<t)break;for(var n=Array(t),i=0;i<t;i++)n[i]=Ge(ce,p);return Ge(be,p,{elements:n})}catch(e){Oe.warn("Invalid array length: {length} [{start}]",{length:t,start:p.start});break}if(!a.is_boolean(u)&&!a.is_string(u))break}return Ge(be,p,{elements:p.args});case"Object":if(0==p.args.length)return Ge(yt,p,{properties:[]});break;case"String":if(0==p.args.length)return Ge(H,p,{value:""});if(1==p.args.length)return Ge(we,p,{operator:"+",left:Ge(H,p,{value:""}),right:p.args[0]}).optimize(u);break;case"Number":if(0==p.args.length)return Ge(De,p,{value:0});if(1==p.args.length)return Ge(Be,p,{operator:"+",expression:Ge(we,p,{operator:"+",left:Ge(H,p,{value:""}),right:p.args[0]})}).optimize(u);break;case"Boolean":if(0==p.args.length)return Ge(ae,p).optimize(u);if(1==p.args.length)return Ge(Be,p,{operator:"!",expression:Ge(Be,p,{operator:"!",expression:p.args[0]})}).optimize(u);break;case"RegExp":var j=[];if($e(p.args,function(e){var t=e.evaluate(u);return j.unshift(t),e!==t}))try{return Kn(u,p,Ge(W,p,{value:RegExp.apply(RegExp,j)}))}catch(e){Oe.warn("Error converting {this} [{start}]",p)}}else if(s instanceof ut)switch(s.property){case"toString":var r=s.expression;if(0!=p.args.length||r.may_throw_on_access(u)||r instanceof AST_Super)break;return Ge(we,p,{operator:"+",left:Ge(H,p,{value:""}),right:r}).optimize(u);case"join":if(s.expression instanceof be&&p.args.length<2)e:{var o=p.args[0];if(0==s.expression.elements.length&&!(o instanceof Me))return o?We(p,[o,Ge(H,p,{value:""})]).optimize(u):Ge(H,p,{value:""});if(!(o&&(o=o.evaluate(u))instanceof Oe)){for(var a,n=[],c=[],i=0;i<s.expression.elements.length;i++){var l=s.expression.elements[i];if((k=l.evaluate(u))!==l)c.push(k);else{if(l instanceof Me)break e;0<c.length&&(n.push(Ge(H,p,{value:c.join(o)})),c.length=0),n.push(l)}}return(0<c.length&&n.push(Ge(H,p,{value:c.join(o)})),1==n.length)?n[0].is_string(u)?n[0]:Ge(we,n[0],{operator:"+",left:Ge(H,p,{value:""}),right:n[0]}):""==o?(a=n[0].is_string(u)||n[1].is_string(u)?n.shift():Ge(H,p,{value:""}),n.reduce(function(e,t){return Ge(we,t,{operator:"+",left:e,right:t})},a).optimize(u)):((N=p.clone()).expression=N.expression.clone(),N.expression.expression=N.expression.expression.clone(),N.expression.expression.elements=n,Kn(u,p,N))}}break;case"charAt":if(p.args.length<2)return(N=Ge(we,p,{operator:"||",left:Ge(St,p,{expression:s.expression,property:p.args.length?Ge(we,p.args[0],{operator:"|",left:Ge(De,p,{value:0}),right:p.args[0]}):Ge(De,p,{value:0})}).optimize(u),right:Ge(H,p,{value:""})})).is_string=G,N.optimize(u);break;case"apply":if(2==p.args.length&&p.args[1]instanceof be)return(D=p.args[1].elements.slice()).unshift(p.args[0]),Ge(ke,p,{expression:Ge(ut,s,{expression:s.expression,property:"call"}),args:D}).optimize(u);break;case"call":r=s.expression;if((r=r instanceof qe?r.fixed_value():r)instanceof Pe&&!r.contains_this())return(p.args.length?We(p,[p.args[0],Ge(ke,p,{expression:s.expression,args:p.args.slice(1)})]):Ge(ke,p,{expression:s.expression,args:[]})).optimize(u)}else if(u.option("side_effects")&&s instanceof ke&&1==s.args.length&&jn(s.expression)&&"Object"==s.expression.name)return(b=p.clone()).expression=An(p,s,s.args[0]),b.optimize(u);if(u.option("unsafe_Function")&&jn(s)&&"Function"==s.name){if(0==p.args.length)return Ge(dt,p,{argnames:[],body:[]}).init_vars(s.scope);if($e(p.args,function(e){return e instanceof H}))try{var f,h="n(function("+p.args.slice(0,-1).map(function(e){return e.value}).join()+"){"+p.args[p.args.length-1].value+"})",d=J(h),m={ie:u.option("ie")},g=(d.figure_out_scope(m),new K(u.options)),h=((d=d.transform(g)).figure_out_scope(m),d.compute_char_frequency(m),d.mangle_names(m),d.walk(new Ue(function(e){return!!f||(e instanceof Pe?(f=e,!0):void 0)})),X());return Se.prototype._codegen.call(f,h),p.args=[Ge(H,p,{value:f.argnames.map(function(e){return e.print_to_string()}).join()}),Ge(H,p.args[p.args.length-1],{value:h.get().replace(/^\{|\}$/g,"")})],p}catch(e){if(!(e instanceof Y))throw e;Oe.warn("Error parsing code passed to new Function [{start}]",p.args[p.args.length-1]),Oe.warn(e.toString())}}var _=s instanceof qe?s.fixed_value():s,e=u.parent(),v=u.self(),y=_ instanceof Pe&&(!is_async(_)||u.option("awaits")&&e instanceof Xe)&&(!Ft(_)||u.option("yields")&&v instanceof Rt&&v.nested),b=y&&_.first_statement(),x=0,w=!1,S=!$e(p.args,function(e){return!(e instanceof Me)}),g=y&&$e(_.argnames,function(e,t){if(1==x&&p.args[t]instanceof Me&&(x=2),e instanceof Te){if($n(1==(x=x||1)&&p.args[t])||(x=2),ar(_,e.value))return!1;e=e.name}return!(e instanceof Ee&&(w=!0,ar(_,e)))})&&!(_.rest instanceof Ee&&ar(_,_.rest)),m=g&&u.option("inline")&&!p.is_expr_pure(u)&&(s===_||$i(_,u));if(m&&b instanceof Ne){var k=b.value;if(s===_&&!_.name&&(!k||k.is_constant_expression())&&Ui(_,zi(u)))return We(p,B(k)).optimize(u)}if(y&&!_.contains_this()){var A,T=!1;if(m&&!_.uses_arguments&&!_.pinned()&&!(_.name&&_ instanceof gt)&&(s===_||!Qi(u,A=s.definition(),_)&&_.is_constant_expression(bn(u)))&&(k=function(e){var t=_.body.length;if(t<2&&(e=z(e)))return e;if(u.option("inline")<3)return!1;e=null;for(var n=0;n<t;n++){var i=_.body[n];if(i instanceof ee){if(T){if(e){if(!(e instanceof je))return!1;Fn(i)||(e=null)}}else if(!Fn(i)){if(e&&!(e instanceof je))return!1;T=!(e=null)}}else if(!(i instanceof AST_AsyncDefun||i instanceof rt||i instanceof Z)){if(e)return!1;e=i}}return z(e)}(b))){var E,M,C,P,O=s===_||A.single_use&&A.references.length-A.replaced==1;if(function(){if(!(x||w||S||T||_.rest)&&!(u.option("inline")<2&&_.argnames.length)&&_.variables.all(function(e){return e.references.length-e.replaced<2&&e.orig[0]instanceof Fe})){var i,t=u.find_parent(Le),r=!1,s=zi(u,t),o=[],a=!1,c=new Ue(function(e,t){var n;return!!r||(e instanceof we&&Ye[e.operator]||e instanceof Ae?void(o=null):e instanceof Le||s&&e instanceof At&&s[e.name]?r=!0:e instanceof qe?(n=e.definition(),_.variables.get(e.name)!==n?void(o=null):n.init instanceof le||Vt(e,c.parent())?r=!0:(n=U(n),i<n||(i=n),o?void(a?o=null:o.push(_.argnames[n])):void 0)):a?void 0:e instanceof xe&&e.left instanceof Ie?(e.left.expression.walk(c),e.left instanceof St&&e.left.property.walk(c),e.right.walk(c),a=!0):e.has_side_effects(u)?(t(),a=!0):void 0)});if(k.walk(c),!r){var e=p.args.length;if(o&&_.argnames.length>=e){for(e=_.argnames.length;e-- >i&&_.argnames[e]===o.pop(););e++}return e<=i||$e(p.args.slice(i,e),a&&!o?function(e){return e.is_constant_expression(t)}:function(e){return!e.has_side_effects(u)})}}}()){var D=p.args.slice(),I=[],d=k.clone(!0).transform(new jt(function(e){if(e instanceof qe){var t=e.definition();if(_.variables.get(e.name)!==t)return I.push(e),e;var t=U(t),n=D[t];if(!n)return Ge(Ve,p);D[t]=null;t=this.parent();return t?An(t,e,n):n}})),h=_.inlined,F=(s!==_&&(_.inlined=!0),[]),N=(D.forEach(function(e){e&&((e=e.clone(!0)).walk(new Ue(function(e){e instanceof qe&&I.push(e)})),F.push(e))},[]),F.push(d),We(p,F).optimize(u));if(_.inlined=h,N=An(e,v,N),O||Jn(N,p)===N)return I.forEach(function(e){e.scope=s===_?_.parent_scope:s.scope,e.reference();e=e.definition();O&&e.replaced++,e.single_use=!1}),N;N.has_side_effects(u)||(p.drop_side_effect_free=function(e,t){var n=this.args.slice();return n.unshift(this.expression),We(this,n).drop_side_effect_free(e,t)})}if(O&&function(){var e,t=new qt,n=0;P=v;do{if(P.variables&&P.variables.each(function(e){t.set(e.name,!0)}),e=P,(P=u.parent(n++))instanceof AST_ClassField){if(!P.static)return}else P instanceof lt?C=[]:P instanceof pt?P.init!==e&&(C=[]):P instanceof ht&&P.init!==e&&P.object!==e&&(C=[])}while(!(P instanceof Le));if(!(M=P.body.indexOf(e)+1))return;if(!Ui(_,zi(u,P)))return;var i=(s!==_||_.parent_scope.resolve()===P)&&!P.pinned();P instanceof Pt&&(u.toplevel.vars?t.set("arguments",!0):i=!1);E=new qt;var r=u.option("inline");return function(t,n){var i=!1;return _.each_argname(function(e){if(!i&&!e.unused){if(!n||$(t,e.name))return i=!0;E.set(e.name,!0),C&&C.push(e.definition())}}),!i}(t,2<=r&&i)&&!(!function(t,e){for(var n=0;n<_.body.length;n++){var i=_.body[n];if(i instanceof le){var r=i.name;if(!e)return;if(E.has(r.name))return;if($(t,r.name))return;if(!$e(i.enclosed,function(e){return e.scope===P||e.scope===i||!t.has(e.name)}))return;C&&C.push(r.definition())}else if(i instanceof ee){if(!e)return;for(var s=i.definitions.length;0<=--s;){r=i.definitions[s].name;if($(t,r.name))return;C&&C.push(r.definition())}}}return 1}(t,3<=r&&i)||C&&0!=C.length&&ir(_,C))}())return _._squeezed=!0,s!==_&&(_.parent_scope=s.scope),N=We(p,function(){var e=[],t=[];(1<x||w||S||_.rest?function(i,r){function t(e,t){if(t.unused)return q(t);var n=t.definition(),e=(n.assignments++,n.references.push(e),Ge(AST_SymbolVar,t));n.orig.push(e),n.eliminated++,R(i,r,e)}r.push(Ge(xe,p,{operator:"=",left:Ge(st,p,{elements:_.argnames.map(function(e){return e.unused?Ge(ce,e):e.convert_symbol(qe,t)}),rest:_.rest&&_.rest.convert_symbol(qe,t)}),right:Ge(be,p,{elements:p.args.slice()})}))}:function(e,t){for(var n=_.argnames.length,i=p.args.length;--i>=n;)t.push(p.args[i]);var r,s=[];for(i=n;0<=--i;){var o,a,c=_.argnames[i],u=(r=c instanceof Te?(s.push(c),c.name):c,p.args[i]);r.unused||P.var_names().has(r.name)?u&&t.push(u):(o=Ge(AST_SymbolVar,r),(a=r.definition()).orig.push(o),a.eliminated++,void 0!==r.unused?(R(e,t,o),u&&t.push(u)):(!u&&c===r&&(C||"arguments"==r.name&&!Mt(_)&&Mt(P))&&(u=Ge(Ve,p)),R(e,t,o,u)))}for(e.reverse(),t.reverse(),i=s.length;0<=--i;){var l,f=s[i];void 0!==f.name.unused?t.push(f.value):(l=Ge(qe,f.name),f.name.definition().references.push(l),t.push(Ge(xe,f,{operator:"=",left:l,right:f.value})))}})(e,t);var n=function(i,e){var n=[M,0],s=[],r=[],o=[],a=[],c=[];return _.body.filter(C?function(e){var t,n;return!(e instanceof le&&((n=(t=Ge(AST_SymbolVar,or(e.name))).definition()).fixed=!1,n.orig.push(t),n.eliminated++,R(i,r,t,yi(e,!0)),1))}:function(e){var t;return!(e instanceof le&&(t=e.name.definition(),P.functions.set(t.name,t),P.variables.set(t.name,t),P.enclosed.push(t),P.var_names().set(t.name,!0),n.push(e),1))}).forEach(function(e){if(e instanceof ee)for(var t=0;t<e.definitions.length;t++){var n=e.definitions[t],i=or(n.name),r=n.value;r&&0<c.length&&(c.push(r),r=We(n,c),c=[]),R(s,o,i,r),!C||E.has(i.name)||1==i.definition().orig.length&&_.functions.has(i.name)||a.push(ur(u,i))}else e instanceof je&&c.push(e.body)}),[].push.apply(i,s),[].push.apply(e,a),[].push.apply(e,r),[].push.apply(e,o),n}(e,t);t.push(k),e.length&&n.push(Ge(ee,_,{definitions:e}));return[].splice.apply(P.body,n),_.enclosed.forEach(function(e){P.var_names().has(e.name)||(P.enclosed.push(e),P.var_names().set(e.name,!0))}),t}()).optimize(u),An(e,v,N)}if(u.option("side_effects")&&g&&$e(_.body,Dn)&&(_===s?ki(_,u):!x&&!w&&!_.rest)&&(!Mt(_)||!_.value)&&Ui(_,zi(u)))return We(p,B()).optimize(u)}if(u.option("drop_console")&&s instanceof Ie){for(var L=s.expression;L.expression;)L=L.expression;if(jn(L)&&"console"==L.name)return Ge(Ve,p).optimize(u)}return u.option("negate_iife")&&e instanceof je&&Ln(v)?p.negate(u,!0):ti(u,p);function q(e){return Ge(St,e,{expression:Ge(be,e,{elements:[]}),property:Ge(De,e,{value:0})})}function B(e){var o,n,t=p.args.slice(),i=1<x||w||_.rest;return(i||S)&&(t=[Ge(be,p,{elements:t})]),i?(o=new jt(function(i,e){var n,r,s;return i instanceof Te?Ge(Te,i,{name:i.name.transform(o)||q(i),value:i.value}):i instanceof st?(n=[],i.elements.forEach(function(e,t){(e=e.transform(o))&&(n[t]=e)}),_i(i,n),Ge(st,i,{elements:n})):i instanceof at?(r=[],s=[],i.properties.forEach(function(e){var t=e.key,n=e.value.transform(o);n?(s.length&&(t instanceof Oe||(t=Sn(t,e)),s.push(t),t=We(i,s),s=[]),r.push(Ge(ot,e,{key:t,value:n}))):t instanceof Oe&&s.push(t)}),s.length&&r.push(Ge(ot,i,{key:We(i,s),value:q(i)})),Ge(at,i,{properties:r})):i instanceof Fe?null:void 0}),n=[],_.argnames.forEach(function(e,t){(e=e.transform(o))&&(n[t]=e)}),(i=_.rest&&_.rest.transform(o))&&(n.length=_.argnames.length),_i(_,n),t[0]=Ge(xe,p,{operator:"=",left:Ge(st,_,{elements:n,rest:i}),right:t[0]})):_.argnames.forEach(function(e){e instanceof Te&&t.push(e.value)}),t.push(e||Ge(Ve,p)),t}function V(){return p.call_only?Ge(De,p,{value:0}):Ge(Ve,p)}function z(e){return e?e instanceof Ne?e.value||V():e instanceof je?p.call_only?e.body:Ge(Be,e,{operator:"void",expression:e.body}):void 0:V()}function U(e){for(var t=_.argnames.length;0<=--t;)if(_.argnames[t].definition()===e)return t}function $(e,t){return e.has(t)||pr[t]||P.var_names().has(t)}function R(e,t,n,i){var r=n.definition();P.var_names().has(n.name)||(P.var_names().set(n.name,!0),e.push(Ge(ze,n,{name:n,value:null}))),P.variables.set(n.name,r),P.enclosed.push(r),i&&(e=Ge(qe,n),r.assignments++,r.references.push(e),t.push(Ge(xe,p,{operator:"=",left:e,right:i})))}}),t(p,function(e,t){if(t.option("unsafe")){var n=e.expression;if(jn(n))switch(n.name){case"Array":case"Error":case"Function":case"Object":case"RegExp":return Ge(ke,e).transform(t)}}if(t.option("sequences")){n=Bi(e);if(n!==e)return n.optimize(t)}return t.option("unused")&&Vi(e,t),e}),t(Re,function(e,n){for(var i,r,s,t=n.option("side_effects")?(i=[],r=x(n),s=e.expressions.length-1,e.expressions.forEach(function(e,t){(e=t<s?e.drop_side_effect_free(n,r):e)&&(En(i,e),r=!1)}),i):e.expressions,o=t.length-1,a=1;a<o;a++){var c=t[a-1],u=p(c);if(u){var l=t[a];if(n.option("conditionals")){var f=Hi(n,u,c.right,l);if(f){c.right=f,t.splice(a--,1),o--;continue}}n.option("dead_code")&&p(l)===u&&l.right.is_constant_expression(u.scope.resolve())&&(t[--a]=c.right)}}if(n.option("side_effects")){for(;0<o&&$n(t[o],n);)o--;o<t.length-1&&(t[o]=Ge(Be,e,{operator:"void",expression:t[o]}),t.length=o+1)}return 0==o?(e=An(n.parent(),n.self(),t[0]))instanceof Re?e:e.optimize(n):(e.expressions=t,e);function p(e){return e instanceof xe&&"="==e.operator&&e.left instanceof qe&&e.left.definition()}}),t(It,function(e,t){if(t.option("sequences")){var n=Bi(e);if(n!==e)return n.optimize(t)}return ti(t,e)}),Lr=S("+ -"),Rr=S("* / %"),t(Be,function(e,t){var n=e.operator,i=e.expression;if(t.option("sequences")&&function(){switch(n){case"delete":return!o(i.tail_node());case"typeof":return!jn(i.tail_node());default:return 1}}()){var r=Bi(e);if(r!==e)return r.optimize(t)}switch(n){case"+":if(!t.option("evaluate"))break;if(!i.is_number(t,!0))break;var s=t.parent();if(s instanceof Be&&"delete"==s.operator)break;return i;case"-":if((i=i instanceof _?i.transform(t):i)instanceof De||i instanceof _)return e;break;case"!":if(t.option("booleans")){if(i.is_truthy())return We(e,[i,Ge(ae,e)]).optimize(t);if(t.in_boolean_context()){if(i instanceof Be&&"!"==i.operator)return i.expression;i instanceof we&&(e=((s=x(t))?Xn:Jn)(e,i.negate(t,s)))}}break;case"delete":if(!t.option("evaluate"))break;if(o(i))break;return We(e,[i,Ge(I,e)]).optimize(t);case"typeof":if(!t.option("booleans"))break;if(!t.in_boolean_context())break;Oe.warn("Boolean expression always true [{start}]",e);s=[Ge(I,e)];return i instanceof qe&&Ht(i,t)||s.unshift(i),We(e,s).optimize(t);case"void":if(t.option("side_effects"))return(i=i.drop_side_effect_free(t))?(e.expression=i,e):Ge(Ve,e).optimize(t)}return t.option("evaluate")&&i instanceof we&&Lr[n]&&Rr[i.operator]&&(i.left.is_constant()||!i.right.has_side_effects(t))?Ge(we,e,{operator:i.operator,left:Ge(Be,i.left,{operator:n,expression:i.left}),right:i.right}):ti(t,e);function o(e){return e instanceof _||e instanceof v||e instanceof AST_NewTarget||e instanceof Ie||e instanceof qe||e instanceof Ve}}),t(Xe,function(e,t){if(t.option("awaits")){if(t.option("sequences")){var n=Bi(e);if(n!==e)return n.optimize(t)}if(t.option("side_effects")){var i=e.expression;if(i instanceof Xe)return i.optimize(t);if(i instanceof Be&&i.expression instanceof Xe)return i.optimize(t);for(var r,s=0,o=e;r=t.parent(s++);o=r){if(Mt(r)){if(r.value===o)return i.optimize(t)}else if(r instanceof Ne){var a=!0;do{if(o=r,(r=t.parent(s++))instanceof Ot&&(r.bfinally||r.bcatch)!==o){a=!1;break}}while(r&&!(r instanceof Le));if(a)return i.optimize(t)}else if(r instanceof Re&&r.tail_node()===o)continue;break}}}return e}),t(Rt,function(e,t){if(t.option("yields")){if(t.option("sequences")){var n=Bi(e);if(n!==e)return n.optimize(t)}n=e.expression;if(e.nested&&"Call"==n.TYPE){n=n.clone().optimize(t);if("Call"!=n.TYPE)return n}}return e}),we.DEFMETHOD("lift_sequences",function(e){if(this.left instanceof Ie)return this.left.expression instanceof Re?(t=this.left.expression.expressions.slice(),(n=this.clone()).left=n.left.clone(),n.left.expression=t.pop(),t.push(n),We(this,t)):this;if(this.left instanceof Re)return t=this.left.expressions.slice(),(n=this.clone()).left=t.pop(),t.push(n),We(this,t);if(this.right instanceof Re){if(this.left.has_side_effects(e))return this;for(var t,n,i="="==this.operator&&this.left instanceof qe,r=(t=this.right.expressions).length-1,s=0;s<r&&(i||!t[s].has_side_effects(e));s++);if(s==r)return t=t.slice(),(n=this.clone()).right=t.pop(),t.push(n),We(this,t);if(0<s)return(n=this.clone()).right=We(this.right,t.slice(s)),(t=t.slice(0,s)).push(n),We(this,t)}return this}),jr=S("indexOf lastIndexOf"),Mr=S("== === != !== * & | ^"),t(we,function(n,r){if(!Mr[n.operator]||!n.right.is_constant()||n.left.is_constant()||n.left instanceof we&&U[n.left.operator]>=U[n.operator]||k(),r.option("sequences")){var e=n.lift_sequences(r);if(e!==n)return e.optimize(r)}if(r.option("assignments")&&Ye[n.operator]){var t,i=Ji(n.left,r),e=n.right;if(i instanceof qe&&e instanceof xe&&"="==e.operator&&i.equals(e.left))return i=i.clone(),t=Ge(xe,n,{operator:"=",left:i,right:Ge(we,n,{operator:n.operator,left:n.left,right:e.right})}),i.fixed&&(i.fixed=function(){return t.right},i.fixed.assigns=[t]),(e=i.definition()).references.push(i),e.replaced++,t.optimize(r)}if(r.option("comparisons"))switch(n.operator){case"===":case"!==":if($n(n.left,r)&&n.right.is_defined(r))return Oe.warn("Expression always defined [{start}]",n),We(n,[n.right,Ge("==="==n.operator?ae:I,n)]).optimize(r);var s=!0;(n.left.is_string(r)&&n.right.is_string(r)||n.left.is_number(r)&&n.right.is_number(r)||n.left.is_boolean(r)&&n.right.is_boolean(r)||Xi(r,n.left)&&n.left.equals(n.right))&&(n.operator=n.operator.slice(0,2));case"==":case"!=":if(!s&&$n(n.left,r))n.left=Ge(E,n.left);else if(r.option("typeofs")&&n.left instanceof H&&"undefined"==n.left.value&&n.right instanceof Be&&"typeof"==n.right.operator)((o=n.right.expression)instanceof qe?!o.is_declared(r):o instanceof Ie&&r.option("ie"))||(n.right=o,n.left=Ge(Ve,n.left).optimize(r),2==n.operator.length&&(n.operator+="="));else if(n.left instanceof qe&&n.right instanceof qe&&n.left.definition()===n.right.definition()&&Gi(n.left))return Ge("="==n.operator[0]?I:ae,n).optimize(r);break;case"&&":case"||":var o,s=n.left;if(s instanceof we&&(s.operator==("&&"==n.operator?"!==":"===")&&n.right instanceof we&&s.operator==n.right.operator&&($n(s.left,r)&&n.right.left instanceof E||s.left instanceof E&&$n(n.right.left,r)))){if((o=(o=s.right)instanceof xe&&"="==o.operator?o.left:o).has_side_effects(r))break;if(o.equals(n.right.right))return s.operator=s.operator.slice(0,-1),s.left=Ge(E,n),s}}var a,c,u=!1,l=r.parent();if(r.option("booleans")){i=Ji(n.left,r);if(Ye[n.operator]&&!i.has_side_effects(r)){if(i.equals(n.right))return An(l,r.self(),n.left).optimize(r);Ii(r,i)}u=r.in_boolean_context()}if(u)switch(n.operator){case"+":var f=n.left.evaluate(r,!0);if(f&&"string"==typeof f||(f=n.right.evaluate(r,!0))&&"string"==typeof f){Oe.warn("+ in boolean context always true [{start}]",n);f=[];if(n.left.evaluate(r)instanceof Oe&&f.push(n.left),n.right.evaluate(r)instanceof Oe&&f.push(n.right),f.length<2)return f.push(Ge(I,n)),We(n,f).optimize(r);n.truthy=!0}break;case"==":if(n.left instanceof H&&""==n.left.value&&n.right.is_string(r))return Ge(Be,n,{operator:"!",expression:n.right}).optimize(r);break;case"!=":if(n.left instanceof H&&""==n.left.value&&n.right.is_string(r))return n.right.optimize(r)}if(r.option("comparisons")&&n.is_boolean(r)){if("Binary"!=l.TYPE){e=Ge(Be,n,{operator:"!",expression:n.negate(r)});if(Kn(r,n,e)===e)return e}switch(n.operator){case">":k("<");break;case">=":k("<=")}}if(r.option("conditionals")&&Ye[n.operator]&&(n.left instanceof we&&n.operator==n.left.operator&&(a=(e=Ge(we,n,{operator:n.operator,left:n.left.right,right:n.right})).transform(r),e!==a)&&(n.left=n.left.left,n.right=a),(p=n.right.tail_node())instanceof we)&&n.operator==p.operator&&Ki(n,r),r.option("strings")&&"+"==n.operator){if(n.right instanceof H&&""==n.right.value&&n.left.is_string(r))return n.left.optimize(r);if(n.left instanceof H&&""==n.left.value&&n.right.is_string(r))return n.right.optimize(r);if(n.left instanceof we&&"+"==n.left.operator&&n.left.left instanceof H&&""==n.left.left.value&&n.right.is_string(r)&&(n.left.right.is_constant()||!n.right.has_side_effects(r)))return n.left=n.left.right,n.optimize(r);(p=n.right.tail_node())instanceof we&&n.operator==p.operator&&(n.left.is_string(r)&&p.is_string(r)||p.left.is_string(r)&&(n.left.is_constant()||!p.right.has_side_effects(r)))&&Ki(n,r)}if(r.option("evaluate")){var p,h=!0;switch(n.operator){case"&&":if(!(g=Di(r,n.left)))return Oe.warn("Condition left of && always false [{start}]",n),An(l,r.self(),n.left).optimize(r);if(!(g instanceof Oe))return Oe.warn("Condition left of && always true [{start}]",n),We(n,[n.left,n.right]).optimize(r);if(n.right.evaluate(r,!0)){if((u||"&&"==l.operator&&l.left===r.self())&&!(n.right.evaluate(r)instanceof Oe))return Oe.warn("Dropping side-effect-free && [{start}]",n),n.left.optimize(r)}else{if(u&&!(n.right.evaluate(r)instanceof Oe))return Oe.warn("Boolean && always false [{start}]",n),We(n,[n.left,Ge(ae,n)]).optimize(r);n.falsy=!0}if("||"==n.left.operator)if(!(m=Di(r,n.left.right)))return Ge(Ae,n,{condition:n.left.left,consequent:n.right,alternative:n.left.right}).optimize(r);break;case"??":var d=!0;case"||":var m,g=Di(r,n.left,d);if(d?null==g:!g)return Oe.warn("Condition left of {operator} always {value} [{start}]",{operator:n.operator,value:d?"nullish":"false",start:n.start}),We(n,[n.left,n.right]).optimize(r);if(!(g instanceof Oe))return Oe.warn("Condition left of {operator} always {value} [{start}]",{operator:n.operator,value:d?"defined":"true",start:n.start}),An(l,r.self(),n.left).optimize(r);if(d||!(g=n.right.evaluate(r,!0))||g instanceof Oe){if((u||"||"==l.operator&&l.left===r.self())&&!n.right.evaluate(r))return Oe.warn("Dropping side-effect-free {operator} [{start}]",n),n.left.optimize(r)}else{if(u&&!(n.right.evaluate(r)instanceof Oe))return Oe.warn("Boolean || always true [{start}]",n),We(n,[n.left,Ge(I,n)]).optimize(r);n.truthy=!0}if(!d&&"&&"==n.left.operator)if((m=Di(r,n.left.right))&&!(m instanceof Oe))return Ge(Ae,n,{condition:n.left.left,consequent:n.left.right,alternative:n.right}).optimize(r);break;case"+":if((n=(n=n.left instanceof A&&n.right instanceof we&&"+"==n.right.operator&&n.right.left instanceof A&&n.right.is_string(r)?Ge(we,n,{operator:"+",left:Ge(H,n.left,{value:""+n.left.value+n.right.left.value,start:n.left.start,end:n.right.left.end}),right:n.right.right}):n).right instanceof A&&n.left instanceof we&&"+"==n.left.operator&&n.left.right instanceof A&&n.left.is_string(r)?Ge(we,n,{operator:"+",left:n.left.left,right:Ge(H,n.right,{value:""+n.left.right.value+n.right.value,start:n.left.right.start,end:n.right.end})}):n).right instanceof Be&&"-"==n.right.operator&&n.left.is_number(r)){n=Ge(we,n,{operator:"-",left:n.left,right:n.right.expression});break}if(n.left instanceof Be&&"-"==n.left.operator&&S()&&n.right.is_number(r)){n=Ge(we,n,{operator:"-",left:n.right,right:n.left.expression});break}if(r.option("unsafe_math")&&n.left instanceof we&&U[n.left.operator]==U[n.operator]&&n.right.is_constant()&&(n.right.is_boolean(r)||n.right.is_number(r))&&n.left.is_number(r)&&!n.left.right.is_constant()&&(n.left.left.is_boolean(r)||n.left.left.is_number(r))){n=Ge(we,n,{operator:n.left.operator,left:Ge(we,n,{operator:n.operator,left:n.right,right:n.left.left}),right:n.left.right});break}case"-":if(n.right instanceof Be&&"-"==n.right.operator&&n.left.is_number(r)&&n.right.expression.is_number(r)){n=Ge(we,n,{operator:"+",left:n.left,right:n.right.expression});break}case"*":case"/":h=r.option("unsafe_math"),"+"!=n.operator&&["left","right"].forEach(function(e){var t=n[e];t instanceof Be&&"+"==t.operator&&((t=t.expression).is_boolean(r)||t.is_number(r)||t.is_string(r))&&(n[e]=t)});case"&":case"|":case"^":"-"==n.operator||"/"==n.operator||!n.left.is_boolean(r)&&!n.left.is_number(r)||!n.right.is_boolean(r)&&!n.right.is_number(r)||!S()||n.left instanceof we&&n.left.operator!=n.operator&&U[n.left.operator]>=U[n.operator]||(n=Kn(r,n,Ge(we,n,{operator:n.operator,left:n.right,right:n.left}),n.right instanceof A&&!(n.left instanceof A))),h&&n.is_number(r)&&(!(n.right instanceof we&&"%"!=n.right.operator&&U[n.right.operator]==U[n.operator]&&n.right.is_number(r)&&("+"!=n.operator||n.right.left.is_boolean(r)||n.right.left.is_number(r)))||"-"==n.operator&&n.left.is_negative_zero()||!n.right.left.is_constant_expression()&&n.right.right.has_side_effects(r)||(g=n.right.right,c=!1,g.walk(new Ue(function(e){if(c)return!0;if(e instanceof xe){if(e.left instanceof Ie)return c=!0}else if(e instanceof Dt&&unary_side_effects[e.operator]&&e.expression instanceof Ie)return c=!0})),c)||("+"!=(n=Ge(we,n,{operator:b(n.operator,n.right.operator),left:Ge(we,n.left,{operator:n.operator,left:n.left,right:n.right.left,start:n.left.start,end:n.right.left.end}),right:n.right.right})).operator||n.right.is_boolean(r)||n.right.is_number(r)||(n.right=Ge(Be,n.right,{operator:"+",expression:n.right}))),n.right instanceof A)&&n.left instanceof we&&"%"!=n.left.operator&&U[n.left.operator]==U[n.operator]&&n.left.is_number(r)&&(n.left.left instanceof A?(i=x(n.operator,n.left.left,n.right,{start:n.left.left.start,end:n.right.end}),n=x(n.left.operator,ti(r,i),n.left.right,n)):n.left.right instanceof A&&(d=b(n.left.operator,n.operator),!(p=ti(r,x(d,n.left.right,n.right,n.left))).is_constant()||"-"==n.left.operator&&0!=n.right.value&&0==+p.value&&n.left.left.is_negative_zero()||(n=x(n.left.operator,n.left.left,p,n))));break;case"instanceof":if(me(n.right))return We(n,[n,Ge(ae,n)]).optimize(r)}if(!(l instanceof Be&&"delete"==l.operator)){if(n.left instanceof De&&!n.right.is_constant())switch(n.operator){case"+":if(0==n.left.value){if(n.right.is_boolean(r))return Ge(Be,n,{operator:"+",expression:n.right}).optimize(r);if(n.right.is_number(r)&&!n.right.is_negative_zero())return n.right}break;case"*":if(1==n.left.value)return Ge(Be,n,{operator:"+",expression:n.right}).optimize(r)}if(n.right instanceof De&&!n.left.is_constant())switch(n.operator){case"+":if(0==n.right.value){if(n.left.is_boolean(r))return Ge(Be,n,{operator:"+",expression:n.left}).optimize(r);if(n.left.is_number(r)&&!n.left.is_negative_zero())return n.left}break;case"-":if(0==n.right.value)return Ge(Be,n,{operator:"+",expression:n.left}).optimize(r);break;case"/":if(1==n.right.value)return Ge(Be,n,{operator:"+",expression:n.left}).optimize(r)}}}if(r.option("typeofs"))switch(n.operator){case"&&":Oi(n.left,n.right,null);break;case"||":Oi(n.left,null,n.right)}if(r.option("unsafe")){var _=w(n.right);if(u&&_&&("=="==n.operator||"!="==n.operator)&&n.left instanceof De&&0==n.left.value)return("=="==n.operator?Ge(Be,n,{operator:"!",expression:n.right}):n.right).optimize(r);var v=w(n.left);if(r.option("comparisons")&&function(){switch(n.operator){case"<=":return _&&n.left instanceof De&&0==n.left.value;case"<":if(v&&n.right instanceof De&&0==n.right.value)return 1;case"==":case"!=":return _?n.left instanceof De&&-1==n.left.value||n.left instanceof Be&&"-"==n.left.operator&&n.left.expression instanceof De&&1==n.left.expression.value:void 0}}()){var y=Ge(Be,n,{operator:"!",expression:Ge(Be,n,{operator:"~",expression:v?n.left:n.right})});switch(n.operator){case"<":if(v)break;case"<=":case"!=":y=Ge(Be,n,{operator:"!",expression:y})}return y.optimize(r)}}return ti(r,n);function b(e,t){switch(e){case"-":return"+"==t?"-":"+";case"/":return"*"==t?"/":"*";default:return t}}function x(e,t,n,i){return"+"==e&&(t.is_boolean(r)||t.is_number(r)||(t=Ge(Be,t,{operator:"+",expression:t})),n.is_boolean(r)||n.is_number(r)||(n=Ge(Be,n,{operator:"+",expression:n}))),Ge(we,i,{operator:e,left:t,right:n})}function w(e){return"Call"==e.TYPE&&e.expression instanceof ut&&jr[e.expression.property]}function S(){return n.left.is_constant()||n.right.is_constant()||!n.left.has_side_effects(r)&&!n.right.has_side_effects(r)}function k(e){S()&&(e&&(n.operator=e),e=n.left,n.left=n.right,n.right=e)}}),t(l,function(e){return e}),t(qe,function(n,e){if(!e.option("ie")&&jn(n)&&(!n.scope.resolve().uses_with||!e.find_parent(Lt)))switch(n.name){case"undefined":return Ge(Ve,n).optimize(e);case"NaN":return Ge(v,n).optimize(e);case"Infinity":return Ge(_,n).optimize(e)}var t=e.parent();if(e.option("reduce_vars")&&Vt(e.self(),t)!==e.self()){var i,r,s,o,a,c,u,l,f,p=n.definition(),h=n.fixed_value(),t=p.single_use&&!(t instanceof ke&&t.is_expr_pure(e));if(t)if(me(h)){if(p.scope===n.scope.resolve(!0)&&!p.in_loop||e.option("reduce_funcs")&&1!=p.escaped.depth&&!h.inlined)if(p.redefined())t=!1;else if(Qi(e,p,h))t=!1;else if(h.name&&h.name.definition()!==p)t=!1;else if(h.parent_scope!==n.scope||is_funarg(p))if($i(h,e)){if("f"==(t=h.is_constant_expression(n.scope)))for(var d=n.scope;(d instanceof le||d instanceof gt)&&(d.inlined=!0),d=d.parent_scope;);}else t=!1;else(h.name&&("await"==h.name.name&&is_async(h)||"yield"==h.name.name&&Ft(h))||h.has_side_effects(e)||e.option("ie")&&h instanceof et)&&(t=!1);else t=!1;t&&(h.parent_scope=n.scope)}else(!h||0<p.recursive_refs||!h.is_constant_expression()||h.drop_side_effect_free(e))&&(t=!1);if(t){if(p.single_use=!1,h._squeezed=!0,h.single_use=!0,me(h=(h=h instanceof re?vi(h):h)instanceof le?yi(h):h)){var m=[],d=n.scope;do{if(m.push(d),d===p.scope)break}while(d=d.parent_scope);h.enclosed.forEach(function(e){if(!h.variables.has(e.name))for(var t=0;t<m.length;t++){var n=m[t];if(!de(n.enclosed,e))return;n.var_names().set(e.name,!0)}})}return 0<p.recursive_refs?(i=(f=h.clone(!0)).name.definition(),r=f.variables.get(f.name.name),s=r&&r.orig[0],t=f instanceof et?(o="def_function",AST_SymbolClass):(o="def_variable",C),s instanceof t||(((s=Ge(t,f.name)).scope=f).name=s,(r=f[o](s)).recursive_refs=p.recursive_refs),f.walk(new Ue(function(e){var t,n;e instanceof Tt?e!==s&&((t=e.definition()).orig.push(e),t.eliminated++):e instanceof qe&&((t=e.definition())===i?e.thedef=t=r:(t.single_use=!1,me(n=e.fixed_value())&&n.name&&n.name.definition()===t&&t.scope===n.name.scope&&h.variables.get(n.name.name)===t&&(n.name=n.name.clone(),e.thedef=t=f.variables.get(n.name.name)||f[o](n.name))),t.references.push(e))}))):(h instanceof Le?(e.push(h),f=h.optimize(e),e.pop()):f=h.optimize(e),f=f.transform(new jt(function(e,t){return e instanceof Le||t(e=e.clone(),this),e}))),p.replaced++,f}if(h&&!1!==(a=n.fixed||p.fixed).should_replace)if(h instanceof y?is_funarg(p)||!Zi(p)||function(e){var t=n.scope;for(;t!==e.scope;){if(t instanceof et)return 1;t=t.parent_scope}}(p)||(c=h):(t=h.evaluate(e,!0))!==h&&"function"!=typeof t&&(null===t||"object"!=typeof t||e.option("unsafe_regexp")&&t instanceof RegExp&&!p.cross_loop&&Zi(p))&&(c=Sn(t,h)),c)if(void 0===a.should_replace&&(t=c.optimize(e).print_to_string().length,g(h)||(t=Math.min(t,h.print_to_string().length)),u=p.name.length,e.option("unused")&&!e.exposed(p)&&(l=p.references.length-p.replaced-p.assignments,l=Math.min(l,p.references.filter(function(e){return e.fixed===a}).length),u+=(u+2+t)/Math.max(1,l)),a.should_replace=t-Math.floor(u)<e.eval_threshold),a.should_replace)return g(h)?(f=c.optimize(e))===c&&(f=f.clone(!0)):(f=Jn(c.optimize(e),h))!==c&&f!==h||(f=f.clone(!0)),p.replaced++,f}return n;function g(e){var t;return e.walk(new Ue(function(e){if(t=e instanceof qe?!0:t)return!0})),t}}),t(Ct,function(e,n){if(!n.option("templates"))return e;var i=e.tag;if(!i||er(n,i)){for(var t,r=[],s=[],o=0;o<e.strings.length;o++){var a,c=e.strings[o];if(i||(a=tr(c))&&(c=h(a)),0<o){var u=e.expressions[o-1],l=function(e){var t=e.evaluate(n);if(t!==e&&!(i&&/\r|\\|`/.test(t)||(t=h(""+t)).length>e.print_to_string().length+"${}".length))return t}(u);if(l){var f,l=s[s.length-1]+l+c;if(i||typeof(f=tr(l))==t){s[s.length-1]=f?h(f):l;continue}}r.push(u)}s.push(c),i||(t=typeof a)}if(!i&&1<s.length){if(""==s[s.length-1])return Ge(we,e,{operator:"+",left:Ge(Ct,e,{expressions:r.slice(0,-1),strings:s.slice(0,-1)}).transform(n),right:r[r.length-1]}).optimize(n);if(""==s[0]){for(var p=Ge(we,e,{operator:"+",left:Ge(H,e,{value:""}),right:r[0]}),o=1;""==s[o]&&o<r.length;o++)p=Ge(we,e,{operator:"+",left:p,right:r[o]});return Kn(n,e,Ge(we,e,{operator:"+",left:p.transform(n),right:Ge(Ct,e,{expressions:r.slice(o),strings:s.slice(o)}).transform(n)}).optimize(n))}}e.expressions=r,e.strings=s}return ti(n,e);function h(e){return e.replace(/\r|\\|`|\${/g,function(e){return"\\"+("\r"==e?"r":e)})}}),t(Ve,function(e,t){if(t.option("unsafe_undefined")){var n=bn(t).find_variable("undefined");if(n)return(n=Ge(qe,e,{name:"undefined",scope:n.scope,thedef:n})).is_undefined=!0,n}n=Vt(t.self(),t.parent());return n&&nr(n,e)?e:Ge(Be,e,{operator:"void",expression:Ge(De,e,{value:0})})}),t(_,function(e,t){var n=Vt(t.self(),t.parent());return(!n||!nr(n,e))&&(!t.option("keep_infinity")||n||bn(t).find_variable("Infinity"))?Ge(we,e,{operator:"/",left:Ge(De,e,{value:1}),right:Ge(De,e,{value:0})}):e}),t(v,function(e,t){var n=Vt(t.self(),t.parent());return(!n||!nr(n,e))&&(n||bn(t).find_variable("NaN"))?Ge(we,e,{operator:"/",left:Ge(De,e,{value:0}),right:Ge(De,e,{value:0})}):e}),Fr=S("+ - * / % >> << >>> | ^ &"),qr=S("* | ^ &"),t(xe,function(s,o){if(o.option("dead_code"))if(s.left instanceof Ie){if("="==s.operator){if(s.redundant)return e=[s.left.expression],s.left instanceof St&&e.push(s.left.property),e.push(s.right),We(s,e).optimize(o);if(s.left.equals(s.right)&&!s.left.has_side_effects(o))return s.right;var e=s.left.expression;if(e instanceof Pe||!o.has_directive("use strict")&&e instanceof A&&!e.may_throw_on_access(o))return s.left instanceof ut?s.right:We(s,[s.left.property,s.right]).optimize(o)}}else if(s.left instanceof qe&&Ht(s.left,o)){if("="==s.operator&&s.left.equals(s.right)&&!((c=o.parent())instanceof Be&&"delete"==c.operator))return s.right;if(s.left.is_immutable())return h();var t,n=s.left.definition(),a=n.scope.resolve(),i=a===o.find_parent(Pe),r=0,c=o.self();if(!a.uses_arguments||!is_funarg(n)||o.has_directive("use strict"))do{if(t=c,(c=o.parent(r++))instanceof xe){if(c.left instanceof qe&&c.left.definition()===n){if(f(r,c,!i))break;return h(n)}if(c.left.match_symbol(function(e){if(e instanceof Ie)return!0}))break}else{if(c instanceof ft){if(!i)break;if(f(r,c))break;if(ir(a,[n]))break;return h(n)}if(c instanceof je){if(!i)break;if(ir(a,[n]))break;do{if(u=c,(c=o.parent(r++))===a&&Bn(c.body,u))return h(n)}while(u=u,(l=c)instanceof Se||l instanceof te||l instanceof P?Bn(l.body,u):l instanceof Ce?l.body===u||l.alternative===u:l instanceof Ot?l.bfinally?l.bfinally===u:l.bcatch===u:void 0);break}if(c instanceof ze&&c.name instanceof Tt&&c.name.definition()===n){if(f(r,c))break;return h(n)}}}while(function(e,t){if(t instanceof we)switch(e){case t.left:return t.right.is_constant_expression(a);case t.right:return 1;default:return}if(t instanceof Ae)switch(e){case t.condition:return t.consequent.is_constant_expression(a)&&t.alternative.is_constant_expression(a);case t.consequent:case t.alternative:return 1;default:return}if(t instanceof Re){var n=t.expressions,i=n.indexOf(e);if(i<0)return;for(var r=n.length;--r>i;)if(!n[r].is_constant_expression(a))return;return 1}return t instanceof Be}(t,c))}var u,l;if(o.option("sequences")){var e=s.lift_sequences(o);if(e!==s)return e.optimize(o)}if(o.option("assignments")){if("="==s.operator&&s.left instanceof qe&&s.right instanceof we){if(s.right.left instanceof qe&&s.right.left.name==s.left.name&&Fr[s.right.operator])return p(s.right.right);if(s.right.right instanceof qe&&s.right.right.name==s.left.name&&qr[s.right.operator]&&!s.right.left.has_side_effects(o))return p(s.right.left)}if(("-="==s.operator||"+="==s.operator&&(s.left.is_boolean(o)||s.left.is_number(o)))&&s.right instanceof De&&1==s.right.value)return e=s.operator.slice(0,-1),Ge(Be,s,{operator:e+e,expression:s.left})}return ti(o,s);function f(e,t,n){var i=s.right,r=(s.right=Ge(E,i),t.may_throw(o));return s.right=i,xn(o,e,t,a,r,n)}function p(e){var t=s.left.fixed;return t&&(t.to_binary=ve(function(e){return e.left},t)),Ge(xe,s,{operator:s.right.operator+"=",left:s.left,right:e})}function h(e){return e&&(e.fixed=!1),("="!=s.operator?Ge(we,s,{operator:s.operator.slice(0,-1),left:s.left,right:s.right}):An(o.parent(),s,s.right)).optimize(o)}}),t(Ae,function(o,t){if(t.option("sequences")&&o.condition instanceof Re)return e=o.condition.expressions.slice(),(u=o.clone()).condition=e.pop(),e.push(u),We(o,e).optimize(t);if(t.option("conditionals")){var a=o.condition;if(t.option("booleans")&&!a.has_side_effects(t)&&Ii(t,a),!(a=Di(t,a)))return Oe.warn("Condition always false [{start}]",o),We(o,[o.condition,o.alternative]).optimize(t);if(!(a instanceof Oe))return Oe.warn("Condition always true [{start}]",o),We(o,[o.condition,o.consequent]).optimize(t);var e=x(t),n=a.negate(t,e),e=((e?Xn:Jn)(a,n)===n&&(o=Ge(Ae,o,{condition:n,consequent:o.alternative,alternative:o.consequent}),n=a,a=o.condition),o.consequent),i=o.alternative,r=Ji(a,t);if(Xi(t,r)){if(r.equals(e))return Ge(we,o,{operator:"||",left:a,right:i}).optimize(t);if(r.equals(i))return Ge(we,o,{operator:"&&",left:a,right:e}).optimize(t)}r=e.tail_node();if(r instanceof xe){var s="="==r.operator,c=s?i.tail_node():i;if((s||e===r)&&c instanceof xe&&r.operator==c.operator&&r.left.equals(c.left)&&(s&&r.left instanceof qe||!a.has_side_effects(t)&&v(e)&&v(i)))return Ge(xe,o,{operator:r.operator,left:r.left,right:Ge(Ae,o,{condition:a,consequent:y(e),alternative:y(i)})})}c=i.tail_node();if(r.equals(c))return We(o,e.equals(i)?[a,e]:[Ge(Ae,o,{condition:a,consequent:b(e),alternative:b(i)}),c]).optimize(t);var u,l,s=function e(t,n,i){var r=t.tail_node();var s=n.tail_node();if(!_(r,s))return!i&&Ge(Ae,o,{condition:a,consequent:t,alternative:n});i=r.clone();t=g(t,r,"expression");n=g(n,s,"expression");s=e(t,n);r.expression instanceof Re&&(s=An(r,r.expression,s));i.expression=s;return i}(e,i,!0);if(s)return s;if(e instanceof ke&&i.TYPE==e.TYPE&&0<=(s=m(e,i))&&e.expression.equals(i.expression)&&!a.has_side_effects(t)&&!e.expression.has_side_effects(t))return u=e.clone(),l=e.args[s],u.args[s]=l instanceof Me?Ge(Me,o,{expression:Ge(Ae,o,{condition:a,consequent:l.expression,alternative:i.args[s].expression})}):Ge(Ae,o,{condition:a,consequent:l,alternative:i.args[s]}),u;if(r instanceof Ae&&r.alternative.equals(i))return Ge(Ae,o,{condition:Ge(we,o,{left:a,operator:"&&",right:g(e,r,"condition")}),consequent:r.consequent,alternative:Tn(r.alternative,i)});if(r instanceof Ae&&r.consequent.equals(i))return Ge(Ae,o,{condition:Ge(we,o,{left:n,operator:"||",right:g(e,r,"condition")}),consequent:Tn(r.consequent,i),alternative:r.alternative});if(c instanceof Ae&&e.equals(c.consequent))return Ge(Ae,o,{condition:Ge(we,o,{left:a,operator:"||",right:g(i,c,"condition")}),consequent:Tn(e,c.consequent),alternative:c.alternative});if(c instanceof Ae&&e.equals(c.alternative))return Ge(Ae,o,{condition:Ge(we,o,{left:n,operator:"&&",right:g(i,c,"condition")}),consequent:c.consequent,alternative:Tn(e,c.alternative)});if(r instanceof we&&"&&"==r.operator&&r.right.equals(i))return Ge(we,o,{operator:"&&",left:Ge(we,o,{operator:"||",left:n,right:g(e,r,"left")}),right:Tn(r.right,i)}).optimize(t);if(r instanceof we&&"||"==r.operator&&r.right.equals(i))return Ge(we,o,{operator:"||",left:Ge(we,o,{operator:"&&",left:a,right:g(e,r,"left")}),right:Tn(r.right,i)}).optimize(t);if(c instanceof we&&"&&"==c.operator&&c.right.equals(e))return Ge(we,o,{operator:"&&",left:Ge(we,o,{operator:"||",left:a,right:g(i,c,"left")}),right:Tn(e,c.right)}).optimize(t);if(c instanceof we&&"||"==c.operator&&c.right.equals(e))return Ge(we,o,{operator:"||",left:Ge(we,o,{operator:"&&",left:n,right:g(i,c,"left")}),right:Tn(e,c.right)}).optimize(t);var f=t.option("booleans")&&t.in_boolean_context();if(h(e))return d(i)?p(a):Ge(we,o,{operator:"||",left:p(a),right:i}).optimize(t);if(d(e))return h(i)?p(a.negate(t)):Ge(we,o,{operator:"&&",left:p(a.negate(t)),right:i}).optimize(t);if(h(i))return Ge(we,o,{operator:"||",left:p(a.negate(t)),right:e}).optimize(t);if(d(i))return Ge(we,o,{operator:"&&",left:p(a),right:e}).optimize(t);t.option("typeofs")&&Oi(a,e,i)}return o;function p(e){return e.is_boolean(t)?e:Ge(Be,e,{operator:"!",expression:e.negate(t)})}function h(e){return e instanceof I||f&&e instanceof A&&e.value||e instanceof Be&&"!"==e.operator&&e.expression instanceof A&&!e.expression.value}function d(e){return e instanceof ae||f&&(e instanceof A&&!e.value||e instanceof Be&&"void"==e.operator&&!e.expression.has_side_effects(t))||e instanceof Be&&"!"==e.operator&&e.expression instanceof A&&e.expression.value}function m(e,t){var n=e.args,i=t.args,r=n.length;if(r!=i.length)return-2;for(var s=0;s<r;s++)if(!n[s].equals(i[s])){if(n[s]instanceof Me!=i[s]instanceof Me)return-3;for(var o=s+1;o<r;o++)if(!n[o].equals(i[o]))return-2;return s}return-1}function g(e,t,n){var i;return e===t?t[n]:((i=e.expressions.slice(0,-1)).push(t[n]),We(e,i))}function _(e,t){var n,i;if(e.TYPE==t.TYPE&&e.optional==t.optional)return e instanceof ke?-1!=m(e,t)?void 0:"Call"!=e.TYPE||!(e.expression instanceof Ie||t.expression instanceof Ie)||_(e.expression,t.expression):e instanceof Ie?(n=e.property,i=t.property,(n instanceof Oe?n.equals(i):n==i)&&!(e.expression instanceof AST_Super||t.expression instanceof AST_Super)):void 0}function v(e){return e===e.tail_node()||$e(e.expressions.slice(0,-1),function(e){return!e.has_side_effects(t)})}function y(e){var t;return e instanceof Re?((t=e.expressions.slice()).push(t.pop().right),We(e,t)):e.right}function b(e){return e instanceof Re?We(e,e.expressions.slice(0,-1)):Ge(De,e,{value:0})}}),t(f,function(e,t){return t.option("booleans")?t.in_boolean_context()?Ge(De,e,{value:+e.value}):(t=t.parent())instanceof we&&("=="==t.operator||"!="==t.operator)?(Oe.warn("Non-strict equality against boolean: {operator} {value} [{start}]",{operator:t.operator,value:e.value,start:t.start}),Ge(De,e,{value:+e.value})):Ge(Be,e,{operator:"!",expression:Ge(De,e,{value:1-e.value})}):e}),t(Me,function(e,t){var n=e.expression;return t.option("spreads")&&n instanceof be&&!(t.parent()instanceof yt)?List.splice(n.elements.map(function(e){return e instanceof ce?Ge(Ve,e).optimize(t):e})):e}),t(St,function(e,n){var t=e.expression,i=e.property,r=qi(e,n);if(r)return r;if(n.option("properties")){var s=i.evaluate(n);if(s!==i){"string"==typeof s&&("undefined"==s?s=void 0:(m=parseFloat(s)).toString()==s&&(s=m)),i=e.property=Jn(i,Sn(s,i).transform(n));var o=""+s;if($(o)&&o.length<=i.print_to_string().length+1)return Ge(ut,e,{optional:e.optional,expression:t,property:o,quoted:!0}).optimize(n)}}var a,c,u,l,r=n.parent(),f=Vt(n.self(),r);if(n.option("arguments")&&t instanceof qe&&$t(a=t.definition())&&!t.in_arg&&i instanceof De&&Math.floor(d=i.value)==d&&(c=a.scope)===function(){var e,t=0;for(;e=n.parent(t++);)if(e instanceof Pe){if(e instanceof Je)return;if(!Mt(e))return u=n.parent(t),e}}()&&c.uses_arguments<(f?2:3)){r instanceof Be&&"delete"==r.operator&&(a.deleted||(a.deleted=[]),a.deleted[d]=!0);var p=c.argnames[d];if(a.deleted&&a.deleted[d])p=null;else if(p)(!(p instanceof Fe&&"await"!=p.name&&t.scope.find_variable(p.name)===(h=p.definition()))||(n.has_directive("use strict")||c.name||c.rest||!(u instanceof ke&&d<u.args.length&&$e(u.args.slice(0,d+1),function(e){return!(e instanceof Me)}))||!$e(c.argnames,function(e){return e instanceof Fe}))&&(b()||h.assignments||1<h.orig.length))&&(p=null);else if((f||!b())&&d<c.argnames.length+5&&n.drop_fargs(c,u)&&!c.rest)for(;d>=c.argnames.length;)p=c.make_var(Fe,c,"argument_"+c.argnames.length),c.argnames.push(p);if(p&&find_if(function(e){return e.name===p.name},c.argnames)===p)return f&&a.reassigned--,(h=Ge(qe,p)).reference(),p.unused=void 0,h}if(f)return e;if(n.option("sequences")&&"Call"!=r.TYPE&&!(r instanceof ht&&r.init===e)){var h=Bi(e);if(h!==e)return h.optimize(n)}if(s!==i&&(f=e.flatten_object(o,n))&&(t=e.expression=f.expression,i=e.property=f.property),n.option("properties")&&n.option("side_effects")&&i instanceof De&&t instanceof be&&$e(l=t.elements,function(e){return!(e instanceof Me)})){var d,r=l[d=i.value];if(rr(r,n)){for(var m,g=r instanceof ce,_=!g,v=[],y=l.length;--y>d;)(m=l[y].drop_side_effect_free(n))&&(v.unshift(m),_)&&m.has_side_effects(n)&&(_=!1);for(_||v.unshift(r);0<=--y;)(m=l[y].drop_side_effect_free(n))?v.unshift(m):g?v.unshift(Ge(ce,l[y])):d--;return _?(v.push(r),We(e,v).optimize(n)):Ge(St,e,{expression:Ge(be,t,{elements:v}),property:Ge(De,i,{value:d})})}}return ti(n,e);function b(){return!n.option("reduce_vars")||a.reassigned}}),gt.DEFMETHOD("contains_super",function(){var t=!1,n=this;return n.walk(new Ue(function(e){return!!t||(e instanceof AST_Super?t=!0:e!==n&&e instanceof Le&&!Mt(e)||void 0)})),t}),(e=function(e,t){e.DEFMETHOD("contains_this",t)})(d,He),e(m,He),e(Oe,function(){var t=!1,n=this;return n.walk(new Ue(function(e){return!!t||(e instanceof y?t=!0:e!==n&&e instanceof Le&&!Mt(e)||void 0)})),t}),Ie.DEFMETHOD("flatten_object",function(e,t){if(t.option("properties")&&"__proto__"!==e){var n=this.expression;if(n instanceof yt)for(var i=n.properties,r=i.length;0<=--r;){var s=i[r];if(s.key===e){if(!$e(i,sr))return;if(!rr(s.value,t))return;for(var o,a=[],c=0;c<i.length;c++){var u=i[c].value;if(i[c]instanceof g){var l,f,p,h=!(u.uses_arguments||Ft(u)||u.contains_this());if(h&&(l=l||t.find_parent(Le),f=zi(t,l),u.each_argname(function(e){f[e.name]&&(h=!1)})),h)p=is_async(u)?m:d;else{if(!(r!=c||(o=t.parent())instanceof ke&&o.expression===this))return;p=u.CTOR}u=Ge(p,u)}a.push(u)}return Ge(St,this,{expression:Ge(be,n,{elements:a}),property:Ge(De,this,{value:r})})}}}}),t(ut,function(e,t){"arguments"!=e.property&&"caller"!=e.property||Oe.warn("Function.prototype.{property} not supported [{start}]",e);var n=t.parent();if(Vt(t.self(),n))return e;var i=qi(e,t);if(i)return i;if(t.option("sequences")&&"Call"!=n.TYPE&&!(n instanceof ht&&n.init===e)){i=Bi(e);if(i!==e)return i.optimize(t)}if(t.option("unsafe_proto")&&e.expression instanceof ut&&"prototype"==e.expression.property){var r=e.expression.expression;if(jn(r))switch(r.name){case"Array":e.expression=Ge(be,e.expression,{elements:[]});break;case"Function":e.expression=Ge(dt,e.expression,{argnames:[],body:[]}).init_vars(r.scope);break;case"Number":e.expression=Ge(De,e.expression,{value:0});break;case"Object":e.expression=Ge(yt,e.expression,{properties:[]});break;case"RegExp":e.expression=Ge(W,e.expression,{value:/t/});break;case"String":e.expression=Ge(H,e.expression,{value:""})}}n=e.flatten_object(e.property,t);return n?n.optimize(t):ti(t,e)}),t(st,function(e,t){return t.option("rests")&&e.rest instanceof st?Ge(st,e,{elements:e.elements.concat(e.rest.elements),rest:e.rest.rest}):e}),t(ot,function(e,t){var n;return t.option("objects")&&(n=e.key)instanceof Oe&&(n=n.evaluate(t))!==e.key&&(e.key=""+n),e}),t(yt,function(n,i){var r,s,o,a,c,u,l,e;return i.option("objects")&&(o=s=r=!1,a=i.has_directive("use strict"),c=[],u=new qt,l=[],n.properties.forEach(function(e){if(!(e instanceof Me))return p(e);s=!0;var t=e.expression;i.option("spreads")&&t instanceof yt&&$e(t.properties,function(e){return!(e instanceof AST_ObjectGetter||e instanceof Me||!("__proto__"!==e.key||e instanceof AST_ObjectSetter)&&e.value.has_side_effects(i))})?(r=!0,t.properties.forEach(function(e){var t=e.key,n=e instanceof AST_ObjectSetter;if("__proto__"===t){if(!n)return;t=Sn(t,e)}p(n?Ge(bt,e,{key:t,value:Ge(Ve,e).optimize(i)}):e)})):(o=!0,f(),l.push(e))}),f(),r)?(s&&o&&1==l.length&&(e=l[0])instanceof xt&&e.key instanceof De&&(e.key=""+e.key.value),Ge(yt,n,{properties:l})):n;function f(){c.forEach(function(e){var t=u.get(e);switch(t.length){case 0:return;case 1:return l.push(t[0])}r=!0;e=a&&!o&&t.pop();l.push(1==t.length?t[0]:Ge(bt,n,{key:t[0].key,value:We(n,t.map(function(e){return e.value}))})),e&&l.push(e),t.length=0}),c=[],u=new qt}function p(e){var t=e.key;t instanceof Oe&&(s=!0,(t=t.evaluate(i))===e.key||"__proto__"===t?o=!0:t=e.key=""+t),sr(e)?(e.value.has_side_effects(i)&&f(),c.push(t),u.add(t,e)):(f(),l.push(e)),s&&!o&&"string"==typeof t&&fr.test(t)&&(o=!0,(e=u.has(t)?u.get(t)[0]:e).key=Ge(De,e,{value:+t}))}}),(e=function(e,t){e.DEFMETHOD("try_inline",t)})(Oe,he),e(xe,he),e(Xe,function(n,e,t,i){if(n.option("awaits")){var r=this,e=r.expression.try_inline(n,e,t,i,!0);if(e)return t||bi(e,function(e){e.in_bool=!1;var t=e.value;t instanceof Xe||(e.value=Ge(Xe,r,{expression:t||Ge(Ve,e).transform(n)}))}),pi(e)?e:Ge(Se,r,{body:[e,Ge(je,r,{body:Ge(Xe,r,{expression:Ge(De,r,{value:0})})})]})}}),e(we,function(t,e,n,i,r){if(void 0!==n){var s=this,o=s.operator;if(Ye[o]){e=s.right.try_inline(t,e,n,i,r);if(e)return Ge(Ce,s,{condition:function(e){switch(o){case"&&":return e;case"||":return e.negate(t);case"??":return Ge(we,s,{operator:"==",left:Ge(E,s),right:e})}}(s.left),body:e,alternative:n?null:Ge(Ne,s,{value:Ge(Ve,s).transform(t)})})}}}),e(Se,function(e,t,n,i){if(!n&&this.variables){var r=this.body,s=r.length-1;if(!(s<0)){e=r[s].try_inline(e,this,n,i);if(e)return r[s]=e,this}}}),e(ke,function(i,r,e,s,t){if(!(i.option("inline")<4)){var n=this;if(!n.is_expr_pure(i)){var o=n.expression;if(o instanceof gt&&!(o.name||o.uses_arguments||o.pinned()||Ft(o))){var a=Mt(o);if(!(a&&o.value||o.body[0]instanceof w||o.contains_this())){r=r||bn(i);var c=new qt;for(c.set("NaN",!0);!(r instanceof Le);)r.variables.each(function(e){c.set(e.name,!0)}),r=r.parent_scope;if(Bt(r,i.stack)&&!(r.pinned()&&o.variables.size()>(a?0:1))){if(r instanceof Pt){if(o.variables.size()>(a?0:1)){if(!i.toplevel.vars)return;if(0<o.functions.size()&&!i.toplevel.funcs)return}c.set("arguments",!0)}var u=!t&&is_async(o);if(u){if(!i.option("awaits"))return;if(!is_async(r))return;if(n.may_throw(i))return}var l=r.var_names();if(s=s&&[],o.variables.all(function(e,t){return s&&s.push(e),!c.has(t)&&!l.has(t)||!a&&"arguments"==t&&1==e.orig.length})&&!(s&&0<s.length&&ir(o,s))){var f,p,h,d,m,g=!0;if($e(o.argnames,function(e){var t=!1,n=new Ue(function(e){return!!t||(e instanceof Te?ar(o,e.value)?t=!0:(e.name.walk(n),!0):e instanceof ot?e.key instanceof Oe&&ar(o,e.key)?t=!0:(e.value.walk(n),!0):e instanceof Fe&&!$e(e.definition().orig,function(e){return!(e instanceof Et)})?t=!0:void 0)});return e.walk(n),!t&&(e instanceof Fe||(g=!1),!0)})){if(o.rest){if(ar(o,o.rest))return;g=!1}if(e?f=function(e){var t=!1;return e.walk(new Ue(function(e){return!!t||(u&&(e instanceof Xe||e instanceof AST_ForAwaitOf)||e instanceof Ne?t=!0:e instanceof Le||void 0)})),!t}:(t||is_async(o)||yn(r))&&(f=function(e){var t=!1,n=new Ue(function(e){return!!t||(e instanceof Ne?t=!0:e instanceof Le||void 0)});return e.walk(new Ue(function(e){return!!t||(e instanceof Ot?(e.bfinally&&$e(e.body,function(e){return e.walk(n),!t})&&e.bcatch&&e.bcatch.walk(n),!0):e instanceof Le||void 0)})),!t}),!f||$e(o.body,f))if(Ui(o,zi(i,r)))return o.functions.each(function(e,t){r.functions.set(t,e)}),p=[],o.variables.each(function(t,e){var n;!a&&"arguments"==e&&1==t.orig.length||(l.set(e,!0),r.enclosed.push(t),r.variables.set(e,t),t.single_use=!1,!s)||t.references.length==t.replaced||t.orig.length==t.eliminated||1==t.orig.length&&o.functions.has(e)||!$e(t.orig,function(e){return!(e instanceof O||(e instanceof Fe?e.unused||t.scope.resolve()===o:e instanceof D))})||(n=t.orig[0])instanceof fe||p.push(Ge(je,n,{body:ur(i,or(n))}))}),h=Object.create(null),d=new qt,g&&$e(n.args,function(e){return!(e instanceof Me)})?(m=n.args.slice(),o.argnames.forEach(function(e){var t=m.shift();e.unused?t&&p.push(Ge(je,n,{body:t})):(t=Ge(ze,n,{name:e.convert_symbol(AST_SymbolVar,_),value:t||Ge(Ve,n).transform(i)}),e instanceof Fe&&cr(e.definition(),t),p.push(Ge(ee,n,{definitions:[t]})))}),m.length&&p.push(Ge(je,n,{body:We(n,m)}))):p.push(Ge(ee,n,{definitions:[Ge(ze,n,{name:Ge(st,n,{elements:o.argnames.map(function(e){return e.unused?Ge(ce,e):e.convert_symbol(AST_SymbolVar,_)}),rest:o.rest&&o.rest.convert_symbol(AST_SymbolVar,_)}),value:Ge(be,n,{elements:n.args.slice()})})]})),d.each(function(e,t){t=h[t];[].unshift.apply(t.orig,e),t.eliminated+=e.length}),[].push.apply(p,s?o.body.filter(function(e){var t,n;return!(e instanceof le&&((n=(t=Ge(AST_SymbolVar,or(e.name))).definition()).fixed=!1,n.orig.push(t),n.eliminated++,p.push(Ge(ee,e,{definitions:[Ge(ze,e,{name:t,value:yi(e,!0)})]})),1))}):o.body),t=Ge(Se,n,{body:p}),e||(u&&bi(t,function(e){var t=e.value;$n(t)||(e.value=Ge(Xe,n,{expression:t}))}),p.push(Ge(Ne,n,{value:yn(r)?Ge(Ve,n).transform(i):null}))),t}}}}}}}function _(e,t){t=t.definition();h[t.id]=t,d.add(t.id,e)}}),e(Ae,function(e,t,n,i,r){var s=this.consequent.try_inline(e,t,n,i,r),e=this.alternative.try_inline(e,t,n,i,r);if(s||e)return Ge(Ce,this,{condition:this.condition,body:s||o(this.consequent),alternative:e||o(this.alternative)});function o(e){return n?Ge(je,e,{body:e}):Ge(Ne,e,{value:e})}}),e(pt,function(e,t,n,i){var r=this.body.try_inline(e,t,!0,!0),s=(r&&(this.body=r),this.init);return(s=s&&s.try_inline(e,t,!0,i))?(this.init=null,s instanceof Se?(s.body.push(this),s):Ge(Se,s,{body:[s,this]})):r&&this}),e(ht,function(e,t,n,i){var r=this.body.try_inline(e,t,!0,!0),s=(r&&(this.body=r),this.object);if(s instanceof Re){e=lr(e,t,!0,i,!1,s,1);if(e)return this.object=s.tail_node(),e.body.push(this),e}return r&&this}),e(Ce,function(e,t,n,i){var r=this.body.try_inline(e,t,n,i),s=(r&&(this.body=r),this.alternative),n=((s=s&&s.try_inline(e,t,n,i))&&(this.alternative=s),this.condition);if(n instanceof Re){e=lr(e,t,!0,i,!1,n,1);if(e)return this.condition=n.tail_node(),e.body.push(this),e}return(r||s)&&this}),e(mt,function(e,t,n,i){e=this.body.try_inline(e,t,!0,!0);if(e)return this.body=e,this}),e(ue,function(e,t,n,i){e=this.body.try_inline(e,t,n,i);if(e)return this.body instanceof mt&&e instanceof Se?(t=e.body.pop(),this.body=t,e.body.push(this),e):(this.body=e,this)}),e(p,he),e(Ne,function(e,t,n,i){var r=this.value;return r&&r.try_inline(e,t,void 0,"try"===i)}),e(Re,function(e,t,n,i,r){return lr(e,t,n,i,r,this)}),e(je,function(e,t,n,i){for(var r=this.body;r instanceof Be;){var s=r.operator;if(unary_side_effects[s])break;if("void"==s)break;r=r.expression}return(r=n||$n(r)?r:Ge(Be,this,{operator:"void",expression:r})).try_inline(e,t,n||!1,i)}),e(Be,function(n,e,t,i,r){var s=this,o=s.operator;if(!unary_side_effects[o]){e=s.expression.try_inline(n,e,t=t||"void"!=o?t:!1,i,r);if(e)return t||bi(e,function(e){e.in_bool=!1;var t=e.value;"void"==o&&$n(t)||(e.value=Ge(Be,s,{operator:o,expression:t||Ge(Ve,e).transform(n)}))}),e}}),e(Lt,function(e,t,n,i){var n=this.body.try_inline(e,t,n,i),r=(n&&(this.body=n),this.expression);if(r instanceof Re){e=lr(e,t,!0,i,!1,r,1);if(e)return this.expression=r.tail_node(),e.body.push(this),e}return n&&this}),e(Rt,function(e,t,n,i){if(e.option("yields")&&this.nested){var r=this.expression;if("Call"==r.TYPE){var s=r.expression;switch(s.CTOR){case AST_AsyncGeneratorFunction:s=Ge(AST_AsyncFunction,s);break;case AST_GeneratorFunction:s=Ge(dt,s);break;default:return}return(r=r.clone()).expression=s,r.try_inline(e,t,n,i)}}}),t(Ne,function(e,t){var n=e.value;return n&&t.option("side_effects")&&$n(n,t)&&!yn(t.find_parent(Le))&&(e.value=null),e}),{Compressor:K}}),define("skylark-uglifyjs/sourcemap",["./utils"],function(e){"use strict";const{characters:t,Dictionary:r}=e;var i=t("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),v=i.reduce(function(e,t,n){return e[t]=n,e},Object.create(null));function y(e){var t="";e=Math.abs(e)<<1|e>>>31;do{var n=31&e}while((e>>>=5)&&(n|=32),t+=i[n],e);return t}function n(){var n=new r,i=[];return i.index=function(e){var t=n.get(e);return 0<=t||(t=i.length,i.push(e),n.set(e,t)),t},i}return{SourceMap:function(f){var o,a=n(),s=f.includeSources&&new r,c=n(),u="",l=(f.orig&&Object.keys(f.orig).forEach(function(e){var t=f.orig[e],n=[0,0,1,0,0];if(f.orig[e]={names:t.names,mappings:t.mappings.split(/;/).map(function(e){return n[0]=0,e.split(/,/).map(function(e){return n.slice(0,function(e,t){for(var n=0,i=0,r=0,s=0;r<t.length;r++){var o=v[t[r]];n+=(31&o)<<i,32&o?i+=5:(e[s++]+=1&n?2147483648|-(n>>1):n>>1,n=i=0)}return s}(n,e))})}),sources:t.sources},s&&t.sourcesContent)for(var i=0;i<t.sources.length;i++){var r=t.sourcesContent[i];r&&s.set(t.sources[i],r)}}),1),p=0,h=0,d=1,m=0,g=0;return{add:f.orig?function(e,t,n,i,r,s){var o=f.orig[e];if(o){var a,c=o.mappings[i-1];if(!c)return;for(var u=0;u<c.length;u++){var l=c[u][0];if(l<=r&&(a=c[u]),r<=l)break}!a||a.length<4?e=null:(e=o.sources[a[1]],i=a[2],r=a[3],4<a.length&&(s=o.names[a[4]]))}_(e,t,n,i,r,s)}:_,setSourceContent:s?function(e,t){s.has(e)||s.set(e,t)}:noop,toString:function(){return JSON.stringify({version:3,file:f.filename||void 0,sourceRoot:f.root||void 0,sources:a,sourcesContent:s?a.map(function(e){return s.get(e)||null}):void 0,names:c,mappings:u})}};function _(e,t,n,i,r,s){if(null!=o||null!=e){if(o=e,l<t)for(p=0;u+=";",++l<t;);else u&&(u+=",");u+=y(n-p),p=n,null!=e&&(n=a.index(e),u+=y(n-h),h=n,u+=y(i-d),d=i,u+=y(r-m),m=r,f.names)&&null!=s&&(e=c.index(s),u+=y(e-g),g=e)}}}}}),define("skylark-uglifyjs/propmangle",["./utils","./ast","./scope"],function(e,t,n){"use strict";const{defaults:m,push_uniq:i,Dictionary:g}=e,_=n["base54"],{AST_Binary:v,AST_Conditional:y,AST_Dot:b,AST_ObjectProperty:x,AST_Sequence:w,AST_String:S,AST_Sub:k,TreeWalker:A}=t;function T(){var t=new g,e=(["NaN","null","true","false","Infinity","-Infinity","undefined"].forEach(n),["encodeURI","encodeURIComponent","escape","eval","decodeURI","decodeURIComponent","isFinite","isNaN","parseFloat","parseInt","unescape"].forEach(n),Function("return this")());return["Array","ArrayBuffer","Atomics","BigInt","Boolean","console","DataView","Date","Error","Function","Int8Array","Intl","JSON","Map","Math","Number","Object","Promise","Proxy","Reflect","RegExp","Set","String","Symbol","WebAssembly"].forEach(function(t){n(t);t=e[t];if(t&&(Object.getOwnPropertyNames(t).map(n),"function"==typeof t)){t.__proto__&&Object.getOwnPropertyNames(t.__proto__).map(n),t.prototype&&Object.getOwnPropertyNames(t.prototype).map(n);try{Object.getOwnPropertyNames(new t).map(n)}catch(e){try{Object.getOwnPropertyNames(t()).map(n)}catch(e){}}}}),(T=function(){return t.clone()})();function n(e){t.set(e,!0)}}function E(e,t){e instanceof y?(E(e.consequent,t),E(e.alternative,t)):e instanceof w?E(e.tail_node(),t):e instanceof S&&t(e.value)}return{mangle_properties:function(e,n){var i,r,t=(n=m(n,{builtins:!1,cache:null,debug:!1,domprops:!1,keep_quoted:!1,regex:null,reserved:null},!0)).builtins?new g:T(),s=(n.domprops||"undefined"==typeof domprops||domprops.forEach(function(e){t.set(e,!0)}),Array.isArray(n.reserved)&&n.reserved.forEach(function(e){t.set(e,!0)}),-1),o=(n.cache?(i=n.cache.props).each(function(e){t.set(e,!0)}):i=new g,n.regex),a=!1!==n.debug,c=(a&&(r=!0===n.debug?"":n.debug),new g),u=t.clone();function l(e){return!u.has(e)&&!/^-?[0-9]+(\.[0-9]+)?(e[+-][0-9]+)?$/.test(e)}function f(e){if(t.has(e))AST_Node.info("Preserving reserved property {this}",e);else{if(!o||o.test(e))return i.has(e)||c.has(e);AST_Node.info("Preserving excluded property {this}",e)}}function p(e){l(e)&&c.set(e,!0),f(e)||u.set(e,!0)}function h(e){if(!f(e))return e;var t,n=i.get(e);if(!n){if(!(n=a&&l(t="_$"+e+"$"+r+"_")?t:n))for(;!l(n=_(++s)););/^#/.test(e)&&(n="#"+n),i.set(e,n)}return AST_Node.info("Mapping property {name} to {mangled}",{mangled:n,name:e}),n}function d(e){e instanceof w?d(e.tail_node()):e instanceof S?e.value=h(e.value):e instanceof y&&(d(e.consequent),d(e.alternative))}e.walk(new A(function(e){if("Call"==e.TYPE){var t=e.expression;if(t instanceof b)switch(t.property){case"defineProperty":case"getOwnPropertyDescriptor":e.args.length<2||(t=t.expression)instanceof AST_SymbolRef&&"Object"==t.name&&t.definition().undeclared&&E(e.args[1],p);break;case"hasOwnProperty":e.args.length<1||E(e.args[0],p)}}else e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof x?e.key instanceof AST_Node?E(e.key,p):p(e.key):e instanceof b?is_lhs(e,this.parent())&&p(e.property):e instanceof k&&is_lhs(e,this.parent())&&E(e.property,p)})),e.walk(new A(function(e){if(e instanceof v)"in"==e.operator&&d(e.left);else if("Call"==e.TYPE){var t=e.expression;if(t instanceof b)switch(t.property){case"defineProperty":case"getOwnPropertyDescriptor":e.args.length<2||(t=t.expression)instanceof AST_SymbolRef&&"Object"==t.name&&t.definition().undeclared&&d(e.args[1]);break;case"hasOwnProperty":e.args.length<1||d(e.args[0])}}else e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof x?e.key instanceof AST_Node?d(e.key):e.key=h(e.key):e instanceof b?e.property=h(e.property):e instanceof k&&(n.keep_quoted||d(e.property))}))},reserve_quoted_keys:function(e,t){function n(e){i(t,e)}e.walk(new A(function(e){e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof x?e.key instanceof AST_Node?E(e.key,n):e.start&&e.start.quote&&n(e.key):e instanceof b?e.quoted&&n(e.property):e instanceof k&&E(e.property,n)}))}}}),define("skylark-uglifyjs/minify",["./utils","./ast","./parse","./output","./compress","./sourcemap","./propmangle"],function(e,t,n,i,r,s,o){"use strict";const{defaults:h,HOP:d}=e,{AST_Toplevel:m,AST_Node:g}=t,_=n["parse"],v=i["OutputStream"],y=r["Compressor"],b=s["SourceMap"],{mangle_properties:x,reserve_quoted_keys:w}=o;var S,k;function A(t){try{return JSON.parse(t)}catch(e){throw new Error("invalid input source map: "+t)}}function T(t,n,e){e.forEach(function(e){n[e]&&("object"!=typeof n[e]&&(n[e]={}),t in n[e]||(n[e][t]=n[t]))})}function E(e){e&&("props"in e?e.props instanceof Dictionary||(e.props=Dictionary.fromObject(e.props)):e.props=new Dictionary)}function C(e){return{props:e.props.toObject()}}return k="undefined"==typeof Buffer?(S=atob,btoa):void 0===Buffer.alloc?(S=function(e){return new Buffer(e,"base64").toString()},function(e){return new Buffer(e).toString("base64")}):(S=function(e){return Buffer.from(e,"base64").toString()},function(e){return Buffer.from(e).toString("base64")}),{minify:function(i,r){try{(r=h(r,{annotations:void 0,compress:{},enclose:!1,expression:!1,ie:!1,ie8:!1,keep_fargs:!1,keep_fnames:!1,mangle:{},module:!1,nameCache:null,output:{},parse:{},rename:void 0,sourceMap:!1,timings:!1,toplevel:!(!r||!r.module),v8:!1,validate:!1,warnings:!1,webkit:!1,wrap:!1},!0)).validate&&g.enable_validation();var e,s,t=r.timings&&{start:Date.now()},n=(void 0!==r.annotations&&T("annotations",r,["compress","output"]),r.expression&&T("expression",r,["compress","parse"]),r.ie8&&(r.ie=r.ie||r.ie8),r.ie&&T("ie",r,["compress","mangle","output","rename"]),r.keep_fargs&&T("keep_fargs",r,["compress","mangle","rename"]),r.keep_fnames&&T("keep_fnames",r,["compress","mangle","rename"]),r.module&&T("module",r,["compress","parse"]),r.toplevel&&T("toplevel",r,["compress","mangle","rename"]),r.v8&&T("v8",r,["mangle","output","rename"]),r.webkit&&T("webkit",r,["compress","mangle","output","rename"]),r.mangle&&(r.mangle=h(r.mangle,{cache:r.nameCache&&(r.nameCache.vars||{}),eval:!1,ie:!1,keep_fargs:!1,keep_fnames:!1,properties:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1},!0),r.mangle.properties&&("object"!=typeof r.mangle.properties&&(r.mangle.properties={}),r.mangle.properties.keep_quoted&&(e=r.mangle.properties.reserved,Array.isArray(e)||(e=[]),r.mangle.properties.reserved=e),!r.nameCache||"cache"in r.mangle.properties||(r.mangle.properties.cache=r.nameCache.props||{})),E(r.mangle.cache),E(r.mangle.properties.cache)),void 0===r.rename&&(r.rename=r.compress&&r.mangle),r.sourceMap&&(r.sourceMap=h(r.sourceMap,{content:null,filename:null,includeSources:!1,names:!0,root:null,url:null},!0)),[]);if(r.warnings&&g.log_function(function(e){n.push(e)},"verbose"==r.warnings),t&&(t.parse=Date.now()),r.parse=r.parse||{},i instanceof g)s=i;else{"string"==typeof i&&(i=[i]),r.parse.toplevel=null;var o,a=r.sourceMap&&r.sourceMap.content;for(l in(a="string"==typeof a&&"inline"!=a?A(a):a)&&(r.sourceMap.orig=Object.create(null)),i)d(i,l)&&(r.parse.filename=l,r.parse.toplevel=s=_(i[l],r.parse),"inline"==a?(o=function(e,t){for(var n=t.end.comments_after,i=n.length;0<=--i;){var r=n[i];if("comment1"!=r.type)break;r=/^# ([^\s=]+)=(\S+)\s*$/.exec(r.value);if(!r)break;if("sourceMappingURL"==r[1]){if(r=/^data:application\/json(;.*?)?;base64,([^,]+)$/.exec(r[2]))return S(r[2]);break}}g.warn("inline source map not found: {name}",{name:e})}(l,s))&&(r.sourceMap.orig[l]=A(o)):a&&(r.sourceMap.orig[l]=a))}r.parse.expression&&(s=s.wrap_expression()),e&&w(s,e),["enclose","wrap"].forEach(function(e){var t,n=r[e];n&&(t=s.print_to_string().slice(0,-1),s=s[e](n),i[s.start.file]=s.print_to_string().replace(t,""))}),r.validate&&s.validate_ast(),t&&(t.rename=Date.now()),r.rename&&(s.figure_out_scope(r.rename),s.expand_names(r.rename)),t&&(t.compress=Date.now()),r.compress&&(s=new y(r.compress).compress(s),r.validate)&&s.validate_ast(),t&&(t.scope=Date.now()),r.mangle&&s.figure_out_scope(r.mangle),t&&(t.mangle=Date.now()),r.mangle&&(s.compute_char_frequency(r.mangle),s.mangle_names(r.mangle)),t&&(t.properties=Date.now()),e&&w(s,e),r.mangle&&r.mangle.properties&&x(s,r.mangle.properties),r.parse.expression&&(s=s.unwrap_expression()),t&&(t.output=Date.now());var c={},u=h(r.output,{ast:!1,code:!0});if(u.ast&&(c.ast=s),u.code){if(r.sourceMap&&(u.source_map=b(r.sourceMap),r.sourceMap.includeSources)){if(i instanceof m)throw new Error("original source content unavailable");for(var l in i)d(i,l)&&u.source_map.setSourceContent(l,i[l])}delete u.ast,delete u.code;var f,p=v(u);s.print(p),c.code=p.get(),r.sourceMap&&(c.map=u.source_map.toString(),f=r.sourceMap.url)&&(c.code=c.code.replace(/\n\/\/# sourceMappingURL=\S+\s*$/,""),c.code+="inline"==f?"\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,"+k(c.map):"\n//# sourceMappingURL="+f)}return r.nameCache&&r.mangle&&(r.mangle.cache&&(r.nameCache.vars=C(r.mangle.cache)),r.mangle.properties)&&r.mangle.properties.cache&&(r.nameCache.props=C(r.mangle.properties.cache)),t&&(t.end=Date.now(),c.timings={parse:.001*(t.rename-t.parse),rename:.001*(t.compress-t.rename),compress:.001*(t.scope-t.compress),scope:.001*(t.mangle-t.scope),mangle:.001*(t.properties-t.mangle),properties:.001*(t.output-t.properties),output:.001*(t.end-t.output),total:.001*(t.end-t.start)}),n.length&&(c.warnings=n),c}catch(e){return{error:e}}finally{g.log_function(),g.disable_validation()}}}}),define("skylark-uglifyjs/main",["./minify"],function(e){return e}),define("skylark-uglifyjs",["skylark-uglifyjs/main"],function(e){return e}),define("skylark-rjs/uglifyjs",["skylark-uglifyjs"],function(e){return e}),define("skylark-sourcemap/util",[],function(){"use strict";var t=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,r=/^data:.+\,.+$/;function a(e){e=e.match(t);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}function c(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function s(e){var t=e,n=a(e);if(n){if(!n.path)return e;t=n.path}for(var i,e=u(t),r=t.split(/\/+/),s=0,o=r.length-1;0<=o;o--)"."===(i=r[o])?r.splice(o,1):".."===i?s++:0<s&&(""===i?(r.splice(o+1,s),s=0):(r.splice(o,2),s--));return""===(t=r.join("/"))&&(t=e?"/":"."),n?(n.path=t,c(n)):t}function i(e,t){""===e&&(e=".");var n=a(t=""===t?".":t),i=a(e);return i&&(e=i.path||"/"),n&&!n.scheme?(i&&(n.scheme=i.scheme),c(n)):n||t.match(r)?t:!i||i.host||i.path?(n="/"===t.charAt(0)?t:s(e.replace(/\/+$/,"")+"/"+t),i?(i.path=n,c(i)):n):(i.host=t,c(i))}function u(e){return"/"===e.charAt(0)||t.test(e)}var e=!("__proto__"in Object.create(null));function n(e){return e}function o(e){if(e){var t=e.length;if(!(t<9)&&95===e.charCodeAt(t-1)&&95===e.charCodeAt(t-2)&&111===e.charCodeAt(t-3)&&116===e.charCodeAt(t-4)&&111===e.charCodeAt(t-5)&&114===e.charCodeAt(t-6)&&112===e.charCodeAt(t-7)&&95===e.charCodeAt(t-8)&&95===e.charCodeAt(t-9)){for(var n=t-10;0<=n;n--)if(36!==e.charCodeAt(n))return;return 1}}}function l(e,t){return e===t?0:null===e||null!==t&&t<e?1:-1}return{toSetString:e?n:function(e){return o(e)?"$"+e:e},fromSetString:e?n:function(e){return o(e)?e.slice(1):e},compareByOriginalPositions:function(e,t,n){var i=l(e.source,t.source);return 0!==i||0!=(i=e.originalLine-t.originalLine)||0!=(i=e.originalColumn-t.originalColumn)||n||0!=(i=e.generatedColumn-t.generatedColumn)||0!=(i=e.generatedLine-t.generatedLine)?i:l(e.name,t.name)},isAbsolute:u,compareByGeneratedPositionsDeflated:function(e,t,n){var i=e.generatedLine-t.generatedLine;return 0!=i||0!=(i=e.generatedColumn-t.generatedColumn)||n||0!==(i=l(e.source,t.source))||0!=(i=e.originalLine-t.originalLine)||0!=(i=e.originalColumn-t.originalColumn)?i:l(e.name,t.name)},compareByGeneratedPositionsInflated:function(e,t){var n=e.generatedLine-t.generatedLine;return 0!=n||0!=(n=e.generatedColumn-t.generatedColumn)||0!==(n=l(e.source,t.source))||0!=(n=e.originalLine-t.originalLine)||0!=(n=e.originalColumn-t.originalColumn)?n:l(e.name,t.name)},parseSourceMapInput:function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},getArg:function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')},urlParse:a,urlGenerate:c,normalize:s,join:i,relative:function(e,t){e=(e=""===e?".":e).replace(/\/$/,"");for(var n=0;0!==t.indexOf(e+"/");){var i=e.lastIndexOf("/");if(i<0)return t;if((e=e.slice(0,i)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)},computeSourceURL:function(e,t,n){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),n){e=a(n);if(!e)throw new Error("sourceMapURL could not be parsed");e.path&&0<=(n=e.path.lastIndexOf("/"))&&(e.path=e.path.substring(0,n+1)),t=i(c(e),t)}return s(t)}}}),define("skylark-sourcemap/array-set",["./util"],function(s){"use strict";var o=Object.prototype.hasOwnProperty,a="undefined"!=typeof Map;function c(){this._array=[],this._set=a?new Map:Object.create(null)}return c.fromArray=function(e,t){for(var n=new c,i=0,r=e.length;i<r;i++)n.add(e[i],t);return n},c.prototype.size=function(){return a?this._set.size:Object.getOwnPropertyNames(this._set).length},c.prototype.add=function(e,t){var n=a?e:s.toSetString(e),i=a?this.has(e):o.call(this._set,n),r=this._array.length;i&&!t||this._array.push(e),i||(a?this._set.set(e,r):this._set[n]=r)},c.prototype.has=function(e){return a?this._set.has(e):(e=s.toSetString(e),o.call(this._set,e))},c.prototype.indexOf=function(e){if(a){var t=this._set.get(e);if(0<=t)return t}else{t=s.toSetString(e);if(o.call(this._set,t))return this._set[t]}throw new Error('"'+e+'" is not in the set.')},c.prototype.at=function(e){if(0<=e&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},c.prototype.toArray=function(){return this._array.slice()},c}),define("skylark-sourcemap/base64",[],function(){"use strict";var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return{encode:function(e){if(0<=e&&e<t.length)return t[e];throw new TypeError("Must be between 0 and 63: "+e)},decode:function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}}}),define("skylark-sourcemap/base64-vlq",["./base64"],function(u){"use strict";return{encode:function(e){for(var t,n="",i=(e=e)<0?1+(-e<<1):e<<1;t=31&i,0<(i>>>=5)&&(t|=32),n+=u.encode(t),0<i;);return n},decode:function(e,t,n){var i,r,s,o=e.length,a=0,c=0;do{if(o<=t)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(r=u.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1))}while(i=!!(32&r),a+=(r&=31)<<c,c+=5,i);n.value=(s=a>>1,1==(1&a)?-s:s),n.rest=t}}}),define("skylark-sourcemap/binary-search",[],function(){"use strict";const u=2;return{GREATEST_LOWER_BOUND:1,LEAST_UPPER_BOUND:u,search:function(e,t,n,i){if(0===t.length)return-1;var r=function e(t,n,i,r,s,o){var a=Math.floor((n-t)/2)+t,c=s(i,r[a],!0);return 0===c?a:0<c?1<n-a?e(a,n,i,r,s,o):o==u?n<r.length?n:-1:a:1<a-t?e(t,a,i,r,s,o):o==u?a:t<0?-1:t}(-1,t.length,e,t,n,i||1);if(r<0)return-1;for(;0<=r-1&&0===n(t[r],t[r-1],!0);)--r;return r}}}),define("skylark-sourcemap/mapping-list",["./util"],function(a){"use strict";function e(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return e.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},e.prototype.add=function(e){var t,n,i,r,s,o;t=this._last,n=e,i=t.generatedLine,r=n.generatedLine,s=t.generatedColumn,o=n.generatedColumn,i<r||r==i&&s<=o||a.compareByGeneratedPositionsInflated(t,n)<=0?this._last=e:this._sorted=!1,this._array.push(e)},e.prototype.toArray=function(){return this._sorted||(this._array.sort(a.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},e}),define("skylark-sourcemap/quick-sort",[],function(){"use strict";function u(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function l(e,t,n,i){if(n<i){c=i;for(var r=(a=n)-1,s=(u(e,Math.round(a+Math.random()*(c-a)),i),e[i]),o=n;o<i;o++)t(e[o],s)<=0&&u(e,r+=1,o);u(e,r+1,o);c=r+1;l(e,t,n,c-1),l(e,t,c+1,i)}var a,c}return{quickSort:function(e,t){l(e,t,0,e.length-1)}}}),define("skylark-sourcemap/source-map-consumer",["./util","./binary-search","./array-set","./base64-vlq","./quick-sort"],function(v,c,p,y,b){"use strict";function o(e,t){var n=e;return new(null!=(n="string"==typeof e?v.parseSourceMapInput(e):n).sections?i:h)(n,t)}function h(e,t){var n=e,e=("string"==typeof e&&(n=v.parseSourceMapInput(e)),v.getArg(n,"version")),i=v.getArg(n,"sources"),r=v.getArg(n,"names",[]),s=v.getArg(n,"sourceRoot",null),o=v.getArg(n,"sourcesContent",null),a=v.getArg(n,"mappings"),n=v.getArg(n,"file",null);if(e!=this._version)throw new Error("Unsupported version: "+e);s=s&&v.normalize(s),i=i.map(String).map(v.normalize).map(function(e){return s&&v.isAbsolute(s)&&v.isAbsolute(e)?v.relative(s,e):e}),this._names=p.fromArray(r.map(String),!0),this._sources=p.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(e){return v.computeSourceURL(s,e,t)}),this.sourceRoot=s,this.sourcesContent=o,this._mappings=a,this._sourceMapURL=t,this.file=n}function x(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function i(e,r){var t=e,e=("string"==typeof e&&(t=v.parseSourceMapInput(e)),v.getArg(t,"version")),t=v.getArg(t,"sections");if(e!=this._version)throw new Error("Unsupported version: "+e);this._sources=new p,this._names=new p;var s={line:-1,column:0};this._sections=t.map(function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=v.getArg(e,"offset"),n=v.getArg(t,"line"),i=v.getArg(t,"column");if(n<s.line||n===s.line&&i<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=t,{generatedOffset:{generatedLine:n+1,generatedColumn:i+1},consumer:new o(v.getArg(e,"map"),r)}})}return o.fromSourceMap=function(e,t){return h.fromSourceMap(e,t)},o.prototype._version=3,o.prototype.__generatedMappings=null,Object.defineProperty(o.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),o.prototype.__originalMappings=null,Object.defineProperty(o.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),o.prototype._charIsMappingSeparator=function(e,t){e=e.charAt(t);return";"===e||","===e},o.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},o.GENERATED_ORDER=1,o.ORIGINAL_ORDER=2,o.GREATEST_LOWER_BOUND=1,o.LEAST_UPPER_BOUND=2,o.prototype.eachMapping=function(e,t,n){var i,t=t||null;switch(n||o.GENERATED_ORDER){case o.GENERATED_ORDER:i=this._generatedMappings;break;case o.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var r=this.sourceRoot;i.map(function(e){var t=null===e.source?null:this._sources.at(e.source);return{source:v.computeSourceURL(r,t,this._sourceMapURL),generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,t)},o.prototype.allGeneratedPositionsFor=function(e){var t=v.getArg(e,"line"),n={source:v.getArg(e,"source"),originalLine:t,originalColumn:v.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],r=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",v.compareByOriginalPositions,c.LEAST_UPPER_BOUND);if(0<=r){var s=this._originalMappings[r];if(void 0===e.column)for(var o=s.originalLine;s&&s.originalLine===o;)i.push({line:v.getArg(s,"generatedLine",null),column:v.getArg(s,"generatedColumn",null),lastColumn:v.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++r];else for(var a=s.originalColumn;s&&s.originalLine===t&&s.originalColumn==a;)i.push({line:v.getArg(s,"generatedLine",null),column:v.getArg(s,"generatedColumn",null),lastColumn:v.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++r]}return i},(h.prototype=Object.create(o.prototype)).consumer=o,h.prototype._findSourceIndex=function(e){var t,n=e;if(null!=this.sourceRoot&&(n=v.relative(this.sourceRoot,n)),this._sources.has(n))return this._sources.indexOf(n);for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==e)return t;return-1},h.fromSourceMap=function(e,t){for(var n=Object.create(h.prototype),i=n._names=p.fromArray(e._names.toArray(),!0),r=n._sources=p.fromArray(e._sources.toArray(),!0),s=(n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=t,n._absoluteSources=n._sources.toArray().map(function(e){return v.computeSourceURL(n.sourceRoot,e,t)}),e._mappings.toArray().slice()),o=n.__generatedMappings=[],a=n.__originalMappings=[],c=0,u=s.length;c<u;c++){var l=s[c],f=new x;f.generatedLine=l.generatedLine,f.generatedColumn=l.generatedColumn,l.source&&(f.source=r.indexOf(l.source),f.originalLine=l.originalLine,f.originalColumn=l.originalColumn,l.name&&(f.name=i.indexOf(l.name)),a.push(f)),o.push(f)}return b(n.__originalMappings,v.compareByOriginalPositions),n},h.prototype._version=3,Object.defineProperty(h.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),h.prototype._parseMappings=function(e,t){for(var n,i,r,s,o=1,a=0,c=0,u=0,l=0,f=0,p=e.length,h=0,d={},m={},g=[],_=[];h<p;)if(";"===e.charAt(h))o++,h++,a=0;else if(","===e.charAt(h))h++;else{for((n=new x).generatedLine=o,s=h;s<p&&!this._charIsMappingSeparator(e,s);s++);if(r=d[i=e.slice(h,s)])h+=i.length;else{for(r=[];h<s;)y.decode(e,h,m),h=m.rest,r.push(m.value);if(2===r.length)throw new Error("Found a source, but no line and column");if(3===r.length)throw new Error("Found a source and line, but no column");d[i]=r}n.generatedColumn=a+r[0],a=n.generatedColumn,1<r.length&&(n.source=l+r[1],l+=r[1],n.originalLine=c+r[2],c=n.originalLine,n.originalLine+=1,n.originalColumn=u+r[3],u=n.originalColumn,4<r.length)&&(n.name=f+r[4],f+=r[4]),_.push(n),"number"==typeof n.originalLine&&g.push(n)}b(_,v.compareByGeneratedPositionsDeflated),this.__generatedMappings=_,b(g,v.compareByOriginalPositions),this.__originalMappings=g},h.prototype._findMapping=function(e,t,n,i,r,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return c.search(e,t,r,s)},h.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},h.prototype.originalPositionFor=function(e){var t={generatedLine:v.getArg(e,"line"),generatedColumn:v.getArg(e,"column")},e=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",v.compareByGeneratedPositionsDeflated,v.getArg(e,"bias",o.GREATEST_LOWER_BOUND));if(0<=e){var n,e=this._generatedMappings[e];if(e.generatedLine===t.generatedLine)return null!==(t=v.getArg(e,"source",null))&&(t=this._sources.at(t),t=v.computeSourceURL(this.sourceRoot,t,this._sourceMapURL)),null!==(n=v.getArg(e,"name",null))&&(n=this._names.at(n)),{source:t,line:v.getArg(e,"originalLine",null),column:v.getArg(e,"originalColumn",null),name:n}}return{source:null,line:null,column:null,name:null}},h.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e})},h.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(0<=n)return this.sourcesContent[n];var i,n=e;if(null!=this.sourceRoot&&(n=v.relative(this.sourceRoot,n)),null!=this.sourceRoot&&(i=v.urlParse(this.sourceRoot))){e=n.replace(/^file:\/\//,"");if("file"==i.scheme&&this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];if((!i.path||"/"==i.path)&&this._sources.has("/"+n))return this.sourcesContent[this._sources.indexOf("/"+n)]}if(t)return null;throw new Error('"'+n+'" is not in the SourceMap.')},h.prototype.generatedPositionFor=function(e){var t=v.getArg(e,"source"),t=this._findSourceIndex(t);if(!(t<0)){t={source:t,originalLine:v.getArg(e,"line"),originalColumn:v.getArg(e,"column")},e=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",v.compareByOriginalPositions,v.getArg(e,"bias",o.GREATEST_LOWER_BOUND));if(0<=e){e=this._originalMappings[e];if(e.source===t.source)return{line:v.getArg(e,"generatedLine",null),column:v.getArg(e,"generatedColumn",null),lastColumn:v.getArg(e,"lastGeneratedColumn",null)}}}return{line:null,column:null,lastColumn:null}},(i.prototype=Object.create(o.prototype)).constructor=o,i.prototype._version=3,Object.defineProperty(i.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),i.prototype.originalPositionFor=function(e){var t={generatedLine:v.getArg(e,"line"),generatedColumn:v.getArg(e,"column")},n=c.search(t,this._sections,function(e,t){var n=e.generatedLine-t.generatedOffset.generatedLine;return n||e.generatedColumn-t.generatedOffset.generatedColumn}),n=this._sections[n];return n?n.consumer.originalPositionFor({line:t.generatedLine-(n.generatedOffset.generatedLine-1),column:t.generatedColumn-(n.generatedOffset.generatedLine===t.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},i.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},i.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var i=this._sections[n].consumer.sourceContentFor(e,!0);if(i)return i}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},i.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var n=this._sections[t];if(-1!==n.consumer._findSourceIndex(v.getArg(e,"source"))){var i=n.consumer.generatedPositionFor(e);if(i)return{line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},i.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],r=i.consumer._generatedMappings,s=0;s<r.length;s++){var o=r[s],a=i.consumer._sources.at(o.source),a=v.computeSourceURL(i.consumer.sourceRoot,a,this._sourceMapURL),c=(this._sources.add(a),a=this._sources.indexOf(a),null),a=(o.name&&(c=i.consumer._names.at(o.name),this._names.add(c),c=this._names.indexOf(c)),{source:a,generatedLine:o.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:o.generatedColumn+(i.generatedOffset.generatedLine===o.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:o.originalLine,originalColumn:o.originalColumn,name:c});this.__generatedMappings.push(a),"number"==typeof a.originalLine&&this.__originalMappings.push(a)}b(this.__generatedMappings,v.compareByGeneratedPositionsDeflated),b(this.__originalMappings,v.compareByOriginalPositions)},{SourceMapConsumer:o,BasicSourceMapConsumer:h,IndexedSourceMapConsumer:i}}),define("skylark-sourcemap/source-map-generator",["./base64-vlq","./util","./array-set","./mapping-list"],function(h,d,t,n){"use strict";function e(e){this._file=d.getArg(e=e||{},"file",null),this._sourceRoot=d.getArg(e,"sourceRoot",null),this._skipValidation=d.getArg(e,"skipValidation",!1),this._sources=new t,this._names=new t,this._mappings=new n,this._sourcesContents=null}return e.prototype._version=3,e.fromSourceMap=function(n){var i=n.sourceRoot,r=new e({file:n.file,sourceRoot:i});return n.eachMapping(function(e){var t={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(t.source=e.source,null!=i&&(t.source=d.relative(i,t.source)),t.original={line:e.originalLine,column:e.originalColumn},null!=e.name)&&(t.name=e.name),r.addMapping(t)}),n.sources.forEach(function(e){var t=e,t=(null!==i&&(t=d.relative(i,e)),r._sources.has(t)||r._sources.add(t),n.sourceContentFor(e));null!=t&&r.setSourceContent(e,t)}),r},e.prototype.addMapping=function(e){var t=d.getArg(e,"generated"),n=d.getArg(e,"original",null),i=d.getArg(e,"source",null),e=d.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,n,i,e),null!=i&&(i=String(i),this._sources.has(i)||this._sources.add(i)),null!=e&&(e=String(e),this._names.has(e)||this._names.add(e)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:i,name:e})},e.prototype.setSourceContent=function(e,t){null!=this._sourceRoot&&(e=d.relative(this._sourceRoot,e)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[d.toSetString(e)]=t):this._sourcesContents&&(delete this._sourcesContents[d.toSetString(e)],0===Object.keys(this._sourcesContents).length)&&(this._sourcesContents=null)},e.prototype.applySourceMap=function(n,e,i){var r=e;if(null==e){if(null==n.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');r=n.file}var s=this._sourceRoot,o=(null!=s&&(r=d.relative(s,r)),new t),a=new t;this._mappings.unsortedForEach(function(e){e.source===r&&null!=e.originalLine&&null!=(t=n.originalPositionFor({line:e.originalLine,column:e.originalColumn})).source&&(e.source=t.source,null!=i&&(e.source=d.join(i,e.source)),null!=s&&(e.source=d.relative(s,e.source)),e.originalLine=t.line,e.originalColumn=t.column,null!=t.name)&&(e.name=t.name);var t=e.source,t=(null==t||o.has(t)||o.add(t),e.name);null==t||a.has(t)||a.add(t)},this),this._sources=o,this._names=a,n.sources.forEach(function(e){var t=n.sourceContentFor(e);null!=t&&(null!=i&&(e=d.join(i,e)),null!=s&&(e=d.relative(s,e)),this.setSourceContent(e,t))},this)},e.prototype._validateMapping=function(e,t,n,i){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&0<e.line&&0<=e.column)||t||n||i)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&0<e.line&&0<=e.column&&0<t.line&&0<=t.column&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:i}))},e.prototype._serializeMappings=function(){for(var e,t,n,i=0,r=1,s=0,o=0,a=0,c=0,u="",l=this._mappings.toArray(),f=0,p=l.length;f<p;f++){if(e="",(t=l[f]).generatedLine!==r)for(i=0;t.generatedLine!==r;)e+=";",r++;else if(0<f){if(!d.compareByGeneratedPositionsInflated(t,l[f-1]))continue;e+=","}e+=h.encode(t.generatedColumn-i),i=t.generatedColumn,null!=t.source&&(n=this._sources.indexOf(t.source),e+=h.encode(n-c),c=n,e+=h.encode(t.originalLine-1-o),o=t.originalLine-1,e+=h.encode(t.originalColumn-s),s=t.originalColumn,null!=t.name)&&(n=this._names.indexOf(t.name),e+=h.encode(n-a),a=n),u+=e}return u},e.prototype._generateSourcesContent=function(e,t){return e.map(function(e){if(!this._sourcesContents)return null;null!=t&&(e=d.relative(t,e));e=d.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,e)?this._sourcesContents[e]:null},this)},e.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},e.prototype.toString=function(){return JSON.stringify(this.toJSON())},e}),define("skylark-sourcemap/source-node",["./source-map-generator","./util"],function(t,p){"use strict";var h=/(\r?\n)/,s="$$$isSourceNode$$$";function d(e,t,n,i,r){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==r?null:r,this[s]=!0,null!=i&&this.add(i)}return d.fromStringWithSourceMap=function(e,n,i){function r(){return e()+(e()||"");function e(){return a<o.length?o[a++]:void 0}}var s=new d,o=e.split(h),a=0,c=1,u=0,l=null;return n.eachMapping(function(e){if(null!==l){var t;if(!(c<e.generatedLine))return t=(n=o[a]||"").substr(0,e.generatedColumn-u),o[a]=n.substr(e.generatedColumn-u),u=e.generatedColumn,f(l,t),void(l=e);f(l,r()),c++,u=0}for(;c<e.generatedLine;)s.add(r()),c++;var n;u<e.generatedColumn&&(n=o[a]||"",s.add(n.substr(0,e.generatedColumn)),o[a]=n.substr(e.generatedColumn),u=e.generatedColumn),l=e},this),a<o.length&&(l&&f(l,r()),s.add(o.splice(a).join(""))),n.sources.forEach(function(e){var t=n.sourceContentFor(e);null!=t&&(null!=i&&(e=p.join(i,e)),s.setSourceContent(e,t))}),s;function f(e,t){var n;null===e||void 0===e.source?s.add(t):(n=i?p.join(i,e.source):e.source,s.add(new d(e.originalLine,e.originalColumn,n,t,e.name)))}},d.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},d.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;0<=t;t--)this.prepend(e[t]);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},d.prototype.walk=function(e){for(var t,n=0,i=this.children.length;n<i;n++)(t=this.children[n])[s]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},d.prototype.join=function(e){var t,n,i=this.children.length;if(0<i){for(t=[],n=0;n<i-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},d.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[s]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},d.prototype.setSourceContent=function(e,t){this.sourceContents[p.toSetString(e)]=t},d.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;t<n;t++)this.children[t][s]&&this.children[t].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),t=0,n=i.length;t<n;t++)e(p.fromSetString(i[t]),this.sourceContents[i[t]])},d.prototype.toString=function(){var t="";return this.walk(function(e){t+=e}),t},d.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},s=new t(e),o=!1,a=null,c=null,u=null,l=null;return this.walk(function(e,t){r.code+=e,null!==t.source&&null!==t.line&&null!==t.column?(a===t.source&&c===t.line&&u===t.column&&l===t.name||s.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:r.line,column:r.column},name:t.name}),a=t.source,c=t.line,u=t.column,l=t.name,o=!0):o&&(s.addMapping({generated:{line:r.line,column:r.column}}),a=null,o=!1);for(var n=0,i=e.length;n<i;n++)10===e.charCodeAt(n)?(r.line++,r.column=0,n+1===i?(a=null,o=!1):o&&s.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:r.line,column:r.column},name:t.name})):r.column++}),this.walkSourceContents(function(e,t){s.setSourceContent(e,t)}),{code:r.code,map:s}},d}),define("skylark-sourcemap/main",["./array-set","./base64-vlq","./binary-search","./mapping-list","./quick-sort","./source-map-consumer","./source-map-generator","./source-node","./util"],function(e,t,n,i,r,s,o,a,c){"use strict";return{ArraySet:e,base64VLQ:t,binarySearch:n,MappingList:i,quickSort:r,consumers:s,SourceMapGenerator:o,SourceNode:a,util:c}}),define("skylark-sourcemap",["skylark-sourcemap/main"],function(e){return e}),define("skylark-rjs/source-map",["skylark-sourcemap"],function(e){return e}),define("skylark-rjs/optimize",["./lang","./logger","./parse","./pragma","./uglifyjs","./source-map"],function(b,x,c,u,p,e){"use strict";var l,w=/\@import\s+(url\()?\s*([^);]+)\s*(\))?([\w, ]*)(;)?/gi,S=/\/\*[^\*]*@import[^\*]*\*\//g,t=/\url\(\s*([^\)]+)\s*\)?/g,f=/^\w+:/;e.SourceMapGenerator,e.SourceMapConsumer;function k(e){return e="'"!==(e=e.replace(/\s+$/,"")).charAt(0)&&'"'!==e.charAt(0)?e:e.substring(1,e.length-1)}function A(a,c,e,u){return e.replace(t,function(e,t){var n,i,r=k(t),s=(r=r.replace(b.backSlashRegExp,"/")).charAt(0),o=f.test(r);for("/"===s||"#"===s||o?o||x.trace(a+"\n  URL not a relative URL, skipping: "+t):t=u+c+r,i=(n=t.split("/")).length-1;0<i;i--)"."===n[i]?n.splice(i,1):".."===n[i]&&0!==i&&".."!==n[i-1]&&(n.splice(i-1,2),--i);return"url("+n.join("/")+")"})}return l={jsFile:function(e,t,n,i,r){var s=i.env.fs;t=t||s.readFile(e),t=l.js(e,t,n,i,r),s.saveUtf8File(n,t)},js:function(t,e,n,i,r){var s=String(i.optimize).split("."),o=s[0],s="keepLines"===s[1],a="";if(e=u.process(t,e,i=i||{},"OnSave",r),o&&"none"!==o){if(!(r=l.optimizers[o]))throw new Error('optimizer with name of "'+o+'" not found for this environment');o=i[o]||{},i.generateSourceMaps&&(o.generateSourceMaps=!!i.generateSourceMaps,o._buildSourceMap=i._buildSourceMap);try{if(i.preserveLicenseComments)try{a=c.getLicenseComments(t,e)}catch(e){throw new Error("Cannot parse file: "+t+" for comments. Skipping it. Error is:\n"+e.toString())}i.generateSourceMaps&&a&&(o.preamble=a,a=""),e=a+r(t,e,n,s,o,i.env.fs),o._buildSourceMap&&o._buildSourceMap!==i._buildSourceMap&&(i._buildSourceMap=o._buildSourceMap)}catch(e){if(i.throwWhen&&i.throwWhen.optimize)throw e;x.error(e)}}else i._buildSourceMap&&(i._buildSourceMap=null);return e},cssFile:function(t,e,n){var i,r,s,o=n.env.fs,a=o.readFile(t),c=function l(f,e,p,h,d,t,m){var n=(f=f.replace(b.backSlashRegExp,"/")).lastIndexOf("/"),g=-1!==n?f.substring(0,n+1):"",_=[],v=[],y=m.env.fs;return e=e.replace(S,""),p&&","!==p.charAt(p.length-1)&&(p+=","),e=e.replace(w,function(t,e,n,i,r){if(r&&"all"!==r.replace(/^\s\s*/,"").replace(/\s\s*$/,""))return v.push(f),t;if(n=k(n),p&&-1!==p.indexOf(n+","))return t;n=n.replace(b.backSlashRegExp,"/");try{var s,o,a,c="/"===n.charAt(0)?n:g+n,u=y.readFile(c);return d[c]?"":(d[c]=!0,u=(a=l(c,u,p,h,d,!1,m)).fileContents,a.importList.length&&_.push.apply(_,a.importList),a.skippedList.length&&v.push.apply(v,a.skippedList),o=-1!==(s=n.lastIndexOf("/"))?n.substring(0,s+1):"",u=A(n,o=o.replace(/^\.\//,""),u,h),_.push(c),u)}catch(e){return x.warn(f+"\n  Cannot inline css import, skipping: "+n),t}}),h&&t&&(e=A(f,"",e,h)),{importList:_,skippedList:v,fileContents:e}}(t,a,n.cssImportIgnore,n.cssPrefix,{},!0,n),u=c.skippedList.length?a:c.fileContents;c.skippedList.length&&x.warn("Cannot inline @imports for "+t+",\nthe following files had media queries in them:\n"+c.skippedList.join("\n"));try{if(-1===n.optimizeCss.indexOf(".keepComments"))for(i=0;-1!==(i=u.indexOf("/*",i));){if(-1===(r=u.indexOf("*/",i+2)))throw"Improper comment in CSS file: "+t;s=u.substring(i,r),i=!n.preserveLicenseComments||-1===s.indexOf("license")&&-1===s.indexOf("opyright")&&-1===s.indexOf("(c)")?(u=u.substring(0,i)+u.substring(r+2,u.length),0):r}u=-1===n.optimizeCss.indexOf(".keepLines")?(u=(u=(u=u.replace(/[\r\n]/g," ")).replace(/\s+/g," ")).replace(/\{\s/g,"{")).replace(/\s\}/g,"}"):(u=u.replace(/(\r\n)+/g,"\r\n")).replace(/(\n)+/g,"\n"),-1===n.optimizeCss.indexOf(".keepWhitespace")&&(u=(u=(u=(u=(u=(u=u.replace(/^[ \t]+/gm,"")).replace(/[ \t]+$/gm,"")).replace(/(;|:|\{|}|,)[ \t]+/g,"$1")).replace(/[ \t]+(\{)/g,"$1")).replace(/([ \t])+/g,"$1")).replace(/^[ \t]*[\r\n]/gm,""))}catch(e){u=a,x.error("Could not optimized CSS file: "+t+", error: "+e)}return o.saveUtf8File(e,u),a="\n"+e.replace(n.dir,"")+"\n----------------\n",c.importList.push(t),a+=c.importList.map(function(e){return e.replace(n.dir,"")}).join("\n"),{importList:c.importList,buildText:a+"\n"}},css:function(e,t){var n,i,r,s="",o=[],a=t.dir&&t.removeCombined,c=t.env.fs;if(-1!==t.optimizeCss.indexOf("standard")){if(r=c.getFilteredFileList(e,/\.css$/,!0))for(n=0;n<r.length;n++)i=r[n],x.trace("Optimizing ("+t.optimizeCss+") CSS file: "+i),s+=(i=l.cssFile(i,i,t)).buildText,a&&(i.importList.pop(),o=o.concat(i.importList));a&&o.forEach(function(e){c.exists(e)&&c.deleteFile(e)})}return s},optimizers:{uglify:function(t,e,n,i,r,s){var o,a,c,u={},l=n+".map",f=t&&t.split("/").pop();b.mixin(u,r=r||{},!0),r.preamble&&(u.output={preamble:r.preamble}),r.generateSourceMaps&&(n||r._buildSourceMap)&&(u.outSourceMap=f+".map",r._buildSourceMap?(a=JSON.parse(r._buildSourceMap),u.inSourceMap=a):s.exists(l)&&(u.inSourceMap=l,a=JSON.parse(s.readFile(l)))),x.trace("Uglify file: "+t);try{o=p.minify(e,u,f+".src.js"),u.outSourceMap&&o.map?(c=o.map,a||r._buildSourceMap||s.saveFile(n+".src.js",e),e=o.code,r._buildSourceMap?r._buildSourceMap=c:s.saveFile(n+".map",c)):e=o.code}catch(e){l=e.toString(),f=/SyntaxError/.test(l);throw new Error("Cannot uglify file: "+t+". Skipping it. Error is:\n"+l+(f?"\n\nIf the source uses ES2015 or later syntax, please pass \"optimize: 'none'\" to r.js and use an ES2015+ compatible minifier after running r.js. The included UglifyJS only understands ES5 or earlier syntax.":""))}return e}}}}),define("skylark-rjs/transform",["./esprima","./parse","./logger","./lang"],function(d,m,g,_){"use strict";var p,f=/^([ \t]+)/,h=/\{[\r\n]+([ \t]+)/,v=/^[_A-Za-z]([A-Za-z\d_]*)$/,y={"\n":/\n/g,"\r\n":/\r\n/g};return p={toTransport:function(c,r,u,t,s,n){n=n||{};function e(e){return e=n.useSourceUrl?'eval("'+_.jsEscape(e)+"\\n//# sourceURL="+(0===u.indexOf("/")?"":"/")+u+'");\n':e}var i,o,a,l,f=0,p=!1,h=[];try{i=d.parse(t,{loc:!0})}catch(e){return g.trace("toTransport skipping "+u+": "+e.toString()),t}return m.traverse(i,function(e){var t,n,i,r,s,o,a;if("VariableDeclarator"===e.type&&e.id&&"define"===e.id.name&&"Identifier"===e.id.type&&!((a=e.init)&&a.callee&&"CallExpression"===a.callee.type&&a.callee.callee&&"Identifier"===a.callee.callee.type&&"require"===a.callee.callee.name&&a.callee.arguments&&1===a.callee.arguments.length&&"Literal"===a.callee.arguments[0].type&&a.callee.arguments[0].value&&-1!==a.callee.arguments[0].value.indexOf("amdefine")))return!1;if(((a=c&&"CallExpression"===e.type&&e.callee&&e.callee.object&&"Identifier"===e.callee.object.type&&e.callee.object.name===c&&"Identifier"===e.callee.property.type&&"define"===e.callee.property.name)||m.isDefineNodeWithArgs(e))&&(t=e.arguments)&&t.length){if(n=(o=t[0]).loc,1===t.length)"Identifier"===o.type?(r=!0,s="empty"):m.isFnExpression(o)?(i=o,r=!0,s="scan"):"ObjectExpression"===o.type||"Literal"===o.type&&"number"==typeof o.value||"UnaryExpression"===o.type&&"-"===o.operator&&o.argument&&"Literal"===o.argument.type&&"number"==typeof o.argument.value?(r=!0,s="skip"):"MemberExpression"===o.type&&o.object&&o.property&&"Identifier"===o.property.type&&(r=!0,s="empty");else if("ArrayExpression"===o.type)r=!0,s="skip";else{if("Literal"!==o.type||"string"!=typeof o.value)return;r=!1,s=2===t.length&&m.isFnExpression(t[1])?(i=t[1],"scan"):"skip"}if((o={foundId:void 0,needsId:r,depAction:s,namespaceExists:a,node:e,defineLoc:e.loc,firstArgLoc:n,factoryNode:i,sourceUrlData:void 0}).needsId){if(l)return g.trace(u+" has more than one anonymous define. May be a built file from another build system like, Ender. Skipping normalization."),!(h=[]);l=o,h.push(o)}else"scan"===s&&(1<(f+=1)?p||(h=l?[l]:[],p=!0):h.push(o))}}),h.length&&(h.reverse(),o=t.split("\n"),a=function(e,t){var n=e.start.column,e=e.start.line-1,i=o[e];o[e]=i.substring(0,n)+t+i.substring(n,i.length)},h.forEach(function(e){var t,n="",i="";e.needsId&&r&&(n+="'"+r+"',"),"scan"===e.depAction&&(i=(t=m.getAnonDepsFromNode(e.factoryNode)).length?"["+t.map(function(e){return"'"+e+"'"})+"]":"[]",i+=",",e.factoryNode?a(e.factoryNode.loc,i):n+=i),n&&a(e.firstArgLoc,n),c&&!e.namespaceExists&&a(e.defineLoc,c+"."),s&&s(e)}),t=o.join("\n")),e(t)},modifyConfig:function(e,t){var n=m.findConfig(e),i=n.config;return(i=i&&t(i))?p.serializeConfig(i,e,n.range[0],n.range[1],{quote:n.quote}):e},serializeConfig:function(e,t,n,i,r){var s,o="",a=t.substring(0,n),c=t.substring(n,i),u=-1===c.indexOf("\r")?"\n":"\r\n",l=a.lastIndexOf("\n");return(l=f.exec(a.substring((l=-1===l?0:l)+1,n)))&&l[1]&&(o=l[1]),s=!(s=(l=h.exec(c))&&l[1]?l[1]:s)||s.length<o?"  ":s.substring(o.length),n=new RegExp("("+u+")"+s,"g"),c=p.objectToString(e,{indent:s,lineReturn:u,outDentRegExp:n,quote:r&&r.quote}),l=o,e=u,a+c.replace(y[e],"$&"+l)+t.substring(i)},objectToString:function(e,n,t){var i,r,s=!0,o="",a=n.lineReturn,c=n.indent,u=n.outDentRegExp,l=n.quote||'"',f=(t=t||"")+c;return null===e?o="null":void 0===e?o="undefined":"number"==typeof e||"boolean"==typeof e?o=e:"string"==typeof e?o=l+_.jsEscape(e)+l:_.isArray(e)?(_.each(e,function(e,t){o+=(0!==t?","+a:"")+f+p.objectToString(e,n,f)}),i="[",r="]"):_.isFunction(e)||_.isRegExp(e)?o=e.toString().replace(u,"$1"):(_.eachProp(e,function(e,t){o+=(s?"":","+a)+f+(v.test(t)?t:l+_.jsEscape(t)+l)+": "+p.objectToString(e,n,f),s=!1}),i="{",r="}"),o=i?i+a+o+a+t+r:o}}}),define("skylark-rjs/commonJs",["./parse"],function(r){"use strict";var u={useLog:!0,convertDir:function(e,t,n){var i,r,s,o,a=/\.js$/,c=n.getFilteredFileList(e,/\w/,!0);if(e=e.replace(/\\/g,"/"),t=t.replace(/\\/g,"/"),"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),"/"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),c&&c.length)for(i=0;i<c.length;i++)s=(r=c[i]).replace(e,t),a.test(r)?(o=n.readFile(r),o=u.convert(r,o,config),n.saveUtf8File(s,o)):n.copyFile(r,s,!0);else u.useLog&&("convert"===e?console.log("\n\n"+u.convert(t,n.readFile(t),config)):console.log("No files to convert in directory: "+e))},convert:function(t,e){try{var n="",i=r.usesCommonJs(t,e);if(r.usesAmdOrRequireJs(t,e)||!i)return e;e="define(function (require, exports, module) {"+(n=i.dirname||i.filename?'var __filename = module.uri || "", __dirname = __filename.substring(0, __filename.lastIndexOf("/") + 1); ':n)+e+"\n});\n"}catch(e){console.log("commonJs.convert: COULD NOT CONVERT: "+t+", so skipping it. Error was: "+e)}return e}};return u}),define("skylark-rjs/requirePatch",["./pragma","./parse","./lang","./logger","./commonJs","./prim"],function(pragma,parse,lang,logger,commonJs,prim){var allowRun=!0,hasProp=lang.hasProp,falseProp=lang.falseProp,getOwn=lang.getOwn,useStrictRegExp=/['"]use strict['"];/g,absoluteUrlRegExp=/^[\/\\]|^\w:/;return prim.hideResolutionConflict=!0,function(config){var fs,layer,pluginBuilderRegExp,oldNewContext,oldDef,exports,module;function normalizeUrlWithBase(e,t,n){return n=require.jsExtRegExp.test(t)&&!absoluteUrlRegExp.test(n)?(e.config.dir||e.config.dirBaseUrl)+n:n}allowRun&&(allowRun=!1,fs=config.env.fs,pluginBuilderRegExp=/(["']?)pluginBuilder(["']?)\s*[=\:]\s*["']([^'"\s]+)["']/,oldNewContext=require.s.newContext,require._cacheReset=function(){require._cachedRawText={},require._cachedFileContents={},require._cachedDefinesRequireUrls={}},require._cacheReset(),require._isSupportedBuildUrl=function(e){return-1===e.indexOf("://")&&-1===e.indexOf("?")&&0!==e.indexOf("empty:")&&0!==e.indexOf("//")||(layer.ignoredUrls[e]||(-1===e.indexOf("empty:")&&logger.info("Cannot optimize network URL, skipping: "+e),layer.ignoredUrls[e]=!0),!1)},require.s.newContext=function(name){var context=oldNewContext(name),oldEnable=context.enable,moduleProto=context.Module.prototype,oldInit=moduleProto.init,oldCallPlugin=moduleProto.callPlugin;return"_"===name&&(context.nextTick=function(e){e()},context.needFullExec={},context.fullExec={},context.plugins={},context.buildShimExports={},context.makeShimExports=function(t){var e=context.config.wrapShim?function(){var e="return ";return t.exports&&-1===t.exports.indexOf(".")&&(e+="root."+t.exports+" = "),t.init&&(e+="("+t.init.toString().replace(useStrictRegExp,"")+".apply(this, arguments))"),t.init&&t.exports&&(e+=" || "),t.exports&&(e+=t.exports),e+=";"}:function(){return"(function (global) {\n    return function () {\n        var ret, fn;\n"+(t.init?"       fn = "+t.init.toString().replace(useStrictRegExp,"")+";\n        ret = fn.apply(global, arguments);\n":"")+(t.exports?"        return ret || global."+t.exports+";\n":"        return ret;\n")+"    };\n}(this))"};return e},context.enable=function(e,t){var n=e.id,i=t&&t.map.id,r=context.needFullExec,s=context.fullExec,o=getOwn(context.registry,n);return o&&!o.defined?i&&getOwn(r,i)&&(r[n]=e):(getOwn(r,n)&&falseProp(s,n)||i&&getOwn(r,i)&&falseProp(s,n))&&context.require.undef(n),oldEnable.apply(context,arguments)},context.load=function(moduleName,url){var contents,pluginBuilderMatch,builderName,shim,shimExports;0===url.indexOf("empty:")&&delete context.urlFetched[url],require._isSupportedBuildUrl(url)?(url=normalizeUrlWithBase(context,moduleName,url),layer.buildPathMap[moduleName]=url,layer.buildFileToModule[url]=moduleName,hasProp(context.plugins,moduleName)&&(context.needFullExec[moduleName]=!0),prim().start(function(){if(!hasProp(require._cachedFileContents,url)||!falseProp(context.needFullExec,moduleName)&&!getOwn(context.fullExec,moduleName))return require._cacheReadAsync(url,void 0,fs).then(function(e){contents=e,!context.config.cjsTranslate||context.config.shim&&lang.hasProp(context.config.shim,moduleName)||(contents=commonJs.convert(url,contents)),context.config.onBuildRead&&(contents=context.config.onBuildRead(moduleName,url,contents)),contents=pragma.process(url,contents,context.config,"OnExecute");try{!layer.existingRequireUrl&&parse.definesRequire(url,contents)&&(layer.existingRequireUrl=url,require._cachedDefinesRequireUrls[url]=!0)}catch(e){throw new Error("Parse error using esprima for file: "+url+"\n"+e)}}).then(function(){return hasProp(context.plugins,moduleName)&&(pluginBuilderMatch=pluginBuilderRegExp.exec(contents))?(builderName=context.makeModuleMap(pluginBuilderMatch[3],context.makeModuleMap(moduleName),null,!0).id,require._cacheReadAsync(context.nameToUrl(builderName),void 0,fs)):contents}).then(function(e){contents=e;try{falseProp(context.needFullExec,moduleName)&&(contents=parse(moduleName,url,contents,{insertNeedsDefine:!0,has:context.config.has,findNestedDependencies:context.config.findNestedDependencies}))}catch(e){throw new Error("Parse error using esprima for file: "+url+"\n"+e)}require._cachedFileContents[url]=contents});contents=require._cachedFileContents[url],!layer.existingRequireUrl&&require._cachedDefinesRequireUrls[url]&&(layer.existingRequireUrl=url)}).then(function(){contents&&eval(contents);try{getOwn(context.needFullExec,moduleName)&&(shim=getOwn(context.config.shim,moduleName),shim)&&shim.exports&&(shimExports=eval(shim.exports),void 0!==shimExports)&&(context.buildShimExports[moduleName]=shimExports),context.completeLoad(moduleName)}catch(e){throw e.moduleTree||(e.moduleTree=[]),e.moduleTree.push(moduleName),e}}).then(null,function(e){throw e.fileName||(e.fileName=url),e}).end()):context.completeLoad(moduleName)},context.execCb=function(e,t,n,exports){var i=getOwn(layer.context.buildShimExports,e);return i||(t.__requireJsBuild||getOwn(layer.context.needFullExec,e)?t.apply(exports,n):void 0)},moduleProto.init=function(e){return context.needFullExec[this.map.id]&&lang.each(e,lang.bind(this,function(e){"string"==typeof e&&(e=context.makeModuleMap(e,this.map.isDefine?this.map:this.map.parentMap,!1,!0)),context.fullExec[e.id]||context.require.undef(e.id)})),oldInit.apply(this,arguments)},moduleProto.callPlugin=function(){var e=this.map,t=context.makeModuleMap(e.prefix),n=t.id,i=getOwn(context.registry,n);return context.plugins[n]=!0,context.needFullExec[n]=e,!falseProp(context.fullExec,n)||i&&!i.defined||context.require.undef(t.id),oldCallPlugin.apply(this,arguments)}),context},delete require.s.contexts._,require._buildReset=function(){var e=require.s.contexts._;return delete require.s.contexts._,require({}),layer=require._layer={buildPathMap:{},buildFileToModule:{},buildFilePaths:[],pathAdded:{},modulesWithNames:{},needsDefine:{},existingRequireUrl:"",ignoredUrls:{},context:require.s.contexts._},e},require._buildReset(),oldDef=define,define=function(e){return"string"==typeof e&&falseProp(layer.needsDefine,e)&&(layer.modulesWithNames[e]=!0),oldDef.apply(require,arguments)},define.amd=oldDef.amd,require._readFile=fs.readFile,require._fileExists=function(e){return fs.exists(e)},require.onResourceLoad=function(n,e){var i=e.id;n.plugins&&lang.hasProp(n.plugins,i)&&lang.eachProp(n.needFullExec,function(e,t){!0!==e&&e.prefix===i&&e.unnormalized&&(e=n.makeModuleMap(e.originalName,e.parentMap),n.needFullExec[e.id]=e)}),n.needFullExec&&getOwn(n.needFullExec,i)&&(n.fullExec[i]=e),e.prefix?falseProp(layer.pathAdded,i)&&(layer.buildFilePaths.push(i),layer.buildPathMap[i]=i,layer.buildFileToModule[i]=i,layer.modulesWithNames[i]=!0,layer.pathAdded[i]=!0):e.url&&require._isSupportedBuildUrl(e.url)&&(e=normalizeUrlWithBase(n,i,e.url),!layer.pathAdded[e])&&getOwn(layer.buildPathMap,i)&&(layer.buildFilePaths.push(e),layer.pathAdded[e]=!0)},require.needsDefine=function(e){layer.needsDefine[e]=!0})}}),define("skylark-rjs/build",["./rjs","./lang","./prim","./logger","./parse","./optimize","./pragma","./transform","./requirePatch","./commonJs","./source-map"],function(require,lang,prim,logger,parse,optimize,pragma,transform,requirePatch,commonJs,sourceMap){"use strict";var build,SourceMapGenerator=sourceMap.SourceMapGenerator,hasProp=lang.hasProp,getOwn=lang.getOwn,falseProp=lang.falseProp,endsWithSemiColonRegExp=/;\s*$/,endsWithSlashRegExp=/[\/\\]$/,resourceIsModuleIdRegExp=/^[\w\/\\\.]+$/,deepCopyProps={layer:!0};function copyConfig(e){return lang.deeplikeCopy(e,deepCopyProps)}function makeBuildBaseConfig(e){return{appDir:"",pragmas:{},paths:{},optimize:"uglify",optimizeCss:"standard.keepLines.keepWhitespace",inlineText:!0,isBuild:!0,optimizeAllPluginResources:!1,findNestedDependencies:!1,preserveLicenseComments:!0,writeBuildTxt:!0,waitSeconds:30,dirExclusionRegExp:e.dirExclusionRegExp,_buildPathToModuleIndex:{}}}function addSemiColon(e,t){return t.skipSemiColonInsertion||endsWithSemiColonRegExp.test(e)?e:e+";"}function endsWithSlash(e){return"/"!==e.charAt(e.length-1)&&(e+="/"),e}function endsWithNewLine(e){return"\n"!==e.charAt(e.length-1)&&(e+="\n"),e}function makeWriteFile(i,r){function s(e,t){logger.trace("Saving plugin-optimized file: "+e),file.saveUtf8File(e,t)}return s.asModule=function(e,t,n){s(t,build.toTransport(i,e,t,n,r))},s}function appendToFileContents(e,t,n,i,module,r){var s,o,a,c,u;if(r){for(i=i.out?i.baseUrl:module&&module._buildPath?module._buildPath:"",s=1===(module=n.split("!")).length?build.makeRelativeFilePath(i,n):(o=module.shift(),module=module.join("!"),resourceIsModuleIdRegExp.test(module)?build.makeRelativeFilePath(i,require.toUrl(module))+"!"+o:n),a=e.split("\n").length-1,c=t.split("\n").length,u=1;u<=c;u+=1)r.addMapping({generated:{line:a+u,column:0},original:{line:u,column:0},source:s});r.setSourceContent(s,t)}return e+=t}function stringDotToObj(n,e,i){var r=e.split(".");r.forEach(function(e,t){t===r.length-1?n[e]=i:(falseProp(n,e)&&(n[e]={}),n=n[e])})}function mixConfig(e,t,n){var i,r,s;for(i in t)hasProp(t,i)&&(r=t[i],s=lang.isArray(r),"object"!=typeof r||!r||s||lang.isFunction(r)||lang.isRegExp(r)?s?n||(s=e[i],lang.isArray(s)?e[i]=s.concat(r):e[i]=r):e[i]=r:"map"===i?(e.map||(e.map={}),lang.deepMix(e.map,t.map)):e[i]=lang.mixin({},e[i],r,!0));lang.hasProp(e,"logLevel")&&logger.logLevel(e.logLevel)}function flattenWrapFile(e,s,o){var a=e.wrap,t=s+"File",n="__"+s+"Map",c=e.env.fs;if("string"!=typeof a[s]&&a[t])a[s]="","string"==typeof a[t]&&(a[t]=[a[t]]),a[n]=[],a[t].forEach(function(e){var i=build.makeAbsPath(e,o,c),r=endsWithNewLine(c.readFile(i));a[n].push(function(e,t,n){return appendToFileContents(e,r,i,t,null,n)}),a[s]+=r});else if(null===a[s]||void 0===a[s])a[s]="";else{if("string"!=typeof a[s])throw new Error("wrap."+s+" or wrap."+t+" malformed");a[s]=endsWithNewLine(a[s]),a[n]=[function(e,t,n){var i=build.makeAbsPath("config-wrap-"+s+"-default.js",o,c);return appendToFileContents(e,a[s],i,t,null,n)}]}}function normalizeWrapConfig(e,i){var r=e.env.fs;try{e.wrap&&(!0===e.wrap?e.wrap={start:"(function () {\n",end:"}());",__startMap:[function(e,t,n){return appendToFileContents(e,"(function () {\n",build.makeAbsPath("config-wrap-start-default.js",i,r),t,null,n)}],__endMap:[function(e,t,n){return appendToFileContents(e,"}());",build.makeAbsPath("config-wrap-end-default.js",i,r),t,null,n)}]}:(flattenWrapFile(e,"start",i),flattenWrapFile(e,"end",i)))}catch(e){throw new Error("Malformed wrap config: "+e.toString())}}return prim.nextTick=function(e){e()},require._cacheReadAsync=function(t,e,n){var i;return lang.hasProp(require._cachedRawText,t)?((i=prim()).resolve(require._cachedRawText[t]),i.promise):n.readFileAsync(t,e).then(function(e){return require._cachedRawText[t]=e})},build=function(n){var e,t,i,r,s,o,a,c,u,l=/( {4}at[^\n]+)\n/;return prim().start(function(){if(!n||lang.isArray(n)){if(!n||n.length<1)return void logger.error("build.js buildProfile.js\nwhere buildProfile.js is the name of the build file (see example.build.js for hints on how to make a build file).");-1===n[0].indexOf("=")&&(e=n[0],n.splice(0,1)),(t=build.convertArrayToObject(n)).buildFile=e}else t=n;return build._run(t)}).then(null,function(e){var t;if(i=e.toString(),o=e.moduleTree,(s=l.exec(i))&&(i+=i.substring(0,s.index+s[0].length+1)),o&&0<o.length){for(i+="\nIn module tree:\n",a=o.length-1;-1<a;a--)if(u=o[a]){for(c=o.length-a;-1<c;c--)i+="  ";i+=u+"\n"}logger.error(i)}throw r=e.stack,"string"==typeof n&&-1!==n.indexOf("stacktrace=true")?i+="\n"+r:!s&&r&&(s=l.exec(r))&&(i+="\n"+s[0]||""),(t=new Error(i)).originalError=e,t})},build._run=function(t){var n,o,i,a,r,c,u,s,l,f,p,h,d,m,g,_,v,y={},b="",x={};return prim().start(function(){if(c=build.createConfig(t),i=c.paths,v=c.env.fs,requirePatch(c),c.dir&&!c.keepBuildDir&&v.exists(c.dir)&&v.deleteFile(c.dir),!c.out&&!c.cssIn)if(v.copyDir(c.appDir||c.baseUrl,c.dir,/\w/,!0),n={},c.appDir)for(var e in i)hasProp(i,e)&&(n[e]=i[e].replace(c.appDir,c.dir));else for(e in i)hasProp(i,e)&&(0===i[e].indexOf(c.baseUrl)?n[e]=i[e].replace(c.baseUrl,c.dirBaseUrl):(n[e]="empty:"===i[e]?"empty:":e,0!==(s=i[e]).indexOf("/")&&-1===s.indexOf(":")&&(s=c.baseUrl+s),f=c.dirBaseUrl+n[e],"empty:"!==s&&(v.exists(s)&&v.isDirectory(s)?v.copyDir(s,f,/\w/,!0):(s+=".js",f+=".js",v.copyFile(s,f)))));require({baseUrl:c.baseUrl,paths:i,packagePaths:c.packagePaths,packages:c.packages}),l=require.s.contexts._,(u=c.modules)&&u.forEach(function(module){if(module.name&&(module._sourcePath=l.nameToUrl(module.name),!(v.exists(module._sourcePath)||module.create||-1!==module.name.indexOf("!")||c.rawText&&lang.hasProp(c.rawText,module.name))))throw new Error("ERROR: module path does not exist: "+module._sourcePath+" for module named: "+module.name+". Path is relative to: "+v.absPath("."))}),c.out?(require(c),c.cssIn||(c.modules[0]._buildPath="function"==typeof c.out?"FUNCTION":c.out)):c.cssIn||(r={baseUrl:c.dirBaseUrl,paths:n},lang.mixin(r,c),require(r),u&&u.forEach(function(module){if(module.name){if(module._buildPath=l.nameToUrl(module.name,null),module._buildPath===module._sourcePath&&!c.allowSourceOverwrites)throw new Error("Module ID '"+module.name+"' has a source path that is same as output path: "+module._sourcePath+". Stopping, config is malformed.");module.create||c.rawText&&lang.hasProp(c.rawText,module.name)||v.copyFile(module._sourcePath,module._buildPath)}})),c.optimizeCss&&"none"!==c.optimizeCss&&c.dir&&(b+=optimize.css(c.dir,c))}).then(function(){r=copyConfig(require.s.contexts._.config)}).then(function(){var e;if(u)return e=u.map(function(module,e){return function(){return c._buildPathToModuleIndex[v.normalize(module._buildPath)]=e,build.traceDependencies(module,c,r).then(function(e){module.layer=e})}}),prim.serial(e)}).then(function(){var e;if(u)return e=u.map(function(module){return function(){if(module.exclude)return module.excludeLayers=[],prim.serial(module.exclude.map(function(t,n){return function(){var e=build.findBuildModule(t,u);if(!e)return build.traceDependencies({name:t},c,r).then(function(e){module.excludeLayers[n]={layer:e}});module.excludeLayers[n]=e}}))}}),prim.serial(e)}).then(function(){if(u)return prim.serial(u.map(function(module){return function(){return module.exclude&&module.exclude.forEach(function(e,t){var t=module.excludeLayers[t].layer,n=t.buildFileToModule;t.buildFilePaths.forEach(function(e){build.removeModulePath(n[e],e,module.layer)})}),module.excludeShallow&&module.excludeShallow.forEach(function(e){var t=getOwn(module.layer.buildPathMap,e);t&&build.removeModulePath(e,t,module.layer)}),build.flattenModule(module,module.layer,c).then(function(e){var t;"FUNCTION"===module._buildPath?(module._buildText=e.text,module._buildSourceMap=e.sourceMap):(t=e.text,e.sourceMap&&(t+="\n//# sourceMappingURL="+module._buildPath.split("/").pop()+".map",v.saveUtf8File(module._buildPath+".map",e.sourceMap)),v.saveUtf8File(module._buildPath+"-temp",t)),b+=e.buildText})}}))}).then(function(){var i,e,r={},s=c.bundlesConfigOutFile;if(u&&(u.forEach(function(module){var e,t,n=module._buildPath;"FUNCTION"!==n&&(v.exists(n)&&v.deleteFile(n),v.renameFile(n+"-temp",n),s&&(e=r[module.name]=[],n=v.readFile(n),(t={})[module.name]=!0,n=parse.getAllNamedDefines(n,t),e.push.apply(e,n)),c.removeCombined)&&!c.out&&module.layer.buildFilePaths.forEach(function(t){var e=u.some(function(e){return e._buildPath===t}),n=build.makeRelativeFilePath(c.dir,t);v.exists(t)&&!e&&0!==n.indexOf("..")&&v.deleteFile(t)}),c.onModuleBundleComplete&&c.onModuleBundleComplete(module.onCompleteData)}),s)&&(e=v.readFile(s),e=transform.modifyConfig(e,function(n){return n.bundles||(n.bundles={}),lang.eachProp(r,function(e,t){n.bundles[t]=e}),n}),v.saveUtf8File(s,e)),c.removeCombined&&!c.out&&c.dir&&v.deleteEmptyDirs(c.dir),c.out&&!c.cssIn)"FUNCTION"===(o=c.modules[0]._buildPath)?(e=c.modules[0]._buildSourceMap,c._buildSourceMap=e,c.modules[0]._buildText=optimize.js((c.modules[0].name||c.modules[0].include[0]||o)+".build.js",c.modules[0]._buildText,null,c),c._buildSourceMap&&c._buildSourceMap!==e&&(c.modules[0]._buildSourceMap=c._buildSourceMap,c._buildSourceMap=null)):optimize.jsFile(o,null,o,c);else if(!c.cssIn){for(i in v.getFilteredFileList(c.dir,/\.js$/,!0).forEach(function(e){var t,n;i=(i=e.replace(c.dir,"")).substring(0,i.length-3),(-1<(n=0===(n=getOwn(c._buildPathToModuleIndex,e))||0<n?n:-1)||!c.skipDirOptimize||"all"===c.normalizeDirDefines||c.cjsTranslate)&&(_=v.readFile(e),!c.cjsTranslate||c.shim&&lang.hasProp(c.shim,i)||(_=commonJs.convert(e,_)),-1===n&&(c.onBuildRead&&(_=c.onBuildRead(i,e,_)),"all"===c.normalizeDirDefines&&(_=build.toTransport(c.namespace,null,e,_)),c.onBuildWrite)&&(_=c.onBuildWrite(i,e,_)),t=(t=-1<n?c.modules[n].override:null)?build.createOverrideConfig(c,t):c,-1<n||!c.skipDirOptimize)&&optimize.jsFile(e,_,e,t,x)}),d=require.s.contexts._,x)if(hasProp(x,i))for(h=d.makeModuleMap(i),m=x[i],a=0;a<m.length;a++){if(g=m[a],p=d.makeModuleMap(g,h),falseProp(d.plugins,p.prefix)){if(d.plugins[p.prefix]=!0,!v.exists(require.toUrl(p.prefix+".js")))continue;d.require([p.prefix]),p=d.makeModuleMap(g,h)}falseProp(y,p.id)&&((g=getOwn(d.defined,p.prefix))&&g.writeFile&&g.writeFile(p.prefix,p.name,require,makeWriteFile(c.namespace),d.config),y[p.id]=!0)}c.writeBuildTxt&&v.saveUtf8File(c.dir+"build.txt",b)}return c.cssIn&&(b+=optimize.cssFile(c.cssIn,c.out,c).buildText),"function"==typeof c.out&&c.out(c.modules[0]._buildText,c.modules[0]._buildSourceMap),b?(logger.info(b),b):""})},build.objProps={paths:!0,wrap:!0,pragmas:!0,pragmasOnSave:!0,has:!0,hasOnSave:!0,uglify:!0,uglify2:!0,closure:!0,map:!0,throwWhen:!0,rawText:!0},build.hasDotPropMatch=function(e){var t=e.indexOf(".");return-1!==t&&(e=e.substring(0,t),hasProp(build.objProps,e))},build.convertArrayToObject=function(e){for(var t,n,i={},r={include:!0,exclude:!0,excludeShallow:!0,insertRequire:!0,stubModules:!0,deps:!0,mainConfigFile:!0,"wrap.startFile":!0,"wrap.endFile":!0},s=0;s<e.length;s++)separatorI.ndex=e[s].indexOf("="),"true"===(n=e[s].substring(NaN,e[s].length))?n=!0:"false"===n&&(n=!1),t=e[s].substring(0,void 0),getOwn(r,t)&&(n=n.split(",")),build.hasDotPropMatch(t)?stringDotToObj(i,t,n):i[t]=n;return i},build.makeAbsPath=function(e,t,n){return t?(0!==e.indexOf("/")&&-1===e.indexOf(":")&&(e=t+("/"===t.charAt(t.length-1)?"":"/")+e,e=n.normalize(e)),e.replace(lang.backSlashRegExp,"/")):e},build.makeAbsObject=function(e,t,n,i){var r,s;if(t)for(r=0;r<e.length;r++)s=e[r],hasProp(t,s)&&"string"==typeof t[s]&&(t[s]=build.makeAbsPath(t[s],n,i))},build.makeAbsConfig=function(e,t,n){for(var i,r=["appDir","dir","baseUrl"],s=0;s<r.length;s++)getOwn(e,i=r[s])&&("baseUrl"===i?(e.originalBaseUrl=e.baseUrl,e.appDir?e.baseUrl=build.makeAbsPath(e.originalBaseUrl,e.appDir,n):e.baseUrl=build.makeAbsPath(e[i],t,n)):e[i]=build.makeAbsPath(e[i],t,n),e[i]=endsWithSlash(e[i]));build.makeAbsObject("stdout"===e.out?["cssIn"]:["out","cssIn"],e,t,n),build.makeAbsObject(["startFile","endFile"],e.wrap,t,n),build.makeAbsObject(["externExportsPath"],e.closure,t,n)},build.makeRelativeFilePath=function(e,t,n){var i,r,s,o,a=e.split("/"),e=endsWithSlashRegExp.test(t),c=[];for(t=n.normalize(t),e&&!endsWithSlashRegExp.test(t)&&(t+="/"),n=(o=t.split("/")).pop(),a.pop(),s=a.length,i=0;i<s&&a[i]===o[i];i+=1);for(e=o.slice(i),r=s-i,i=0;-1<i&&i<r;i+=1)c.push("..");return c.join("/")+(c.length?"/":"")+e.join("/")+(e.length?"/":"")+n},build.nestedMix={paths:!0,has:!0,hasOnSave:!0,pragmas:!0,pragmasOnSave:!0},build.createConfig=function(cfg){var fs=cfg.env.fs,buildFileContents,buildFileConfig,mainConfig,mainConfigFile,mainConfigPath,buildFile,absFilePath,config={},buildBaseConfig=makeBuildBaseConfig(fs),absFilePath=fs.absPath(".");if(build.makeAbsConfig(cfg,absFilePath,fs),build.makeAbsConfig(buildBaseConfig,absFilePath,fs),lang.mixin(config,buildBaseConfig),lang.mixin(config,cfg,!0),lang.hasProp(config,"logLevel")&&logger.logLevel(config.logLevel),config.buildFile){if(buildFile=fs.absPath(config.buildFile),!fs.exists(buildFile))throw new Error("ERROR: build file does not exist: "+buildFile);absFilePath=config.baseUrl=fs.absPath(fs.parent(buildFile)),buildFileContents=fs.readFile(buildFile);try{buildFileContents=buildFileContents.replace(/\/\/\#[^\n\r]+[\n\r]*$/,"").trim().replace(/;$/,""),buildFileConfig=eval("("+buildFileContents+")"),build.makeAbsConfig(buildFileConfig,absFilePath,fs),mixConfig(config,buildFileConfig)}catch(e){throw new Error("Build file "+buildFile+" is malformed: "+e)}}if(mainConfigFile=config.mainConfigFile||buildFileConfig&&buildFileConfig.mainConfigFile,mainConfigFile&&("string"==typeof mainConfigFile&&(mainConfigFile=[mainConfigFile]),mainConfigFile.forEach(function(t){if(t=build.makeAbsPath(t,absFilePath,fs),!fs.exists(t))throw new Error(t+" does not exist.");try{mainConfig=parse.findConfig(fs.readFile(t)).config}catch(e){throw new Error("The config in mainConfigFile "+t+" cannot be used because it cannot be evaluated correctly while running in the optimizer. Try only using a config that is also valid JSON, or do not use mainConfigFile and instead copy the config values needed into a build file or command line arguments given to the optimizer.\nSource error from parsing: "+t+": "+e)}mainConfig&&(mainConfigPath=t.substring(0,t.lastIndexOf("/")),config.appDir&&!mainConfig.appDir&&(mainConfig.appDir=config.appDir),mainConfig.baseUrl||(mainConfig.baseUrl=mainConfigPath),build.makeAbsConfig(mainConfig,mainConfigPath,fs),mixConfig(config,mainConfig))})),buildFileConfig&&mixConfig(config,buildFileConfig,!0),mixConfig(config,cfg,!0),lang.eachProp(config.paths,function(e,t){if(lang.isArray(e))throw new Error("paths fallback not supported in optimizer. Please provide a build config path override for "+t);config.paths[t]=build.makeAbsPath(e,config.baseUrl,fs)}),hasProp(config,"baseUrl")){if(config.appDir){if(!config.originalBaseUrl)throw new Error("Please set a baseUrl in the build config");config.dirBaseUrl=build.makeAbsPath(config.originalBaseUrl,config.dir,fs)}else config.dirBaseUrl=config.dir||config.baseUrl;config.dirBaseUrl=endsWithSlash(config.dirBaseUrl)}if(config.bundlesConfigOutFile){if(!config.dir)throw new Error('bundlesConfigOutFile can only be used with optimizations that use "dir".');config.bundlesConfigOutFile=build.makeAbsPath(config.bundlesConfigOutFile,config.dir,fs)}if(config.main)throw new Error('"main" passed as an option, but the supported option is called "name".');if(config.out&&!config.name&&!config.modules&&!config.include&&!config.cssIn)throw new Error('Missing either a "name", "include" or "modules" option');if(config.cssIn){if(config.dir||config.appDir)throw new Error('cssIn is only for the output of single file CSS optimizations and is not compatible with "dir" or "appDir" configuration.');if(!config.out)throw new Error('"out" option missing.')}if(config.cssIn||config.baseUrl||(config.baseUrl="./"),!config.out&&!config.dir)throw new Error('Missing either an "out" or "dir" config value. If using "appDir" for a full project optimization, use "dir". If you want to optimize to one file, use "out".');if(config.appDir&&config.out)throw new Error('"appDir" is not compatible with "out". Use "dir" instead. appDir is used to copy whole projects, where "out" with "baseUrl" is used to just optimize to one file.');if(config.out&&config.dir)throw new Error('The "out" and "dir" options are incompatible. Use "out" if you are targeting a single file for optimization, and "dir" if you want the appDir or baseUrl directories optimized.');if(config.dir&&!config.allowSourceOverwrites&&(config.dir===config.baseUrl||config.dir===config.appDir||config.baseUrl&&0!==build.makeRelativeFilePath(config.dir,config.baseUrl,fs).indexOf("..")||config.appDir&&0!==build.makeRelativeFilePath(config.dir,config.appDir,fs).indexOf("..")))throw new Error('"dir" is set to a parent or same directory as "appDir" or "baseUrl". This can result in the deletion of source code. Stopping. If you want to allow possible overwriting of source code, set "allowSourceOverwrites" to true in the build config, but do so at your own risk. In that case, you may want to also set "keepBuildDir" to true.');if(config.insertRequire&&!lang.isArray(config.insertRequire))throw new Error("insertRequire should be a list of module IDs to insert in to a require([]) call.");if("uglify2"===config.optimize&&(config.optimize="uglify"),config.uglify2&&(config.uglify=config.uglify2,delete config.uglify2),config.generateSourceMaps){if(config.preserveLicenseComments&&"none"!==config.optimize&&"uglify"!==config.optimize)throw new Error("Cannot use preserveLicenseComments and generateSourceMaps together, unless optimize is set to 'uglify'. Either explicitly set preserveLicenseComments to false (default is true) or turn off generateSourceMaps. If you want source maps with license comments, see: http://requirejs.org/docs/errors.html#sourcemapcomments");if("none"!==config.optimize&&"closure"!==config.optimize&&"uglify"!==config.optimize)throw new Error('optimize: "'+config.optimize+'" does not support generateSourceMaps.')}if(!config.name&&!config.include||config.modules){if(config.modules&&config.out)throw new Error('If the "modules" option is used, then there should be a "dir" option set and "out" should not be used since "out" is only for single file optimization output.');if(config.modules&&config.name)throw new Error('"name" and "modules" options are incompatible. Either use "name" if doing a single file optimization, or "modules" if you want to target more than one file for optimization.')}else config.modules=[{name:config.name,out:config.out,create:config.create,include:config.include,exclude:config.exclude,excludeShallow:config.excludeShallow,insertRequire:config.insertRequire,stubModules:config.stubModules}],delete config.stubModules;if(!config.out||config.cssIn||cfg.optimizeCss||(config.optimizeCss="none"),config.cssPrefix?config.cssPrefix=endsWithSlash(config.cssPrefix):config.cssPrefix="",config.modules&&config.modules.length&&config.modules.forEach(function(t){if(lang.isArray(t)||"string"==typeof t||!t)throw new Error("modules config item is malformed: it should be an object with a 'name' property.");config.stubModules&&(t.stubModules=config.stubModules.concat(t.stubModules||[])),t.stubModules&&(t.stubModules._byName={},t.stubModules.forEach(function(e){t.stubModules._byName[e]=!0})),"string"==typeof t.include&&(t.include=[t.include]),t.override&&normalizeWrapConfig(t.override,absFilePath)}),normalizeWrapConfig(config,absFilePath),config.context)throw new Error('The build argument "context" is not supported in a build. It should only be used in web pages.');return hasProp(config,"normalizeDirDefines")||("none"===config.optimize||config.skipDirOptimize?config.normalizeDirDefines="skip":config.normalizeDirDefines="all"),hasProp(config,"fileExclusionRegExp")?"string"==typeof config.fileExclusionRegExp?fs.exclusionRegExp=new RegExp(config.fileExclusionRegExp):fs.exclusionRegExp=config.fileExclusionRegExp:hasProp(config,"dirExclusionRegExp")&&(fs.exclusionRegExp=config.dirExclusionRegExp),config.deps&&(config._depsInclude=config.deps),delete config.deps,delete config.jQuery,delete config.enforceDefine,delete config.urlArgs,config},build.findBuildModule=function(e,t){for(var module,n=0;n<t.length;n++)if((module=t[n]).name===e)return module;return null},build.removeModulePath=function(module,e,t){e=t.buildFilePaths.indexOf(e);-1!==e&&t.buildFilePaths.splice(e,1)},build.traceDependencies=function(module,n,e){var t,i,r,s,o={rhino:!0,node:!0,xpconnect:!0},a=prim();function c(e){var t=!1;if(o[n.env.name])try{build.checkForErrors(r,i)}catch(e){t=!0,a.reject(e)}t||a.resolve(e)}return require._buildReset(),i=require._layer,r=i.context,e&&require(copyConfig(e)),logger.trace("\nTracing dependencies for: "+(module.name||("function"==typeof module.out?"FUNCTION":module.out))),t=(t=n._depsInclude||[]).concat(module.name&&!module.create?[module.name]:[]),module.include&&(t=t.concat(module.include)),module.override&&(s=e?build.createOverrideConfig(e,module.override):copyConfig(module.override),require(s)),(s=require.s.contexts._.config.rawText)&&lang.eachProp(s,function(e,t){t=require.toUrl(t)+".js";require._cachedRawText[t]=e}),a.reject.__requireJsBuild=!0,c.__requireJsBuild=!0,require(t,c,a.reject),o[n.env.name]&&build.checkForErrors(r,i),a.promise.then(function(){return module.override&&e&&require(copyConfig(e)),build.checkForErrors(r,i),i})},build.checkForErrors=function(e,t){var n,i,r,s,o,a="",c={},u=[],l=[],f={},p={},h=!1,d=!1,m=e.defined,g=e.registry;function _(e,t,n){t&&(n||l.push(e),f[t]?(h=!0,p[t]||(p[t]=[],p[t].push(f[t])),p[t].push(e)):n||(f[t]=e))}for(n in g)hasProp(g,n)&&0!==n.indexOf("_@r")&&(d=!0,r=getOwn(g,n),o=(s=n.split("!"))[0],-1===n.indexOf("_unnormalized")&&r&&r.enabled&&_(n,r.map.url),!hasProp(t.modulesWithNames,n))&&1<s.length&&(falseProp(c,o)&&u.push(o),(c[o]||(c[o]=[])).push(n+(r.error?": "+r.error:"")));if(d)for(n in m)hasProp(m,n)&&-1===n.indexOf("!")&&_(n,require.toUrl(n)+".js",!0);if(l.length||u.length){if(u.length&&(a+="Loader plugin"+(1===u.length?"":"s")+" did not call the load callback in the build:\n"+u.map(function(e){return e+":\n  "+c[e].join("\n  ")}).join("\n")+"\n"),a+="Module loading did not complete for: "+l.join(", "),h)for(i in a+="\nThe following modules share the same URL. This could be a misconfiguration if that URL only has one anonymous module in it:",p)hasProp(p,i)&&(a+="\n"+i+": "+p[i].join(", "));throw new Error(a)}},build.createOverrideConfig=function(n,i){var r=copyConfig(n),e=copyConfig(i);return lang.eachProp(e,function(e,t){hasProp(build.objProps,t)?(r[t]={},lang.mixin(r[t],n[t],!0),lang.mixin(r[t],i[t],!0)):r[t]=i[t]}),r},build.flattenModule=function(module,_,v){var y,b,n,x="",w=v.env.fs;return prim().start(function(){var r,e,s,t,o,a,c,u,l,f,p,h=_.context,d=[],m={},g={};return module.override&&(v=build.createOverrideConfig(v,module.override)),l=v.namespace||"",f=l?l+".":"",p=module.stubModules&&module.stubModules._byName||{},module.onCompleteData={name:module.name,path:v.dir?module._buildPath.replace(v.dir,""):module._buildPath,included:[]},x+="\n"+module.onCompleteData.path+"\n----------------\n",_.existingRequireUrl&&-1!==(e=_.buildFilePaths.indexOf(_.existingRequireUrl))&&(_.buildFilePaths.splice(e,1),_.buildFilePaths.unshift(_.existingRequireUrl)),v.generateSourceMaps&&(n=v.dir||v.baseUrl,e="FUNCTION"===module._buildPath?(module.name||module.include[0]||"FUNCTION")+".build.js":v.out?module._buildPath.split("/").pop():module._buildPath.replace(n,""),b=new SourceMapGenerator({file:e})),lang.eachProp(_.context.config.pkgs,function(e,t){g[e]=t}),y="",v.wrap&&v.wrap.__startMap&&v.wrap.__startMap.forEach(function(e){y=e(y,v,b)}),prim.serial(_.buildFilePaths.map(function(i){return function(){var n="";return s=_.buildFileToModule[i],o=getOwn(g,s),prim().start(function(){if(a=h.makeModuleMap(s),!(c=a.prefix&&getOwn(h.defined,a.prefix)))return prim().start(function(){return hasProp(p,s)?hasProp(_.context.plugins,s)?'define({load: function(id){throw new Error("Dynamic load not allowed: " + id);}});':"define({});":require._cacheReadAsync(i,void 0,w)}).then(function(e){var t;r=e,!v.cjsTranslate||v.shim&&lang.hasProp(v.shim,s)||(r=commonJs.convert(i,r)),v.onBuildRead&&(r=v.onBuildRead(s,i,r)),o&&(t=o===parse.getNamedDefine(r)),l&&(r=pragma.namespace(r,l)),r=build.toTransport(l,s,i,r,_,{useSourceUrl:v.useSourceUrl}),o&&!t&&(r=addSemiColon(r,v)+"\n",r+=f+"define('"+o+"', ['"+s+"'], function (main) { return main; });\n"),v.onBuildWrite&&(r=v.onBuildWrite(s,i,r)),n+=addSemiColon(r,v)});c.onLayerEnd&&falseProp(m,a.prefix)&&(d.push(c),m[a.prefix]=!0),c.write&&((u=function(e){n+="\n"+addSemiColon(e,v),v.onBuildWrite&&(n=v.onBuildWrite(s,i,n))}).asModule=function(e,t){n+="\n"+addSemiColon(build.toTransport(l,e,i,t,_,{useSourceUrl:_.context.config.useSourceUrl}),v),v.onBuildWrite&&(n=v.onBuildWrite(e,i,n))},c.write(a.prefix,a.name,u,{name:module.onCompleteData.name,path:module.onCompleteData.path}))}).then(function(){var e=i.replace(v.dir,"");module.onCompleteData.included.push(e),x+=e+"\n",s&&falseProp(_.modulesWithNames,s)&&!v.skipModuleInsertion&&((t=v.shim&&(getOwn(v.shim,s)||o&&getOwn(v.shim,o)))?(e=lang.isArray(t)?t:t.deps,v.wrapShim?n="(function(root) {\n"+f+'define("'+s+'", '+(e&&e.length?build.makeJsArrayString(e)+", ":"[], ")+"function() {\n  return (function() {\n"+n+"\n"+(t.exportsFn?t.exportsFn():"")+"\n  }).apply(root, arguments);\n});\n}(this));\n":n+="\n"+f+'define("'+s+'", '+(e&&e.length?build.makeJsArrayString(e)+", ":"")+(t.exportsFn?t.exportsFn():"function(){}")+");\n"):n+="\n"+f+'define("'+s+'", function(){});\n'),y=appendToFileContents(y,n+="\n",i,v,module,b)})}})).then(function(){d.length&&d.forEach(function(e,t){var n;"string"==typeof module.out?n=module.out:"string"==typeof module._buildPath&&(n=module._buildPath),e.onLayerEnd(function(e){y=appendToFileContents(y,"\n"+addSemiColon(e,v),"onLayerEnd"+t+".js",v,module,b)},{name:module.name,path:n})}),module.create&&(y=appendToFileContents(y,"\n"+f+'define("'+module.name+'", function(){});\n',"module-create.js",v,module,b)),module.insertRequire&&(y=appendToFileContents(y,"\n"+f+'require(["'+module.insertRequire.join('", "')+'"]);\n',"module-insertRequire.js",v,module,b))})}).then(function(){return v.wrap&&v.wrap.__endMap&&v.wrap.__endMap.forEach(function(e){y=e(y,v,b)}),{text:y,buildText:x,sourceMap:b?JSON.stringify(b.toJSON(),null,"  "):void 0}})},build.makeJsArrayString=function(e){return'["'+e.map(function(e){return lang.jsEscape(e)}).join('","')+'"]'},build.toTransport=function(e,t,n,i,r,s){var o=r&&r.context.config.baseUrl;return o&&(n=n.replace(o,"")),transform.toTransport(e,t,n,i,function(e){r&&(e.needsId||e.foundId===t)&&(r.modulesWithNames[t]=!0)},s)},require.build=build}),define("skylark-rjs/main",["./rjs","./build","./lang","./prim","./logger","./parse","./optimize","./pragma","./transform","./requirePatch","./commonJs","./source-map"],function(e,t,n,i,r,s,o,a,c,u,l,f,p){"use strict";return e}),define("skylark-rjs",["skylark-rjs/main"],function(e){return e})},this,define,require);
//# sourceMappingURL=sourcemaps/skylark-rjs-all.js.map
