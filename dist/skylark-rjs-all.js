/**
 * skylark-rjs - A version of rjs that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(factory,globals){var define=globals.define,require=globals.require,isAmd="function"==typeof define&&define.amd,isCmd=!isAmd&&"undefined"!=typeof exports;if(!isAmd&&!define){var map={};define=globals.define=function(e,t,n){"function"==typeof n?(map[e]={factory:n,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var n=t.split("/"),i=e.split("/");n.pop();for(var r=0;r<i.length;r++)"."!=i[r]&&(".."==i[r]?n.pop():n.push(i[r]));return n.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):map[e]={factory:null,resolved:!0,exports:n}},require=globals.require=function(e){if(!map.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=map[e];if(!module.resolved){var t=[];module.deps.forEach(function(e){t.push(require(e))}),module.exports=module.factory.apply(globals,t)||null,module.resolved=!0}return module.exports}}if(!define)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(define,require){define("skylark-langx-ns/_attach",[],function(){return function(e,t,n){"string"==typeof t&&(t=t.split("."));for(var i=t.length,r=e,s=0,a=t[s++];s<i;)r=r[a]=r[a]||{},a=t[s++];if(r[a]){if(n)throw new Error("This namespace already exists:"+t)}else r[a]=n||{};return r[a]}}),define("skylark-langx-ns/ns",["./_attach"],function(e){var t={attach:function(n,i){return e(t,n,i)}};return t}),define("skylark-langx-ns/main",["./ns"],function(e){return e}),define("skylark-langx-ns",["skylark-langx-ns/main"],function(e){return e}),define("skylark-rjs/rjs",["skylark-langx-ns"],function(e){return require.define=define,e.attach("intg.rjs",require)}),define("skylark-rjs/lang",[],function(){"use strict";var e,t,n=Object.prototype.hasOwnProperty;function i(e,t){return n.call(e,t)}return t=function(){return!1},"undefined"!=typeof java&&java.lang&&java.lang.Object&&"undefined"!=typeof importPackage&&(t=function(e){return e instanceof java.lang.Object}),e={backSlashRegExp:/\\/g,ostring:Object.prototype.toString,isArray:Array.isArray||function(t){return"[object Array]"===e.ostring.call(t)},isFunction:function(t){return"[object Function]"===e.ostring.call(t)},isRegExp:function(e){return e&&e instanceof RegExp},hasProp:i,falseProp:function(e,t){return!i(e,t)||!e[t]},getOwn:function(e,t){return i(e,t)&&e[t]},_mixin:function(e,t,n){var i;for(i in t)!t.hasOwnProperty(i)||!n&&e.hasOwnProperty(i)||(e[i]=t[i]);return e},mixin:function(t){var n,i,r,s=Array.prototype.slice.call(arguments);for(t||(t={}),s.length>2&&"boolean"==typeof arguments[s.length-1]&&(n=s.pop()),i=1,r=s.length;i<r;i++)e._mixin(t,s[i],n);return t},deepMix:function(t,n){return e.eachProp(n,function(n,i){"object"!=typeof n||!n||e.isArray(n)||e.isFunction(n)||n instanceof RegExp?t[i]=n:(t[i]||(t[i]={}),e.deepMix(t[i],n))}),t},deeplikeCopy:function(n,r){var s,a;return e.isArray(n)?(a=[],n.forEach(function(t){a.push(e.deeplikeCopy(t,r))}),a):(s=typeof n,null===n||void 0===n||"boolean"===s||"string"===s||"number"===s||e.isFunction(n)||e.isRegExp(n)||t(n)?n:(a={},e.eachProp(n,function(t,n){r&&i(r,n)||(a[n]=e.deeplikeCopy(t,r))}),a))},delegate:function(){function t(){}return function(n,i){t.prototype=n;var r=new t;return t.prototype=null,i&&e.mixin(r,i),r}}(),each:function(e,t){var n;if(e)for(n=0;n<e.length&&!t(e[n],n,e);n+=1);},eachProp:function(e,t){var n;for(n in e)if(i(e,n)&&t(e[n],n))break},bind:function(e,t){return function(){return t.apply(e,arguments)}},jsEscape:function(e){return e.replace(/(["'\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}}}),define("skylark-rjs/prim",[],function(){"use strict";var e=Object.prototype,t=e.hasOwnProperty;function n(e,n){return t.call(e,n)}function i(e,t){var n;if(e)for(n=0;n<e.length;n+=1)e[n]&&t(e[n],n,e)}function r(e){if(n(e,"e")||n(e,"v")){if(!a.hideResolutionConflict)throw new Error("Prim promise already resolved: "+JSON.stringify(e));return!1}return!0}function s(e,t){a.nextTick(function(){i(e,function(e){e(t)})})}function a(){var e,t=[],i=[];return e={callback:function(i,r){r&&e.errback(r),n(e,"v")?a.nextTick(function(){i(e.v)}):t.push(i)},errback:function(t){n(e,"e")?a.nextTick(function(){t(e.e)}):i.push(t)},finished:function(){return n(e,"e")||n(e,"v")},rejected:function(){return n(e,"e")},resolve:function(n){return r(e)&&(e.v=n,s(t,n)),e},reject:function(t){return r(e)&&(e.e=t,s(i,t)),e},start:function(t){return e.resolve(),e.promise.then(t)},promise:{then:function(t,n){var i=a();return e.callback(function(e){try{t&&"function"==typeof t&&(e=t(e)),e&&e.then?e.then(i.resolve,i.reject):i.resolve(e)}catch(e){i.reject(e)}},function(e){var t;try{n&&"function"==typeof n?(t=n(e))&&t.then?t.then(i.resolve,i.reject):i.resolve(t):i.reject(e)}catch(e){i.reject(e)}}),i.promise},fail:function(t){return e.promise.then(null,t)},end:function(){e.errback(function(e){throw e})}}}}return a.serial=function(e){var t=a().resolve().promise;return i(e,function(e){t=t.then(function(){return e()})}),t},a.nextTick="function"==typeof setImmediate?setImmediate:"undefined"!=typeof process&&process.nextTick?process.nextTick:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(e){e()},a}),define("skylark-rjs/logger",[],function(){var e={TRACE:0,INFO:1,WARN:2,ERROR:3,SILENT:4,level:0,logPrefix:"",logLevel:function(e){this.level=e},trace:function(e){this.level<=this.TRACE&&this._print(e)},info:function(e){this.level<=this.INFO&&this._print(e)},warn:function(e){this.level<=this.WARN&&this._print(e)},error:function(e){this.level<=this.ERROR&&this._print(e)},_print:function(e){this._sysPrint((this.logPrefix?this.logPrefix+" ":"")+e)},_sysPrint:function(e){var t,n;t=e,console.log(t,n)}};return e}),define("skylark-acorn/generated/astralIdentifierCodes",[],function(){"use strict";return[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239]}),define("skylark-acorn/generated/astralIdentifierStartCodes",[],function(){"use strict";return[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191]}),define("skylark-acorn/generated/nonASCIIidentifierChars",[],function(){"use strict";return"‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿"}),define("skylark-acorn/generated/nonASCIIidentifierStartChars",[],function(){"use strict";return"ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ"}),define("skylark-acorn/identifier",["./generated/astralIdentifierCodes","./generated/astralIdentifierStartCodes","./generated/nonASCIIidentifierChars","./generated/nonASCIIidentifierStartChars"],function(e,t,n,i){"use strict";const r="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",s={5:r,"5module":r+" export import",6:r+" const class extends export import super"},a=new RegExp("["+i+"]"),o=new RegExp("["+i+n+"]");function c(e,t){let n=65536;for(let i=0;i<t.length;i+=2){if((n+=t[i])>e)return!1;if((n+=t[i+1])>=e)return!0}return!1}return{reservedWords:{3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},keywords:s,keywordRelationalOperator:/^in(stanceof)?$/,isIdentifierStart:function(e,n){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&a.test(String.fromCharCode(e)):!1!==n&&c(e,t)))},isIdentifierChar:function(n,i){return n<48?36===n:n<58||!(n<65)&&(n<91||(n<97?95===n:n<123||(n<=65535?n>=170&&o.test(String.fromCharCode(n)):!1!==i&&(c(n,t)||c(n,e)))))}}}),define("skylark-acorn/tokentype",[],function(){"use strict";class e{constructor(e,t={}){this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null}}function t(t,n){return new e(t,{beforeExpr:!0,binop:n})}const n={beforeExpr:!0},i={startsExpr:!0},r={};function s(t,n={}){return n.keyword=t,r[t]=new e(t,n)}const a={num:new e("num",i),regexp:new e("regexp",i),string:new e("string",i),name:new e("name",i),privateId:new e("privateId",i),eof:new e("eof"),bracketL:new e("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new e("]"),braceL:new e("{",{beforeExpr:!0,startsExpr:!0}),braceR:new e("}"),parenL:new e("(",{beforeExpr:!0,startsExpr:!0}),parenR:new e(")"),comma:new e(",",n),semi:new e(";",n),colon:new e(":",n),dot:new e("."),question:new e("?",n),questionDot:new e("?."),arrow:new e("=>",n),template:new e("template"),invalidTemplate:new e("invalidTemplate"),ellipsis:new e("...",n),backQuote:new e("`",i),dollarBraceL:new e("${",{beforeExpr:!0,startsExpr:!0}),eq:new e("=",{beforeExpr:!0,isAssign:!0}),assign:new e("_=",{beforeExpr:!0,isAssign:!0}),incDec:new e("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new e("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:t("||",1),logicalAND:t("&&",2),bitwiseOR:t("|",3),bitwiseXOR:t("^",4),bitwiseAND:t("&",5),equality:t("==/!=/===/!==",6),relational:t("</>/<=/>=",7),bitShift:t("<</>>/>>>",8),plusMin:new e("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:t("%",10),star:t("*",10),slash:t("/",10),starstar:new e("**",{beforeExpr:!0}),coalesce:t("??",1),_break:s("break"),_case:s("case",n),_catch:s("catch"),_continue:s("continue"),_debugger:s("debugger"),_default:s("default",n),_do:s("do",{isLoop:!0,beforeExpr:!0}),_else:s("else",n),_finally:s("finally"),_for:s("for",{isLoop:!0}),_function:s("function",i),_if:s("if"),_return:s("return",n),_switch:s("switch"),_throw:s("throw",n),_try:s("try"),_var:s("var"),_const:s("const"),_while:s("while",{isLoop:!0}),_with:s("with"),_new:s("new",{beforeExpr:!0,startsExpr:!0}),_this:s("this",i),_super:s("super",i),_class:s("class",i),_extends:s("extends",n),_export:s("export"),_import:s("import",i),_null:s("null",i),_true:s("true",i),_false:s("false",i),_in:s("in",{beforeExpr:!0,binop:7}),_instanceof:s("instanceof",{beforeExpr:!0,binop:7}),_typeof:s("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:s("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:s("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})};return{TokenType:e,keywords:r,types:a}}),define("skylark-acorn/whitespace",[],function(){"use strict";const e=/\r\n?|\n|\u2028|\u2029/,t=new RegExp(e.source,"g");function n(e){return 10===e||13===e||8232===e||8233===e}return{lineBreak:e,lineBreakG:t,isNewLine:n,nextLineBreak:function(e,t,i=e.length){for(let r=t;r<i;r++){let t=e.charCodeAt(r);if(n(t))return r<i-1&&13===t&&10===e.charCodeAt(r+1)?r+2:r+1}return-1},nonASCIIwhitespace:/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,skipWhiteSpace:/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g}}),define("skylark-acorn/util",[],function(){"use strict";const{hasOwnProperty:e,toString:t}=Object.prototype,n=Object.hasOwn||((t,n)=>e.call(t,n)),i=Array.isArray||(e=>"[object Array]"===t.call(e));return{hasOwn:n,isArray:i,wordsRegexp:function(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")},codePointToString:function(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))},loneSurrogate:/[\uD800-\uDFFF]/u}}),define("skylark-acorn/locutil",["./whitespace"],function(e){"use strict";const{nextLineBreak:t}=e;class n{constructor(e,t){this.line=e,this.column=t}offset(e){return new n(this.line,this.column+e)}}return{Position:n,SourceLocation:class{constructor(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)}},getLineInfo:function(e,i){for(let r=1,s=0;;){let a=t(e,s,i);if(a<0)return new n(r,i-s);++r,s=a}}}}),define("skylark-acorn/options",["./util","./locutil"],function(e,t){"use strict";const{hasOwn:n,isArray:i}=e,{SourceLocation:r}=t,s={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};let a=!1;return{defaultOptions:s,getOptions:function(e){let t={};for(let i in s)t[i]=e&&n(e,i)?e[i]:s[i];"latest"===t.ecmaVersion?t.ecmaVersion=1e8:null==t.ecmaVersion?(!a&&"object"==typeof console&&console.warn&&(a=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009);null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5);e&&null!=e.allowHashBang||(t.allowHashBang=t.ecmaVersion>=14);if(i(t.onToken)){let e=t.onToken;t.onToken=(t=>e.push(t))}i(t.onComment)&&(t.onComment=function(e,t){return function(n,i,s,a,o,c){let u={type:n?"Block":"Line",value:i,start:s,end:a};e.locations&&(u.loc=new r(this,o,c)),e.ranges&&(u.range=[s,a]),t.push(u)}}(t,t.onComment));return t}}}),define("skylark-acorn/scopeflags",[],function(){"use strict";const e=2,t=4,n=8,i=257|e;return{SCOPE_TOP:1,SCOPE_FUNCTION:e,SCOPE_ASYNC:t,SCOPE_GENERATOR:n,SCOPE_ARROW:16,SCOPE_SIMPLE_CATCH:32,SCOPE_SUPER:64,SCOPE_DIRECT_SUPER:128,SCOPE_CLASS_STATIC_BLOCK:256,SCOPE_VAR:i,functionFlags:function(i,r){return e|(i?t:0)|(r?n:0)},BIND_NONE:0,BIND_VAR:1,BIND_LEXICAL:2,BIND_FUNCTION:3,BIND_SIMPLE_CATCH:4,BIND_OUTSIDE:5}}),define("skylark-acorn/state",["./identifier","./tokentype","./whitespace","./options","./util","./scopeflags"],function(e,t,n,i,r,s){"use strict";const{reservedWords:a,keywords:o}=e,{types:c}=t,{lineBreak:u}=n,{getOptions:f}=i,{wordsRegexp:l}=r,{SCOPE_TOP:p,SCOPE_FUNCTION:h,SCOPE_ASYNC:d,SCOPE_GENERATOR:m,SCOPE_SUPER:g,SCOPE_DIRECT_SUPER:_,SCOPE_CLASS_STATIC_BLOCK:v}=s;return{Parser:class{constructor(e,t,n){this.options=e=f(e),this.sourceFile=e.sourceFile,this.keywords=l(o[e.ecmaVersion>=6?6:"module"===e.sourceType?"5module":5]);let i="";!0!==e.allowReserved&&(i=a[e.ecmaVersion>=6?6:5===e.ecmaVersion?5:3],"module"===e.sourceType&&(i+=" await")),this.reservedWords=l(i);let r=(i?i+" ":"")+a.strict;this.reservedWordsStrict=l(r),this.reservedWordsStrictBind=l(r+" "+a.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(u).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=c.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(p),this.regexpState=null,this.privateNameStack=[]}parse(){let e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)}get inFunction(){return(this.currentVarScope().flags&h)>0}get inGenerator(){return(this.currentVarScope().flags&m)>0&&!this.currentVarScope().inClassFieldInit}get inAsync(){return(this.currentVarScope().flags&d)>0&&!this.currentVarScope().inClassFieldInit}get canAwait(){for(let e=this.scopeStack.length-1;e>=0;e--){let t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&v)return!1;if(t.flags&h)return(t.flags&d)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction}get allowSuper(){const{flags:e,inClassFieldInit:t}=this.currentThisScope();return(e&g)>0||t||this.options.allowSuperOutsideMethod}get allowDirectSuper(){return(this.currentThisScope().flags&_)>0}get treatFunctionsAsVar(){return this.treatFunctionsAsVarInScope(this.currentScope())}get allowNewDotTarget(){const{flags:e,inClassFieldInit:t}=this.currentThisScope();return(e&(h|v))>0||t}get inClassStaticBlock(){return(this.currentVarScope().flags&v)>0}static extend(...e){let t=this;for(let n=0;n<e.length;n++)t=e[n](t);return t}static parse(e,t){return new this(t,e).parse()}static parseExpressionAt(e,t,n){let i=new this(n,e,t);return i.nextToken(),i.parseExpression()}static tokenizer(e,t){return new this(t,e)}}}}),define("skylark-acorn/parseutil",["./tokentype","./state","./whitespace"],function(e,t,n){"use strict";const{types:i}=e,{Parser:r}=t,{lineBreak:s,skipWhiteSpace:a}=n,o=r.prototype,c=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;o.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){a.lastIndex=e,e+=a.exec(this.input)[0].length;let t=c.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2])){a.lastIndex=e+t[0].length;let n=a.exec(this.input),i=n.index+n[0].length,r=this.input.charAt(i);return";"===r||"}"===r||s.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(r)||"!"===r&&"="===this.input.charAt(i+1))}e+=t[0].length,a.lastIndex=e,e+=a.exec(this.input)[0].length,";"===this.input[e]&&e++}},o.eat=function(e){return this.type===e&&(this.next(),!0)},o.isContextual=function(e){return this.type===i.name&&this.value===e&&!this.containsEsc},o.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},o.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},o.canInsertSemicolon=function(){return this.type===i.eof||this.type===i.braceR||s.test(this.input.slice(this.lastTokEnd,this.start))},o.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},o.semicolon=function(){this.eat(i.semi)||this.insertSemicolon()||this.unexpected()},o.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},o.expect=function(e){this.eat(e)||this.unexpected()},o.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")};return o.checkPatternErrors=function(e,t){if(!e)return;e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");let n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")},o.checkExpressionErrors=function(e,t){if(!e)return!1;let{shorthandAssign:n,doubleProto:i}=e;if(!t)return n>=0||i>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")},o.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},o.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type},{DestructuringErrors:class{constructor(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}}}}),define("skylark-acorn/statement",["./tokentype","./state","./whitespace","./identifier","./util","./parseutil","./scopeflags"],function(e,t,n,i,r,s,a){"use strict";const{types:o}=e,{Parser:c}=t,{lineBreak:u,skipWhiteSpace:f}=n,{isIdentifierStart:l,isIdentifierChar:p,keywordRelationalOperator:h}=i,{hasOwn:d,loneSurrogate:m}=r,{DestructuringErrors:g}=s,{functionFlags:_,SCOPE_SIMPLE_CATCH:v,BIND_SIMPLE_CATCH:y,BIND_LEXICAL:b,BIND_VAR:x,BIND_FUNCTION:S,SCOPE_CLASS_STATIC_BLOCK:w,SCOPE_SUPER:k}=a,A=c.prototype;A.parseTopLevel=function(e){let exports=Object.create(null);for(e.body||(e.body=[]);this.type!==o.eof;){let t=this.parseStatement(null,!0,exports);e.body.push(t)}if(this.inModule)for(let e of Object.keys(this.undefinedExports))this.raiseRecoverable(this.undefinedExports[e].start,`Export '${e}' is not defined`);return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};const T={kind:"loop"},E={kind:"switch"};A.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;f.lastIndex=this.pos;let t=f.exec(this.input),n=this.pos+t[0].length,i=this.input.charCodeAt(n);if(91===i||92===i)return!0;if(e)return!1;if(123===i||i>55295&&i<56320)return!0;if(l(i,!0)){let e=n+1;for(;p(i=this.input.charCodeAt(e),!0);)++e;if(92===i||i>55295&&i<56320)return!0;let t=this.input.slice(n,e);if(!h.test(t))return!0}return!1},A.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;f.lastIndex=this.pos;let e,t=f.exec(this.input),n=this.pos+t[0].length;return!(u.test(this.input.slice(this.pos,n))||"function"!==this.input.slice(n,n+8)||n+8!==this.input.length&&(p(e=this.input.charCodeAt(n+8))||e>55295&&e<56320))},A.parseStatement=function(e,t,exports){let n,i=this.type,r=this.startNode();switch(this.isLet(e)&&(i=o._var,n="let"),i){case o._break:case o._continue:return this.parseBreakContinueStatement(r,i.keyword);case o._debugger:return this.parseDebuggerStatement(r);case o._do:return this.parseDoStatement(r);case o._for:return this.parseForStatement(r);case o._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(r,!1,!e);case o._class:return e&&this.unexpected(),this.parseClass(r,!0);case o._if:return this.parseIfStatement(r);case o._return:return this.parseReturnStatement(r);case o._switch:return this.parseSwitchStatement(r);case o._throw:return this.parseThrowStatement(r);case o._try:return this.parseTryStatement(r);case o._const:case o._var:return n=n||this.value,e&&"var"!==n&&this.unexpected(),this.parseVarStatement(r,n);case o._while:return this.parseWhileStatement(r);case o._with:return this.parseWithStatement(r);case o.braceL:return this.parseBlock(!0,r);case o.semi:return this.parseEmptyStatement(r);case o._export:case o._import:if(this.options.ecmaVersion>10&&i===o._import){f.lastIndex=this.pos;let e=f.exec(this.input),t=this.pos+e[0].length,n=this.input.charCodeAt(t);if(40===n||46===n)return this.parseExpressionStatement(r,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===o._import?this.parseImport(r):this.parseExport(r,exports);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(r,!0,!e);let s=this.value,a=this.parseExpression();return i===o.name&&"Identifier"===a.type&&this.eat(o.colon)?this.parseLabeledStatement(r,s,a,e):this.parseExpressionStatement(r,a)}},A.parseBreakContinueStatement=function(e,t){let n="break"===t;this.next(),this.eat(o.semi)||this.insertSemicolon()?e.label=null:this.type!==o.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());let i=0;for(;i<this.labels.length;++i){let t=this.labels[i];if(null==e.label||t.name===e.label.name){if(null!=t.kind&&(n||"loop"===t.kind))break;if(e.label&&n)break}}return i===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},A.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},A.parseDoStatement=function(e){return this.next(),this.labels.push(T),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(o._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(o.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},A.parseForStatement=function(e){this.next();let t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(T),this.enterScope(0),this.expect(o.parenL),this.type===o.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);let n=this.isLet();if(this.type===o._var||this.type===o._const||n){let i=this.startNode(),r=n?"let":this.value;return this.next(),this.parseVar(i,!0,r),this.finishNode(i,"VariableDeclaration"),(this.type===o._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===i.declarations.length?(this.options.ecmaVersion>=9&&(this.type===o._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,i)):(t>-1&&this.unexpected(t),this.parseFor(e,i))}let i=this.isContextual("let"),r=!1,s=new g,a=this.parseExpression(!(t>-1)||"await",s);return this.type===o._in||(r=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===o._in?t>-1&&this.unexpected(t):e.await=t>-1),i&&r&&this.raise(a.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(a,!1,s),this.checkLValPattern(a),this.parseForIn(e,a)):(this.checkExpressionErrors(s,!0),t>-1&&this.unexpected(t),this.parseFor(e,a))},A.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,P|(n?0:O),!1,t)},A.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(o._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},A.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(o.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},A.parseSwitchStatement=function(e){let t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(o.braceL),this.labels.push(E),this.enterScope(0);for(let n=!1;this.type!==o.braceR;)if(this.type===o._case||this.type===o._default){let i=this.type===o._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),i?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(o.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},A.parseThrowStatement=function(e){return this.next(),u.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};const C=[];A.parseCatchClauseParam=function(){const e=this.parseBindingAtom();let t="Identifier"===e.type;return this.enterScope(t?v:0),this.checkLValPattern(e,t?y:b),this.expect(o.parenR),e},A.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===o._catch){let t=this.startNode();this.next(),this.eat(o.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(o._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},A.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")},A.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(T),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},A.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},A.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},A.parseLabeledStatement=function(e,t,n,i){for(let e of this.labels)e.name===t&&this.raise(n.start,"Label '"+t+"' is already declared");let r=this.type.isLoop?"loop":this.type===o._switch?"switch":null;for(let t=this.labels.length-1;t>=0;t--){let n=this.labels[t];if(n.statementStart!==e.start)break;n.statementStart=this.start,n.kind=r}return this.labels.push({name:t,kind:r,statementStart:this.start}),e.body=this.parseStatement(i?-1===i.indexOf("label")?i+"label":i:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},A.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},A.parseBlock=function(e=!0,t=this.startNode(),n){for(t.body=[],this.expect(o.braceL),e&&this.enterScope(0);this.type!==o.braceR;){let e=this.parseStatement(null);t.body.push(e)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")},A.parseFor=function(e,t){return e.init=t,this.expect(o.semi),e.test=this.type===o.semi?null:this.parseExpression(),this.expect(o.semi),e.update=this.type===o.parenR?null:this.parseExpression(),this.expect(o.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},A.parseForIn=function(e,t){const n=this.type===o._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)&&this.raise(t.start,`${n?"for-in":"for-of"} loop variable declaration may not have an initializer`),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(o.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")},A.parseVar=function(e,t,n,i){for(e.declarations=[],e.kind=n;;){let r=this.startNode();if(this.parseVarId(r,n),this.eat(o.eq)?r.init=this.parseMaybeAssign(t):i||"const"!==n||this.type===o._in||this.options.ecmaVersion>=6&&this.isContextual("of")?i||"Identifier"===r.id.type||t&&(this.type===o._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(o.comma))break}return e},A.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,"var"===t?x:b,!1)};const P=1,O=2;function D(e,t){const n=t.key.name,i=e[n];let r="true";return"MethodDefinition"!==t.type||"get"!==t.kind&&"set"!==t.kind||(r=(t.static?"s":"i")+t.kind),"iget"===i&&"iset"===r||"iset"===i&&"iget"===r||"sget"===i&&"sset"===r||"sset"===i&&"sget"===r?(e[n]="true",!1):!!i||(e[n]=r,!1)}function I(e,t){const{computed:n,key:i}=e;return!n&&("Identifier"===i.type&&i.name===t||"Literal"===i.type&&i.value===t)}A.parseFunction=function(e,t,n,i,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===o.star&&t&O&&this.unexpected(),e.generator=this.eat(o.star)),this.options.ecmaVersion>=8&&(e.async=!!i),t&P&&(e.id=4&t&&this.type!==o.name?null:this.parseIdent(),!e.id||t&O||this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?x:b:S));let s=this.yieldPos,a=this.awaitPos,c=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(_(e.async,e.generator)),t&P||(e.id=this.type===o.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,r),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=c,this.finishNode(e,t&P?"FunctionDeclaration":"FunctionExpression")},A.parseFunctionParams=function(e){this.expect(o.parenL),e.params=this.parseBindingList(o.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},A.parseClass=function(e,t){this.next();const n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);const i=this.enterClassBody(),r=this.startNode();let s=!1;for(r.body=[],this.expect(o.braceL);this.type!==o.braceR;){const t=this.parseClassElement(null!==e.superClass);t&&(r.body.push(t),"MethodDefinition"===t.type&&"constructor"===t.kind?(s&&this.raiseRecoverable(t.start,"Duplicate constructor in the same class"),s=!0):t.key&&"PrivateIdentifier"===t.key.type&&D(i,t)&&this.raiseRecoverable(t.key.start,`Identifier '#${t.key.name}' has already been declared`))}return this.strict=n,this.next(),e.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},A.parseClassElement=function(e){if(this.eat(o.semi))return null;const t=this.options.ecmaVersion,n=this.startNode();let i="",r=!1,s=!1,a="method",c=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(o.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===o.star?c=!0:i="static"}if(n.static=c,!i&&t>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==o.star||this.canInsertSemicolon()?i="async":s=!0),!i&&(t>=9||!s)&&this.eat(o.star)&&(r=!0),!i&&!s&&!r){const e=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=e:i=e)}if(i?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=i,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===o.parenL||"method"!==a||r||s){const t=!n.static&&I(n,"constructor"),i=t&&e;t&&"method"!==a&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=t?"constructor":a,this.parseClassMethod(n,r,s,i)}else this.parseClassField(n);return n},A.isClassElementNameStart=function(){return this.type===o.name||this.type===o.privateId||this.type===o.num||this.type===o.string||this.type===o.bracketL||this.type.keyword},A.parseClassElementName=function(e){this.type===o.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)},A.parseClassMethod=function(e,t,n,i){const r=e.key;"constructor"===e.kind?(t&&this.raise(r.start,"Constructor can't be a generator"),n&&this.raise(r.start,"Constructor can't be an async method")):e.static&&I(e,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype");const s=e.value=this.parseMethod(t,n,i);return"get"===e.kind&&0!==s.params.length&&this.raiseRecoverable(s.start,"getter should have no params"),"set"===e.kind&&1!==s.params.length&&this.raiseRecoverable(s.start,"setter should have exactly one param"),"set"===e.kind&&"RestElement"===s.params[0].type&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")},A.parseClassField=function(e){if(I(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&I(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(o.eq)){const t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")},A.parseClassStaticBlock=function(e){e.body=[];let t=this.labels;for(this.labels=[],this.enterScope(w|k);this.type!==o.braceR;){let t=this.parseStatement(null);e.body.push(t)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")},A.parseClassId=function(e,t){this.type===o.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,b,!1)):(!0===t&&this.unexpected(),e.id=null)},A.parseClassSuper=function(e){e.superClass=this.eat(o._extends)?this.parseExprSubscripts(null,!1):null},A.enterClassBody=function(){const e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared},A.exitClassBody=function(){const{declared:e,used:t}=this.privateNameStack.pop();if(!this.options.checkPrivateFields)return;const n=this.privateNameStack.length,i=0===n?null:this.privateNameStack[n-1];for(let n=0;n<t.length;++n){const r=t[n];d(e,r.name)||(i?i.used.push(r):this.raiseRecoverable(r.start,`Private field '#${r.name}' must be declared in an enclosing class`))}},A.parseExportAllDeclaration=function(e,exports){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(exports,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==o.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")},A.parseExport=function(e,exports){if(this.next(),this.eat(o.star))return this.parseExportAllDeclaration(e,exports);if(this.eat(o._default))return this.checkExport(exports,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(exports,e.declaration.declarations):this.checkExport(exports,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(exports),this.eatContextual("from"))this.type!==o.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(let t of e.specifiers)this.checkUnreserved(t.local),this.checkLocalExport(t.local),"Literal"===t.local.type&&this.raise(t.local.start,"A string literal cannot be used as an exported binding without `from`.");e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},A.parseExportDeclaration=function(e){return this.parseStatement(null)},A.parseExportDefaultDeclaration=function(){let e;if(this.type===o._function||(e=this.isAsyncFunction())){let t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,4|P,!1,e)}if(this.type===o._class){let e=this.startNode();return this.parseClass(e,"nullableID")}{let e=this.parseMaybeAssign();return this.semicolon(),e}},A.checkExport=function(exports,e,t){exports&&("string"!=typeof e&&(e="Identifier"===e.type?e.name:e.value),d(exports,e)&&this.raiseRecoverable(t,"Duplicate export '"+e+"'"),exports[e]=!0)},A.checkPatternExport=function(exports,e){let t=e.type;if("Identifier"===t)this.checkExport(exports,e,e.start);else if("ObjectPattern"===t)for(let t of e.properties)this.checkPatternExport(exports,t);else if("ArrayPattern"===t)for(let t of e.elements)t&&this.checkPatternExport(exports,t);else"Property"===t?this.checkPatternExport(exports,e.value):"AssignmentPattern"===t?this.checkPatternExport(exports,e.left):"RestElement"===t?this.checkPatternExport(exports,e.argument):"ParenthesizedExpression"===t&&this.checkPatternExport(exports,e.expression)},A.checkVariableExport=function(exports,e){if(exports)for(let t of e)this.checkPatternExport(exports,t.id)},A.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},A.parseExportSpecifier=function(exports){let e=this.startNode();return e.local=this.parseModuleExportName(),e.exported=this.eatContextual("as")?this.parseModuleExportName():e.local,this.checkExport(exports,e.exported,e.exported.start),this.finishNode(e,"ExportSpecifier")},A.parseExportSpecifiers=function(exports){let e=[],t=!0;for(this.expect(o.braceL);!this.eat(o.braceR);){if(t)t=!1;else if(this.expect(o.comma),this.afterTrailingComma(o.braceR))break;e.push(this.parseExportSpecifier(exports))}return e},A.parseImport=function(e){return this.next(),this.type===o.string?(e.specifiers=C,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===o.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},A.parseImportSpecifier=function(){let e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,b),this.finishNode(e,"ImportSpecifier")},A.parseImportDefaultSpecifier=function(){let e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,b),this.finishNode(e,"ImportDefaultSpecifier")},A.parseImportNamespaceSpecifier=function(){let e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,b),this.finishNode(e,"ImportNamespaceSpecifier")},A.parseImportSpecifiers=function(){let e=[],t=!0;if(this.type===o.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(o.comma)))return e;if(this.type===o.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(o.braceL);!this.eat(o.braceR);){if(t)t=!1;else if(this.expect(o.comma),this.afterTrailingComma(o.braceR))break;e.push(this.parseImportSpecifier())}return e},A.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===o.string){const e=this.parseLiteral(this.value);return m.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)},A.adaptDirectivePrologue=function(e){for(let t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},A.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])}}),define("skylark-acorn/lval",["./tokentype","./state","./util","./scopeflags"],function(e,t,n,i){"use strict";const{types:r}=e,{Parser:s}=t,{hasOwn:a}=n,{BIND_NONE:o,BIND_OUTSIDE:c,BIND_LEXICAL:u}=i,f=s.prototype;f.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(let n of e.properties)this.toAssignable(n,t),"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token");break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},f.toAssignableList=function(e,t){let n=e.length;for(let i=0;i<n;i++){let n=e[i];n&&this.toAssignable(n,t)}if(n){let i=e[n-1];6===this.options.ecmaVersion&&t&&i&&"RestElement"===i.type&&"Identifier"!==i.argument.type&&this.unexpected(i.argument.start)}return e},f.parseSpread=function(e){let t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},f.parseRestBinding=function(){let e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==r.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},f.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case r.bracketL:let e=this.startNode();return this.next(),e.elements=this.parseBindingList(r.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case r.braceL:return this.parseObj(!0)}return this.parseIdent()},f.parseBindingList=function(e,t,n,i){let s=[],a=!0;for(;!this.eat(e);)if(a?a=!1:this.expect(r.comma),t&&this.type===r.comma)s.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===r.ellipsis){let t=this.parseRestBinding();this.parseBindingListItem(t),s.push(t),this.type===r.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}s.push(this.parseAssignableListItem(i))}return s},f.parseAssignableListItem=function(e){let t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t},f.parseBindingListItem=function(e){return e},f.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(r.eq))return n;let i=this.startNodeAt(e,t);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")},f.checkLValSimple=function(e,t=o,n){const i=t!==o;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(i?"Binding ":"Assigning to ")+e.name+" in strict mode"),i&&(t===u&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(a(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==c&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(i?"Binding":"Assigning to")+" rvalue")}},f.checkLValPattern=function(e,t=o,n){switch(e.type){case"ObjectPattern":for(let i of e.properties)this.checkLValInnerPattern(i,t,n);break;case"ArrayPattern":for(let i of e.elements)i&&this.checkLValInnerPattern(i,t,n);break;default:this.checkLValSimple(e,t,n)}},f.checkLValInnerPattern=function(e,t=o,n){switch(e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}}}),define("skylark-acorn/tokencontext",["./state","./tokentype","./whitespace"],function(e,t,n){"use strict";const{Parser:i}=e,{types:r}=t,{lineBreak:s}=n;class a{constructor(e,t,n,i,r){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=i,this.generator=!!r}}const o={b_stat:new a("{",!1),b_expr:new a("{",!0),b_tmpl:new a("${",!1),p_stat:new a("(",!1),p_expr:new a("(",!0),q_tmpl:new a("`",!0,!0,e=>e.tryReadTemplateToken()),f_stat:new a("function",!1),f_expr:new a("function",!0),f_expr_gen:new a("function",!0,!1,null,!0),f_gen:new a("function",!1,!1,null,!0)},c=i.prototype;return c.initialContext=function(){return[o.b_stat]},c.curContext=function(){return this.context[this.context.length-1]},c.braceIsBlock=function(e){let t=this.curContext();return t===o.f_expr||t===o.f_stat||(e!==r.colon||t!==o.b_stat&&t!==o.b_expr?e===r._return||e===r.name&&this.exprAllowed?s.test(this.input.slice(this.lastTokEnd,this.start)):e===r._else||e===r.semi||e===r.eof||e===r.parenR||e===r.arrow||(e===r.braceL?t===o.b_stat:e!==r._var&&e!==r._const&&e!==r.name&&!this.exprAllowed):!t.isExpr)},c.inGeneratorContext=function(){for(let e=this.context.length-1;e>=1;e--){let t=this.context[e];if("function"===t.token)return t.generator}return!1},c.updateContext=function(e){let t,n=this.type;n.keyword&&e===r.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},c.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)},r.parenR.updateContext=r.braceR.updateContext=function(){if(1===this.context.length)return void(this.exprAllowed=!0);let e=this.context.pop();e===o.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr},r.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?o.b_stat:o.b_expr),this.exprAllowed=!0},r.dollarBraceL.updateContext=function(){this.context.push(o.b_tmpl),this.exprAllowed=!0},r.parenL.updateContext=function(e){let t=e===r._if||e===r._for||e===r._with||e===r._while;this.context.push(t?o.p_stat:o.p_expr),this.exprAllowed=!0},r.incDec.updateContext=function(){},r._function.updateContext=r._class.updateContext=function(e){!e.beforeExpr||e===r._else||e===r.semi&&this.curContext()!==o.p_stat||e===r._return&&s.test(this.input.slice(this.lastTokEnd,this.start))||(e===r.colon||e===r.braceL)&&this.curContext()===o.b_stat?this.context.push(o.f_stat):this.context.push(o.f_expr),this.exprAllowed=!1},r.backQuote.updateContext=function(){this.curContext()===o.q_tmpl?this.context.pop():this.context.push(o.q_tmpl),this.exprAllowed=!1},r.star.updateContext=function(e){if(e===r._function){let e=this.context.length-1;this.context[e]===o.f_expr?this.context[e]=o.f_expr_gen:this.context[e]=o.f_gen}this.exprAllowed=!0},r.name.updateContext=function(e){let t=!1;this.options.ecmaVersion>=6&&e!==r.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t},{TokContext:a,types:o}}),define("skylark-acorn/expression",["./tokentype","./tokencontext","./state","./parseutil","./whitespace","./scopeflags"],function(e,t,n,i,r,s){"use strict";const{types:a}=e,{types:o}=t,{Parser:c}=n,{DestructuringErrors:u}=i,{lineBreak:f}=r,{functionFlags:l,SCOPE_ARROW:p,SCOPE_SUPER:h,SCOPE_DIRECT_SUPER:d,BIND_OUTSIDE:m,BIND_VAR:g}=s,_=c.prototype;_.checkPropClash=function(e,t,n){if(this.options.ecmaVersion>=9&&"SpreadElement"===e.type)return;if(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))return;let i,{key:r}=e;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}let{kind:s}=e;if(this.options.ecmaVersion>=6)return void("__proto__"===i&&"init"===s&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0));let a=t[i="$"+i];if(a){let e;(e="init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(r.start,"Redefinition of property")}else a=t[i]={init:!1,get:!1,set:!1};a[s]=!0},_.parseExpression=function(e,t){let n=this.start,i=this.startLoc,r=this.parseMaybeAssign(e,t);if(this.type===a.comma){let s=this.startNodeAt(n,i);for(s.expressions=[r];this.eat(a.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return r},_.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}let i=!1,r=-1,s=-1,o=-1;t?(r=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new u,i=!0);let c=this.start,f=this.startLoc;this.type!==a.parenL&&this.type!==a.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===e);let l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,c,f)),this.type.isAssign){let n=this.startNodeAt(c,f);return n.operator=this.value,this.type===a.eq&&(l=this.toAssignable(l,!1,t)),i||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===a.eq?this.checkLValPattern(l):this.checkLValSimple(l),n.left=l,this.next(),n.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(n,"AssignmentExpression")}return i&&this.checkExpressionErrors(t,!0),r>-1&&(t.parenthesizedAssign=r),s>-1&&(t.trailingComma=s),l},_.parseMaybeConditional=function(e,t){let n=this.start,i=this.startLoc,r=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return r;if(this.eat(a.question)){let t=this.startNodeAt(n,i);return t.test=r,t.consequent=this.parseMaybeAssign(),this.expect(a.colon),t.alternate=this.parseMaybeAssign(e),this.finishNode(t,"ConditionalExpression")}return r},_.parseExprOps=function(e,t){let n=this.start,i=this.startLoc,r=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)?r:r.start===n&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,n,i,-1,e)},_.parseExprOp=function(e,t,n,i,r){let s=this.type.binop;if(null!=s&&(!r||this.type!==a._in)&&s>i){let o=this.type===a.logicalOR||this.type===a.logicalAND,c=this.type===a.coalesce;c&&(s=a.logicalAND.binop);let u=this.value;this.next();let f=this.start,l=this.startLoc,p=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),f,l,s,r),h=this.buildBinary(t,n,e,p,u,o||c);return(o&&this.type===a.coalesce||c&&(this.type===a.logicalOR||this.type===a.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(h,t,n,i,r)}return e},_.buildBinary=function(e,t,n,i,r,s){"PrivateIdentifier"===i.type&&this.raise(i.start,"Private identifier can only be left side of binary expression");let a=this.startNodeAt(e,t);return a.left=n,a.operator=r,a.right=i,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},_.parseMaybeUnary=function(e,t,n,i){let r,s=this.start,o=this.startLoc;if(this.isContextual("await")&&this.canAwait)r=this.parseAwait(i),t=!0;else if(this.type.prefix){let n=this.startNode(),s=this.type===a.incDec;n.operator=this.value,n.prefix=!0,this.next(),n.argument=this.parseMaybeUnary(null,!0,s,i),this.checkExpressionErrors(e,!0),s?this.checkLValSimple(n.argument):this.strict&&"delete"===n.operator&&"Identifier"===n.argument.type?this.raiseRecoverable(n.start,"Deleting local variable in strict mode"):"delete"===n.operator&&function e(t){return"MemberExpression"===t.type&&"PrivateIdentifier"===t.property.type||"ChainExpression"===t.type&&e(t.expression)}(n.argument)?this.raiseRecoverable(n.start,"Private fields can not be deleted"):t=!0,r=this.finishNode(n,s?"UpdateExpression":"UnaryExpression")}else if(t||this.type!==a.privateId){if(r=this.parseExprSubscripts(e,i),this.checkExpressionErrors(e))return r;for(;this.type.postfix&&!this.canInsertSemicolon();){let e=this.startNodeAt(s,o);e.operator=this.value,e.prefix=!1,e.argument=r,this.checkLValSimple(r),this.next(),r=this.finishNode(e,"UpdateExpression")}}else(i||0===this.privateNameStack.length)&&this.options.checkPrivateFields&&this.unexpected(),r=this.parsePrivateIdent(),this.type!==a._in&&this.unexpected();return n||!this.eat(a.starstar)?r:t?void this.unexpected(this.lastTokStart):this.buildBinary(s,o,r,this.parseMaybeUnary(null,!1,!1,i),"**",!1)},_.parseExprSubscripts=function(e,t){let n=this.start,i=this.startLoc,r=this.parseExprAtom(e,t);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;let s=this.parseSubscripts(r,n,i,!1,t);return e&&"MemberExpression"===s.type&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s},_.parseSubscripts=function(e,t,n,i,r){let s=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start==5&&this.potentialArrowAt===e.start,a=!1;for(;;){let o=this.parseSubscript(e,t,n,i,s,a,r);if(o.optional&&(a=!0),o===e||"ArrowFunctionExpression"===o.type){if(a){const e=this.startNodeAt(t,n);e.expression=o,o=this.finishNode(e,"ChainExpression")}return o}e=o}},_.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(a.arrow)},_.parseSubscriptAsyncArrow=function(e,t,n,i){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,i)},_.parseSubscript=function(e,t,n,i,r,s,o){let c=this.options.ecmaVersion>=11,f=c&&this.eat(a.questionDot);i&&f&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");let l=this.eat(a.bracketL);if(l||f&&this.type!==a.parenL&&this.type!==a.backQuote||this.eat(a.dot)){let i=this.startNodeAt(t,n);i.object=e,l?(i.property=this.parseExpression(),this.expect(a.bracketR)):this.type===a.privateId&&"Super"!==e.type?i.property=this.parsePrivateIdent():i.property=this.parseIdent("never"!==this.options.allowReserved),i.computed=!!l,c&&(i.optional=f),e=this.finishNode(i,"MemberExpression")}else if(!i&&this.eat(a.parenL)){let i=new u,s=this.yieldPos,l=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;let h=this.parseExprList(a.parenR,this.options.ecmaVersion>=8,!1,i);if(r&&!f&&this.shouldParseAsyncArrow())return this.checkPatternErrors(i,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=s,this.awaitPos=l,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,h,o);this.checkExpressionErrors(i,!0),this.yieldPos=s||this.yieldPos,this.awaitPos=l||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;let d=this.startNodeAt(t,n);d.callee=e,d.arguments=h,c&&(d.optional=f),e=this.finishNode(d,"CallExpression")}else if(this.type===a.backQuote){(f||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");let i=this.startNodeAt(t,n);i.tag=e,i.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(i,"TaggedTemplateExpression")}return e},_.parseExprAtom=function(e,t,n){this.type===a.slash&&this.readRegexp();let i,r=this.potentialArrowAt===this.start;switch(this.type){case a._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),i=this.startNode(),this.next(),this.type!==a.parenL||this.allowDirectSuper||this.raise(i.start,"super() call outside constructor of a subclass"),this.type!==a.dot&&this.type!==a.bracketL&&this.type!==a.parenL&&this.unexpected(),this.finishNode(i,"Super");case a._this:return i=this.startNode(),this.next(),this.finishNode(i,"ThisExpression");case a.name:let s=this.start,c=this.startLoc,u=this.containsEsc,f=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!u&&"async"===f.name&&!this.canInsertSemicolon()&&this.eat(a._function))return this.overrideContext(o.f_expr),this.parseFunction(this.startNodeAt(s,c),0,!1,!0,t);if(r&&!this.canInsertSemicolon()){if(this.eat(a.arrow))return this.parseArrowExpression(this.startNodeAt(s,c),[f],!1,t);if(this.options.ecmaVersion>=8&&"async"===f.name&&this.type===a.name&&!u&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return f=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(a.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,c),[f],!0,t)}return f;case a.regexp:let l=this.value;return(i=this.parseLiteral(l.value)).regex={pattern:l.pattern,flags:l.flags},i;case a.num:case a.string:return this.parseLiteral(this.value);case a._null:case a._true:case a._false:return(i=this.startNode()).value=this.type===a._null?null:this.type===a._true,i.raw=this.type.keyword,this.next(),this.finishNode(i,"Literal");case a.parenL:let p=this.start,h=this.parseParenAndDistinguishExpression(r,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(h)&&(e.parenthesizedAssign=p),e.parenthesizedBind<0&&(e.parenthesizedBind=p)),h;case a.bracketL:return i=this.startNode(),this.next(),i.elements=this.parseExprList(a.bracketR,!0,!0,e),this.finishNode(i,"ArrayExpression");case a.braceL:return this.overrideContext(o.b_expr),this.parseObj(!1,e);case a._function:return i=this.startNode(),this.next(),this.parseFunction(i,0);case a._class:return this.parseClass(this.startNode(),!1);case a._new:return this.parseNew();case a.backQuote:return this.parseTemplate();case a._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}},_.parseExprAtomDefault=function(){this.unexpected()},_.parseExprImport=function(e){const t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");const n=this.parseIdent(!0);return this.type!==a.parenL||e?this.type===a.dot?(t.meta=n,this.parseImportMeta(t)):void this.unexpected():this.parseDynamicImport(t)},_.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(a.parenR)){const e=this.start;this.eat(a.comma)&&this.eat(a.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(e,"ImportExpression")},_.parseImportMeta=function(e){this.next();const t=this.containsEsc;return e.property=this.parseIdent(!0),"meta"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")},_.parseLiteral=function(e){let t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")},_.parseParenExpression=function(){this.expect(a.parenL);let e=this.parseExpression();return this.expect(a.parenR),e},_.shouldParseArrow=function(e){return!this.canInsertSemicolon()},_.parseParenAndDistinguishExpression=function(e,t){let n,i=this.start,r=this.startLoc,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();let o,c=this.start,f=this.startLoc,l=[],p=!0,h=!1,d=new u,m=this.yieldPos,g=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==a.parenR;){if(p?p=!1:this.expect(a.comma),s&&this.afterTrailingComma(a.parenR,!0)){h=!0;break}if(this.type===a.ellipsis){o=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===a.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,d,this.parseParenItem))}let _=this.lastTokEnd,v=this.lastTokEndLoc;if(this.expect(a.parenR),e&&this.shouldParseArrow(l)&&this.eat(a.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=m,this.awaitPos=g,this.parseParenArrowList(i,r,l,t);l.length&&!h||this.unexpected(this.lastTokStart),o&&this.unexpected(o),this.checkExpressionErrors(d,!0),this.yieldPos=m||this.yieldPos,this.awaitPos=g||this.awaitPos,l.length>1?((n=this.startNodeAt(c,f)).expressions=l,this.finishNodeAt(n,"SequenceExpression",_,v)):n=l[0]}else n=this.parseParenExpression();if(this.options.preserveParens){let e=this.startNodeAt(i,r);return e.expression=n,this.finishNode(e,"ParenthesizedExpression")}return n},_.parseParenItem=function(e){return e},_.parseParenArrowList=function(e,t,n,i){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,i)};const v=[];_.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");let e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(a.dot)){e.meta=t;let n=this.containsEsc;return e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}let n=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),n,i,!0,!1),this.eat(a.parenL)?e.arguments=this.parseExprList(a.parenR,this.options.ecmaVersion>=8,!1):e.arguments=v,this.finishNode(e,"NewExpression")},_.parseTemplateElement=function({isTagged:e}){let t=this.startNode();return this.type===a.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),t.value={raw:this.value,cooked:null}):t.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),t.tail=this.type===a.backQuote,this.finishNode(t,"TemplateElement")},_.parseTemplate=function({isTagged:e=!1}={}){let t=this.startNode();this.next(),t.expressions=[];let n=this.parseTemplateElement({isTagged:e});for(t.quasis=[n];!n.tail;)this.type===a.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(a.dollarBraceL),t.expressions.push(this.parseExpression()),this.expect(a.braceR),t.quasis.push(n=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(t,"TemplateLiteral")},_.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===a.name||this.type===a.num||this.type===a.string||this.type===a.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===a.star)&&!f.test(this.input.slice(this.lastTokEnd,this.start))},_.parseObj=function(e,t){let n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(a.braceR);){if(i)i=!1;else if(this.expect(a.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(a.braceR))break;const s=this.parseProperty(e,t);e||this.checkPropClash(s,r,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},_.parseProperty=function(e,t){let n,i,r,s,o=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(a.ellipsis))return e?(o.argument=this.parseIdent(!1),this.type===a.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(o.argument=this.parseMaybeAssign(!1,t),this.type===a.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(e||t)&&(r=this.start,s=this.startLoc),e||(n=this.eat(a.star)));let c=this.containsEsc;return this.parsePropertyName(o),!e&&!c&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(o)?(i=!0,n=this.options.ecmaVersion>=9&&this.eat(a.star),this.parsePropertyName(o)):i=!1,this.parsePropertyValue(o,e,n,i,r,s,t,c),this.finishNode(o,"Property")},_.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);let t="get"===e.kind?0:1;if(e.value.params.length!==t){let t=e.value.start;"get"===e.kind?this.raiseRecoverable(t,"getter should have no params"):this.raiseRecoverable(t,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")},_.parsePropertyValue=function(e,t,n,i,r,s,o,c){(n||i)&&this.type===a.colon&&this.unexpected(),this.eat(a.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===a.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,i)):t||c||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===a.comma||this.type===a.braceR||this.type===a.eq?this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((n||i)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=r),e.kind="init",t?e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key)):this.type===a.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected():((n||i)&&this.unexpected(),this.parseGetterSetter(e))},_.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(a.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(a.bracketR),e.key;e.computed=!1}return e.key=this.type===a.num||this.type===a.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},_.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},_.parseMethod=function(e,t,n){let i=this.startNode(),r=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=e),this.options.ecmaVersion>=8&&(i.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(l(t,i.generator)|h|(n?d:0)),this.expect(a.parenL),i.params=this.parseBindingList(a.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(i,"FunctionExpression")},_.parseArrowExpression=function(e,t,n,i){let r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(l(n,!1)|p),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,i),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(e,"ArrowFunctionExpression")},_.parseFunctionBody=function(e,t,n,i){let r=t&&this.type!==a.braceL,s=this.strict,o=!1;if(r)e.body=this.parseMaybeAssign(i),e.expression=!0,this.checkParams(e,!1);else{let i=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);s&&!i||(o=this.strictDirective(this.end))&&i&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");let r=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,m),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=r}this.exitScope()},_.isSimpleParamList=function(e){for(let t of e)if("Identifier"!==t.type)return!1;return!0},_.checkParams=function(e,t){let n=Object.create(null);for(let i of e.params)this.checkLValInnerPattern(i,g,t?null:n)},_.parseExprList=function(e,t,n,i){let r=[],s=!0;for(;!this.eat(e);){if(s)s=!1;else if(this.expect(a.comma),t&&this.afterTrailingComma(e))break;let o;n&&this.type===a.comma?o=null:this.type===a.ellipsis?(o=this.parseSpread(i),i&&this.type===a.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):o=this.parseMaybeAssign(!1,i),r.push(o)}return r},_.checkUnreserved=function({start:e,end:t,name:n}){if(this.inGenerator&&"yield"===n&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===n&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===n&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==n&&"await"!==n||this.raise(e,`Cannot use ${n} in class static initialization block`),this.keywords.test(n)&&this.raise(e,`Unexpected keyword '${n}'`),this.options.ecmaVersion<6&&-1!==this.input.slice(e,t).indexOf("\\"))return;const i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(n)&&(this.inAsync||"await"!==n||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,`The keyword '${n}' is reserved`))},_.parseIdent=function(e){let t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),"await"!==t.name||this.awaitIdentPos||(this.awaitIdentPos=t.start)),t},_.parseIdentNode=function(){let e=this.startNode();return this.type===a.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,"class"!==e.name&&"function"!==e.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),e},_.parsePrivateIdent=function(){const e=this.startNode();return this.type===a.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(0===this.privateNameStack.length?this.raise(e.start,`Private field '#${e.name}' must be declared in an enclosing class`):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e},_.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);let t=this.startNode();return this.next(),this.type===a.semi||this.canInsertSemicolon()||this.type!==a.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(a.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},_.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);let t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")}}),define("skylark-acorn/location",["./state","./locutil"],function(e,t){"use strict";const{Parser:n}=e,{Position:i,getLineInfo:r}=t,s=n.prototype;s.raise=function(e,t){let n=r(this.input,e);t+=" ("+n.line+":"+n.column+")";let i=new SyntaxError(t);throw i.pos=e,i.loc=n,i.raisedAt=this.pos,i},s.raiseRecoverable=s.raise,s.curPosition=function(){if(this.options.locations)return new i(this.curLine,this.pos-this.lineStart)}}),define("skylark-acorn/scope",["./state","./scopeflags"],function(e,t){"use strict";const{Parser:n}=e,{SCOPE_VAR:i,SCOPE_FUNCTION:r,SCOPE_TOP:s,SCOPE_ARROW:a,SCOPE_SIMPLE_CATCH:o,BIND_LEXICAL:c,BIND_SIMPLE_CATCH:u,BIND_FUNCTION:f}=t,l=n.prototype;l.enterScope=function(e){this.scopeStack.push(new class{constructor(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1}}(e))},l.exitScope=function(){this.scopeStack.pop()},l.treatFunctionsAsVarInScope=function(e){return e.flags&r||!this.inModule&&e.flags&s},l.declareName=function(e,t,n){let r=!1;if(t===c){const t=this.currentScope();r=t.lexical.indexOf(e)>-1||t.functions.indexOf(e)>-1||t.var.indexOf(e)>-1,t.lexical.push(e),this.inModule&&t.flags&s&&delete this.undefinedExports[e]}else if(t===u){const t=this.currentScope();t.lexical.push(e)}else if(t===f){const t=this.currentScope();r=this.treatFunctionsAsVar?t.lexical.indexOf(e)>-1:t.lexical.indexOf(e)>-1||t.var.indexOf(e)>-1,t.functions.push(e)}else for(let t=this.scopeStack.length-1;t>=0;--t){const n=this.scopeStack[t];if(n.lexical.indexOf(e)>-1&&!(n.flags&o&&n.lexical[0]===e)||!this.treatFunctionsAsVarInScope(n)&&n.functions.indexOf(e)>-1){r=!0;break}if(n.var.push(e),this.inModule&&n.flags&s&&delete this.undefinedExports[e],n.flags&i)break}r&&this.raiseRecoverable(n,`Identifier '${e}' has already been declared`)},l.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},l.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},l.currentVarScope=function(){for(let e=this.scopeStack.length-1;;e--){let t=this.scopeStack[e];if(t.flags&i)return t}},l.currentThisScope=function(){for(let e=this.scopeStack.length-1;;e--){let t=this.scopeStack[e];if(t.flags&i&&!(t.flags&a))return t}}}),define("skylark-acorn/node",["./state","./locutil"],function(e,t){"use strict";const{Parser:n}=e,{SourceLocation:i}=t;class r{constructor(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new i(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])}}const s=n.prototype;function a(e,t,n,i){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=i),this.options.ranges&&(e.range[1]=n),e}return s.startNode=function(){return new r(this,this.start,this.startLoc)},s.startNodeAt=function(e,t){return new r(this,e,t)},s.finishNode=function(e,t){return a.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},s.finishNodeAt=function(e,t,n,i){return a.call(this,e,t,n,i)},s.copyNode=function(e){let t=new r(this,e.start,this.startLoc);for(let n in e)t[n]=e[n];return t},{Node:r}}),define("skylark-acorn/unicode-property-data",["./util"],function(e){"use strict";const{wordsRegexp:t}=e,n="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",i=n+" Extended_Pictographic",r=i,s=r+" EBase EComp EMod EPres ExtPict",a=s,o={9:n,10:i,11:r,12:s,13:a,14:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},c={9:"",10:"",11:"",12:"",13:"",14:"Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji"},u="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",f="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",l=f+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",p=l+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",h=p+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",d=h+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",m={9:f,10:l,11:p,12:h,13:d,14:"Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz"},g={};function _(e){const n=g[e]={binary:t(o[e]+" "+u),binaryOfStrings:t(c[e]),nonBinary:{General_Category:t(u),Script:t(m[e])}};n.nonBinary.Script_Extensions=n.nonBinary.Script,n.nonBinary.gc=n.nonBinary.General_Category,n.nonBinary.sc=n.nonBinary.Script,n.nonBinary.scx=n.nonBinary.Script_Extensions}for(const e of[9,10,11,12,13,14])_(e);return g}),define("skylark-acorn/regexp",["./identifier","./state","./unicode-property-data","./util"],function(e,t,n,i){"use strict";const{isIdentifierStart:r,isIdentifierChar:s}=e,{Parser:a}=t,{hasOwn:o,codePointToString:c}=i,u=a.prototype;function f(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function l(e){return e>=65&&e<=90||e>=97&&e<=122}u.validateRegExpFlags=function(e){const t=e.validFlags,n=e.flags;let i=!1,r=!1;for(let s=0;s<n.length;s++){const a=n.charAt(s);-1===t.indexOf(a)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(a,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),"u"===a&&(i=!0),"v"===a&&(r=!0)}this.options.ecmaVersion>=15&&i&&r&&this.raise(e.start,"Invalid regular expression flag")},u.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},u.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(const t of e.backReferenceNames)-1===e.groupNames.indexOf(t)&&e.raise("Invalid named capture referenced")},u.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},u.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},u.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!(e.switchU?!this.regexp_eatAtom(e):!this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},u.regexp_eatAssertion=function(e){const t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){let t=!1;if(this.options.ecmaVersion>=9&&(t=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!t,!0}return e.pos=t,!1},u.regexp_eatQuantifier=function(e,t=!1){return!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},u.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},u.regexp_eatBracedQuantifier=function(e,t){const n=e.pos;if(e.eat(123)){let i=0,r=-1;if(this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue),e.eat(125)))return-1!==r&&r<i&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},u.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},u.regexp_eatReverseSolidusAtomEscape=function(e){const t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},u.regexp_eatUncapturingGroup=function(e){const t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},u.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},u.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},u.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},u.regexp_eatSyntaxCharacter=function(e){const t=e.current();return!!f(t)&&(e.lastIntValue=t,e.advance(),!0)},u.regexp_eatPatternCharacters=function(e){const t=e.pos;let n=0;for(;-1!==(n=e.current())&&!f(n);)e.advance();return e.pos!==t},u.regexp_eatExtendedPatternCharacter=function(e){const t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},u.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},u.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},u.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=c(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=c(e.lastIntValue);return!0}return!1},u.regexp_eatRegExpIdentifierStart=function(e){const t=e.pos,n=this.options.ecmaVersion>=11;let i=e.current(n);return e.advance(n),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),function(e){return r(e,!0)||36===e||95===e}(i)?(e.lastIntValue=i,!0):(e.pos=t,!1)},u.regexp_eatRegExpIdentifierPart=function(e){const t=e.pos,n=this.options.ecmaVersion>=11;let i=e.current(n);return e.advance(n),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),function(e){return s(e,!0)||36===e||95===e||8204===e||8205===e}(i)?(e.lastIntValue=i,!0):(e.pos=t,!1)},u.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},u.regexp_eatBackReference=function(e){const t=e.pos;if(this.regexp_eatDecimalEscape(e)){const n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},u.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},u.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},u.regexp_eatCControlLetter=function(e){const t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},u.regexp_eatZero=function(e){return 48===e.current()&&!d(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},u.regexp_eatControlEscape=function(e){const t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},u.regexp_eatControlLetter=function(e){const t=e.current();return!!l(t)&&(e.lastIntValue=t%32,e.advance(),!0)},u.regexp_eatRegExpUnicodeEscapeSequence=function(e,t=!1){const n=e.pos,i=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){const t=e.lastIntValue;if(i&&t>=55296&&t<=56319){const n=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){const n=e.lastIntValue;if(n>=56320&&n<=57343)return e.lastIntValue=1024*(t-55296)+(n-56320)+65536,!0}e.pos=n,e.lastIntValue=t}return!0}if(i&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&((r=e.lastIntValue)>=0&&r<=1114111))return!0;i&&e.raise("Invalid unicode escape"),e.pos=n}var r;return!1},u.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);const t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},u.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;let t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1};function p(e){return l(e)||95===e}function h(e){return p(e)||d(e)}function d(e){return e>=48&&e<=57}function m(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function g(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function _(e){return e>=48&&e<=55}return u.regexp_eatCharacterClassEscape=function(e){const t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e}(t))return e.lastIntValue=-1,e.advance(),1;let n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=80===t)||112===t)){let t;if(e.lastIntValue=-1,e.advance(),e.eat(123)&&(t=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&2===t&&e.raise("Invalid property name"),t;e.raise("Invalid property name")}return 0},u.regexp_eatUnicodePropertyValueExpression=function(e){const t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){const t=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){const n=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,t,n),1}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){const t=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,t)}return 0},u.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){o(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},u.regexp_validateUnicodePropertyNameOrValue=function(e,t){return e.unicodeProperties.binary.test(t)?1:e.switchV&&e.unicodeProperties.binaryOfStrings.test(t)?2:void e.raise("Invalid property name")},u.regexp_eatUnicodePropertyName=function(e){let t=0;for(e.lastStringValue="";p(t=e.current());)e.lastStringValue+=c(t),e.advance();return""!==e.lastStringValue},u.regexp_eatUnicodePropertyValue=function(e){let t=0;for(e.lastStringValue="";h(t=e.current());)e.lastStringValue+=c(t),e.advance();return""!==e.lastStringValue},u.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},u.regexp_eatCharacterClass=function(e){if(e.eat(91)){const t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&2===n&&e.raise("Negated character class may contain strings"),!0}return!1},u.regexp_classContents=function(e){return 93===e.current()?1:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),1)},u.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){const t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){const n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},u.regexp_eatClassAtom=function(e){const t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){const t=e.current();(99===t||_(t))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}const n=e.current();return 93!==n&&(e.lastIntValue=n,e.advance(),!0)},u.regexp_eatClassEscape=function(e){const t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},u.regexp_classSetExpression=function(e){let t,n=1;if(this.regexp_eatClassSetRange(e));else if(t=this.regexp_eatClassSetOperand(e)){2===t&&(n=2);const i=e.pos;for(;e.eatChars([38,38]);)38!==e.current()&&(t=this.regexp_eatClassSetOperand(e))?2!==t&&(n=1):e.raise("Invalid character in character class");if(i!==e.pos)return n;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(i!==e.pos)return n}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(!(t=this.regexp_eatClassSetOperand(e)))return n;2===t&&(n=2)}},u.regexp_eatClassSetRange=function(e){const t=e.pos;if(this.regexp_eatClassSetCharacter(e)){const n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){const t=e.lastIntValue;return-1!==n&&-1!==t&&n>t&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1},u.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?1:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)},u.regexp_eatNestedClass=function(e){const t=e.pos;if(e.eat(91)){const n=e.eat(94),i=this.regexp_classContents(e);if(e.eat(93))return n&&2===i&&e.raise("Negated character class may contain strings"),i;e.pos=t}if(e.eat(92)){const n=this.regexp_eatCharacterClassEscape(e);if(n)return n;e.pos=t}return null},u.regexp_eatClassStringDisjunction=function(e){const t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){const t=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return t}else e.raise("Invalid escape");e.pos=t}return null},u.regexp_classStringDisjunctionContents=function(e){let t=this.regexp_classString(e);for(;e.eat(124);)2===this.regexp_classString(e)&&(t=2);return t},u.regexp_classString=function(e){let t=0;for(;this.regexp_eatClassSetCharacter(e);)t++;return 1===t?1:2},u.regexp_eatClassSetCharacter=function(e){const t=e.pos;if(e.eat(92))return!(!this.regexp_eatCharacterEscape(e)&&!this.regexp_eatClassSetReservedPunctuator(e))||(e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1));const n=e.current();return!(n<0||n===e.lookahead()&&function(e){return 33===e||e>=35&&e<=38||e>=42&&e<=44||46===e||e>=58&&e<=64||94===e||96===e||126===e}(n))&&(!function(e){return 40===e||41===e||45===e||47===e||e>=91&&e<=93||e>=123&&e<=125}(n)&&(e.advance(),e.lastIntValue=n,!0))},u.regexp_eatClassSetReservedPunctuator=function(e){const t=e.current();return!!function(e){return 33===e||35===e||37===e||38===e||44===e||45===e||e>=58&&e<=62||64===e||96===e||126===e}(t)&&(e.lastIntValue=t,e.advance(),!0)},u.regexp_eatClassControlLetter=function(e){const t=e.current();return!(!d(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},u.regexp_eatHexEscapeSequence=function(e){const t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},u.regexp_eatDecimalDigits=function(e){const t=e.pos;let n=0;for(e.lastIntValue=0;d(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},u.regexp_eatHexDigits=function(e){const t=e.pos;let n=0;for(e.lastIntValue=0;m(n=e.current());)e.lastIntValue=16*e.lastIntValue+g(n),e.advance();return e.pos!==t},u.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){const t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){const n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},u.regexp_eatOctalDigit=function(e){const t=e.current();return _(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},u.regexp_eatFixedHexDigits=function(e,t){const n=e.pos;e.lastIntValue=0;for(let i=0;i<t;++i){const t=e.current();if(!m(t))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+g(t),e.advance()}return!0},{RegExpValidationState:class{constructor(e){this.parser=e,this.validFlags=`gim${e.options.ecmaVersion>=6?"uy":""}${e.options.ecmaVersion>=9?"s":""}${e.options.ecmaVersion>=13?"d":""}${e.options.ecmaVersion>=15?"v":""}`,this.unicodeProperties=n[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]}reset(e,t,n){const i=-1!==n.indexOf("v"),r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=r&&this.parser.options.ecmaVersion>=9)}raise(e){this.parser.raiseRecoverable(this.start,`Invalid regular expression: /${this.source}/: ${e}`)}at(e,t=!1){const n=this.source,i=n.length;if(e>=i)return-1;const r=n.charCodeAt(e);if(!t&&!this.switchU||r<=55295||r>=57344||e+1>=i)return r;const s=n.charCodeAt(e+1);return s>=56320&&s<=57343?(r<<10)+s-56613888:r}nextIndex(e,t=!1){const n=this.source,i=n.length;if(e>=i)return i;let r,s=n.charCodeAt(e);return!t&&!this.switchU||s<=55295||s>=57344||e+1>=i||(r=n.charCodeAt(e+1))<56320||r>57343?e+1:e+2}current(e=!1){return this.at(this.pos,e)}lookahead(e=!1){return this.at(this.nextIndex(this.pos,e),e)}advance(e=!1){this.pos=this.nextIndex(this.pos,e)}eat(e,t=!1){return this.current(t)===e&&(this.advance(t),!0)}eatChars(e,t=!1){let n=this.pos;for(const i of e){const e=this.at(n,t);if(-1===e||e!==i)return!1;n=this.nextIndex(n,t)}return this.pos=n,!0}}}}),define("skylark-acorn/tokenize",["./identifier","./tokentype","./state","./locutil","./regexp","./whitespace","./util"],function(e,t,n,i,r,s,a){"use strict";const{isIdentifierStart:o,isIdentifierChar:c}=e,{types:u,keywords:f}=t,{Parser:l}=n,{SourceLocation:p}=i,{RegExpValidationState:h}=r,{lineBreak:d,nextLineBreak:m,isNewLine:g,nonASCIIwhitespace:_}=s,{codePointToString:v}=a;class y{constructor(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new p(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])}}const b=l.prototype;function x(e){return"function"!=typeof BigInt?null:BigInt(e.replace(/_/g,""))}b.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new y(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},b.getToken=function(){return this.next(),new y(this)},"undefined"!=typeof Symbol&&(b[Symbol.iterator]=function(){return{next:()=>{let e=this.getToken();return{done:e.type===u.eof,value:e}}}}),b.nextToken=function(){let e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(u.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},b.readToken=function(e){return o(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},b.fullCharCodeAtPos=function(){let e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;let t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888},b.skipBlockComment=function(){let e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(let e,n=t;(e=m(this.input,n,this.pos))>-1;)++this.curLine,n=this.lineStart=e;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())},b.skipLineComment=function(e){let t=this.pos,n=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=e);for(;this.pos<this.input.length&&!g(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},b.skipSpace=function(){e:for(;this.pos<this.input.length;){let e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&_.test(String.fromCharCode(e))))break e;++this.pos}}},b.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());let n=this.type;this.type=e,this.value=t,this.updateContext(n)},b.readToken_dot=function(){let e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);let t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(u.ellipsis)):(++this.pos,this.finishToken(u.dot))},b.readToken_slash=function(){let e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(u.assign,2):this.finishOp(u.slash,1)},b.readToken_mult_modulo_exp=function(e){let t=this.input.charCodeAt(this.pos+1),n=1,i=42===e?u.star:u.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,i=u.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(u.assign,n+1):this.finishOp(i,n)},b.readToken_pipe_amp=function(e){let t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){let e=this.input.charCodeAt(this.pos+2);if(61===e)return this.finishOp(u.assign,3)}return this.finishOp(124===e?u.logicalOR:u.logicalAND,2)}return 61===t?this.finishOp(u.assign,2):this.finishOp(124===e?u.bitwiseOR:u.bitwiseAND,1)},b.readToken_caret=function(){let e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(u.assign,2):this.finishOp(u.bitwiseXOR,1)},b.readToken_plus_min=function(e){let t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!d.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(u.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(u.assign,2):this.finishOp(u.plusMin,1)},b.readToken_lt_gt=function(e){let t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(u.assign,n+1):this.finishOp(u.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(u.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},b.readToken_eq_excl=function(e){let t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(u.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(u.arrow)):this.finishOp(61===e?u.eq:u.prefix,1)},b.readToken_question=function(){const e=this.options.ecmaVersion;if(e>=11){let t=this.input.charCodeAt(this.pos+1);if(46===t){let e=this.input.charCodeAt(this.pos+2);if(e<48||e>57)return this.finishOp(u.questionDot,2)}if(63===t){if(e>=12){let e=this.input.charCodeAt(this.pos+2);if(61===e)return this.finishOp(u.assign,3)}return this.finishOp(u.coalesce,2)}}return this.finishOp(u.question,1)},b.readToken_numberSign=function(){const e=this.options.ecmaVersion;let t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),o(t,!0)||92===t))return this.finishToken(u.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+v(t)+"'")},b.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(u.parenL);case 41:return++this.pos,this.finishToken(u.parenR);case 59:return++this.pos,this.finishToken(u.semi);case 44:return++this.pos,this.finishToken(u.comma);case 91:return++this.pos,this.finishToken(u.bracketL);case 93:return++this.pos,this.finishToken(u.bracketR);case 123:return++this.pos,this.finishToken(u.braceL);case 125:return++this.pos,this.finishToken(u.braceR);case 58:return++this.pos,this.finishToken(u.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(u.backQuote);case 48:let t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(u.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+v(e)+"'")},b.finishOp=function(e,t){let n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},b.readRegexp=function(){let e,t,n=this.pos;for(;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");let i=this.input.charAt(this.pos);if(d.test(i)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===i)t=!0;else if("]"===i&&t)t=!1;else if("/"===i&&!t)break;e="\\"===i}++this.pos}let i=this.input.slice(n,this.pos);++this.pos;let r=this.pos,s=this.readWord1();this.containsEsc&&this.unexpected(r);const a=this.regexpState||(this.regexpState=new h(this));a.reset(n,i,s),this.validateRegExpFlags(a),this.validateRegExpPattern(a);let o=null;try{o=new RegExp(i,s)}catch(e){}return this.finishToken(u.regexp,{pattern:i,flags:s,value:o})},b.readInt=function(e,t,n){const i=this.options.ecmaVersion>=12&&void 0===t,r=n&&48===this.input.charCodeAt(this.pos);let s=this.pos,a=0,o=0;for(let n=0,s=null==t?1/0:t;n<s;++n,++this.pos){let t,s=this.input.charCodeAt(this.pos);if(i&&95===s)r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===o&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===n&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=s;else{if((t=s>=97?s-97+10:s>=65?s-65+10:s>=48&&s<=57?s-48:1/0)>=e)break;o=s,a=a*e+t}}return i&&95===o&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||null!=t&&this.pos-s!==t?null:a},b.readRadixNumber=function(e){let t=this.pos;this.pos+=2;let n=this.readInt(e);return null==n&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n=x(this.input.slice(t,this.pos)),++this.pos):o(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(u.num,n)},b.readNumber=function(e){let t=this.pos;e||null!==this.readInt(10,void 0,!0)||this.raise(t,"Invalid number");let n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number");let i=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&110===i){let e=x(this.input.slice(t,this.pos));return++this.pos,o(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(u.num,e)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),46!==i||n||(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),69!==i&&101!==i||n||(43!==(i=this.input.charCodeAt(++this.pos))&&45!==i||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),o(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");let r=function(e,t){if(t)return parseInt(e,8);return parseFloat(e.replace(/_/g,""))}(this.input.slice(t,this.pos),n);return this.finishToken(u.num,r)},b.readCodePoint=function(){let e,t=this.input.charCodeAt(this.pos);if(123===t){this.options.ecmaVersion<6&&this.unexpected();let t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},b.readString=function(e){let t="",n=++this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");let i=this.input.charCodeAt(this.pos);if(i===e)break;92===i?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):8232===i||8233===i?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(g(i)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(u.string,t)};const S={};return b.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==S)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},b.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw S;this.raise(e,t)},b.readTmplToken=function(){let e="",t=this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");let n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==u.template&&this.type!==u.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(u.template,e)):36===n?(this.pos+=2,this.finishToken(u.dollarBraceL)):(++this.pos,this.finishToken(u.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(g(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},b.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(u.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},b.readEscapedChar=function(e){let t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return v(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){const e=this.pos-1;this.invalidStringToken(e,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){let n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(n,8);return i>255&&(n=n.slice(0,-1),i=parseInt(n,8)),this.pos+=n.length-1,t=this.input.charCodeAt(this.pos),"0"===n&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-n.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return g(t)?"":String.fromCharCode(t)}},b.readHexChar=function(e){let t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},b.readWord1=function(){this.containsEsc=!1;let e="",t=!0,n=this.pos,i=this.options.ecmaVersion>=6;for(;this.pos<this.input.length;){let r=this.fullCharCodeAtPos();if(c(r,i))this.pos+=r<=65535?1:2;else{if(92!==r)break;{this.containsEsc=!0,e+=this.input.slice(n,this.pos);let r=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;let s=this.readCodePoint();(t?o:c)(s,i)||this.invalidStringToken(r,"Invalid Unicode escape"),e+=v(s),n=this.pos}}t=!1}return e+this.input.slice(n,this.pos)},b.readWord=function(){let e=this.readWord1(),t=u.name;return this.keywords.test(e)&&(t=f[e]),this.finishToken(t,e)},{Token:y}}),define("skylark-acorn/main",["./state","./parseutil","./statement","./lval","./expression","./location","./scope","./options","./locutil","./node","./tokentype","./tokencontext","./identifier","./tokenize","./whitespace"],function(e,t,n,i,r,s,a,o,c,u,f,l,p,h,d){"use strict";const{Parser:m}=e,{defaultOptions:g}=o,{Position:_,SourceLocation:v,getLineInfo:y}=c,{Node:b}=u,{TokenType:x,types:S,keywords:w}=f,{TokContext:k,types:A}=l,{isIdentifierChar:T,isIdentifierStart:E}=p,{Token:C}=h,{isNewLine:P,lineBreak:O,lineBreakG:D,nonASCIIwhitespace:I}=d;return m.acorn={Parser:m,version:"8.10.0",defaultOptions:g,Position:_,SourceLocation:v,getLineInfo:y,Node:b,TokenType:x,tokTypes:S,keywordTypes:w,TokContext:k,tokContexts:A,isIdentifierChar:T,isIdentifierStart:E,Token:C,isNewLine:P,lineBreak:O,lineBreakG:D,nonASCIIwhitespace:I},{version:"8.10.0",Parser:m,defaultOptions:g,Position:_,SourceLocation:v,getLineInfo:y,Node:b,TokenType:x,tokTypes:S,keywordTypes:w,TokContext:k,tokContexts:A,isIdentifierChar:T,isIdentifierStart:E,Token:C,isNewLine:P,lineBreak:O,lineBreakG:D,nonASCIIwhitespace:I,parse:function(e,t){return m.parse(e,t)},parseExpressionAt:function(e,t,n){return m.parseExpressionAt(e,t,n)},tokenizer:function(e,t){return m.tokenizer(e,t)}}}),define("skylark-acorn",["skylark-acorn/main"],function(e){return e}),define("skylark-acorn/plugins/jsx",[],function(){const e={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"},t=/^[\da-fA-F]+$/,n=/^\d+$/,i=new WeakMap;function r(e){e=e.Parser.acorn||e;let t=i.get(e);if(!t){const n=e.tokTypes,r=e.TokContext,s=e.TokenType,a=new r("<tag",!1),o=new r("</tag",!1),c=new r("<tag>...</tag>",!0,!0),u={tc_oTag:a,tc_cTag:o,tc_expr:c},f={jsxName:new s("jsxName"),jsxText:new s("jsxText",{beforeExpr:!0}),jsxTagStart:new s("jsxTagStart",{startsExpr:!0}),jsxTagEnd:new s("jsxTagEnd")};f.jsxTagStart.updateContext=function(){this.context.push(c),this.context.push(a),this.exprAllowed=!1},f.jsxTagEnd.updateContext=function(e){let t=this.context.pop();t===a&&e===n.slash||t===o?(this.context.pop(),this.exprAllowed=this.curContext()===c):this.exprAllowed=!0},t={tokContexts:u,tokTypes:f},i.set(e,t)}return t}function s(e){return e?"JSXIdentifier"===e.type?e.name:"JSXNamespacedName"===e.type?e.namespace.name+":"+e.name.name:"JSXMemberExpression"===e.type?s(e.object)+"."+s(e.property):void 0:e}function a(i){return i=i||{},function(a){return function(i,a){const o=a.acorn||require("acorn"),c=r(o),u=o.tokTypes,f=c.tokTypes,l=o.tokContexts,p=c.tokContexts.tc_oTag,h=c.tokContexts.tc_cTag,d=c.tokContexts.tc_expr,m=o.isNewLine,g=o.isIdentifierStart,_=o.isIdentifierChar;return class extends a{static get acornJsx(){return c}jsx_readToken(){let e="",t=this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated JSX contents");let n=this.input.charCodeAt(this.pos);switch(n){case 60:case 123:return this.pos===this.start?60===n&&this.exprAllowed?(++this.pos,this.finishToken(f.jsxTagStart)):this.getTokenFromCode(n):(e+=this.input.slice(t,this.pos),this.finishToken(f.jsxText,e));case 38:e+=this.input.slice(t,this.pos),e+=this.jsx_readEntity(),t=this.pos;break;case 62:case 125:this.raise(this.pos,"Unexpected token `"+this.input[this.pos]+"`. Did you mean `"+(62===n?"&gt;":"&rbrace;")+'` or `{"'+this.input[this.pos]+'"}`?');default:m(n)?(e+=this.input.slice(t,this.pos),e+=this.jsx_readNewLine(!0),t=this.pos):++this.pos}}}jsx_readNewLine(e){let t,n=this.input.charCodeAt(this.pos);return++this.pos,13===n&&10===this.input.charCodeAt(this.pos)?(++this.pos,t=e?"\n":"\r\n"):t=String.fromCharCode(n),this.options.locations&&(++this.curLine,this.lineStart=this.pos),t}jsx_readString(e){let t="",n=++this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");let i=this.input.charCodeAt(this.pos);if(i===e)break;38===i?(t+=this.input.slice(n,this.pos),t+=this.jsx_readEntity(),n=this.pos):m(i)?(t+=this.input.slice(n,this.pos),t+=this.jsx_readNewLine(!1),n=this.pos):++this.pos}return t+=this.input.slice(n,this.pos++),this.finishToken(u.string,t)}jsx_readEntity(){let i,r="",s=0,a=this.input[this.pos];"&"!==a&&this.raise(this.pos,"Entity must start with an ampersand");let o=++this.pos;for(;this.pos<this.input.length&&s++<10;){if(";"===(a=this.input[this.pos++])){"#"===r[0]?"x"===r[1]?(r=r.substr(2),t.test(r)&&(i=String.fromCharCode(parseInt(r,16)))):(r=r.substr(1),n.test(r)&&(i=String.fromCharCode(parseInt(r,10)))):i=e[r];break}r+=a}return i||(this.pos=o,"&")}jsx_readWord(){let e,t=this.pos;do{e=this.input.charCodeAt(++this.pos)}while(_(e)||45===e);return this.finishToken(f.jsxName,this.input.slice(t,this.pos))}jsx_parseIdentifier(){let e=this.startNode();return this.type===f.jsxName?e.name=this.value:this.type.keyword?e.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(e,"JSXIdentifier")}jsx_parseNamespacedName(){let e=this.start,t=this.startLoc,n=this.jsx_parseIdentifier();if(!i.allowNamespaces||!this.eat(u.colon))return n;var r=this.startNodeAt(e,t);return r.namespace=n,r.name=this.jsx_parseIdentifier(),this.finishNode(r,"JSXNamespacedName")}jsx_parseElementName(){if(this.type===f.jsxTagEnd)return"";let e=this.start,t=this.startLoc,n=this.jsx_parseNamespacedName();for(this.type!==u.dot||"JSXNamespacedName"!==n.type||i.allowNamespacedObjects||this.unexpected();this.eat(u.dot);){let i=this.startNodeAt(e,t);i.object=n,i.property=this.jsx_parseIdentifier(),n=this.finishNode(i,"JSXMemberExpression")}return n}jsx_parseAttributeValue(){switch(this.type){case u.braceL:let e=this.jsx_parseExpressionContainer();return"JSXEmptyExpression"===e.expression.type&&this.raise(e.start,"JSX attributes must only be assigned a non-empty expression"),e;case f.jsxTagStart:case u.string:return this.parseExprAtom();default:this.raise(this.start,"JSX value should be either an expression or a quoted JSX text")}}jsx_parseEmptyExpression(){let e=this.startNodeAt(this.lastTokEnd,this.lastTokEndLoc);return this.finishNodeAt(e,"JSXEmptyExpression",this.start,this.startLoc)}jsx_parseExpressionContainer(){let e=this.startNode();return this.next(),e.expression=this.type===u.braceR?this.jsx_parseEmptyExpression():this.parseExpression(),this.expect(u.braceR),this.finishNode(e,"JSXExpressionContainer")}jsx_parseAttribute(){let e=this.startNode();return this.eat(u.braceL)?(this.expect(u.ellipsis),e.argument=this.parseMaybeAssign(),this.expect(u.braceR),this.finishNode(e,"JSXSpreadAttribute")):(e.name=this.jsx_parseNamespacedName(),e.value=this.eat(u.eq)?this.jsx_parseAttributeValue():null,this.finishNode(e,"JSXAttribute"))}jsx_parseOpeningElementAt(e,t){let n=this.startNodeAt(e,t);n.attributes=[];let i=this.jsx_parseElementName();for(i&&(n.name=i);this.type!==u.slash&&this.type!==f.jsxTagEnd;)n.attributes.push(this.jsx_parseAttribute());return n.selfClosing=this.eat(u.slash),this.expect(f.jsxTagEnd),this.finishNode(n,i?"JSXOpeningElement":"JSXOpeningFragment")}jsx_parseClosingElementAt(e,t){let n=this.startNodeAt(e,t),i=this.jsx_parseElementName();return i&&(n.name=i),this.expect(f.jsxTagEnd),this.finishNode(n,i?"JSXClosingElement":"JSXClosingFragment")}jsx_parseElementAt(e,t){let n=this.startNodeAt(e,t),i=[],r=this.jsx_parseOpeningElementAt(e,t),a=null;if(!r.selfClosing){e:for(;;)switch(this.type){case f.jsxTagStart:if(e=this.start,t=this.startLoc,this.next(),this.eat(u.slash)){a=this.jsx_parseClosingElementAt(e,t);break e}i.push(this.jsx_parseElementAt(e,t));break;case f.jsxText:i.push(this.parseExprAtom());break;case u.braceL:i.push(this.jsx_parseExpressionContainer());break;default:this.unexpected()}s(a.name)!==s(r.name)&&this.raise(a.start,"Expected corresponding JSX closing tag for <"+s(r.name)+">")}let o=r.name?"Element":"Fragment";return n["opening"+o]=r,n["closing"+o]=a,n.children=i,this.type===u.relational&&"<"===this.value&&this.raise(this.start,"Adjacent JSX elements must be wrapped in an enclosing tag"),this.finishNode(n,"JSX"+o)}jsx_parseText(){let e=this.parseLiteral(this.value);return e.type="JSXText",e}jsx_parseElement(){let e=this.start,t=this.startLoc;return this.next(),this.jsx_parseElementAt(e,t)}parseExprAtom(e){return this.type===f.jsxText?this.jsx_parseText():this.type===f.jsxTagStart?this.jsx_parseElement():super.parseExprAtom(e)}readToken(e){let t=this.curContext();if(t===d)return this.jsx_readToken();if(t===p||t===h){if(g(e))return this.jsx_readWord();if(62==e)return++this.pos,this.finishToken(f.jsxTagEnd);if((34===e||39===e)&&t==p)return this.jsx_readString(e)}return 60===e&&this.exprAllowed&&33!==this.input.charCodeAt(this.pos+1)?(++this.pos,this.finishToken(f.jsxTagStart)):super.readToken(e)}updateContext(e){if(this.type==u.braceL){var t=this.curContext();t==p?this.context.push(l.b_expr):t==d?this.context.push(l.b_tmpl):super.updateContext(e),this.exprAllowed=!0}else{if(this.type!==u.slash||e!==f.jsxTagStart)return super.updateContext(e);this.context.length-=2,this.context.push(h),this.exprAllowed=!1}}}}({allowNamespaces:!1!==i.allowNamespaces,allowNamespacedObjects:!!i.allowNamespacedObjects},a)}}return Object.defineProperty(a,"tokTypes",{get:function(){return r(require("acorn")).tokTypes},configurable:!0,enumerable:!0}),a}),define("skylark-espree/lib/token-translator",[],function(){const e={Boolean:"Boolean",EOF:"<end>",Identifier:"Identifier",PrivateIdentifier:"PrivateIdentifier",Keyword:"Keyword",Null:"Null",Numeric:"Numeric",Punctuator:"Punctuator",String:"String",RegularExpression:"RegularExpression",Template:"Template",JSXIdentifier:"JSXIdentifier",JSXText:"JSXText"};function t(e,t){this._acornTokTypes=e,this._tokens=[],this._curlyBrace=null,this._code=t}return t.prototype={constructor:t,translate(t,n){const i=t.type,r=this._acornTokTypes;if(i===r.name)t.type=e.Identifier,"static"===t.value&&(t.type=e.Keyword),n.ecmaVersion>5&&("yield"===t.value||"let"===t.value)&&(t.type=e.Keyword);else if(i===r.privateId)t.type=e.PrivateIdentifier;else if(i===r.semi||i===r.comma||i===r.parenL||i===r.parenR||i===r.braceL||i===r.braceR||i===r.dot||i===r.bracketL||i===r.colon||i===r.question||i===r.bracketR||i===r.ellipsis||i===r.arrow||i===r.jsxTagStart||i===r.incDec||i===r.starstar||i===r.jsxTagEnd||i===r.prefix||i===r.questionDot||i.binop&&!i.keyword||i.isAssign)t.type=e.Punctuator,t.value=this._code.slice(t.start,t.end);else if(i===r.jsxName)t.type=e.JSXIdentifier;else if("jsxText"===i.label||i===r.jsxAttrValueToken)t.type=e.JSXText;else if(i.keyword)"true"===i.keyword||"false"===i.keyword?t.type=e.Boolean:"null"===i.keyword?t.type=e.Null:t.type=e.Keyword;else if(i===r.num)t.type=e.Numeric,t.value=this._code.slice(t.start,t.end);else if(i===r.string)n.jsxAttrValueToken?(n.jsxAttrValueToken=!1,t.type=e.JSXText):t.type=e.String,t.value=this._code.slice(t.start,t.end);else if(i===r.regexp){t.type=e.RegularExpression;const n=t.value;t.regex={flags:n.flags,pattern:n.pattern},t.value=`/${n.pattern}/${n.flags}`}return t},onToken(t,n){const i=this,r=this._acornTokTypes,s=n.tokens,a=this._tokens;function o(){s.push(function(t,n){const i=t[0],r=t[t.length-1],s={type:e.Template,value:n.slice(i.start,r.end)};i.loc&&(s.loc={start:i.loc.start,end:r.loc.end});i.range&&(s.start=i.range[0],s.end=r.range[1],s.range=[s.start,s.end]);return s}(i._tokens,i._code)),i._tokens=[]}if(t.type!==r.eof){if(t.type===r.backQuote)return this._curlyBrace&&(s.push(this.translate(this._curlyBrace,n)),this._curlyBrace=null),a.push(t),void(a.length>1&&o());if(t.type===r.dollarBraceL)return a.push(t),void o();if(t.type===r.braceR)return this._curlyBrace&&s.push(this.translate(this._curlyBrace,n)),void(this._curlyBrace=t);if(t.type===r.template||t.type===r.invalidTemplate)return this._curlyBrace&&(a.push(this._curlyBrace),this._curlyBrace=null),void a.push(t);this._curlyBrace&&(s.push(this.translate(this._curlyBrace,n)),this._curlyBrace=null),s.push(this.translate(t,n))}else this._curlyBrace&&s.push(this.translate(this._curlyBrace,n))}},t}),define("skylark-espree/lib/options",[],function(){const e=[3,5,6,7,8,9,10,11,12,13,14,15];function t(){return e[e.length-1]}return{getLatestEcmaVersion:t,getSupportedEcmaVersions:function(){return[...e]},normalizeOptions:function(n){const i=function(n="latest"){let i="latest"===n?t():n;if("number"!=typeof i)throw new Error(`ecmaVersion must be a number or "latest". Received value of type ${typeof n} instead.`);i>=2015&&(i-=2009);if(!e.includes(i))throw new Error("Invalid ecmaVersion.");return i}(n.ecmaVersion),r=function(e="script"){if("script"===e||"module"===e)return e;if("commonjs"===e)return"script";throw new Error("Invalid sourceType.")}(n.sourceType),s=!0===n.range,a=!0===n.loc;if(3!==i&&n.allowReserved)throw new Error("`allowReserved` is only supported when ecmaVersion is 3");if(void 0!==n.allowReserved&&"boolean"!=typeof n.allowReserved)throw new Error("`allowReserved`, when present, must be `true` or `false`");const o=3===i&&(n.allowReserved||"never"),c=n.ecmaFeatures||{},u="commonjs"===n.sourceType||Boolean(c.globalReturn);if("module"===r&&i<6)throw new Error("sourceType 'module' is not supported when ecmaVersion < 2015. Consider adding `{ ecmaVersion: 2015 }` to the parser options.");return Object.assign({},n,{ecmaVersion:i,sourceType:r,ranges:s,locations:a,allowReserved:o,allowReturnOutsideFunction:u})}}}),define("skylark-espree/lib/espree",["./token-translator","./options"],function(e,t){const{normalizeOptions:n}=t,i=Symbol("espree's internal state"),r=Symbol("espree's esprimaFinishNode");return()=>t=>{const s=Object.assign({},t.acorn.tokTypes);return t.acornJsx&&Object.assign(s,t.acornJsx.tokTypes),class extends t{constructor(t,r){"object"==typeof t&&null!==t||(t={}),"string"==typeof r||r instanceof String||(r=String(r));const a=t.sourceType,o=n(t),c=o.ecmaFeatures||{},u=!0===o.tokens?new e(s,r):null,f={originalSourceType:a||o.sourceType,tokens:u?[]:null,comments:!0===o.comment?[]:null,impliedStrict:!0===c.impliedStrict&&o.ecmaVersion>=5,ecmaVersion:o.ecmaVersion,jsxAttrValueToken:!1,lastToken:null,templateElements:[]};super({ecmaVersion:o.ecmaVersion,sourceType:o.sourceType,ranges:o.ranges,locations:o.locations,allowReserved:o.allowReserved,allowReturnOutsideFunction:o.allowReturnOutsideFunction,onToken:e=>{u&&u.onToken(e,f),e.type!==s.eof&&(f.lastToken=e)},onComment:(e,t,n,i,s,a)=>{if(f.comments){const o=function(e,t,n,i,r,s,a){let o;o=e?"Block":"#!"===a.slice(n,n+2)?"Hashbang":"Line";const c={type:o,value:t};"number"==typeof n&&(c.start=n,c.end=i,c.range=[n,i]);"object"==typeof r&&(c.loc={start:r,end:s});return c}(e,t,n,i,s,a,r);f.comments.push(o)}}},r),this[i]=f}tokenize(){do{this.next()}while(this.type!==s.eof);this.next();const e=this[i],t=e.tokens;return e.comments&&(t.comments=e.comments),t}finishNode(...e){const t=super.finishNode(...e);return this[r](t)}finishNodeAt(...e){const t=super.finishNodeAt(...e);return this[r](t)}parse(){const e=this[i],t=super.parse();if(t.sourceType=e.originalSourceType,e.comments&&(t.comments=e.comments),e.tokens&&(t.tokens=e.tokens),t.body.length){const[e]=t.body;t.range&&(t.range[0]=e.range[0]),t.loc&&(t.loc.start=e.loc.start),t.start=e.start}return e.lastToken&&(t.range&&(t.range[1]=e.lastToken.range[1]),t.loc&&(t.loc.end=e.lastToken.loc.end),t.end=e.lastToken.end),this[i].templateElements.forEach(e=>{const t=e.tail?1:2;e.start+=-1,e.end+=t,e.range&&(e.range[0]+=-1,e.range[1]+=t),e.loc&&(e.loc.start.column+=-1,e.loc.end.column+=t)}),t}parseTopLevel(e){return this[i].impliedStrict&&(this.strict=!0),super.parseTopLevel(e)}raise(e,n){const i=t.acorn.getLineInfo(this.input,e),r=new SyntaxError(n);throw r.index=e,r.lineNumber=i.line,r.column=i.column+1,r}raiseRecoverable(e,t){this.raise(e,t)}unexpected(e){let t="Unexpected token";if(null!==e&&void 0!==e){if(this.pos=e,this.options.locations)for(;this.pos<this.lineStart;)this.lineStart=this.input.lastIndexOf("\n",this.lineStart-2)+1,--this.curLine;this.nextToken()}this.end>this.start&&(t+=` ${this.input.slice(this.start,this.end)}`),this.raise(this.start,t)}jsx_readString(e){const t=super.jsx_readString(e);return this.type===s.string&&(this[i].jsxAttrValueToken=!0),t}[r](e){return"TemplateElement"===e.type&&this[i].templateElements.push(e),e.type.includes("Function")&&!e.generator&&(e.generator=!1),e}}}}),define("skylark-espree/lib/version",[],function(){return"main"}),define("skylark-espree/eslint-visitor-keys",[],function(){const e={ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],AwaitExpression:["argument"],BinaryExpression:["left","right"],BlockStatement:["body"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExperimentalRestProperty:["argument"],ExperimentalSpreadProperty:["argument"],ExportAllDeclaration:["exported","source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],ForStatement:["init","test","update","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportExpression:["source"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],JSXAttribute:["name","value"],JSXClosingElement:["name"],JSXClosingFragment:[],JSXElement:["openingElement","children","closingElement"],JSXEmptyExpression:[],JSXExpressionContainer:["expression"],JSXFragment:["openingFragment","children","closingFragment"],JSXIdentifier:[],JSXMemberExpression:["object","property"],JSXNamespacedName:["namespace","name"],JSXOpeningElement:["name","attributes"],JSXOpeningFragment:[],JSXSpreadAttribute:["argument"],JSXSpreadChild:["expression"],JSXText:[],LabeledStatement:["label","body"],Literal:[],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],StaticBlock:["body"],Super:[],SwitchCase:["test","consequent"],SwitchStatement:["discriminant","cases"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},t=Object.keys(e);for(const n of t)Object.freeze(e[n]);Object.freeze(e);const n=new Set(["parent","leadingComments","trailingComments"]);function i(e){return!n.has(e)&&"_"!==e[0]}return{KEYS:e,getKeys:function(e){return Object.keys(e).filter(i)},unionWith:function(t){const n=Object.assign({},e);for(const e of Object.keys(t))if(Object.prototype.hasOwnProperty.call(n,e)){const i=new Set(t[e]);for(const t of n[e])i.add(t);n[e]=Object.freeze(Array.from(i))}else n[e]=Object.freeze(Array.from(t[e]));return Object.freeze(n)}}}),define("skylark-espree/espree",["skylark-acorn","skylark-acorn/plugins/jsx","./lib/espree","./lib/version","./lib/options","./eslint-visitor-keys"],function(e,t,n,i,r,s){const{getLatestEcmaVersion:a,getSupportedEcmaVersions:o}=r,c={_regular:null,_jsx:null,get regular(){return null===this._regular&&(this._regular=e.Parser.extend(n())),this._regular},get jsx(){return null===this._jsx&&(this._jsx=e.Parser.extend(t(),n())),this._jsx},get(e){const t=Boolean(e&&e.ecmaFeatures&&e.ecmaFeatures.jsx);return t?this.jsx:this.regular}};const u=i,f=s.KEYS,l=function(){let e,t={};for(e in"function"==typeof Object.create&&(t=Object.create(null)),f)Object.hasOwnProperty.call(f,e)&&(t[e]=e);return"function"==typeof Object.freeze&&Object.freeze(t),t}(),p=a(),h=o();return{tokenize:function(e,t){const n=c.get(t);t&&!0===t.tokens||(t=Object.assign({},t,{tokens:!0}));return new n(t,e).tokenize()},parse:function(e,t){return new(c.get(t))(t,e).parse()},version:u,name:"espree",VisitorKeys:f,Syntax:l,latestEcmaVersion:p,supportedEcmaVersions:h}}),define("skylark-espree/main",["./espree"],function(e){return e}),define("skylark-espree",["skylark-espree/main"],function(e){return e}),define("skylark-rjs/esprima",["skylark-espree"],function(e){return e}),define("skylark-rjs/parse",["./esprima","./lang"],function(esprima,lang){"use strict";function arrayToString(e){var t="[";return e&&e.forEach(function(e,n){t+=(n>0?",":"")+'"'+lang.jsEscape(e)+'"'}),t+="]"}var argPropName="arguments",emptyScope={},mixin=lang.mixin,hasProp=lang.hasProp;function traverse(e,t){var n;if(e){if(!1===t.call(null,e))return!1;for(var i=0,r=Object.keys(e);i<r.length;i++)if("object"==typeof(n=e[r[i]])&&null!==n&&!1===traverse(n,t))return!1}}function traverseBroad(e,t){var n;if(e){if(!1===t.call(null,e))return!1;for(var i=0,r=Object.keys(e);i<r.length;i++)"object"==typeof(n=e[key])&&null!==n&&traverseBroad(n,t)}}function getValidDeps(e){if(e&&"ArrayExpression"===e.type&&e.elements){var t=[];return e.elements.some(function(e){"Literal"===e.type&&t.push(e.value)}),t.length?t:void 0}}function isFnExpression(e){return e&&("FunctionExpression"===e.type||"ArrowFunctionExpression"===e.type)}function parse(e,t,n,i){i=i||{};var r,s,a,o=[],c="",u=[],f=!0,l=esprima.parse(n);if(parse.recurse(l,function(t,n,r,s,a,c,l){return s||(s=[]),"define"!==t||r&&r!==e||(f=!1),r?u.push({name:r,deps:s}):o=o.concat(s),"define"===t&&c&&hasProp(l,c)?c:!!i.findNestedDependencies},i),i.insertNeedsDefine&&f&&(c+='require.needsDefine("'+e+'");'),o.length||u.length){for(r=0;r<u.length;r++)s=u[r],c&&(c+="\n"),s.name===e&&(s.deps=s.deps.concat(o),o=[]),a=arrayToString(s.deps),c+='define("'+s.name+'",'+a+");";o.length&&(c&&(c+="\n"),a=arrayToString(o),c+='define("'+e+'",'+a+");")}return c||null}return parse.traverse=traverse,parse.traverseBroad=traverseBroad,parse.isFnExpression=isFnExpression,parse.recurse=function(e,t,n,i){var r,s,a,o,c,u,f,l=n&&n.has;if(i=i||emptyScope,e)if(l&&"IfStatement"===e.type&&e.test.type&&"Literal"===e.test.type)e.test.value?this.recurse(e.consequent,t,n,i):this.recurse(e.alternate,t,n,i);else{if(!1===(a=this.parseNode(e,t,i)))return;if("string"==typeof a)return a;if("ExpressionStatement"===e.type&&e.expression&&"CallExpression"===e.expression.type&&e.expression.callee&&isFnExpression(e.expression.callee)&&(f=e.expression.callee),"UnaryExpression"===e.type&&e.argument&&"CallExpression"===e.argument.type&&e.argument.callee&&isFnExpression(e.argument.callee)&&(f=e.argument.callee),f&&f.params&&f.params.length)for(c=f.params,i=mixin({},i,!0),o=0;o<c.length;o++)"Identifier"===(u=c[o]).type&&(i[u.name]=!0);for(o=0,r=Object.keys(e);o<r.length&&("object"!=typeof(s=e[r[o]])||null===s||"string"!=typeof(a=this.recurse(s,t,n,i))||!hasProp(i,a));o++);if("string"==typeof a)return hasProp(i,a)?a:void 0}},parse.definesRequire=function(e,t){var n=!1,i=!1;return traverse(esprima.parse(t),function(e){if("Program"===e.type&&e.body&&e.body.length&&(n=e.body.some(function(e){if("VariableDeclaration"===e.type){var t=e.declarations;if(t){var n=t.some(function(e){return"VariableDeclarator"===e.type&&e.id&&"Identifier"===e.id.type&&"define"===e.id.name});if(n)return!0}}if("FunctionDeclaration"===e.type&&e.id&&"Identifier"===e.id.type&&"define"===e.id.name)return!0})),n&&parse.hasDefineAmd(e))return i=!0,!1}),n&&i},parse.getAnonDeps=function(e,t){var n="string"==typeof t?esprima.parse(t):t,i=this.findAnonDefineFactory(n);return parse.getAnonDepsFromNode(i)},parse.getAnonDepsFromNode=function(e){var t,n=[];return e&&(this.findRequireDepNames(e,n),(t=e.params&&e.params.length)&&(n=(t>1?["require","exports","module"]:["require"]).concat(n))),n},parse.isDefineNodeWithArgs=function(e){return e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"define"===e.callee.name&&e[argPropName]},parse.findAnonDefineFactory=function(e){var t;return traverse(e,function(e){var n,i;if(parse.isDefineNodeWithArgs(e)){if(isFnExpression(n=e[argPropName][0]))return t=n,!1;if(i=e[argPropName][1],"Literal"===n.type&&isFnExpression(i))return t=i,!1}}),t},parse.findConfig=function(fileContents){var jsConfig,foundConfig,stringData,foundRange,quote,quoteMatch,quoteRegExp=/(:\s|\[\s*)(['"])/,astRoot=esprima.parse(fileContents,{loc:!0});return traverse(astRoot,function(e){var t,n=parse.hasRequire(e);if(!n||"require"!==n&&"requirejs"!==n&&"requireConfig"!==n&&"requirejsConfig"!==n){if(t=parse.getRequireObjectLiteral(e))return stringData=parse.nodeToString(fileContents,t),jsConfig=stringData.value,foundRange=stringData.range,!1}else if((t=e[argPropName]&&e[argPropName][0])&&"ObjectExpression"===t.type)return stringData=parse.nodeToString(fileContents,t),jsConfig=stringData.value,foundRange=stringData.range,!1}),jsConfig&&(quoteMatch=quoteRegExp.exec(jsConfig),quote=quoteMatch&&quoteMatch[2]||'"',foundConfig=eval("("+jsConfig+")")),{config:foundConfig,range:foundRange,quote:quote}},parse.getRequireObjectLiteral=function(e){if(e.id&&"Identifier"===e.id.type&&("require"===e.id.name||"requirejs"===e.id.name)&&e.init&&"ObjectExpression"===e.init.type)return e.init},parse.renameNamespace=function(e,t){var n,i=[],r=esprima.parse(e,{loc:!0});return parse.recurse(r,function(e,t,n,r,s){return i.push(s.loc),"define"!==e},{}),i.length&&(n=e.split("\n"),i.reverse(),i.forEach(function(e){var i=e.start.column,r=e.start.line-1,s=n[r];n[r]=s.substring(0,i)+t+"."+s.substring(i,s.length)}),e=n.join("\n")),e},parse.findDependencies=function(e,t,n){var i=[],r=esprima.parse(t);return parse.recurse(r,function(e,t,n,r){r&&(i=i.concat(r))},n),i},parse.findCjsDependencies=function(e,t){var n=[];return traverse(esprima.parse(t),function(e){var t;e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"require"===e.callee.name&&e[argPropName]&&1===e[argPropName].length&&"Literal"===(t=e[argPropName][0]).type&&n.push(t.value)}),n},parse.hasDefDefine=function(e){return"FunctionDeclaration"===e.type&&e.id&&"Identifier"===e.id.type&&"define"===e.id.name},parse.hasDefineAmd=function(e){return e&&"AssignmentExpression"===e.type&&e.left&&"MemberExpression"===e.left.type&&e.left.object&&"define"===e.left.object.name&&e.left.property&&"amd"===e.left.property.name},parse.refsDefineAmd=function(e){return e&&"MemberExpression"===e.type&&e.object&&"define"===e.object.name&&"Identifier"===e.object.type&&e.property&&"amd"===e.property.name&&"Identifier"===e.property.type},parse.hasRequire=function(e){var t,n=e&&e.callee;return e&&"CallExpression"===e.type&&n&&("Identifier"!==n.type||"require"!==n.name&&"requirejs"!==n.name?"MemberExpression"===n.type&&n.object&&"Identifier"===n.object.type&&("require"===n.object.name||"requirejs"===n.object.name)&&n.property&&"config"===n.property.name&&(t=n.object.name+"Config"):t=n.name),t},parse.hasDefine=function(e){return e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"define"===e.callee.name},parse.getNamedDefine=function(e){var t;return traverse(esprima.parse(e),function(e){if(e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"define"===e.callee.name&&e[argPropName]&&e[argPropName][0]&&"Literal"===e[argPropName][0].type)return t=e[argPropName][0].value,!1}),t},parse.getAllNamedDefines=function(e,t){var n=[];return parse.recurse(esprima.parse(e),function(e,i,r,s,a,o,c){return"define"===e&&r&&(t.hasOwnProperty(r)||n.push(r)),"define"!==e||!o||!hasProp(c,o)||o},{}),n},parse.usesAmdOrRequireJs=function(e,t){var n;return traverse(esprima.parse(t),function(e){var t,i,r;parse.hasDefDefine(e)?t="declaresDefine":parse.hasDefineAmd(e)?t="defineAmd":(i=parse.hasRequire(e))?!(r=e[argPropName]&&e[argPropName][0])||"ObjectExpression"!==r.type&&"ArrayExpression"!==r.type||(t=i):parse.hasDefine(e)&&(t="define"),t&&(n||(n={}),n[t]=!0)}),n},parse.usesCommonJs=function(e,t){var n=null,i=!1;return traverse(esprima.parse(t),function(e){var t,r=e.expression||e.init;"Identifier"!==e.type||"__dirname"!==e.name&&"__filename"!==e.name?"VariableDeclarator"===e.type&&e.id&&"Identifier"===e.id.type&&"exports"===e.id.name?t="varExports":r&&"AssignmentExpression"===r.type&&r.left&&"MemberExpression"===r.left.type&&r.left.object?"module"===r.left.object.name&&r.left.property&&"exports"===r.left.property.name?t="moduleExports":"exports"===r.left.object.name&&r.left.property?t="exports":"MemberExpression"===r.left.object.type&&"module"===r.left.object.object.name&&"exports"===r.left.object.property.name&&"Identifier"===r.left.object.property.type&&(t="moduleExports"):e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"require"===e.callee.name&&e[argPropName]&&1===e[argPropName].length&&"Literal"===e[argPropName][0].type&&(t="require"):t=e.name.substring(2),t&&("varExports"===t?i=!0:"exports"===t&&i||(n||(n={}),n[t]=!0))}),n},parse.findRequireDepNames=function(e,t){traverse(e,function(e){var n;e&&"CallExpression"===e.type&&e.callee&&"Identifier"===e.callee.type&&"require"===e.callee.name&&e[argPropName]&&1===e[argPropName].length&&"Literal"===(n=e[argPropName][0]).type&&t.push(n.value)})},parse.parseNode=function(e,t,n){var i,r,s,a,o,c,u,f,l=e&&e[argPropName],p=parse.hasRequire(e),h=!1;if("require"===p||"requirejs"===p){if((a=e[argPropName]&&e[argPropName][0])&&"ArrayExpression"!==a.type&&"ObjectExpression"===a.type&&(a=e[argPropName][1]),!(r=getValidDeps(a)))return;return t("require",null,null,r,e)}if(parse.hasDefine(e)&&l&&l.length){if(i=l[0],r=l[1],o=l[2],"ArrayExpression"===i.type?(o=r,r=i,i=null):isFnExpression(i)?(o=i,i=r=null):"Identifier"===i.type&&1===l.length&&hasProp(n,i.name)?(h=!0,o=i,i=null):"Literal"!==i.type&&(i=r=o=null),i&&"Literal"===i.type&&r&&(isFnExpression(r)?(o=r,r=null):"ObjectExpression"===r.type?r=o=null:"Identifier"===r.type&&(2===l.length?r=o=null:3===l.length&&isFnExpression(o)&&(r=null))),r&&"ArrayExpression"===r.type)r=getValidDeps(r);else if(isFnExpression(o))(s=parse.getAnonDepsFromNode(o)).length&&(r=s);else if(r||o&&!h)return;return i&&"Literal"===i.type&&(i=i.value),t("define",null,i,r,e,o&&"Identifier"===o.type?o.name:void 0,n)}if("CallExpression"===e.type&&e.callee&&isFnExpression(e.callee)&&e.callee.body&&e.callee.body.body&&1===e.callee.body.body.length&&"IfStatement"===e.callee.body.body[0].type&&(f=e.callee.body.body[0]).consequent&&f.consequent.body&&"ExpressionStatement"===(c=f.consequent.body[0]).type&&c.expression&&parse.hasDefine(c.expression)&&c.expression.arguments&&1===c.expression.arguments.length&&"Identifier"===c.expression.arguments[0].type&&(traverse(f.test,function(e){if(parse.refsDefineAmd(e))return u=!0,!1}),u))return t("define",null,null,null,c.expression,c.expression.arguments[0].name,n)},parse.nodeToString=function(e,t){var n,i=t.loc,r=e.split("\n"),s=i.start.line>1?r.slice(0,i.start.line-1).join("\n")+"\n":"",a=s+r[i.start.line-1].substring(0,i.start.column);return{value:n=i.start.line===i.end.line?r[i.start.line-1].substring(i.start.column,i.end.column):r[i.start.line-1].substring(i.start.column)+"\n"+r.slice(i.start.line,i.end.line-1).join("\n")+"\n"+r[i.end.line-1].substring(0,i.end.column),range:[a.length,a.length+n.length]}},parse.getLicenseComments=function(e,t){var n,i,r,s,a,o,c=esprima.parse(t,{comment:!0,range:!0}),u="",f={},l=-1===t.indexOf("\r")?"\n":"\r\n";if(c.comments)for(a=0;a<c.comments.length;a++){if("Line"===(n=c.comments[a]).type)if(s="//"+n.value+l,i=n,a+1>=c.comments.length)s+=l;else{for(o=a+1;o<c.comments.length&&("Line"===(r=c.comments[o]).type&&r.range[0]===i.range[1]+1);o++)s+="//"+r.value+l,i=r;s+=l,a=o-1}else s="/*"+n.value+"*/"+l+l;f[s]||-1===s.indexOf("license")&&("Block"!==n.type||0!==s.indexOf("/*!"))&&-1===s.indexOf("opyright")&&-1===s.indexOf("(c)")||(u+=s,f[s]=!0)}return u},parse}),define("skylark-rjs/pragma",["./parse","./logger"],function(parse,logger){"use strict";function Temp(){}function create(e,t){Temp.prototype=e;var n,i=new Temp;if(Temp.prototype=null,t)for(n in t)t.hasOwnProperty(n)&&!i.hasOwnProperty(n)&&(i[n]=t[n]);return i}var pragma={conditionalRegExp:/(exclude|include)Start\s*\(\s*["'](\w+)["']\s*,(.*)\)/,useStrictRegExp:/(^|[^{]\r?\n)['"]use strict['"];/g,hasRegExp:/has\s*\(\s*['"]([^'"]+)['"]\s*\)/g,configRegExp:/(^|[^\.])(requirejs|require)(\.config)\s*\(/g,nsWrapRegExp:/\/\*requirejs namespace: true \*\//,apiDefRegExp:/var requirejs,\s*require,\s*define;/,defineCheckRegExp:/typeof(\s+|\s*\(\s*)define(\s*\))?\s*===?\s*["']function["']\s*&&\s*define\s*\.\s*amd/g,defineStringCheckRegExp:/typeof\s+define\s*===?\s*["']function["']\s*&&\s*define\s*\[\s*["']amd["']\s*\]/g,defineTypeFirstCheckRegExp:/\s*["']function["']\s*==(=?)\s*typeof\s+define\s*&&\s*define\s*\.\s*amd/g,defineJQueryRegExp:/typeof\s+define\s*===?\s*["']function["']\s*&&\s*define\s*\.\s*amd\s*&&\s*define\s*\.\s*amd\s*\.\s*jQuery/g,defineHasRegExp:/typeof\s+define\s*==(=)?\s*['"]function['"]\s*&&\s*typeof\s+define\.amd\s*==(=)?\s*['"]object['"]\s*&&\s*define\.amd/g,defineTernaryRegExp:/typeof\s+define\s*===?\s*['"]function["']\s*&&\s*define\s*\.\s*amd\s*\?\s*define/,defineExistsRegExp:/\s+typeof\s+define\s*!==?\s*['"]undefined["']\s*/,defineExistsAndAmdRegExp:/typeof\s+define\s*!==?\s*['"]undefined["']\s*&&\s*define\s*\.\s*amd\s*/,amdefineRegExp:/if\s*\(\s*typeof define\s*\!==\s*['"]function['"]\s*\)\s*\{\s*[^\{\}]+amdefine[^\{\}]+\}/g,removeStrict:function(e,t){return t.useStrict?e:e.replace(pragma.useStrictRegExp,"$1")},namespace:function(e,t,n){return t&&(e=e.replace(pragma.configRegExp,"$1"+t+".$2$3("),e=(e=(e=(e=(e=(e=(e=(e=(e=parse.renameNamespace(e,t)).replace(pragma.defineTernaryRegExp,"typeof "+t+".define === 'function' && "+t+".define.amd ? "+t+".define")).replace(pragma.defineJQueryRegExp,"typeof "+t+".define === 'function' && "+t+".define.amd && "+t+".define.amd.jQuery")).replace(pragma.defineHasRegExp,"typeof "+t+".define === 'function' && typeof "+t+".define.amd === 'object' && "+t+".define.amd")).replace(pragma.defineExistsAndAmdRegExp,"typeof "+t+".define !== 'undefined' && "+t+".define.amd")).replace(pragma.defineCheckRegExp,"typeof "+t+".define === 'function' && "+t+".define.amd")).replace(pragma.defineStringCheckRegExp,"typeof "+t+".define === 'function' && "+t+".define['amd']")).replace(pragma.defineTypeFirstCheckRegExp,"'function' === typeof "+t+".define && "+t+".define.amd")).replace(pragma.defineExistsRegExp,"typeof "+t+".define !== 'undefined'"),pragma.apiDefRegExp.test(e)&&-1===e.indexOf("if (!"+t+" || !"+t+".requirejs)")&&(e="var "+t+";(function () { if (!"+t+" || !"+t+".requirejs) {\nif (!"+t+") { "+t+" = {}; } else { require = "+t+"; }\n"+e+"\n"+t+".requirejs = requirejs;"+t+".require = require;"+t+".define = define;\n}\n}());"),pragma.nsWrapRegExp.test(e)&&(e=e.replace(pragma.nsWrapRegExp,""),e="(function () {\nvar require = "+t+".require,requirejs = "+t+".requirejs,define = "+t+".define;\n"+e+"\n}());")),e},process:function(fileName,fileContents,config,onLifecycleName,pluginCollector){var foundIndex=-1,startIndex=0,lineEndIndex,conditionLine,matches,type,marker,condition,isTrue,endRegExp,endMatches,endMarkerIndex,shouldInclude,startLength,lifecycleHas,deps,i,dep,moduleName,collectorMod,lifecyclePragmas,pragmas=config.pragmas,hasConfig=config.has,kwArgs=pragmas;if(onLifecycleName&&(lifecyclePragmas=config["pragmas"+onLifecycleName],lifecycleHas=config["has"+onLifecycleName],lifecyclePragmas&&(pragmas=create(pragmas||{},lifecyclePragmas)),lifecycleHas&&(hasConfig=create(hasConfig||{},lifecycleHas))),hasConfig&&(fileContents=fileContents.replace(pragma.hasRegExp,function(e,t){return hasConfig.hasOwnProperty(t)?!!hasConfig[t]:e})),!config.skipPragmas)for(;-1!==(foundIndex=fileContents.indexOf("//>>",startIndex));)if(lineEndIndex=fileContents.indexOf("\n",foundIndex),-1===lineEndIndex&&(lineEndIndex=fileContents.length-1),startIndex=lineEndIndex+1,conditionLine=fileContents.substring(foundIndex,lineEndIndex+1),matches=conditionLine.match(pragma.conditionalRegExp),matches){type=matches[1],marker=matches[2],condition=matches[3],isTrue=!1;try{isTrue=!!eval("("+condition+")")}catch(e){throw"Error in file: "+fileName+". Conditional comment: "+conditionLine+" failed with this error: "+e}if(endRegExp=new RegExp("\\/\\/\\>\\>\\s*"+type+"End\\(\\s*['\"]"+marker+"['\"]\\s*\\)","g"),endMatches=endRegExp.exec(fileContents.substring(startIndex,fileContents.length)),!endMatches)throw"Error in file: "+fileName+". Cannot find end marker for conditional comment: "+conditionLine;endMarkerIndex=startIndex+endRegExp.lastIndex-endMatches[0].length,lineEndIndex=fileContents.indexOf("\n",endMarkerIndex),-1===lineEndIndex&&(lineEndIndex=fileContents.length-1),shouldInclude="exclude"===type&&!isTrue||"include"===type&&isTrue,startLength=startIndex-foundIndex,fileContents=fileContents.substring(0,foundIndex)+(shouldInclude?fileContents.substring(startIndex,endMarkerIndex):"")+fileContents.substring(lineEndIndex+1,fileContents.length),startIndex=foundIndex}if(config.optimizeAllPluginResources&&pluginCollector)try{if(deps=parse.findDependencies(fileName,fileContents),deps.length)for(i=0;i<deps.length;i++)dep=deps[i],-1!==dep.indexOf("!")&&(moduleName=dep.split("!")[0],collectorMod=pluginCollector[moduleName],collectorMod||(collectorMod=pluginCollector[moduleName]=[]),collectorMod.push(dep))}catch(e){logger.error("Parse error looking for plugin resources in "+fileName+", skipping.")}return config.keepAmdefine||(fileContents=fileContents.replace(pragma.amdefineRegExp,"")),"OnSave"===onLifecycleName&&config.namespace&&(fileContents=pragma.namespace(fileContents,config.namespace,onLifecycleName)),pragma.removeStrict(fileContents,config)}};return pragma}),define("skylark-uglifyjs/utils",[],function(){"use strict";function e(e){Object.defineProperty(e.prototype,"stack",{get:function(){var e=new Error(this.message);e.name=this.name;try{throw e}catch(e){return e.stack}}})}function t(e,t){this.message=e,this.defs=t}t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t.prototype.name="DefaultsError",e(t);var n=function(){function e(e,i){for(var r=[],s=0;s<e.length;s++){var a=i(e[s],s);a!==t&&(a instanceof n?r.push.apply(r,a.v):r.push(a))}return r}e.is_op=function(e){return e===t||e instanceof n},e.splice=function(e){return new n(e)};var t=e.skip={};function n(e){this.v=e}return e}();function i(){this.values=Object.create(null)}function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}return i.prototype={set:function(e,t){return"__proto__"==e?this.proto_value=t:this.values[e]=t,this},add:function(e,t){var n=this.get(e);return n?n.push(t):this.set(e,[t]),this},get:function(e){return"__proto__"==e?this.proto_value:this.values[e]},del:function(e){return"__proto__"==e?delete this.proto_value:delete this.values[e],this},has:function(e){return"__proto__"==e?"proto_value"in this:e in this.values},all:function(e){for(var t in this.values)if(!e(this.values[t],t))return!1;return!("proto_value"in this&&!e(this.proto_value,"__proto__"))},each:function(e){for(var t in this.values)e(this.values[t],t);"proto_value"in this&&e(this.proto_value,"__proto__")},size:function(){return Object.keys(this.values).length+("proto_value"in this)},map:function(e){var t=[];for(var n in this.values)t.push(e(this.values[n],n));return"proto_value"in this&&t.push(e(this.proto_value,"__proto__")),t},clone:function(){var e=new i;return this.each(function(t,n){e.set(n,t)}),e},toObject:function(){var e={};return this.each(function(t,n){e["$"+n]=t}),e}},i.fromObject=function(e){var t=new i;for(var n in e)r(e,n)&&t.set(n.slice(1),e[n]);return t},{characters:function(e){return e.split("")},member:function(e,t){return t.indexOf(e)>=0},find_if:function(e,t){for(var n=t.length;--n>=0;)if(e(t[n]))return t[n]},configure_error_stack:e,defaults:function(e,n,i){if(i)for(var s in e)if(r(e,s)&&!r(n,s))throw new t("`"+s+"` is not a supported option",n);for(var s in e)r(e,s)&&(n[s]=e[s]);return n},DefaultsError:t,noop:function(){},return_false:function(){return!1},return_true:function(){return!0},return_this:function(){return this},return_null:function(){return null},List:n,push_uniq:function(e,t){if(e.indexOf(t)<0)return e.push(t)},string_template:function(e,t){return e.replace(/\{([^{}]+)\}/g,function(e,n){var i="this"==n?t:t[n];return i instanceof AST_Node?i.print_to_string():i instanceof AST_Token?i.file+":"+i.line+","+i.col:i})},remove:function(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)},makePredicate:function(e){Array.isArray(e)||(e=e.split(" "));var t=Object.create(null);return e.forEach(function(e){t[e]=!0}),t},all:function(e,t){for(var n=e.length;--n>=0;)if(!t(e[n],n))return!1;return!0},Dictionary:i,HOP:r,DEF_BITPROPS:function(e,t){if(t.length>31)throw new Error("Too many properties: "+t.length+"\n"+t.join(", "));t.forEach(function(t,n){var i=1<<n;Object.defineProperty(e.prototype,t,{get:function(){return!!(this._bits&i)},set:function(e){e?this._bits|=i:this._bits&=~i}})})}}}),define("skylark-uglifyjs/ast",["./utils"],function(e){"use strict";const{HOP:t,List:n,MAP:i,noop:r,DEF_BITPROPS:s,return_true:a,return_this:o}=e;var c;function u(e,n,i,r){void 0===r&&(r=l);var s=n=n?n.split(/\s+/):[];r&&r.PROPS&&(n=n.concat(r.PROPS));var a=["return function AST_",e,"(props){","this._bits=0;","if(props){"];n.forEach(function(e){a.push("this.",e,"=props.",e,";")}),a.push("}");var o=Object.create(r&&r.prototype);(i.initialize||o.initialize)&&a.push("this.initialize();"),a.push("};");var c=new Function(a.join(""))();for(var u in c.prototype=o,c.prototype.CTOR=c,c.prototype.TYPE=c.TYPE=e,r&&(c.BASE=r,r.SUBCLASSES.push(c)),c.DEFMETHOD=function(e,t){this.prototype[e]=t},c.PROPS=n,c.SELF_PROPS=s,c.SUBCLASSES=[],i)t(i,u)&&(/^\$/.test(u)?c[u.substr(1)]=i[u]:c.DEFMETHOD(u,i[u]));return"undefined"!=typeof exports&&(exports["AST_"+e]=c),c}var f=u("Token","type value line col pos endline endcol endpos nlb comments_before comments_after file raw",{},null),l=u("Node","start end",{_clone:function(e){if(e){var t=this.clone();return t.transform(new Yt(function(e){if(e!==t)return e.clone(!0)}))}return new this.CTOR(this)},clone:function(e){return this._clone(e)},$documentation:"Base class of all AST nodes",$propdoc:{start:"[AST_Token] The first token of this node",end:"[AST_Token] The last token of this node"},equals:function(e){return this.TYPE==e.TYPE&&this._equals(e)},walk:function(e){e.visit(this)},_validate:function(){if("Node"==this.TYPE)throw new Error("should not instantiate AST_Node")},validate:function(){var e=this.CTOR;do{e.prototype._validate.call(this)}while(e=e.BASE)},validate_ast:function(){var e={};this.walk(new Wt(function(t){if(t.validate_visited===e)throw new Error(string_template("cannot reuse AST_{TYPE} from [{start}]",t));t.validate_visited=e}))}},null);s(l,["_optimized","_squeezed","call_only","collapse_scanning","defined","evaluating","falsy","in_arg","in_bool","is_undefined","inlined","length_read","nested","new","optional","private","pure","redundant","single_use","static","terminal","truthy","uses_eval","uses_with"]),(l.log_function=function(e,t){if("function"==typeof e){var n=Object.create(null);l.info=t?function(e,t){i("INFO: "+string_template(e,t))}:r,l.warn=function(e,t){i("WARN: "+string_template(e,t))}}else l.info=l.warn=r;function i(t){n[t]||(n[t]=!0,e(t))}})();var p=[];function h(e,t){return e.length==t.length&&all(e,function(e,n){return e.equals(t[n])})}function d(e,t){return e===t||(null==e?null==t:e instanceof l&&t instanceof l&&e.equals(t))}l.enable_validation=function(){l.disable_validation(),function e(i){if(i.SUBCLASSES.forEach(e),t(i.prototype,"transform")){var r=i.prototype.transform;i.prototype.transform=function(e,t){var i=r.call(this,e,t);if(i instanceof l)i.validate();else if(!(null===i||t&&n.is_op(i)))throw new Error("invalid transformed value: "+i);return i},p.push(function(){i.prototype.transform=r})}}(this)},l.disable_validation=function(){for(var e;e=p.pop();)e()};var m=u("Statement",null,{$documentation:"Base class of all statements",_validate:function(){if("Statement"==this.TYPE)throw new Error("should not instantiate AST_Statement")}}),g=u("Debugger",null,{$documentation:"Represents a debugger statement",_equals:a},m),_=u("Directive","quote value",{$documentation:'Represents a directive, like "use strict";',$propdoc:{quote:"[string?] the original quote character",value:"[string] The value of this directive as a plain string (it's not an AST_String!)"},_equals:function(e){return this.value==e.value},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},m),v=u("EmptyStatement",null,{$documentation:"The empty statement (empty block or simply a semicolon)",_equals:a},m);function y(e){return e instanceof m&&!(e instanceof se)&&!(e instanceof $)}function b(e,t,n,i,r){if(n=n?"contain":"be",!(e instanceof l))throw new Error(t+" must "+n+" AST_Node");if(e instanceof je)throw new Error(t+" cannot "+n+" AST_DefaultValue");if(e instanceof tt)throw new Error(t+" cannot "+n+" AST_Destructured");if(e instanceof zt&&!r)throw new Error(t+" cannot "+n+" AST_Hole");if(e instanceof He&&!i)throw new Error(t+" cannot "+n+" AST_Spread");if(y(e))throw new Error(t+" cannot "+n+" AST_Statement");if(e instanceof ht)throw new Error(t+" cannot "+n+" AST_SymbolDeclaration")}function x(e,t){b(e[t],t)}var S=u("SimpleStatement","body",{$documentation:"A statement consisting of an expression, i.e. a = 1 + 2",$propdoc:{body:"[AST_Node] an expression node (should not be instanceof AST_Statement)"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.body.walk(e)})},_validate:function(){x(this,"body")}},m),w=u("BlockScope","_var_names enclosed functions make_def parent_scope variables",{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{enclosed:"[SymbolDef*/S] a list of all symbol definitions that are accessed from this scope or any inner scopes",functions:"[Dictionary/S] like `variables`, but only lists function declarations",parent_scope:"[AST_Scope?/S] link to the parent scope",variables:"[Dictionary/S] a map of name ---\x3e SymbolDef for all variables/functions defined in this scope"},clone:function(e){var t=this._clone(e);return this.enclosed&&(t.enclosed=this.enclosed.slice()),this.functions&&(t.functions=this.functions.clone()),this.variables&&(t.variables=this.variables.clone()),t},pinned:function(){return this.resolve().pinned()},resolve:function(){return this.parent_scope.resolve()},_validate:function(){if("BlockScope"==this.TYPE)throw new Error("should not instantiate AST_BlockScope");if(null!=this.parent_scope){if(!(this.parent_scope instanceof w))throw new Error("parent_scope must be AST_BlockScope");if(!(this.resolve()instanceof q))throw new Error("must be contained within AST_Scope")}}},m);function k(e,t){e.body.forEach(function(e){e.walk(t)})}var A=u("Block","body",{$documentation:"A body of statements (usually braced)",$propdoc:{body:"[AST_Statement*] an array of statements"},_equals:function(e){return h(this.body,e.body)},walk:function(e){var t=this;e.visit(t,function(){k(t,e)})},_validate:function(){if("Block"==this.TYPE)throw new Error("should not instantiate AST_Block");this.body.forEach(function(e){if(!y(e))throw new Error("body must contain AST_Statement")})}},w),T=u("BlockStatement",null,{$documentation:"A block statement"},A),E=u("StatementWithBody","body",{$documentation:"Base class for all statements that contain one nested body: `For`, `ForIn`, `Do`, `While`, `With`",$propdoc:{body:"[AST_Statement] the body; this should always be present, even if it's an AST_EmptyStatement"},_validate:function(){if("StatementWithBody"==this.TYPE)throw new Error("should not instantiate AST_StatementWithBody");if(!y(this.body))throw new Error("body must be AST_Statement")}},w),C=u("LabeledStatement","label",{$documentation:"Statement with a label",$propdoc:{label:"[AST_Label] a label definition"},_equals:function(e){return this.label.equals(e.label)&&this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.label.walk(e),t.body.walk(e)})},clone:function(e){var t=this._clone(e);if(e){var n=t.label,i=this.label;t.walk(new Wt(function(e){if(e instanceof ge){if(!e.label||e.label.thedef!==i)return;return e.label.thedef=n,n.references.push(e),!0}if(e instanceof q)return!0}))}return t},_validate:function(){if(!(this.label instanceof kt))throw new Error("label must be AST_Label")}},E),P=u("IterationStatement",null,{$documentation:"Internal class.  All loops inherit from it.",_validate:function(){if("IterationStatement"==this.TYPE)throw new Error("should not instantiate AST_IterationStatement")}},E),O=u("DWLoop","condition",{$documentation:"Base class for do/while statements",$propdoc:{condition:"[AST_Node] the loop condition.  Should not be instanceof AST_Statement"},_equals:function(e){return this.body.equals(e.body)&&this.condition.equals(e.condition)},_validate:function(){if("DWLoop"==this.TYPE)throw new Error("should not instantiate AST_DWLoop");x(this,"condition")}},P),D=u("Do",null,{$documentation:"A `do` statement",walk:function(e){var t=this;e.visit(t,function(){t.body.walk(e),t.condition.walk(e)})}},O),I=u("While",null,{$documentation:"A `while` statement",walk:function(e){var t=this;e.visit(t,function(){t.condition.walk(e),t.body.walk(e)})}},O),N=u("For","init condition step",{$documentation:"A `for` statement",$propdoc:{init:"[AST_Node?] the `for` initialization code, or null if empty",condition:"[AST_Node?] the `for` termination clause, or null if empty",step:"[AST_Node?] the `for` update clause, or null if empty"},_equals:function(e){return d(this.init,e.init)&&d(this.condition,e.condition)&&d(this.step,e.step)&&this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.init&&t.init.walk(e),t.condition&&t.condition.walk(e),t.step&&t.step.walk(e),t.body.walk(e)})},_validate:function(){if(null!=this.init){if(!(this.init instanceof l))throw new Error("init must be AST_Node");if(y(this.init)&&!(this.init instanceof Ee))throw new Error("init cannot be AST_Statement")}null!=this.condition&&x(this,"condition"),null!=this.step&&x(this,"step")}},P),L=u("ForEnumeration","init object",{$documentation:"Base class for enumeration loops, i.e. `for ... in`, `for ... of` & `for await ... of`",$propdoc:{init:"[AST_Node] the assignment target during iteration",object:"[AST_Node] the object to iterate over"},_equals:function(e){return this.init.equals(e.init)&&this.object.equals(e.object)&&this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.init.walk(e),t.object.walk(e),t.body.walk(e)})},_validate:function(){if("ForEnumeration"==this.TYPE)throw new Error("should not instantiate AST_ForEnumeration");if(this.init instanceof Ee){if(1!=this.init.definitions.length)throw new Error("init must have single declaration")}else nt(this.init,function(e){if(!(e instanceof ze||e instanceof At))throw new Error("init must be assignable: "+e.TYPE)});x(this,"object")}},P),R=u("ForIn",null,{$documentation:"A `for ... in` statement"},L),M=u("ForOf",null,{$documentation:"A `for ... of` statement"},L),j=u("ForAwaitOf",null,{$documentation:"A `for await ... of` statement"},M),F=u("With","expression",{$documentation:"A `with` statement",$propdoc:{expression:"[AST_Node] the `with` expression"},_equals:function(e){return this.expression.equals(e.expression)&&this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e),t.body.walk(e)})},_validate:function(){x(this,"expression")}},E),q=u("Scope","fn_defs may_call_this uses_eval uses_with",{$documentation:"Base class for all statements introducing a lambda scope",$propdoc:{uses_eval:"[boolean/S] tells whether this scope contains a direct call to the global `eval`",uses_with:"[boolean/S] tells whether this scope uses the `with` statement"},pinned:function(){return this.uses_eval||this.uses_with},resolve:o,_validate:function(){if("Scope"==this.TYPE)throw new Error("should not instantiate AST_Scope")}},A),B=u("Toplevel","globals",{$documentation:"The toplevel scope",$propdoc:{globals:"[Dictionary/S] a map of name ---\x3e SymbolDef for all undeclared names"},wrap:function(e){var t=this.body;return c.parse(["(function(exports){'$ORIG';})(typeof ",e,"=='undefined'?(",e,"={}):",e,");"].join(""),{filename:"wrap="+JSON.stringify(e)}).transform(new Yt(function(e){if(e instanceof _&&"$ORIG"==e.value)return n.splice(t)}))},enclose:function(e){"string"!=typeof e&&(e="");var t=e.indexOf(":");t<0&&(t=e.length);var i=this.body;return c.parse(["(function(",e.slice(0,t),'){"$ORIG"})(',e.slice(t+1),")"].join(""),{filename:"enclose="+JSON.stringify(e)}).transform(new Yt(function(e){if(e instanceof _&&"$ORIG"==e.value)return n.splice(i)}))}},q),V=u("ClassInitBlock",null,{$documentation:"Value for `class` static initialization blocks"},q),z=u("Lambda","argnames length_read rest safe_ids uses_arguments",{$documentation:"Base class for functions",$propdoc:{argnames:"[(AST_DefaultValue|AST_Destructured|AST_SymbolFunarg)*] array of function arguments and/or destructured literals",length_read:"[boolean/S] whether length property of this function is accessed",rest:"[(AST_Destructured|AST_SymbolFunarg)?] rest parameter, or null if absent",uses_arguments:"[boolean|number/S] whether this function accesses the arguments array"},each_argname:function(e){var t=new Wt(function(n){return n instanceof je?(n.name.walk(t),!0):n instanceof rt?(n.value.walk(t),!0):void(n instanceof vt&&e(n))});this.argnames.forEach(function(e){e.walk(t)}),this.rest&&this.rest.walk(t)},_equals:function(e){return d(this.rest,e.rest)&&d(this.name,e.name)&&d(this.value,e.value)&&h(this.argnames,e.argnames)&&h(this.body,e.body)},walk:function(e){var t=this;e.visit(t,function(){t.name&&t.name.walk(e),t.argnames.forEach(function(t){t.walk(e)}),t.rest&&t.rest.walk(e),k(t,e)})},_validate:function(){if("Lambda"==this.TYPE)throw new Error("should not instantiate AST_Lambda");this.argnames.forEach(function(e){nt(e,function(e){if(!(e instanceof vt))throw new Error("argnames must be AST_SymbolFunarg[]")},!0)}),null!=this.rest&&nt(this.rest,function(e){if(!(e instanceof vt))throw new Error("rest must be AST_SymbolFunarg")})}},q),U=u("Accessor",null,{$documentation:"A getter/setter function",_validate:function(){if(null!=this.name)throw new Error("name must be null")}},z),$=u("LambdaExpression","inlined",{$documentation:"Base class for function expressions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined"},_validate:function(){if("LambdaExpression"==this.TYPE)throw new Error("should not instantiate AST_LambdaExpression")}},z);function H(e){return e instanceof G||e instanceof W}var G=u("Arrow","value",{$documentation:"An arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(e){var t=this;e.visit(t,function(){t.argnames.forEach(function(t){t.walk(e)}),t.rest&&t.rest.walk(e),t.value?t.value.walk(e):k(t,e)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(x(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},$),W=u("AsyncArrow","value",{$documentation:"An asynchronous arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(e){var t=this;e.visit(t,function(){t.argnames.forEach(function(t){t.walk(e)}),t.rest&&t.rest.walk(e),t.value?t.value.walk(e):k(t,e)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(x(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},$),Y=u("AsyncFunction","name",{$documentation:"An asynchronous function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof bt))throw new Error("name must be AST_SymbolLambda")}},$),J=u("AsyncGeneratorFunction","name",{$documentation:"An asynchronous generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof bt))throw new Error("name must be AST_SymbolLambda")}},$),K=u("Function","name",{$documentation:"A function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof bt))throw new Error("name must be AST_SymbolLambda")}},$),X=u("GeneratorFunction","name",{$documentation:"A generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof bt))throw new Error("name must be AST_SymbolLambda")}},$),Q=u("LambdaDefinition","inlined name",{$documentation:"Base class for function definitions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined",name:"[AST_SymbolDefun] the name of this function"},_validate:function(){if("LambdaDefinition"==this.TYPE)throw new Error("should not instantiate AST_LambdaDefinition");if(!(this.name instanceof yt))throw new Error("name must be AST_SymbolDefun")}},z),Z=u("AsyncDefun",null,{$documentation:"An asynchronous function definition"},Q),ee=u("AsyncGeneratorDefun",null,{$documentation:"An asynchronous generator function definition"},Q),te=u("Defun",null,{$documentation:"A function definition"},Q),ne=u("GeneratorDefun",null,{$documentation:"A generator function definition"},Q),ie=u("Class","extends name properties",{$documentation:"Base class for class literals",$propdoc:{extends:"[AST_Node?] the super class, or null if not specified",properties:"[AST_ClassProperty*] array of class properties"},_equals:function(e){return d(this.name,e.name)&&d(this.extends,e.extends)&&h(this.properties,e.properties)},resolve:function(e){return e?this:this.parent_scope.resolve()},walk:function(e){var t=this;e.visit(t,function(){t.name&&t.name.walk(e),t.extends&&t.extends.walk(e),t.properties.forEach(function(t){t.walk(e)})})},_validate:function(){if("Class"==this.TYPE)throw new Error("should not instantiate AST_Class");null!=this.extends&&x(this,"extends"),this.properties.forEach(function(e){if(!(e instanceof ae))throw new Error("properties must contain AST_ClassProperty")})}},w),re=u("DefClass",null,{$documentation:"A class definition",$propdoc:{name:"[AST_SymbolDefClass] the name of this class"},_validate:function(){if(!(this.name instanceof xt))throw new Error("name must be AST_SymbolDefClass")}},ie),se=u("ClassExpression",null,{$documentation:"A class expression",$propdoc:{name:"[AST_SymbolClass?] the name of this class, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof St))throw new Error("name must be AST_SymbolClass")}},ie),ae=u("ClassProperty","key private static value",{$documentation:"Base class for `class` properties",$propdoc:{key:"[string|AST_Node?] property name (AST_Node for computed property, null for initialization block)",private:"[boolean] whether this is a private property",static:"[boolean] whether this is a static property",value:"[AST_Node?] property value (AST_Accessor for getters/setters, AST_LambdaExpression for methods, null if not specified for fields)"},_equals:function(e){return!this.private==!e.private&&!this.static==!e.static&&d(this.key,e.key)&&d(this.value,e.value)},walk:function(e){var t=this;e.visit(t,function(){t.key instanceof l&&t.key.walk(e),t.value&&t.value.walk(e)})},_validate:function(){if("ClassProperty"==this.TYPE)throw new Error("should not instantiate AST_ClassProperty");if(this instanceof le){if(null!=this.key)throw new Error("key must be null")}else if("string"!=typeof this.key){if(!(this.key instanceof l))throw new Error("key must be string or AST_Node");x(this,"key")}if(null!=this.value&&!(this.value instanceof l))throw new Error("value must be AST_Node")}}),oe=u("ClassField",null,{$documentation:"A `class` field",_validate:function(){null!=this.value&&x(this,"value")}},ae),ce=u("ClassGetter",null,{$documentation:"A `class` getter",_validate:function(){if(!(this.value instanceof U))throw new Error("value must be AST_Accessor")}},ae),ue=u("ClassSetter",null,{$documentation:"A `class` setter",_validate:function(){if(!(this.value instanceof U))throw new Error("value must be AST_Accessor")}},ae),fe=u("ClassMethod",null,{$documentation:"A `class` method",_validate:function(){if(!(this.value instanceof $))throw new Error("value must be AST_LambdaExpression");if(H(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of class method's lambda must be null")}},ae),le=u("ClassInit",null,{$documentation:"A `class` static initialization block",_validate:function(){if(!this.static)throw new Error("static must be true");if(!(this.value instanceof V))throw new Error("value must be AST_ClassInitBlock")},initialize:function(){this.static=!0}},ae),pe=u("Jump",null,{$documentation:"Base class for “jumps” (for now that's `return`, `throw`, `break` and `continue`)",_validate:function(){if("Jump"==this.TYPE)throw new Error("should not instantiate AST_Jump")}},m),he=u("Exit","value",{$documentation:"Base class for “exits” (`return` and `throw`)",$propdoc:{value:"[AST_Node?] the value returned or thrown by this statement; could be null for AST_Return"},_equals:function(e){return d(this.value,e.value)},walk:function(e){var t=this;e.visit(t,function(){t.value&&t.value.walk(e)})},_validate:function(){if("Exit"==this.TYPE)throw new Error("should not instantiate AST_Exit")}},pe),de=u("Return",null,{$documentation:"A `return` statement",_validate:function(){null!=this.value&&x(this,"value")}},he),me=u("Throw",null,{$documentation:"A `throw` statement",_validate:function(){x(this,"value")}},he),ge=u("LoopControl","label",{$documentation:"Base class for loop control statements (`break` and `continue`)",$propdoc:{label:"[AST_LabelRef?] the label, or null if none"},_equals:function(e){return d(this.label,e.label)},walk:function(e){var t=this;e.visit(t,function(){t.label&&t.label.walk(e)})},_validate:function(){if("LoopControl"==this.TYPE)throw new Error("should not instantiate AST_LoopControl");if(null!=this.label&&!(this.label instanceof Et))throw new Error("label must be AST_LabelRef")}},pe),_e=u("Break",null,{$documentation:"A `break` statement"},ge),ve=u("Continue",null,{$documentation:"A `continue` statement"},ge),ye=u("If","condition alternative",{$documentation:"A `if` statement",$propdoc:{condition:"[AST_Node] the `if` condition",alternative:"[AST_Statement?] the `else` part, or null if not present"},_equals:function(e){return this.body.equals(e.body)&&this.condition.equals(e.condition)&&d(this.alternative,e.alternative)},walk:function(e){var t=this;e.visit(t,function(){t.condition.walk(e),t.body.walk(e),t.alternative&&t.alternative.walk(e)})},_validate:function(){if(x(this,"condition"),null!=this.alternative&&!y(this.alternative))throw new Error("alternative must be AST_Statement")}},E),be=u("Switch","expression",{$documentation:"A `switch` statement",$propdoc:{expression:"[AST_Node] the `switch` “discriminant”"},_equals:function(e){return this.expression.equals(e.expression)&&h(this.body,e.body)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e),k(t,e)})},_validate:function(){x(this,"expression"),this.body.forEach(function(e){if(!(e instanceof xe))throw new Error("body must be AST_SwitchBranch[]")})}},A),xe=u("SwitchBranch",null,{$documentation:"Base class for `switch` branches",_validate:function(){if("SwitchBranch"==this.TYPE)throw new Error("should not instantiate AST_SwitchBranch")}},A),Se=u("Default",null,{$documentation:"A `default` switch branch"},xe),we=u("Case","expression",{$documentation:"A `case` switch branch",$propdoc:{expression:"[AST_Node] the `case` expression"},_equals:function(e){return this.expression.equals(e.expression)&&h(this.body,e.body)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e),k(t,e)})},_validate:function(){x(this,"expression")}},xe),ke=u("Try","bcatch bfinally",{$documentation:"A `try` statement",$propdoc:{bcatch:"[AST_Catch?] the catch block, or null if not present",bfinally:"[AST_Finally?] the finally block, or null if not present"},_equals:function(e){return h(this.body,e.body)&&d(this.bcatch,e.bcatch)&&d(this.bfinally,e.bfinally)},walk:function(e){var t=this;e.visit(t,function(){k(t,e),t.bcatch&&t.bcatch.walk(e),t.bfinally&&t.bfinally.walk(e)})},_validate:function(){if(null!=this.bcatch&&!(this.bcatch instanceof Ae))throw new Error("bcatch must be AST_Catch");if(null!=this.bfinally&&!(this.bfinally instanceof Te))throw new Error("bfinally must be AST_Finally")}},A),Ae=u("Catch","argname",{$documentation:"A `catch` node; only makes sense as part of a `try` statement",$propdoc:{argname:"[(AST_Destructured|AST_SymbolCatch)?] symbol for the exception, or null if not present"},_equals:function(e){return d(this.argname,e.argname)&&h(this.body,e.body)},walk:function(e){var t=this;e.visit(t,function(){t.argname&&t.argname.walk(e),k(t,e)})},_validate:function(){null!=this.argname&&nt(this.argname,function(e){if(!(e instanceof wt))throw new Error("argname must be AST_SymbolCatch")})}},A),Te=u("Finally",null,{$documentation:"A `finally` node; only makes sense as part of a `try` statement"},A),Ee=u("Definitions","definitions",{$documentation:"Base class for `var` nodes (variable declarations/initializations)",$propdoc:{definitions:"[AST_VarDef*] array of variable definitions"},_equals:function(e){return h(this.definitions,e.definitions)},walk:function(e){var t=this;e.visit(t,function(){t.definitions.forEach(function(t){t.walk(e)})})},_validate:function(){if("Definitions"==this.TYPE)throw new Error("should not instantiate AST_Definitions");if(this.definitions.length<1)throw new Error("must have at least one definition")}},m),Ce=u("Const",null,{$documentation:"A `const` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof De))throw new Error("definitions must be AST_VarDef[]");nt(e.name,function(e){if(!(e instanceof dt))throw new Error("name must be AST_SymbolConst")})})}},Ee),Pe=u("Let",null,{$documentation:"A `let` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof De))throw new Error("definitions must be AST_VarDef[]");nt(e.name,function(e){if(!(e instanceof gt))throw new Error("name must be AST_SymbolLet")})})}},Ee),Oe=u("Var",null,{$documentation:"A `var` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof De))throw new Error("definitions must be AST_VarDef[]");nt(e.name,function(e){if(!(e instanceof _t))throw new Error("name must be AST_SymbolVar")})})}},Ee),De=u("VarDef","name value",{$documentation:"A variable declaration; only appears in a AST_Definitions node",$propdoc:{name:"[AST_Destructured|AST_SymbolVar] name of the variable",value:"[AST_Node?] initializer, or null of there's no initializer"},_equals:function(e){return this.name.equals(e.name)&&d(this.value,e.value)},walk:function(e){var t=this;e.visit(t,function(){t.name.walk(e),t.value&&t.value.walk(e)})},_validate:function(){null!=this.value&&x(this,"value")}}),Ie=u("ExportDeclaration","body",{$documentation:"An `export` statement",$propdoc:{body:"[AST_DefClass|AST_Definitions|AST_LambdaDefinition] the statement to export"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.body.walk(e)})},_validate:function(){if(!(this.body instanceof re||this.body instanceof Ee||this.body instanceof Q))throw new Error("body must be AST_DefClass, AST_Definitions or AST_LambdaDefinition")}},m),Ne=u("ExportDefault","body",{$documentation:"An `export default` statement",$propdoc:{body:"[AST_Node] the default export"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var t=this;e.visit(t,function(){t.body.walk(e)})},_validate:function(){this.body instanceof re||this.body instanceof Q||x(this,"body")}},m),Le=u("ExportForeign","aliases keys path",{$documentation:"An `export ... from '...'` statement",$propdoc:{aliases:"[AST_String*] array of aliases to export",keys:"[AST_String*] array of keys to import",path:"[AST_String] the path to import module"},_equals:function(e){return this.path.equals(e.path)&&h(this.aliases,e.aliases)&&h(this.keys,e.keys)},_validate:function(){if(this.aliases.length!=this.keys.length)throw new Error("aliases:key length mismatch: "+this.aliases.length+" != "+this.keys.length);if(this.aliases.forEach(function(e){if(!(e instanceof Lt))throw new Error("aliases must contain AST_String")}),this.keys.forEach(function(e){if(!(e instanceof Lt))throw new Error("keys must contain AST_String")}),!(this.path instanceof Lt))throw new Error("path must be AST_String")}},m),Re=u("ExportReferences","properties",{$documentation:"An `export { ... }` statement",$propdoc:{properties:"[AST_SymbolExport*] array of aliases to export"},_equals:function(e){return h(this.properties,e.properties)},walk:function(e){var t=this;e.visit(t,function(){t.properties.forEach(function(t){t.walk(e)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof Tt))throw new Error("properties must contain AST_SymbolExport")})}},m),Me=u("Import","all default path properties",{$documentation:"An `import` statement",$propdoc:{all:"[AST_SymbolImport?] the imported namespace, or null if not specified",default:"[AST_SymbolImport?] the alias for default `export`, or null if not specified",path:"[AST_String] the path to import module",properties:"[(AST_SymbolImport*)?] array of aliases, or null if not specified"},_equals:function(e){return this.path.equals(e.path)&&d(this.all,e.all)&&d(this.default,e.default)&&!this.properties==!e.properties&&(!this.properties||h(this.properties,e.properties))},walk:function(e){var t=this;e.visit(t,function(){t.all&&t.all.walk(e),t.default&&t.default.walk(e),t.properties&&t.properties.forEach(function(t){t.walk(e)})})},_validate:function(){if(null!=this.all){if(!(this.all instanceof mt))throw new Error("all must be AST_SymbolImport");if(null!=this.properties)throw new Error("cannot import both * and {} in the same statement")}if(null!=this.default){if(!(this.default instanceof mt))throw new Error("default must be AST_SymbolImport");if(""!==this.default.key.value)throw new Error("invalid default key: "+this.default.key.value)}if(!(this.path instanceof Lt))throw new Error("path must be AST_String");null!=this.properties&&this.properties.forEach(function(e){if(!(e instanceof mt))throw new Error("properties must contain AST_SymbolImport")})}},m),je=u("DefaultValue","name value",{$documentation:"A default value declaration",$propdoc:{name:"[AST_Destructured|AST_SymbolDeclaration] name of the variable",value:"[AST_Node] value to assign if variable is `undefined`"},_equals:function(e){return this.name.equals(e.name)&&this.value.equals(e.value)},walk:function(e){var t=this;e.visit(t,function(){t.name.walk(e),t.value.walk(e)})},_validate:function(){x(this,"value")}});function Fe(e,t,n,i){e[t].forEach(function(e){b(e,t,!0,n,i)})}var qe=u("Call","args expression optional pure terminal",{$documentation:"A function call expression",$propdoc:{args:"[AST_Node*] array of arguments",expression:"[AST_Node] expression to invoke as function",optional:"[boolean] whether the expression is optional chaining",pure:"[boolean/S] marker for side-effect-free call expression",terminal:"[boolean] whether the chain has ended"},_equals:function(e){return!this.optional==!e.optional&&this.expression.equals(e.expression)&&h(this.args,e.args)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e),t.args.forEach(function(t){t.walk(e)})})},_validate:function(){x(this,"expression"),Fe(this,"args",!0)}}),Be=u("New",null,{$documentation:"An object instantiation.  Derives from a function call since it has exactly the same properties",_validate:function(){if(this.optional)throw new Error("optional must be false");if(this.terminal)throw new Error("terminal must be false")}},qe),Ve=u("Sequence","expressions",{$documentation:"A sequence expression (comma-separated expressions)",$propdoc:{expressions:"[AST_Node*] array of expressions (at least two)"},_equals:function(e){return h(this.expressions,e.expressions)},walk:function(e){var t=this;e.visit(t,function(){t.expressions.forEach(function(t){t.walk(e)})})},_validate:function(){if(this.expressions.length<2)throw new Error("expressions must contain multiple elements");Fe(this,"expressions")}});var ze=u("PropAccess","expression optional property terminal",{$documentation:'Base class for property access expressions, i.e. `a.foo` or `a["foo"]`',$propdoc:{expression:"[AST_Node] the “container” expression",optional:"[boolean] whether the expression is optional chaining",property:"[AST_Node|string] the property to access.  For AST_Dot this is always a plain string, while for AST_Sub it's an arbitrary AST_Node",terminal:"[boolean] whether the chain has ended"},_equals:function(e){return!this.optional==!e.optional&&d(this.property,e.property)&&this.expression.equals(e.expression)},get_property:function(){var e=this.property;return e instanceof Nt?e.value:e instanceof We&&"void"==e.operator&&e.expression instanceof Nt?void 0:e},_validate:function(){if("PropAccess"==this.TYPE)throw new Error("should not instantiate AST_PropAccess");x(this,"expression")}}),Ue=u("Dot","quoted",{$documentation:"A dotted property access expression",$propdoc:{quoted:"[boolean] whether property is transformed from a quoted string"},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e)})},_validate:function(){if("string"!=typeof this.property)throw new Error("property must be string")}},ze),$e=u("Sub",null,{$documentation:'Index-style property access, i.e. `a["foo"]`',walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e),t.property.walk(e)})},_validate:function(){x(this,"property")}},ze),He=u("Spread","expression",{$documentation:"Spread expression in array/object literals or function calls",$propdoc:{expression:"[AST_Node] expression to be expanded"},_equals:function(e){return this.expression.equals(e.expression)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e)})},_validate:function(){x(this,"expression")}}),Ge=u("Unary","operator expression",{$documentation:"Base class for unary expressions",$propdoc:{operator:"[string] the operator",expression:"[AST_Node] expression that this unary operator applies to"},_equals:function(e){return this.operator==e.operator&&this.expression.equals(e.expression)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e)})},_validate:function(){if("Unary"==this.TYPE)throw new Error("should not instantiate AST_Unary");if("string"!=typeof this.operator)throw new Error("operator must be string");x(this,"expression")}}),We=u("UnaryPrefix",null,{$documentation:"Unary prefix expression, i.e. `typeof i` or `++i`"},Ge),Ye=u("UnaryPostfix",null,{$documentation:"Unary postfix expression, i.e. `i++`"},Ge),Je=u("Binary","operator left right",{$documentation:"Binary expression, i.e. `a + b`",$propdoc:{left:"[AST_Node] left-hand side expression",operator:"[string] the operator",right:"[AST_Node] right-hand side expression"},_equals:function(e){return this.operator==e.operator&&this.left.equals(e.left)&&this.right.equals(e.right)},walk:function(e){var t=this;e.visit(t,function(){t.left.walk(e),t.right.walk(e)})},_validate:function(){if(this instanceof Xe||x(this,"left"),"string"!=typeof this.operator)throw new Error("operator must be string");x(this,"right")}}),Ke=u("Conditional","condition consequent alternative",{$documentation:"Conditional expression using the ternary operator, i.e. `a ? b : c`",$propdoc:{condition:"[AST_Node]",consequent:"[AST_Node]",alternative:"[AST_Node]"},_equals:function(e){return this.condition.equals(e.condition)&&this.consequent.equals(e.consequent)&&this.alternative.equals(e.alternative)},walk:function(e){var t=this;e.visit(t,function(){t.condition.walk(e),t.consequent.walk(e),t.alternative.walk(e)})},_validate:function(){x(this,"condition"),x(this,"consequent"),x(this,"alternative")}}),Xe=u("Assign",null,{$documentation:"An assignment expression — `a = b + 5`",_validate:function(){if(this.operator.indexOf("=")<0)throw new Error('operator must contain "="');if(this.left instanceof tt){if("="!=this.operator)throw new Error("invalid destructuring operator: "+this.operator);nt(this.left,function(e){if(!(e instanceof ze||e instanceof At))throw new Error("left must be assignable: "+e.TYPE)})}else if(!(this.left instanceof Ut||this.left instanceof Bt||this.left instanceof ze&&!this.left.optional||this.left instanceof At||this.left instanceof Vt))throw new Error("left must be assignable")}},Je),Qe=u("Await","expression",{$documentation:"An await expression",$propdoc:{expression:"[AST_Node] expression with Promise to resolve on"},_equals:function(e){return this.expression.equals(e.expression)},walk:function(e){var t=this;e.visit(t,function(){t.expression.walk(e)})},_validate:function(){x(this,"expression")}}),Ze=u("Yield","expression nested",{$documentation:"A yield expression",$propdoc:{expression:"[AST_Node?] return value for iterator, or null if undefined",nested:"[boolean] whether to iterate over expression as generator"},_equals:function(e){return!this.nested==!e.nested&&d(this.expression,e.expression)},walk:function(e){var t=this;e.visit(t,function(){t.expression&&t.expression.walk(e)})},_validate:function(){if(null!=this.expression)x(this,"expression");else if(this.nested)throw new Error("yield* must contain expression")}}),et=u("Array","elements",{$documentation:"An array literal",$propdoc:{elements:"[AST_Node*] array of elements"},_equals:function(e){return h(this.elements,e.elements)},walk:function(e){var t=this;e.visit(t,function(){t.elements.forEach(function(t){t.walk(e)})})},_validate:function(){Fe(this,"elements",!0,!0)}}),tt=u("Destructured","rest",{$documentation:"Base class for destructured literal",$propdoc:{rest:"[(AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)?] rest parameter, or null if absent"},_validate:function(){if("Destructured"==this.TYPE)throw new Error("should not instantiate AST_Destructured")}});function nt(e,t,n){if(e instanceof je&&n)return nt(e.name,t);if(e instanceof tt){if(null!=e.rest&&nt(e.rest,t),e instanceof it)return e.elements.forEach(function(e){e instanceof zt||nt(e,t,!0)});if(e instanceof st)return e.properties.forEach(function(e){nt(e.value,t,!0)})}t(e)}var it=u("DestructuredArray","elements",{$documentation:"A destructured array literal",$propdoc:{elements:"[(AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)*] array of elements"},_equals:function(e){return d(this.rest,e.rest)&&h(this.elements,e.elements)},walk:function(e){var t=this;e.visit(t,function(){t.elements.forEach(function(t){t.walk(e)}),t.rest&&t.rest.walk(e)})}},tt),rt=u("DestructuredKeyVal","key value",{$documentation:"A key: value destructured property",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef] property value"},_equals:function(e){return d(this.key,e.key)&&this.value.equals(e.value)},walk:function(e){var t=this;e.visit(t,function(){t.key instanceof l&&t.key.walk(e),t.value.walk(e)})},_validate:function(){if("string"!=typeof this.key){if(!(this.key instanceof l))throw new Error("key must be string or AST_Node");x(this,"key")}if(!(this.value instanceof l))throw new Error("value must be AST_Node")}}),st=u("DestructuredObject","properties",{$documentation:"A destructured object literal",$propdoc:{properties:"[AST_DestructuredKeyVal*] array of properties"},_equals:function(e){return d(this.rest,e.rest)&&h(this.properties,e.properties)},walk:function(e){var t=this;e.visit(t,function(){t.properties.forEach(function(t){t.walk(e)}),t.rest&&t.rest.walk(e)})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof rt))throw new Error("properties must be AST_DestructuredKeyVal[]")})}},tt),at=u("Object","properties",{$documentation:"An object literal",$propdoc:{properties:"[(AST_ObjectProperty|AST_Spread)*] array of properties"},_equals:function(e){return h(this.properties,e.properties)},walk:function(e){var t=this;e.visit(t,function(){t.properties.forEach(function(t){t.walk(e)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof ot||e instanceof He))throw new Error("properties must contain AST_ObjectProperty and/or AST_Spread only")})}}),ot=u("ObjectProperty","key value",{$documentation:"Base class for literal object properties",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_Node] property value.  For getters and setters this is an AST_Accessor."},_equals:function(e){return d(this.key,e.key)&&this.value.equals(e.value)},walk:function(e){var t=this;e.visit(t,function(){t.key instanceof l&&t.key.walk(e),t.value.walk(e)})},_validate:function(){if("ObjectProperty"==this.TYPE)throw new Error("should not instantiate AST_ObjectProperty");if("string"!=typeof this.key){if(!(this.key instanceof l))throw new Error("key must be string or AST_Node");x(this,"key")}if(!(this.value instanceof l))throw new Error("value must be AST_Node")}}),ct=u("ObjectKeyVal",null,{$documentation:"A key: value object property",_validate:function(){x(this,"value")}},ot),ut=u("ObjectMethod",null,{$documentation:"A key(){} object property",_validate:function(){if(!(this.value instanceof $))throw new Error("value must be AST_LambdaExpression");if(H(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of object method's lambda must be null")}},ct),ft=u("ObjectSetter",null,{$documentation:"An object setter property",_validate:function(){if(!(this.value instanceof U))throw new Error("value must be AST_Accessor")}},ot),lt=u("ObjectGetter",null,{$documentation:"An object getter property",_validate:function(){if(!(this.value instanceof U))throw new Error("value must be AST_Accessor")}},ot),pt=u("Symbol","scope name thedef",{$documentation:"Base class for all symbols",$propdoc:{name:"[string] name of this symbol",scope:"[AST_Scope/S] the current scope (not necessarily the definition scope)",thedef:"[SymbolDef/S] the definition of this symbol"},_equals:function(e){return this.thedef?this.thedef===e.thedef:this.name==e.name},_validate:function(){if("Symbol"==this.TYPE)throw new Error("should not instantiate AST_Symbol");if("string"!=typeof this.name)throw new Error("name must be string")}}),ht=u("SymbolDeclaration","init",{$documentation:"A declaration symbol (symbol in var, function name or argument, symbol in catch)"},pt),dt=u("SymbolConst",null,{$documentation:"Symbol defining a constant"},ht),mt=u("SymbolImport","key",{$documentation:"Symbol defined by an `import` statement",$propdoc:{key:"[AST_String] the original `export` name"},_equals:function(e){return this.name==e.name&&this.key.equals(e.key)},_validate:function(){if(!(this.key instanceof Lt))throw new Error("key must be AST_String")}},dt),gt=u("SymbolLet",null,{$documentation:"Symbol defining a lexical-scoped variable"},ht),_t=u("SymbolVar",null,{$documentation:"Symbol defining a variable"},ht),vt=u("SymbolFunarg","unused",{$documentation:"Symbol naming a function argument"},_t),yt=u("SymbolDefun",null,{$documentation:"Symbol defining a function"},ht),bt=u("SymbolLambda",null,{$documentation:"Symbol naming a function expression"},ht),xt=u("SymbolDefClass",null,{$documentation:"Symbol defining a class"},dt),St=u("SymbolClass",null,{$documentation:"Symbol naming a class expression"},dt),wt=u("SymbolCatch",null,{$documentation:"Symbol naming the exception in catch"},ht),kt=u("Label","references",{$documentation:"Symbol naming a label (declaration)",$propdoc:{references:"[AST_LoopControl*] a list of nodes referring to this label"},initialize:function(){this.references=[],this.thedef=this}},pt),At=u("SymbolRef","fixed in_arg redef",{$documentation:"Reference to some symbol (not definition/declaration)"},pt),Tt=u("SymbolExport","alias",{$documentation:"Reference in an `export` statement",$propdoc:{alias:"[AST_String] the `export` alias"},_equals:function(e){return this.name==e.name&&this.alias.equals(e.alias)},_validate:function(){if(!(this.alias instanceof Lt))throw new Error("alias must be AST_String")}},At),Et=u("LabelRef",null,{$documentation:"Reference to a label symbol"},pt),Ct=u("ObjectIdentity",null,{$documentation:"Base class for `super` & `this`",_equals:a,_validate:function(){if("ObjectIdentity"==this.TYPE)throw new Error("should not instantiate AST_ObjectIdentity")}},pt),Pt=u("Super",null,{$documentation:"The `super` symbol",_validate:function(){if("super"!==this.name)throw new Error('name must be "super"')}},Ct),Ot=u("This",null,{$documentation:"The `this` symbol",_validate:function(){if("This"==this.TYPE&&"this"!==this.name)throw new Error('name must be "this"')}},Ct),Dt=u("NewTarget",null,{$documentation:"The `new.target` symbol",initialize:function(){this.name="new.target"},_validate:function(){if("new.target"!==this.name)throw new Error('name must be "new.target": '+this.name)}},Ot),It=u("Template","expressions strings tag",{$documentation:"A template literal, i.e. tag`str1${expr1}...strN${exprN}strN+1`",$propdoc:{expressions:"[AST_Node*] the placeholder expressions",strings:"[string*] the raw text segments",tag:"[AST_Node?] tag function, or null if absent"},_equals:function(e){return d(this.tag,e.tag)&&(t=this.strings,n=e.strings,t.length==n.length&&all(t,function(e,t){return e==n[t]}))&&h(this.expressions,e.expressions);var t,n},walk:function(e){var t=this;e.visit(t,function(){t.tag&&t.tag.walk(e),t.expressions.forEach(function(t){t.walk(e)})})},_validate:function(){if(this.expressions.length+1!=this.strings.length)throw new Error("malformed template with "+this.expressions.length+" placeholder(s) but "+this.strings.length+" text segment(s)");Fe(this,"expressions"),this.strings.forEach(function(e){if("string"!=typeof e)throw new Error("strings must contain string")}),null!=this.tag&&x(this,"tag")}}),Nt=u("Constant",null,{$documentation:"Base class for all constants",_equals:function(e){return this.value===e.value},_validate:function(){if("Constant"==this.TYPE)throw new Error("should not instantiate AST_Constant")}}),Lt=u("String","quote value",{$documentation:"A string literal",$propdoc:{quote:"[string?] the original quote character",value:"[string] the contents of this string"},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},Nt),Rt=u("Number","value",{$documentation:"A number literal",$propdoc:{value:"[number] the numeric value"},_validate:function(){if("number"!=typeof this.value)throw new Error("value must be number");if(!isFinite(this.value))throw new Error("value must be finite");if(this.value<0)throw new Error("value cannot be negative")}},Nt),Mt=u("BigInt","value",{$documentation:"A BigInt literal",$propdoc:{value:"[string] the numeric representation"},_validate:function(){if("string"!=typeof this.value)throw new Error("value must be string");if("-"==this.value[0])throw new Error("value cannot be negative")}},Nt),jt=u("RegExp","value",{$documentation:"A regexp literal",$propdoc:{value:"[RegExp] the actual regexp"},_equals:function(e){return""+this.value==""+e.value},_validate:function(){if(!(this.value instanceof RegExp))throw new Error("value must be RegExp")}},Nt),Ft=u("Atom",null,{$documentation:"Base class for atoms",_equals:a,_validate:function(){if("Atom"==this.TYPE)throw new Error("should not instantiate AST_Atom")}},Nt),qt=u("Null",null,{$documentation:"The `null` atom",value:null},Ft),Bt=u("NaN",null,{$documentation:"The impossible value",value:NaN},Ft),Vt=u("Undefined",null,{$documentation:"The `undefined` value",value:void 0},Ft),zt=u("Hole",null,{$documentation:"A hole in an array",value:void 0},Ft),Ut=u("Infinity",null,{$documentation:"The `Infinity` value",value:1/0},Ft),$t=u("Boolean",null,{$documentation:"Base class for booleans",_validate:function(){if("Boolean"==this.TYPE)throw new Error("should not instantiate AST_Boolean")}},Ft),Ht=u("False",null,{$documentation:"The `false` atom",value:!1},$t),Gt=u("True",null,{$documentation:"The `true` atom",value:!0},$t);function Wt(e){this.callback=e,this.directives=Object.create(null),this.stack=[]}function Yt(e,t){Wt.call(this),this.before=e,this.after=t}return Wt.prototype={visit:function(e,t){this.push(e);var n=this.callback(e,t||r);!n&&t&&t(),this.pop()},parent:function(e){return this.stack[this.stack.length-2-(e||0)]},push:function(e){var t;e instanceof ie?(this.directives=Object.create(this.directives),t="use strict"):e instanceof _?t=e.value:e instanceof z&&(this.directives=Object.create(this.directives)),t&&!this.directives[t]&&(this.directives[t]=e),this.stack.push(e)},pop:function(){var e=this.stack.pop();(e instanceof ie||e instanceof z)&&(this.directives=Object.getPrototypeOf(this.directives))},self:function(){return this.stack[this.stack.length-1]},find_parent:function(e){for(var t=this.stack,n=t.length-1;--n>=0;){var i=t[n];if(i instanceof e)return i}},has_directive:function(e){var t=this.directives[e];if(t)return t;var n=this.stack[this.stack.length-1];if(n instanceof q)for(var i=0;i<n.body.length;++i){var r=n.body[i];if(!(r instanceof _))break;if(r.value==e)return r}},loopcontrol_target:function(e){var t=this.stack;if(e.label)for(var n=t.length;--n>=0;){var i=t[n];if(i instanceof C&&i.label.name==e.label.name)return i.body}else for(var n=t.length;--n>=0;){var i=t[n];if(i instanceof P||e instanceof _e&&i instanceof be)return i}},in_boolean_context:function(){for(var e,t=!0,n=0,i=this.self();e=this.parent(n++);i=e){if(e instanceof Je)switch(e.operator){case"&&":case"||":e.left===i&&(t=!1);continue;default:return!1}if(!(e instanceof Ke)){if(e instanceof O)return e.condition===i;if(e instanceof N)return e.condition===i;if(e instanceof ye)return e.condition===i;if(e instanceof de){if(e.in_bool)return!0;for(;e=this.parent(n++);)if(e instanceof z){if(e.name)return!1;if("Call"!=(e=this.parent(n++)).TYPE)return!1;break}}if(e instanceof Ve){if(e.tail_node()===i)continue;return!t||"d"}return e instanceof S?!t||"d":e instanceof We&&"!"==e.operator}if(e.condition===i)return!0}}},Yt.prototype=new Wt,function(e){function t(e,t){return n(e,function(e){return e.transform(t,!0)})}function i(e,n){e.argnames=t(e.argnames,n),e.rest&&(e.rest=e.rest.transform(n)),e.value?e.value=e.value.transform(n):e.body=t(e.body,n)}e(l,r),e(C,function(e,t){e.label=e.label.transform(t),e.body=e.body.transform(t)}),e(S,function(e,t){e.body=e.body.transform(t)}),e(A,function(e,n){e.body=t(e.body,n)}),e(D,function(e,t){e.body=e.body.transform(t),e.condition=e.condition.transform(t)}),e(I,function(e,t){e.condition=e.condition.transform(t),e.body=e.body.transform(t)}),e(N,function(e,t){e.init&&(e.init=e.init.transform(t)),e.condition&&(e.condition=e.condition.transform(t)),e.step&&(e.step=e.step.transform(t)),e.body=e.body.transform(t)}),e(L,function(e,t){e.init=e.init.transform(t),e.object=e.object.transform(t),e.body=e.body.transform(t)}),e(F,function(e,t){e.expression=e.expression.transform(t),e.body=e.body.transform(t)}),e(he,function(e,t){e.value&&(e.value=e.value.transform(t))}),e(ge,function(e,t){e.label&&(e.label=e.label.transform(t))}),e(ye,function(e,t){e.condition=e.condition.transform(t),e.body=e.body.transform(t),e.alternative&&(e.alternative=e.alternative.transform(t))}),e(be,function(e,n){e.expression=e.expression.transform(n),e.body=t(e.body,n)}),e(we,function(e,n){e.expression=e.expression.transform(n),e.body=t(e.body,n)}),e(ke,function(e,n){e.body=t(e.body,n),e.bcatch&&(e.bcatch=e.bcatch.transform(n)),e.bfinally&&(e.bfinally=e.bfinally.transform(n))}),e(Ae,function(e,n){e.argname&&(e.argname=e.argname.transform(n)),e.body=t(e.body,n)}),e(Ee,function(e,n){e.definitions=t(e.definitions,n)}),e(De,function(e,t){e.name=e.name.transform(t),e.value&&(e.value=e.value.transform(t))}),e(je,function(e,t){e.name=e.name.transform(t),e.value=e.value.transform(t)}),e(z,function(e,n){e.name&&(e.name=e.name.transform(n)),e.argnames=t(e.argnames,n),e.rest&&(e.rest=e.rest.transform(n)),e.body=t(e.body,n)}),e(G,i),e(W,i),e(ie,function(e,n){e.name&&(e.name=e.name.transform(n)),e.extends&&(e.extends=e.extends.transform(n)),e.properties=t(e.properties,n)}),e(ae,function(e,t){e.key instanceof l&&(e.key=e.key.transform(t)),e.value&&(e.value=e.value.transform(t))}),e(qe,function(e,n){e.expression=e.expression.transform(n),e.args=t(e.args,n)}),e(Ve,function(e,n){e.expressions=t(e.expressions,n)}),e(Qe,function(e,t){e.expression=e.expression.transform(t)}),e(Ze,function(e,t){e.expression&&(e.expression=e.expression.transform(t))}),e(Ue,function(e,t){e.expression=e.expression.transform(t)}),e($e,function(e,t){e.expression=e.expression.transform(t),e.property=e.property.transform(t)}),e(He,function(e,t){e.expression=e.expression.transform(t)}),e(Ge,function(e,t){e.expression=e.expression.transform(t)}),e(Je,function(e,t){e.left=e.left.transform(t),e.right=e.right.transform(t)}),e(Ke,function(e,t){e.condition=e.condition.transform(t),e.consequent=e.consequent.transform(t),e.alternative=e.alternative.transform(t)}),e(et,function(e,n){e.elements=t(e.elements,n)}),e(it,function(e,n){e.elements=t(e.elements,n),e.rest&&(e.rest=e.rest.transform(n))}),e(rt,function(e,t){e.key instanceof l&&(e.key=e.key.transform(t)),e.value=e.value.transform(t)}),e(st,function(e,n){e.properties=t(e.properties,n),e.rest&&(e.rest=e.rest.transform(n))}),e(at,function(e,n){e.properties=t(e.properties,n)}),e(ot,function(e,t){e.key instanceof l&&(e.key=e.key.transform(t)),e.value=e.value.transform(t)}),e(Ie,function(e,t){e.body=e.body.transform(t)}),e(Ne,function(e,t){e.body=e.body.transform(t)}),e(Re,function(e,n){e.properties=t(e.properties,n)}),e(Me,function(e,n){e.all&&(e.all=e.all.transform(n)),e.default&&(e.default=e.default.transform(n)),e.properties&&(e.properties=t(e.properties,n))}),e(It,function(e,n){e.tag&&(e.tag=e.tag.transform(n)),e.expressions=t(e.expressions,n)})}(function(e,t){e.DEFMETHOD("transform",function(e,n){var i,r;return e.push(this),e.before&&(i=e.before(this,t,n)),void 0===i&&(t(i=this,e),e.after&&void 0!==(r=e.after(i,n))&&(i=r)),e.pop(),i})}),c={parse:null,DEFNODE:u,AST_Token:f,AST_Node:l,AST_Statement:m,AST_Debugger:g,AST_Directive:_,AST_EmptyStatement:v,AST_SimpleStatement:S,AST_BlockScope:w,AST_Block:A,AST_BlockStatement:T,AST_StatementWithBody:E,AST_LabeledStatement:C,AST_IterationStatement:P,AST_DWLoop:O,AST_Do:D,AST_While:I,AST_For:N,AST_ForEnumeration:L,AST_ForIn:R,AST_ForOf:M,AST_ForAwaitOf:j,AST_With:F,AST_Scope:q,AST_Toplevel:B,AST_ClassInitBlock:V,AST_Lambda:z,AST_Accessor:U,AST_LambdaExpression:$,AST_Arrow:G,AST_AsyncArrow:W,AST_AsyncFunction:Y,AST_Function:K,AST_GeneratorFunction:X,AST_AsyncGeneratorFunction:J,AST_LambdaDefinition:Q,AST_AsyncDefun:Z,AST_AsyncGeneratorDefun:ee,AST_Defun:te,AST_GeneratorDefun:ne,AST_Class:ie,AST_DefClass:re,AST_ClassExpression:se,AST_ClassProperty:ae,AST_ClassField:oe,AST_ClassGetter:ce,AST_ClassSetter:ue,AST_ClassMethod:fe,AST_ClassInit:le,AST_Jump:pe,AST_Exit:he,AST_Return:de,AST_Throw:me,AST_LoopControl:ge,AST_Break:_e,AST_Continue:ve,AST_If:ye,AST_Switch:be,AST_SwitchBranch:xe,AST_Default:Se,AST_Case:we,AST_Try:ke,AST_Catch:Ae,AST_Finally:Te,AST_Definitions:Ee,AST_Const:Ce,AST_Let:Pe,AST_Var:Oe,AST_VarDef:De,AST_ExportDeclaration:Ie,AST_ExportDefault:Ne,AST_ExportForeign:Le,AST_ExportReferences:Re,AST_Import:Me,AST_DefaultValue:je,AST_Call:qe,AST_New:Be,AST_Sequence:Ve,AST_PropAccess:ze,AST_Dot:Ue,AST_Sub:$e,AST_Spread:He,AST_Unary:Ge,AST_UnaryPrefix:We,AST_UnaryPostfix:Ye,AST_Binary:Je,AST_Conditional:Ke,AST_Assign:Xe,AST_Await:Qe,AST_Yield:Ze,AST_Array:et,AST_Destructured:tt,AST_DestructuredArray:it,AST_DestructuredKeyVal:rt,AST_DestructuredObject:st,AST_Object:at,AST_ObjectProperty:ot,AST_ObjectKeyVal:ct,AST_ObjectMethod:ut,AST_ObjectSetter:ft,AST_ObjectGetter:lt,AST_Symbol:pt,AST_SymbolDeclaration:ht,AST_SymbolConst:dt,AST_SymbolImport:mt,AST_SymbolLet:gt,AST_SymbolVar:_t,AST_SymbolFunarg:vt,AST_SymbolDefun:yt,AST_SymbolLambda:bt,AST_SymbolDefClass:xt,AST_SymbolClass:St,AST_SymbolCatch:wt,AST_Label:kt,AST_SymbolRef:At,AST_SymbolExport:Tt,AST_LabelRef:Et,AST_ObjectIdentity:Ct,AST_Super:Pt,AST_This:Ot,AST_NewTarget:Dt,AST_Template:It,AST_Constant:Nt,AST_String:Lt,AST_Number:Rt,AST_BigInt:Mt,AST_RegExp:jt,AST_Atom:Ft,AST_Null:qt,AST_NaN:Bt,AST_Undefined:Vt,AST_Hole:zt,AST_Infinity:Ut,AST_Boolean:$t,AST_False:Ht,AST_True:Gt,first_in_statement:function(e,t,n){for(var i,r=e.parent(-1),s=0;i=e.parent(s++);r=i){if(H(i))return t&&i.value===r;if(i instanceof Je){if(i.left===r)continue}else if("Call"==i.TYPE){if(i.expression===r)continue}else if(i instanceof Ke){if(i.condition===r)continue}else{if(i instanceof Ne)return n;if(i instanceof ze){if(i.expression===r)continue}else if(i instanceof Ve){if(i.expressions[0]===r)continue}else{if(i instanceof S)return!0;if(i instanceof It){if(i.tag===r)continue}else if(i instanceof Ye&&i.expression===r)continue}}return!1}},is_arrow:H,is_generator:function(e){return e instanceof ee||e instanceof J||e instanceof ne||e instanceof X},walk_lambda:function(e,t){H(e)&&e.value?e.value.walk(t):k(e,t)},walk_body:k,TreeWalker:Wt,TreeTransformer:Yt}}),define("skylark-uglifyjs/parse",["./utils","./ast"],function(e,t){"use strict";const{characters:n,defaults:i,makePredicate:r,set_annotation:s,configure_error_stack:a,HOP:o,all:c}=e,{AST_Accessor:u,AST_Array:f,AST_Arrow:l,AST_Assign:p,AST_Await:h,AST_BigInt:d,AST_Binary:m,AST_BlockStatement:g,AST_Break:_,AST_Call:v,AST_Case:y,AST_Catch:b,AST_Chain:x,AST_ClassExpression:S,AST_ClassPrivateProperty:w,AST_ClassProperty:k,AST_ClassStaticBlock:A,AST_ConciseMethod:T,AST_PrivateIn:E,AST_PrivateGetter:C,AST_PrivateMethod:P,AST_PrivateSetter:O,AST_Conditional:D,AST_Const:I,AST_Continue:N,AST_Debugger:L,AST_Default:R,AST_DefaultAssign:M,AST_DefClass:j,AST_Definitions:F,AST_Defun:q,AST_Destructuring:B,AST_Directive:V,AST_Do:z,AST_Dot:U,AST_DotHash:$,AST_EmptyStatement:H,AST_Expansion:G,AST_Export:W,AST_False:Y,AST_Finally:J,AST_For:K,AST_ForIn:X,AST_ForOf:Q,AST_Function:Z,AST_Hole:ee,AST_If:te,AST_Import:ne,AST_ImportMeta:ie,AST_IterationStatement:re,AST_Label:se,AST_LabeledStatement:ae,AST_LabelRef:oe,AST_Let:ce,AST_NameMapping:ue,AST_New:fe,AST_NewTarget:le,AST_Node:pe,AST_Null:he,AST_Number:de,AST_Object:me,AST_ObjectGetter:ge,AST_ObjectKeyVal:_e,AST_ObjectProperty:ve,AST_ObjectSetter:ye,AST_PrefixedTemplateString:be,AST_PropAccess:xe,AST_RegExp:Se,AST_Return:we,AST_Sequence:ke,AST_SimpleStatement:Ae,AST_String:Te,AST_Sub:Ee,AST_Super:Ce,AST_Switch:Pe,AST_SymbolCatch:Oe,AST_SymbolClass:De,AST_SymbolClassProperty:Ie,AST_SymbolConst:Ne,AST_SymbolDeclaration:Le,AST_SymbolDefClass:Re,AST_SymbolDefun:Me,AST_SymbolExport:je,AST_SymbolExportForeign:Fe,AST_SymbolFunarg:qe,AST_SymbolImport:Be,AST_SymbolImportForeign:Ve,AST_SymbolLambda:ze,AST_SymbolLet:Ue,AST_SymbolMethod:$e,AST_SymbolRef:He,AST_SymbolVar:Ge,AST_TemplateSegment:We,AST_TemplateString:Ye,AST_This:Je,AST_SymbolPrivateProperty:Ke,AST_Throw:Xe,AST_Token:Qe,AST_Toplevel:Ze,AST_True:et,AST_Try:tt,AST_TryBlock:nt,AST_UnaryPostfix:it,AST_UnaryPrefix:rt,AST_Var:st,AST_VarDef:at,AST_While:ot,AST_With:ct,AST_Yield:ut,_INLINE:ft,_NOINLINE:lt,_PURE:pt,_KEY:ht,_MANGLEPROP:dt}=t;var mt="break case catch class const continue debugger default delete do else extends finally for function if in instanceof new return switch throw try typeof var void while with",gt="false null true",_t=["abstract async await boolean byte char double enum export final float goto implements import int interface let long native package private protected public short static super synchronized this throws transient volatile yield",gt,mt].join(" "),vt="return new delete throw else case";mt=r(mt),_t=r(_t),vt=r(vt),gt=r(gt);var yt=/^0b([01]+)$/i,bt=/^0x([0-9a-f]+)$/i,xt=/^0o?([0-7]+)$/i,St=r(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%","**",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=","**=",">>=","<<=",">>>=","&=","|=","^=","&&","||","??","&&=","||=","??="]),wt="\n\r\u2028\u2029",kt="+-*&%=<>!?|~^",At=",;:)}]",Tt="[{(,;:",Et=Tt+"`)}]",Ct=wt+"  \t\f\v​             　\ufeff",Pt=r(n("./'\"#"+kt+Et+Ct));function Ot(e){return e>=48&&e<=57}function Dt(e){return!Pt[e]}function It(e){return/^[a-z_$][a-z0-9_$]*$/i.test(e)}function Nt(e,t,n,i,r){this.message=e,this.filename=t,this.line=n,this.col=i,this.pos=r}function Lt(e,t,n,i,r){throw new Nt(e,t,n,i,r)}function Rt(e,t,n){return e.type==t&&(null==n||e.value==n)}wt=r(n(wt)),kt=r(n(kt)),At=r(n(At)),Tt=r(n(Tt)),Et=r(n(Et)),Ct=r(n(Ct)),Nt.prototype=Object.create(Error.prototype),Nt.prototype.constructor=Nt,Nt.prototype.name="SyntaxError",a(Nt);var Mt={};function jt(e,t,n,i){var r={text:e,filename:t,pos:0,tokpos:0,line:1,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[],directives:Object.create(null),read_template:T("Unterminated template literal",function(e){for(var t="";;){var n=i();switch(n){case"\\":n+=i();break;case"`":return void e.push(t);case"$":if("{"==a())return o(),e.push(t),r.regex_allowed=!0,!0}t+=n}function i(){var e=o(!0,!0);return"\r"==e?"\n":e}})},s=!1;function a(){return r.text.charAt(r.pos)}function o(e,t){var n=r.text.charAt(r.pos++);if(e&&!n)throw Mt;return wt[n]?(r.col=0,r.line++,t||(r.newline_before=!0),"\r"==n&&"\n"==a()&&(r.pos++,n="\n")):r.col++,n}function c(e){for(;e-- >0;)o()}function u(e){return r.text.substr(r.pos,e.length)==e}function f(){r.tokline=r.line,r.tokcol=r.col,r.tokpos=r.pos}function l(n,i,a){r.regex_allowed="operator"==n&&!qt[i]||"keyword"==n&&vt[i]||"punc"==n&&Tt[i],"punc"==n&&"."==i?s=!0:a||(s=!1);var o={type:n,value:i,line:r.tokline,col:r.tokcol,pos:r.tokpos,endline:r.line,endcol:r.col,endpos:r.pos,nlb:r.newline_before,file:t};return/^(?:num|string|regexp)$/i.test(n)&&(o.raw=e.substring(o.pos,o.endpos)),a||(o.comments_before=r.comments_before,o.comments_after=r.comments_before=[]),r.newline_before=!1,new Qe(o)}function p(){for(;Ct[a()];)o()}function h(e){Lt(e,t,r.tokline,r.tokcol,r.tokpos)}function d(e){return/^0[0-7_]+$/.test(e)}function m(e){var t=!1,n=!1,i=!1,r="."==e,s=function(e){var t,n="";for(;(t=a())&&e(t,n);)n+=o();return n}(function(e,s){switch(e){case"x":case"X":return!i&&(i=!0);case"e":case"E":return!!i||!t&&(t=n=!0);case"+":case"-":return n;case n=!1,".":return!(r||t||i||d(s))&&(r=!0)}return/[_0-9a-dfo]/i.test(e)});e&&(s=e+s),d(s)?E.has_directive("use strict")&&h("Legacy octal literals are not allowed in strict mode"):s=s.replace(i?/([1-9a-f]|.0)_(?=[0-9a-f])/gi:/([1-9]|.0)_(?=[0-9])/gi,"$1");var c=function(e){var t;if(t=yt.exec(e))return parseInt(t[1],2);if(t=bt.exec(e))return parseInt(t[1],16);if(t=xt.exec(e))return parseInt(t[1],8);var n=parseFloat(e);if(n==e)return n}(s);return isNaN(c)&&h("Invalid syntax: "+s),r||t||"n"!=a()?l("num",c):l("bigint",s.toLowerCase()+o())}function g(e){var t=o(!0,e);if(t>="0"&&t<="7")return function(e){var t=a();t>="0"&&t<="7"&&(e+=o(!0))[0]<="3"&&(t=a())>="0"&&t<="7"&&(e+=o(!0));if("0"===e)return"\0";e.length>0&&E.has_directive("use strict")&&h("Legacy octal escape sequences are not allowed in strict mode");return String.fromCharCode(parseInt(e,8))}(t);if("u"==t){var n=o(!0,e);if(t+=n,"{"!=n)t+=o(!0,e)+o(!0,e)+o(!0,e);else do{n=o(!0,e),t+=n}while("}"!=n)}else"x"==t&&(t+=o(!0,e)+o(!0,e));var i=function(e){switch(e[0]){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"u":var t;if("{"==e[1]&&"}"==e.slice(-1))t=e.slice(2,-1);else{if(5!=e.length)return;t=e.slice(1)}var n=parseInt(t,16);if(n<0||isNaN(n))return;if(n<65536)return String.fromCharCode(n);if(n>1114111)return;return String.fromCharCode(55232+(n>>10))+String.fromCharCode(56320+(1023&n));case"v":return"\v";case"x":if(3!=e.length)return;var n=parseInt(e.slice(1),16);if(n<0||isNaN(n))return;return String.fromCharCode(n);case"\r":case"\n":return"";default:if("0"==e)return"\0";if(e[0]>="0"&&e[0]<="9")return;return e}}(t);return"string"!=typeof i&&h("Invalid escape sequence: \\"+t),i}var _=T("Unterminated string constant",function(e){for(var t=o(),n="";;){var i=o(!0,!0);if("\\"==i)i=g(!0);else if(wt[i])h("Unterminated string constant");else if(i==t)break;n+=i}var r=l("string",n);return r.quote=e,r});function v(e){var t,n=r.regex_allowed,i=function(){for(var e=r.text,t=r.pos;t<r.text.length;++t)if(wt[e[t]])return t;return-1}();return-1==i?(t=r.text.substr(r.pos),r.pos=r.text.length):(t=r.text.substring(r.pos,i),r.pos=i),r.col=r.tokcol+(r.pos-r.tokpos),r.comments_before.push(l(e,t,!0)),r.regex_allowed=n,E}var y=T("Unterminated multiline comment",function(){var e=r.regex_allowed,t=function(e,t){var n=r.text.indexOf(e,r.pos);if(t&&-1==n)throw Mt;return n}("*/",!0),n=r.text.substring(r.pos,t).replace(/\r\n|\r|\u2028|\u2029/g,"\n");return c(n.length+2),r.comments_before.push(l("comment2",n,!0)),r.regex_allowed=e,E});function b(){for(var e,t=!1,n=!1,i="#"==a()?o():"";e=a();)if(t)"u"!=e&&h("Expecting UnicodeEscapeSequence -- uXXXX"),Dt(e=g())||h("Unicode char: "+e.charCodeAt(0)+" is not valid in identifier"),i+=e,t=!1;else if("\\"==e)n=t=!0,o();else{if(!Dt(e))break;i+=o()}if(mt[i]&&n){var r=i.charCodeAt(0).toString(16).toUpperCase();i="\\u"+"0000".substr(r.length)+r+i.slice(1)}return i}var x=T("Unterminated regular expression",function(e){for(var t,n=!1,i=!1;t=o(!0);)if(wt[t])h("Unexpected line terminator");else if(n)e+="\\"+t,n=!1;else if("["==t)i=!0,e+=t;else if("]"==t&&i)i=!1,e+=t;else{if("/"==t&&!i)break;"\\"==t?n=!0:e+=t}var r=b();try{var s=new RegExp(e,r);return s.raw_source=e,l("regexp",s)}catch(e){h(e.message)}});function S(e){return l("operator",function e(t){if(!a())return t;var n=t+a();return St[n]?(o(),e(n)):t}(e||o()))}function w(){switch(o(),a()){case"/":return o(),v("comment1");case"*":return o(),y()}return r.regex_allowed?x(""):S("/")}function k(){return o(),u("..")?l("operator","."+o()+o()):Ot(a().charCodeAt(0))?m("."):l("punc",".")}function A(){var e=b();return s?l("name",e):gt[e]?l("atom",e):mt[e]?St[e]?l("operator",e):l("keyword",e):l("name",e)}function T(e,t){return function(n){try{return t(n)}catch(t){if(t!==Mt)throw t;h(e)}}}function E(e){if(null!=e)return x(e);for(i&&0==r.pos&&u("#!")&&(f(),c(2),v("comment5"));;){if(p(),f(),n){if(u("\x3c!--")){c(4),v("comment3");continue}if(u("--\x3e")&&r.newline_before){c(3),v("comment4");continue}}var t=a();if(!t)return l("eof");var s=t.charCodeAt(0);switch(s){case 34:case 39:return _(t);case 46:return k();case 47:var d=w();if(d===E)continue;return d}if(Ot(s))return m();if(Et[t])return l("punc",o());if(u("=>"))return l("punc",o()+o());if(kt[t])return S();if(35==s||92==s||!Pt[t])return A();break}h("Unexpected character '"+t+"'")}return E.context=function(e){return e&&(r=e),r},E.add_directive=function(e){r.directives[e]=!0},E.push_directives_stack=function(){r.directives=Object.create(r.directives)},E.pop_directives_stack=function(){r.directives=Object.getPrototypeOf(r.directives)},E.has_directive=function(e){return!!r.directives[e]},E}var Ft=r("typeof void delete -- ++ ! ~ - +"),qt=r("-- ++"),Bt=r("= += -= /= *= %= **= >>= <<= >>>= &= |= ^= &&= ||= ??="),Vt=function(e,t){for(var n=0;n<e.length;)for(var i=e[n++],r=0;r<i.length;r++)t[i[r]]=n;return t}([["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"],["**"]],{}),zt=r("atom bigint num regexp string");function Ut(e,t){t=i(t,{bare_returns:!1,expression:!1,filename:null,html5_comments:!0,module:!1,shebang:!0,strict:!1,toplevel:null},!0);var n={input:"string"==typeof e?jt(e,t.filename,t.html5_comments,t.shebang):e,in_async:!1,in_directives:!0,in_funarg:-1,in_function:0,in_generator:!1,in_loop:0,labels:[],peeked:null,prev:null,token:null};function r(e,t){return Rt(n.token,e,t)}function s(){return n.peeked||(n.peeked=n.input())}function a(){return n.prev=n.token,n.peeked?(n.token=n.peeked,n.peeked=null):n.token=n.input(),n.in_directives=n.in_directives&&("string"==n.token.type||r("punc",";")),n.token}function x(){return n.prev}function w(e,t,i,r){var s=n.input.context();Lt(e,s.filename,null!=t?t:s.tokline,null!=i?i:s.tokcol,null!=r?r:s.tokpos)}function k(e,t){w(t,e.line,e.col)}function A(e,t){return e+(void 0===t?"":" «"+t+"»")}function T(e){null==e&&(e=n.token),k(e,"Unexpected token: "+A(e.type,e.value))}function E(e,t){if(r(e,t))return a();k(n.token,"Unexpected token: "+A(n.token.type,n.token.value)+", expected: "+A(e,t))}function C(e){return E("punc",e)}function P(e){return e.nlb||!c(e.comments_before,function(e){return!e.nlb})}function O(){return!t.strict&&(r("eof")||r("punc","}")||P(n.token))}function M(e){r("punc",";")?a():e||O()||C(";")}function B(){C("(");var e=Wt();return C(")"),e}function $(e){return function(){var t=n.token,i=e.apply(null,arguments),r=x();return i.start=t,i.end=r,i}}function G(){(r("operator","/")||r("operator","/="))&&(n.peeked=null,n.token=n.input(n.token.value.substr(1)))}n.token=a();var W=$(function(e){switch(G(),n.token.type){case"string":var i=n.in_directives,o=Wt();if(i)if(o instanceof Te){var u=o.start.raw.slice(1,-1);n.input.add_directive(u),o.value=u}else n.in_directives=i=!1;return M(),i?new V(o):new Ae({body:o});case"num":case"bigint":case"regexp":case"operator":case"atom":return ie();case"name":switch(n.token.value){case"async":if(Rt(s(),"keyword","function"))return a(),a(),r("operator","*")?(a(),Fe(AST_AsyncGeneratorDefun)):Fe(AST_AsyncDefun);break;case"await":if(n.in_async)return ie();break;case"export":return e||""===t.module||T(),a(),function(){if(r("operator","*")){var e=n.token,t=e;return a(),r("name","as")&&(a(),Ve()||E("name"),t=n.token,a()),E("name","from"),new AST_ExportForeign({aliases:[$e(t)],keys:[$e(e)],path:We()})}if(r("punc","{")){a();for(var i=[],o=[];Ve();){var e=n.token;a(),o.push(e),r("name","as")?(a(),Ve()||E("name"),i.push(n.token),a()):i.push(e),r("punc","}")||C(",")}return C("}"),r("name","from")?(a(),new AST_ExportForeign({aliases:i.map($e),keys:o.map($e),path:We()})):(M(),new AST_ExportReferences({properties:o.map(function(e,t){Rt(e,"name")||k(e,"Name expected");var n=wt(je,e);return n.alias=$e(i[t]),n})}))}if(r("keyword","default")){a();var c=n.token,u=function(){if(r("name","async")){if(!Rt(s(),"keyword","function"))return;return a(),a(),r("operator","*")?(a(),Ye(AST_AsyncGeneratorDefun,Fe(AST_AsyncGeneratorFunction))):Ye(AST_AsyncDefun,Fe(AST_AsyncFunction))}if(r("keyword"))switch(n.token.value){case"class":return a(),Ye(j,ve(S));case"function":return a(),r("operator","*")?(a(),Ye(AST_GeneratorDefun,Fe(AST_GeneratorFunction))):Ye(q,Fe(Z))}}();return u?(u.start=c,u.end=x()):(G(),u=Wt(),M()),new AST_ExportDefault({body:u})}return new AST_ExportDeclaration({body:Ke()})}();case"import":var f=s();if("punc"==f.type&&/^[(.]$/.test(f.value))break;return e||""===t.module||T(),a(),function(){var e,t=null,i=Tt(Be,!0),o=null;i?(i.key=new Te({start:i.start,value:"",end:i.end}),(e=r("punc",","))&&a()):e=!r("string");if(e)if(r("operator","*")){var c=n.token;a(),E("name","as"),(t=Tt(Be)).key=$e(c)}else{for(C("{"),o=[];Ve();){var u;if(Rt(s(),"name","as")){var c=n.token;a(),a(),(u=Tt(Be)).key=$e(c)}else(u=Tt(Be)).key=new Te({start:u.start,value:u.name,end:u.end});o.push(u),r("punc","}")||C(",")}C("}")}(t||i||o)&&E("name","from");return new ne({all:t,default:i,path:We(),properties:o})}();case"let":if(lt()){a();var l=ht();return M(),l}break;case"yield":if(n.in_generator)return ie()}return Rt(s(),"punc",":")?function(){var e=Tt(se);c(n.labels,function(t){return t.name!=e.name})||w("Label "+e.name+" defined twice");C(":"),n.labels.push(e);var t=W();n.labels.pop(),t instanceof re||e.references.forEach(function(t){t instanceof N&&k(t.label.start,"Continue label `"+e.name+"` must refer to IterationStatement")});return new ae({body:t,label:e})}():ie();case"punc":switch(n.token.value){case"{":return new g({start:n.token,body:Qe(),end:x()});case"[":case"(":case"`":return ie();case";":return n.in_directives=!1,a(),new H;default:T()}case"keyword":switch(n.token.value){case"break":return a(),ue(_);case"class":return a(),ve(j);case"const":a();var l=pt();return M(),l;case"continue":return a(),ue(N);case"debugger":return a(),M(),new L;case"do":a();var o=Yt(W);E("keyword","while");var p=B();return M(!0),new z({body:o,condition:p});case"while":return a(),new ot({condition:B(),body:Yt(W)});case"for":return a(),function(){var e=r("name","await")&&a();C("(");var t=null;if(e||!r("punc",";")){var n;if(t=r("keyword","const")?(a(),pt(!0)):r("name","let")&&lt()?(a(),ht(!0)):r("keyword","var")?(a(),dt(!0)):Wt(!0),e?(E("name","of"),n=AST_ForAwaitOf):r("operator","in")?(a(),n=X):r("name","of")&&(a(),n=Q),n)return t instanceof F?(t.definitions.length>1&&k(t.start,"Only one variable declaration allowed in for..in/of loop"),n!==X&&t.definitions[0].value&&k(t.definitions[0].value.start,"No initializers allowed in for..of loop")):$t(t)||(t=Ht(t))instanceof AST_Destructured||k(t.start,"Invalid left-hand side in for..in/of loop"),function(e,t){G();var n=Wt();return C(")"),new e({init:t,object:n,body:Yt(W)})}(n,t)}return function(e){C(";");var t=r("punc",";")?null:Wt();C(";");var n=r("punc",")")?null:Wt();return C(")"),new K({init:e,condition:t,step:n,body:Yt(W)})}(t)}();case"function":return a(),r("operator","*")?(a(),Fe(AST_GeneratorDefun)):Fe(q);case"if":return a(),function(){var e=B(),t=W(),n=null;r("keyword","else")&&(a(),n=W());return new te({condition:e,body:t,alternative:n})}();case"return":0!=n.in_function||t.bare_returns||w("'return' outside of function"),a();var u=null;return r("punc",";")?a():O()||(u=Wt(),M()),new we({value:u});case"switch":return a(),new Pe({expression:B(),body:Yt(nt)});case"throw":a(),P(n.token)&&w("Illegal newline after 'throw'");var u=Wt();return M(),new Xe({value:u});case"try":return a(),function(){var e=Qe(),t=null,i=null;if(r("keyword","catch")){var s=n.token;a();var o=null;r("punc","(")&&(a(),o=Et(Oe),C(")")),t=new b({start:s,argname:o,body:Qe(),end:x()})}if(r("keyword","finally")){var s=n.token;a(),i=new J({start:s,body:Qe(),end:x()})}t||i||w("Missing catch/finally blocks");return new tt({body:e,bcatch:t,bfinally:i})}();case"var":a();var l=dt();return M(),l;case"with":return n.input.has_directive("use strict")&&w("Strict mode may not include a with statement"),a(),new ct({expression:B(),body:W()})}}T()});function ie(){var e=Wt();return M(),new Ae({body:e})}function ue(e){var t,i=null;O()||(i=Tt(oe,!0)),null!=i?((t=find_if(function(e){return e.name==i.name},n.labels))||k(i.start,"Undefined label "+i.name),i.thedef=t):0==n.in_loop&&w(e.TYPE+" not inside a loop or switch"),M();var r=new e({label:i});return t&&t.references.push(r),r}function pe(e,t){if(r("name",e)){var n=s();if(n&&!Rt(n,"operator","=")&&!("punc"==n.type&&/^[(;}]$/.test(n.value)||t&&P(n)))return a()}}function ve(e){var t,i=n.in_async,s=n.in_generator;n.input.push_directives_stack(),n.input.add_directive("use strict"),t=e===j?Tt(Re):Tt(De,!0);var o=null;r("keyword","extends")&&(a(),G(),o=gt(!0)),C("{");for(var c=[];!r("punc","}");)if(r("punc",";"))a();else{var u=n.token,f=!!pe("static"),l=pe("async",!0);if(r("operator","*")){a();var p=r("name")&&/^#/.test(n.token.value),h=xt(),d=n.token,m=Fe(l?AST_AsyncGeneratorFunction:AST_GeneratorFunction);m.start=d,m.end=x(),c.push(new AST_ClassMethod({start:u,static:f,private:p,key:h,value:m,end:x()}))}else if(f&&r("punc","{"))c.push(new AST_ClassInit({start:u,value:new AST_ClassInitBlock({start:u,body:Qe(),end:x()}),end:x()}));else{var p=r("name")&&/^#/.test(n.token.value),h=xt();if(r("punc","(")){var g=n.token,_=Fe(l?AST_AsyncFunction:Z);_.start=g,_.end=x(),c.push(new AST_ClassMethod({start:u,static:f,private:p,key:h,value:_,end:x()}))}else{l&&T(l);var v=null;if(r("operator","="))a(),n.in_async=!1,n.in_generator=!1,v=Gt(),n.in_generator=s,n.in_async=i;else if(!r("punc",";")&&!r("punc","}")){var y=null;switch(h){case"get":y=AST_ClassGetter;break;case"set":y=AST_ClassSetter}if(y){c.push(new y({start:u,static:f,private:r("name")&&/^#/.test(n.token.value),key:xt(),value:yt(),end:x()}));continue}}M(),c.push(new AST_ClassField({start:u,static:f,private:p,key:h,value:v,end:x()}))}}}return a(),n.input.pop_directives_stack(),n.in_generator=s,n.in_async=i,new e({extends:o,name:t,properties:c})}function be(e){if(e instanceof f){var t=null;return e.elements[e.elements.length-1]instanceof AST_Spread&&(t=be(e.elements.pop().expression)),new AST_DestructuredArray({start:e.start,elements:e.elements.map(be),rest:t,end:e.end})}if(e instanceof p)return new AST_DefaultValue({start:e.start,name:be(e.left),value:e.right,end:e.end});if(e instanceof AST_DefaultValue)return e.name=be(e.name),e;if(e instanceof AST_DestructuredArray)return e.elements=e.elements.map(be),e.rest&&(e.rest=be(e.rest)),e;if(e instanceof AST_DestructuredObject)return e.properties.forEach(function(e){e.value=be(e.value)}),e.rest&&(e.rest=be(e.rest)),e;if(e instanceof ee)return e;if(e instanceof me){var t=null;return e.properties[e.properties.length-1]instanceof AST_Spread&&(t=be(e.properties.pop().expression)),new AST_DestructuredObject({start:e.start,properties:e.properties.map(function(e){return e instanceof _e||k(e.start,"Invalid destructuring assignment"),new AST_DestructuredKeyVal({start:e.start,key:e.key,value:be(e.value),end:e.end})}),rest:t,end:e.end})}return e instanceof qe?e:e instanceof He?new qe(e):e instanceof ut?new qe({start:e.start,name:"yield",end:e.end}):void k(e.start,"Invalid arrow parameter")}function Ie(e,t,i){var s=n.in_async,a=n.in_generator;n.in_async=i,n.in_generator=!1;var o=n.in_funarg;n.in_funarg=n.in_function;var c,u,f=e.map(be),p=e.rest||null;p&&(p=be(p)),n.in_funarg=o,C("=>");var h=n.in_loop,d=n.labels;++n.in_function,n.input.push_directives_stack(),n.in_loop=0,n.labels=[],r("punc","{")?(n.in_directives=!0,c=Qe(),u=null):(c=[],G(),u=Gt());var m=n.input.has_directive("use strict");n.input.pop_directives_stack(),--n.in_function,n.in_loop=h,n.labels=d,n.in_generator=a,n.in_async=s;var g=new(i?AST_AsyncArrow:l)({start:t,argnames:f,rest:p,body:c,value:u,end:x()});return m&&g.each_argname(kt),g}var Fe=function(e){var i,r=n.in_async,s=n.in_generator;/Defun$/.test(e.TYPE)?(i=Tt(Me),n.in_async=/^Async/.test(e.TYPE),n.in_generator=/Generator/.test(e.TYPE)):(n.in_async=/^Async/.test(e.TYPE),n.in_generator=/Generator/.test(e.TYPE),i=Tt(ze,!0)),!i||e===u||i instanceof Le||T(x()),C("(");var a=n.in_funarg;n.in_funarg=n.in_function;var o=_t(")",!t.strict,!1,function(){return Ct(qe)});n.in_funarg=a;var c=n.in_loop,f=n.labels;++n.in_function,n.in_directives=!0,n.input.push_directives_stack(),n.in_loop=0,n.labels=[];var l=Qe(),p=n.input.has_directive("use strict");n.input.pop_directives_stack(),--n.in_function,n.in_loop=c,n.labels=f,n.in_generator=s,n.in_async=r;var h=new e({name:i,argnames:o,rest:o.rest||null,body:l});return p&&(i&&kt(i),h.each_argname(kt)),h};function Ve(){return r("name")||r("string")||It(n.token.value)}function $e(e){return new Te({start:e,quote:e.quote,value:e.value,end:e})}function We(){var e=n.token;return E("string"),M(),$e(e)}function Ye(e,t){return t.name&&((t=new e(t)).name=new(e===j?Re:Me)(t.name)),t}var Ke=$(function(){if(r("name"))switch(n.token.value){case"async":return a(),E("keyword","function"),r("operator","*")?(a(),Fe(AST_AsyncGeneratorDefun)):Fe(AST_AsyncDefun);case"let":a();var e=ht();return M(),e}else if(r("keyword"))switch(n.token.value){case"class":return a(),ve(j);case"const":a();var e=pt();return M(),e;case"function":return a(),r("operator","*")?(a(),Fe(AST_GeneratorDefun)):Fe(q);case"var":a();var e=dt();return M(),e}T()});function Qe(){C("{");for(var e=[];!r("punc","}");)r("eof")&&C("}"),e.push(W());return a(),e}function nt(){C("{");for(var e,t,i,s,o=[];!r("punc","}");)r("eof")&&C("}"),r("keyword","case")?(e&&(e.end=x()),t=[],e=new y({start:(s=n.token,a(),s),expression:Wt(),body:t}),o.push(e),C(":")):r("keyword","default")?(e&&(e.end=x()),i&&w("More than one default clause in switch statement"),t=[],e=new R({start:(s=n.token,a(),C(":"),s),body:t}),o.push(e),i=e):(t||T(),t.push(W()));return e&&(e.end=x()),a(),o}function ft(e,t){for(var i=[];;){var s=n.token,o=Et(e),c=null;if(r("operator","=")?(a(),c=Gt(t)):!t&&(e===Ne||o instanceof AST_Destructured)&&w("Missing initializer in declaration"),i.push(new at({start:s,name:o,value:c,end:x()})),!r("punc",","))break;a()}return i}function lt(){var e=s();return Rt(e,"name")||Rt(e,"punc","[")||Rt(e,"punc","{")}var pt=function(e){return new I({start:x(),definitions:ft(Ne,e),end:x()})},ht=function(e){return new ce({start:x(),definitions:ft(Ue,e),end:x()})},dt=function(e){return new st({start:x(),definitions:ft(Ge,e),end:x()})};var gt=function(e){if(r("operator","new"))return function(e){var i,o=n.token;if(E("operator","new"),r("punc",".")&&Rt(s(),"name","target"))a(),a(),i=new le;else{var c,u=gt(!1);r("punc","(")?(a(),c=_t(")",!t.strict)):c=[],i=new fe({expression:u,args:c})}return i.start=o,i.end=x(),Ot(i,e)}(e);var i=n.token;if(r("punc")){switch(i.value){case"`":return Ot(Pt(null),e);case"(":if(a(),r("punc",")"))return a(),Ie([],i);var o=Wt(!1,!0),c=i.comments_before.length;if([].unshift.apply(o.start.comments_before,i.comments_before),i.comments_before.length=0,i.comments_before=o.start.comments_before,i.comments_before_length=c,0==c&&i.comments_before.length>0){var u=i.comments_before[0];u.nlb||(u.nlb=i.nlb,i.nlb=!1)}i.comments_after=o.start.comments_after,o.start=i,C(")");var f=x();return f.comments_before=o.end.comments_before,f.comments_after.forEach(function(e){o.end.comments_after.push(e),e.nlb&&(n.token.nlb=!0)}),f.comments_after.length=0,f.comments_after=o.end.comments_after,o.end=f,r("punc","=>")?Ie(o instanceof ke?o.expressions:[o],i):Ot(o,e);case"[":return Ot(vt(),e);case"{":return Ot(bt(),e)}T()}if(r("keyword"))switch(i.value){case"class":a();var l=ve(S);return l.start=i,l.end=x(),Ot(l,e);case"function":return a(),r("operator","*")?(a(),h=Fe(AST_GeneratorFunction)):h=Fe(Z),h.start=i,h.end=x(),Ot(h,e)}if(r("name")){var p=wt(He,i);if(a(),"async"==p.name){var h;if(r("keyword","function"))return a(),r("operator","*")?(a(),h=Fe(AST_AsyncGeneratorFunction)):h=Fe(AST_AsyncFunction),h.start=i,h.end=x(),Ot(h,e);if(r("name")&&Rt(s(),"punc","=>"))return i=n.token,p=wt(He,i),a(),Ie([p],i,!0);if(r("punc","(")){var m=Ot(p,e);if(!r("punc","=>"))return m;var g=m.args;return g[g.length-1]instanceof AST_Spread&&(g.rest=g.pop().expression),Ie(g,i,!0)}}return r("punc","=>")?Ie([p],i):Ot(p,e)}if(zt[n.token.type])return Ot(function(){var e,t=n.token,i=t.value;switch(t.type){case"num":isFinite(i)?e=new de({value:i}):(e=new AST_Infinity,i<0&&(e=new rt({operator:"-",expression:e})));break;case"bigint":e=new d({value:i});break;case"string":e=new Te({value:i,quote:t.quote});break;case"regexp":e=new Se({value:i});break;case"atom":switch(i){case"false":e=new Y;break;case"true":e=new et;break;case"null":e=new he;break;default:T()}break;default:T()}return a(),e.start=e.end=t,e}(),e);T()};function _t(e,t,i,s){s||(s=Gt);for(var o=!0,c=[];!r("punc",e)&&(o?o=!1:C(","),!t||!r("punc",e));)if(i&&r("punc",","))c.push(new ee({start:n.token,end:n.token}));else if(r("operator","...")){if(s!==Gt){a(),c.rest=s(),c.rest instanceof AST_DefaultValue&&k(c.rest.start,"Invalid rest parameter");break}c.push(new AST_Spread({start:n.token,expression:(a(),s()),end:x()}))}else c.push(s());return C(e),c}var vt=$(function(){return C("["),new f({elements:_t("]",!t.strict,!0)})}),yt=$(function(){return Fe(u)}),bt=$(function(){C("{");for(var e=!0,i=[];!r("punc","}")&&(e?e=!1:C(","),t.strict||!r("punc","}"));){var o=n.token;if(r("operator","*")){a();var c=xt(),u=n.token,f=Fe(AST_GeneratorFunction);f.start=u,f.end=x(),i.push(new AST_ObjectMethod({start:o,key:c,value:f,end:x()}))}else if(r("operator","..."))a(),i.push(new AST_Spread({start:o,expression:Gt(),end:x()}));else if(Rt(s(),"operator","=")){var l=Tt(He);a(),i.push(new _e({start:o,key:o.value,value:new p({start:o,left:l,operator:"=",right:Gt(),end:x()}),end:x()}))}else if(Rt(s(),"punc",",")||Rt(s(),"punc","}"))i.push(new _e({start:o,key:o.value,value:Tt(He),end:x()}));else{var c=xt();if(r("punc","(")){var h=n.token,d=Fe(Z);d.start=h,d.end=x(),i.push(new AST_ObjectMethod({start:o,key:c,value:d,end:x()}))}else if(r("punc",":"))a(),i.push(new _e({start:o,key:c,value:Gt(),end:x()}));else{if("name"==o.type)switch(c){case"async":var m=r("operator","*")&&a();c=xt();var h=n.token,d=Fe(m?AST_AsyncGeneratorFunction:AST_AsyncFunction);d.start=h,d.end=x(),i.push(new AST_ObjectMethod({start:o,key:c,value:d,end:x()}));continue;case"get":i.push(new ge({start:o,key:xt(),value:yt(),end:x()}));continue;case"set":i.push(new ye({start:o,key:xt(),value:yt(),end:x()}));continue}T()}}}return a(),new me({properties:i})});function xt(){var e=n.token;switch(e.type){case"operator":mt[e.value]||T();case"num":case"string":case"name":case"keyword":case"atom":return a(),""+e.value;case"punc":C("[");var t=Gt();return C("]"),t;default:T()}}function St(){var e=n.token.value;return E("name"),e}function wt(e,t){var i=t.value;switch(i){case"await":n.in_async&&T(t);break;case"super":e=Ce;break;case"this":e=Je;break;case"yield":n.in_generator&&T(t)}return new e({name:""+i,start:t,end:t})}function kt(e){"arguments"!=e.name&&"eval"!=e.name&&"let"!=e.name||k(e.start,"Unexpected "+e.name+" in strict mode")}function Tt(e,t){if(!r("name"))return t||w("Name expected"),null;var i=wt(e,n.token);return n.input.has_directive("use strict")&&i instanceof Le&&kt(i),a(),i}function Et(e){var i=n.token;if(r("punc","[")){a();var o=_t("]",!t.strict,!0,function(){return Ct(e)});return new AST_DestructuredArray({start:i,elements:o,rest:o.rest||null,end:x()})}if(r("punc","{")){a();for(var c=!0,u=[],f=null;!r("punc","}")&&(c?c=!1:C(","),t.strict||!r("punc","}"));){var l=n.token;if(r("punc","[")||Rt(s(),"punc",":")){var p=xt();C(":"),u.push(new AST_DestructuredKeyVal({start:l,key:p,value:Ct(e),end:x()}))}else{if(r("operator","...")){a(),f=Et(e);break}var h=Tt(e);r("operator","=")&&(a(),h=new AST_DefaultValue({start:h.start,name:h,value:Gt(),end:x()})),u.push(new AST_DestructuredKeyVal({start:l,key:l.value,value:h,end:x()}))}}return C("}"),new AST_DestructuredObject({start:i,properties:u,rest:f,end:x()})}return Tt(e)}function Ct(e){var t=n.token,i=Et(e);return r("operator","=")?(a(),new AST_DefaultValue({start:t,name:i,value:Gt(),end:x()})):i}function Pt(e){for(var t=e?e.start:n.token,i=n.input.context().read_template,s=[],o=[];i(s);)a(),o.push(Wt()),r("punc","}")||T();return a(),new AST_Template({start:t,expressions:o,strings:s,tag:e,end:x()})}function Ot(e,n){for(var i=e.start,c=null;;)if(r("operator","?")&&Rt(s(),"punc",".")&&(a(),a(),c=e),r("punc","[")){a();var u=Wt();C("]"),e=new Ee({start:i,optional:c===e,expression:e,property:u,end:x()})}else if(n&&r("punc","("))a(),e=new v({start:i,optional:c===e,expression:e,args:_t(")",!t.strict),end:x()});else if(c===e||r("punc","."))c!==e&&a(),e=new U({start:i,optional:c===e,expression:e,property:St(),end:x()});else{if(!r("punc","`"))break;c&&w("Invalid template on optional chain"),e=Pt(e)}if(c&&(e.terminal=!0),e instanceof v&&!e.pure)for(var i=e.start,f=i.comments_before,l=o(i,"comments_before_length")?i.comments_before_length:f.length;--l>=0;)if(/[@#]__PURE__/.test(f[l].value)){e.pure=!0;break}return e}function Dt(e){var t=n.token;if(n.in_async&&r("name","await"))return n.in_funarg===n.in_function&&w("Invalid use of await in function argument"),n.input.context().regex_allowed=!0,a(),new h({start:t,expression:Dt(e),end:x()});if(n.in_generator&&r("name","yield")){n.in_funarg===n.in_function&&w("Invalid use of yield in function argument"),n.input.context().regex_allowed=!0,a();var i=null,s=!1;return r("operator","*")?(a(),i=Gt(e),s=!0):(r("punc")?At[n.token.value]:O())||(i=Gt(e)),new ut({start:t,expression:i,nested:s,end:x()})}if(r("operator")&&Ft[t.value]){a(),G();var o=Nt(rt,t,Dt(e));return o.start=t,o.end=x(),o}for(var c=gt(!0);r("operator")&&qt[n.token.value]&&!P(n.token);)(c=Nt(it,n.token,c)).start=t,c.end=n.token,a();return c}function Nt(e,t,i){var r=t.value;switch(r){case"++":case"--":$t(i)||k(t,"Invalid use of "+r+" operator");break;case"delete":i instanceof He&&n.input.has_directive("use strict")&&k(i.start,"Calling delete on expression not allowed in strict mode")}return new e({operator:r,expression:i})}var Mt=function(e,t,i){var s=r("operator")?n.token.value:null;"in"==s&&i&&(s=null);var o=null!=s?Vt[s]:null;if(null!=o&&o>t){a();var c=Mt(Dt(i),"**"==s?o-1:o,i);return Mt(new m({start:e.start,left:e,operator:s,right:c,end:c.end}),t,i)}return e};var Ut=function(e){var t=n.token,i=function(e){return Mt(Dt(e),0,e)}(e);if(r("operator","?")){a();var s=Gt();return C(":"),new D({start:t,condition:i,consequent:s,alternative:Gt(e),end:x()})}return i};function $t(e){return e instanceof xe&&!e.optional||e instanceof He}function Ht(e){if(e instanceof f){var t=null;if(e.elements[e.elements.length-1]instanceof AST_Spread&&!((t=Ht(e.elements.pop().expression))instanceof AST_Destructured||$t(t)))return e;var n=e.elements.map(Ht);return c(n,function(e){return e instanceof AST_DefaultValue||e instanceof AST_Destructured||e instanceof ee||$t(e)})?new AST_DestructuredArray({start:e.start,elements:n,rest:t,end:e.end}):e}if(e instanceof p){var i=Ht(e.left);return i instanceof AST_Destructured||$t(i)?new AST_DefaultValue({start:e.start,name:i,value:e.right,end:e.end}):e}if(!(e instanceof me))return e;var t=null;if(e.properties[e.properties.length-1]instanceof AST_Spread&&!((t=Ht(e.properties.pop().expression))instanceof AST_Destructured||$t(t)))return e;for(var r=[],s=0;s<e.properties.length;s++){var a=e.properties[s];if(!(a instanceof _e))return e;var o=Ht(a.value);if(!(o instanceof AST_DefaultValue||o instanceof AST_Destructured||$t(o)))return e;r.push(new AST_DestructuredKeyVal({start:a.start,key:a.key,value:o,end:a.end}))}return new AST_DestructuredObject({start:e.start,properties:r,rest:t,end:e.end})}function Gt(e){var t=n.token,i=Ut(e),s=n.token.value;if(r("operator")&&Bt[s]){if($t(i)||"="==s&&(i=Ht(i))instanceof AST_Destructured)return a(),new p({start:t,left:i,operator:s,right:Gt(e),end:x()});w("Invalid assignment")}return i}function Wt(e,t){for(var i=n.token,o=[];;){if(t&&r("operator","...")){a(),o.rest=Et(qe);break}if(o.push(Gt(e)),!r("punc",","))break;if(a(),t&&r("punc",")")&&Rt(s(),"punc","=>"))break}return 1!=o.length||o.rest?new ke({start:i,expressions:o,end:x()}):o[0]}function Yt(e){++n.in_loop;var t=e();return--n.in_loop,t}if(t.expression){G();var Jt=Wt();return E("eof"),Jt}return function(){var e=n.token,i=[];for(t.module&&(n.in_async=!0,n.input.add_directive("use strict")),n.input.push_directives_stack();!r("eof");)i.push(W(!0));n.input.pop_directives_stack();var s=x()||e,a=t.toplevel;return a?(a.body=a.body.concat(i),a.end=s):a=new Ze({start:e,body:i,end:s}),a}()}return t.parse=Ut,{is_identifier_string:It,is_identifier_char:Dt,is_surrogate_pair_head:function(e){return e>=55296&&e<=56319},is_surrogate_pair_tail:function(e){return e>=56320&&e<=57343},tokenizer:jt,parse:Ut,KEYWORDS:mt,RESERVED_WORDS:_t,KEYWORDS_BEFORE_EXPRESSION:vt,KEYWORDS_ATOM:gt}}),define("skylark-uglifyjs/output",["./utils","./ast","./parse"],function(e,t,n){"use strict";const{defaults:i,makePredicate:r,noop:s,return_false:a,return_true:o}=e,{AST_Array:c,AST_Arrow:u,AST_AsyncArrow:f,AST_AsyncDefun:l,AST_AsyncFunction:p,AST_AsyncGeneratorDefun:h,AST_AsyncGeneratorFunction:d,AST_Assign:m,AST_Await:g,AST_BigInt:_,AST_Binary:v,AST_BlockStatement:y,AST_Break:b,AST_Call:x,AST_Case:S,AST_Catch:w,AST_Chain:k,AST_Class:A,AST_ClassExpression:T,AST_ClassField:E,AST_ClassGetter:C,AST_ClassInit:P,AST_ClassMethod:O,AST_ClassPrivateProperty:D,AST_ClassProperty:I,AST_ClassSetter:N,AST_ClassStaticBlock:L,AST_ConciseMethod:R,AST_Conditional:M,AST_Const:j,AST_Constant:F,AST_Continue:q,AST_Debugger:B,AST_Default:V,AST_DefaultAssign:z,AST_DefaultValue:U,AST_Definitions:$,AST_Defun:H,AST_Destructuring:G,AST_DestructuredArray:W,AST_DestructuredKeyVal:Y,AST_DestructuredObject:J,AST_Destructured:K,AST_Directive:X,AST_Do:Q,AST_Dot:Z,AST_DotHash:ee,AST_EmptyStatement:te,AST_Exit:ne,AST_Expansion:ie,AST_Export:re,AST_ExportDeclaration:se,AST_ExportDefault:ae,AST_ExportForeign:oe,AST_ExportReferences:ce,AST_Finally:ue,AST_For:fe,AST_ForAwaitOf:le,AST_ForIn:pe,AST_ForOf:he,AST_Function:de,AST_GeneratorDefun:me,AST_GeneratorFunction:ge,AST_Hole:_e,AST_If:ve,AST_Import:ye,AST_ImportMeta:be,AST_Jump:xe,AST_LabeledStatement:Se,AST_Lambda:we,AST_Let:ke,AST_LoopControl:Ae,AST_NameMapping:Te,AST_New:Ee,AST_NewTarget:Ce,AST_Node:Pe,AST_Number:Oe,AST_Object:De,AST_ObjectGetter:Ie,AST_ObjectKeyVal:Ne,AST_ObjectMethod:Le,AST_ObjectProperty:Re,AST_ObjectSetter:Me,AST_PrefixedTemplateString:je,AST_PropAccess:Fe,AST_PrivateGetter:qe,AST_PrivateMethod:Be,AST_PrivateSetter:Ve,AST_PrivateIn:ze,AST_RegExp:Ue,AST_Return:$e,AST_Scope:He,AST_Sequence:Ge,AST_SimpleStatement:We,AST_Spread:Ye,AST_Statement:Je,AST_StatementWithBody:Ke,AST_String:Xe,AST_Sub:Qe,AST_Super:Ze,AST_Switch:et,AST_SwitchBranch:tt,AST_Symbol:nt,AST_SymbolClassProperty:it,AST_SymbolExport:rt,AST_SymbolImport:st,AST_SymbolMethod:at,AST_SymbolPrivateProperty:ot,AST_SymbolRef:ct,AST_Template:ut,AST_TemplateSegment:ft,AST_TemplateString:lt,AST_This:pt,AST_Throw:ht,AST_Toplevel:dt,AST_Try:mt,AST_TryBlock:gt,AST_Unary:_t,AST_UnaryPostfix:vt,AST_UnaryPrefix:yt,AST_Var:bt,AST_VarDef:xt,AST_While:St,AST_With:wt,AST_Yield:kt,TreeWalker:At,is_arrow:Tt,is_generator:Et,walk:Ct,walk_abort:Pt,first_in_statement:Ot}=t,{is_identifier_char:Dt,is_identifier_string:It,is_surrogate_pair_head:Nt,is_surrogate_pair_tail:Lt,PRECEDENCE:Rt,RESERVED_WORDS:Mt}=n;function jt(e){return"comment2"==e.type&&/@preserve|@license|@cc_on/i.test(e.value)}function Ft(e){e=i(e,{annotations:!1,ascii_only:!1,beautify:!1,braces:!1,comments:!1,extendscript:!1,galio:!1,ie:!1,indent_level:4,indent_start:0,inline_script:!0,keep_quoted_props:!1,max_line_len:!1,preamble:null,preserve_line:!1,quote_keys:!1,quote_style:0,semicolons:!0,shebang:!0,source_map:null,v8:!1,webkit:!1,width:80,wrap_iife:!1},!0);var t=a;if(e.comments){var n=e.comments;if("string"==typeof e.comments&&/^\/.*\/[a-zA-Z]*$/.test(e.comments)){var c=e.comments.lastIndexOf("/");n=new RegExp(e.comments.substr(1,c-1),e.comments.substr(c+1))}t=n instanceof RegExp?function(e){return"comment5"!=e.type&&n.test(e.value)}:"function"==typeof n?function(e){return"comment5"!=e.type&&n(this,e)}:"some"===n?jt:o}function u(e){if("number"==typeof e)return new Array(e+1).join(" ");if(!e)return"";if(!/^\s*$/.test(e))throw new Error("unsupported indentation: "+JSON.stringify(""+e));return e}var f,l,p,h,d,m,g,_=0,y=1,b=u(e.indent_start),x=u(e.indent_level),S=x.length+1>>1,w=0,k=!0,A=e.source_map&&[],T=!1,E=!1,C="";function P(){f="",h=!1,d=!1,g=[];var e=m;return m="",e}P();var O=e.ascii_only?function(e,t){return t&&(e=e.replace(/[\ud800-\udbff][\udc00-\udfff]/g,function(e){return"\\u{"+(e.charCodeAt(0)-55232<<10|e.charCodeAt(1)-56320).toString(16)+"}"})),e.replace(/[\u0000-\u001f\u007f-\uffff]/g,function(e){var n=e.charCodeAt(0).toString(16);if(n.length<=2&&!t){for(;n.length<2;)n="0"+n;return"\\x"+n}for(;n.length<4;)n="0"+n;return"\\u"+n})}:function(e){for(var t="",n=0,i=0;n<e.length;n++){var r=e.charCodeAt(n);if(Nt(r)){if(Lt(e.charCodeAt(n+1))){n++;continue}}else if(!Lt(r))continue;t+=e.slice(i,n)+"\\u"+r.toString(16),i=n+1}return 0==i?e:t+e.slice(i)};function D(e){return"'"+e.replace(/\x27/g,"\\'")+"'"}function I(e){return'"'+e.replace(/\x22/g,'\\"')+'"'}var N=[null,D,I,function(e,t){return"'"==t?D(e):I(e)}][e.quote_style]||function(e,t,n,i){return n>i?D(e):I(e)};function L(t,n){var i=0,r=0;return t=t.replace(/[\\\b\f\n\r\v\t\x22\x27\u2028\u2029\0\ufeff]/g,function(n,s){switch(n){case'"':return++i,'"';case"'":return++r,"'";case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\v":return e.ie?"\\x0B":"\\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case"\ufeff":return"\\ufeff";case"\0":return/[0-9]/.test(t.charAt(s+1))?"\\x00":"\\0"}return n}),N(O(t),n,i,r)}var R=A?function(e,t){A.forEach(function(n){n.line+=e,n.col+=t})}:s,j=A?function(){A.forEach(function(t){e.source_map.add(t.token.file,t.line,t.col,t.token.line,t.token.col,t.name||"name"!=t.token.type?t.name:t.token.value)}),A=[]}:s;function F(e){C+=m.slice(0,w);var t=(m=m.slice(w)).length;for(R(e,t-_),y+=e,_=t;e--;)C+="\n"}var q=e.max_line_len?function(t){k?_>e.max_line_len&&Pe.warn("Output exceeds {max_line_len} characters",e):(_>e.max_line_len&&(F(1),k=!0),(k||t)&&j())}:s,B=r("( [ + * / - , .");function V(e,t,n){return Dt(e)&&(Dt(t)||"\\"==t)||"/"==t&&t==e||("+"==t||"-"==t)&&t==f||"--"==f&&">"==t||"!"==f&&"--"==n||"/"==e&&("in"==n||"instanceof"==n)}var z=e.beautify||e.comments||e.max_line_len||e.preserve_line||e.shebang||!e.semicolons||e.source_map||e.width?function(t){var n=t.charAt(0);T&&n&&(T=!1,"\n"!=n&&(z("\n"),$())),E&&n&&(E=!1,/[\s;})]/.test(n)||U());var i=f.slice(-1);if(d&&(d=!1,":"==i&&"}"==n||";"!=i&&(!n||";}".indexOf(n)<0))){var r=B[n];r||e.semicolons?(m+=";",_++,k||(q(),k&&!r&&";"==m&&(m="",_=0)),w==m.length-1&&w++):(q(),m+="\n",y++,_=0,/^\s+$/.test(t)&&(d=!0)),e.beautify||(h=!1)}h&&(V(i,n,t)&&(m+=" ",_++),"<"==i&&"!"==t||(h=!1)),p&&(A.push({token:p,name:l,line:y,col:_}),p=!1,k&&j()),m+=t;var s=t.split(/\r?\n/),a=s.length-1;y+=a,_+=s[0].length,a>0&&(q(),_=s[a].length),f=t}:function(e){var t=e.charAt(0),n=f.slice(-1);d&&(d=!1,(":"==n&&"}"==t||(!t||";}".indexOf(t)<0)&&";"!=n)&&(m+=";",h=!1)),h&&(V(n,t,e)&&(m+=" "),"<"==n&&"!"==e||(h=!1)),m+=e,f=e},U=e.beautify?function(){z(" ")}:function(){h=!0},$=e.beautify?function(e){T&&z("\n"),z(e?b.slice(0,-S):b)}:s,H=e.beautify?function(e){var t=b;b+=x,e(),b=t}:function(e){e()},G=e.max_line_len||e.preserve_line?function(){q(),w=m.length,k=!1}:s,W=e.beautify?function(){z("\n"),w=m.length}:G,Y=e.beautify?function(){z(";")}:function(){d=!0};var J=A?function(e,t){p=e,l=t}:s;function K(e,t){T||(!e.nlb||!t&&/(^|\n) *$/.test(m)?t&&(E=!0):T=!0)}function X(e){var t=e.value.replace(/[@#]__PURE__/g," ");return!(/^\s*$/.test(t)&&!/^\s*$/.test(e.value))&&(/comment[134]/.test(e.type)?(z("//"+t),T=!0):"comment2"==e.type&&z("/*"+t+"*/"),!0)}return{get:function(){k||q(!0);return C+m},reset:P,indent:$,should_break:e.beautify&&e.width?function(){return _>=e.width}:a,has_parens:function(){return"("==f.slice(-1)},newline:W,print:z,space:U,comma:function(){G(),z(","),G(),U()},colon:function(){z(":"),U()},last:function(){return f},semicolon:Y,force_semicolon:function(){d&&z(";");z(";")},to_utf8:O,print_name:function(e){z(O(e.toString(),!0))},print_string:e.inline_script?function(e,t){e=L(e,t).replace(/<\x2f(script)([>\/\t\n\f\r ])/gi,"<\\/$1$2"),z(e.replace(/\x3c!--/g,"\\x3c!--").replace(/--\x3e/g,"--\\x3e"))}:function(e,t){z(L(e,t))},with_indent:H,with_block:function(e,t){z("{"),W(),H(e),J(t),$(),z("}")},with_parens:function(e){z("("),G(),e(),G(),z(")")},with_square:function(e){z("["),G(),e(),G(),z("]")},add_mapping:J,option:function(t){return e[t]},prepend_comments:e.comments||e.shebang?function(n){var i,r=this;n instanceof ne?i=n.value:n instanceof kt&&(i=n.expression);var s=u(n);s||(s=[]);if(i){var a=new At(function(e){if(!function(e,t){if(t instanceof v)return t.left===e;if("Call"==t.TYPE)return t.expression===e;if(t instanceof M)return t.condition===e;if(t instanceof Z)return t.expression===e;if(t instanceof ne)return!0;if(t instanceof Ge)return t.expressions[0]===e;if(t instanceof Qe)return t.expression===e;if(t instanceof vt)return!0;if(t instanceof kt)return!0}(e,a.parent()))return!0;var t=u(e);t&&(s=s.concat(t))});a.push(n),i.walk(a)}if(1==y&&0==_){s.length>0&&e.shebang&&"comment5"==s[0].type&&(z("#!"+s.shift().value+"\n"),$());var o=e.preamble;o&&z(o.replace(/\r\n?|\u2028|\u2029|(^|\S)\s*$/g,"$1\n"))}var c=!1;(s=s.filter(t,n)).forEach(function(e,t){K(e,t),X(e)&&(c=!0)}),c&&K(n.start,!0);function u(e){var t=e.start;if(!t){if(!i)return;e.start=t=new AST_Token}var n=t.comments_before;if(!n){if(!i)return;t.comments_before=n=[]}if(n._dumped!==r)return n._dumped=r,n}}:s,append_comments:e.comments?function(e,n){var i=e.end;if(!i)return;var r=i[n?"comments_before":"comments_after"];if(!r||r._dumped===this)return;if(!(e instanceof Je||all(r,function(e){return!/comment[134]/.test(e.type)})))return;r._dumped=this,r.filter(t,e).forEach(function(e,t){K(e,t||!n),X(e)})}:s,push_node:function(e){g.push(e)},pop_node:e.preserve_line?function(){var e=g.pop();e.start&&e.start.line>y&&F(e.start.line-y)}:function(){g.pop()},parent:function(e){return g[g.length-2-(e||0)]}}}return function(){function e(e,t){e.DEFMETHOD("_codegen",t)}var t=!1;Pe.DEFMETHOD("print",function(e,t){var n=this;function i(){e.prepend_comments(n),n.add_source_map(e),n._codegen(e),e.append_comments(n)}e.push_node(n),t||n.needs_parens(e)?e.with_parens(i):i(),e.pop_node()});var n=Ft({inline_script:!1,shebang:!1,width:!1});function i(e,t){e.DEFMETHOD("needs_parens",t)}function r(e){var t=e.parent();return!e.has_parens()&&Ot(e,!1,!0)?this.name||!(t instanceof ae):!!(e.option("webkit")&&t instanceof Fe&&t.expression===this)||(!!(e.option("wrap_iife")&&t instanceof x&&t.expression===this)||void 0)}function o(e){return!e.has_parens()&&Ot(e,!0)}function _(e){var t=e.parent();return t instanceof v?"**"==t.operator&&t.left===this:t instanceof x?t.expression===this:t instanceof A||(t instanceof Fe?t.expression===this:t instanceof ut?t.tag===this:void 0)}function k(e,t){return!!e.terminal&&((t instanceof x||t instanceof Fe)&&t.expression===e)}function D(e,t){var n=t.parent();return n instanceof g||(n instanceof v?!(n instanceof m):n instanceof x?n.expression===e:n instanceof A||(n instanceof M?n.condition===e:n instanceof Fe?n.expression===e:n instanceof ut?n.tag===e:n instanceof _t||void 0))}function L(e,n,i,r){var s=e.length-1,a=r,o=t;e.forEach(function(e,r){a&&(e instanceof X?"use asm"==e.value&&(t=!0):e instanceof te||(e instanceof We&&e.body instanceof Xe&&i.force_semicolon(),a=!1)),e instanceof te||(i.indent(),e.print(i),r==s&&n||(i.newline(),n&&i.newline()))}),t=o}function R(e,t){t.print("{"),t.with_indent(function(){t.append_comments(e,!0)}),t.print("}")}function z(e,t,n){e.body.length>0?t.with_block(function(){L(e.body,!1,t,n)},e.end):R(e,t)}function H(e,t){return function(n){var i=this;n.print(e),n.space(),n.with_parens(function(){i.init.print(n),n.space(),n.print(t),n.space(),i.object.print(n)}),ot(i.body,n)}}function G(e,t){var n=e.value;"*"==n||It(n)?t.print_name(n):t.print_string(n,e.quote)}function ee(e,t){t.with_parens(function(){e.argnames.forEach(function(e,n){n&&t.comma(),e.print(t)}),e.rest&&(e.argnames.length&&t.comma(),t.print("..."),e.rest.print(t))})}function ne(e,t){var n=1==e.argnames.length&&!e.rest&&e.argnames[0];n instanceof AST_SymbolFunarg&&"yield"!=n.name?n.print(t):ee(e,t),t.space(),t.print("=>"),t.space(),e.value?e.value.print(t):z(e,t,!0)}function ie(e,t){e.name&&(t.space(),e.name.print(t)),ee(e,t),t.space(),z(e,t,!0)}function re(e){e.print("async"),e.space(),e.print("function"),ie(this,e)}function be(e){e.print("async"),e.space(),e.print("function*"),ie(this,e)}function Ae(e){e.print("function*"),ie(this,e)}function Te(e,t){var n=e.value;is_async(n)&&(t.print("async"),t.space()),Et(n)&&t.print("*"),Ze(e,t),ie(e.value,t)}function Ce(e,t){return function(n){n.print(e);var i=this[t];i&&(n.space(),i.print(n)),n.semicolon()}}function je(e,t){t.newline(),e.body.forEach(function(e){t.indent(),e.print(t),t.newline()})}function qe(e){return function(t){t.print(e),t.space(),this.definitions.forEach(function(e,n){n&&t.comma(),e.print(t)});var n=t.parent();n instanceof AST_IterationStatement&&n.init===this||t.semicolon()}}function Be(e,t,n){var i=!1;n&&e.walk(new At(function(e){return!!i||(e instanceof v&&"in"==e.operator?i=!0:e instanceof He&&(!Tt(e)||!e.value)||void 0)})),e.print(t,i)}function Ve(e,t){if(t.option("annotations")&&e.pure){var n,i=0,r=e;do{if(n=r,(r=t.parent(i++))instanceof x&&r.expression===n)return}while(r instanceof Fe&&r.expression===n);t.print("/*@__PURE__*/")}}function ze(e,t){t.with_parens(function(){e.args.forEach(function(e,n){n&&t.comma(),e.print(t)}),t.add_mapping(e.end)})}function Je(e,t,n){var i=e.properties;i.length>0?t.with_block(function(){i.forEach(function(e,i){i&&(n||t.print(","),t.newline()),t.indent(),e.print(t)}),t.newline()},e.end):R(e,t)}function Ze(e,t){var n=e.key;if(n instanceof Pe)return t.with_square(function(){n.print(t)});var i=e.start&&e.start.quote;if(t.option("quote_keys")||i&&t.option("keep_quoted_props"))t.print_string(n,i);else if(""+ +n==n&&n>=0)t.print(ft(n));else if(e.private)t.print_name(n);else{if(Mt[n]?!t.option("ie"):It(n))return t.print_name(n),n;t.print_string(n,i)}}function it(e){return function(t){this.static&&(t.print("static"),t.space()),t.print(e),t.space(),Ze(this,t),ie(this.value,t)}}function at(e){var t=e.definition();return t&&t.mangled_name||e.name}function ot(e,t){t.option("braces")&&!(e instanceof j||e instanceof ke)?lt(e,t):e instanceof te?t.force_semicolon():(t.space(),e.print(t))}function ct(e,t){return e.args.length>0||t.option("beautify")}function ft(e){var t,n,i,r=e.toString(10).replace(/^0\./,".").replace("e+","e"),s=[r];return Math.floor(e)===e&&(e<0?s.push("-0x"+(-e).toString(16).toLowerCase()):s.push("0x"+e.toString(16).toLowerCase())),(t=/^\.0+/.exec(r))?(n=t[0].length,i=r.slice(n),s.push(i+"e-"+(i.length+n-1))):(t=/[^0]0+$/.exec(r))?(n=t[0].length-1,s.push(r.slice(0,-n)+"e"+n)):(t=/^(\d)\.(\d+)e(-?\d+)$/.exec(r))&&s.push(t[1]+t[2]+"e"+(t[3]-t[2].length)),function(e){for(var t=e[0],n=t.length,i=1;i<e.length;++i)e[i].length<n&&(t=e[i],n=t.length);return t}(s)}function lt(e,t){t.space(),e instanceof te?R(e,t):e instanceof y?e.print(t):t.with_block(function(){t.indent(),e.print(t),t.newline()},e.end)}function pt(e,t){e.forEach(function(e){e.DEFMETHOD("add_source_map",t)})}Pe.DEFMETHOD("print_to_string",function(e){if(e){var t=Ft(e);return this.print(t),t.get()}return this.print(n),n.reset()}),i(Pe,a),i(p,r),i(d,r),i(T,r),i(de,r),i(ge,r),i(De,o),i(g,_),i(_t,_),i(Ge,function(e){var t=e.parent();return t instanceof c||Tt(t)&&t.value===this||t instanceof g||t instanceof v||t instanceof x||t instanceof A||t instanceof I||t instanceof M||t instanceof U||t instanceof Y||t instanceof ae||t instanceof he||t instanceof Re||t instanceof Fe&&t.expression===this||t instanceof Ye||t instanceof ut&&t.tag===this||t instanceof _t||t instanceof xt||t instanceof kt}),i(v,function(e){var t=e.parent();if(t instanceof g)return!0;if(t instanceof v){var n=t.operator,i=Rt[n],r=this.operator,s=Rt[r];return i>s||"??"==n&&("&&"==r||"||"==r)||i==s&&this===t["**"==n?"left":"right"]}return t instanceof x?t.expression===this:t instanceof A||(t instanceof Fe?t.expression===this:t instanceof ut?t.tag===this:t instanceof _t||void 0)}),i(Fe,function(e){var t=e.parent();return t instanceof Ee&&t.expression===this&&"Call"==root_expr(this).TYPE||k(this,t)}),i(x,function(e){var t=e.parent();if(t instanceof Ee)return t.expression===this;if(e.option("webkit")&&this.expression instanceof de&&t instanceof Fe&&t.expression===this){var n=e.parent(1);if(n instanceof m&&n.left===t)return!0}return k(this,t)}),i(Ee,function(e){if(ct(this,e))return!1;var t=e.parent();return t instanceof x?t.expression===this:t instanceof Fe||(t instanceof ut?t.tag===this:void 0)}),i(Oe,function(e){if(!e.option("galio"))return!1;var t=e.parent();return t instanceof Fe&&t.expression===this&&/^0/.test(ft(this.value))}),i(u,function(e){return D(this,e)}),i(m,function(e){return!!D(this,e)||(e.option("v8")?this.left instanceof K:this.left instanceof J?o(e):void 0)}),i(f,function(e){return D(this,e)}),i(M,function(e){return D(this,e)||e.option("extendscript")&&e.parent()instanceof M}),i(kt,function(e){return D(this,e)}),e(X,function(e){var t=this.quote,n=this.value;switch(e.option("quote_style")){case 0:case 2:-1==n.indexOf('"')&&(t='"');break;case 1:-1==n.indexOf("'")&&(t="'")}e.print(t+n+t),e.semicolon()}),e(B,function(e){e.print("debugger"),e.semicolon()}),e(dt,function(e){L(this.body,!0,e,!0),e.print("")}),e(Se,function(e){this.label.print(e),e.colon(),this.body.print(e)}),e(We,function(e){this.body.print(e),e.semicolon()}),e(y,function(e){z(this,e)}),e(te,function(e){e.semicolon()}),e(Q,function(e){var t=this;e.print("do"),lt(t.body,e),e.space(),e.print("while"),e.space(),e.with_parens(function(){t.condition.print(e)}),e.semicolon()}),e(St,function(e){var t=this;e.print("while"),e.space(),e.with_parens(function(){t.condition.print(e)}),ot(t.body,e)}),e(fe,function(e){var t=this;e.print("for"),e.space(),e.with_parens(function(){t.init?(t.init instanceof $?t.init.print(e):Be(t.init,e,!0),e.print(";"),e.space()):e.print(";"),t.condition?(t.condition.print(e),e.print(";"),e.space()):e.print(";"),t.step&&t.step.print(e)}),ot(t.body,e)}),e(le,H("for await","of")),e(pe,H("for","in")),e(he,H("for","of")),e(wt,function(e){var t=this;e.print("with"),e.space(),e.with_parens(function(){t.expression.print(e)}),ot(t.body,e)}),e(se,function(e){e.print("export"),e.space(),this.body.print(e)}),e(ae,function(e){e.print("export"),e.space(),e.print("default"),e.space();var t=this.body;t.print(e),t instanceof T&&!t.name||t instanceof AST_DefClass||t instanceof AST_LambdaDefinition||t instanceof AST_LambdaExpression&&!t.name&&!Tt(t)||e.semicolon()}),e(oe,function(e){var t=this;e.print("export"),e.space();var n=t.keys.length;function i(n){var i=t.aliases[n],r=t.keys[n];G(r,e),i.value!=r.value&&(e.space(),e.print("as"),e.space(),G(i,e))}0==n?R(t,e):"*"==t.keys[0].value?i(0):e.with_block(function(){e.indent(),i(0);for(var t=1;t<n;t++)e.print(","),e.newline(),e.indent(),i(t);e.newline()},t.end),e.space(),e.print("from"),e.space(),t.path.print(e),e.semicolon()}),e(ce,function(e){e.print("export"),e.space(),Je(this,e),e.semicolon()}),e(ye,function(e){e.print("import"),e.space(),this.default&&this.default.print(e),this.all&&(this.default&&e.comma(),this.all.print(e)),this.properties&&(this.default&&e.comma(),Je(this,e)),(this.all||this.default||this.properties)&&(e.space(),e.print("from"),e.space()),this.path.print(e),e.semicolon()}),e(u,function(e){ne(this,e)}),e(f,function(e){e.print("async"),e.space(),ne(this,e)}),e(we,function(e){e.print("function"),ie(this,e)}),e(l,re),e(p,re),e(h,be),e(d,be),e(me,Ae),e(ge,Ae),e(A,function(e){e.print("class"),this.name&&(e.space(),this.name.print(e)),this.extends&&(e.space(),e.print("extends"),e.space(),this.extends.print(e)),e.space(),Je(this,e,!0)}),e(E,function(e){this.static&&(e.print("static"),e.space()),Ze(this,e),this.value&&(e.space(),e.print("="),e.space(),this.value.print(e)),e.semicolon()}),e(C,it("get")),e(N,it("set")),e(O,function(e){this.static&&(e.print("static"),e.space()),Te(this,e)}),e(P,function(e){e.print("static"),e.space(),z(this.value,e)}),e($e,Ce("return","value")),e(ht,Ce("throw","value")),e(b,Ce("break","label")),e(q,Ce("continue","label")),e(ve,function(e){var t=this;e.print("if"),e.space(),e.with_parens(function(){t.condition.print(e)}),t.alternative?(!function(e,t){var n=e.body;if(t.option("braces")&&!(n instanceof j||n instanceof ke)||t.option("ie")&&n instanceof Q)return lt(n,t);if(!n)return t.force_semicolon();for(;;)if(n instanceof ve){if(!n.alternative)return void lt(e.body,t);n=n.alternative}else{if(!(n instanceof Ke))break;n=n.body}ot(e.body,t)}(t,e),e.space(),e.print("else"),t.alternative instanceof ve?(e.space(),t.alternative.print(e)):ot(t.alternative,e)):ot(t.body,e)}),e(et,function(e){var t=this;e.print("switch"),e.space(),e.with_parens(function(){t.expression.print(e)}),e.space();var n=t.body.length-1;n<0?R(t,e):e.with_block(function(){t.body.forEach(function(t,i){e.indent(!0),t.print(e),i<n&&t.body.length>0&&e.newline()})},t.end)}),e(V,function(e){e.print("default:"),je(this,e)}),e(S,function(e){e.print("case"),e.space(),this.expression.print(e),e.print(":"),je(this,e)}),e(mt,function(e){e.print("try"),e.space(),z(this,e),this.bcatch&&(e.space(),this.bcatch.print(e)),this.bfinally&&(e.space(),this.bfinally.print(e))}),e(w,function(e){var t=this;e.print("catch"),t.argname&&(e.space(),e.with_parens(function(){t.argname.print(e)})),e.space(),z(t,e)}),e(ue,function(e){e.print("finally"),e.space(),z(this,e)}),e(j,qe("const")),e(ke,qe("let")),e(bt,qe("var")),e(xt,function(e){if(this.name.print(e),this.value){e.space(),e.print("="),e.space();var t=e.parent(1),n=t instanceof fe||t instanceof AST_ForEnumeration;Be(this.value,e,n)}}),e(U,function(e){this.name.print(e),e.space(),e.print("="),e.space(),this.value.print(e)}),e(x,function(e){Ve(this,e),this.expression.print(e),this.optional&&e.print("?."),ze(this,e)}),e(Ee,function(e){Ve(this,e),e.print("new"),e.space(),this.expression.print(e),ct(this,e)&&ze(this,e)}),e(Ge,function(e){this.expressions.forEach(function(t,n){n>0&&(e.comma(),e.should_break()&&(e.newline(),e.indent())),t.print(e)})}),e(Z,function(e){var t=this,n=t.expression;n.print(e);var i=t.property;e.option("ie")&&Mt[i]||t.quoted&&e.option("keep_quoted_props")?(t.optional&&e.print("?."),e.with_square(function(){e.add_mapping(t.end),e.print_string(i)})):(n instanceof Oe&&!/[ex.)]/i.test(e.last())&&e.print("."),e.print(t.optional?"?.":"."),e.add_mapping(t.end),e.print_name(i))}),e(Qe,function(e){var t=this;t.expression.print(e),t.optional&&e.print("?."),e.with_square(function(){t.property.print(e)})}),e(Ye,function(e){e.print("..."),this.expression.print(e)}),e(yt,function(e){var t=this.operator,n=this.expression;e.print(t),(/^[a-z]/i.test(t)||/[+-]$/.test(t)&&n instanceof yt&&/^[+-]/.test(n.operator))&&e.space(),n.print(e)}),e(vt,function(e){this.expression.print(e),e.add_mapping(this.end),e.print(this.operator)}),e(v,function(e){this.left.print(e),e.space(),e.print(this.operator),e.space(),this.right.print(e)}),e(M,function(e){this.condition.print(e),e.space(),e.print("?"),e.space(),this.consequent.print(e),e.space(),e.colon(),this.alternative.print(e)}),e(g,function(e){e.print("await"),e.space(),this.expression.print(e)}),e(kt,function(e){e.print(this.nested?"yield*":"yield"),this.expression&&(e.space(),this.expression.print(e))}),e(c,function(e){var t=this.elements,n=t.length;e.with_square(n>0?function(){e.space(),t.forEach(function(t,i){i&&e.comma(),t.print(e),i===n-1&&t instanceof _e&&e.comma()}),e.space()}:s)}),e(W,function(e){var t=this.elements,n=t.length,i=this.rest;e.with_square(n||i?function(){e.space(),t.forEach(function(t,n){n&&e.comma(),t.print(e)}),i?(n&&e.comma(),e.print("..."),i.print(e)):t[n-1]instanceof _e&&e.comma(),e.space()}:s)}),e(Y,function(e){var t=Ze(this,e),n=this.value;if(t)if(n instanceof U){if(n.name instanceof nt&&t==at(n.name))return e.space(),e.print("="),e.space(),void n.value.print(e)}else if(n instanceof nt&&t==at(n))return;e.colon(),n.print(e)}),e(J,function(e){var t=this.properties,n=t.length,i=this.rest;n||i?e.with_block(function(){t.forEach(function(t,n){n&&(e.print(","),e.newline()),e.indent(),t.print(e)}),i&&(n&&(e.print(","),e.newline()),e.indent(),e.print("..."),i.print(e)),e.newline()},this.end):R(this,e)}),e(De,function(e){Je(this,e)}),e(Ne,function(e){Ze(this,e),e.colon(),this.value.print(e)}),e(Le,function(e){Te(this,e)}),e(Ie,it("get")),e(Me,it("set")),e(nt,function(e){e.print_name(at(this))}),e(rt,function(e){var t=at(this);e.print_name(t);var n=this.alias;n.value!=t&&(e.space(),e.print("as"),e.space(),G(n,e))}),e(st,function(e){var t=at(this),n=this.key;n.value&&n.value!=t&&(G(n,e),e.space(),e.print("as"),e.space()),e.print_name(t)}),e(_e,s),e(ut,function(e){this.tag&&this.tag.print(e),e.print("`");for(var t=0;t<this.expressions.length;t++)e.print(this.strings[t]),e.print("${"),this.expressions[t].print(e),e.print("}");e.print(this.strings[t]),e.print("`")}),e(F,function(e){e.print(""+this.value)}),e(Xe,function(e){e.print_string(this.value,this.quote)}),e(Oe,function(e){var n=this.start;t&&n&&null!=n.raw?e.print(n.raw):e.print(ft(this.value))}),e(Ue,function(e){var t=this.value,n=t.toString(),i=n.lastIndexOf("/");t.raw_source?n="/"+t.raw_source+n.slice(i):1==i?n="/(?:)"+n.slice(i):n.indexOf("/",1)<i&&(n="/"+n.slice(1,i).replace(/\\\\|[^/]?\//g,function(e){return"\\"==e[0]?e:e.slice(0,-1)+"\\/"})+n.slice(i)),e.print(e.to_utf8(n).replace(/\\(?:\0(?![0-9])|[^\0])/g,function(e){switch(e[1]){case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\t";case"\b":return"\b";case"\f":return"\f";case"\0":return"\0";case"\v":return"\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}}).replace(/[\n\r\u2028\u2029]/g,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}}))}),pt([Pe,Se],s),pt([c,g,y,w,F,B,$,K,X,ue,xe,we,Ee,De,Ye,Ke,nt,et,tt,mt,yt,kt],function(e){e.add_mapping(this.start)}),pt([I,Y,Re],function(e){"string"==typeof this.key&&e.add_mapping(this.start,this.key)})}(),{OutputStream:Ft}}),define("skylark-uglifyjs/scope",["./utils","./ast","./parse"],function(e,t,n){"use strict";const{defaults:i,keep_name:r,mergeSort:s,member:a,push_uniq:o,make_node:c,return_false:u,return_this:f,return_true:l,string_template:p,DEF_BITPROPS:h,makePredicate:d,Dictionary:m}=e,{AST_Arrow:g,AST_Assign:_,AST_AsyncArrow:v,AST_Block:y,AST_Call:b,AST_Catch:x,AST_Class:S,AST_Conditional:w,AST_DefClass:k,AST_Definitions:A,AST_DefaultValue:T,AST_Defun:E,AST_Destructuring:C,AST_Destructured:P,AST_DestructuredKeyVal:O,AST_Dot:D,AST_DotHash:I,AST_Export:N,AST_For:L,AST_ForIn:R,AST_ForOf:M,AST_ForEnumeration:j,AST_Function:F,AST_Import:q,AST_IterationStatement:B,AST_Label:V,AST_LabeledStatement:z,AST_LabelRef:U,AST_Lambda:$,AST_LambdaDefinition:H,AST_LoopControl:G,AST_NameMapping:W,AST_Node:Y,AST_Scope:J,AST_Sequence:K,AST_String:X,AST_Sub:Q,AST_Switch:Z,AST_SwitchBranch:ee,AST_Symbol:te,AST_SymbolBlockDeclaration:ne,AST_SymbolCatch:ie,AST_SymbolClass:re,AST_SymbolConst:se,AST_SymbolDeclaration:ae,AST_SymbolDefClass:oe,AST_SymbolDefun:ce,AST_SymbolExport:ue,AST_SymbolFunarg:fe,AST_SymbolImport:le,AST_SymbolLambda:pe,AST_SymbolLet:he,AST_SymbolMethod:de,AST_SymbolRef:me,AST_SymbolVar:ge,AST_Toplevel:_e,AST_Try:ve,AST_VarDef:ye,AST_With:be,TreeWalker:xe,walk_body:Se,walk_lambda:we,AST_BlockScope:ke,AST_Unary:Ae}=t,{RESERVED_WORDS:Te}=n;function Ee(e,t,n,i){this._bits=0,this.defun=void 0,this.eliminated=0,this.id=e,this.init=i,this.mangled_name=null,this.name=n.name,this.orig=[n],this.references=[],this.replaced=0,this.safe_ids=void 0,this.scope=t}Ee.prototype={forEach:function(e){this.orig.forEach(e),this.references.forEach(e)},mangle:function(e){if(!this.mangled_name){var t=this.global&&e.cache&&e.cache.props;if(t&&t.has(this.name))this.mangled_name=t.get(this.name);else if(this.unmangleable(e))Ie(this.scope,e).set(this.name,!0);else{var n=this.redefined();this.mangled_name=n?n.mangled_name||n.name:function(e,t){var n,i=e.scope,r=Ie(i,t),s=i.cname_holes,o=new m,c=[i];e.forEach(function(e){var n=e.scope;do{if(a(n,c))break;Ie(n,t).each(function(e,t){o.set(t,e)}),c.push(n)}while(n=n.parent_scope)});for(var u=0;u<s.length;u++)if(n=Le(s[u]),!o.has(n))return s.splice(u,1),r.set(n,!0),n;for(;;)if(n=Le(++i.cname),!(r.has(n)||Te[n]||t.reserved.has[n])){if(!o.has(n))break;s.push(i.cname)}return r.set(n,!0),n}(this,e),t&&t.set(this.name,this.mangled_name)}}},redefined:function(){var e=this.defun;if(e){var t=this.name,n=e.variables.get(t)||e instanceof _e&&e.globals.get(t)||this.orig[0]instanceof se&&find_if(function(e){return e.name==t},e.enclosed);return n&&n!==this?n.redefined()||n:void 0}},unmangleable:function(e){if(this.exported)return!0;if(this.undeclared)return!0;if(!e.eval&&this.scope.pinned())return!0;if(e.keep_fargs&&((t=this).orig[0]instanceof fe||t.orig[1]instanceof fe))return!0;var t;if(e.keep_fnames){var n=this.orig[0];if(n instanceof re)return!0;if(n instanceof oe)return!0;if(n instanceof ce)return!0;if(n instanceof pe)return!0}return!(e.toplevel||!this.global)}},h(Ee,["const_redefs","cross_loop","direct_access","exported","global","undeclared"]);var Ce=d("delete ++ --");function Pe(e,t){return t instanceof _?t.left===e&&e:t instanceof T?t.name===e&&e:t instanceof P?e:t instanceof O?e:t instanceof j?t.init===e&&e:t instanceof Ae?Ce[t.operator]&&t.expression:void 0}function Oe(e,t){e.enclosed=[],e.parent_scope=t,e.functions=new m,e.variables=new m,t&&(e.make_def=t.make_def)}function De(e,t){Oe(e,t),e.uses_eval=!1,e.uses_with=!1}function Ie(e,t){var n=e.names_in_use;if(!n){e.cname=-1,e.cname_holes=[],e.names_in_use=n=new m;var i=t.cache&&t.cache.props;e.enclosed.forEach(function(e){e.unmangleable(t)&&n.set(e.name,!0),e.global&&i&&i.has(e.name)&&n.set(i.get(e.name),!0)})}return n}function Ne(e){return e=i(e,{eval:!1,ie:!1,keep_fargs:!1,keep_fnames:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1}),Array.isArray(e.reserved)||(e.reserved=[]),o(e.reserved,"arguments"),e.reserved.has=d(e.reserved),e}_e.DEFMETHOD("figure_out_scope",function(e){e=i(e,{cache:null,ie:!1});var t=this,n=null,r=!1,s=0,a=t.parent_scope=null,c=new xe(function(t,i){if(t instanceof k){var s=r;return r=c.parent()instanceof AST_ExportDeclaration,t.name.walk(c),r=s,f(function(){t.extends&&t.extends.walk(c),t.properties.forEach(function(e){e.walk(c)})}),!0}if(t instanceof A){var s=r;return r=c.parent()instanceof AST_ExportDeclaration,i(),r=s,!0}if(t instanceof H){var s=r;return r=c.parent()instanceof AST_ExportDeclaration,t.name.walk(c),r=s,f(function(){t.argnames.forEach(function(e){e.walk(c)}),t.rest&&t.rest.walk(c),Se(t,c)}),!0}if(t instanceof ee)return t.init_vars(a),i(),!0;if(t instanceof ve)return f(function(){Se(t,c)}),t.bcatch&&t.bcatch.walk(c),t.bfinally&&t.bfinally.walk(c),!0;if(t instanceof be){var o=a;do{if((o=o.resolve()).uses_with)break;o.uses_with=!0}while(o=o.parent_scope);return f(i),!0}if(t instanceof ke)return f(i),!0;if(t instanceof te&&(t.scope=a),t instanceof V&&(t.thedef=t,t.references=[]),t instanceof ie)a.def_variable(t).defun=n;else if(t instanceof se){var u=a.def_variable(t);u.defun=n,r&&(u.exported=!0)}else if(t instanceof ce){var u=n.def_function(t,c.parent());r&&(u.exported=!0)}else if(t instanceof fe)n.def_variable(t);else if(t instanceof pe){var u=n.def_function(t,"arguments"==t.name?void 0:n);e.ie&&"arguments"!=t.name&&(u.defun=n.parent_scope.resolve())}else if(t instanceof he){var u=a.def_variable(t);r&&(u.exported=!0)}else if(t instanceof ge){var u=n.def_variable(t,t instanceof le?void 0:null);r&&(u.exported=!0)}function f(e){t.init_vars(a);var i=n,r=a;t instanceof J&&(n=t),a=t,e(),a=r,n=i}});t.make_def=function(e,t){return new Ee(++s,this,e,t)},t.walk(c),t.globals=new m;var u=[],c=new xe(function(n){if(n instanceof x){if(!(n.argname instanceof P))return;return u.push(n),n.argname.walk(c),u.pop(),Se(n,c),!0}if(n instanceof $)return u.push(n),n.name&&n.name.walk(c),n.argnames.forEach(function(e){e.walk(c)}),n.rest&&n.rest.walk(c),u.pop(),we(n,c),!0;if(n instanceof G)return n.label&&n.label.thedef.references.push(n),!0;if(n instanceof ae){var i=n.definition();if(i.preinit=i.references.length,n instanceof ie){var r=i.redefined();if(r)for(var s=n.scope;s&&o(s.enclosed,r)&&s!==r.scope;s=s.parent_scope);}else if(n instanceof se){var r=i.redefined();r&&(r.const_redefs=!0)}else if(i.scope!==n.scope&&(n instanceof ce||n instanceof fe||n instanceof ge)){n.mark_enclosed(e);var r=n.scope.find_variable(n.name);n.thedef!==r&&(n.thedef=r,r.orig.push(n),n.mark_enclosed(e))}if("arguments"!=n.name)return!0;var a=n instanceof ge&&c.parent();if(a instanceof ye&&!a.value)return!0;var l=n.scope.resolve().find_variable("arguments");return l&&f(l)&&(l.scope.uses_arguments=3),!0}if(n instanceof me){for(var p=n.name,l=n.scope.find_variable(p),h=u.length;h>0&&l&&!((h=u.lastIndexOf(l.scope,h-1))<0);){var d=l.orig[0];if(d instanceof ie||d instanceof fe||d instanceof pe){n.in_arg=!0;break}l=l.scope.parent_scope.find_variable(p)}if(l){if("arguments"==p&&f(l)){var a=c.parent();Pe(n,a)?l.scope.uses_arguments=3:l.scope.uses_arguments<2&&!(a instanceof AST_PropAccess&&a.expression===n)?l.scope.uses_arguments=2:l.scope.uses_arguments||(l.scope.uses_arguments=!0)}}else l=t.def_global(n);if("eval"==p){var a=c.parent();if("Call"==a.TYPE&&a.expression===n){var s=n.scope;do{if((s=s.resolve()).uses_eval)break;s.uses_eval=!0}while(s=s.parent_scope)}else l.undeclared&&(t.uses_eval=!0)}if(l.init instanceof H&&l.scope!==l.init.name.scope){var m=n.scope;do{if(m===l.init.name.scope)break}while(m=m.parent_scope);m||(l.init=void 0)}return n.thedef=l,n.reference(e),!0}});function f(e){return e.orig[0]instanceof fe&&!(e.orig[1]instanceof fe||e.orig[2]instanceof fe)&&!is_arrow(e.scope)}function l(n,i){var r=n.name,s=n.thedef;if(!all(s.orig,function(e){return!(e instanceof se||e instanceof he)}))return!1;var a=i.find_variable(r);if(a){var o=a.redefined();o&&(a=o)}else a=t.globals.get(r);return a?a.orig.push(n):a=i.def_variable(n),a.undeclared&&t.variables.set(r,a),!!("arguments"==r&&f(s)&&n instanceof pe)||(s.defun=a.scope,s.forEach(function(t){t.redef=s,t.thedef=a,t.reference(e)}),!0)}t.walk(c),e.ie&&t.walk(new xe(function(e){if(e instanceof ie){var t=e.thedef,n=t.defun;return"arguments"!=t.name&&n.name instanceof pe&&n.name.name==t.name&&(n=n.parent_scope.resolve()),l(e,n),!0}if(e instanceof pe){var t=e.thedef;return l(e,e.scope.parent_scope.resolve())?void 0!==e.thedef.init?e.thedef.init=!1:t.init&&(e.thedef.init=t.init):t.defun=void 0,!0}}))}),_e.DEFMETHOD("def_global",function(e){var t=this.globals,n=e.name;if(t.has(n))return t.get(n);var i=this.make_def(e);return i.undeclared=!0,i.global=!0,t.set(n,i),i}),ke.DEFMETHOD("init_vars",function(e){Oe(this,e)}),J.DEFMETHOD("init_vars",function(e){De(this,e)}),g.DEFMETHOD("init_vars",function(e){return De(this,e),this}),v.DEFMETHOD("init_vars",function(e){De(this,e)}),$.DEFMETHOD("init_vars",function(e){return De(this,e),this.uses_arguments=!1,this.def_variable(new fe({name:"arguments",scope:this,start:this.start,end:this.end})),this}),te.DEFMETHOD("mark_enclosed",function(e){for(var t=this.definition(),n=this.scope;n&&o(n.enclosed,t)&&(e?(e.keep_fargs&&n instanceof $&&n.each_argname(function(e){o(t.scope.enclosed,e.definition())}),e.keep_fnames&&n.functions.each(function(e){o(t.scope.enclosed,e)})):n._var_names=void 0,n!==t.scope);n=n.parent_scope);}),te.DEFMETHOD("reference",function(e){this.definition().references.push(this),this.mark_enclosed(e)}),ke.DEFMETHOD("find_variable",function(e){return this.variables.get(e)||this.parent_scope&&this.parent_scope.find_variable(e)}),ke.DEFMETHOD("def_function",function(e,t){var n=this.def_variable(e,t);return(!n.init||n.init instanceof H)&&(n.init=t),this.functions.set(e.name,n),n}),ke.DEFMETHOD("def_variable",function(e,t){var n=this.variables.get(e.name);return n?(n.orig.push(e),n.init instanceof AST_LambdaExpression&&(n.init=t)):(n=this.make_def(e,t),this.variables.set(e.name,n),n.global=!this.parent_scope),e.thedef=n}),te.DEFMETHOD("unmangleable",function(e){var t=this.definition();return!t||t.unmangleable(e)}),V.DEFMETHOD("unmangleable",u),te.DEFMETHOD("definition",function(){return this.thedef}),_e.DEFMETHOD("mangle_names",function(e){if((e=Ne(e)).cache&&e.cache.props){var t=Ie(this,e);e.cache.props.each(function(e){t.set(e,!0)})}var n=-1,i=[],r=new xe(function(t,a){var o;if(t instanceof ke){t instanceof z&&(o=n),e.webkit&&t instanceof B&&t.init instanceof AST_Let&&t.init.definitions.forEach(function(e){e.name.match_symbol(function(e){if(e instanceof he){var t=e.definition(),n=e.scope.parent_scope,i=n.def_variable(e);e.thedef=t,n.to_mangle.push(i),t.redefined=function(){return i}}})},!0);var c=t.to_mangle=[];if(t.variables.each(function(t){(function(t){var n=t.orig[0],r=t.redefined();if(!r){if(!(n instanceof se))return!1;var s=t.scope.resolve();if(t.scope===s)return!1;if(t.scope.parent_scope.find_variable(n.name))return!1;r=s.def_variable(n),s.to_mangle.push(r)}i.push(t),t.references.forEach(a),(n instanceof ie||n instanceof se)&&(a(n),t.redefined=function(){return r});return!0;function a(n){n.thedef=r,n.reference(e),n.thedef=t}})(t)||c.push(t)}),a(),e.cache&&t instanceof _e&&t.globals.each(s),t instanceof E&&r.has_directive("use asm")){var u=new me(t.name);u.scope=t,u.reference(e)}if(c.length>36){var f=c.map(function(e,t){return t}).sort(function(e,t){return c[t].references.length-c[e].references.length||e-t});c=f.slice(0,36).sort(function(e,t){return e-t}).map(function(e){return c[e]}).concat(f.slice(36).sort(function(e,t){return e-t}).map(function(e){return c[e]}))}return c.forEach(s),!(t instanceof z)||e.v8&&function(t){var n,i=0;for(;n=t.parent(i++);){if(n instanceof y)return n instanceof _e&&!e.toplevel;if(n instanceof z)return!0}}(r)||(n=o),!0}if(t instanceof V){var l;do{l=Le(++n)}while(Te[l]);return t.mangled_name=l,!0}});function s(t){e.reserved.has[t.name]||t.mangle(e)}this.walk(r),i.forEach(s)}),_e.DEFMETHOD("find_colliding_names",function(e){var t=e.cache&&e.cache.props,n=Object.create(Te);return e.reserved.forEach(i),this.globals.each(r),this.walk(new xe(function(e){e instanceof ke&&e.variables.each(r)})),n;function i(e){n[e]=!0}function r(n){var r=n.name;if(n.global&&t&&t.has(r))r=t.get(r);else if(!n.unmangleable(e))return;i(r)}}),_e.DEFMETHOD("expand_names",function(e){Le.reset(),Le.sort(),e=Ne(e);var t=this.find_colliding_names(e),n=0;function i(i){if(!(i.global&&e.cache||i.unmangleable(e)||e.reserved.has[i.name])){var r=i.redefined(),s=r?r.rename||r.name:function(){var e;do{e=Le(n++)}while(t[e]);return e}();i.rename=s,i.forEach(function(e){e.definition()===i&&(e.name=s)})}}this.globals.each(i),this.walk(new xe(function(e){e instanceof ke&&e.variables.each(i)}))}),Y.DEFMETHOD("tail_node",f),K.DEFMETHOD("tail_node",function(){return this.expressions[this.expressions.length-1]}),_e.DEFMETHOD("compute_char_frequency",function(e){e=Ne(e),Le.reset();var t=te.prototype.add_source_map;try{te.prototype.add_source_map=function(){this.unmangleable(e)||Le.consider(this.name,-1)},e.properties&&(D.prototype.add_source_map=function(){Le.consider(this.property,-1)},Q.prototype.add_source_map=function(){!function e(t){t instanceof X?Le.consider(t.value,-1):t instanceof w?(e(t.consequent),e(t.alternative)):t instanceof K&&e(t.tail_node())}(this.property)}),Le.consider(this.print_to_string(),1)}finally{te.prototype.add_source_map=t,delete D.prototype.add_source_map,delete Q.prototype.add_source_map}Le.sort()});var Le=function(){var e=Object.create(null);function t(t){for(var n=[],i=0;i<t.length;i++){var r=t[i];n.push(r),e[r]=-.01*i}return n}var n,i,r=t("0123456789"),s=t("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_");function a(){n=null,i=Object.create(e)}function o(e,t){return i[t]-i[e]}function c(e){var t=s[e%54];for(e=Math.floor(e/54);--e>=0;e>>=6)t+=n[63&e];return t}return c.consider=function(e,t){for(var n=e.length;--n>=0;)i[e[n]]+=t},c.sort=function(){n=s.sort(o).concat(r).sort(o)},c.reset=a,a(),c}();return{base54:Le,is_lhs:Pe}}),define("skylark-uglifyjs/compress",["./utils","./ast","./output","./parse","./scope"],function(e,t,n,i,r){"use strict";const{AST_Accessor:s,AST_Array:a,AST_Arrow:o,AST_Assign:c,AST_AsyncArrow:u,AST_Await:f,AST_BigInt:l,AST_Binary:p,AST_Block:h,AST_BlockScope:d,AST_BlockStatement:m,AST_Boolean:g,AST_Break:_,AST_Call:v,AST_Case:y,AST_Catch:b,AST_Chain:x,AST_Class:S,AST_ClassExpression:w,AST_ClassInitBlock:k,AST_ClassProperty:A,AST_ClassStaticBlock:T,AST_ConciseMethod:E,AST_Conditional:C,AST_Const:P,AST_Constant:O,AST_Continue:D,AST_Debugger:I,AST_Default:N,AST_DefaultAssign:L,AST_DefaultValue:R,AST_DefClass:M,AST_Definitions:j,AST_Defun:F,AST_Destructuring:q,AST_Destructured:B,AST_DestructuredArray:V,AST_DestructuredKeyVal:z,AST_DestructuredObject:U,AST_Directive:$,AST_Do:H,AST_Dot:G,AST_DWLoop:W,AST_EmptyStatement:Y,AST_Exit:J,AST_Expansion:K,AST_Export:X,AST_ExportDeclaration:Q,AST_ExportDefault:Z,AST_ExportReferences:ee,AST_False:te,AST_Finally:ne,AST_For:ie,AST_ForEnumeration:re,AST_ForIn:se,AST_Function:ae,AST_Hole:oe,AST_If:ce,AST_Import:ue,AST_Infinity:fe,AST_IterationStatement:le,AST_Jump:pe,AST_LabeledStatement:he,AST_Lambda:de,AST_LambdaDefinition:me,AST_LambdaExpression:ge,AST_Let:_e,AST_LoopControl:ve,AST_NaN:ye,AST_New:be,AST_Node:xe,AST_Null:Se,AST_Number:we,AST_Object:ke,AST_ObjectKeyVal:Ae,AST_ObjectProperty:Te,AST_ObjectIdentity:Ee,AST_ObjectMethod:Ce,AST_PrefixedTemplateString:Pe,AST_PropAccess:Oe,AST_RegExp:De,AST_Return:Ie,AST_Scope:Ne,AST_Sequence:Le,AST_SimpleStatement:Re,AST_Spread:Me,AST_Statement:je,AST_String:Fe,AST_Sub:qe,AST_Switch:Be,AST_SwitchBranch:Ve,AST_Symbol:ze,AST_SymbolCatch:Ue,AST_SymbolClassProperty:$e,AST_SymbolConst:He,AST_SymbolDeclaration:Ge,AST_SymbolDefun:We,AST_SymbolExport:Ye,AST_SymbolFunarg:Je,AST_SymbolImport:Ke,AST_SymbolLambda:Xe,AST_SymbolLet:Qe,AST_SymbolMethod:Ze,AST_SymbolRef:et,AST_Template:tt,AST_TemplateString:nt,AST_This:it,AST_Toplevel:rt,AST_True:st,AST_Try:at,AST_Unary:ot,AST_UnaryPostfix:ct,AST_UnaryPrefix:ut,AST_Undefined:ft,AST_Var:lt,AST_VarDef:pt,AST_While:ht,AST_With:dt,AST_Yield:mt,TreeTransformer:gt,TreeWalker:_t,_INLINE:vt,_NOINLINE:yt,_PURE:bt,first_in_statement:xt,is_arrow:St,is_generator:wt,walk_body:kt,walk_lambda:At}=t,{all:Tt,defaults:Et,Dictionary:Ct,has_annotation:Pt,HOP:Ot,make_node:Dt,makePredicate:It,MAP:Nt,member:Lt,noop:Rt,push_uniq:Mt,regexp_source_fix:jt,regexp_is_safe:Ft,remove:qt,return_false:Bt,return_null:Vt,return_true:zt,return_this:Ut}=e,{is_basic_identifier_string:$t,JS_Parse_Error:Ht,parse:Gt,PRECEDENCE:Wt,is_identifier_string:Yt}=i,{OutputStream:Jt}=n,{base54:Kt,is_lhs:Xt}=r;function Qt(e,t){if(!(this instanceof Qt))return new Qt(e,t);gt.call(this,this.before,this.after),this.options=Et(e,{annotations:!t,arguments:!t,arrows:!t,assignments:!t,awaits:!t,booleans:!t,collapse_vars:!t,comparisons:!t,conditionals:!t,dead_code:!t,default_values:!t,directives:!t,drop_console:!1,drop_debugger:!t,evaluate:!t,expression:!1,functions:!t,global_defs:!1,hoist_exports:!t,hoist_funs:!1,hoist_props:!t,hoist_vars:!1,ie:!1,if_return:!t,imports:!t,inline:!t,join_vars:!t,keep_fargs:t,keep_fnames:!1,keep_infinity:!1,loops:!t,merge_vars:!t,module:!1,negate_iife:!t,objects:!t,optional_chains:!t,passes:1,properties:!t,pure_funcs:null,pure_getters:!t&&"strict",reduce_funcs:!t,reduce_vars:!t,rests:!t,sequences:!t,side_effects:!t,spreads:!t,strings:!t,switches:!t,templates:!t,top_retain:null,toplevel:!(!e||!e.module&&!e.top_retain),typeofs:!t,unsafe:!1,unsafe_comps:!1,unsafe_Function:!1,unsafe_math:!1,unsafe_proto:!1,unsafe_regexp:!1,unsafe_undefined:!1,unused:!t,varify:!t,webkit:!1,yields:!t},!0);var n=this.options.evaluate;this.eval_threshold=/eager/.test(n)?1/0:+n;var i=this.options.global_defs;if("object"==typeof i)for(var r in i)/^@/.test(r)&&Ot(i,r)&&(i[r.slice(1)]=Gt(i[r],{expression:!0}));!0===this.options.inline&&(this.options.inline=4),this.drop_fargs=this.options.keep_fargs?Bt:function(e,t){if(e.length_read)return!1;var n=e.name;if(!n)return t&&"Call"==t.TYPE&&t.expression===e;if(n.fixed_value()!==e)return!1;var i=n.definition();if(i.direct_access)return!1;var r=i.escaped;return r&&1!=r.depth},this.options.module&&(this.directives["use strict"]=!0);var s=this.options.pure_funcs;"function"==typeof s?this.pure_funcs=s:"string"==typeof s?this.pure_funcs=function(e){var t;return e instanceof v?t=e.expression:e instanceof tt&&(t=e.tag),!(t&&s===t.print_to_string())}:Array.isArray(s)?this.pure_funcs=function(e){var t;return e instanceof v?t=e.expression:e instanceof tt&&(t=e.tag),!(t&&Lt(t.print_to_string(),s))}:this.pure_funcs=zt;var a=this.options.sequences;this.sequences_limit=1==a?800:0|a;var o=this.options.top_retain;o instanceof RegExp?this.top_retain=function(e){return o.test(e.name)}:"function"==typeof o?this.top_retain=o:o&&("string"==typeof o&&(o=o.split(/,/)),this.top_retain=function(e){return Lt(e.name,o)});var c=this.options.toplevel;this.toplevel="string"==typeof c?{funcs:/funcs/.test(c),vars:/vars/.test(c)}:{funcs:c,vars:c}}return Qt.prototype=new gt(function(e,t,n){if(e._squeezed)return e;var i=e instanceof Ne;i&&(this.option("arrows")&&St(e)&&e.value&&(e.body=[e.first_statement()],e.value=null),e.hoist_properties(this),e.hoist_declarations(this),e.process_returns(this)),t(e,this),t(e,this);var r=e.optimize(this);return!i||r!==e||this.has_directive("use asm")||r.pinned()||(r.drop_unused(this),r.merge_variables(this)&&r.drop_unused(this),t(r,this)),r===e&&(r._squeezed=!0),r}),Qt.prototype.option=function(e){return this.options[e]},Qt.prototype.exposed=function(e){if(e.exported)return!0;if(e.undeclared)return!0;if(!(e.global||e.scope.resolve()instanceof rt))return!1;var t=this.toplevel;return!Tt(e.orig,function(e){return t[e instanceof We?"funcs":"vars"]})},Qt.prototype.compress=function(e){(e=e.resolve_defines(this)).hoist_exports(this),this.option("expression")&&e.process_expression(!0);for(var t=this.options.merge_vars,n=+this.options.passes||1,i=1/0,r=!1,s={ie:this.option("ie")},a=0;a<n;a++)if(e.figure_out_scope(s),(a>0||this.option("reduce_vars"))&&e.reset_opt_flags(this),this.options.merge_vars=t&&(r||a==n-1),e=e.transform(this),n>1){var o=0;if(e.walk(new _t(function(){o++})),xe.info("pass {pass}: last_count: {min_count}, count: {count}",{pass:a,min_count:i,count:o}),o<i)i=o,r=!1;else{if(r)break;r=!0}}return this.option("expression")&&e.process_expression(!1),e},function(e){function t(e,t){var n=t.get_property();if(!(n instanceof xe)){var i;if(e instanceof a){var r=e.elements;if("length"==n)return Kt(r.length,e);"number"==typeof n&&n in r&&(i=r[n])}else if(e instanceof de){if("length"==n)return e.length_read=!0,Kt(e.argnames.length,e)}else if(e instanceof ke){n=""+n;for(var s=e.properties,o=s.length;--o>=0;){var c=s[o];if(!Li(c))return;i||s[o].key!==n||(i=s[o].value)}}return i instanceof et&&i.fixed_value()||i}}function n(e,i,r,s,o,u,f){var l=i.parent(o);if(!(e.option("unsafe")&&l instanceof G&&function(e,t){if(e instanceof g)return In.Boolean[t];if(e instanceof we)return In.Number[t];if(e instanceof Fe)return In.String[t];if("valueOf"==t)return!1;if(e instanceof a)return In.Array[t];if(e instanceof de)return In.Function[t];if(e instanceof ke)return In.Object[t];if(e instanceof De)return In.RegExp[t]&&!e.value.global}(s,l.property))){var h=Xt(r,l);if(h)return h;if(0!=o||!s||!s.is_constant()){if(l instanceof a)return n(e,i,l,l,o+1);if(l instanceof c)switch(l.operator){case"=":return n(e,i,l,s,o+1,u,f);case"&&=":case"||=":case"??=":return n(e,i,l,l,o+1);default:return}if(l instanceof p){if(!wn[l.operator])return;return n(e,i,l,l,o+1)}if(l instanceof v)return!u&&l.expression===r&&!l.is_expr_pure(e)&&(!(s instanceof ge)||!(l instanceof be)&&s.contains_this());if(l instanceof C){if(l.condition===r)return;return n(e,i,l,l,o+1)}if(l instanceof re)return l.init===r;if(l instanceof Ae){if(l.value!==r)return;var d=i.parent(o+1);return n(e,i,d,d,o+2)}if(l instanceof Oe){if(l.expression!==r)return;var m=t(s,l);return(!u||f)&&n(e,i,l,m,o+1)}if(l instanceof Le){if(l.tail_node()!==r)return;return n(e,i,l,s,o+1,u,f)}}}}function i(e){return e instanceof S||e instanceof de}function r(e){return e instanceof S||e instanceof F||e instanceof ae}function x(e){return"arguments"==e.name&&e.scope.uses_arguments}function T(e,t){do{if(e===t)return!1;if(t instanceof Ne)return!0}while(t=t.parent_scope)}function E(e,t,n){var i=e.redef||e.definition();return(!e.in_arg||!is_funarg(i))&&Tt(i.orig,function(e){return e instanceof He||e instanceof Qe?e instanceof Ke||t&&ai(t,e):!(n&&e instanceof Xe)})}function L(e,t,n,i){return i instanceof c?"="==i.operator&&i.right===n:i instanceof v?i.expression!==n||i instanceof be:i instanceof AST_ClassField?i.value===n&&!i.static:i instanceof J?i.value===n&&t.resolve()!==e.scope.resolve():i instanceof pt?i.value===n:void 0}function q(e,t){var n=Ft(et,e);return n.fixed=t||Ft(ft,e),n}function K(e,t){return function(n){var i=e(n),n=q(i,t),r=i.definition();return r.references.push(n),r.replaced++,n}}e(xe,function(e,t){return e}),rt.DEFMETHOD("hoist_exports",function(e){if(e.option("hoist_exports")){for(var t=this.body,n=[],i=0;i<t.length;i++){var r=t[i];r instanceof Q?(t[i]=r=r.body,r instanceof j?r.definitions.forEach(function(e){e.name.match_symbol(s,!0)}):s(r.name)):r instanceof ee&&(t.splice(i--,1),[].push.apply(n,r.properties))}n.length&&t.push(Ft(ee,this,{properties:n}))}function s(e){if(e instanceof Ge){var t=Ft(Ye,e);t.alias=Ft(Fe,t,{value:t.name}),n.push(t)}}}),Ne.DEFMETHOD("process_expression",function(e,t){var n=this,i=new gt(function(r){if(e){if(r instanceof $&&(r=Ft(Re,r,{body:Ft(Fe,r)})),r instanceof Re)return t?t(r):Ft(Ie,r,{value:r.body})}else if(r instanceof Ie){if(t)return t(r);var s=r.value;return s instanceof Fe?Ft($,s):Ft(Re,r,{body:s||Ft(ut,r,{operator:"void",expression:Ft(we,r,{value:0})})})}if(r instanceof h){if(r instanceof de){if(r!==n)return r}else if("awaits"===e&&r instanceof at&&r.bfinally)return r;for(var a=r.body.length;--a>=0;){var o=r.body[a];if(!_n(o,!0)){r.body[a]=o.transform(i);break}}}else r instanceof ce?(r.body=r.body.transform(i),r.alternative&&(r.alternative=r.alternative.transform(i))):r instanceof dt&&(r.body=r.body.transform(i));return r});n.transform(i)}),rt.DEFMETHOD("unwrap_expression",function(){switch(this.body.length){case 0:return Ft(ut,this,{operator:"void",expression:Ft(we,this,{value:0})});case 1:var e=this.body[0];if(e instanceof $)return Ft(Fe,e);if(e instanceof Re)return e.body;default:return Ft(v,this,{expression:Ft(ae,this,{argnames:[],body:this.body}).init_vars(this),args:[]})}}),xe.DEFMETHOD("wrap_expression",function(){var e=this;return is_statement(e)||(e=Ft(Re,e,{body:e})),e instanceof rt||(e=Ft(rt,e,{body:[e]})),e});var X=/^(0|[1-9][0-9]*)$/;function Pe(e){e._squeezed=!1,e._optimized=!1,e instanceof d&&(e._var_names=void 0),e instanceof et&&(e.fixed=void 0)}function $e(e,t){return this.transform(new gt(function(n,i){return n instanceof R?((n=n.clone()).name=n.name.transform(this),n):n instanceof B?(n=n.clone(),i(n,this),n):n instanceof z?((n=n.clone()).value=n.value.transform(this),n):n.convert_symbol(e,t)}))}function Ze(e,t){var n=Ft(e,this);return t(n,this)||n}function nt(e){var t=e.definition();t.assignments++,t.references.push(e)}function vt(e,t){var n=new _t(function(i){return i instanceof R?(i.value.walk(t),i.name.walk(n),!0):i instanceof z?(i.key instanceof xe&&i.key.walk(t),i.value.walk(n),!0):e(i)});this.walk(n)}function yt(e){return e(this)}function bt(e,t){var n=!1,i=new _t(function(r){return!!n||(r instanceof R?t?(r.name.walk(i),!0):n=!0:r instanceof z?!t&&r.key instanceof xe?n=!0:(r.value.walk(i),!0):e(r)?n=!0:void 0)});return this.walk(i),n}function Et(e){return e instanceof AST_AsyncGeneratorDefun||e instanceof AST_AsyncGeneratorFunction}function Pt(e){var t=0,n=e.self();do{if(n.variables)return n}while(n=e.parent(t++))}function Dt(e,t,n,i,r,s){for(var a;a=e.parent(t++);n=a){if(a===i)return!1;if(s&&a instanceof de){if(a.name||is_async(a)||wt(a))return!0}else if(a instanceof at){if(a.bfinally&&a.bfinally!==n)return!0;if(r&&a.bcatch&&a.bcatch!==n)return!0}}return!1}!function(e){function r(e,t,n){n.assignments=0,n.bool_return=0,n.drop_return=0,n.cross_loop=!1,n.direct_access=!1,n.escaped=[],n.fixed=!n.const_redefs&&!n.scope.pinned()&&!t.exposed(n)&&!(n.init instanceof ge&&n.init!==n.scope)&&n.init,n.reassigned=0,n.recursive_refs=0,n.references=[],n.single_use=void 0}function s(e,t,n){n.variables.each(function(n){r(e,t,n)})}function o(e,t,n){n.fn_defs=[],n.variables.each(function(i){r(e,t,i);var s=i.init;s instanceof me&&(n.fn_defs.push(s),s.safe_ids=null),null===i.fixed?(i.safe_ids=e.safe_ids,y(e,i)):i.fixed&&(e.loop_ids[i.id]=e.in_loop,y(e,i))}),n.may_call_this=function(){n.may_call_this=n.contains_this()?zt:Bt},n.uses_arguments&&n.each_argname(function(e){e.definition().last_ref=!1}),t.option("ie")&&n.variables.each(function(e){var t=e.orig[0].definition();t!==e&&(t.fixed=!1)})}function u(e,t){var n=t.safe_ids;return void 0===n||n===e.safe_ids}function f(e,t){var n=e.fn_scanning;e.fn_scanning=t,t.walk(e),e.fn_scanning=n}function l(e,t){t.enclosed.forEach(function(n){if(t.variables.get(n.name)!==n&&!w(e,n)){n.single_use=!1;var i=n.fixed;"function"==typeof i&&(i=i()),i instanceof de&&void 0!==i.safe_ids||(n.fixed=!1)}})}function h(e,t,n){var i=n.safe_ids;if(void 0!==i&&!1!==i)if(n.parent_scope.resolve().may_call_this===zt)Lt(n,e.fn_visited)&&l(e,n);else if(i){var r=Lt(n,e.fn_visited);i===e.safe_ids?r||f(e,n):r?l(e,n):n.safe_ids=!1}else e.fn_scanning&&e.fn_scanning!==t.scope.resolve()?n.safe_ids=!1:(n.safe_ids=e.safe_ids,f(e,n))}function m(e,t){var n=t.fn_defs,i=t.may_call_this===zt?n:n.filter(function(t){return!1===t.safe_ids||(t.safe_ids=e.safe_ids,f(e,t),!1)});_(e),i.forEach(function(t){t.safe_ids=e.safe_ids,f(e,t)}),n.forEach(function(e){e.safe_ids=void 0}),t.fn_defs=void 0,t.may_call_this=void 0}function g(e,t){var n=Object.create(e.safe_ids);t||(n.seq={}),e.safe_ids=n}function _(e){e.safe_ids=Object.getPrototypeOf(e.safe_ids)}function y(e,t){e.safe_ids[t.id]={}}function b(e,t){e.references.push(t),!1!==e.last_ref&&(e.last_ref=t)}function w(e,t){if("m"==t.single_use)return!1;var n=e.safe_ids[t.id];if(n){var i=Ot(e.safe_ids,t.id);if(!i){var r=e.safe_ids.seq;n.read?n.read!==r&&(n.read=!0):n.read=r}return null==t.fixed?!x(t)&&((!t.global||"arguments"!=t.name)&&(e.loop_ids[t.id]=null,t.fixed=Ft(ft,t.orig[0]),i&&(t.safe_ids=void 0),!0)):!n.assign||n.assign===e.safe_ids}return t.fixed instanceof me}function A(e,t,n){if(!n){if(is_funarg(t)&&t.scope.uses_arguments&&!e.has_directive("use strict"))return!1;if(!Tt(t.orig,function(e){return!(e instanceof He)}))return!1}if(void 0===t.fixed)return n||Tt(t.orig,function(e){return!(e instanceof Qe)});if(!1===t.fixed||0===t.fixed)return!1;var i=e.safe_ids[t.id];if(t.safe_ids)return t.safe_ids[t.id]=!1,t.safe_ids=void 0,null===t.fixed||Ot(e.safe_ids,t.id)&&!i.read;if(!Ot(e.safe_ids,t.id)){if(!i)return!1;if(i.read||e.in_loop){var r=e.find_parent(d);if(r instanceof S)return!1;if(t.scope.resolve()!==r.resolve())return!1}i.assign=!(!i.assign||i.assign===e.safe_ids)||e.safe_ids}if(null!=t.fixed&&i.read){if(i.read!==e.safe_ids.seq)return!1;if(e.loop_ids[t.id]!==e.in_loop)return!1}return w(e,t)&&Tt(t.orig,function(e){return!(e instanceof Xe)})}function P(e){if(!e)return!1;if(e instanceof c){var t=e.operator;return"="==t?P(e.right):!wn[t.slice(0,-1)]}return e instanceof Le?P(e.tail_node()):e.is_constant()||i(e)||e instanceof Ee}function O(e,n,i,r,s,o,c){var u=e.parent(o);if(!s||!s.is_constant()){if(L(n,i,r,u))return n.escaped.push(u),!(c>1)||s&&s.is_constant_expression(i)||(c=1),(!n.escaped.depth||n.escaped.depth>c)&&(n.escaped.depth=c),n.scope.resolve()!==i.resolve()&&(n.escaped.cross_scope=!0),void(n.fixed&&(n.fixed.escaped=n.escaped));if(function(e,t){if(t instanceof a)return!0;if(t instanceof p)return wn[t.operator];if(t instanceof C)return t.condition!==e;if(t instanceof Le)return t.tail_node()===e;if(t instanceof Me)return!0}(r,u))O(e,n,i,u,u,o+1,c);else if(u instanceof Ae&&u.value===r){var f=e.parent(o+1);O(e,n,i,f,f,o+2,c)}else if(u instanceof Oe&&u.expression===r&&(s=t(s,u),O(e,n,i,u,s,o+1,c+1),s))return;o>0||u instanceof v&&u.expression===r||u instanceof Le&&u.tail_node()!==r||u instanceof Re||u instanceof ot&&!unary_side_effects[u.operator]||(n.direct_access=!0,n.fixed&&(n.fixed.direct_access=!0))}}function D(e){if(e instanceof qe){var t=e.expression;if(t instanceof et){var n=t.definition();if(x(n)){var i=e.property;i.is_constant()&&(i=i.value),(i instanceof xe||X.test(i))&&(n.reassigned++,(i instanceof xe?n.scope.argnames:[n.scope.argnames[i]]).forEach(function(e){e instanceof Je&&(e.definition().fixed=!1)}))}}}}function I(e,t){var n,i;return function(){var r=e();return n!==r&&(n=r,i=t(r)),i}}function M(e,t,n,i,r){var s=new _t(function(n){if(n instanceof R){Pe(n),g(e,!0),n.value.walk(e),_(e);var o=i;return o&&(i=function(e,t,n){var i,r;return function(){if(r===t)return t;var s=n(),a=ei(e,s,!0);return a instanceof xe?r=t:i!==s&&(i=s,r=void 0===a?$t(t,[s,t.value]):s),r}}(t,n,o)),n.name.walk(s),i=o,!0}if(n instanceof V){Pe(n);var c,o=i;if(n.elements.forEach(function(e,t){if(e instanceof oe)return Pe(e);o&&(i=I(o,function(n){return Ft(qe,e,{expression:n,property:Ft(we,e,{value:t})})})),e.walk(s)}),n.rest)o&&(i=t.option("rests")&&I(o,function(e){if(!(e instanceof a))return n;for(var t=0,i=n.elements.length;t<i;t++)if(e.elements[t]instanceof Me)return n;return c||(c=Ft(a,n,{})),c.elements=e.elements.slice(i),c})),n.rest.walk(s);return i=o,!0}if(n instanceof U){Pe(n);var o=i;return n.properties.forEach(function(t){Pe(t),t.key instanceof xe&&(g(e),t.key.walk(e),_(e)),o&&(i=I(o,function(e){var n=t.key,i=qe;return"string"==typeof n&&(Yt(n)?i=G:n=Kt(n,t)),Ft(i,t,{expression:e,property:n})})),t.value.walk(s)}),n.rest&&(i=!1,n.rest.walk(s)),i=o,!0}return r(n,i,function(){for(var t=e.stack.length,i=0,r=s.stack.length-1;i<r;i++)e.stack.push(s.stack[i]);n.walk(e),e.stack.length=t}),!0});n.walk(s)}function F(e,t,n){var i=this;i.inlined=!1;var r=e.parent(),s=!is_async(i)&&!wt(i),c=!s,u=!1;i.walk(new _t(function(e){return c?u=!0:e instanceof Ie?c=!0:e instanceof Ne&&e!==i||void 0})),u&&g(e,s),o(e,n,i);var f=!i.uses_arguments||e.has_directive("use strict");i.argnames.forEach(function(t,s){var a=r.args[s];M(e,n,t,function(){var e=i.argnames.indexOf(t),n=e<0?a:r.args[e];return n instanceof Le&&n.expressions.length<2&&(n=n.expressions[0]),n||Ft(ft,r)},d)});var l,p=i.rest;p&&M(e,n,p,n.option("rests")&&function(){return i.rest!==p?p:(l||(l=Ft(a,i,{})),l.elements=r.args.slice(i.argnames.length),l)},d),At(i,e);var h=e.safe_ids;return m(e,i),u||(e.safe_ids=h),!0;function d(t,n){var i=t.definition();n&&f&&void 0===i.fixed?(y(e,i),e.loop_ids[i.id]=e.in_loop,i.fixed=n,i.fixed.assigns=[t]):i.fixed=!1}}e(xe,Rt),e(c,function(e,t,i){var r=this,s=r.left,a=r.right,o=s instanceof et&&s.definition(),c=o||s instanceof B;switch(r.operator){case"=":return s.equals(a)&&!s.has_side_effects(i)?(a.walk(e),function t(n){Pe(n);if(n instanceof G)t(n.expression);else if(n instanceof qe)t(n.expression),n.property.walk(e);else if(n instanceof et){var i=n.definition();b(i,n),i.fixed&&(n.fixed=i.fixed,n.fixed.assigns?n.fixed.assigns.push(r):n.fixed.assigns=[r])}else n.walk(e)}(s),r.redundant=!0,!0):o&&a instanceof ge?(d(),a.parent_scope.resolve().fn_defs.push(a),a.safe_ids=null,o.fixed&&r.write_only||h(e,o,a),!0):c?(a.walk(e),d(),!0):void D(s);case"&&=":case"||=":case"??=":var u=!0;default:if(!c)return D(s),m();o.assignments++;var f=o.fixed;if(n(i,e,r,r,0))return o.fixed=!1,m();var l=w(e,o);return u&&g(e,!0),a.walk(e),u&&_(e),l&&!s.in_arg&&A(e,o)?(b(o,s),y(e,o),o.single_use&&(o.single_use=!1),s.fixed=o.fixed=function(){return Ft(p,r,{operator:r.operator.slice(0,-1),left:q(s,f),right:r.right})},s.fixed.assigns=f&&f.assigns?f.assigns.slice():[o.orig[0]],s.fixed.assigns.push(r),s.fixed.to_binary=K(function(e){return e.left},f)):(s.walk(e),o.fixed=!1),!0}function d(){var t=o&&Ai(e,o),c=n(i,e,r,a,0,P(a),t);M(e,i,s,function(){return r.right},function(t,n,i){if(!(t instanceof et))return D(t),void i();var o=t.definition();o.assignments++,n&&!t.in_arg&&A(e,o)?(b(o,t),y(e,o),(s instanceof B||1==o.orig.length&&o.orig[0]instanceof We)&&(o.single_use=!1),e.loop_ids[o.id]=e.in_loop,o.fixed=c?0:n,t.fixed=n,t.fixed.assigns=[r],O(e,o,t.scope,r,a,0,1)):(i(),o.fixed=!1)})}function m(){if(u)return s.walk(e),g(e,!0),a.walk(e),_(e),!0}}),e(p,function(e){if(wn[this.operator])return this.left.walk(e),g(e,!0),this.right.walk(e),_(e),!0}),e(d,function(e,t,n){s(e,n,this)}),e(v,function(e,t){var n=this.expression;if(n instanceof ge){var i=ln(this);return this.args.forEach(function(t){t.walk(e),t instanceof Me&&(i=!1)}),i&&(n.reduce_vars=F),n.walk(e),i&&delete n.reduce_vars,!0}if("Call"==this.TYPE)switch(e.in_boolean_context()){case"d":var r=!0;case!0:!function e(t,n){if(t instanceof c){if("="!=t.operator)return;e(t.left,n),e(t.right,n)}else if(t instanceof p){if(!wn[t.operator])return;e(t.left,n),e(t.right,n)}else if(t instanceof C)e(t.consequent,n),e(t.alternative,n);else if(t instanceof et){var i=t.definition();i.bool_return++,n&&i.drop_return++}}(n,r)}n.walk(e);var s=this.optional;s&&g(e,!0),this.args.forEach(function(t){t.walk(e)}),s&&_(e);var a=n instanceof et&&n.fixed_value();return a instanceof de?h(e,n.definition(),a):e.find_parent(Ne).may_call_this(),!0}),e(S,function(e,t,n){var i=this;s(e,n,i),i.extends&&i.extends.walk(e);var r=i.properties.filter(function(t){return Pe(t),t.key instanceof xe&&(e.push(t),t.key.walk(e),e.pop()),t.value});if(i.name){var a=i.name.definition(),o=e.parent();(o instanceof Q||o instanceof Z)&&(a.single_use=!1),A(e,a,!0)?(y(e,a),e.loop_ids[a.id]=e.in_loop,a.fixed=function(){return i},a.fixed.assigns=[i],ii(a)||(a.single_use=!1)):a.fixed=!1}return r.forEach(function(t){e.push(t),!t.static||mn(t)&&t.value.contains_this()?(g(e),t.value.walk(e),_(e)):t.value.walk(e),e.pop()}),!0}),e(k,function(e,t,n){return g(e,!0),o(e,n,this),t(),m(e,this),!0}),e(C,function(e){return this.condition.walk(e),g(e,!0),this.consequent.walk(e),_(e),g(e,!0),this.alternative.walk(e),_(e),!0}),e(R,function(e){return g(e,!0),this.value.walk(e),_(e),this.name.walk(e),!0}),e(H,function(e){var t=e.in_loop;return e.in_loop=this,g(e),this.body.walk(e),Qn(this,e.parent())&&(_(e),g(e)),this.condition.walk(e),_(e),e.in_loop=t,!0}),e(ie,function(e,t,n){s(e,n,this),this.init&&this.init.walk(e);var i=e.in_loop;return e.in_loop=this,g(e),this.condition&&this.condition.walk(e),this.body.walk(e),this.step&&(Qn(this,e.parent())&&(_(e),g(e)),this.step.walk(e)),_(e),e.in_loop=i,!0}),e(re,function(e,t,n){s(e,n,this),this.object.walk(e);var i=e.in_loop;e.in_loop=this,g(e);var r=this.init;return r instanceof j?r.definitions[0].name.mark_symbol(function(e){if(e instanceof Ge){var t=e.definition();t.assignments++,t.fixed=!1}},e):r instanceof B||r instanceof et?r.mark_symbol(function(e){if(e instanceof et){var t=e.definition();b(t,e),t.assignments++,e.is_immutable()||(t.fixed=!1)}},e):r.walk(e),this.body.walk(e),_(e),e.in_loop=i,!0}),e(ce,function(e){return this.condition.walk(e),g(e,!0),this.body.walk(e),_(e),this.alternative&&(g(e,!0),this.alternative.walk(e),_(e)),!0}),e(he,function(e){return g(e,!0),this.body.walk(e),_(e),!0}),e(de,function(e,t,n){var i=this;return!u(e,i)||(!Mt(e.fn_visited,i)||(i.inlined=!1,g(e),o(e,n,i),t(),m(e,i),i.name&&O(e,i.name.definition(),i,i.name,i,0,1),!0))}),e(me,function(e,t,n){var i=this,r=i.name.definition(),s=e.parent();return(s instanceof Q||s instanceof Z)&&(r.single_use=!1),!u(e,i)||(!Mt(e.fn_visited,i)||(i.inlined=!1,g(e),o(e,n,i),t(),m(e,i),!0))}),e(qe,function(e){if(this.optional)return this.expression.walk(e),g(e,!0),this.property.walk(e),_(e),!0}),e(Be,function(e,t,n){s(e,n,this),this.expression.walk(e);var i=!0;return this.body.forEach(function(t){t instanceof N||(t.expression.walk(e),i&&(i=!1,g(e,!0)))}),i||_(e),kt(this,e),!0}),e(Ve,function(e){return g(e,!0),kt(this,e),_(e),!0}),e(Ue,function(){this.definition().fixed=!1}),e(Ke,function(){this.definition().fixed=!1}),e(et,function(e,t,r){var s=this,a=s.definition(),o=a.fixed||a.last_ref&&a.last_ref.fixed;b(a,s),1==a.references.length&&!a.fixed&&a.orig[0]instanceof We&&(e.loop_ids[a.id]=e.in_loop);var c,u=Ai(e,a);switch(u&&u.enclosed.forEach(function(t){if(a!==t&&t.scope.resolve()!==u){var n=t.fixed&&t.fixed.assigns;if(n&&!(n[n.length-1]instanceof pt)){var i=e.safe_ids[t.id];i&&(i.assign=!0)}}}),"m"==a.single_use&&a.fixed&&(a.fixed=0,a.single_use=!1),a.fixed){case 0:w(e,a)||(a.fixed=!1);case!1:var f=a.redefined();f&&T(a.scope,s.scope)&&(f.single_use=!1);break;case void 0:a.fixed=!1;break;default:if(!w(e,a)){a.fixed=!1;break}s.in_arg&&a.orig[0]instanceof Xe&&(s.fixed=a.scope);var l=s.fixed_value();u?a.recursive_refs++:l&&function(e,t){return e.option("unused")&&!t.scope.pinned()&&!1!==t.single_use&&t.references.length-t.recursive_refs==1&&!(is_funarg(t)&&t.scope.uses_arguments)}(r,a)?(a.in_loop=e.loop_ids[a.id]!==e.in_loop,a.single_use=i(l)&&!l.pinned()&&(!a.in_loop||e.parent()instanceof v)||!a.in_loop&&a.scope===s.scope.resolve()&&l.is_constant_expression()):a.single_use=!1,n(r,e,s,l,0,P(l),u)&&(a.single_use?a.single_use="m":a.fixed=0),a.fixed&&e.loop_ids[a.id]!==e.in_loop&&(a.cross_loop=!0),O(e,a,s.scope,s,l,0,1)}s.fixed||(s.fixed=0===a.fixed?o:a.fixed),l instanceof de&&!((c=e.parent())instanceof v&&c.expression===s)&&h(e,a,l)}),e(tt,function(e,t){var n=this.tag;if(n){if(n instanceof ge)return this.expressions.forEach(function(t){t.walk(e)}),n.walk(e),!0;n.walk(e),this.expressions.forEach(function(t){t.walk(e)});var i=n instanceof et&&n.fixed_value();return i instanceof de?h(e,n.definition(),i):e.find_parent(Ne).may_call_this(),!0}}),e(rt,function(e,t,n){return this.globals.each(function(t){r(e,n,t)}),g(e,!0),o(e,n,this),t(),m(e,this),!0}),e(at,function(e,t,n){return s(e,n,this),g(e,!0),kt(this,e),_(e),this.bcatch&&(g(e,!0),this.bcatch.walk(e),_(e)),this.bfinally&&this.bfinally.walk(e),!0}),e(ot,function(e,t){var n=this;if(UNARY_POSTFIX[n.operator]){var i=n.expression;if(i instanceof et){var r=i.definition();r.assignments++;var s=r.fixed;return w(e,r)&&!i.in_arg&&A(e,r)?(b(r,i),y(e,r),r.single_use&&(r.single_use=!1),r.fixed=function(){return Ft(p,n,{operator:n.operator.slice(0,-1),left:Ft(ut,n,{operator:"+",expression:q(i,s)}),right:Ft(we,n,{value:1})})},r.fixed.assigns=s&&s.assigns?s.assigns.slice():[],r.fixed.assigns.push(n),n instanceof ut?i.fixed=r.fixed:(i.fixed=function(){return Ft(ut,n,{operator:"+",expression:q(i,s)})},i.fixed.assigns=s&&s.assigns,i.fixed.to_prefix=K(function(e){return e.expression},r.fixed))):(i.walk(e),r.fixed=!1),!0}D(i)}}),e(pt,function(e,t,n){var i=this,r=i.value;if(r instanceof ge&&i.name instanceof Ge){a(),r.parent_scope.resolve().fn_defs.push(r),r.safe_ids=null;var s=i.name.definition();s.fixed||h(e,s,r)}else r?(r.walk(e),a()):e.parent()instanceof _e&&a();return!0;function a(){M(e,n,i.name,function(){return i.value||Ft(ft,i)},function(t,n){var r=t.definition();n&&A(e,r,!0)?(y(e,r),e.loop_ids[r.id]=e.in_loop,r.fixed=n,r.fixed.assigns=[i],(t instanceof He&&r.redefined()||!E(t)&&!ii(r))&&(r.single_use=!1)):r.fixed=!1})}}),e(ht,function(e,t){var n=e.in_loop;return e.in_loop=this,g(e),t(),_(e),e.in_loop=n,!0})}(function(e,t){e.DEFMETHOD("reduce_vars",t)}),rt.DEFMETHOD("reset_opt_flags",function(e){var t=new _t(e.option("reduce_vars")?function(n,i){return Pe(n),n.reduce_vars(t,i,e)}:Pe);t.fn_scanning=null,t.fn_visited=[],t.in_loop=null,t.loop_ids=Object.create(null),t.safe_ids=Object.create(null),t.safe_ids.seq={},this.walk(t)}),ze.DEFMETHOD("fixed_value",function(e){var t=this.definition(),n=t.fixed;if(n)return this.fixed&&(n=this.fixed),(n instanceof xe?n:n()).tail_node();if(!(n=0===n&&this.fixed))return n;var i=(n instanceof xe?n:n()).tail_node();return e&&1!=t.escaped.depth&&yi(i,!0)?i:i.is_constant()?i:void 0}),et.DEFMETHOD("is_immutable",function(){var e=this.redef||this.definition();return e.orig[0]instanceof Xe&&(1==e.orig.length||!!this.in_arg&&!(e.orig[1]instanceof Je))}),xe.DEFMETHOD("convert_symbol",Rt),R.DEFMETHOD("convert_symbol",$e),B.DEFMETHOD("convert_symbol",$e),Ge.DEFMETHOD("convert_symbol",Ze),et.DEFMETHOD("convert_symbol",Ze),R.DEFMETHOD("mark_symbol",vt),B.DEFMETHOD("mark_symbol",vt),Ge.DEFMETHOD("mark_symbol",yt),et.DEFMETHOD("mark_symbol",yt),xe.DEFMETHOD("match_symbol",function(e){return e(this)}),R.DEFMETHOD("match_symbol",bt),B.DEFMETHOD("match_symbol",bt);var Nt=It("Infinity NaN undefined");function jt(e,t){if(e instanceof AST_Atom)return!0;if(e instanceof Ee)return!0;if(e instanceof Oe){if("__proto__"===e.property)return!0;if((e=e.expression)instanceof et){if(e.is_immutable())return!1;e=e.fixed_value()}return!e||(!!e.tail_node().is_constant()||jt(e,t))}if(e instanceof et){if(e.is_immutable())return!0;var n=e.definition();return t.exposed(n)&&Nt[n.name]}return!1}function Ft(e,t,n){return n?(n.start=t.start,n.end=t.end):n=t,new e(n)}function $t(e,t){return 1==t.length?t[0]:Ft(Le,e,{expressions:t.reduce(nn,[])})}function Kt(e,t){switch(typeof e){case"string":return Ft(Fe,t,{value:e});case"number":return isNaN(e)?Ft(ye,t):isFinite(e)?1/e<0?Ft(ut,t,{operator:"-",expression:Ft(we,t,{value:-e})}):Ft(we,t,{value:e}):e<0?Ft(ut,t,{operator:"-",expression:Ft(fe,t)}):Ft(fe,t);case"boolean":return Ft(e?st:te,t);case"undefined":return Ft(ft,t);default:if(null===e)return Ft(Se,t);if(e instanceof RegExp)return Ft(De,t,{value:e});throw new Error(string_template("Can't handle constant of type: {type}",{type:typeof e}))}}function Zt(e){return e instanceof Oe||pn(e)&&"eval"==e.name}function en(e,t,n){var i=!1;return"Call"==e.TYPE?i=e.expression===t&&Zt(n):e instanceof tt?i=e.tag===t&&Zt(n):e instanceof ut&&(i="delete"==e.operator||"typeof"==e.operator&&pn(n)),i?$t(t,[Ft(we,t,{value:0}),n]):n}function tn(e,t){var n=new Ct;return e.walk(new _t(function(e){if(e instanceof et){var t=e.definition(),i=e.fixed;i&&n.has(t.id)?n.get(t.id)!==i&&n.set(t.id,!1):n.set(t.id,i)}})),n.size()>0&&t.walk(new _t(function(e){if(e instanceof et){var t=e.definition(),i=e.fixed;i&&n.has(t.id)&&n.get(t.id)!==i&&(e.fixed=!1)}})),t}function nn(e,t){return t instanceof Le?[].push.apply(e,t.expressions):e.push(t),e}function rn(e){return e instanceof P||e instanceof M||e instanceof _e}function sn(e){if(e instanceof me){var t=e.name.definition(),n=e.name.scope;return t.scope===n||Tt(t.references,function(e){var t=e.scope;do{if(t===n)return!0}while(t=t.parent_scope)})}return!rn(e)}function an(e){if(null===e)return[];if(e instanceof m)return Tt(e.body,sn)?e.body:[e];if(e instanceof Y)return[];if(is_statement(e))return[e];throw new Error("Can't convert thing to statement array")}function on(e){return null===e||(e instanceof Y||e instanceof m&&0==e.body.length)}function cn(e){return Tt(e.body,function(e){return on(e)||e instanceof F||e instanceof lt&&gn(e)})}function un(e){return e instanceof le&&e.body instanceof m?e.body:e}function fn(e){if("Call"!=e.TYPE)return!1;do{e=e.expression}while(e instanceof Oe);return e instanceof ge?!St(e):fn(e)}function ln(e){var t=e.expression;if(t.name)return!1;if(!(e instanceof be))return!0;var n=!1;return t.walk(new _t(function(e){return!!n||(e instanceof AST_NewTarget?n=!0:e instanceof Ne&&e!==t||void 0)})),!n}function pn(e){return e instanceof et&&e.definition().undeclared}var hn,dn=It("Array Boolean clearInterval clearTimeout console Date decodeURI decodeURIComponent encodeURI encodeURIComponent Error escape eval EvalError Function isFinite isNaN JSON Map Math Number parseFloat parseInt RangeError ReferenceError RegExp Object Set setInterval setTimeout String SyntaxError TypeError unescape URIError WeakMap WeakSet");function mn(e){return e.static&&e.value&&(e instanceof AST_ClassField||e instanceof AST_ClassInit)}function gn(e){return Tt(e.definitions,function(e){return!e.value})}function _n(e,t){return e instanceof M?t&&!e.extends&&Tt(e.properties,function(e){return!(e.key instanceof xe)&&!mn(e)}):e instanceof j?(t||e instanceof lt)&&gn(e):e instanceof Q?_n(e.body,t):e instanceof Z?_n(e.body,t):e instanceof me}function vn(e,t){var n=e.lastIndexOf(t);if(n<0)return!1;for(;++n<e.length;)if(!_n(e[n],!0))return!1;return!0}function yn(e,t){var n;if(e.init instanceof m&&(n=e.init,e.init=n.body.pop(),n.body.push(e)),e.init instanceof F?(n||(n=Ft(m,e,{body:[e]})),n.body.splice(-1,0,e.init),e.init=null):e.init instanceof Re?e.init=e.init.body:on(e.init)&&(e.init=null),n)return t?List.splice(n.body):n}function bn(e,t){var i,o,u,l,g,w,k=q(t,function(e){return e instanceof de});!function(){var e=t.self(),n=0;do{if(!i&&e.variables&&(i=e),e instanceof b)t.parent(n).bfinally&&(g||(g={}),g.bfinally=!0),n++;else if(e instanceof ne)n++;else if(e instanceof le)l=!0;else{if(e instanceof Ne){w=e;break}e instanceof at&&(g||(g={}),e.bcatch&&(g.bcatch=!0),e.bfinally&&(g.bfinally=!0))}}while(e=t.parent(n++))}();var A,T,O=10;do{if(T=A,A=0,X(e)&&(A=1),!A&&1==T)break;if(t.option("dead_code")&&(ee(e,t)&&(A=2),!A&&2==T))break;if(t.option("if_return")&&(Z(e,t)&&(A=3),!A&&3==T))break;if(t.option("awaits")&&t.option("side_effects")&&(te(e,t)&&(A=4),!A&&4==T))break;if(t.option("inline")>=4&&(oe(e,t)&&(A=5),!A&&5==T))break;if(t.sequences_limit>0){if(ue(e,t)&&(A=6),!A&&6==T)break;if(ye(e,t)&&(A=7),!A&&7==T)break}if(t.option("join_vars")&&(Fe(e)&&(A=8),!A&&8==T))break;t.option("collapse_vars")&&K(e,t)&&(A=9)}while(A&&O-- >0);return e;function q(e,t){var n,i=e.self(),r=0;do{if(i instanceof b)i=e.parent(r++);else if(i instanceof he)i=i.body;else if(i instanceof Ve){var s=e.parent(r);(s.body[s.body.length-1]===i||a(i.body))&&(r++,i=s)}do{if(t(n=i))return n;i=e.parent(r++)}while(i instanceof ce)}while(n&&(i instanceof m||i instanceof b||i instanceof Ne||i instanceof Ve||i instanceof at)&&vn(i.body,n));function a(e){for(var t=e.length;--t>=0;)if(e[t]instanceof _)return!0;return!1}}function K(e,t){if(!w.pinned()){for(var _,b,k=new Ct,A=[],T=!1,P=new Ct,O=e.length,D=new gt(function(e,n){if(He)return e;if(!$e)return e!==q[Y]?e:++Y<q.length?it(e,D):($e=!0,(te=(ee?function e(t,n){var i=D.parent(n);if(i instanceof a)return e(i,n+1);if(i instanceof c){return me(i)?t:i.left.match_symbol(function(e){return e instanceof et&&(se.name==e.name||ee.name==e.name)})?t:i.left!==t&&wn[r=i.operator.slice(0,-1)]?kt(i,r,n):e(i,n+1)}if(i instanceof f)return e(i,n+1);if(i instanceof p){var r;return i.left!==t&&wn[r=i.operator]?kt(i,r,n):e(i,n+1)}if(i instanceof v)return i;if(i instanceof y)return i.expression!==t?t:e(i,n+1);if(i instanceof C)return i.condition!==t?t:e(i,n+1);if(i instanceof j)return Et(i,n+1);if(i instanceof H)return t;if(i instanceof J)return Et(i,n+1);if(i instanceof ie)return i.init!==t&&i.condition!==t?t:e(i,n+1);if(i instanceof re)return i.init!==t?t:e(i,n+1);if(i instanceof ce)return i.condition!==t?t:e(i,n+1);if(i instanceof Te){var s=D.parent(n+1);return Tt(s.properties,function(e){return e instanceof Ae})?e(s,n+2):s}if(i instanceof Oe){var o=i.expression;return o===t?e(i,n+1):t}if(i instanceof Le)return(i.tail_node()===t?e:Et)(i,n+1);if(i instanceof Re)return Et(i,n+1);if(i instanceof Me)return e(i,n+1);if(i instanceof Be)return i.expression!==t?t:e(i,n+1);if(i instanceof ot)return"delete"==i.operator?t:e(i,n+1);if(i instanceof pt)return i.name.match_symbol(function(e){return e instanceof Ge&&(se.name==e.name||ee.name==e.name)})?t:e(i,n+1);if(i instanceof ht)return i.condition!==t?t:e(i,n+1);if(i instanceof mt)return e(i,n+1);return null}:function e(t,n){var i=D.parent(n);if(i instanceof a)return t;if(i instanceof c)return t;if(i instanceof f)return t;if(i instanceof p)return t;if(i instanceof v)return t;if(i instanceof y)return t;if(i instanceof C)return t;if(i instanceof j)return Et(i,n+1);if(i instanceof J)return t;if(i instanceof ce)return t;if(i instanceof le)return t;if(i instanceof Te)return t;if(i instanceof Oe)return t;if(i instanceof Le)return(i.tail_node()===t?e:Et)(i,n+1);if(i instanceof Re)return Et(i,n+1);if(i instanceof Me)return t;if(i instanceof Be)return t;if(i instanceof ot)return t;if(i instanceof pt)return t;if(i instanceof mt)return t;return null})(e,0))===e&&(He=!0),e);var i,r,o=D.parent();if(!ne&&lt(e,o)&&(ne=o),pe&&ue&&Ke&&!ne&&e instanceof c&&"="!=e.operator&&e.left.equals(se))return Ye++,T=!0,xe.info("Cascading {this} [{start}]",e),Ke=!1,Pe=Ut(se),e.right.transform(D),Vt(K),He?i=K:(He=!0,i=Ft(p,K,{operator:pe,left:se.fixed&&se.definition().fixed?se.fixed.to_binary(K):se,right:Fe})),Ft(c,e,{operator:"=",left:e.left,right:Ft(p,e,{operator:e.operator.slice(0,-1),left:i,right:e.right})});if(function(e,n){if(e===Fe)return!0;if(n instanceof ie&&e!==n.init)return!0;if(e instanceof c)return"="!=e.operator&&se.equals(e.left);if(e instanceof v)return se instanceof Oe&&(!!se.equals(e.expression)&&!(Fe instanceof ge&&!Fe.contains_this()));return e instanceof S?!t.has_directive("use strict"):e instanceof I||(e instanceof F?he&&se.name===e.name.name:e instanceof z?e.key instanceof xe:e instanceof W||e instanceof ve||e instanceof at||e instanceof dt)}(e,o))return He=!0,e;if(e.single_use)return e;if(!(e instanceof Ge)&&(ue&&se.equals(e)||fe&&(r=fe(e,this)))){if(!Ke||ne&&(r||!De||!Ue))return r||ee||(He=!0),e;if(Xt(e,o))return ee&&!r&&(Q=!0),e;if(!r&&Z&&e.fixed!==se.fixed)return He=!0,e;if(ee)return ne&&0==X&&(X=$-Ye),r||Ye++,e;if(Ye++,T=He=!0,xe.info("Collapsing {this} [{start}]",e),"Binary"==K.TYPE)return zt(K,e),Ft(c,K,{operator:"=",left:K.right.left,right:"&&"==K.operator?Ft(C,K,{condition:K.left,consequent:K.right.right,alternative:e}):Ft(C,K,{condition:K.left,consequent:e,alternative:K.right.right})});if(K instanceof ct)return Ft(ut,K,{operator:K.operator,expression:se.fixed&&se.definition().fixed?se.fixed.to_prefix(K):se});if(K instanceof ut)return Vt(K),K;if(zt(Fe,e),K instanceof pt){var u=K.name.definition();return u.references.length-u.replaced!=1||t.exposed(u)?Ft(c,K,{operator:"=",left:e,right:Fe}):(u.replaced++,en(o,e,Fe))}Vt(Fe);var l=K.clone();return l.right=Fe,l}if(function(e,n){if(!(e instanceof et))return!1;if(e.is_declared(t)){if(e.fixed_value())return!1;if(E(e))return!(n instanceof Oe&&n.expression===e)&&x(e.definition())}else if(st(e,n))return!1;return!Ue||(fe=!1,!1)}(e,o))return He=!0,e;if((vt(e,o)||me(e))&&(te=e,e instanceof Ne&&(He=!0)),e instanceof s){var h=Ke;return Ke=!1,n(e,D),Ke=h,nt(e)}if(e instanceof B){var h=Ke;return Ke=!1,n(e,D),Ke=h,nt(e)}if(e instanceof R){e.name=e.name.transform(D);var h=Ke;return Ke=!1,e.value=e.value.transform(D),Ke=h,nt(e)}if(!(!(e instanceof d)||e instanceof Ne||e.variables&&e.variables.all(function(e){return!Se.has(e.name)&&!Pe.has(e.name)}))){var h=Ke;return Ke=!1,it(e,D)||n(e,D),Ke=h,nt(e)}return it(e,D)?nt(e):void 0},nt),M=new gt(function(e){if(He)return e;if(!$e){if(e!==q[Y])return e;switch(Y++,q.length-Y){case 0:if($e=!0,Q)return e;if(e!==K)return e;if(e instanceof pt)return e;Ze.replaced++;var t=M.parent();return t instanceof Le&&t.tail_node()!==e?(ee.replaced++,Fe===je?List.skip:$t(je,je.expressions.slice(0,-1))):Fe;case 1:if(!Q&&e.body===K)return $e=!0,Ze.replaced++,ee.replaced++,null;default:return it(e,M)}}if(e instanceof et&&e.definition()===Ze){if(Xt(e,M.parent()))return e;--Ye||(He=!0),xe.info("Replacing {this} [{start}]",e);var n=Fe.clone();return n.scope=e.scope,n.reference(),Ye==X?(He=!0,Ft(c,K,{operator:"=",left:e,right:n})):(Ze.replaced++,n)}return e instanceof N||e instanceof Ne?e:void 0},function(e){return Gt(e,M)});--O>=0;){0==O&&t.option("unused")&&bt();var q=[];for(xt(e[O]);A.length>0;){var $,Y=0,K=(q=A.pop())[q.length-1],X=-1,Q=!1,Z=!1,ee=null,te=null,ne=null,se=Nt(K),oe=se&&se.has_side_effects(t),ue=se&&(!oe||se instanceof et)&&!jt(se,t),fe=Mt(K);if(ue||fe){var pe=K instanceof c&&K.operator.slice(0,-1),he=K.name instanceof Je,me=Bt;if(K.may_throw(t)){if(he&&is_async(w))continue;me=g?function(e){return e.has_side_effects(t)}:Zt}var ye=!1,be=!1,Se=new Ct,Ce=!0,Pe=Ut(K),De=Wt(se),je=Rt(K),Fe=je;oe||(!pe&&Fe instanceof Le&&(Fe=Fe.tail_node()),oe=Yt());var Ve=g||!De?function(e){return e instanceof B}:Bt,Ue=Jt(K),$e=he,He=!1,Ye=0,Ke=!_||!$e;if(!Ke){for(var Xe=K.arg_index+1;!He&&Xe<_.length;Xe++)_[Xe]&&_[Xe].transform(D);Ke=!0}for(var Qe=O;!He&&Qe<e.length;Qe++)e[Qe].transform(D);if(ee){if(!Ye||$>Ye+Q){A.push(q),b=!0;continue}Ye==X&&(Q=!0);var Ze=se.definition();He=!1,Y=0,$e=he;for(var Qe=O;!He&&Qe<e.length;Qe++)e[Qe].transform(M)||e.splice(Qe--,1);Ye=K instanceof pt&&K===q[q.length-1]&&Ze.references.length==Ze.replaced&&!t.exposed(Ze),ee.last_ref=!1,ee.single_use=!1,T=!0}Ye&&Ht(K)}}}return T}function nt(e){return He?e:(te===e&&(He=!0),ne===e&&(ne=null),e)}function it(e,t){if(e instanceof d){if(e instanceof Ne)return e;if(e instanceof S){e.name&&(e.name=e.name.transform(t)),!He&&e.extends&&(e.extends=e.extends.transform(t));for(var n=[],i=[],r=0;!He&&r<e.properties.length;r++){var s=e.properties[r];s.key instanceof xe&&(s.key=s.key.transform(t)),s.static&&(s instanceof AST_ClassField?s.value&&n.push(s):s instanceof AST_ClassInit&&[].push.apply(i,s.value.body))}for(var r=0;!He&&r<i.length;r++)i[r].transform(t);for(var r=0;!He&&r<n.length;r++){var s=n[r];s.value=s.value.transform(t)}return e}if(e instanceof re)return e.object=e.object.transform(t),He=!0,e;if(e instanceof Be){e.expression=e.expression.transform(t);for(var r=0;!He&&r<e.body.length;r++){var a=e.body[r];if(a instanceof y){if(!$e){if(a!==q[Y])continue;Y++}if(a.expression=a.expression.transform(t),!Ue)break;fe=!1}}return He=!0,e}}}function st(e,t){return t instanceof c?"="==t.operator&&t.left===e:t instanceof R?t.name===e:t instanceof V||(t instanceof z?t.value===e:void 0)}function lt(e,t){return t instanceof c?t.left!==e&&wn[t.operator.slice(0,-1)]:t instanceof p?t.left!==e&&wn[t.operator]:t instanceof v?t.optional&&t.expression!==e:t instanceof y?t.expression!==e:t instanceof C?t.condition!==e:t instanceof ce?t.condition!==e:t instanceof qe?t.optional&&t.expression!==e:void 0}function vt(e,n){if(e instanceof f)return!0;if("Binary"==e.TYPE)return!bi(e.operator,e.right,t);if(e instanceof v){var i=e.expression;if(i instanceof et&&(d=i.definition(),i=i.fixed_value()),!(i instanceof de))return!e.is_expr_pure(t);if(d&&Ai(t,d,i))return!0;if(i.collapse_scanning)return!1;i.collapse_scanning=!0;var s=Ke;Ke=!1;for(var o=te,c=ne,u=0;!He&&u<i.argnames.length;u++)yt(_,i.argnames[u],e.args[u])&&(He=!0);if(!He)if(i.rest&&yt(_,i.rest,Ft(a,e,{elements:e.args.slice(u)})))He=!0;else if(St(i)&&i.value)i.value.transform(D);else for(var u=0;!He&&u<i.body.length;u++){var l=i.body[u];if(l instanceof Ie){l.value&&l.value.transform(D);break}l.transform(D)}return ne=c,te=o,Ke=s,i.collapse_scanning=!1,He?(He=!1,!0):!1}if(e instanceof S){if(!g)return!1;var p=e.extends;return!!p&&(p instanceof et&&(p=p.fixed_value()),!r(p))}if(e instanceof J){if(g){if(g.bfinally)return!0;if(g.bcatch&&e instanceof AST_Throw)return!0}return oe||se instanceof Oe||Qt(se)}if(e instanceof ae)return t.option("ie")&&e.name&&Pe.has(e.name.name);if(e instanceof Ee)return Kt(e,n);if(e instanceof Oe){if(oe)return!0;var h=e.expression;if(h instanceof et&&x(h.definition()))return!0;if(t.option("unsafe")){if(pn(h)&&dn[h.name])return!1;if(Ln(h))return!1}return!Ce||!ee&&(!(!g&&De)&&(!e.optional&&h.may_throw_on_access(t)))}if(e instanceof Me)return!0;if(e instanceof et){if(Kt(e,n))return!st(e,n);if(oe&&Qt(e))return!0;var d=e.definition();return(g||d.scope.resolve()!==w)&&!E(e)}if(e instanceof tt)return!e.is_expr_pure(t);if(e instanceof pt)return!!Ve(e.name)||(e.value||n instanceof _e)&&e.name.match_symbol(function(e){return e instanceof Ge&&(Pe.has(e.name)||oe&&Qt(e))},!0);if(e instanceof mt)return!0;var m=Xt(e.left,e);return!!m&&(m instanceof Oe||(!!Ve(m)||m.match_symbol(function(e){return e instanceof et&&(Pe.has(e.name)||ye&&t.exposed(e.definition()))},!0)));function _(e){return e.transform(D),He}}function yt(e,n,i){if(n instanceof R)return e(n.value)||yt(e,n.name,n.value)||!Sn(i)&&yt(e,n.name,i);if(!i)return!(n instanceof ze);if(n instanceof B){if(n.rest&&yt(e,n.rest))return!0;if(n instanceof V)return i instanceof a?!Tt(n.elements,function(t,n){return!yt(e,t,i[n])}):!i.is_string(t)||!Tt(n.elements,function(t){return!yt(e,t)});if(n instanceof U)return!!i.may_throw_on_access(t)||!Tt(n.properties,function(t){return!(t.key instanceof xe&&e(t.key))&&!yt(e,t.value)})}}function bt(){if(!1!==u){var e=t.parent(),n=t.self();if(void 0===u){if(!(n instanceof ge)||wt(n)||n.uses_arguments||n.pinned()||!(e instanceof v)||e.expression!==n||!Tt(e.args,function(e){return!(e instanceof Me)}))return void(u=!1);if(!ln(e))return;u=!0}var i,r=n.in_strict_mode(t)&&!n.parent_scope.resolve(!0).in_strict_mode(t);is_async(n)?(i=function(e){return e instanceof ze&&"await"==e.name},o=!0):(i=function(e){return e instanceof f&&!a.find_parent(Ne)},void 0===o&&(o=Dt(t,1,e,null,!0,!0)));for(var s=null,a=new _t(function(e,t){if(!d)return!0;if(i(e)||e instanceof mt)return d=null,!0;if(e instanceof Ee)return!r&&s||(d=null),!0;var a;if(e instanceof et)return(e.in_arg&&!ii(e.definition())||(a=n.variables.get(e.name))&&a!==e.definition())&&(d=null),!0;if(e instanceof Ne&&!St(e)){var o=s;return s=e,t(),s=o,!0}}),c=(_=e.args.slice()).length,l=new Ct,p=n.argnames.length;--p>=0;){var h=n.argnames[p],d=_[p],m=null;if(h instanceof R&&(m=h.value,h=h.name,_[c+p]=m),h instanceof B){if(o&&yt(function(e){return e.has_side_effects(t)},h,d)){A.length=0;break}_[c+p]=n.argnames[p]}else if(!l.has(h.name)&&(l.set(h.name,!0),m&&(d=Sn(d)?m:null),d||m?d instanceof de&&d.pinned()?d=null:d&&d.walk(a):d=Ft(ft,h).transform(t),d)){var g=Ft(pt,h,{name:h,value:d});g.name_index=p,g.arg_index=m?c+p:p,A.unshift([g])}}n.rest&&_.push(n.rest)}}function xt(e,t){if(q.push(e),e instanceof a)e.elements.forEach(function(e){xt(e,t)});else if(e instanceof c){var n=e.left;n instanceof B||A.push(q.slice()),xt(n),xt(e.right),n instanceof et&&"="==e.operator&&k.set(n.name,(k.get(n.name)||0)+1)}else if(e instanceof f)xt(e.expression,t);else if(e instanceof p){var i=wn[e.operator];t&&i&&"??"!=e.operator&&e.right instanceof c&&"="==e.right.operator&&!(e.right.left instanceof B)&&A.push(q.slice()),xt(e.left,!i&&t),xt(e.right,t)}else if(e instanceof v)xt(e.expression),e.args.forEach(xt);else if(e instanceof y)xt(e.expression);else if(e instanceof C)xt(e.condition),xt(e.consequent,t),xt(e.alternative,t);else if(e instanceof j)e.definitions.forEach(xt);else if(e instanceof G)xt(e.expression);else if(e instanceof W)xt(e.condition),e.body instanceof h||xt(e.body);else if(e instanceof J)e.value&&xt(e.value);else if(e instanceof ie)e.init&&xt(e.init,!0),e.condition&&xt(e.condition),e.step&&xt(e.step,!0),e.body instanceof h||xt(e.body);else if(e instanceof re)xt(e.object),e.body instanceof h||xt(e.body);else if(e instanceof ce)xt(e.condition),e.body instanceof h||xt(e.body),!e.alternative||e.alternative instanceof h||xt(e.alternative);else if(e instanceof ke)e.properties.forEach(function(e){q.push(e),e.key instanceof xe&&xt(e.key),e instanceof Ae&&xt(e.value,t),q.pop()});else if(e instanceof Le){var r=e.expressions.length-(t?0:1);e.expressions.forEach(function(e,t){xt(e,t<r)})}else if(e instanceof Re)xt(e.body,!0);else if(e instanceof Me)xt(e.expression);else if(e instanceof qe)xt(e.expression),xt(e.property);else if(e instanceof Be)xt(e.expression),e.body.forEach(xt);else if(e instanceof ot)UNARY_POSTFIX[e.operator]?A.push(q.slice()):xt(e.expression);else if(e instanceof pt){if(e.name instanceof AST_SymbolVar)if(e.value){var s=e.name.definition();s.references.length>s.replaced&&A.push(q.slice())}else P.set(e.name.name,(P.get(e.name.name)||0)+1);e.value&&xt(e.value)}else e instanceof mt&&e.expression&&xt(e.expression);q.pop()}function kt(e,t,n){var i;do{i=e,e=D.parent(++n)}while(e instanceof c&&e.operator.slice(0,-1)==t||e instanceof p&&e.operator==t);return i}function At(e,t,n,i,r){var s=Ke;Ke=!1;var a=te,o=ne,c=D.stack;return D.stack=[i],e.transform(D),D.stack=c,ne=o,te=a,Ke=s,He?(He=!1,n):t(i,r+1)}function Et(e,t){var n=D.parent(t);if(vt(e,n))return e;if(lt(e,n))return e;if(n instanceof a)return Et(n,t+1);if(n instanceof c)return s(n.left);if(n instanceof f)return e;if(n instanceof p)return Et(n,t+1);if(n instanceof v)return Et(n,t+1);if(n instanceof y)return Et(n,t+1);if(n instanceof C)return Et(n,t+1);if(n instanceof j)return Et(n,t+1);if(n instanceof J)return Et(n,t+1);if(n instanceof ce)return Et(n,t+1);if(n instanceof le)return e;if(n instanceof Te){var i=D.parent(t+1);return Tt(i.properties,function(e){return e instanceof Ae})?Et(i,t+2):i}if(n instanceof Oe){var r=n.expression;return r===e?Et(n,t+1):At(r,Et,e,n,t)}return n instanceof Le?Et(n,t+1):n instanceof Re?Et(n,t+1):n instanceof Me?e:n instanceof Be?Et(n,t+1):n instanceof ot?Et(n,t+1):n instanceof pt?s(n.name):n instanceof mt?e:null;function s(i){return me(n)?e:i!==e&&i instanceof B?At(i,Et,e,n,t):Et(n,t+1)}}function Ot(e){if(b)b=!1;else if(!($<1)){var n=(e=e.tail_node())instanceof c&&"="==e.operator?e.left:e;if(n instanceof et){var i=n.definition();if(!i.undeclared&&!x(i)){if(n!==e){if(jt(n,t))return;var r=i.references.length-i.replaced;if(r<2)return;var s=K.clone();s[s instanceof c?"right":"value"]=n,K.name_index>=0&&(s.name_index=K.name_index,s.arg_index=K.arg_index),K=s}return ee=i}}}}function It(e){return e.references.length-e.replaced-(k.get(e.name)||0)}function Nt(e){if(e instanceof c){var n=e.left;if(!(n instanceof et))return n;var i=n.definition();if(w.uses_arguments&&is_funarg(i))return n;if(t.exposed(i))return n;if($=It(i),i.fixed&&n.fixed){var r=i.references.filter(function(e){return e.fixed===n.fixed}).length-1;r<$&&($=r,X=0,Z=!0)}return"="==e.operator&&Ot(e.right),n}if(e instanceof p)return e.right.left;if(e instanceof ot)return e.expression;if(e instanceof pt){var n=e.name,i=n.definition();if(i.const_redefs)return;if(!Lt(n,i.orig))return;if(w.uses_arguments&&is_funarg(i))return;var s=i.orig.length-i.eliminated-(P.get(i.name)||0);return $=It(i),i.fixed&&($=Math.min($,i.references.filter(function(t){if(!t.fixed)return!0;if(!t.fixed.assigns)return!0;var i=t.fixed.assigns[0];return i===n||Rt(i)===e.value}).length)),s>1&&!(n instanceof Je)?(Ot(e.value),Ft(et,n)):Ot(e.value)||1==$&&!t.exposed(i)?Ft(et,n):void 0}}function Rt(e){if(e instanceof c)return e.right;if(e instanceof p){var t=e.clone();return t.right=e.right.right,t}return e instanceof pt?e.value:void 0}function Mt(e){if(!(e instanceof c&&e.right.single_use)){for(var n,i=Object.create(null),r=new _t(function(e){e instanceof et&&(i[e.definition().id]=!0)});e instanceof c&&"="==e.operator;)e.left.walk(r),e=e.right;if(e instanceof Ee)return u;if(e instanceof et){var s=e.evaluate(t);return s===e?u:qt(s,u)}if(e.is_truthy())return qt(!0,Bt);if(e.is_constant()){var o=e.evaluate(t);if(!(o instanceof xe))return qt(o,u)}return se instanceof et&&(!!function e(n){if(n instanceof a)return!1;if(n instanceof p&&wn[n.operator])return e(n.left)&&e(n.right);if(n instanceof v)return!1;if(n instanceof C)return e(n.consequent)&&e(n.alternative);if(n instanceof ke)return!1;return!n.has_side_effects(t)}(e)&&(e.walk(new _t(function(e){if(n)return!0;e instanceof et&&i[e.definition().id]&&(n=!0)})),!n&&u))}function u(t){return e.equals(t)}}function qt(e,n){return function(i,r){if(r.in_boolean_context()){if(e&&i.is_truthy()&&!i.has_side_effects(t))return!0;if(i.is_constant()){var s=i.evaluate(t);if(!(s instanceof xe))return!s==!e}}return n(i)}}function Vt(e){for(;e.write_only&&(e.write_only=!1,e instanceof c);)e=e.right}function zt(e,t){var n=t.scope||Pt(D)||i;e.walk(new _t(function(e){if(e instanceof d)return!0;e instanceof ze&&(e.scope=n)}))}function Ut(e){var i=new Ct;e instanceof pt&&(e.name.definition().fixed||(Ce=!1),i.add(e.name.name,se));var r=w.uses_arguments&&!t.has_directive("use strict"),s=w instanceof rt,a=new _t(function(o){var u;if(o instanceof et){if(!(u=o.fixed_value())){u=o;var f=o.definition(),l=o.fixed&&o.fixed.escaped||f.escaped;f.undeclared||!f.assignments&&l&&!l.cross_scope||!L(f,o.scope,o,a.parent())&&Ti(f)||(Ce=!1)}}else o instanceof Ee&&(u=o);if(u)i.add(o.name,n(t,a,o,u,0));else{if(o instanceof de){for(var h,d=0,m=o;h=a.parent(d++);m=h){if(h instanceof c){if(h.left===m)break;if("="==h.operator)continue;if(wn[h.operator.slice(0,-1)])continue;break}if(h instanceof p){if(wn[h.operator])continue;break}if(h instanceof v)return;if(h instanceof Ne)return;if(h instanceof Le){if(h.tail_node()===m)continue;break}if(h instanceof tt){if(h.tag)return;break}}return o.enclosed.forEach(function(e){e.scope!==o&&Se.set(e.name,!0)}),!0}r&&o instanceof qe&&(w.each_argname(function(e){t.option("reduce_vars")&&!e.definition().assignments||(e.definition().fixed||(Ce=!1),i.add(e.name,!0))}),r=!1)}if(s)if("Call"==o.TYPE){if(be)return;var g=o.expression;if(g instanceof Oe)return;if(g instanceof ge&&!g.contains_this())return;be=!0}else o instanceof Oe&&function e(t){if(t instanceof et&&!(t=t.fixed_value()))return!0;if(t instanceof c)return"="==t.operator&&e(t.right);return t instanceof Oe||t instanceof Ee}(o.expression)&&(o!==se||e instanceof ot?ye=!0:be=!0)});return e.walk(a),i}function Ht(n){var i=Fe===je?null:$t(je,je.expressions.slice(0,-1)),r=n.name_index;if(r>=0){var s,a=w.argnames[r];a instanceof R?(w.argnames[r]=a=a.clone(),a.value=i||Ft(we,a,{value:0})):(s=t.parent().args)[r]&&(w.argnames[r]=a.clone(),s[r]=i||Ft(we,s[r],{value:0}))}else{var o=q.length-1,c=q[o];(c instanceof pt||q[o-1].body===c)&&o--;var u=new gt(function(e,t,n){if($e)return e;if(e!==q[Y])return e;if(++Y<=o)return it(e,u);if($e=!0,e instanceof j){P.set(c.name.name,(P.get(c.name.name)||0)+1),ee&&ee.replaced++;var r=e.definitions,s=r.indexOf(c),a=c.clone();if(a.value=null,!i)return e.definitions[s]=a,e;var f=[Ft(Re,i,{body:i})];if(s>0){var l=e.clone();l.definitions=r.slice(0,s),f.unshift(l),(e=e.clone()).definitions=r.slice(s)}return f.push(e),e.definitions[0]=a,n?List.splice(f):Ft(m,e,{body:f})}return i?is_statement(e)?Ft(Re,i,{body:i}):i:n?List.skip:null},function(e,t){return e instanceof ie?yn(e,t):Gt(e,u)});He=!1,$e=!1,Y=0,(e[O]=e[O].transform(u))||e.splice(O,1)}}function Gt(e,t){if(e instanceof Le)switch(e.expressions.length){case 0:return null;case 1:return en(t.parent(),e,e.expressions[0])}}function Wt(e){var t=root_expr(e);if(!(t instanceof et))return!1;if(t.definition().scope.resolve()!==w)return!1;if(!l)return!0;if(pe)return!1;if(K instanceof ot)return!1;var n=Pe.get(t.name);return!n||n[0]===e}function Yt(){return!(K instanceof ot)&&Fe.has_side_effects(t)}function Jt(e){if(e instanceof ot)return!1;if(oe)return!1;if(ee)return!0;if(!(se instanceof et))return!1;var t;if(e instanceof pt)t=1;else{if("="!=e.operator)return!1;t=2}var n=se.definition();if(n.references.length-n.replaced==t)return!0;if(!n.fixed)return!1;if(!se.fixed)return!1;var i=se.fixed.assigns,r=0;return!!Tt(n.references,function(e,t){var n=e.fixed;return!!n&&(!n.to_binary&&!n.to_prefix&&(n===se.fixed?(r++,!0):i&&n.assigns&&i[0]!==n.assigns[0]))})&&(r==t&&(Z=!0,!0))}function Kt(e,t){var n=Pe.get(e.name);if(n&&!Tt(n,function(e){return!e}))return n[0]!==se||void(fe=!1)}function Qt(e){var n=e.definition();return!(1==n.orig.length&&n.orig[0]instanceof We)&&(n.scope.resolve()!==w||(!(!be||!t.exposed(n))||!Tt(n.references,function(e){return e.scope.resolve(!0)===w})))}function Zt(e,t){if(e instanceof c)return Zt(e.left,!0);if(e instanceof ot)return Zt(e.expression,!0);if(e instanceof pt)return e.value&&Zt(e.value);if(t){if(e instanceof G)return Zt(e.expression,!0);if(e instanceof qe)return Zt(e.expression,!0);if(e instanceof et)return e.definition().scope.resolve()!==w}return!1}}function X(e){for(var t=!1,n=[],i=0;i<e.length;){var r=e[i];if(r instanceof m&&Tt(r.body,sn))t=!0,X(r.body),[].splice.apply(e,[i,1].concat(r.body)),i+=r.body.length;else{if(r instanceof $){if(Lt(r.value,n)){t=!0,e.splice(i,1);continue}n.push(r.value)}r instanceof Y?(t=!0,e.splice(i,1)):i++}}return t}function Z(e,t){for(var n,i,r,s=!1,a=t.parent(),o=t.self(),c=k&&a&&"Call"==a.TYPE&&a.expression===o,u=k&&t.option("conditionals")&&t.option("sequences"),f=!(g&&g.bfinally&&Et(w)),l=function(e){for(var t=0,n=e.length;--n>=0;){var i=e[n];if(i instanceof ce&&i.body instanceof Ie&&++t>1)return!0}return!1}(e),p=e.length;--p>=0;){var d=e[p],v=G(p),y=e[v];if(k&&n&&!y&&d instanceof Ie&&f&&!(o instanceof Ve)){var b=d.value;if(!b){s=!0,e.splice(p,1);continue}var x=b.tail_node();if(Sn(x)){s=!0,b instanceof ut?b=b.expression:x instanceof ut&&((b=b.clone()).expressions[b.expressions.length-1]=x.expression),e[p]=Ft(Re,d,{body:b});continue}}if(d instanceof ce){var S=jn(d.body);if(V(S)){S.label&&qt(S.label.thedef.references,S),s=!0,(d=d.clone()).body=Ft(m,d,{body:$(d.body,S)}),d.alternative=Ft(m,d,{body:an(d.alternative).concat(z(r,i))}),H(S.value,r),e[p]=d,e[p]=d.transform(t);continue}if(S&&!d.alternative&&y instanceof pe){var A=d.condition,T=p+1==v&&d.body instanceof m;if((A=kn(A,A.negate(t),T))!==d.condition){s=!0,(d=d.clone()).condition=A;var b=d.body;d.body=Ft(m,y,{body:z(!0,null,v+1)}),e.splice(p,1,d,b),(!k||o instanceof h&&o.body===e)&&(e[p]=d.transform(t));continue}}var E=jn(d.alternative);if(V(E)){E.label&&qt(E.label.thedef.references,E),s=!0,(d=d.clone()).body=Ft(m,d.body,{body:an(d.body).concat(z(r,i))}),d.alternative=Ft(m,d.alternative,{body:$(d.alternative,E)}),H(E.value,r),e[p]=d,e[p]=d.transform(t);continue}if(t.option("typeofs")){if(S&&!E){var O=Ft(m,o,{body:e.slice(p+1)});Zn(d.condition,null,O)}if(!S&&E){var O=Ft(m,o,{body:e.slice(p+1)});Zn(d.condition,O)}}}if(d instanceof ce&&d.body instanceof Ie){var I,N,L=d.body.value,R=d.body.in_bool||y instanceof Ie&&y.in_bool;if(!d.alternative&&y instanceof Ie&&(f||!L==!y.value)){s=!0,(d=d.clone()).alternative=Ft(m,y,{body:z(!0,null,v+1)}),e[p]=d,e[p]=d.transform(t);continue}if(k&&n&&!y&&!d.alternative&&(R||L&&l||L instanceof C&&(Sn(L.consequent,t)||Sn(L.alternative,t)))){s=!0,(d=d.clone()).alternative=Ft(Ie,d,{value:null}),e[p]=d,e[p]=d.transform(t);continue}if(u&&!d.alternative&&(!(N=e[I=W(p)])&&c||N instanceof ce&&N.body instanceof Ie)&&(y?y instanceof Re&&G(v)==e.length:!n)){s=!0;var j=[];d=d.clone(),j.push(d.condition),d.condition=$t(d,j),d.alternative=Ft(m,o,{body:z().concat(Ft(Ie,o,{value:null}))}),e[p]=d.transform(t),p=I+1;continue}}d instanceof _||d instanceof J?i=d:n&&i&&i===y&&K(d)}return s;function F(e){return q(t,function(t){return t===e})}function B(e,t){if(!i)return!1;if(i.TYPE!=e.TYPE)return!1;var n=e.value;if(!n)return!1;var r=i.equals(e);return!r&&n instanceof Le&&(n=n.tail_node(),i.value&&i.value.equals(n)&&(r=2)),!r&&!t&&i.value instanceof Le&&i.value.tail_node().equals(n)&&(r=3),r}function V(n){if(r=!1,!function(e){if(e instanceof J){if(r=B(e))return!0;if(!k)return!1;if(!(e instanceof Ie))return!1;var n=e.value;return!(n&&!Sn(n.tail_node()))&&(!(o instanceof Ve)||!!i&&(!(i instanceof J&&i.value)&&(r=4,!0)))}if(!(e instanceof ve))return!1;if(o instanceof Ve)if(i instanceof J){if(!k)return!1;if(i.value)return!1;r=!0}else if(i){if(t.loopcontrol_target(i)!==a)return!1;r=!0}else if(!1===i)return!1;var s=t.loopcontrol_target(e);return e instanceof D?F(un(s)):!(s instanceof le)&&F(s)}(n))return!1;for(var s=e.length;--s>p;){var c=e[s];if(c instanceof M){if(c.name.definition().preinit)return!1}else if((c instanceof P||c instanceof _e)&&!Tt(c.definitions,function(e){return!e.name.match_symbol(function(e){return e instanceof Ge&&e.definition().preinit})}))return!1}return!0}function z(t,n,r){var s=[],a=!1,o=p+1;t?n?r=e.lastIndexOf(n):(n=e[r])!==i&&(i=!1):(r=e.length,i=null);var c=e.splice(o,r-o).filter(function(e){return e instanceof me?(s.push(e),!1):(rn(e)&&(a=!0),!0)});return 3===t&&(c.push(Ft(Re,n.value,{body:$t(n.value,n.value.expressions.slice(0,-1))})),n.value=n.value.tail_node()),[].push.apply(a?c:e,s),c}function U(e,t){if(e)switch(t){case 4:return e;case 3:if(!(e instanceof Le))break;case 2:return $t(e,e.expressions.slice(0,-1))}}function $(e,t){for(var n,i=an(e),s=i;(n=s[s.length-1])!==t;)s=n.body;s.pop();var a=t.value;return r&&(a=U(a,r)),a&&s.push(Ft(Re,a,{body:a})),i}function H(e,t){if(t&&e){switch(t){case 4:return;case 3:case 2:e=e.tail_node()}tn(e,i.value)}}function G(t){n=!0;for(var i=t;++i<e.length;){var r=e[i];if(!_n(r)){if(!(r instanceof lt))break;n=!1}}return i}function W(t){for(var n=t;--n>=0;){var i=e[n];if(!(i instanceof lt)&&!_n(i))break}return n}function K(e,t,n){if(e instanceof J){var r=!(t&&e instanceof AST_Throw)&&B(e,!0);if(r){s=!0;var a=U(e.value,r);return a?Ft(Re,a,{body:a}):n?null:Ft(Y,e)}}else if(e instanceof ce)e.body=K(e.body,t),e.alternative&&(e.alternative=K(e.alternative,t));else if(e instanceof he)e.body=K(e.body,t);else if(e instanceof at){if(!e.bfinally||!i.value||i.value.is_constant()){e.bcatch&&K(e.bcatch,t);var o=K(e.body.pop(),!0,!0);o&&e.body.push(o)}}else if(e instanceof h&&!(e instanceof Ne||e instanceof Be)){var o=K(e.body.pop(),t,!0);o&&e.body.push(o)}return e}}function ee(e,t){var n,i=t.self();i instanceof b?i=t.parent():i instanceof he&&(i=i.body);for(var r=0,s=0,a=e.length;r<a;r++){var o=e[r];if(o instanceof ve){var c=t.loopcontrol_target(o);un(c)!==i||o instanceof _&&c instanceof le?e[s++]=o:o.label&&qt(o.label.thedef.references,o)}else e[s++]=o;if(jn(o)){n=e.slice(r+1);break}}return e.length=s,n&&n.forEach(function(n){xn(t,n,e)}),e.length!=a}function te(e,t){if(!(!k||g&&g.bfinally)){for(var n=!1,i=e.length;--i>=0;){var r=e[i];if(!(r instanceof Re))break;var s=r.body;if(!(s instanceof f))break;var a=s.expression;if(!xi(t,a))break;if(n=!0,a=a.drop_side_effect_free(t,!0)){r.body=a;break}}return e.length=i+1,n}}function oe(e,t){var n=!1,r=e.length-1;if(k&&r>=0){var s=g&&g.bfinally&&Et(w),a=e[r].try_inline(t,i,s);a&&(e[r--]=a,n=!0)}for(var o=l&&g&&g.bfinally?"try":l;r>=0;r--){var a=e[r].try_inline(t,i,!0,o);a&&(e[r]=a,n=!0)}return n}function ue(e,t){if(!(e.length<2)){for(var n=[],i=0,r=0,s=e.length;r<s;r++){var a=e[r];a instanceof Re?(n.length>=t.sequences_limit&&o(),nn(n,a.body)):_n(a)?e[i++]=a:(o(),e[i++]=a)}return o(),e.length=i,i!=s}function o(){if(n.length){var t=$t(n[0],n);e[i++]=Ft(Re,t,{body:t}),n=[]}}}function fe(e,t){if(!(e instanceof m))return e;for(var n=null,i=0;i<e.body.length;i++){var r=e.body[i];if(r instanceof lt&&gn(r))t.push(r);else{if(n||rn(r))return!1;n=r}}return n}function ye(e,t){for(var n,i=!1,r=0,s=0;s<e.length;s++){var a=e[s];if(n)if(a instanceof J)!a.value&&Et(w)||(a.value=h(a.value||Ft(ft,a)).optimize(t));else if(a instanceof ie){if(!(a.init instanceof j)){var o=!1;n.body.walk(new _t(function(e){return!!(o||e instanceof Ne)||(e instanceof p&&"in"==e.operator?(o=!0,!0):void 0)})),o||(a.init?a.init=h(a.init):(a.init=n.body,r--,i=!0))}}else a instanceof se?rn(a.init)||(a.object=h(a.object)):a instanceof ce?a.condition=h(a.condition):a instanceof Be?a.expression=h(a.expression):a instanceof dt&&(a.expression=h(a.expression));if(t.option("conditionals")&&a instanceof ce){var c=[],u=fe(a.body,c),f=fe(a.alternative,c);if(!1!==u&&!1!==f&&c.length>0){var l=c.length;c.push(Ft(ce,a,{condition:a.condition,body:u||Ft(Y,a.body),alternative:f})),c.unshift(r,1),[].splice.apply(e,c),s+=l,r+=l+1,n=null,i=!0;continue}}e[r++]=a,n=a instanceof Re?a:null}return e.length=r,i;function h(e){r--,i=!0;var t=n.body;return $t(t,[t,e])}}function be(e){return e instanceof c?[e]:e instanceof Le?e.expressions.slice():void 0}function Se(e,t,n){var i=be(t);if(i){n=n||0;for(var r=!1,s=i.length-n;--s>=0;){var a=i[s];if(l(a)){var o;if(a.left instanceof et)o=i.slice(s+1);else{if(!(a.left instanceof Oe&&l(a.left.expression)))continue;o=i.slice(s+1);var u=a.clone();a=a.left.expression,u.left=u.left.clone(),u.left.expression=a.left.clone(),o.unshift(u)}0!=o.length&&je(a.left,a.right,o)&&(r=!0,i=i.slice(0,s).concat(a,o))}}if(e instanceof j){for(var s=e.definitions.length;--s>=0;){var f=e.definitions[s];if(f.value){je(f.name,f.value,i)&&(r=!0),Pe(f,i,n)&&(r=!0);break}}e instanceof lt&&De(e.definitions,i,n)&&(r=!0)}return r&&i}function l(e){return e instanceof c&&"="==e.operator}}function Ce(e,t){if(e instanceof Re&&!gn(t)){var n=be(e.body);if(n){var i=[];if(De(i,n.reverse(),0))return t.definitions=i.reverse().concat(t.definitions),n.reverse()}}}function Pe(e,n,i){if(t.option("conditionals")&&!(e.name instanceof B)){for(var r=!1,s=e.name.definition();n.length>i;){var a=di(t,s,e.value,n[0]);if(!a)break;e.value=a,n.shift(),r=!0}return r}}function De(e,t,n){for(var i=!1;t.length>n;){var r=t[0];if(!(r instanceof c))break;if("="!=r.operator)break;var s=r.left;if(!(s instanceof et))break;if(pn(s))break;if(s.scope.resolve()!==w)break;var a=s.definition();if(a.scope!==w)break;if(a.orig.length>a.eliminated+1)break;if("SymbolVar"!=a.orig[0].TYPE)break;var o=Ft(AST_SymbolVar,s);e.push(Ft(pt,r,{name:o,value:r.right})),a.orig.push(o),a.replaced++,t.shift(),i=!0}return i}function je(e,n,i){var r=new Ct;for(r.set(e.name,!0);n instanceof c&&"="==n.operator;)n.left instanceof et&&r.set(n.left.name,!0),n=n.right;if(n instanceof ke){var s=!1;do{if(!a(i[0]))break;i.shift(),s=!0}while(i.length);return s}function a(e){if(e instanceof c&&"="==e.operator&&e.left instanceof Oe){var i=e.left.expression;if(i instanceof et&&r.has(i.name)&&e.right.is_constant_expression(w)){var s=e.left.property;if(s instanceof xe&&(a(s)&&(s=e.left.property=s.right.clone()),s=s.evaluate(t)),!(s instanceof xe)){var o="__proto__"==(s=""+s)||t.has_directive("use strict")?function(e){var t=e.key;return"string"==typeof t&&t!=s&&"__proto__"!=t}:function(e){var t=e.key;return e instanceof AST_ObjectGetter||e instanceof AST_ObjectSetter?"string"==typeof t&&t!=s:"__proto__"!==t};if(Tt(n.properties,o))return n.properties.push(Ft(Ae,e,{key:s,value:e.right})),!0}}}}}function Fe(e){for(var t,n=!1,i=0,r=-1;i<e.length;i++){var s=e[i],a=e[r];if(s instanceof j)if(a&&a.TYPE==s.TYPE)a.definitions=a.definitions.concat(s.definitions),n=!0;else if(t&&t.TYPE==s.TYPE&&gn(s))t.definitions=t.definitions.concat(s.definitions),n=!0;else if(s instanceof lt){var o=Ce(a,s);o?(o.length&&(a.body=$t(a,o),r++),n=!0):r++,e[r]=t=s}else e[++r]=s;else{if(s instanceof J)s.value=f(s.value);else if(s instanceof ie){var o=Se(a,s.init);if(o)n=!0,s.init=o.length?$t(s.init,o):null;else{if(a instanceof lt&&(!s.init||s.init.TYPE==a.TYPE)){s.init&&(a.definitions=a.definitions.concat(s.init.definitions)),s=s.clone(),t=s.init=a,e[r]=l(s),n=!0;continue}if(t&&s.init&&t.TYPE==s.init.TYPE&&gn(s.init))t.definitions=t.definitions.concat(s.init.definitions),s.init=null,n=!0;else if(s.init instanceof lt&&(t=s.init,o=Ce(a,s.init))){if(n=!0,0==o.length){e[r]=l(s);continue}a.body=$t(a,o)}}}else if(s instanceof re){if(t&&t.TYPE==s.init.TYPE){var c=t.definitions.slice();s.init=s.init.definitions[0].name.convert_symbol(et,function(e,t){c.push(Ft(pt,t,{name:t,value:null})),t.definition().references.push(e)}),t.definitions=c,n=!0}s.object=f(s.object)}else if(s instanceof ce)s.condition=f(s.condition);else if(s instanceof Re){var u,o=Se(a,s.body);if(o){if(n=!0,!o.length)continue;s.body=$t(s.body,o)}else if(a instanceof j&&(u=e[i+1])&&a.TYPE==u.TYPE&&(u=u.definitions[0]).value){n=!0,u.value=$t(s,[s.body,u.value]);continue}}else s instanceof Be?s.expression=f(s.expression):s instanceof dt&&(s.expression=f(s.expression));e[++r]=t?l(s):s}}return e.length=r+1,n;function f(e){var t=Se(a,e,1);if(!t)return e;n=!0;var i=e.tail_node();return t[t.length-1]!==i&&t.push(i.left),$t(e,t)}function l(e){return e.transform(new gt(function(e,i,r){if(e instanceof j){if(t===e)return e;if(t.TYPE!=e.TYPE)return e;var s=this.parent();return s instanceof re&&s.init===e?e:gn(e)?(t.definitions=t.definitions.concat(e.definitions),n=!0,s instanceof ie&&s.init===e?null:r?List.skip:Ft(Y,e)):e}return e instanceof Q?e:e instanceof Ne?e:is_statement(e)?void 0:e}))}}}function xn(e,t,n){var i,r=!1;function s(e){i?(i.push(e),sn(e)||(i.required=!0)):n.push(e)}t.walk(new _t(function(a,o){if(a instanceof M)return a.extends=null,a.properties=[],s(a),!0;if(a instanceof j){var c=[];return a.remove_initializers(e,c)&&xe.warn("Dropping initialization in unreachable code [{start}]",a),c.length>0&&(a.definitions=c,s(a)),!0}if(a instanceof me)return s(a),!0;if(a instanceof Ne)return!0;if(a instanceof d){var u=i;return i=[],o(),i.required?n.push(Ft(m,t,{body:i})):i.length&&[].push.apply(n,i),i=u,!0}a instanceof ve||(r=!0)})),r&&xe.warn("Dropping unreachable code [{start}]",t)}function Sn(e,t){return null==e||e.is_undefined||e instanceof ft||e instanceof ut&&"void"==e.operator&&!(t&&e.expression.has_side_effects(t))}et.DEFMETHOD("is_declared",function(e){return this.defined||!this.definition().undeclared||e.option("unsafe")&&dn[this.name]}),(hn=function(e,t){e.DEFMETHOD("in_strict_mode",t)})(S,zt),hn(Ne,function(e){for(var t=this.body,n=0;n<t.length;n++){var i=t[n];if(!(i instanceof $))break;if("use strict"==i.value)return!0}var r=this.parent_scope;return r?r.resolve(!0).in_strict_mode(e):e.option("module")}),function(e){e(xe,Bt),e(a,zt),e(c,function(){return"="==this.operator&&this.right.is_truthy()}),e(de,zt),e(ke,zt),e(De,zt),e(Le,function(){return this.tail_node().is_truthy()}),e(et,function(){var e=this.fixed_value();if(!e)return!1;this.is_truthy=Bt;var t=e.is_truthy();return delete this.is_truthy,t})}(function(e,t){e.DEFMETHOD("is_truthy",t)}),function(e){function t(e,t,n){switch(e){case"-":return t.is_negative_zero()&&(!(n instanceof O)||0==n.value);case"&&":case"||":return t.is_negative_zero()||n.is_negative_zero();case"*":case"/":case"%":case"**":return!0;default:return!1}}e(xe,zt),e(a,Bt),e(c,function(){var e=this.operator;return"="==e?this.right.is_negative_zero():t(e.slice(0,-1),this.left,this.right)}),e(p,function(){return t(this.operator,this.left,this.right)}),e(O,function(){return 0==this.value&&1/this.value<0}),e(de,Bt),e(ke,Bt),e(De,Bt),e(Le,function(){return this.tail_node().is_negative_zero()}),e(et,function(){var e=this.fixed_value();if(!e)return!0;this.is_negative_zero=zt;var t=e.is_negative_zero();return delete this.is_negative_zero,t}),e(ut,function(){return"+"==this.operator&&this.expression.is_negative_zero()||"-"==this.operator})}(function(e,t){e.DEFMETHOD("is_negative_zero",t)}),function(e){function t(e,t){return t||/strict/.test(e.option("pure_getters"))}xe.DEFMETHOD("may_throw_on_access",function(e,t){return!e.option("pure_getters")||this._dot_throw(e,t)}),e(xe,t),e(a,Bt),e(c,function(e){var t=this.operator,n=this.left,i=this.right;return"="!=t?wn[t.slice(0,-1)]&&(n._dot_throw(e)||i._dot_throw(e)):!!i._dot_throw(e)&&(!(n instanceof et)||(!(i instanceof p&&"||"==i.operator&&n.name==i.left.name)||i.right._dot_throw(e)))}),e(p,function(e){return wn[this.operator]&&(this.left._dot_throw(e)||this.right._dot_throw(e))}),e(S,function(e,n){return t(e,n)&&!Tt(this.properties,function(e){return!!e.private||(!e.static||!(e instanceof AST_ClassGetter||e instanceof AST_ClassSetter))})}),e(C,function(e){return this.consequent._dot_throw(e)||this.alternative._dot_throw(e)}),e(O,Bt),e(G,function(e,n){if(!t(e,n))return!1;var r=this.expression;return r instanceof et&&(r=r.fixed_value()),!("prototype"==this.property&&i(r))}),e(de,Bt),e(Se,zt),e(ke,function(e,n){return t(e,n)&&!Tt(this.properties,function(t){return!(t instanceof AST_ObjectGetter||t instanceof AST_ObjectSetter)&&!("__proto__"===t.key&&t.value._dot_throw(e,n))})}),e(Ee,function(e,n){return t(e,n)&&!this.scope.resolve().new}),e(Le,function(e){return this.tail_node()._dot_throw(e)}),e(et,function(e,n){if(this.is_undefined)return!0;if(!t(e,n))return!1;if(pn(this)&&this.is_declared(e))return!1;if(this.is_immutable())return!1;var i=this.definition();if(x(i)&&!i.scope.rest&&Tt(i.scope.argnames,function(e){return e instanceof Je}))return i.scope.uses_arguments>2;var r=this.fixed_value(!0);return!r||(this._dot_throw=zt,r._dot_throw(e)?(delete this._dot_throw,!0):(this._dot_throw=Bt,!1))}),e(ut,function(){return"void"==this.operator}),e(ct,Bt),e(ft,zt)}(function(e,t){e.DEFMETHOD("_dot_throw",t)}),function(e){function t(e,t,n){switch(t){case"&&":return n.left.is_defined(e)&&n.right.is_defined(e);case"||":return n.left.is_truthy()||n.right.is_defined(e);case"??":return n.left.is_defined(e)||n.right.is_defined(e);default:return!0}}e(xe,Bt),e(a,zt),e(c,function(e){var n=this.operator;return"="==n?this.right.is_defined(e):t(e,n.slice(0,-1),this)}),e(p,function(e){return t(e,this.operator,this)}),e(C,function(e){return this.consequent.is_defined(e)&&this.alternative.is_defined(e)}),e(O,zt),e(oe,Bt),e(de,zt),e(ke,zt),e(Le,function(e){return this.tail_node().is_defined(e)}),e(et,function(e){if(this.is_undefined)return!1;if(pn(this)&&this.is_declared(e))return!0;if(this.is_immutable())return!0;var t=this.fixed_value();if(!t)return!1;this.is_defined=Bt;var n=t.is_defined(e);return delete this.is_defined,n}),e(ut,function(){return"void"!=this.operator}),e(ct,zt),e(ft,Bt)}(function(e,t){e.DEFMETHOD("is_defined",t)}),function(e){e(xe,Bt),e(c,function(e){return"="==this.operator&&this.right.is_boolean(e)});var t=It("in instanceof == != === !== < <= >= >");e(p,function(e){return t[this.operator]||wn[this.operator]&&this.left.is_boolean(e)&&this.right.is_boolean(e)}),e(g,zt);var n=It("every hasOwnProperty isPrototypeOf propertyIsEnumerable some");e(v,function(e){if(!e.option("unsafe"))return!1;var t=this.expression;return t instanceof G&&(n[t.property]||"test"==t.property&&t.expression instanceof De)}),e(C,function(e){return this.consequent.is_boolean(e)&&this.alternative.is_boolean(e)}),e(be,Bt),e(Le,function(e){return this.tail_node().is_boolean(e)}),e(et,function(e){var t=this.fixed_value();if(!t)return!1;this.is_boolean=Bt;var n=t.is_boolean(e);return delete this.is_boolean,n});var i=It("! delete");e(ut,function(){return i[this.operator]})}(function(e,t){e.DEFMETHOD("is_boolean",t)}),function(e){e(xe,Bt);var t=It("- * / % ** & | ^ << >> >>>");e(c,function(e){return t[this.operator.slice(0,-1)]||"="==this.operator&&this.right.is_number(e)}),e(p,function(e){return!!t[this.operator]||"+"==this.operator&&((this.left.is_boolean(e)||this.left.is_number(e))&&(this.right.is_boolean(e)||this.right.is_number(e)))});var n=It(["charCodeAt","getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","indexOf","lastIndexOf","localeCompare","push","search","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);e(v,function(e){if(!e.option("unsafe"))return!1;var t=this.expression;return t instanceof G&&(n[t.property]||pn(t.expression)&&"Math"==t.expression.name)}),e(C,function(e){return this.consequent.is_number(e)&&this.alternative.is_number(e)}),e(be,Bt),e(we,zt),e(Le,function(e){return this.tail_node().is_number(e)}),e(et,function(e,t){var n=this.fixed_value();if(!n)return!1;if(t&&n instanceof ut&&"+"==n.operator&&n.expression.equals(this))return!1;this.is_number=Bt;var i=n.is_number(e);return delete this.is_number,i});var i=It("+ - ~ ++ --");e(ot,function(){return i[this.operator]})}(function(e,t){e.DEFMETHOD("is_number",t)}),function(e){e(xe,Bt),e(c,function(e){switch(this.operator){case"+=":if(this.left.is_string(e))return!0;case"=":return this.right.is_string(e)}}),e(p,function(e){return"+"==this.operator&&(this.left.is_string(e)||this.right.is_string(e))});var t=It(["charAt","substr","substring","toExponential","toFixed","toLowerCase","toPrecision","toString","toUpperCase","trim"]);e(v,function(e){if(!e.option("unsafe"))return!1;var n=this.expression;return n instanceof G&&t[n.property]}),e(C,function(e){return this.consequent.is_string(e)&&this.alternative.is_string(e)}),e(Le,function(e){return this.tail_node().is_string(e)}),e(Fe,zt),e(et,function(e){var t=this.fixed_value();if(!t)return!1;this.is_string=Bt;var n=t.is_string(e);return delete this.is_string,n}),e(tt,function(e){return!this.tag||Ei(e,this.tag)}),e(ut,function(){return"typeof"==this.operator})}(function(e,t){e.DEFMETHOD("is_string",t)});var wn=It("&& || ??");function kn(e,t,n){var i=t.print_to_string().length-e.print_to_string().length;return i<(n||0)?t:e}function An(e,t,n){return kn(Ft(Re,e,{body:e}),Ft(Re,t,{body:t}),n).body}function Tn(e,t,n,i){return(xt(e)?An:kn)(t,n,i)}function En(e){var t=Object.create(null);return Object.keys(e).forEach(function(n){t[n]=It(e[n])}),t}function Cn(e){for(var t=0;t<e.length;t++){var n=e[t];if(!(n instanceof $))return n}}function Pn(){return this.value?Ft(Ie,this.value,{value:this.value}):Cn(this.body)}function On(e,t){var n=t.evaluate(e);return n===t?t:(n=Kt(n,t).optimize(e),Tn(e,t,n,e.eval_threshold))}!function(e){function t(e){xe.warn("global_defs {this} redefined [{start}]",e)}rt.DEFMETHOD("resolve_defines",function(e){return e.option("global_defs")?(this.figure_out_scope({ie:e.option("ie")}),this.transform(new gt(function(n){var i=n._find_defs(e,"");if(i){for(var r,s=0,a=n;(r=this.parent(s++))&&r instanceof Oe&&r.expression===a;)a=r;if(!Xt(a,r))return i;t(n)}}))):this}),e(xe,Rt),e(G,function(e,t){return this.expression._find_defs(e,"."+this.property+t)}),e(Ge,function(e){this.definition().global&&Ot(e.option("global_defs"),this.name)&&t(this)}),e(et,function(e,t){if(this.definition().global){var n=e.option("global_defs"),i=this.name+t;return Ot(n,i)?function e(t,n){if(t instanceof xe)return t.clone(!0);if(Array.isArray(t))return Ft(a,n,{elements:t.map(function(t){return e(t,n)})});if(t&&"object"==typeof t){var i=[];for(var r in t)Ot(t,r)&&i.push(Ft(Ae,n,{key:r,value:e(t[r],n)}));return Ft(ke,n,{properties:i})}return Kt(t,n)}(n[i],this):void 0}})}(function(e,t){e.DEFMETHOD("_find_defs",t)}),o.DEFMETHOD("first_statement",Pn),u.DEFMETHOD("first_statement",Pn),de.DEFMETHOD("first_statement",function(){return Cn(this.body)}),de.DEFMETHOD("length",function(){for(var e=this.argnames,t=0;t<e.length&&!(e[t]instanceof R);t++);return t});var Dn=["constructor","toString","valueOf"],In=En({Array:["indexOf","join","lastIndexOf","slice"].concat(Dn),Boolean:Dn,Function:Dn,Number:["toExponential","toFixed","toPrecision"].concat(Dn),Object:Dn,RegExp:["exec","test"].concat(Dn),String:["charAt","charCodeAt","concat","indexOf","italics","lastIndexOf","match","replace","search","slice","split","substr","substring","toLowerCase","toUpperCase","trim"].concat(Dn)}),Nn=En({Array:["isArray"],Math:["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","atan2","pow","max","min"],Number:["isFinite","isNaN"],Object:["create","getOwnPropertyDescriptor","getOwnPropertyNames","getPrototypeOf","isExtensible","isFrozen","isSealed","keys"],String:["fromCharCode","raw"]});function Ln(e){if(!(e instanceof G))return!1;var t=e.expression;if(!pn(t))return!1;var n=Nn[t.name];return n&&(n[e.property]||"Math"==t.name&&"random"==e.property)}!function(e){e(xe,Bt),e(O,zt),e(De,Bt);var t=It("! ~ - + void");e(ut,function(){return t[this.operator]&&this.expression instanceof O})}(function(e,t){e.DEFMETHOD("is_constant",t)}),function(e){xe.DEFMETHOD("evaluate",function(e,t){if(!e.option("evaluate"))return this;var n=[],i=this._eval(e,t,n,1);return n.forEach(function(e){delete e._eval}),t?i:!i||i instanceof RegExp?i:"function"==typeof i||"object"==typeof i?this:i});var t=new _t(function(e){e instanceof c&&n(e.left),e instanceof re&&n(e.init),e instanceof ot&&UNARY_POSTFIX[e.operator]&&n(e.expression)});function n(e){e instanceof V?e.elements.forEach(n):e instanceof U?e.properties.forEach(function(e){n(e.value)}):e instanceof Oe?n(e.expression):e instanceof et&&e.definition().references.forEach(function(e){delete e._eval})}e(je,function(){throw new Error(string_template("Cannot evaluate a statement [{start}]",this))}),e(s,Ut),e(l,Ut),e(S,Ut),e(xe,Ut),e(O,function(){return this.value}),e(c,function(e,i,r,s){var a=this.left;if(!i){if(!(a instanceof et))return this;if(!Ot(a,"_eval")){if(!a.fixed)return this;var o=a.definition();if(!o.fixed)return this;if(o.undeclared)return this;if(o.last_ref!==a)return this;if("m"==o.single_use)return this;if(this.right.has_side_effects(e))return this}}var c,u=this.operator;c=!Ot(a,"_eval")&&a instanceof et&&a.fixed&&a.definition().fixed?a:"="==u?this.right:Ft(p,this,{operator:u.slice(0,-1),left:a,right:this.right}),a.walk(t);var f=c._eval(e,i,r,s);return"object"==typeof f?this:(n(a),f)}),e(Le,function(e,n,i,r){if(!n)return this;for(var s=this.expressions,a=0,o=s.length-1;a<o;a++)s[a].walk(t);var c=s[o],u=c._eval(e,n,i,r);return u===c?this:u}),e(de,function(e){if(e.option("unsafe")){var t=function(){};return t.node=this,t.toString=function(){return"function(){}"},t}return this}),e(a,function(e,t,n,i){if(e.option("unsafe")){for(var r=[],s=0;s<this.elements.length;s++){var a=this.elements[s];if(a instanceof oe)return this;var o=a._eval(e,t,n,i);if(a===o)return this;r.push(o)}return r}return this}),e(ke,function(e,t,n,i){if(e.option("unsafe")){for(var r={},s=0;s<this.properties.length;s++){var a=this.properties[s];if(!(a instanceof Ae))return this;var o=a.key;if(o instanceof xe&&(o=o._eval(e,t,n,i))===a.key)return this;switch(o){case"__proto__":case"toString":case"valueOf":return this}if(r[o]=a.value._eval(e,t,n,i),r[o]===a.value)return this}return r}return this});var i=It("! typeof void");e(ut,function(e,r,s,a){var o=this.expression,c=this.operator;if(e.option("typeofs")&&"typeof"==c&&(o instanceof de||o instanceof et&&o.fixed_value()instanceof de))return"function";var u=o instanceof et&&o.definition();i[c]||u&&u.fixed||a++,o.walk(t);var f=o._eval(e,r,s,a);if(f===o){if(r&&"void"==c)return;return this}switch(c){case"!":return!f;case"typeof":return f instanceof RegExp?this:typeof f;case"void":return;case"~":return~f;case"-":return-f;case"+":return+f;case"++":case"--":if(!u)return this;if(!r){if(u.undeclared)return this;if(u.last_ref!==o)return this}return Ot(o,"_eval")&&(f=+(c[0]+1)+ +f),n(o),f}return this}),e(ct,function(e,i,r,s){var a=this.expression;if(a instanceof et){if(!Ot(a,"_eval")){if(!a.fixed)return this;if(!i){var o=a.definition();if(!o.fixed)return this;if(o.undeclared)return this;if(o.last_ref!==a)return this}}}else if(!i)return this;a instanceof et&&a.definition().fixed||s++,a.walk(t);var c=a._eval(e,i,r,s);return c===a?this:(n(a),+c)});var r=It("&& || === !==");e(p,function(e,t,n,i){r[this.operator]||i++;var s=this.left._eval(e,t,n,i);if(s===this.left)return this;if(this.operator==(s?"||":"&&"))return s;var a,o=t&&!(s&&"object"==typeof s),c=this.right._eval(e,o,n,i);if(c===this.right)return this;switch(this.operator){case"&&":a=s&&c;break;case"||":a=s||c;break;case"??":a=null==s?c:s;break;case"|":a=s|c;break;case"&":a=s&c;break;case"^":a=s^c;break;case"+":a=s+c;break;case"-":a=s-c;break;case"*":a=s*c;break;case"/":a=s/c;break;case"%":a=s%c;break;case"<<":a=s<<c;break;case">>":a=s>>c;break;case">>>":a=s>>>c;break;case"==":a=s==c;break;case"===":a=s===c;break;case"!=":a=s!=c;break;case"!==":a=s!==c;break;case"<":a=s<c;break;case"<=":a=s<=c;break;case">":a=s>c;break;case">=":a=s>=c;break;case"**":a=Math.pow(s,c);break;case"in":if(c&&"object"==typeof c&&Ot(c,s)){a=!0;break}default:return this}if(isNaN(a))return e.find_parent(dt)?this:a;if(e.option("unsafe_math")&&!t&&a&&"number"==typeof a&&("+"==this.operator||"-"==this.operator)){var u=Math.max(0,f(s),f(c));if(u<16)return+a.toFixed(u)}return a;function f(e){var t=/(\.[0-9]*)?(e[^e]+)?$/.exec(+e);return(t[1]||".").length-1-(t[2]||"").slice(1)}}),e(C,function(e,t,n,i){var r=this.condition._eval(e,t,n,i);if(r===this.condition)return this;var s=r?this.consequent:this.alternative,a=s._eval(e,t,n,i);return a===s?this:a}),e(et,function(e,t,n,i){var r,s=this.fixed_value();if(!s)return this;if(Ot(s,"_eval"))r=s._eval();else{if(this._eval=Ut,r=s._eval(e,t,n,i),delete this._eval,r===s)return this;s._eval=function(){return r},n.push(s)}return r&&"object"==typeof r&&!function(e,t){var n=e.definition().escaped;switch(n.length){case 0:return!0;case 1:var i=!1;return n[0].walk(new _t(function(t){return!!i||(t===e?i=!0:t instanceof Ne||void 0)})),i;default:return t<=n.depth}}(this,i)?this:r});var u={Array:Array,Math:Math,Number:Number,Object:Object,String:String},f=En({Math:["E","LN10","LN2","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],Number:["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"]}),h=It("global ignoreCase multiline source");function d(e,t,n,i,r){for(var s=[],a=0;a<e.length;a++){var o=e[a],c=o._eval(t,n,i,r);if(o===c)return;s.push(c)}return s}e(Oe,function(e,t,n,i){if(e.option("unsafe")){var r,s=this.expression;if(!pn(s)&&(null==(r=s._eval(e,t,n,i+1))||r===s))return this;var a=this.property;if(a instanceof xe&&(a=a._eval(e,t,n,i))===this.property)return this;if(void 0===r){var o=f[s.name];if(!o||!o[a])return this;r=u[s.name]}else if(r instanceof RegExp){if(!h[a])return this}else if("object"==typeof r){if(!Ot(r,a))return this}else if("function"==typeof r)switch(a){case"name":return r.node.name?r.node.name.name:"";case"length":return r.node.length();default:return this}return r[a]}return this}),e(v,function(e,n,i,r){var s=this.expression,a=s instanceof et?s.fixed_value():s;if(a instanceof o||a instanceof F||a instanceof ae){if(a.evaluating)return this;if(a.name&&a.name.definition().recursive_refs>0)return this;if(this.is_expr_pure(e))return this;var c=d(this.args,e,n,i,r);if(!Tt(a.argnames,function(t,s){if(t instanceof R){if(!c)return!1;if(void 0===c[s]){var a=t.value._eval(e,n,i,r);if(a===t.value)return!1;c[s]=a}t=t.name}return!(t instanceof B)}))return this;if(a.rest instanceof B)return this;if(!c&&!n)return this;var f=a.first_statement();if(!(f instanceof Ie)){if(n){a.walk(t);var l=!1;if(a.evaluating=!0,kt(a,new _t(function(t){return!!l||(t instanceof Ie?(t.value&&void 0!==t.value._eval(e,!0,i,r)&&(l=!0),!0):t instanceof Ne&&t!==a||void 0)})),a.evaluating=!1,!l)return}return this}var p=f.value;if(!p)return;var h=[];return(!c||Tt(a.argnames,function(e,t){return y(e,c[t])})&&(!a.rest||y(a.rest,c.slice(a.argnames.length)))||n)&&(n&&a.argnames.forEach(function(e){e instanceof R&&e.value.walk(t)}),a.evaluating=!0,p=p._eval(e,n,i,r),a.evaluating=!1),h.forEach(function(e){delete e._eval}),p===f.value?this:p}if(e.option("unsafe")&&s instanceof Oe){var m=s.property;if(m instanceof xe&&(m=m._eval(e,n,i,r))===s.property)return this;var g=s.expression;if(pn(g)){var _=Nn[g.name];if(!_||!_[m])return this;p=u[g.name]}else{if(null==(p=g._eval(e,n,i,r+1))||p===g)return this;var v=In[p.constructor.name];if(!v||!v[m])return this;if(p instanceof RegExp&&p.global&&!(g instanceof De))return this}var c=d(this.args,e,n,i,r);if(!c)return this;if("replace"==m&&"function"==typeof c[1])return this;try{return p[m].apply(p,c)}catch(e){xe.warn("Error evaluating {this} [{start}]",this)}finally{p instanceof RegExp&&(p.lastIndex=0)}}return this;function y(e,t){e instanceof R&&(e=e.name);var n=e.definition();if(n.orig[n.orig.length-1]!==e)return!1;var i=t;return n.references.forEach(function(e){e._eval=function(){return i},h.push(e)}),!0}}),e(be,Ut),e(tt,function(e,t,n,i){if(!e.option("templates"))return this;if(this.tag){if(!Ei(e,this.tag))return this;c=function(e){return e}}var r=d(this.expressions,e,t,n,i);if(!r)return this;for(var s=!1,a=c(this.strings[0]),o=0;o<r.length;o++)a+=r[o]+c(this.strings[o+1]);return s?(this._eval=Ut,this):a;function c(e){return"string"!=typeof(e=Ci(e))&&(s=!0),e}})}(function(e,t){e.DEFMETHOD("_eval",t)}),function(e){function t(e){return Ft(ut,e,{operator:"!",expression:e})}function n(e,n,i){var r=t(e);return i?kn(r,Ft(Re,n,{body:n}))===r?r:n:kn(r,n)}e(xe,function(){return t(this)}),e(je,function(){throw new Error("Cannot negate a statement")}),e(p,function(e,i){var r=this.clone(),s=this.operator;if(e.option("unsafe_comps"))switch(s){case"<=":return r.operator=">",r;case"<":return r.operator=">=",r;case">=":return r.operator="<",r;case">":return r.operator="<=",r}switch(s){case"==":return r.operator="!=",r;case"!=":return r.operator="==",r;case"===":return r.operator="!==",r;case"!==":return r.operator="===",r;case"&&":return r.operator="||",r.left=r.left.negate(e,i),r.right=r.right.negate(e),n(this,r,i);case"||":return r.operator="&&",r.left=r.left.negate(e,i),r.right=r.right.negate(e),n(this,r,i)}return t(this)}),e(w,function(){return t(this)}),e(C,function(e,t){var i=this.clone();return i.consequent=i.consequent.negate(e),i.alternative=i.alternative.negate(e),n(this,i,t)}),e(ge,function(){return t(this)}),e(Le,function(e){var t=this.expressions.slice();return t.push(t.pop().negate(e)),$t(this,t)}),e(ut,function(){return"!"==this.operator?this.expression:t(this)})}(function(e,t){e.DEFMETHOD("negate",function(e,n){return t.call(this,e,n)})});var Rn=It("Boolean decodeURI decodeURIComponent Date encodeURI encodeURIComponent Error escape EvalError isFinite isNaN Number Object parseFloat parseInt RangeError ReferenceError String SyntaxError TypeError unescape URIError"),Mn=It("Map Set WeakMap WeakSet");function jn(e){return e&&e.aborts()}v.DEFMETHOD("is_expr_pure",function(e){if(e.option("unsafe")){var t=this.expression;if(pn(t)){if(Rn[t.name])return!0;if(this instanceof be&&Mn[t.name])return!0}if(Ln(t))return!0}return e.option("annotations")&&this.pure||!e.pure_funcs(this)}),tt.DEFMETHOD("is_expr_pure",function(e){var t=this.tag;if(!t)return!0;if(e.option("unsafe")){if(pn(t)&&Rn[t.name])return!0;if(t instanceof G&&pn(t.expression)){var n=Nn[t.expression.name];return n&&(n[t.property]||"Math"==t.expression.name&&"random"==t.property)}}return!e.pure_funcs(this)}),xe.DEFMETHOD("is_call_pure",Bt),v.DEFMETHOD("is_call_pure",function(e){if(!e.option("unsafe"))return!1;var t=this.expression;if(!(t instanceof G))return!1;var n,i=t.expression,r=t.property;if(i instanceof a)n=In.Array;else if(i.is_boolean(e))n=In.Boolean;else if(i.is_number(e))n=In.Number;else if(i instanceof De)n=In.RegExp;else if(i.is_string(e)){if(n=In.String,"replace"==r){var s=this.args[1];if(s&&!s.is_string(e))return!1}}else t.may_throw_on_access(e)||(n=In.Object);return n&&n[r]}),function(e){e(xe,Bt),e(a,zt),e(c,function(){switch(this.operator){case"=":return this.right.safe_to_spread();case"&&=":case"||=":case"??=":return this.left.safe_to_spread()&&this.right.safe_to_spread()}return!0}),e(p,function(){return!wn[this.operator]||this.left.safe_to_spread()&&this.right.safe_to_spread()}),e(O,zt),e(de,zt),e(ke,function(){return Tt(this.properties,function(e){return!(e instanceof AST_ObjectGetter||e instanceof Me)})}),e(Le,function(){return this.tail_node().safe_to_spread()}),e(et,function(){var e=this.fixed_value();return e&&e.safe_to_spread()}),e(ot,zt)}(function(e,t){e.DEFMETHOD("safe_to_spread",t)}),function(e){function t(e,t,n){return!Tt(e,n?function(e){return e instanceof Me?!n(e,t):!e.has_side_effects(t)}:function(e){return!e.has_side_effects(t)})}function n(e,t){var n=e.expression;return!n.is_string(t)||n.has_side_effects(t)}e(xe,zt),e(a,function(e){return t(this.elements,e,n)}),e(c,function(e){var t=this.left;if(!(t instanceof Oe))return!0;var n=t.expression;return!(n instanceof Ee)||!n.scope.resolve().new||t instanceof qe&&t.property.has_side_effects(e)||this.right.has_side_effects(e)}),e(p,function(e){return this.left.has_side_effects(e)||this.right.has_side_effects(e)||!bi(this.operator,this.right,e)}),e(h,function(e){return t(this.body,e)}),e(v,function(e){return!(this.is_expr_pure(e)||this.is_call_pure(e)&&!this.expression.has_side_effects(e))||t(this.args,e,n)}),e(y,function(e){return this.expression.has_side_effects(e)||t(this.body,e)}),e(S,function(e){var n=this.extends;return!(!n||(n instanceof et&&(n=n.fixed_value()),r(n)))||t(this.properties,e)}),e(A,function(e){return this.key instanceof xe&&this.key.has_side_effects(e)||this.static&&this.value&&this.value.has_side_effects(e)}),e(C,function(e){return this.condition.has_side_effects(e)||this.consequent.has_side_effects(e)||this.alternative.has_side_effects(e)}),e(O,Bt),e(j,function(e){return t(this.definitions,e)}),e(V,function(e){return t(this.elements,e)}),e(z,function(e){return this.key instanceof xe&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),e(U,function(e){return t(this.properties,e)}),e(G,function(e){return this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)}),e(Y,Bt),e(ce,function(e){return this.condition.has_side_effects(e)||this.body&&this.body.has_side_effects(e)||this.alternative&&this.alternative.has_side_effects(e)}),e(he,function(e){return this.body.has_side_effects(e)}),e(de,Bt),e(ke,function(e){return t(this.properties,e,function(e,t){var n=e.expression;return!n.safe_to_spread()||n.has_side_effects(t)})}),e(Ee,Bt),e(Te,function(e){return this.key instanceof xe&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),e(Le,function(e){return t(this.expressions,e)}),e(Re,function(e){return this.body.has_side_effects(e)}),e(qe,function(e){return this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)||this.property.has_side_effects(e)}),e(Be,function(e){return this.expression.has_side_effects(e)||t(this.body,e)}),e(Ge,Bt),e(et,function(e){return!this.is_declared(e)||!E(this,e)}),e(tt,function(e){return!this.is_expr_pure(e)||t(this.expressions,e)}),e(at,function(e){return t(this.body,e)||this.bcatch&&this.bcatch.has_side_effects(e)||this.bfinally&&this.bfinally.has_side_effects(e)}),e(ot,function(e){return unary_side_effects[this.operator]||this.expression.has_side_effects(e)}),e(pt,function(){return this.value})}(function(e,t){e.DEFMETHOD("has_side_effects",t)}),function(e){function t(e,t){for(var n=e.length;--n>=0;)if(e[n].may_throw(t))return!0;return!1}function n(e,n){return!!e.may_throw(n)||(e instanceof et&&(e=e.fixed_value()),!(e instanceof de)||(!!t(e.argnames,n)||(!!t(e.body,n)||St(e)&&e.value&&e.value.may_throw(n))))}e(xe,zt),e(O,Bt),e(Y,Bt),e(de,Bt),e(Ee,Bt),e(Ge,Bt),e(a,function(e){return t(this.elements,e)}),e(c,function(e){return!!this.right.may_throw(e)||!(!e.has_directive("use strict")&&"="==this.operator&&this.left instanceof et)&&this.left.may_throw(e)}),e(f,function(e){return this.expression.may_throw(e)}),e(p,function(e){return this.left.may_throw(e)||this.right.may_throw(e)||!bi(this.operator,this.right,e)}),e(h,function(e){return t(this.body,e)}),e(v,function(e){if(t(this.args,e))return!0;if(this.is_expr_pure(e))return!1;this.may_throw=zt;var i=n(this.expression,e);return delete this.may_throw,i}),e(y,function(e){return this.expression.may_throw(e)||t(this.body,e)}),e(C,function(e){return this.condition.may_throw(e)||this.consequent.may_throw(e)||this.alternative.may_throw(e)}),e(R,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)}),e(j,function(e){return t(this.definitions,e)}),e(G,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)}),e(re,function(e){if(this.init.may_throw(e))return!0;var t=this.object;return!!t.may_throw(e)||(!((t=t.tail_node())instanceof a||t.is_string(e))||this.body.may_throw(e))}),e(ce,function(e){return this.condition.may_throw(e)||this.body&&this.body.may_throw(e)||this.alternative&&this.alternative.may_throw(e)}),e(he,function(e){return this.body.may_throw(e)}),e(ke,function(e){return t(this.properties,e)}),e(Te,function(e){return this.value.may_throw(e)||this.key instanceof xe&&this.key.may_throw(e)}),e(Ie,function(e){return this.value&&this.value.may_throw(e)}),e(Le,function(e){return t(this.expressions,e)}),e(Re,function(e){return this.body.may_throw(e)}),e(qe,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)||this.property.may_throw(e)}),e(Be,function(e){return this.expression.may_throw(e)||t(this.body,e)}),e(et,function(e){return!this.is_declared(e)||!E(this,e)}),e(tt,function(e){if(t(this.expressions,e))return!0;if(this.is_expr_pure(e))return!1;if(!this.tag)return!1;this.may_throw=zt;var i=n(this.tag,e);return delete this.may_throw,i}),e(at,function(e){return(this.bcatch?this.bcatch.may_throw(e):t(this.body,e))||this.bfinally&&this.bfinally.may_throw(e)}),e(ot,function(e){return this.expression.may_throw(e)&&!("typeof"==this.operator&&this.expression instanceof et)}),e(pt,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)})}(function(e,t){e.DEFMETHOD("may_throw",t)}),function(e){function t(e,t){for(var n=e.length;--n>=0;)if(!e[n].is_constant_expression(t))return!1;return!0}e(xe,Bt),e(a,function(e){return t(this.elements,e)}),e(p,function(e){return this.left.is_constant_expression(e)&&this.right.is_constant_expression(e)&&bi(this.operator,this.right)}),e(S,function(e){var n=this.extends;return!(n&&!r(n))&&t(this.properties,e)}),e(A,function(e){return"string"==typeof this.key&&(!this.value||this.value.is_constant_expression(e))}),e(O,zt),e(de,function(e){var t=this,n=!0,i=[];return t.walk(new _t(function(r,s){if(!n)return!0;if(r instanceof d){if(r===t)return;return i.push(r),s(),i.pop(),!0}if(r instanceof et){if(t.inlined||r.redef||r.in_arg)return n=!1,!0;if(t.variables.has(r.name))return!0;var a=r.definition();if(Lt(a.scope,i))return!0;if(e&&!a.redefined()){var o=e.find_variable(r.name);if(o?o===a:a.undeclared)return n="f",!0}return n=!1,!0}return r instanceof Ee?(St(t)&&Tt(i,function(e){return!(e instanceof Ne)||St(e)})&&(n=!1),!0):void 0})),n}),e(ke,function(e){return t(this.properties,e)}),e(Te,function(e){return"string"==typeof this.key&&this.value.is_constant_expression(e)}),e(ot,function(e){return this.expression.is_constant_expression(e)})}(function(e,t){e.DEFMETHOD("is_constant_expression",t)}),function(e){function t(){var e=this.body.length;return e>0&&jn(this.body[e-1])}e(je,Vt),e(pe,Ut),e(m,t),e(Ve,t),e(ce,function(){return this.alternative&&jn(this.body)&&jn(this.alternative)&&this})}(function(e,t){e.DEFMETHOD("aborts",t)});var Fn=It(["use asm","use strict"]);function qn(e,t,n){switch(e.body.length){case 0:return n?List.skip:Ft(Y,e);case 1:var i=e.body[0];return sn(i)?t instanceof le&&i instanceof me?e:i:e}return e}function Bn(e,t){t.option("rests")&&(e.uses_arguments||e.rest instanceof V&&t.drop_fargs(e,t.parent())&&(e.argnames=e.argnames.concat(e.rest.elements),e.rest=e.rest.rest))}function Vn(e,t){if(!t.option("arrows"))return e;Bn(e,t),e.value&&(e.body=[e.first_statement()]);var n=bn(e.body,t);switch(n.length){case 1:var i=n[0];if(i instanceof Ie){e.body.length=0,e.value=i.value;break}default:e.body=n,e.value=null}return e}e($,function(e,t){return!t.option("directives")||Fn[e.value]&&t.has_directive(e.value)===e?e:Ft(Y,e)}),e(I,function(e,t){return t.option("drop_debugger")?Ft(Y,e):e}),e(he,function(e,t){if(e.body instanceof ce||e.body instanceof _){var n=bn([e.body],t);switch(n.length){case 0:e.body=Ft(Y,e);break;case 1:e.body=n[0];break;default:e.body=Ft(m,e,{body:n})}}return t.option("unused")&&0==e.label.references.length?e.body:e}),e(ve,function(e,t){if(!t.option("dead_code"))return e;var n=e.label;if(n){var i=t.loopcontrol_target(e);e.label=null,t.loopcontrol_target(e)===i?qt(n.thedef.references,e):e.label=n}return e}),e(h,function(e,t){return e.body=bn(e.body,t),e}),e(m,function(e,t){return e.body=bn(e.body,t),qn(e,t.parent())}),e(de,function(e,t){return Bn(e,t),e.body=bn(e.body,t),e}),e(o,Vn),e(u,Vn),e(ae,function(e,t){Bn(e,t),e.body=bn(e.body,t);var n=t.parent();if(t.option("inline"))for(var i=0;i<e.body.length;i++){var r=e.body[i];if(!(r instanceof $)){if(r instanceof Ie){if(i!=e.body.length-1)break;var s=r.value;if(!s||"Call"!=s.TYPE)break;if(s.is_expr_pure(t))break;var a,o=s.expression;if(o instanceof et){if(e.name&&e.name.definition()===o.definition())break;a=o.fixed_value()}else a=o;if(!(a instanceof F||a instanceof ae))break;if(a.rest)break;if(a.uses_arguments)break;if(a===o){if(a.parent_scope!==e)break;if(!Tt(a.enclosed,function(t){return t.scope!==e}))break}if((a!==o||a.name)&&(n instanceof AST_ClassMethod||n instanceof Ce)&&n.value===t.self())break;if(a.contains_this())break;var c=a.argnames.length;if(c>0&&t.option("inline")<2)break;if(c>e.argnames.length)break;if(!Tt(e.argnames,function(e){return e instanceof Je}))break;if(!Tt(s.args,function(e){return!(e instanceof Me)}))break;for(var u=0;u<c;u++){var f=s.args[u];if(!(f instanceof et))break;if(f.definition()!==e.argnames[u].definition())break}if(u<c)break;for(;u<s.args.length&&!s.args[u].has_side_effects(t);u++);if(u<s.args.length)break;if(c<e.argnames.length&&!t.drop_fargs(e,n)){if(!t.drop_fargs(a,s))break;do{a.argnames.push(a.make_var(Je,a,"argument_"+c))}while(++c<e.argnames.length)}return o}break}}return e});var zn=It("arguments await yield");function Un(e,t){for(var n=t.length;--n>=0;)t[n]||(t[n]=Ft(oe,e))}function $n(e,t){var n=Ft(w,e);return n.name&&(n.name=t?null:Ft(AST_SymbolClass,n.name)),n}function Hn(e,t){var n;switch(e.CTOR){case AST_AsyncDefun:n=AST_AsyncFunction;break;case AST_AsyncGeneratorDefun:n=AST_AsyncGeneratorFunction;break;case F:n=ae;break;case AST_GeneratorDefun:n=AST_GeneratorFunction}var i=Ft(n,e);return i.name=t?null:Ft(Xe,e.name),i}function Gn(e,t){e.walk(new _t(function(n){return n instanceof Ie?(t(n),!0):n instanceof Ne&&n!==e||void 0}))}function Wn(e){var t=Object.create(null);return Gn(e,function(e){var n=e.value;if(n&&(n=n.tail_node()),n instanceof et){var i=n.definition().id;t[i]=(t[i]||0)+1}}),t}function Yn(e,t,n){if(n.exposed(e))return!1;switch(e.references.length-e.replaced-(t[e.id]||0)){case e.drop_return:return"d";case e.bool_return:return!0}}function Jn(e,t){Gn(e,function(e){e.in_bool=!0;var n=e.value;if(n){var i=ei(t,n);i?i instanceof xe||(n=n.drop_side_effect_free(t),e.value=n?$t(e.value,[n,Ft(we,e.value,{value:1})]):Ft(we,e.value,{value:1})):(n=n.drop_side_effect_free(t),e.value=n?$t(e.value,[n,Ft(we,e.value,{value:0})]):null)}})}function Kn(e,t){if(!e.name||!t.option("ie"))return!0;var n=e.name.definition();return!t.exposed(n)&&Tt(n.references,function(e){return!(e instanceof et)})}function Xn(e,t,n){if(t instanceof de){var i=St(t),r=is_async(t),s=!1,a=!1;if(i&&e.option("arrows"))if(t.value){if(!r||xi(e,t.value)){var c=t.value.drop_side_effect_free(e);c!==t.value&&(s=!0,t.value=c)}}else a=!0;else if(!wt(t))if(!n&&t.name){var l=t.name.definition();a=l.references.length==l.replaced}else a=!0;if(a&&(t.process_expression(!1,function(t){var n=t.value;if(n){if(r&&!xi(e,n))return t;n=n.drop_side_effect_free(e,!0)}return s=!0,n?Ft(Re,t,{body:n}):Ft(Y,t)}),Gn(t,function(t){var n=t.value;if(n){if(r&&!xi(e,n))return;var i=n.drop_side_effect_free(e);i!==n&&(s=!0,i&&r&&!xi(e,i)&&(i=i.negate(e)),t.value=i)}})),r&&e.option("awaits")){a&&t.process_expression("awaits",function(t){var n=t.body;if(n instanceof f){if(xi(e,n.expression)){if(s=!0,!(n=n.expression.drop_side_effect_free(e,!0)))return Ft(Y,t);t.body=n}}else if(n instanceof Le){for(var i=n.expressions,r=i.length;--r>=0;){var a=i[r];if(!(a instanceof f))break;var o=a.expression;if(!xi(e,o))break;if(s=!0,i[r]=o.drop_side_effect_free(e))break}switch(r){case-1:return Ft(Y,t);case 0:t.body=i[0];break;default:i.length=r+1}}return t});var p=!a&&t.name||i&&t.value&&!xi(e,t.value),h=new _t(function(n){return!!p||(h.parent()===t&&n.may_throw(e)?p=!0:n instanceof f?p=!0:n instanceof AST_ForAwaitOf?p=!0:n instanceof Ie?n.value&&!xi(e,n.value)?p=!0:void 0:n instanceof Ne&&n!==t||void 0)});if(t.walk(h),!p){var d;switch(t.CTOR){case u:d=o;break;case AST_AsyncFunction:d=ae;break;case AST_AsyncGeneratorFunction:d=AST_GeneratorFunction}return Ft(d,t)}}return s&&t.clone()}}function Qn(e,t,n){n||(n=ve);var i=!1,r=new _t(function(t){return!!(i||t instanceof Ne)||(t instanceof n&&r.loopcontrol_target(t)===e?i=!0:void 0)});return t instanceof he&&r.push(t),r.push(e),e.body.walk(r),i}function Zn(e,t,n){if(e instanceof Le&&(e=e.tail_node()),e instanceof p)if(e.left instanceof Fe){if(e.right instanceof ut&&"typeof"==e.right.operator){var i=e.right.expression;if(pn(i)){var r,s="undefined"==e.left.value;switch(e.operator){case"==":r=s?n:t;break;case"!=":r=s?t:n;break;default:return}if(r){var a,o=!1,u=i.definition(),f=[],l=[],h=new _t(function(e,t){if(o)return!0;if(e instanceof c){var n=e.left;if(!(n instanceof et&&n.definition()===u))return;switch(e.right.walk(h),e.operator){case"=":case"&&=":o=!0}return!0}if(e instanceof v)return t(),(a=e.expression.tail_node())instanceof et&&(a=a.fixed_value(),i=f.length),a instanceof de?Mt(l,a)&&a.walk(h):o=!0,i>=0&&(f.length=i),!0;if(e instanceof W){var i=f.length;return t(),o&&(f.length=i),!0}if(e instanceof ie){e.init&&e.init.walk(h);var i=f.length;return e.condition&&e.condition.walk(h),e.body.walk(h),e.step&&e.step.walk(h),o&&(f.length=i),!0}if(e instanceof re){e.object.walk(h);var i=f.length;return e.init.walk(h),e.body.walk(h),o&&(f.length=i),!0}if(e instanceof Ne){if(e===a)return;return!0}return e instanceof et?(e.definition()===u&&f.push(e),!0):void 0});r.walk(h),f.forEach(function(e){e.defined=!0})}}}}else switch(e.operator){case"&&":Zn(e.left,t),Zn(e.right,t);break;case"||":Zn(d(e.left),n),Zn(d(e.right),n)}function d(e){if(e instanceof p)switch(e.operator){case"==":return(e=e.clone()).operator="!=",e;case"!=":return(e=e.clone()).operator="==",e}}}function ei(e,t,n){return!!t.truthy||(Sn(t)?void 0:!(t.falsy&&!n)&&(!!t.is_truthy()||t.evaluate(e,!0)))}function ti(e,t){var n,i=0,r=!1,s=e.self();if(!is_statement(s))for(;;){if(n=s,(s=e.parent(i++))instanceof p)switch(n){case s.left:if(wn[s.operator])continue;break;case s.right:if(o(s.left))switch(s.operator){case"&&":t[r?"falsy":"truthy"]=!0;break;case"||":case"??":t[r?"truthy":"falsy"]=!0}}else if(s instanceof C){var a=s.condition;if(a===n)continue;if(o(a))switch(n){case s.consequent:t[r?"falsy":"truthy"]=!0;break;case s.alternative:t[r?"truthy":"falsy"]=!0}}else{if(s instanceof J)break;if(s instanceof ce)break;if(s instanceof Le){if(s.expressions[0]===n)continue}else if(s instanceof Re)break}return}for(;;){if(n=s,(s=e.parent(i++))instanceof m){if(s.body[0]===n)continue}else if(s instanceof ce&&o(s.condition))switch(n){case s.body:t[r?"falsy":"truthy"]=!0;break;case s.alternative:t[r?"truthy":"falsy"]=!0}return}function o(e){return!!t.equals(e)||e instanceof ut&&("!"==e.operator&&(!!t.equals(e.expression)&&(r=!0,!0)))}}function ni(e){return function(t,n){var i=!1;return this.definitions.forEach(function(r){r.value&&(i=!0),r.name.match_symbol(function(i){i instanceof Ge&&n.push(Ft(pt,i,{name:i,value:e(t,i)}))},!0)}),i}}function ii(e){return"arguments"!=e.name&&e.orig.length<(e.orig[0]instanceof Xe?3:2)}function ri(e,t){if(e.exposed(t))return!0;for(var n=t.scope.resolve(),i=t.scope;i!==n;)if((i=i.parent_scope).var_names().has(t.name))return!0}function si(e,t){return Ft(lt,e,{definitions:e.definitions.map(function(e){return Ft(pt,e,{name:e.name.convert_symbol(AST_SymbolVar,function(e,n){var i=e.definition();i.orig[i.orig.indexOf(n)]=e,i.scope!==t&&(i.scope=t,t.variables.set(i.name,i),t.enclosed.push(i),t.var_names().set(i.name,!0))}),value:e.value})})})}function ai(e,t){var n=t.definition();return(n.fixed||0===n.fixed)&&ii(n)&&Ti(n)&&!ri(e,n)}function oi(e,t){return t.option("varify")&&Tt(e.definitions,function(e){return!e.name.match_symbol(function(e){if(e instanceof Ge)return!ai(t,e)},!0)})?si(e,t.find_parent(Ne)):e}function ci(e,t){if(t.option("optional_chains")&&e.terminal)do{var n=e.expression;if(e.optional){var i=ei(t,n,!0);if(null==i)return Ft(ut,e,{operator:"void",expression:n}).optimize(t);i instanceof xe||(e.optional=!1)}e=n}while(("Call"==e.TYPE||e instanceof Oe)&&!e.terminal)}function ui(e,t){var n=e.expression;if(!(n instanceof Le))return e;var i=n.expressions.slice(),r=e.clone();return r.expression=i.pop(),i.push(r),$t(e,i)}function fi(e,t,n){var i=e.expression,r=i instanceof et?i.fixed_value():i;if(r instanceof de&&!r.uses_arguments&&!(r.pinned()||n&&n.indexOf(r)<0)){var s=e.args;if(Tt(s,function(e){return!(e instanceof Me)})){var o=r.argnames,c=r===i&&!r.name;if(r.rest){if(!c||!t.option("rests"))return;var u=o.length;for(s=s.slice(0,u);s.length<u;)s.push(Ft(ft,e).optimize(t));s.push(Ft(a,e,{elements:e.args.slice(u)})),o=o.concat(r.rest),r.rest=null}else s=s.slice(),o=o.slice();for(var f=0,l=0,p=c&&t.option("default_values"),h=c&&t.drop_fargs(r,e)?function(e,n){return!e||(e instanceof V?0==e.elements.length&&!e.rest&&n instanceof a:e instanceof U?0==e.properties.length&&!e.rest&&n&&!n.may_throw_on_access(t):e.unused)}:Bt,d=[],m=0;m<s.length;m++){var g=o[m];if(p&&g instanceof R&&s[m].is_defined(t)&&(o[m]=g=g.name),g&&void 0===g.unused){if(h(g,s[m])){var _=s[m].drop_side_effect_free(t);o.splice(m,1),s.splice(m,1),_&&d.push(_),m--;continue}d.push(s[m]),s[f++]=$t(e,d),d=[]}else{var _=s[m].drop_side_effect_free(t);if(h(g)){g&&o.splice(m,1),s.splice(m,1),_&&d.push(_),m--;continue}if(_)d.push(_),s[f++]=$t(e,d),d=[];else if(g){if(!d.length){s[f++]=Ft(we,s[m],{value:0});continue}s[f++]=$t(e,d),d=[]}}l=f}for(;m<o.length;m++)h(o[m])&&o.splice(m--,1);if(r.argnames=o,s.length=l,e.args=s,d.length){var v=$t(e,d);s.push(s.length<o.length?Ft(ut,e,{operator:"void",expression:v}):v)}}}}function li(e,t){t||(t=e.find_parent(Ne));var n=[];return(is_async(t)||t instanceof rt&&e.option("module"))&&n.push("await"),wt(t)&&n.push("yield"),n.length&&It(n)}function pi(e,t){if(!t)return!0;var n=!0,i=new _t(function(r){if(!n)return!0;if(r instanceof Ne){if(r===e)return;if(St(r))for(var s=0;n&&s<r.argnames.length;s++)r.argnames[s].walk(i);else r instanceof me&&t[r.name.name]&&(n=!1);return!0}r instanceof ze&&t[r.name]&&r!==e.name&&(n=!1)});return e.walk(i),n}function hi(e,t){return e.in_strict_mode(t)||!t.has_directive("use strict")}function di(e,t,n,i){if(i instanceof p&&("&&"==i.operator||"||"==i.operator)&&i.right instanceof c&&"="==i.right.operator&&i.right.left instanceof et&&i.right.left.definition()===t&&!n.has_side_effects(e)&&r(i.left)&&r(i.right.right))return t.replaced++,"&&"==i.operator?Ft(C,i,{condition:i.left,consequent:i.right.right,alternative:n}):Ft(C,i,{condition:i.left,consequent:n,alternative:i.right.right});function r(n){if(!n.has_side_effects(e)){var i=!1;return n.walk(new _t(function(e){return!!i||(e instanceof et&&e.definition()===t?i=!0:void 0)})),!i}}}Ne.DEFMETHOD("merge_variables",function(e){if(e.option("merge_vars")){var t,n,i=[],r={},s=this,a=[],o=[],u=0,f=new Ct,l=Object.create(null),h=Object.create(null),d=new _t(function(a,o){if(a instanceof c){var u=a.left,h=a.right;return u instanceof B?(h.walk(d),O(et,I,u),!0):wn[a.operator.slice(0,-1)]?(u.walk(d),E(),h.walk(d),u instanceof et&&I(u),P(),!0):u instanceof et?("="!=a.operator&&I(u,!0),h.walk(d),I(u),!0):void 0}if(a instanceof p){if(!wn[a.operator])return;return T(a),!0}if(a instanceof _){var m=d.loopcontrol_target(a);return m instanceof le||L(m),!0}if(a instanceof v){var g=a.expression;return g instanceof ge?(a.args.forEach(function(e){e.walk(d)}),g.walk(d)):(o(),A(g)),!0}if(a instanceof S)return a.name&&a.name.walk(d),a.extends&&a.extends.walk(d),a.properties.filter(function(e){return e.key instanceof xe&&e.key.walk(d),e.value}).forEach(function(e){e.static?e.value.walk(d):(E(),r.block=a,e.value.walk(d),P())}),!0;if(a instanceof C)return T(a.condition,a.consequent,a.alternative),!0;if(a instanceof D){var m=d.loopcontrol_target(a);return m instanceof H&&L(m),!0}if(a instanceof H){E(),r.block=a,r.loop=!0;var y=r;return a.body.walk(d),r.inserted===a&&(r=y),a.condition.walk(d),P(),!0}if(a instanceof ie)return a.init&&a.init.walk(d),E(),r.block=a,r.loop=!0,a.condition&&a.condition.walk(d),a.body.walk(d),a.step&&a.step.walk(d),P(),!0;if(a instanceof re)return a.object.walk(d),E(),r.block=a,r.loop=!0,a.init.walk(d),a.body.walk(d),P(),!0;if(a instanceof ce)return T(a.condition,a.body,a.alternative),!0;if(a instanceof he){E(),r.block=a;var y=r;return a.body.walk(d),r.inserted===a&&(r=y),P(),!0}if(a instanceof Ne){if(E(),r.block=a,a===s&&(n=r),a instanceof de){a.name&&(l[a.name.definition().id]=!1);var b=a.uses_arguments&&!d.has_directive("use strict")?function(e){l[e.definition().id]=!1}:function(e){I(e)};i.push(a),a.argnames.forEach(function(e){O(Je,b,e)}),a.rest&&O(Je,b,a.rest),i.pop()}return At(a,d),P(),!0}if(a instanceof qe){var g=a.expression;return a.optional?(g.walk(d),E(),a.property.walk(d),P()):o(),A(g),!0}if(a instanceof Be){a.expression.walk(d);var y=r;return a.body.forEach(function(e){e instanceof N||(e.expression.walk(d),y===r&&E())}),r=y,a.body.forEach(function(e){E(),r.block=a;var t=r;kt(e,d),r.inserted===a&&(r=t),P()}),!0}if(a instanceof He||a instanceof Qe)return l[a.definition().id]=!1,!0;if(a instanceof et)return I(a,!0),!0;if(a instanceof at){var x=t;return t=a,kt(a,d),a.bcatch&&(a.bcatch.argname&&a.bcatch.argname.mark_symbol(function(e){if(e instanceof Ue){var t=e.definition();l[t.id]=!1,(t=t.redefined())&&(l[t.id]=!1)}},d),a.bfinally||(t=x)?kt(a.bcatch,d):(E(),kt(a.bcatch,d),P())),t=x,a.bfinally&&a.bfinally.walk(d),!0}if(a instanceof ot){if(!UNARY_POSTFIX[a.operator])return;var w=a.expression;if(!(w instanceof et))return;return I(w,!0),!0}if(a instanceof pt){var k=a.value;return k?k.walk(d):k=r.block instanceof re&&r.block.init===d.parent(),O(Ge,k?function(e){e instanceof AST_SymbolVar?I(e):e.walk(d)}:function(e){if(e instanceof AST_SymbolVar){var t=e.definition().id,n=l[t];n?n.push(e):t in l||f.add(t,e)}else e.walk(d)},a.name),!0}if(a instanceof ht)return E(),r.block=a,r.loop=!0,o(),P(),!0;function A(t){if(e.option("ie")){var n=root_expr(t);n instanceof et&&n.walk(d)}}function T(e,t,n){var i=r,s=[i,i];if(e instanceof p)switch(e.operator){case"&&":s[0]=T(e.left,e.right)[0];break;case"||":case"??":s[1]=T(e.left,null,e.right)[1];break;default:e.walk(d)}else e instanceof C?T(e.condition,e.consequent,e.alternative):e.walk(d);return r=s[0],t&&(E(),t.walk(d)),s[0]=r,r=s[1],n&&(E(),n.walk(d)),s[1]=r,r=i,s}});d.directives=Object.create(e.directives),s.walk(d);for(var m=!1,g=Object.create(null);a.length&&o.length;){var y=o.shift();if(y){var b=y.definition,x=l[b.id];if(x){for(x={end:x.end};b.id in g;)b=g[b.id];x.start=l[b.id].start;var w=[];do{var k=a.shift();if(!(y.index>k.index)){var A=k.definition;if(A.id in h){var T=l[A.id];if(T){if(T.start.block===x.start.block&&j(T,x)&&(!T.start.loop&&Ti(b)||j(x,T))&&(!e.option("webkit")||is_funarg(b)===is_funarg(A))&&!A.const_redefs&&Tt(T.scopes,function(e){return e.find_variable(b.name)===b})){T.forEach(function(e){e.thedef=b,e.name=b.name,e instanceof et?(b.references.push(e),A.replaced++):(b.orig.push(e),A.eliminated++)}),A.fixed||(b.fixed=!1),g[A.id]=b,m=!0;break}w.push(k)}}}}while(a.length);w.length&&(a=w.concat(a))}}}return m}function E(){r=Object.create(r)}function P(){r=Object.getPrototypeOf(r)}function O(e,t,n){var i=new _t(function(n){if(!(n instanceof B))return n instanceof R?(E(),n.value.walk(d),P(),n.name.walk(i)):n instanceof z?n.key instanceof xe?n.value instanceof Oe?(E(),r.block=n,n.key.walk(d),n.value.walk(i),P()):(n.key.walk(d),n.value.walk(i)):n.value.walk(i):n instanceof e?t(n):n.walk(d),!0});n.walk(i)}function I(c,p){var m,g=c.definition();if(p&&!Tt(i,function(e){return!(m=e.variables.get(c.name))||(!is_funarg(m)||m!==g&&!g.undeclared&&e.parent_scope.find_variable(c.name)!==g)}))return l[g.id]=l[m.id]=!1;var _=r;if(t&&(E(),_=r,P()),g.id in l){var v=l[g.id];if(!v)return;if(v.start.block!==_.block)return l[g.id]=!1;if(y(c),v.end=_,g.id in h)o[h[g.id]]=null;else if(!p)return}else{if((m=s.variables.get(g.name))!==g)return m&&n===_&&(l[m.id]=!1),l[g.id]=!1;if(e.exposed(g)||zn[c.name])return l[g.id]=!1;var v=f.get(g.id)||[];if(v.scopes=[],y(c),l[g.id]=v,!p)return v.start=_,a.push({index:u++,definition:g});if(_.block!==s)return l[g.id]=!1;v.start=n}function y(e){v.push(e),Mt(v.scopes,e.scope);var t=Pt(d);t!==e.scope&&Mt(v.scopes,t)}h[g.id]=o.length,o.push({index:u++,definition:g})}function L(e){for(var t=[];;){if(Ot(r,"block")){var n=r.block;if(n instanceof he&&(n=n.body),n===e)break}t.push(r),P()}for(r.inserted=r.block,E();t.length;){var i=t.pop();E(),Ot(i,"block")&&(r.block=i.block),Ot(i,"loop")&&(r.loop=i.loop)}}function M(e,t){return e===t||e.isPrototypeOf(t)}function j(e,t){return M(e.start,e.end)||M(e.start,t.start)}}),Ne.DEFMETHOD("drop_unused",function(e){if(e.option("unused")){var t=this,n=!(t instanceof rt)||e.toplevel.funcs,i=!(t instanceof rt)||e.toplevel.vars,r=/keep_assign/.test(e.option("unused"))?Bt:function(t,n){var i,r=!1;if(t instanceof c?(t.write_only||"="==t.operator)&&(i=a(t.left,n)):t instanceof ot&&t.write_only&&(i=a(t.expression,n)),i instanceof et){var s=i.definition();if(!u[s.id]&&!e.exposed(s)&&E(i,e,r))return i}function a(t,n){if(t instanceof Oe){var i=t.expression;if(!i.may_throw_on_access(e,!0))return r=!0,n&&t instanceof qe&&n.unshift(t.property),a(i,n)}else if(t instanceof c&&"="==t.operator){t.write_only="p";var s=a(t.right);return n?(n.assign=t,s instanceof et?s:t.left):s}return t}},o=Object.create(null),u=Object.create(null),f=function(n){return(f=function t(n,i,r){var s=e.parent(i);if(!s)return r;var a=s instanceof de&&Lt(n,s.argnames);return t(s,i+1,a?function(e){var t=r(e);if(t)return t;if(t=s.variables.get(e)){var n=t.orig[0];if(n instanceof Je||n instanceof Xe)return t}}:s.variables?function(e){return r(e)||s.variables.get(e)}:r)}(t,0,Rt))(n)},l=Object.create(null),d=[],g=Object.create(null),_=Object.create(null),y=Object.create(null),S=Object.create(null),k=Object.create(null);t instanceof rt&&e.top_retain&&t.variables.each(function(t){!e.top_retain(t)||t.id in g||(xe.info("Retaining variable {name}",t),g[t.id]=!0,d.push(t))});var A=new Ct,O=new Ct,D=this,I=new _t(function(r,s){if(r instanceof de&&r.uses_arguments&&!I.has_directive("use strict")&&r.each_argname(function(e){var t=e.definition();t.id in g||(g[t.id]=!0,d.push(t))}),r!==t){if(D===t){if(r instanceof M){var a=r.name.definition(),o=n&&!a.exported;o||a.id in g||(g[a.id]=!0,d.push(a));var c=I.parent()instanceof Z;c?u[a.id]=!0:!o||a.id in _||(_[a.id]=1),r.extends&&r.extends.walk(I);var f=[];return r.properties.forEach(function(e){e.key instanceof xe&&e.key.walk(I);var t=e.value;t&&(mn(e)?(!c&&t.contains_this()&&(c=!0),l(t)):f.push(t))}),f.forEach(o&&c?l:function(e){O.add(a.id,e)}),!0}if(r instanceof me){var a=r.name.definition(),o=n&&!a.exported;return o||a.id in g||(g[a.id]=!0,d.push(a)),O.add(a.id,r),I.parent()instanceof Z?(u[a.id]=!0,Se(r,s,!0)):(!o||a.id in _||(_[a.id]=1),!0)}if(r instanceof j)return r.definitions.forEach(function(t){var n=t.value,s=n&&(t.name instanceof B||n.has_side_effects(e)),a=s&&"="==n.tail_node().operator;t.name.mark_symbol(function(e){if(e instanceof Ge){var o=e.definition();if(k[o.id]=(k[o.id]||0)+1,r instanceof lt&&o.orig[0]instanceof Ue){var c=o.redefined();c&&(k[c.id]=(k[c.id]||0)+1)}return o.id in g||i&&!o.exported&&(r instanceof P?!o.redefined():!o.const_redefs)&&(r instanceof lt||ii(o))||(g[o.id]=!0,d.push(o)),n&&(s?a&&ve(o,e,S[o.id]):O.add(o.id,n),A.add(o.id,t)),pe(o),!0}},I),s&&n.walk(I)}),!0;if(r instanceof Je){var a=r.definition();return k[a.id]=(k[a.id]||0)+1,A.add(a.id,r),!0}if(r instanceof Ke){var a=r.definition();return a.id in g||i&&ii(a)||(g[a.id]=!0,d.push(a)),!0}}return Se(r,s,!0)}function l(e){var t=D;D=r,e.walk(I),D=t}});I.directives=Object.create(e.directives),t.walk(I);var N=e.option("keep_fnames")?Bt:e.option("ie")?function(t){return!e.exposed(t)&&t.references.length==t.replaced}:function(e){return!(e.id in g)||!(e.orig.length-e.eliminated<2)&&(e.orig[1]instanceof Je||Tt(e.references,function(e){return!e.in_arg}))};e.option("ie")&&O.each(function(e,t){t in g||e.forEach(function(e){e.walk(new _t(function(e){return e instanceof ae&&e.name&&!N(e.name.definition())?(e.walk(I),!0):e instanceof Ne||void 0}))})}),I=new _t(Se);for(var L=0;L<d.length;L++){var q=O.get(d[L].id);q&&q.forEach(function(e){e.walk(I)})}Object.keys(o).forEach(function(e){var t=o[e];if(t){t=t.reduce(function(e,t){return t.forEach(function(t){Mt(e,t)}),e},[]);var n=(A.get(e)||[]).filter(function(e){return find_if(e instanceof ot?function(t){return t===e}:function(t){return t===e||!(t instanceof ot)&&X(t)===X(e)},t)});t.length==n.length?o[e]=n:delete o[e]}else delete o[e]});var z=[],H=[],G=new gt(function(t){if(t instanceof R)return Ee(G,t);if(t instanceof B&&t.rest&&(t.rest=t.rest.transform(G)),t instanceof V){for(var n=!t.rest,i=t.elements.length;--i>=0;){var r=t.elements[i].transform(G);r?(t.elements[i]=r,n=!1):n?t.elements.pop():t.elements[i]=Ft(oe,t.elements[i])}return t}if(t instanceof U){var s=[];return t.properties.forEach(function(n){var i=!1;if(n.key instanceof xe&&(n.key=n.key.transform(W),i=n.key.has_side_effects(e)),(i||t.rest)&&function(e){return(e instanceof R?e.name:e)instanceof Ge}(n.value))n.value=n.value.transform(W),s.push(n);else{var r=n.value.transform(G);!r&&t.rest&&(r=n.value instanceof V?Ft(V,n.value,{elements:[]}):Ft(U,n.value,{properties:[]})),r&&(n.value=r,s.push(n))}}),t.properties=s,t}return t instanceof Ge?Te(t):void 0}),W=new gt(function(u,f,d){var _=W.parent();if(i){var y=[],S=r(u,y);if(S){if(function(e,t){var n=e.definition(),i=g[n.id];return!i||t[t instanceof c?"left":"expression"]===e&&(i===e&&n.references.length-n.replaced==1||le(n,t)<0)}(S,u)&&(u instanceof c&&(C=ye(u),!0===u.write_only&&(C=C.drop_side_effect_free(e))),C||(C=Ft(we,u,{value:0}))),C){if(y.assign){var A=y.assign.drop_side_effect_free(e);A&&(A.write_only=!0,y.unshift(A))}switch(_ instanceof Le&&_.tail_node()!==u&&!C.has_side_effects(e)||y.push(C),y.length){case 0:return List.skip;case 1:return en(_,u,y[0].transform(W));default:return $t(u,y.map(function(e){return e.transform(W)}))}}}else if(u instanceof ct&&u.expression instanceof et&&le(u.expression.definition(),u)<0)return Ft(ut,u,{operator:"+",expression:u.expression})}if(u instanceof p&&"instanceof"==u.operator){var S=u.right;if(!(S instanceof et))return;if(S.definition().id in g)return;var T=u.left.drop_side_effect_free(e),C=Ft(te,u).optimize(e);return T?$t(u,[T,C]):C}if(u instanceof v)return z.push(u),u.args=u.args.map(function(e){return e.transform(W)}),u.expression=u.expression.transform(W),u;if(D===t){if(n&&u!==t&&u instanceof M){var O=u.name.definition();if(!(O.id in g)){J(u.name,"Dropping unused class {name}"),O.eliminated++,f(u,W);var I=$n(u,!0);return _ instanceof Z?I:(I=I.drop_side_effect_free(e,!0))?Ft(Re,u,{body:I}):d?List.skip:Ft(Y,u)}}if(u instanceof w&&u.name&&N(u.name.definition())&&(u.name=null),u instanceof de){if(n&&u!==t&&u instanceof me){var O=u.name.definition();if(!(O.id in g))return J(u.name,"Dropping unused function {name}"),O.eliminated++,_ instanceof Z?(De(),Hn(u,!0)):d?List.skip:Ft(Y,u)}if(De(),u instanceof ge&&u.name&&N(u.name.definition())&&(u.name=null),!(u instanceof s)){var L,R,q=e.drop_fargs(u,_);if(q&&_ instanceof v&&_.expression===u)for(L=_.args,R=0;R<L.length&&!(L[R]instanceof Me);R++);var U=u.argnames,$=u.rest,X=!1,ne=!1;if($){if(ne=!0,!L||R<U.length||$ instanceof Je)$=$.transform(G);else{var I=Ce($,Ft(a,_,{elements:L.slice(U.length)}),Te,!u.uses_arguments,$);$=I.name,L.length=U.length,I.value.elements.length&&[].push.apply(L,I.value.elements)}$ instanceof B&&!$.rest&&($ instanceof V?0==$.elements.length&&($=null):0==$.properties.length&&($=null)),u.rest=$,$&&(q=!1,X=!0)}for(var se=q?-1:u.length(),oe=L&&!u.uses_arguments&&_!==e.parent(),ue=U.length;--ue>=0;){var S=U[ue];if(S instanceof Je){var O=S.definition();O.id in g?(q=!1,le(O,S)<0&&(S.unused=null)):q?(J(S,"Dropping unused function argument {name}"),U.pop(),O.eliminated++,S.unused=!0):S.unused=!0}else{var fe;if(ne=!0,!L||R<ue)fe=S.transform(G);else{var I=Ce(S,L[ue],Te,oe,S);fe=I.name,I.value&&(L[ue]=I.value)}fe?(q=!1,U[ue]=fe,X||(X=!(fe instanceof Je))):q?(K(S,"Dropping unused default argument {name}"),U.pop()):ue>se?(K(S,"Dropping unused default argument assignment {name}"),S.name instanceof Je?S.name.unused=!0:X=!0,U[ue]=S.name):(K(S,"Dropping unused default argument value {name}"),U[ue]=S=S.clone(),S.value=Ft(we,S,{value:0}),X=!0)}}ne&&!X&&u.uses_arguments&&!W.has_directive("use strict")&&(u.rest=Ft(V,u,{elements:[]})),H.push(u)}return u}if(u instanceof b&&u.argname instanceof B&&u.argname.transform(G),u instanceof j&&!(_ instanceof re&&_.init===u)){var pe=[],ve=[],be=[],Se=[],ke=0,Ae=u instanceof lt;switch(u.definitions.forEach(function(t){t.value&&(t.value=t.value.transform(W));var n=t.value;if(t.name instanceof B){var r=Ce(t.name,n,function(e){return i?e.definition().id in g?e:y(e)?e:Ae&&!E(e)?e:null:e},!0);r.name?(t=Ft(pt,t,{name:r.name,value:n=r.value}),b()):r.value&&Se.push(r.value)}else{var s,a,c,f,l=t.name.definition(),p=Ae?E(t.name):ii(l);if(!p||!i||l.id in g)if(n&&((s=le(l,t))<0||(f=n.tail_node())instanceof et&&f.definition()===l)&&(t=t.clone(),(n=n.drop_side_effect_free(e))&&xe.warn("Side effects in definition of variable {name} [{start}]",t.name),u instanceof P?t.value=n||Ft(we,t,{value:0}):(t.value=null,n&&Se.push(n)),n=null,s>=0&&(o[l.id][s]=t)),n||u instanceof _e)if(e.option("functions")&&!e.option("ie")&&p&&n&&1==k[l.id]&&0==l.assignments&&(c=n.tail_node())instanceof ge&&!x(l)&&!St(c)&&function(e,n){return 0==n.length?e===t.name.fixed_value():Tt(n,function(t){return e===t.fixed_value()})}(c,l.references)&&function(t){if(!Ae||e.has_directive("use strict")||!(t instanceof ae))return _ instanceof Ne;return _ instanceof h||_ instanceof ie&&_.init===u||_ instanceof ce}(c)&&!1!==(a=function(t,n){if(!t.name)return null;var i,r=t.name.definition();if(r.orig.length>1)return null;if(r.assignments>0)return!1;if(r.name==n)return r;if(e.option("keep_fnames"))return!1;switch(n){case"await":i=is_async;break;case"yield":i=wt}return Tt(r.references,function(e){var r=e.scope;if(r.find_variable(n)!==l)return!1;if(i)do{if(r=r.resolve(),i(r))return!1}while(r!==t&&(r=r.parent_scope));return!0})&&r}(c,t.name.name))){var d;switch(xe.warn("Declaring {name} as function [{start}]",t.name),c.CTOR){case AST_AsyncFunction:d=AST_AsyncDefun;break;case AST_AsyncGeneratorFunction:d=AST_AsyncGeneratorDefun;break;case ae:d=F;break;case AST_GeneratorFunction:d=AST_GeneratorDefun}var m=Ft(d,c);m.name=Ft(We,t.name);var v=t.name.scope.resolve().def_function(m.name);a&&a.forEach(function(e){e.name=v.name,e.thedef=v,e.reference()}),pe.push(m),n!==c&&[].push.apply(Se,n.expressions.slice(0,-1))}else p&&k[l.id]>1&&!(_ instanceof Q)&&l.orig.indexOf(t.name)>l.eliminated&&(k[l.id]--,ke++),b();else _ instanceof Q?b():p&&k[l.id]>1?(xe.info("Dropping declaration of variable {name} [{start}]",t.name),k[l.id]--,l.eliminated++):ve.push(t);else y(t.name)?((n=n&&n.drop_side_effect_free(e))&&Se.push(n),k[l.id]>1?(xe.warn("Dropping duplicated declaration of variable {name} [{start}]",t.name),k[l.id]--,l.eliminated++):(t.value=null,ve.push(t))):((n=n&&n.drop_side_effect_free(e))?(xe.warn("Side effects in initialization of unused variable {name} [{start}]",t.name),Se.push(n)):J(t.name,"Dropping unused variable {name}"),l.eliminated++)}function y(e){var t=e.definition();return t.orig[0]instanceof Ue&&t.scope.resolve()===e.scope.resolve()}function b(){Se.length>0&&(0==be.length?pe.push(Ft(Re,u,{body:$t(u,Se)})):n?(Se.push(n),t.value=$t(n,Se)):t.value=Ft(ut,t,{operator:"void",expression:$t(t,Se)}),Se=[]),be.push(t)}}),ve.length){case 0:if(0==be.length)break;if(be.length==ke){[].unshift.apply(Se,be.map(function(e){xe.info("Dropping duplicated definition of variable {name} [{start}]",e.name);var t=e.name.definition(),n=Ft(et,e.name);t.references.push(n);var i=Ft(c,e,{operator:"=",left:n,right:e.value}),r=le(t,e);return r>=0&&(o[t.id][r]=i),t.assignments++,t.eliminated++,i}));break}case 1:if(0==be.length){var Ee=ve[0].name.definition().id;if(Ee in l){u.definitions=ve,l[Ee].init=u;break}}default:var Pe;be.length>0&&(Pe=be[0].value)instanceof Le&&(be[0].value=Pe.tail_node(),pe.push(Ft(Re,u,{body:$t(Pe,Pe.expressions.slice(0,-1))}))),u.definitions=ve.concat(be),pe.push(u)}return Se.length>0&&pe.push(Ft(Re,u,{body:$t(u,Se)})),ee(pe,u,d)}if(u instanceof c){if(f(u,W),!(u.left instanceof B))return u;var I=Ce(u.left,u.right,function(e){return e},!0===u.write_only);return I.name?Ft(c,u,{operator:u.operator,left:I.name,right:I.value}):I.value?I.value:_ instanceof Le&&_.tail_node()!==u?List.skip:Ft(we,u,{value:0})}if(u instanceof he&&u.body instanceof ie){if(f(u,W),u.body instanceof m){var Oe=u.body;return u.body=Oe.body.pop(),Oe.body.push(u),d?List.splice(Oe.body):Oe}return u}if(u instanceof Ne)return De(),u;if(u instanceof Ke)return!e.option("imports")||u.definition().id in g?u:d?List.skip:null}function De(){var e=D;D=u,f(u,W),D=e}},function(t,n){if(t instanceof m)return qn(t,W.parent(),n);if(t instanceof Q){var r=t.body;if(!(r instanceof m))return;return t.body=r.body.pop(),r.body.push(t),n?List.splice(r.body):r}if(t instanceof ie)return yn(t,n);if(t instanceof se){if(!i||!e.option("loops"))return;if(!on(t.body))return;var s=be(t);if(!s)return;var a=s.definition();if(a.id in g)return;J(s,"Dropping unused loop variable {name}"),l[a.id]===t&&delete l[a.id];var o=[],c=t.object.drop_side_effect_free(e);return c&&(xe.warn("Side effects in object of for-in loop [{start}]",c),o.push(Ft(Re,t,{body:c}))),t.init instanceof j&&a.orig[0]instanceof Ue&&o.push(t.init),ee(o,t,n)}if(t instanceof ue)return t.properties&&0==t.properties.length&&(t.properties=null),t;if(t instanceof Le){if(t.expressions.length>1)return;return en(W.parent(),t,t.expressions[0])}});W.push(e.parent()),W.directives=Object.create(e.directives),t.transform(W),t instanceof de&&1==t.body.length&&t.body[0]instanceof $&&"use strict"==t.body[0].value&&(t.body.length=0),z.forEach(function(t){fi(t,e,H)})}function J(e,t){xe[e.definition().references.length>0?"info":"warn"](t+" [{start}]",e)}function K(e,t){e.name instanceof Je?J(e.name,t):xe.info(t+" [{start}]",e)}function X(e){return e[e instanceof c?"right":"value"]}function ee(e,t,n){switch(e.length){case 0:return n?List.skip:Ft(Y,t);case 1:return e[0];default:return n?List.splice(e):Ft(m,t,{body:e})}}function ne(e,n){return e.scope.resolve()===t&&(e.fixed&&n.fixed||(o[e.id]=!1),!1!==o[e.id])}function fe(e,t){o[e.id]||(o[e.id]=[]),t.fixed.assigns&&Mt(o[e.id],t.fixed.assigns)}function le(e,t){var n=o[e.id];return n&&n.indexOf(t)}function pe(e){_[e.id]>1&&!(e.id in g)&&(g[e.id]=!0,d.push(e)),_[e.id]=0}function ve(e,t,n){e.id in g||(t&&n?(g[e.id]=t,d.push(e)):(y[e.id]=t,S[e.id]=n))}function ye(t){var n=t.right;if(!t.write_only)return n;if(!(n instanceof p&&wn[n.operator]))return n;if(!(n.left instanceof et))return n;if(!(t.left instanceof et))return n;var i=t.left.definition();return n.left.definition()!==i?n:n.right.has_side_effects(e)?n:(ne(i,n.left)&&fe(i,n.left),n.right)}function be(e){var t=e.init;if(t instanceof j)return(t=t.definitions[0].name)instanceof Ge&&t;for(;t instanceof Oe;)t=t.expression.tail_node();return t instanceof et?t:void 0}function Se(n,s,a){if(n instanceof c&&n.left instanceof et){var o=n.left.definition();o.scope.resolve()===t&&A.add(o.id,n)}if(n instanceof et&&n.in_arg&&(k[n.definition().id]=0),n instanceof ot&&n.expression instanceof et){var o=n.expression.definition();o.scope.resolve()===t&&A.add(o.id,n)}var u=[],h=r(n,u);if(h){var m=h.definition();if(m.scope.resolve()!==t&&t.variables.get(h.name)!==m)return;if(x(m)&&!Tt(t.argnames,function(e){return!e.match_symbol(function(e){if(e instanceof Je){var t=e.definition();return t.references.length>t.replaced}},!0)}))return;if("p"===n.write_only&&n.right.may_throw_on_access(e,!0))return;var v=u.assign;if(v&&(v.write_only=!0,v.walk(I)),u.forEach(function(e){e.walk(I)}),n instanceof c){var b=ye(n),w=!1;if(a&&!0===n.write_only&&!b.has_side_effects(e)?O.add(m.id,b):(b.walk(I),w="="==b.tail_node().operator),n.left===h)n.write_only&&!w||ve(m,h,S[m.id]);else{var E=h.fixed_value();E&&E.is_constant()||ve(m,y[m.id],!0)}}return ne(m,h)&&Xt(h,n)!==h&&fe(m,h),pe(m),!0}if(n instanceof p){if("instanceof"!=n.operator)return;var h=n.right;if(!(h instanceof et))return;var C=h.definition().id;if(!_[C])return;return n.left.walk(I),_[C]++,!0}if(n instanceof se){if(n.init instanceof et&&D===t){var C=n.init.definition().id;C in l||(l[C]=n)}if(!i||!e.option("loops"))return;if(!on(n.body))return;if(n.init.has_side_effects(e))return;var h=be(n);if(!h)return;var o=h.definition();if(o.scope.resolve()!==t){var P=f(h.name);if(P===o||P&&P.redefined()===o)return}return n.object.walk(I),!0}if(n instanceof et){var m=n.definition();if(m.id in g||(g[m.id]=!0,d.push(m)),T(m.scope,n.scope)){var N=m.redefined();!N||N.id in g||(g[N.id]=!0,d.push(N))}return ne(m,n)&&fe(m,n),!0}if(n instanceof Ne){var L=D;return D=n,s(),D=L,!0}}function Te(e){return e.definition().id in g?e:(e instanceof Je&&(e.unused=!0),null)}function Ee(t,n){n.value=n.value.transform(W);var i=n.name.transform(t);if(!i){if(n.name instanceof B)return null;var r=n.value.drop_side_effect_free(e);if(!r)return null;J(n.name,"Side effects in default value of unused variable {name}"),(n=n.clone()).name.unused=null,n.value=r}return n}function Ce(t,n,i,r,o){var u=new gt(function(t){if(t instanceof R){if(!(e.option("default_values")&&n&&n.is_defined(e))){var c=r;r=!1;var p=Ee(u,t);return r=c,!p&&r&&n&&(n=n.drop_side_effect_free(e)),p}t===o?o=t=t.name:t=t.name}if(t instanceof V){var h,c=r,d=n;n instanceof et&&(r=!1,n=n.fixed_value()),n instanceof a?(h=!0,S=n.elements):(h=n&&n.is_string(e),S=!1);var m=[],g=r&&[],_=0;if(t.elements.forEach(function(e,t){(n=S&&S[t])instanceof oe?n=null:n instanceof Me&&(r&&(g.length=_,Un(d,g),[].push.apply(g,S.slice(t)),d.elements=g),n=S=!1),(e=e.transform(u))&&(m[_]=e),r&&n&&(g[_]=n),!e&&!n&&r&&S||_++}),n=S&&Ft(a,d,{elements:S.slice(t.elements.length)}),t.rest){var v=r;r=!1,t.rest=t.rest.transform(e.option("rests")?u:W),r=v,t.rest&&(m.length=_)}if(r&&(n&&!t.rest&&(n=n.drop_side_effect_free(e)),n instanceof a?n=n.elements:n instanceof Le?n=n.expressions:n&&(n=[n]),n&&n.length&&(g.length=_,[].push.apply(g,n))),n=d,r=c,S&&g&&(Un(n,g),(n=n.clone()).elements=g),h){if(!t.rest)switch(m.length){case 0:if(t===o)break;return r&&(n=n.drop_side_effect_free(e)),null;case 1:if(!r)break;if(t===o)break;var y=m[0];if(y.has_side_effects(e))break;if(n.has_side_effects(e)&&y.match_symbol(function(e){return e instanceof Oe}))break;return n=Ft(qe,t,{expression:n,property:Ft(we,t,{value:0})}),y}}else m.length=t.elements.length;return Un(t,m),t.elements=m,t}if(t instanceof U){var b,x,S,c=r,d=n;n instanceof et&&(r=!1,n=n.fixed_value()),n instanceof ke&&(b=[],x=new Ct,S=n.properties.map(function(t,n){if((t=t.clone())instanceof Me)x=!1;else{var i=t.key;i instanceof xe&&(i=i.evaluate(e,!0)),i instanceof xe?x=!1:!x||t instanceof AST_ObjectSetter||x.set(i,t),b[n]=i}return t})),t.rest&&(n=!1,t.rest=t.rest.transform(e.option("rests")?u:W));var w=new Ct,k=r&&new Ct,A=[];if(t.properties.map(function(t){var n=t.key;return n instanceof xe&&(t.key=n=n.transform(W),n=n.evaluate(e,!0)),n instanceof xe?k=!1:w.set(n,!w.has(n)),n}).forEach(function(e,i){var a,o=t.properties[i];if(e instanceof xe)r=!1,n=!1,a=o.value.transform(u)||l(o.value);else{r=k&&w.get(e);var c=x&&x.get(e);c?(n=c.value)instanceof s&&(n=!1):n=!1,(a=o.value.transform(u))?k&&k.set(e,!1):((t.rest||f(o))&&(a=l(o.value)),k&&!k.has(e)&&(c?(k.set(e,c),null===n&&x.set(e,f(c)&&Ft(Ae,c,{key:c.key,value:Ft(we,c,{value:0})}))):k.set(e,!0))),n&&(c.value=n)}a&&(o.value=a,A.push(o))}),n=d,r=c,k&&b&&((n=n.clone()).properties=List(S,function(n,i){if(n instanceof Me)return n;var r=b[i];if(r instanceof xe)return n;if(k.has(r)){var s=k.get(r);if(!s)return n;if(s===n)return x.get(r)||List.skip}else if(t.rest)return n;var a=n.value.drop_side_effect_free(e);return a?(n.value=a,n):f(n)?Ft(Ae,n,{key:n.key,value:Ft(we,n,{value:0})}):List.skip})),n&&!t.rest)switch(A.length){case 0:if(t===o)break;if(n.may_throw_on_access(e,!0))break;return r&&(n=n.drop_side_effect_free(e)),null;case 1:if(!r)break;if(t===o)break;var T=A[0];if(T.key instanceof xe)break;if(T.value.has_side_effects(e))break;if(n.has_side_effects(e)&&T.value.match_symbol(function(e){return e instanceof Oe}))break;return n=Ft(qe,t,{expression:n,property:Kt(T.key,T)}),T.value}return t.properties=A,t}return!(t=t instanceof oe?null:i(t))&&r&&n&&(n=n.drop_side_effect_free(e)),t});return{name:t.transform(u),value:n};function f(t){return t.key instanceof xe&&t.key.has_side_effects(e)}function l(t){return t instanceof R?l(t.name):t instanceof B?(null===n?n=Ft(we,t,{value:0}):n&&(n.may_throw_on_access(e,!0)?n=Ft(a,t,{elements:n instanceof Le?n.expressions:[n]}):function e(t){if(t instanceof c)t.write_only=!1,e(t.right);else if(t instanceof p){if(!wn[t.operator])return;e(t.left),e(t.right)}else t instanceof C?(e(t.consequent),e(t.alternative)):t instanceof Le?e(t.tail_node()):t instanceof ot&&(t.write_only=!1)}(n)),Ft(U,t,{properties:[]})):(t.unused=null,t)}}}),Ne.DEFMETHOD("hoist_declarations",function(e){if(!e.has_directive("use asm")){var t=e.option("hoist_funs"),n=e.option("hoist_vars"),i=this;if(n){var r=0;i.walk(new _t(function(e){return r>1||(e instanceof Q||(e instanceof Ne&&e!==i||(e instanceof lt?(r++,!0):void 0)))})),r<=1&&(n=!1)}if(t||n){var s=new Ct,a=[],o=[],c=new Ct,u=new gt(function(r,f,l){if(r!==i){if(r instanceof $)return a.push(r),l?List.skip:Ft(Y,r);if(r instanceof me){if(!t)return r;var p=u.parent();return p instanceof Q?r:p instanceof Z?r:p!==i&&e.has_directive("use strict")?r:(o.push(r),l?List.skip:Ft(Y,r))}if(r instanceof lt){if(!n)return r;var p=u.parent();if(p instanceof Q)return r;if(!Tt(r.definitions,function(e){var t=e.name;return t instanceof AST_SymbolVar&&!s.has(t.name)&&i.find_variable(t.name)===t.definition()}))return r;r.definitions.forEach(function(e){c.set(e.name.name,e)});var h=r.to_assignments();if(p instanceof re&&p.init===r){if(h)return h;var d=r.definitions[0].name;return Ft(et,d)}return p instanceof ie&&p.init===r?h:h?Ft(Re,r,{body:h}):l?List.skip:Ft(Y,r)}return r instanceof Ne?r:r instanceof He?(s.set(r.name,!0),r):void 0}});if(i.transform(u),c.size()>0){var f=[];i instanceof de&&i.each_argname(function(e){Tt(e.definition().references,function(e){return!e.in_arg})&&c.del(e.name)}),c.each(function(e,t){(e=e.clone()).name=e.name.clone(),e.value=null,f.push(e),c.set(t,e),e.name.definition().orig.unshift(e.name)}),f.length>0&&o.push(Ft(lt,i,{definitions:f}))}i.body=a.concat(o,i.body)}}}),Ne.DEFMETHOD("process_returns",Rt),F.DEFMETHOD("process_returns",function(e){if(e.option("booleans")&&!(e.parent()instanceof Z))switch(Yn(this.name.definition(),Wn(this),e)){case"d":Xn(e,this,!0);break;case!0:Jn(this,e)}}),ae.DEFMETHOD("process_returns",function(e){if(e.option("booleans")){var t=!0,n=Wn(this);if(!this.name||l(this.name.definition())){var i=e.parent();if(i instanceof c){if("="!=i.operator)return;var r=i.left;if(!(r instanceof et))return;if(!l(r.definition()))return}else if(i instanceof v&&i.expression!==this){var s=i.expression;if(s instanceof et&&(s=s.fixed_value()),!(s instanceof de))return;if(s.uses_arguments||s.pinned())return;for(var a=i.args,o=0;o<a.length;o++){var u=a[o];if(u===this){if(!(r=s.argnames[o])&&s.rest)return;break}if(u instanceof Me)return}if(r instanceof R&&(r=r.name),r instanceof Je&&!l(r.definition()))return}else{if("Call"!=i.TYPE)return;e.pop();var f=e.in_boolean_context();switch(e.push(this),f){case!0:t=!1;case"d":break;default:return}}t?Xn(e,this,!0):Jn(this,e)}}function l(i){switch(Yn(i,n,e)){case!0:t=!1;case"d":return!0}}}),d.DEFMETHOD("var_names",function(){var e=this._var_names;return e||(this._var_names=e=new Ct,this.enclosed.forEach(function(t){e.set(t.name,!0)}),this.variables.each(function(t,n){e.set(n,!0)})),e}),Ne.DEFMETHOD("make_var",function(e,t,n){var i=[this];t instanceof Ge&&t.definition().references.forEach(function(e){var t=e.scope;do{if(!Mt(i,t))return;t=t.parent_scope}while(t&&t!==this)});for(var r=n=n.replace(/^[^a-z_$]|[^a-z0-9_$]/gi,"_"),s=0;!Tt(i,function(e){return!e.var_names().has(r)});s++)r=n+"$"+s;var a=Ft(e,t,{name:r,scope:this}),o=this.def_variable(a);return i.forEach(function(e){e.enclosed.push(o),e.var_names().set(r,!0)}),a}),Ne.DEFMETHOD("hoist_properties",function(e){if(e.option("hoist_props")&&!e.has_directive("use asm")){var t=this;if(!St(t)||!t.value){var n=t instanceof rt&&e.top_retain||Bt,i=Object.create(null),r=new gt(function(e,n){if(e instanceof c){if("="!=e.operator)return;if(!e.write_only)return;if(!s(e.left,e.right,1))return;n(e,r);var a=new Ct,o=[],u=[];return e.right.properties.forEach(function(n){var i=h(AST_SymbolVar,e.left,n.key);u.push(Ft(pt,e,{name:i,value:null}));var r=Ft(et,e,{name:i.name,scope:t,thedef:i.definition()});r.reference(),o.push(Ft(c,e,{operator:"=",left:r,right:n.value}))}),a.value=e.right,i[e.left.definition().id]=a,t.body.splice(t.body.indexOf(r.stack[1])+1,0,Ft(lt,e,{definitions:u})),$t(e,o)}if(e instanceof Ne){if(e===t)return;var f=r.parent();if("Call"==f.TYPE&&f.expression===e)return;return e}if(e instanceof pt){if(!s(e.name,e.value,0))return;n(e,r);var a=new Ct,l=[],p=e.clone();return p.value=e.name instanceof He?Ft(we,e,{value:0}):null,l.push(p),e.value.properties.forEach(function(t){l.push(Ft(pt,e,{name:h(e.name.CTOR,e.name,t.key),value:t.value}))}),a.value=e.value,i[e.name.definition().id]=a,List.splice(l)}function h(e,n,i){var r=t.make_var(e,n,n.name+"_"+i);return a.set(i,r.definition()),r}});t.transform(r),t.transform(new gt(function(e,t){if(e instanceof Oe){if(!(e.expression instanceof et))return;var n=i[e.expression.definition().id];if(!n)return;if(e.expression.fixed_value()!==n.value)return;var r=n.get(e.get_property()),s=Ft(et,e,{name:r.name,scope:e.expression.scope,thedef:r});return s.reference(),s}if(e instanceof et){var n=i[e.definition().id];if(!n)return;if(e.fixed_value()!==n.value)return;return Ft(ke,e,{properties:[]})}}))}}function s(i,r,s){if(i instanceof ze){var a=i.definition();if(a.assignments==s&&a.references.length-a.replaced!=s&&!a.single_use&&t.find_variable(i.name)===a&&!n(a)&&i.fixed_value()===r){var o=i.fixed||a.fixed;if(!(o.direct_access||o.escaped&&1==o.escaped.depth))return r instanceof ke&&r.properties.length>0&&E(i,e)&&Tt(r.properties,function(e){return Li(e)&&"__proto__"!==e.key})}}}}),function(e){function t(e,t,n,i){for(var r=e.length,s=[],a=!1,o=0;o<r;o++){var c,u=e[o];(c=i&&u instanceof Me?i(u,t,n):u.drop_side_effect_free(t,n))!==u&&(a=!0),c&&(s.push(c),n=!1)}return s.length?a?s:e:null}function n(e,t,n){var i=e.expression;return i.is_string(t)?i.drop_side_effect_free(t,n):e}function i(e){return e instanceof Me?Ft(a,e,{elements:[e]}):e}e(xe,Ut),e(s,Vt),e(a,function(e,r){var s=t(this.elements,e,r,n);return s?s===this.elements&&Tt(s,function(e){return e instanceof Me})?this:$t(this,s.map(i)):null}),e(c,function(e){var t=this.left;if(t instanceof Oe){var n=t.expression;if(n.may_throw_on_access(e,!0))return this;if(e.has_directive("use strict")&&n.is_constant())return this}return t.has_side_effects(e)?this:wn[this.operator.slice(0,-1)]?this:(this.write_only=!0,root_expr(t).is_constant_expression(e.find_parent(Ne))?this.right.drop_side_effect_free(e):this)}),e(f,function(e){if(!e.option("awaits"))return this;var t=this.expression;if(!xi(e,t))return this;t instanceof ut&&"!"==t.operator&&(t=t.expression);var n=t.drop_side_effect_free(e);if(n===t)return this;n?xi(e,n)||(n=n.negate(e)):n=Ft(we,t,{value:0});var i=this.clone();return i.expression=n,i}),e(p,function(e,t){var n=this.left,i=this.right,r=this.operator;if(!bi(r,i,e)){var s=n.drop_side_effect_free(e,t);if(s===n)return this;var a=this.clone();return a.left=s||Ft(we,n,{value:0}),a}var o=i.drop_side_effect_free(e,t);if(!o)return n.drop_side_effect_free(e,t);if(wn[r]&&o.has_side_effects(e)){var a=this;if(o!==i&&((a=a.clone()).right=o.drop_side_effect_free(e)),"??"==r)return a;var c=a.clone();c.operator="&&"==r?"||":"&&",c.left=n.negate(e,t);var u=c.right.tail_node();u instanceof p&&c.operator==u.operator&&ki(c);var f=t?An:kn;return"&&"==r?f(a,c):f(c,a)}var s=n.drop_side_effect_free(e,t);return s?(o=o.drop_side_effect_free(e))?$t(this,[s,o]):s:o}),e(v,function(e,r){var s=this;if(s.is_expr_pure(e)){s.pure&&xe.warn("Dropping __PURE__ call [{start}]",s);var a=t(s.args,e,r,n);return a&&$t(s,a.map(i))}var o=s.expression;if(s.is_call_pure(e)){var c=s.args.slice();return c.unshift(o.expression),(c=t(c,e,r,n))&&$t(s,c.map(i))}if(e.option("yields")&&wt(o)){var u=s.clone();u.expression=Ft(ae,o),u.expression.body=[];var f=u.transform(e);if(f!==u)return f.drop_side_effect_free(e,r)}var l=Xn(e,o);if(l&&((s=s.clone()).expression=l,o._squeezed&&(s.expression._squeezed=!0)),s instanceof be){var p=o;if(p instanceof et&&(p=p.fixed_value()),p instanceof de){if(function(e,t){e.new=!0;var n=Tt(e.body,function(e){return!e.has_side_effects(t)})&&Tt(e.argnames,function(e){return!e.match_symbol(Bt)})&&!(e.rest&&e.rest.match_symbol(Bt));return e.new=!1,n}(p,e)){var c=s.args.slice();return c.unshift(o),(c=t(c,e,r,n))&&$t(s,c.map(i))}p.contains_this()||((s=Ft(v,s)).expression=s.expression.clone(),s.args=s.args.slice())}}return s.call_only=!0,s}),e(w,function(e,n){for(var i=this,s=[],a=[],c=0,u=i.properties,f=0;f<u.length;f++){var l=u[f];if(l.key instanceof xe&&s.push(l.key),mn(l)){var p=l.value;if(p.has_side_effects(e)){if(p.contains_this())return i;l instanceof AST_ClassInit?(c++,a.push(l)):a.push(p)}}}var h=i.extends;if(h&&(h instanceof et&&(h=h.fixed_value()),(h=!r(h))||s.unshift(i.extends)),(s=t(s,e,n))&&(n=!1),a=t(a,e,n),!s){if(!h&&!a&&!i.name)return null;s=[]}if(h||i.name||!e.has_directive("use strict")){var d=$n(i);return h||(d.extends=null),d.properties=[],a?a.length==c?(s.length&&a.unshift(Ft(AST_ClassField,i,{key:$t(i,s),value:null})),d.properties=a):d.properties.push(Ft(AST_ClassField,i,{static:!0,key:s.length?$t(i,s):"c",value:m()})):s.length&&d.properties.push(Ft(AST_ClassMethod,i,{key:$t(i,s),value:Ft(ae,i,{argnames:[],body:[]}).init_vars(d)})),d}return a&&s.push(Ft(v,i,{expression:Ft(o,i,{argnames:[],body:[],value:m()}).init_vars(i.parent_scope),args:[]})),$t(i,s);function m(){return $t(i,a.map(function(e){if(!(e instanceof AST_ClassInit))return e;var t=Ft(o,e.value);return t.argnames=[],Ft(v,e,{expression:t,args:[]})}))}}),e(C,function(e){var t,n,i=this.consequent.drop_side_effect_free(e),r=this.alternative.drop_side_effect_free(e);return i===this.consequent&&r===this.alternative?this:(e.option("ie")&&(t=[],i instanceof ae&&(t.push(i),i=null),r instanceof ae&&(t.push(r),r=null)),i?r?((n=this.clone()).consequent=i,n.alternative=r):n=Ft(p,this,{operator:"&&",left:this.condition,right:i}):n=r?Ft(p,this,{operator:"||",left:this.condition,right:r}):this.condition.drop_side_effect_free(e),t?(n&&t.push(n),0==t.length?null:$t(this,t)):n)}),e(O,Vt),e(G,function(e,t){var n=this.expression;return n.may_throw_on_access(e)?this:n.drop_side_effect_free(e,t)}),e(ae,function(e){return Kn(this,e)?null:this}),e(ge,Vt),e(ke,function(e,n){var i=[];this.properties.forEach(function(e){e instanceof Me?i.push(e):(e.key instanceof xe&&i.push(e.key),i.push(e.value))});var r=t(i,e,n,function(e,t,n){var i=e.expression;return i.safe_to_spread()?i.drop_side_effect_free(t,n):e});return r?r!==i||Tt(r,function(e){return!(e instanceof Me)})?$t(this,r.map(function(e){return e instanceof Me?Ft(ke,e,{properties:[e]}):e})):this:null}),e(Ee,Vt),e(Le,function(e,n){var i=t(this.expressions,e,n);if(!i)return null;var r,s,a,o=i.length-1,u=i[o];if(e.option("awaits")&&o>0&&u instanceof f&&u.expression.is_constant()){var l=(i=i.slice(0,-1))[--o];u.expression=xi(e,l)?l:l.negate(e),i[o]=u}return e.option("conditionals")&&o>0&&(r=i[o-1])instanceof c&&"="==r.operator&&(a=r.left)instanceof et&&(s=di(e,a.definition(),r.right,u))&&((r=r.clone()).right=s,(i=i.slice(0,-2)).push(r.drop_side_effect_free(e,n))),i===this.expressions?this:$t(this,i)}),e(qe,function(e,t){var n=this.expression;if(n.may_throw_on_access(e))return this;var i=this.property;return(n=n.drop_side_effect_free(e,t))?(i=i.drop_side_effect_free(e))?$t(this,[n,i]):n:i.drop_side_effect_free(e,t)}),e(et,function(e){return this.is_declared(e)&&E(this,e)?null:this}),e(tt,function(e,t){var n=this;if(n.is_expr_pure(e)){var i=n.expressions;return 0==i.length?null:$t(n,i).drop_side_effect_free(e,t)}var r=n.tag,s=Xn(e,r);return s&&((n=n.clone()).tag=s,r._squeezed&&(n.tag._squeezed=!0)),n}),e(ot,function(e,t){var n=this.expression;if(unary_side_effects[this.operator])return this.write_only=!n.has_side_effects(e),this;if("typeof"==this.operator&&n instanceof et&&E(n,e))return null;var i=n.drop_side_effect_free(e,t);return t&&i&&fn(i)?i===n&&"!"==this.operator?this:i.negate(e,t):i})}(function(e,t){e.DEFMETHOD("drop_side_effect_free",t)}),e(Re,function(e,t){if(t.option("side_effects")){var n=e.body,i=n.drop_side_effect_free(t,!0);if(!i)return xe.warn("Dropping side-effect-free statement [{start}]",e),Ft(Y,e);if(i!==n)return Ft(Re,e,{body:i})}return e}),e(ht,function(e,t){return t.option("loops")?Ft(ie,e).optimize(t):e}),e(H,function(e,t){if(!t.option("loops"))return e;var n=ei(t,e.condition);if(!(n instanceof xe)){if(n&&!Qn(e,t.parent(),D))return Ft(ie,e,{body:Ft(m,e.body,{body:[e.body,Ft(Re,e.condition,{body:e.condition})]})}).optimize(t);if(!Qn(e,t.parent()))return Ft(m,e.body,{body:[e.body,Ft(Re,e.condition,{body:e.condition})]}).optimize(t)}if(e.body instanceof m&&!Qn(e,t.parent(),D)){for(var i=e.body.body,r=i.length;--r>=0;){var s=i[r];if(s instanceof ce&&!s.alternative&&s.body instanceof _&&t.loopcontrol_target(s.body)===e){if(a(s.condition))break;e.condition=Ft(p,e,{operator:"&&",left:s.condition.negate(t),right:e.condition}),i.splice(r,1)}else if(s instanceof Re){if(a(s.body))break;e.condition=$t(e,[s.body,e.condition]),i.splice(r,1)}else if(!_n(s,!0))break}e.body=qn(e.body,t.parent())}return e.body instanceof Y?Ft(ie,e).optimize(t):e.body instanceof Re?Ft(ie,e,{condition:$t(e.condition,[e.body.body,e.condition]),body:Ft(Y,e)}).optimize(t):e;function a(t){var n=!1;return t.walk(new _t(function(t){return!!n||(t instanceof et?(Lt(t.definition(),e.enclosed)||(n=!0),!0):void 0)})),n}}),e(ie,function(e,t){if(!t.option("loops"))return e;if(t.option("side_effects")&&(e.init&&(e.init=e.init.drop_side_effect_free(t)),e.step&&(e.step=e.step.drop_side_effect_free(t))),e.condition){var n=ei(t,e.condition);if(n)n instanceof xe||(e.body=Ft(m,e.body,{body:[Ft(Re,e.condition,{body:e.condition}),e.body]}),e.condition=null);else if(t.option("dead_code")){var i=[];return is_statement(e.init)?i.push(e.init):e.init&&i.push(Ft(Re,e.init,{body:e.init})),i.push(Ft(Re,e.condition,{body:e.condition})),xn(t,e.body,i),Ft(m,e,{body:i}).optimize(t)}}return function e(t,n){var i=o(t.body);if(n.option("dead_code")&&(i instanceof _||i instanceof D&&c(i)||i instanceof J)){var r=[];is_statement(t.init)?r.push(t.init):t.init&&r.push(Ft(Re,t.init,{body:t.init}));var s=c(i)||i instanceof J;return t.condition&&s?r.push(Ft(ce,t,{condition:t.condition,body:i,alternative:null})):t.condition?r.push(Ft(Re,t.condition,{body:t.condition})):s&&r.push(i),xn(n,t.body,r),Ft(m,t,{body:r})}if(i instanceof ce){var a=o(i.body);if(a instanceof _&&!c(a)){t.condition?t.condition=Ft(p,t.condition,{left:t.condition,operator:"&&",right:i.condition.negate(n)}):t.condition=i.condition.negate(n);var r=an(i.alternative);return xn(n,i.body,r),u(r)}if((a=o(i.alternative))instanceof _&&!c(a)){t.condition?t.condition=Ft(p,t.condition,{left:t.condition,operator:"&&",right:i.condition}):t.condition=i.condition;var r=an(i.body);return xn(n,i.alternative,r),u(r)}}return t;function o(e){return e instanceof m?e.body[0]:e}function c(e){return n.loopcontrol_target(e)!==n.self()}function u(i){return t.body instanceof m?(t.body=t.body.clone(),t.body.body=i.concat(t.body.body.slice(1)),t.body=t.body.transform(n)):t.body=Ft(m,t.body,{body:i}).transform(n),e(t,n)}}(e,t)}),e(re,function(e,t){if(t.option("varify")&&rn(e.init)){var n=e.init.definitions[0].name;(n instanceof B||n instanceof Qe)&&!n.match_symbol(function(e){if(e instanceof Ge){var n=e.definition();return!Ti(n)||ri(t,n)}},!0)&&(e.init=si(e.init,e.resolve()))}return e}),e(ce,function(e,t){if(on(e.alternative)&&(e.alternative=null),!t.option("conditionals"))return e;if(t.option("booleans")&&!e.condition.has_side_effects(t)&&ti(t,e.condition),t.option("dead_code")){var n=ei(t,e.condition);if(!n){xe.warn("Condition always false [{start}]",e.condition);var i=[Ft(Re,e.condition,{body:e.condition}).transform(t)];return xn(t,e.body,i),e.alternative&&i.push(e.alternative),Ft(m,e,{body:i}).optimize(t)}if(!(n instanceof xe)){xe.warn("Condition always true [{start}]",e.condition);var i=[Ft(Re,e.condition,{body:e.condition}).transform(t),e.body];return e.alternative&&xn(t,e.alternative,i),Ft(m,e,{body:i}).optimize(t)}}var r=e.condition.negate(t),s=e.condition.print_to_string().length,a=r.print_to_string().length,o=a<s;if(e.alternative&&o){o=!1,e.condition=r;var u=e.body;e.body=e.alternative,e.alternative=on(u)?null:u}var f=[],l=[],h=[],d=q(e.body,f,l,h),g=[],_=[],v=[],y=q(e.alternative,g,_,v);if(d instanceof m||y instanceof m){var i=[],x=[];if(d&&([].push.apply(i,f),[].push.apply(x,l),d instanceof m?e.body=d:0==d.length?e.body=Ft(Y,e.body):e.body=Ft(Re,e.body,{body:$t(e.body,d)}),h.forEach(nt)),y&&([].push.apply(i,g),[].push.apply(x,_),y instanceof m?e.alternative=y:0==y.length?e.alternative=null:e.alternative=Ft(Re,e.alternative,{body:$t(e.alternative,y)}),v.forEach(nt)),x.length>0&&i.push(Ft(lt,e,{definitions:x})),i.length>0)return i.push(e.transform(t)),Ft(m,e,{body:i}).optimize(t)}else if(d&&y){var i=f.concat(g);return(l.length>0||_.length>0)&&i.push(Ft(lt,e,{definitions:l.concat(_)})),0==d.length?i.push(Ft(Re,e.condition,{body:y.length>0?Ft(p,e,{operator:"||",left:e.condition,right:$t(e.alternative,y)}).transform(t):e.condition.clone()}).optimize(t)):0==y.length?(s===a&&!o&&e.condition instanceof p&&"||"==e.condition.operator&&(o=!0),i.push(Ft(Re,e,{body:Ft(p,e,{operator:o?"||":"&&",left:o?r:e.condition,right:$t(e.body,d)}).transform(t)}).optimize(t))):i.push(Ft(Re,e,{body:Ft(C,e,{condition:e.condition,consequent:$t(e.body,d),alternative:$t(e.alternative,y)})}).optimize(t)),h.forEach(nt),v.forEach(nt),Ft(m,e,{body:i}).optimize(t)}if(on(e.body)&&(e=Ft(ce,e,{condition:r,body:e.alternative,alternative:null})),e.alternative instanceof J&&e.body.TYPE==e.alternative.TYPE){var S=e.body.value,w=e.alternative.value;if(!S&&!w)return Ft(m,e,{body:[Ft(Re,e,{body:e.condition}),e.body]}).optimize(t);if(S&&w||!function(){var e=!1,n=0,i=t.self();do{if(i instanceof b)t.parent(n).bfinally&&(e=!0),n++;else if(i instanceof ne)n++;else{if(i instanceof Ne)return e&&Et(i);i instanceof at&&i.bfinally&&(e=!0)}}while(i=t.parent(n++))}()){var k=Ft(e.body.CTOR,e,{value:Ft(C,e,{condition:e.condition,consequent:S||Ft(ft,e.body).transform(t),alternative:w||Ft(ft,e.alternative).transform(t)})});return k instanceof Ie&&(k.in_bool=e.body.in_bool||e.alternative.in_bool),k}}if(e.body instanceof ce&&!e.body.alternative&&!e.alternative&&(e=Ft(ce,e,{condition:Ft(p,e.condition,{operator:"&&",left:e.condition,right:e.body.condition}),body:e.body.body,alternative:null})),jn(e.body)&&e.alternative){var A=e.alternative;return e.alternative=null,Ft(m,e,{body:[e,A]}).optimize(t)}if(jn(e.alternative)){var i=e.body;return e.body=e.alternative,e.condition=o?r:e.condition.negate(t),e.alternative=null,Ft(m,e,{body:[e,i]}).optimize(t)}if(e.alternative){for(var T=M(e.body),E=j(T),P=M(e.alternative),O=j(P),D=[];E>=0&&O>=0;){var I=T[E],N=P[O];if(I.equals(N))T.splice(E--,1),P.splice(O--,1),D.unshift(tn(I,N));else{if(!(I instanceof Re))break;if(!(N instanceof Re))break;var L=I.body.tail_node(),R=N.body.tail_node();if(!L.equals(R))break;E=F(T,I.body,E),O=F(P,N.body,O),D.unshift(Ft(Re,L,{body:tn(L,R)}))}}if(D.length>0)return e.body=T.length>0?Ft(m,e,{body:T}):Ft(Y,e),e.alternative=P.length>0?Ft(m,e,{body:P}):null,D.unshift(e),Ft(m,e,{body:D}).optimize(t)}return t.option("typeofs")&&Zn(e.condition,e.body,e.alternative),e;function M(e){return e instanceof m?e.body:[e]}function j(e){for(var t=e.length;--t>=0&&_n(e[t],!0););return t}function F(e,t,n){return t instanceof Le?e[n]=Ft(Re,t,{body:$t(t,t.expressions.slice(0,-1))}):e.splice(n--,1),n}function q(e,n,i,r){if(null==e)return[];if(e instanceof m){for(var s=[],a=0;a<e.body.length;a++){var o=e.body[a];if(!(o instanceof Y)){if(o instanceof J){if(0==a)return;s.length>0&&(o=o.clone(),s.push(o.value||Ft(ft,o).transform(t)),o.value=$t(e,s));var u=e.clone();return u.body=u.body.slice(a+1),u.body.unshift(o),u}if(o instanceof me)n.push(o);else if(o instanceof Re){if(!t.option("sequences")&&s.length>0)return;s.push(o.body)}else{if(!(o instanceof lt))return;if(!t.option("sequences")&&s.length>0)return;o.remove_initializers(t,i),o.definitions.forEach(f)}}}return s}if(e instanceof me)return n.push(e),[];if(e instanceof Y)return[];if(e instanceof Re)return[e.body];if(e instanceof lt){var s=[];return e.remove_initializers(t,i),e.definitions.forEach(f),s}function f(e){e.value&&s.push(Ft(c,e,{operator:"=",left:e.name.convert_symbol(et,function(e){r.push(e)}),right:e.value}))}}}),e(Be,function(e,t){if(!t.option("switches"))return e;if(!t.option("dead_code"))return e;for(var n,i,r,s=[],a=[],o=[],c=0,u=e.body.length;c<u;c++){if((n=e.body[c])instanceof N){var f=s[s.length-1];if(i||A(n.body[0],t)&&(!f||jn(f))){E(n,f);continue}i=n}else{var l=n.expression,h=Ft(p,e,{operator:"===",left:e.expression,right:l}).evaluate(t,!0);if(!h){l.has_side_effects(t)&&o.push(l),E(n,s[s.length-1]);continue}if(!(h instanceof xe)){if(i){var d=s.indexOf(i);s.splice(d,1),E(i,s[d-1]),i=null}for(l.has_side_effects(t)?r=n:i=n=Ft(N,n);++c<u;)E(e.body[c],n)}}if(c+1>=u||jn(n)){var f=s[s.length-1],g=n.body;if(jn(f))switch(f.body.length-g.length){case 1:var v=f.body[f.body.length-1];if(!A(v,t))break;g=g.concat(v);case 0:var b=Ft(m,f),x=Ft(m,n,{body:g});b.equals(x)&&(f.body=[])}}o.length&&(n instanceof N?s.push(Ft(y,e,{expression:$t(e,o),body:[]})):(o.push(n.expression),n.expression=$t(e,o)),o=[]),s.push(n)}for(o.length&&!r&&s.push(Ft(y,e,{expression:$t(e,o),body:[]}));n=s[s.length-1];){var v=n.body[n.body.length-1];if(A(v,t)&&n.body.pop(),n===i){if(!cn(n))break}else{if(n.expression.has_side_effects(t))break;if(i){if(!cn(i))break;if(s[s.length-2]!==i)break;i.body=i.body.concat(n.body),n.body=[]}else if(!cn(n))break}E(n),s.pop()===i&&(i=null)}if(!n)return a.push(Ft(Re,e.expression,{body:e.expression})),o.length&&a.push(Ft(Re,e,{body:$t(e,o)})),Ft(m,e,{body:a}).optimize(t);if(n===i)for(;(n=s[s.length-2])&&!(n instanceof N)&&cn(n);){var l=n.expression;if(l.has_side_effects(t)){var f=s[s.length-3];if(f&&!jn(f))break;i.body.unshift(Ft(Re,e,{body:l}))}E(n),s.splice(-2,1)}if(s[0].body=a.concat(s[0].body),e.body=s,t.option("conditionals"))switch(s.length){case 1:if(!T(s[0]))break;var l=s[0].expression,g=s[0].body.slice();return s[0]!==i&&s[0]!==r?Ft(ce,e,{condition:Ft(p,e,{operator:"===",left:e.expression,right:l}),body:Ft(m,e,{body:g}),alternative:null}).optimize(t):(l&&g.unshift(Ft(Re,l,{body:l})),g.unshift(Ft(Re,e.expression,{body:e.expression})),Ft(m,e,{body:g}).optimize(t));case 2:if(!Lt(i,s)||!T(s[1]))break;var g=s[0].body.slice(),S=g.length&&A(g[g.length-1],t);if(S&&g.pop(),!Tt(g,T))break;var w=s[1].body.length&&Ft(m,s[1]),k=Ft(ce,e,{condition:Ft(p,e,s[0]===i?{operator:"!==",left:e.expression,right:s[1].expression}:{operator:"===",left:e.expression,right:s[0].expression}),body:Ft(m,s[0],{body:g}),alternative:S&&w||null});return!S&&w&&(k=Ft(m,e,{body:[k,w]})),k.optimize(t)}return e;function A(t,n){return t instanceof _&&n.loopcontrol_target(t)===e}function T(t){var n=!1,i=new _t(function(e){if(n||e instanceof de||e instanceof Re)return!0;A(e,i)&&(n=!0)});return i.push(e),t.walk(i),!n}function E(e,n){n&&!jn(n)?n.body=n.body.concat(e.body):xn(t,e,a)}}),e(at,function(e,t){if(e.body=bn(e.body,t),t.option("dead_code")){if(cn(e)&&!(e.bcatch&&e.bcatch.argname&&e.bcatch.argname.match_symbol(function(e){return e instanceof Ue&&!E(e)},!0))){var n=[];return e.bcatch&&(xn(t,e.bcatch,n),n.forEach(function(e){e instanceof lt&&e.definitions.forEach(function(e){var t=e.name.definition().redefined();t&&(e.name=e.name.clone(),e.name.thedef=t)})})),n.unshift(Ft(m,e).optimize(t)),e.bfinally&&n.push(Ft(m,e.bfinally).optimize(t)),Ft(m,e,{body:n}).optimize(t)}if(e.bfinally&&cn(e.bfinally)){var n=Ft(m,e.bfinally).optimize(t);if(n=e.body.concat(n),!e.bcatch)return Ft(m,e,{body:n}).optimize(t);e.body=n,e.bfinally=null}}return e}),P.DEFMETHOD("remove_initializers",ni(function(e,t){return Ft(ft,t).optimize(e)})),_e.DEFMETHOD("remove_initializers",ni(Vt)),lt.DEFMETHOD("remove_initializers",ni(Vt)),j.DEFMETHOD("to_assignments",function(){var e=this.definitions.reduce(function(e,t){var n=t.name.definition(),i=t.value;if(i){i instanceof Le&&(i=i.clone());var r=Ft(et,t.name),s=Ft(c,t,{operator:"=",left:r,right:i});e.push(s);var a=function(){return s.right};a.assigns=[s],a.direct_access=n.direct_access,a.escaped=n.escaped,r.fixed=a,n.references.forEach(function(e){if(e.fixed){var i=e.fixed.assigns;i&&i[0]===t&&(i.length>1||e.fixed.to_binary||e.fixed.to_prefix?i[0]=s:(e.fixed=a,n.fixed===e.fixed&&(n.fixed=a)))}}),n.references.push(r)}return n.assignments++,n.eliminated++,n.single_use=!1,e},[]);return 0==e.length?null:$t(this,e)}),e(P,oi),e(_e,oi),e(v,function(e,t){var n=e.expression,i=ci(e,t);if(i)return i;if(t.option("sequences"))if(n instanceof Oe){var r=ui(n,t);if(r!==n){var s=e.clone();return s.expression=r.expressions.pop(),r.expressions.push(s),r.optimize(t)}}else if(!Zt(n.tail_node())){var r=ui(e,t);if(r!==e)return r.optimize(t)}if(t.option("unused")&&fi(e,t),t.option("unsafe"))if(pn(n))switch(n.name){case"Array":if(1==e.args.length){var o=e.args[0];if(o instanceof we)try{var u=o.value;if(u>6)break;for(var l=Array(u),h=0;h<u;h++)l[h]=Ft(oe,e);return Ft(a,e,{elements:l})}catch(t){xe.warn("Invalid array length: {length} [{start}]",{length:u,start:e.start});break}if(!o.is_boolean(t)&&!o.is_string(t))break}return Ft(a,e,{elements:e.args});case"Object":if(0==e.args.length)return Ft(ke,e,{properties:[]});break;case"String":if(0==e.args.length)return Ft(Fe,e,{value:""});if(1==e.args.length)return Ft(p,e,{operator:"+",left:Ft(Fe,e,{value:""}),right:e.args[0]}).optimize(t);break;case"Number":if(0==e.args.length)return Ft(we,e,{value:0});if(1==e.args.length)return Ft(ut,e,{operator:"+",expression:Ft(p,e,{operator:"+",left:Ft(Fe,e,{value:""}),right:e.args[0]})}).optimize(t);break;case"Boolean":if(0==e.args.length)return Ft(te,e).optimize(t);if(1==e.args.length)return Ft(ut,e,{operator:"!",expression:Ft(ut,e,{operator:"!",expression:e.args[0]})}).optimize(t);break;case"RegExp":var d=[];if(Tt(e.args,function(e){var n=e.evaluate(t);return d.unshift(n),e!==n}))try{return Tn(t,e,Ft(De,e,{value:RegExp.apply(RegExp,d)}))}catch(t){xe.warn("Error converting {this} [{start}]",e)}}else if(n instanceof G)switch(n.property){case"toString":var g=n.expression;if(0==e.args.length&&!(g.may_throw_on_access(t)||g instanceof AST_Super))return Ft(p,e,{operator:"+",left:Ft(Fe,e,{value:""}),right:g}).optimize(t);break;case"join":if(n.expression instanceof a&&e.args.length<2)e:{var _=e.args[0];if(0==n.expression.elements.length&&!(_ instanceof Me))return _?$t(e,[_,Ft(Fe,e,{value:""})]).optimize(t):Ft(Fe,e,{value:""});if(!(_&&(_=_.evaluate(t))instanceof xe)){for(var l=[],y=[],h=0;h<n.expression.elements.length;h++){var b=n.expression.elements[h],x=b.evaluate(t);if(x!==b)y.push(x);else{if(b instanceof Me)break e;y.length>0&&(l.push(Ft(Fe,e,{value:y.join(_)})),y.length=0),l.push(b)}}if(y.length>0&&l.push(Ft(Fe,e,{value:y.join(_)})),1==l.length)return l[0].is_string(t)?l[0]:Ft(p,l[0],{operator:"+",left:Ft(Fe,e,{value:""}),right:l[0]});if(""==_)return o=l[0].is_string(t)||l[1].is_string(t)?l.shift():Ft(Fe,e,{value:""}),l.reduce(function(e,t){return Ft(p,t,{operator:"+",left:e,right:t})},o).optimize(t);var S=e.clone();return S.expression=S.expression.clone(),S.expression.expression=S.expression.expression.clone(),S.expression.expression.elements=l,Tn(t,e,S)}}break;case"charAt":if(e.args.length<2){var S=Ft(p,e,{operator:"||",left:Ft(qe,e,{expression:n.expression,property:e.args.length?Ft(p,e.args[0],{operator:"|",left:Ft(we,e,{value:0}),right:e.args[0]}):Ft(we,e,{value:0})}).optimize(t),right:Ft(Fe,e,{value:""})});return S.is_string=zt,S.optimize(t)}break;case"apply":if(2==e.args.length&&e.args[1]instanceof a){var w=e.args[1].elements.slice();return w.unshift(e.args[0]),Ft(v,e,{expression:Ft(G,n,{expression:n.expression,property:"call"}),args:w}).optimize(t)}break;case"call":var k=n.expression;if(k instanceof et&&(k=k.fixed_value()),k instanceof de&&!k.contains_this())return(e.args.length?$t(e,[e.args[0],Ft(v,e,{expression:n.expression,args:e.args.slice(1)})]):Ft(v,e,{expression:n.expression,args:[]})).optimize(t)}else if(t.option("side_effects")&&n instanceof v&&1==n.args.length&&pn(n.expression)&&"Object"==n.expression.name){var s=e.clone();return s.expression=en(e,n,n.args[0]),s.optimize(t)}if(t.option("unsafe_Function")&&pn(n)&&"Function"==n.name){if(0==e.args.length)return Ft(ae,e,{argnames:[],body:[]}).init_vars(n.scope);if(Tt(e.args,function(e){return e instanceof Fe}))try{var A="n(function("+e.args.slice(0,-1).map(function(e){return e.value}).join()+"){"+e.args[e.args.length-1].value+"})",T=Gt(A),E={ie:t.option("ie")};T.figure_out_scope(E);var P,O=new Qt(t.options);(T=T.transform(O)).figure_out_scope(E),T.compute_char_frequency(E),T.mangle_names(E),T.walk(new _t(function(e){return!!P||(e instanceof de?(P=e,!0):void 0)}));var A=Jt();return m.prototype._codegen.call(P,A),e.args=[Ft(Fe,e,{value:P.argnames.map(function(e){return e.print_to_string()}).join()}),Ft(Fe,e.args[e.args.length-1],{value:A.get().replace(/^\{|\}$/g,"")})],e}catch(t){if(!(t instanceof Ht))throw t;xe.warn("Error parsing code passed to new Function [{start}]",e.args[e.args.length-1]),xe.warn(t.toString())}}var D=n instanceof et?n.fixed_value():n,I=t.parent(),N=t.self(),L=D instanceof de&&(!is_async(D)||t.option("awaits")&&I instanceof f)&&(!wt(D)||t.option("yields")&&N instanceof mt&&N.nested),M=L&&D.first_statement(),j=0,q=!1,$=!Tt(e.args,function(e){return!(e instanceof Me)}),H=L&&Tt(D.argnames,function(t,n){if(1==j&&e.args[n]instanceof Me&&(j=2),t instanceof R){j||(j=1);var i=1==j&&e.args[n];if(Sn(i)||(j=2),Mi(D,t.value))return!1;t=t.name}return!(t instanceof B&&(q=!0,Mi(D,t)))})&&!(D.rest instanceof B&&Mi(D,D.rest)),J=H&&t.option("inline")&&!e.is_expr_pure(t)&&(n===D||hi(D,t));if(J&&M instanceof Ie){var x=M.value;if(n===D&&!D.name&&(!x||x.is_constant_expression())&&pi(D,li(t)))return $t(e,_e(x)).optimize(t)}if(L&&!D.contains_this()){var K,X=!1;if(J&&!D.uses_arguments&&!D.pinned()&&!(D.name&&D instanceof ge)&&(n===D||!Ai(t,K=n.definition(),D)&&D.is_constant_expression(Pt(t)))&&(x=function(e){var n=D.body.length;if(n<2&&(e=ye(e)))return e;if(t.option("inline")<3)return!1;e=null;for(var i=0;i<n;i++){var r=D.body[i];if(r instanceof lt){if(X){if(!e)continue;if(!(e instanceof Re))return!1;gn(r)||(e=null)}else if(!gn(r)){if(e&&!(e instanceof Re))return!1;e=null,X=!0}}else{if(r instanceof AST_AsyncDefun||r instanceof F||r instanceof Y)continue;if(e)return!1;e=r}}return ye(e)}(M))){var Q,Z,ee,ne,se=n===D||K.single_use&&K.references.length-K.replaced==1;if(function(){if(j||q||$||X||D.rest)return;if(t.option("inline")<2&&D.argnames.length)return;if(!D.variables.all(function(e){return e.references.length-e.replaced<2&&e.orig[0]instanceof Je}))return;var n,i=t.find_parent(Ne),r=!1,s=li(t,i),a=[],o=!1,u=new _t(function(e,i){if(r)return!0;if(e instanceof p&&wn[e.operator]||e instanceof C)a=null;else{if(e instanceof Ne)return r=!0;if(s&&e instanceof ze&&s[e.name])return r=!0;if(e instanceof et){var f=e.definition();if(D.variables.get(e.name)!==f)return void(a=null);if(f.init instanceof me)return r=!0;if(Xt(e,u.parent()))return r=!0;var l=be(f);if(n<l||(n=l),!a)return;o?a=null:a.push(D.argnames[l])}else if(!o)return e instanceof c&&e.left instanceof Oe?(e.left.expression.walk(u),e.left instanceof qe&&e.left.property.walk(u),e.right.walk(u),o=!0,!0):e.has_side_effects(t)?(i(),o=!0,!0):void 0}});if(x.walk(u),r)return;var f=e.args.length;if(a&&D.argnames.length>=f){for(f=D.argnames.length;f-- >n&&D.argnames[f]===a.pop(););f++}return f<=n||Tt(e.args.slice(n,f),o&&!a?function(e){return e.is_constant_expression(i)}:function(e){return!e.has_side_effects(t)})}()){var w=e.args.slice(),ce=[],ue=x.clone(!0).transform(new gt(function(t){if(t instanceof et){var n=t.definition();if(D.variables.get(t.name)!==n)return ce.push(t),t;var i=be(n),r=w[i];if(!r)return Ft(ft,e);w[i]=null;var s=this.parent();return s?en(s,t,r):r}})),fe=D.inlined;n!==D&&(D.inlined=!0);var le=[];w.forEach(function(e){e&&((e=e.clone(!0)).walk(new _t(function(e){e instanceof et&&ce.push(e)})),le.push(e))},[]),le.push(ue);var S=$t(e,le).optimize(t);if(D.inlined=fe,S=en(I,N,S),se||kn(S,e)===S)return ce.forEach(function(e){e.scope=n===D?D.parent_scope:n.scope,e.reference();var t=e.definition();se&&t.replaced++,t.single_use=!1}),S;S.has_side_effects(t)||(e.drop_side_effect_free=function(e,t){var n=this.args.slice();return n.unshift(this.expression),$t(this,n).drop_side_effect_free(e,t)})}if(se&&function(){var e,i=new Ct,r=0;ne=N;do{if(ne.variables&&ne.variables.each(function(e){i.set(e.name,!0)}),e=ne,(ne=t.parent(r++))instanceof AST_ClassField){if(!ne.static)return!1}else if(ne instanceof W)ee=[];else if(ne instanceof ie){if(ne.init===e)continue;ee=[]}else if(ne instanceof re){if(ne.init===e)continue;if(ne.object===e)continue;ee=[]}}while(!(ne instanceof Ne));if(!(Z=ne.body.indexOf(e)+1))return!1;if(!pi(D,li(t,ne)))return!1;var s=(n!==D||D.parent_scope.resolve()===ne)&&!ne.pinned();ne instanceof rt&&(t.toplevel.vars?i.set("arguments",!0):s=!1);Q=new Ct;var a=t.option("inline");return!(!function(e,t){var n=!1;return D.each_argname(function(i){if(!n&&!i.unused){if(!t||Se(e,i.name))return n=!0;Q.set(i.name,!0),ee&&ee.push(i.definition())}}),!n}(i,a>=2&&s)||!function(e,t){for(var n=0;n<D.body.length;n++){var i=D.body[n];if(i instanceof me){var r=i.name;if(!t)return!1;if(Q.has(r.name))return!1;if(Se(e,r.name))return!1;if(!Tt(i.enclosed,function(t){return t.scope===ne||t.scope===i||!e.has(t.name)}))return!1;ee&&ee.push(r.definition())}else if(i instanceof lt){if(!t)return!1;for(var s=i.definitions.length;--s>=0;){var r=i.definitions[s].name;if(Se(e,r.name))return!1;ee&&ee.push(r.definition())}}}return!0}(i,a>=3&&s)||ee&&0!=ee.length&&Oi(D,ee))}()){D._squeezed=!0,n!==D&&(D.parent_scope=n.scope);var S=$t(e,function(){var n=[],i=[];j>1||q||$||D.rest?function(t,n){function i(e,i){if(i.unused)return he(i);var r=i.definition();r.assignments++,r.references.push(e);var s=Ft(AST_SymbolVar,i);r.orig.push(s),r.eliminated++,Ae(t,n,s)}n.push(Ft(c,e,{operator:"=",left:Ft(V,e,{elements:D.argnames.map(function(e){return e.unused?Ft(oe,e):e.convert_symbol(et,i)}),rest:D.rest&&D.rest.convert_symbol(et,i)}),right:Ft(a,e,{elements:e.args.slice()})}))}(n,i):function(t,n){for(var i=D.argnames.length,r=e.args.length;--r>=i;)n.push(e.args[r]);var s=[];for(r=i;--r>=0;){var a,o=D.argnames[r];o instanceof R?(s.push(o),a=o.name):a=o;var u=e.args[r];if(a.unused||ne.var_names().has(a.name))u&&n.push(u);else{var f=Ft(AST_SymbolVar,a),l=a.definition();l.orig.push(f),l.eliminated++,void 0!==a.unused?(Ae(t,n,f),u&&n.push(u)):(!u&&o===a&&(ee||"arguments"==a.name&&!St(D)&&St(ne))&&(u=Ft(ft,e)),Ae(t,n,f,u))}}for(t.reverse(),n.reverse(),r=s.length;--r>=0;){var p=s[r];if(void 0!==p.name.unused)n.push(p.value);else{var h=Ft(et,p.name);p.name.definition().references.push(h),n.push(Ft(c,p,{operator:"=",left:h,right:p.value}))}}}(n,i);var r=function(e,n){var i=[Z,0],r=[],s=[],a=[],o=[],c=[];return D.body.filter(ee?function(t){if(!(t instanceof me))return!0;var n=Ft(AST_SymbolVar,Ri(t.name)),i=n.definition();return i.fixed=!1,i.orig.push(n),i.eliminated++,Ae(e,s,n,Hn(t,!0)),!1}:function(e){if(!(e instanceof me))return!0;var t=e.name.definition();return ne.functions.set(t.name,t),ne.variables.set(t.name,t),ne.enclosed.push(t),ne.var_names().set(t.name,!0),i.push(e),!1}).forEach(function(e){if(e instanceof lt)for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n],s=Ri(i.name),u=i.value;u&&c.length>0&&(c.push(u),u=$t(i,c),c=[]),Ae(r,a,s,u),ee&&(Q.has(s.name)||1==s.definition().orig.length&&D.functions.has(s.name)||o.push(Fi(t,s)))}else e instanceof Re&&c.push(e.body)}),[].push.apply(e,r),[].push.apply(n,o),[].push.apply(n,s),[].push.apply(n,a),i}(n,i);i.push(x),n.length&&r.push(Ft(lt,D,{definitions:n}));return[].splice.apply(ne.body,r),D.enclosed.forEach(function(e){ne.var_names().has(e.name)||(ne.enclosed.push(e),ne.var_names().set(e.name,!0))}),i}()).optimize(t);return en(I,N,S)}}if(t.option("side_effects")&&H&&Tt(D.body,on)&&(D===n?Kn(D,t):!j&&!q&&!D.rest)&&(!St(D)||!D.value)&&pi(D,li(t)))return $t(e,_e()).optimize(t)}if(t.option("drop_console")&&n instanceof Oe){for(var pe=n.expression;pe.expression;)pe=pe.expression;if(pn(pe)&&"console"==pe.name)return Ft(ft,e).optimize(t)}return t.option("negate_iife")&&I instanceof Re&&fn(N)?e.negate(t,!0):On(t,e);function he(e){return Ft(qe,e,{expression:Ft(a,e,{elements:[]}),property:Ft(we,e,{value:0})})}function _e(t){var n=e.args.slice(),i=j>1||q||D.rest;if((i||$)&&(n=[Ft(a,e,{elements:n})]),i){var r=new gt(function(e,t){if(e instanceof R)return Ft(R,e,{name:e.name.transform(r)||he(e),value:e.value});if(e instanceof V){var n=[];return e.elements.forEach(function(e,t){(e=e.transform(r))&&(n[t]=e)}),Un(e,n),Ft(V,e,{elements:n})}if(e instanceof U){var i=[],s=[];return e.properties.forEach(function(t){var n=t.key,a=t.value.transform(r);a?(s.length&&(n instanceof xe||(n=Kt(n,t)),s.push(n),n=$t(e,s),s=[]),i.push(Ft(z,t,{key:n,value:a}))):n instanceof xe&&s.push(n)}),s.length&&i.push(Ft(z,e,{key:$t(e,s),value:he(e)})),Ft(U,e,{properties:i})}return e instanceof Je?null:void 0}),s=[];D.argnames.forEach(function(e,t){(e=e.transform(r))&&(s[t]=e)});var o=D.rest&&D.rest.transform(r);o&&(s.length=D.argnames.length),Un(D,s),n[0]=Ft(c,e,{operator:"=",left:Ft(V,D,{elements:s,rest:o}),right:n[0]})}else D.argnames.forEach(function(e){e instanceof R&&n.push(e.value)});return n.push(t||Ft(ft,e)),n}function ve(){return e.call_only?Ft(we,e,{value:0}):Ft(ft,e)}function ye(t){return t?t instanceof Ie?t.value||ve():t instanceof Re?e.call_only?t.body:Ft(ut,t,{operator:"void",expression:t.body}):void 0:ve()}function be(e){for(var t=D.argnames.length;--t>=0;)if(D.argnames[t].definition()===e)return t}function Se(e,t){return e.has(t)||Nt[t]||ne.var_names().has(t)}function Ae(t,n,i,r){var s=i.definition();if(ne.var_names().has(i.name)||(ne.var_names().set(i.name,!0),t.push(Ft(pt,i,{name:i,value:null}))),ne.variables.set(i.name,s),ne.enclosed.push(s),r){var a=Ft(et,i);s.assignments++,s.references.push(a),n.push(Ft(c,e,{operator:"=",left:a,right:r}))}}}),e(be,function(e,t){if(t.option("unsafe")){var n=e.expression;if(pn(n))switch(n.name){case"Array":case"Error":case"Function":case"Object":case"RegExp":return Ft(v,e).transform(t)}}if(t.option("sequences")){var i=ui(e,t);if(i!==e)return i.optimize(t)}return t.option("unused")&&fi(e,t),e}),e(Le,function(e,t){var n=function(){if(!t.option("side_effects"))return e.expressions;var n=[],i=xt(t),r=e.expressions.length-1;return e.expressions.forEach(function(e,s){s<r&&(e=e.drop_side_effect_free(t,i)),e&&(nn(n,e),i=!1)}),n}(),i=n.length-1;return function(){for(var e=1;e<i;e++){var s=n[e-1],a=r(s);if(a){var o=n[e];if(t.option("conditionals")){var c=di(t,a,s.right,o);if(c){s.right=c,n.splice(e--,1),i--;continue}}t.option("dead_code")&&r(o)===a&&o.right.is_constant_expression(a.scope.resolve())&&(n[--e]=s.right)}}}(),function(){if(!t.option("side_effects"))return;for(;i>0&&Sn(n[i],t);)i--;i<n.length-1&&(n[i]=Ft(ut,e,{operator:"void",expression:n[i]}),n.length=i+1)}(),0==i?((e=en(t.parent(),t.self(),n[0]))instanceof Le||(e=e.optimize(t)),e):(e.expressions=n,e);function r(e){return e instanceof c&&"="==e.operator&&e.left instanceof et&&e.left.definition()}}),e(ct,function(e,t){if(t.option("sequences")){var n=ui(e,t);if(n!==e)return n.optimize(t)}return On(t,e)});var mi=It("+ -"),gi=It("* / %");e(ut,function(e,t){var n=e.operator,i=e.expression;if(t.option("sequences")&&function(){switch(n){case"delete":return!c(i.tail_node());case"typeof":return!pn(i.tail_node());default:return!0}}()){var r=ui(e,t);if(r!==e)return r.optimize(t)}switch(n){case"+":if(!t.option("evaluate"))break;if(!i.is_number(t,!0))break;var s=t.parent();if(s instanceof ut&&"delete"==s.operator)break;return i;case"-":if(i instanceof fe&&(i=i.transform(t)),i instanceof we||i instanceof fe)return e;break;case"!":if(!t.option("booleans"))break;if(i.is_truthy())return $t(e,[i,Ft(te,e)]).optimize(t);if(t.in_boolean_context()){if(i instanceof ut&&"!"==i.operator)return i.expression;if(i instanceof p){var a=xt(t);e=(a?An:kn)(e,i.negate(t,a))}}break;case"delete":if(!t.option("evaluate"))break;if(c(i))break;return $t(e,[i,Ft(st,e)]).optimize(t);case"typeof":if(!t.option("booleans"))break;if(!t.in_boolean_context())break;xe.warn("Boolean expression always true [{start}]",e);var o=[Ft(st,e)];return i instanceof et&&E(i,t)||o.unshift(i),$t(e,o).optimize(t);case"void":if(!t.option("side_effects"))break;return(i=i.drop_side_effect_free(t))?(e.expression=i,e):Ft(ft,e).optimize(t)}return t.option("evaluate")&&i instanceof p&&mi[n]&&gi[i.operator]&&(i.left.is_constant()||!i.right.has_side_effects(t))?Ft(p,e,{operator:i.operator,left:Ft(ut,i.left,{operator:n,expression:i.left}),right:i.right}):On(t,e);function c(e){return e instanceof fe||e instanceof ye||e instanceof AST_NewTarget||e instanceof Oe||e instanceof et||e instanceof ft}}),e(f,function(e,t){if(!t.option("awaits"))return e;if(t.option("sequences")){var n=ui(e,t);if(n!==e)return n.optimize(t)}if(t.option("side_effects")){var i=e.expression;if(i instanceof f)return i.optimize(t);if(i instanceof ut&&i.expression instanceof f)return i.optimize(t);for(var r,s=0,a=e;r=t.parent(s++);a=r){if(St(r)){if(r.value===a)return i.optimize(t)}else if(r instanceof Ie){var o=!0;do{if(a=r,(r=t.parent(s++))instanceof at&&(r.bfinally||r.bcatch)!==a){o=!1;break}}while(r&&!(r instanceof Ne));if(o)return i.optimize(t)}else if(r instanceof Le&&r.tail_node()===a)continue;break}}return e}),e(mt,function(e,t){if(!t.option("yields"))return e;if(t.option("sequences")){var n=ui(e,t);if(n!==e)return n.optimize(t)}var i=e.expression;if(e.nested&&"Call"==i.TYPE){var r=i.clone().optimize(t);if("Call"!=r.TYPE)return r}return e}),p.DEFMETHOD("lift_sequences",function(e){if(this.left instanceof Oe){if(!(this.left.expression instanceof Le))return this;var t=this.left.expression.expressions.slice(),n=this.clone();return n.left=n.left.clone(),n.left.expression=t.pop(),t.push(n),$t(this,t)}if(this.left instanceof Le){var t=this.left.expressions.slice(),n=this.clone();return n.left=t.pop(),t.push(n),$t(this,t)}if(this.right instanceof Le){if(this.left.has_side_effects(e))return this;for(var i="="==this.operator&&this.left instanceof et,t=this.right.expressions,r=t.length-1,s=0;s<r&&(i||!t[s].has_side_effects(e));s++);if(s==r){t=t.slice();var n=this.clone();return n.right=t.pop(),t.push(n),$t(this,t)}if(s>0){var n=this.clone();return n.right=$t(this.right,t.slice(s)),(t=t.slice(0,s)).push(n),$t(this,t)}}return this});var _i=It("indexOf lastIndexOf"),vi=It("== === != !== * & | ^");function yi(e,t){return e instanceof c?!t&&"="==e.operator&&yi(e.right):e instanceof be?!t:e instanceof Le?yi(e.tail_node(),t):e instanceof et?!t&&yi(e.fixed_value()):e instanceof a||e instanceof S||e instanceof de||e instanceof ke}function bi(e,t,n){switch(e){case"in":return yi(t)||n&&n.option("unsafe_comps");case"instanceof":return t instanceof et&&(t=t.fixed_value()),i(t)||n&&n.option("unsafe_comps");default:return!0}}function xi(e,t){if(t.is_constant())return!0;if(t instanceof c)return"="!=t.operator||xi(e,t.right);if(t instanceof p)return!wn[t.operator]||xi(e,t.left)&&xi(e,t.right);if(t instanceof v)return is_async(t.expression);if(t instanceof C)return xi(e,t.consequent)&&xi(e,t.alternative);if(t instanceof Le)return xi(e,t.tail_node());if(t instanceof et){var n=t.fixed_value();return n&&xi(e,n)}return t instanceof tt?!t.tag||Ei(e,t.tag):t instanceof ot||void 0}function Si(e,t){return e instanceof c?jt(e.left,t)?e:e.left:e instanceof Le?Si(e.tail_node(),t):e instanceof ut&&UNARY_POSTFIX[e.operator]?jt(e.expression,t)?e:e.expression:e}function wi(e,t){return t instanceof G?wi(e,t.expression):t instanceof qe?wi(e,t.expression)&&wi(e,t.property):t instanceof ze||!t.has_side_effects(e)}function ki(e,t){var n=e.right.tail_node();if(n!==e.right){var i=e.right.expressions.slice(0,-1);i.push(n.left),(n=n.clone()).left=$t(e.right,i),e.right=n}e.left=Ft(p,e,{operator:e.operator,left:e.left,right:n.left,start:e.left.start,end:n.left.end}),e.right=n.right,t?e.left=e.left.transform(t):e.operator==n.left.operator&&ki(e.left)}function Ai(e,t,n){var r=0,s=e.self();do{if(s===n)return s;if(i(s)&&s.name&&s.name.definition()===t)return s}while(s=e.parent(r++))}function Ti(e){var t=e.scope.resolve();return Tt(e.references,function(e){return t===e.scope.resolve()})}function Ei(e,t){return e.option("unsafe")&&t instanceof G&&"raw"==t.property&&pn(t.expression)&&"String"==t.expression.name}function Ci(e){var t=!1;if(e=e.replace(/\\(u\{[^{}]*\}?|u[\s\S]{0,4}|x[\s\S]{0,2}|[0-9]+|[\s\S])/g,function(e,n){var i=decode_escape_sequence(n);if("string"==typeof i)return i;t=!0}),!t)return e}function Pi(e,t){return e instanceof et||e.TYPE===t.TYPE}function Oi(e,t){var n=!1,i=new _t(function(e){return!!n||(e instanceof et&&Lt(e.definition(),t)?n=!0:void 0)}),r=new _t(function(t){if(n)return!0;if(t instanceof de&&t!==e){if(!(t.name||is_async(t)||wt(t))){var s=r.parent();if(s instanceof v&&s.expression===t)return}return t.walk(i),!0}});return e.walk(r),n}e(p,function(e,t){if(!vi[e.operator]||!e.right.is_constant()||e.left.is_constant()||e.left instanceof p&&Wt[e.left.operator]>=Wt[e.operator]||M(),t.option("sequences")){var n=e.lift_sequences(t);if(n!==e)return n.optimize(t)}if(t.option("assignments")&&wn[e.operator]){var r=Si(e.left,t),s=e.right;if(r instanceof et&&s instanceof c&&"="==s.operator&&r.equals(s.left)){r=r.clone();var a=Ft(c,e,{operator:"=",left:r,right:Ft(p,e,{operator:e.operator,left:e.left,right:s.right})});r.fixed&&(r.fixed=function(){return a.right},r.fixed.assigns=[a]);var o=r.definition();return o.references.push(r),o.replaced++,a.optimize(t)}}if(t.option("comparisons"))switch(e.operator){case"===":case"!==":if(Sn(e.left,t)&&e.right.is_defined(t))return xe.warn("Expression always defined [{start}]",e),$t(e,[e.right,Ft("==="==e.operator?te:st,e)]).optimize(t);var u=!0;(e.left.is_string(t)&&e.right.is_string(t)||e.left.is_number(t)&&e.right.is_number(t)||e.left.is_boolean(t)&&e.right.is_boolean(t)||wi(t,e.left)&&e.left.equals(e.right))&&(e.operator=e.operator.slice(0,2));case"==":case"!=":if(!u&&Sn(e.left,t))e.left=Ft(Se,e.left);else if(t.option("typeofs")&&e.left instanceof Fe&&"undefined"==e.left.value&&e.right instanceof ut&&"typeof"==e.right.operator){var f=e.right.expression;(f instanceof et?!f.is_declared(t):f instanceof Oe&&t.option("ie"))||(e.right=f,e.left=Ft(ft,e.left).optimize(t),2==e.operator.length&&(e.operator+="="))}else if(e.left instanceof et&&e.right instanceof et&&e.left.definition()===e.right.definition()&&yi(e.left))return Ft("="==e.operator[0]?st:te,e).optimize(t);break;case"&&":case"||":var l=e.left;if(!(l instanceof p))break;if(l.operator!=("&&"==e.operator?"!==":"==="))break;if(!(e.right instanceof p))break;if(l.operator!=e.right.operator)break;if(Sn(l.left,t)&&e.right.left instanceof Se||l.left instanceof Se&&Sn(e.right.left,t)){var f=l.right;if(f instanceof c&&"="==f.operator&&(f=f.left),f.has_side_effects(t))break;if(!f.equals(e.right.right))break;return l.operator=l.operator.slice(0,-1),l.left=Ft(Se,e),l}}var h=!1,d=t.parent();if(t.option("booleans")){var r=Si(e.left,t);if(wn[e.operator]&&!r.has_side_effects(t)){if(r.equals(e.right))return en(d,t.self(),e.left).optimize(t);ti(t,r)}h=t.in_boolean_context()}if(h)switch(e.operator){case"+":var m=e.left.evaluate(t,!0);if(m&&"string"==typeof m||(m=e.right.evaluate(t,!0))&&"string"==typeof m){xe.warn("+ in boolean context always true [{start}]",e);var g=[];if(e.left.evaluate(t)instanceof xe&&g.push(e.left),e.right.evaluate(t)instanceof xe&&g.push(e.right),g.length<2)return g.push(Ft(st,e)),$t(e,g).optimize(t);e.truthy=!0}break;case"==":if(e.left instanceof Fe&&""==e.left.value&&e.right.is_string(t))return Ft(ut,e,{operator:"!",expression:e.right}).optimize(t);break;case"!=":if(e.left instanceof Fe&&""==e.left.value&&e.right.is_string(t))return e.right.optimize(t)}if(t.option("comparisons")&&e.is_boolean(t)){if("Binary"!=d.TYPE){var _=Ft(ut,e,{operator:"!",expression:e.negate(t)});if(Tn(t,e,_)===_)return _}switch(e.operator){case">":M("<");break;case">=":M("<=")}}if(t.option("conditionals")&&wn[e.operator]){if(e.left instanceof p&&e.operator==e.left.operator){var v=Ft(p,e,{operator:e.operator,left:e.left.right,right:e.right}),y=v.transform(t);v!==y&&(e.left=e.left.left,e.right=y)}var b=e.right.tail_node();b instanceof p&&e.operator==b.operator&&ki(e,t)}if(t.option("strings")&&"+"==e.operator){if(e.right instanceof Fe&&""==e.right.value&&e.left.is_string(t))return e.left.optimize(t);if(e.left instanceof Fe&&""==e.left.value&&e.right.is_string(t))return e.right.optimize(t);if(e.left instanceof p&&"+"==e.left.operator&&e.left.left instanceof Fe&&""==e.left.left.value&&e.right.is_string(t)&&(e.left.right.is_constant()||!e.right.has_side_effects(t)))return e.left=e.left.right,e.optimize(t);var b=e.right.tail_node();b instanceof p&&e.operator==b.operator&&(e.left.is_string(t)&&b.is_string(t)||b.left.is_string(t)&&(e.left.is_constant()||!b.right.has_side_effects(t)))&&ki(e,t)}if(t.option("evaluate")){var x=!0;switch(e.operator){case"&&":var S=ei(t,e.left);if(!S)return xe.warn("Condition left of && always false [{start}]",e),en(d,t.self(),e.left).optimize(t);if(!(S instanceof xe))return xe.warn("Condition left of && always true [{start}]",e),$t(e,[e.left,e.right]).optimize(t);if(e.right.evaluate(t,!0)){if((h||"&&"==d.operator&&d.left===t.self())&&!(e.right.evaluate(t)instanceof xe))return xe.warn("Dropping side-effect-free && [{start}]",e),e.left.optimize(t)}else{if(h&&!(e.right.evaluate(t)instanceof xe))return xe.warn("Boolean && always false [{start}]",e),$t(e,[e.left,Ft(te,e)]).optimize(t);e.falsy=!0}if("||"==e.left.operator){var w=ei(t,e.left.right);if(!w)return Ft(C,e,{condition:e.left.left,consequent:e.right,alternative:e.left.right}).optimize(t)}break;case"??":var k=!0;case"||":var A,S=ei(t,e.left,k);if(k?null==S:!S)return xe.warn("Condition left of {operator} always {value} [{start}]",{operator:e.operator,value:k?"nullish":"false",start:e.start}),$t(e,[e.left,e.right]).optimize(t);if(!(S instanceof xe))return xe.warn("Condition left of {operator} always {value} [{start}]",{operator:e.operator,value:k?"defined":"true",start:e.start}),en(d,t.self(),e.left).optimize(t);if(k||!(A=e.right.evaluate(t,!0))||A instanceof xe){if((h||"||"==d.operator&&d.left===t.self())&&!e.right.evaluate(t))return xe.warn("Dropping side-effect-free {operator} [{start}]",e),e.left.optimize(t)}else{if(h&&!(e.right.evaluate(t)instanceof xe))return xe.warn("Boolean || always true [{start}]",e),$t(e,[e.left,Ft(st,e)]).optimize(t);e.truthy=!0}if(!k&&"&&"==e.left.operator){var w=ei(t,e.left.right);if(w&&!(w instanceof xe))return Ft(C,e,{condition:e.left.left,consequent:e.left.right,alternative:e.right}).optimize(t)}break;case"+":if(e.left instanceof O&&e.right instanceof p&&"+"==e.right.operator&&e.right.left instanceof O&&e.right.is_string(t)&&(e=Ft(p,e,{operator:"+",left:Ft(Fe,e.left,{value:""+e.left.value+e.right.left.value,start:e.left.start,end:e.right.left.end}),right:e.right.right})),e.right instanceof O&&e.left instanceof p&&"+"==e.left.operator&&e.left.right instanceof O&&e.left.is_string(t)&&(e=Ft(p,e,{operator:"+",left:e.left.left,right:Ft(Fe,e.right,{value:""+e.left.right.value+e.right.value,start:e.left.right.start,end:e.right.end})})),e.right instanceof ut&&"-"==e.right.operator&&e.left.is_number(t)){e=Ft(p,e,{operator:"-",left:e.left,right:e.right.expression});break}if(e.left instanceof ut&&"-"==e.left.operator&&R()&&e.right.is_number(t)){e=Ft(p,e,{operator:"-",left:e.right,right:e.left.expression});break}if(t.option("unsafe_math")&&e.left instanceof p&&Wt[e.left.operator]==Wt[e.operator]&&e.right.is_constant()&&(e.right.is_boolean(t)||e.right.is_number(t))&&e.left.is_number(t)&&!e.left.right.is_constant()&&(e.left.left.is_boolean(t)||e.left.left.is_number(t))){e=Ft(p,e,{operator:e.left.operator,left:Ft(p,e,{operator:e.operator,left:e.right,right:e.left.left}),right:e.left.right});break}case"-":if(e.right instanceof ut&&"-"==e.right.operator&&e.left.is_number(t)&&e.right.expression.is_number(t)){e=Ft(p,e,{operator:"+",left:e.left,right:e.right.expression});break}case"*":case"/":x=t.option("unsafe_math"),"+"!=e.operator&&["left","right"].forEach(function(n){var i=e[n];if(i instanceof ut&&"+"==i.operator){var r=i.expression;(r.is_boolean(t)||r.is_number(t)||r.is_string(t))&&(e[n]=r)}});case"&":case"|":case"^":if("-"==e.operator||"/"==e.operator||!e.left.is_boolean(t)&&!e.left.is_number(t)||!e.right.is_boolean(t)&&!e.right.is_number(t)||!R()||e.left instanceof p&&e.left.operator!=e.operator&&Wt[e.left.operator]>=Wt[e.operator]||(e=Tn(t,e,Ft(p,e,{operator:e.operator,left:e.right,right:e.left}),e.right instanceof O&&!(e.left instanceof O))),!x||!e.is_number(t))break;if(!(e.right instanceof p&&"%"!=e.right.operator&&Wt[e.right.operator]==Wt[e.operator]&&e.right.is_number(t)&&("+"!=e.operator||e.right.left.is_boolean(t)||e.right.left.is_number(t)))||"-"==e.operator&&e.left.is_negative_zero()||!e.right.left.is_constant_expression()&&e.right.right.has_side_effects(t)||function(e){var t=!1;return e.walk(new _t(function(e){if(t)return!0;if(e instanceof c){if(e.left instanceof Oe)return t=!0}else if(e instanceof ot&&unary_side_effects[e.operator]&&e.expression instanceof Oe)return t=!0})),t}(e.right.right)||"+"!=(e=Ft(p,e,{operator:I(e.operator,e.right.operator),left:Ft(p,e.left,{operator:e.operator,left:e.left,right:e.right.left,start:e.left.start,end:e.right.left.end}),right:e.right.right})).operator||e.right.is_boolean(t)||e.right.is_number(t)||(e.right=Ft(ut,e.right,{operator:"+",expression:e.right})),e.right instanceof O&&e.left instanceof p&&"%"!=e.left.operator&&Wt[e.left.operator]==Wt[e.operator]&&e.left.is_number(t))if(e.left.left instanceof O){var r=N(e.operator,e.left.left,e.right,{start:e.left.left.start,end:e.right.end});e=N(e.left.operator,On(t,r),e.left.right,e)}else if(e.left.right instanceof O){var T=I(e.left.operator,e.operator),b=On(t,N(T,e.left.right,e.right,e.left));!b.is_constant()||"-"==e.left.operator&&0!=e.right.value&&0==+b.value&&e.left.left.is_negative_zero()||(e=N(e.left.operator,e.left.left,b,e))}break;case"instanceof":if(i(e.right))return $t(e,[e,Ft(te,e)]).optimize(t)}if(!(d instanceof ut&&"delete"==d.operator)){if(e.left instanceof we&&!e.right.is_constant())switch(e.operator){case"+":if(0==e.left.value){if(e.right.is_boolean(t))return Ft(ut,e,{operator:"+",expression:e.right}).optimize(t);if(e.right.is_number(t)&&!e.right.is_negative_zero())return e.right}break;case"*":if(1==e.left.value)return Ft(ut,e,{operator:"+",expression:e.right}).optimize(t)}if(e.right instanceof we&&!e.left.is_constant())switch(e.operator){case"+":if(0==e.right.value){if(e.left.is_boolean(t))return Ft(ut,e,{operator:"+",expression:e.left}).optimize(t);if(e.left.is_number(t)&&!e.left.is_negative_zero())return e.left}break;case"-":if(0==e.right.value)return Ft(ut,e,{operator:"+",expression:e.left}).optimize(t);break;case"/":if(1==e.right.value)return Ft(ut,e,{operator:"+",expression:e.left}).optimize(t)}}}if(t.option("typeofs"))switch(e.operator){case"&&":Zn(e.left,e.right,null);break;case"||":Zn(e.left,null,e.right)}if(t.option("unsafe")){var E=L(e.right);if(h&&E&&("=="==e.operator||"!="==e.operator)&&e.left instanceof we&&0==e.left.value)return("=="==e.operator?Ft(ut,e,{operator:"!",expression:e.right}):e.right).optimize(t);var P=L(e.left);if(t.option("comparisons")&&function(){switch(e.operator){case"<=":return E&&e.left instanceof we&&0==e.left.value;case"<":if(P&&e.right instanceof we&&0==e.right.value)return!0;case"==":case"!=":return!!E&&(e.left instanceof we&&-1==e.left.value||e.left instanceof ut&&"-"==e.left.operator&&e.left.expression instanceof we&&1==e.left.expression.value)}}()){var D=Ft(ut,e,{operator:"!",expression:Ft(ut,e,{operator:"~",expression:P?e.left:e.right})});switch(e.operator){case"<":if(P)break;case"<=":case"!=":D=Ft(ut,e,{operator:"!",expression:D})}return D.optimize(t)}}return On(t,e);function I(e,t){switch(e){case"-":return"+"==t?"-":"+";case"/":return"*"==t?"/":"*";default:return t}}function N(e,n,i,r){return"+"==e&&(n.is_boolean(t)||n.is_number(t)||(n=Ft(ut,n,{operator:"+",expression:n})),i.is_boolean(t)||i.is_number(t)||(i=Ft(ut,i,{operator:"+",expression:i}))),Ft(p,r,{operator:e,left:n,right:i})}function L(e){return"Call"==e.TYPE&&e.expression instanceof G&&_i[e.expression.property]}function R(){return e.left.is_constant()||e.right.is_constant()||!e.left.has_side_effects(t)&&!e.right.has_side_effects(t)}function M(t){if(R()){t&&(e.operator=t);var n=e.left;e.left=e.right,e.right=n}}}),e(Ye,function(e){return e}),e(et,function(e,t){if(!t.option("ie")&&pn(e)&&(!e.scope.resolve().uses_with||!t.find_parent(dt)))switch(e.name){case"undefined":return Ft(ft,e).optimize(t);case"NaN":return Ft(ye,e).optimize(t);case"Infinity":return Ft(fe,e).optimize(t)}var n=t.parent();if(t.option("reduce_vars")&&Xt(t.self(),n)!==t.self()){var r,s,a,o=e.definition(),c=e.fixed_value(),u=o.single_use&&!(n instanceof v&&n.is_expr_pure(t));if(u)if(i(c)){if(o.scope===e.scope.resolve(!0)&&!o.in_loop||t.option("reduce_funcs")&&1!=o.escaped.depth&&!c.inlined)if(o.redefined())u=!1;else if(Ai(t,o,c))u=!1;else if(c.name&&c.name.definition()!==o)u=!1;else if(c.parent_scope!==e.scope||is_funarg(o))if(hi(c,t)){if("f"==(u=c.is_constant_expression(e.scope))){var f=e.scope;do{(f instanceof me||f instanceof ge)&&(f.inlined=!0)}while(f=f.parent_scope)}}else u=!1;else c.name&&("await"==c.name.name&&is_async(c)||"yield"==c.name.name&&wt(c))?u=!1:c.has_side_effects(t)?u=!1:t.option("ie")&&c instanceof S&&(u=!1);else u=!1;u&&(c.parent_scope=e.scope)}else(!c||o.recursive_refs>0||!c.is_constant_expression()||c.drop_side_effect_free(t))&&(u=!1);if(u){if(o.single_use=!1,c._squeezed=!0,c.single_use=!0,c instanceof M&&(c=$n(c)),c instanceof me&&(c=Hn(c)),i(c)){var l=[],f=e.scope;do{if(l.push(f),f===o.scope)break}while(f=f.parent_scope);c.enclosed.forEach(function(e){if(!c.variables.has(e.name))for(var t=0;t<l.length;t++){var n=l[t];if(!Mt(n.enclosed,e))return;n.var_names().set(e.name,!0)}})}if(o.recursive_refs>0){var p,h,d=(x=c.clone(!0)).name.definition(),m=x.variables.get(x.name.name),g=m&&m.orig[0];x instanceof S?(p="def_function",h=AST_SymbolClass):(p="def_variable",h=Xe),g instanceof h||((g=Ft(h,x.name)).scope=x,x.name=g,(m=x[p](g)).recursive_refs=o.recursive_refs),x.walk(new _t(function(e){if(e instanceof Ge){if(e!==g){var t=e.definition();t.orig.push(e),t.eliminated++}}else if(e instanceof et){var t=e.definition();if(t===d)e.thedef=t=m;else{t.single_use=!1;var n=e.fixed_value();i(n)&&n.name&&n.name.definition()===t&&t.scope===n.name.scope&&c.variables.get(n.name.name)===t&&(n.name=n.name.clone(),e.thedef=t=x.variables.get(n.name.name)||x[p](n.name))}t.references.push(e)}}))}else c instanceof Ne?(t.push(c),x=c.optimize(t),t.pop()):x=c.optimize(t),x=x.transform(new gt(function(e,t){return e instanceof Ne?e:(e=e.clone(),t(e,this),e)}));return o.replaced++,x}if(c&&!1!==(r=e.fixed||o.fixed).should_replace)if(c instanceof it?is_funarg(o)||!Ti(o)||function(t){var n=e.scope;for(;n!==t.scope;){if(n instanceof S)return!0;n=n.parent_scope}}(o)||(a=c):(s=c.evaluate(t,!0))!==c&&"function"!=typeof s&&(null===s||"object"!=typeof s||t.option("unsafe_regexp")&&s instanceof RegExp&&!o.cross_loop&&Ti(o))&&(a=Kt(s,c)),a){if(void 0===r.should_replace){var _=a.optimize(t).print_to_string().length;w(c)||(_=Math.min(_,c.print_to_string().length));var y=o.name.length;if(t.option("unused")&&!t.exposed(o)){var b=o.references.length-o.replaced-o.assignments;b=Math.min(b,o.references.filter(function(e){return e.fixed===r}).length),y+=(y+2+_)/Math.max(1,b)}r.should_replace=_-Math.floor(y)<t.eval_threshold}var x;if(r.should_replace)return w(c)?(x=a.optimize(t))===a&&(x=x.clone(!0)):(x=kn(a.optimize(t),c))!==a&&x!==c||(x=x.clone(!0)),o.replaced++,x}}return e;function w(e){var t;return e.walk(new _t(function(e){if(e instanceof et&&(t=!0),t)return!0})),t}}),e(tt,function(e,t){if(!t.option("templates"))return e;var n=e.tag;if(!n||Ei(t,n)){for(var i,r=[],s=[],a=0;a<e.strings.length;a++){var o=e.strings[a];if(!n){var c=Ci(o);c&&(o=g(c))}if(a>0){var u=e.expressions[a-1],f=_(u);if(f){var l,h=s[s.length-1],d=h+f+o;if(n||typeof(l=Ci(d))==i){s[s.length-1]=l?g(l):d;continue}}r.push(u)}s.push(o),n||(i=typeof c)}if(!n&&s.length>1){if(""==s[s.length-1])return Ft(p,e,{operator:"+",left:Ft(tt,e,{expressions:r.slice(0,-1),strings:s.slice(0,-1)}).transform(t),right:r[r.length-1]}).optimize(t);if(""==s[0]){for(var m=Ft(p,e,{operator:"+",left:Ft(Fe,e,{value:""}),right:r[0]}),a=1;""==s[a]&&a<r.length;a++)m=Ft(p,e,{operator:"+",left:m,right:r[a]});return Tn(t,e,Ft(p,e,{operator:"+",left:m.transform(t),right:Ft(tt,e,{expressions:r.slice(a),strings:s.slice(a)}).transform(t)}).optimize(t))}}e.expressions=r,e.strings=s}return On(t,e);function g(e){return e.replace(/\r|\\|`|\${/g,function(e){return"\\"+("\r"==e?"r":e)})}function _(e){var i=e.evaluate(t);if(i!==e&&!(n&&/\r|\\|`/.test(i)||(i=g(""+i)).length>e.print_to_string().length+"${}".length))return i}}),e(ft,function(e,t){if(t.option("unsafe_undefined")){var n=Pt(t).find_variable("undefined");if(n){var i=Ft(et,e,{name:"undefined",scope:n.scope,thedef:n});return i.is_undefined=!0,i}}var r=Xt(t.self(),t.parent());return r&&Pi(r,e)?e:Ft(ut,e,{operator:"void",expression:Ft(we,e,{value:0})})}),e(fe,function(e,t){var n=Xt(t.self(),t.parent());return n&&Pi(n,e)?e:!t.option("keep_infinity")||n||Pt(t).find_variable("Infinity")?Ft(p,e,{operator:"/",left:Ft(we,e,{value:1}),right:Ft(we,e,{value:0})}):e}),e(ye,function(e,t){var n=Xt(t.self(),t.parent());return n&&Pi(n,e)?e:n||Pt(t).find_variable("NaN")?Ft(p,e,{operator:"/",left:Ft(we,e,{value:0}),right:Ft(we,e,{value:0})}):e});var Di=It("+ - * / % >> << >>> | ^ &"),Ii=It("* | ^ &");function Ni(e,t){if(!e)return!1;var n=t.parent();return"Call"!=n.TYPE||(n.expression!==t.self()||!(e instanceof et&&!(e=e.fixed_value()))&&(e instanceof de&&!e.contains_this()))}function Li(e){return e instanceof Ae&&"string"==typeof e.key&&!(e instanceof Ce&&e.value.contains_super())}function Ri(e){var t=e.definition().redefined();return t&&((e=e.clone()).thedef=t),e}function Mi(e,t){var n=!1;return t.walk(new _t(function(t){return!!n||(t instanceof et&&e.variables.get(t.name)===t.definition()?n=!0:void 0)})),n}function ji(e,t){var n=[];e.references.forEach(function(e){var i=e.fixed;i&&Mt(n,i)&&(i.assigns?i.assigns.unshift(t):i.assigns=[t])})}function Fi(e,t){var n=Ft(et,t),i=Ft(c,t,{operator:"=",left:n,right:Ft(ft,t).transform(e)}),r=t.definition();return r.fixed&&(n.fixed=function(){return i.right},n.fixed.assigns=[i],ji(r,i)),r.assignments++,r.references.push(n),i}e(c,function(e,t){if(t.option("dead_code"))if(e.left instanceof Oe){if("="==e.operator){if(e.redundant){var n=[e.left.expression];return e.left instanceof qe&&n.push(e.left.property),n.push(e.right),$t(e,n).optimize(t)}if(e.left.equals(e.right)&&!e.left.has_side_effects(t))return e.right;var i=e.left.expression;if(i instanceof de||!t.has_directive("use strict")&&i instanceof O&&!i.may_throw_on_access(t))return e.left instanceof G?e.right:$t(e,[e.left.property,e.right]).optimize(t)}}else if(e.left instanceof et&&E(e.left,t)){var r;if("="==e.operator&&e.left.equals(e.right)&&!((r=t.parent())instanceof ut&&"delete"==r.operator))return e.right;if(e.left.is_immutable())return x();var s,a=e.left.definition(),o=a.scope.resolve(),u=o===t.find_parent(de),f=0;if(r=t.self(),!o.uses_arguments||!is_funarg(a)||t.has_directive("use strict"))do{if(s=r,(r=t.parent(f++))instanceof c){if(r.left instanceof et&&r.left.definition()===a){if(v(f,r,!u))break;return x(a)}if(r.left.match_symbol(function(e){if(e instanceof Oe)return!0}))break}else{if(r instanceof J){if(!u)break;if(v(f,r))break;if(Oi(o,[a]))break;return x(a)}if(r instanceof Re){if(!u)break;if(Oi(o,[a]))break;var l;do{if(l=r,(r=t.parent(f++))===o&&vn(r.body,l))return x(a)}while(_(l,r));break}if(r instanceof pt){if(!(r.name instanceof Ge))continue;if(r.name.definition()!==a)continue;if(v(f,r))break;return x(a)}}}while(g(s,r))}if(t.option("sequences")){var h=e.lift_sequences(t);if(h!==e)return h.optimize(t)}if(t.option("assignments")){if("="==e.operator&&e.left instanceof et&&e.right instanceof p){if(e.right.left instanceof et&&e.right.left.name==e.left.name&&Di[e.right.operator])return y(e.right.right);if(e.right.right instanceof et&&e.right.right.name==e.left.name&&Ii[e.right.operator]&&!e.right.left.has_side_effects(t))return y(e.right.left)}if(("-="==e.operator||"+="==e.operator&&(e.left.is_boolean(t)||e.left.is_number(t)))&&e.right instanceof we&&1==e.right.value){var d=e.operator.slice(0,-1);return Ft(ut,e,{operator:d+d,expression:e.left})}}return On(t,e);function g(e,t){if(t instanceof p)switch(e){case t.left:return t.right.is_constant_expression(o);case t.right:return!0;default:return!1}if(t instanceof C)switch(e){case t.condition:return t.consequent.is_constant_expression(o)&&t.alternative.is_constant_expression(o);case t.consequent:case t.alternative:return!0;default:return!1}if(t instanceof Le){var n=t.expressions,i=n.indexOf(e);if(i<0)return!1;for(var r=n.length;--r>i;)if(!n[r].is_constant_expression(o))return!1;return!0}return t instanceof ut}function _(e,t){return t instanceof m?vn(t.body,e):t instanceof b?vn(t.body,e):t instanceof ne?vn(t.body,e):t instanceof ce?t.body===e||t.alternative===e:t instanceof at?t.bfinally?t.bfinally===e:t.bcatch===e:void 0}function v(n,i,r){var s=e.right;e.right=Ft(Se,s);var a=i.may_throw(t);return e.right=s,Dt(t,n,i,o,a,r)}function y(t){var n=e.left.fixed;return n&&(n.to_binary=K(function(e){return e.left},n)),Ft(c,e,{operator:e.right.operator+"=",left:e.left,right:t})}function x(n){return n&&(n.fixed=!1),("="!=e.operator?Ft(p,e,{operator:e.operator.slice(0,-1),left:e.left,right:e.right}):en(t.parent(),e,e.right)).optimize(t)}}),e(C,function(e,t){if(t.option("sequences")&&e.condition instanceof Le){var n=e.condition.expressions.slice(),i=e.clone();return i.condition=n.pop(),n.push(i),$t(e,n).optimize(t)}if(!t.option("conditionals"))return e;var r=e.condition;if(t.option("booleans")&&!r.has_side_effects(t)&&ti(t,r),!(r=ei(t,r)))return xe.warn("Condition always false [{start}]",e),$t(e,[e.condition,e.alternative]).optimize(t);if(!(r instanceof xe))return xe.warn("Condition always true [{start}]",e),$t(e,[e.condition,e.consequent]).optimize(t);var s=xt(t),a=r.negate(t,s);(s?An:kn)(r,a)===a&&(e=Ft(C,e,{condition:a,consequent:e.alternative,alternative:e.consequent}),a=r,r=e.condition);var o=e.consequent,u=e.alternative,f=Si(r,t);if(wi(t,f)){if(f.equals(o))return Ft(p,e,{operator:"||",left:r,right:u}).optimize(t);if(f.equals(u))return Ft(p,e,{operator:"&&",left:r,right:o}).optimize(t)}var l=o.tail_node();if(l instanceof c){var h="="==l.operator,d=h?u.tail_node():u;if((h||o===l)&&d instanceof c&&l.operator==d.operator&&l.left.equals(d.left)&&(h&&l.left instanceof et||!r.has_side_effects(t)&&A(o)&&A(u)))return Ft(c,e,{operator:l.operator,left:l.left,right:Ft(C,e,{condition:r,consequent:T(o),alternative:T(u)})})}var d=u.tail_node();if(l.equals(d))return $t(e,o.equals(u)?[r,o]:[Ft(C,e,{condition:r,consequent:E(o),alternative:E(u)}),d]).optimize(t);var m,g=function t(n,i,s){var a=n.tail_node();var o=i.tail_node();if(!function e(t,n){if(t.TYPE!=n.TYPE)return;if(t.optional!=n.optional)return;if(t instanceof v){if(-1!=w(t,n))return;return"Call"!=t.TYPE||!(t.expression instanceof Oe||n.expression instanceof Oe)||e(t.expression,n.expression)}if(!(t instanceof Oe))return;var i=t.property;var r=n.property;return(i instanceof xe?i.equals(r):i==r)&&!(t.expression instanceof AST_Super||n.expression instanceof AST_Super)}(a,o))return!s&&Ft(C,e,{condition:r,consequent:n,alternative:i});var c=a.clone();var u=k(n,a,"expression");var f=k(i,o,"expression");var l=t(u,f);a.expression instanceof Le&&(l=en(a,a.expression,l));c.expression=l;return c}(o,u,!0);if(g)return g;if(o instanceof v&&u.TYPE==o.TYPE&&(m=w(o,u))>=0&&o.expression.equals(u.expression)&&!r.has_side_effects(t)&&!o.expression.has_side_effects(t)){var i=o.clone(),_=o.args[m];return i.args[m]=_ instanceof Me?Ft(Me,e,{expression:Ft(C,e,{condition:r,consequent:_.expression,alternative:u.args[m].expression})}):Ft(C,e,{condition:r,consequent:_,alternative:u.args[m]}),i}if(l instanceof C&&l.alternative.equals(u))return Ft(C,e,{condition:Ft(p,e,{left:r,operator:"&&",right:k(o,l,"condition")}),consequent:l.consequent,alternative:tn(l.alternative,u)});if(l instanceof C&&l.consequent.equals(u))return Ft(C,e,{condition:Ft(p,e,{left:a,operator:"||",right:k(o,l,"condition")}),consequent:tn(l.consequent,u),alternative:l.alternative});if(d instanceof C&&o.equals(d.consequent))return Ft(C,e,{condition:Ft(p,e,{left:r,operator:"||",right:k(u,d,"condition")}),consequent:tn(o,d.consequent),alternative:d.alternative});if(d instanceof C&&o.equals(d.alternative))return Ft(C,e,{condition:Ft(p,e,{left:a,operator:"&&",right:k(u,d,"condition")}),consequent:d.consequent,alternative:tn(o,d.alternative)});if(l instanceof p&&"&&"==l.operator&&l.right.equals(u))return Ft(p,e,{operator:"&&",left:Ft(p,e,{operator:"||",left:a,right:k(o,l,"left")}),right:tn(l.right,u)}).optimize(t);if(l instanceof p&&"||"==l.operator&&l.right.equals(u))return Ft(p,e,{operator:"||",left:Ft(p,e,{operator:"&&",left:r,right:k(o,l,"left")}),right:tn(l.right,u)}).optimize(t);if(d instanceof p&&"&&"==d.operator&&d.right.equals(o))return Ft(p,e,{operator:"&&",left:Ft(p,e,{operator:"||",left:r,right:k(u,d,"left")}),right:tn(o,d.right)}).optimize(t);if(d instanceof p&&"||"==d.operator&&d.right.equals(o))return Ft(p,e,{operator:"||",left:Ft(p,e,{operator:"&&",left:a,right:k(u,d,"left")}),right:tn(o,d.right)}).optimize(t);var y=t.option("booleans")&&t.in_boolean_context();return x(o)?S(u)?b(r):Ft(p,e,{operator:"||",left:b(r),right:u}).optimize(t):S(o)?x(u)?b(r.negate(t)):Ft(p,e,{operator:"&&",left:b(r.negate(t)),right:u}).optimize(t):x(u)?Ft(p,e,{operator:"||",left:b(r.negate(t)),right:o}).optimize(t):S(u)?Ft(p,e,{operator:"&&",left:b(r),right:o}).optimize(t):(t.option("typeofs")&&Zn(r,o,u),e);function b(e){return e.is_boolean(t)?e:Ft(ut,e,{operator:"!",expression:e.negate(t)})}function x(e){return e instanceof st||y&&e instanceof O&&e.value||e instanceof ut&&"!"==e.operator&&e.expression instanceof O&&!e.expression.value}function S(e){return e instanceof te||y&&(e instanceof O&&!e.value||e instanceof ut&&"void"==e.operator&&!e.expression.has_side_effects(t))||e instanceof ut&&"!"==e.operator&&e.expression instanceof O&&e.expression.value}function w(e,t){var n=e.args,i=t.args,r=n.length;if(r!=i.length)return-2;for(var s=0;s<r;s++)if(!n[s].equals(i[s])){if(n[s]instanceof Me!=i[s]instanceof Me)return-3;for(var a=s+1;a<r;a++)if(!n[a].equals(i[a]))return-2;return s}return-1}function k(e,t,n){if(e===t)return t[n];var i=e.expressions.slice(0,-1);return i.push(t[n]),$t(e,i)}function A(e){return e===e.tail_node()||Tt(e.expressions.slice(0,-1),function(e){return!e.has_side_effects(t)})}function T(e){if(!(e instanceof Le))return e.right;var t=e.expressions.slice();return t.push(t.pop().right),$t(e,t)}function E(e){return e instanceof Le?$t(e,e.expressions.slice(0,-1)):Ft(we,e,{value:0})}}),e(g,function(e,t){if(!t.option("booleans"))return e;if(t.in_boolean_context())return Ft(we,e,{value:+e.value});var n=t.parent();return n instanceof p&&("=="==n.operator||"!="==n.operator)?(xe.warn("Non-strict equality against boolean: {operator} {value} [{start}]",{operator:n.operator,value:e.value,start:n.start}),Ft(we,e,{value:+e.value})):Ft(ut,e,{operator:"!",expression:Ft(we,e,{value:1-e.value})})}),e(Me,function(e,t){var n=e.expression;return t.option("spreads")&&n instanceof a&&!(t.parent()instanceof ke)?List.splice(n.elements.map(function(e){return e instanceof oe?Ft(ft,e).optimize(t):e})):e}),e(qe,function(e,t){var n=e.expression,i=e.property,r=ci(e,t);if(r)return r;if(t.option("properties")){var o=i.evaluate(t);if(o!==i){if("string"==typeof o)if("undefined"==o)o=void 0;else{var c=parseFloat(o);c.toString()==o&&(o=c)}i=e.property=kn(i,Kt(o,i).transform(t));var u=""+o;if(Yt(u)&&u.length<=i.print_to_string().length+1)return Ft(G,e,{optional:e.optional,expression:n,property:u,quoted:!0}).optimize(t)}}var f,l,p,h,d=t.parent(),m=Xt(t.self(),d);if(t.option("arguments")&&n instanceof et&&x(f=n.definition())&&!n.in_arg&&i instanceof we&&Math.floor(w=i.value)==w&&(l=f.scope)===function(){var e,n=0;for(;e=t.parent(n++);)if(e instanceof de){if(e instanceof s)return;if(St(e))continue;return p=t.parent(n),e}}()&&l.uses_arguments<(m?2:3)){d instanceof ut&&"delete"==d.operator&&(f.deleted||(f.deleted=[]),f.deleted[w]=!0);var g=l.argnames[w];if(f.deleted&&f.deleted[w])g=null;else if(g){var _;g instanceof Je&&"await"!=g.name&&n.scope.find_variable(g.name)===(_=g.definition())?(t.has_directive("use strict")||l.name||l.rest||!(p instanceof v&&w<p.args.length&&Tt(p.args.slice(0,w+1),function(e){return!(e instanceof Me)}))||!Tt(l.argnames,function(e){return e instanceof Je}))&&(P()||_.assignments||_.orig.length>1)&&(g=null):g=null}else if((m||!P())&&w<l.argnames.length+5&&t.drop_fargs(l,p)&&!l.rest)for(;w>=l.argnames.length;)g=l.make_var(Je,l,"argument_"+l.argnames.length),l.argnames.push(g);if(g&&find_if(function(e){return e.name===g.name},l.argnames)===g){m&&f.reassigned--;var y=Ft(et,g);return y.reference(),g.unused=void 0,y}}if(m)return e;if(t.option("sequences")&&"Call"!=d.TYPE&&!(d instanceof re&&d.init===e)){var b=ui(e,t);if(b!==e)return b.optimize(t)}if(o!==i){var S=e.flatten_object(u,t);S&&(n=e.expression=S.expression,i=e.property=S.property)}if(t.option("properties")&&t.option("side_effects")&&i instanceof we&&n instanceof a&&Tt(h=n.elements,function(e){return!(e instanceof Me)})){var w=i.value,k=h[w];if(Ni(k,t)){for(var A=k instanceof oe,T=!A,E=[],C=h.length;--C>w;){var c=h[C].drop_side_effect_free(t);c&&(E.unshift(c),T&&c.has_side_effects(t)&&(T=!1))}for(T||E.unshift(k);--C>=0;){var c=h[C].drop_side_effect_free(t);c?E.unshift(c):A?E.unshift(Ft(oe,h[C])):w--}return T?(E.push(k),$t(e,E).optimize(t)):Ft(qe,e,{expression:Ft(a,n,{elements:E}),property:Ft(we,i,{value:w})})}}return On(t,e);function P(){return!t.option("reduce_vars")||f.reassigned}}),ge.DEFMETHOD("contains_super",function(){var e=!1,t=this;return t.walk(new _t(function(n){return!!e||(n instanceof AST_Super?e=!0:n!==t&&n instanceof Ne&&!St(n)||void 0)})),e}),function(e){e(o,Bt),e(u,Bt),e(xe,function(){var e=!1,t=this;return t.walk(new _t(function(n){return!!e||(n instanceof it?e=!0:n!==t&&n instanceof Ne&&!St(n)||void 0)})),e})}(function(e,t){e.DEFMETHOD("contains_this",t)}),Oe.DEFMETHOD("flatten_object",function(e,t){if(t.option("properties")&&"__proto__"!==e){var n=this.expression;if(n instanceof ke)for(var i=n.properties,r=i.length;--r>=0;){var s=i[r];if(s.key===e){if(!Tt(i,Li))return;if(!Ni(s.value,t))return;for(var c,f,l=[],p=0;p<i.length;p++){var h=i[p].value;if(i[p]instanceof Ce){var d,m=!(h.uses_arguments||wt(h)||h.contains_this());if(m){f||(f=t.find_parent(Ne));var g=li(t,f);h.each_argname(function(e){g[e.name]&&(m=!1)})}if(m)d=is_async(h)?u:o;else{if(!(r!=p||(c=t.parent())instanceof v&&c.expression===this))return;d=h.CTOR}h=Ft(d,h)}l.push(h)}return Ft(qe,this,{expression:Ft(a,n,{elements:l}),property:Ft(we,this,{value:r})})}}}}),e(G,function(e,t){"arguments"!=e.property&&"caller"!=e.property||xe.warn("Function.prototype.{property} not supported [{start}]",e);var n=t.parent();if(Xt(t.self(),n))return e;var i=ci(e,t);if(i)return i;if(t.option("sequences")&&"Call"!=n.TYPE&&!(n instanceof re&&n.init===e)){var r=ui(e,t);if(r!==e)return r.optimize(t)}if(t.option("unsafe_proto")&&e.expression instanceof G&&"prototype"==e.expression.property){var s=e.expression.expression;if(pn(s))switch(s.name){case"Array":e.expression=Ft(a,e.expression,{elements:[]});break;case"Function":e.expression=Ft(ae,e.expression,{argnames:[],body:[]}).init_vars(s.scope);break;case"Number":e.expression=Ft(we,e.expression,{value:0});break;case"Object":e.expression=Ft(ke,e.expression,{properties:[]});break;case"RegExp":e.expression=Ft(De,e.expression,{value:/t/});break;case"String":e.expression=Ft(Fe,e.expression,{value:""})}}var o=e.flatten_object(e.property,t);return o?o.optimize(t):On(t,e)}),e(V,function(e,t){return t.option("rests")&&e.rest instanceof V?Ft(V,e,{elements:e.elements.concat(e.rest.elements),rest:e.rest.rest}):e}),e(z,function(e,t){if(t.option("objects")){var n=e.key;n instanceof xe&&(n=n.evaluate(t))!==e.key&&(e.key=""+n)}return e}),e(ke,function(e,t){if(!t.option("objects"))return e;var n=!1,i=!1,r=!1,s=t.has_directive("use strict"),a=[],o=new Ct,c=[];if(e.properties.forEach(function(e){if(!(e instanceof Me))return l(e);i=!0;var s=e.expression;t.option("spreads")&&s instanceof ke&&Tt(s.properties,function(e){return!(e instanceof AST_ObjectGetter)&&(!(e instanceof Me)&&("__proto__"!==e.key||(e instanceof AST_ObjectSetter||!e.value.has_side_effects(t))))})?(n=!0,s.properties.forEach(function(e){var n=e.key,i=e instanceof AST_ObjectSetter;if("__proto__"===n){if(!i)return;n=Kt(n,e)}l(i?Ft(Ae,e,{key:n,value:Ft(ft,e).optimize(t)}):e)})):(r=!0,f(),c.push(e))}),f(),!n)return e;if(i&&r&&1==c.length){var u=c[0];u instanceof Te&&u.key instanceof we&&(u.key=""+u.key.value)}return Ft(ke,e,{properties:c});function f(){a.forEach(function(t){var i=o.get(t);switch(i.length){case 0:return;case 1:return c.push(i[0])}n=!0;var a=s&&!r&&i.pop();c.push(1==i.length?i[0]:Ft(Ae,e,{key:i[0].key,value:$t(e,i.map(function(e){return e.value}))})),a&&c.push(a),i.length=0}),a=[],o=new Ct}function l(e){var n=e.key;n instanceof xe&&(i=!0,(n=n.evaluate(t))===e.key||"__proto__"===n?r=!0:n=e.key=""+n),Li(e)?(e.value.has_side_effects(t)&&f(),a.push(n),o.add(n,e)):(f(),c.push(e)),i&&!r&&"string"==typeof n&&X.test(n)&&(r=!0,o.has(n)&&(e=o.get(n)[0]),e.key=Ft(we,e,{value:+n}))}}),function(e){function t(e,t,n,i,r,s,a){for(var o=[],c=s.expressions,u=n,f=c.length-(a||0),l=f;--f>=0;u=!0,r=!1){var p=c[f].try_inline(e,t,u,i,r);p&&(h(),o.push(p))}if(0!=o.length)return h(),!n&&o[0]instanceof Re&&(o[0]=Ft(Ie,s,{value:o[0].body})),Ft(m,s,{body:o.reverse()});function h(){l>f+1&&o.push(Ft(Re,s,{body:$t(s,c.slice(f+1,l))})),l=f}}e(xe,Rt),e(c,Rt),e(f,function(e,t,n,i){if(e.option("awaits")){var r=this,s=r.expression.try_inline(e,t,n,i,!0);if(s)return n||Gn(s,function(t){t.in_bool=!1;var n=t.value;n instanceof f||(t.value=Ft(f,r,{expression:n||Ft(ft,t).transform(e)}))}),jn(s)?s:Ft(m,r,{body:[s,Ft(Re,r,{body:Ft(f,r,{expression:Ft(we,r,{value:0})})})]})}}),e(p,function(e,t,n,i,r){if(void 0!==n){var s=this,a=s.operator;if(wn[a]){var o=s.right.try_inline(e,t,n,i,r);if(o)return Ft(ce,s,{condition:function(t){switch(a){case"&&":return t;case"||":return t.negate(e);case"??":return Ft(p,s,{operator:"==",left:Ft(Se,s),right:t})}}(s.left),body:o,alternative:n?null:Ft(Ie,s,{value:Ft(ft,s).transform(e)})})}}}),e(m,function(e,t,n,i){if(!n&&this.variables){var r=this.body,s=r.length-1;if(!(s<0)){var a=r[s].try_inline(e,this,n,i);if(a)return r[s]=a,this}}}),e(v,function(e,t,n,i,r){if(!(e.option("inline")<4)){var s=this;if(!s.is_expr_pure(e)){var o=s.expression;if(o instanceof ge&&!(o.name||o.uses_arguments||o.pinned()||wt(o))){var c=St(o);if(!(c&&o.value||o.body[0]instanceof $||o.contains_this())){t||(t=Pt(e));var u=new Ct;for(u.set("NaN",!0);!(t instanceof Ne);)t.variables.each(function(e){u.set(e.name,!0)}),t=t.parent_scope;if(Lt(t,e.stack)&&!(t.pinned()&&o.variables.size()>(c?0:1))){if(t instanceof rt){if(o.variables.size()>(c?0:1)){if(!e.toplevel.vars)return;if(o.functions.size()>0&&!e.toplevel.funcs)return}u.set("arguments",!0)}var l=!r&&is_async(o);if(l){if(!e.option("awaits"))return;if(!is_async(t))return;if(s.may_throw(e))return}var p=t.var_names();if(i&&(i=[]),o.variables.all(function(e,t){return i&&i.push(e),!u.has(t)&&!p.has(t)||!c&&"arguments"==t&&1==e.orig.length})&&!(i&&i.length>0&&Oi(o,i))){var h=!0;if(Tt(o.argnames,function(e){var t=!1,n=new _t(function(e){return!!t||(e instanceof R?Mi(o,e.value)?t=!0:(e.name.walk(n),!0):e instanceof z?e.key instanceof xe&&Mi(o,e.key)?t=!0:(e.value.walk(n),!0):e instanceof Je&&!Tt(e.definition().orig,function(e){return!(e instanceof We)})?t=!0:void 0)});return e.walk(n),!t&&(e instanceof Je||(h=!1),!0)})){if(o.rest){if(Mi(o,o.rest))return;h=!1}var d;if(n?d=function(e){var t=!1;return e.walk(new _t(function(e){return!!t||(l&&(e instanceof f||e instanceof AST_ForAwaitOf)||e instanceof Ie?t=!0:e instanceof Ne||void 0)})),!t}:(r||is_async(o)||Et(t))&&(d=function(e){var t=!1,n=new _t(function(e){return!!t||(e instanceof Ie?t=!0:e instanceof Ne||void 0)});return e.walk(new _t(function(e){return!!t||(e instanceof at?(e.bfinally&&Tt(e.body,function(e){return e.walk(n),!t})&&e.bcatch&&e.bcatch.walk(n),!0):e instanceof Ne||void 0)})),!t}),(!d||Tt(o.body,d))&&pi(o,li(e,t))){o.functions.each(function(e,n){t.functions.set(n,e)});var g=[];o.variables.each(function(n,r){if((c||"arguments"!=r||1!=n.orig.length)&&(p.set(r,!0),t.enclosed.push(n),t.variables.set(r,n),n.single_use=!1,i&&n.references.length!=n.replaced&&n.orig.length!=n.eliminated&&(1!=n.orig.length||!o.functions.has(r))&&Tt(n.orig,function(e){return!(e instanceof He)&&(e instanceof Je?!e.unused&&n.scope.resolve()!==o:!(e instanceof Qe))}))){var s=n.orig[0];s instanceof Ue||g.push(Ft(Re,s,{body:Fi(e,Ri(s))}))}});var _=Object.create(null),v=new Ct;if(h&&Tt(s.args,function(e){return!(e instanceof Me)})){var y=s.args.slice();o.argnames.forEach(function(t){var n=y.shift();if(t.unused)n&&g.push(Ft(Re,s,{body:n}));else{var i=Ft(pt,s,{name:t.convert_symbol(AST_SymbolVar,x),value:n||Ft(ft,s).transform(e)});t instanceof Je&&ji(t.definition(),i),g.push(Ft(lt,s,{definitions:[i]}))}}),y.length&&g.push(Ft(Re,s,{body:$t(s,y)}))}else g.push(Ft(lt,s,{definitions:[Ft(pt,s,{name:Ft(V,s,{elements:o.argnames.map(function(e){return e.unused?Ft(oe,e):e.convert_symbol(AST_SymbolVar,x)}),rest:o.rest&&o.rest.convert_symbol(AST_SymbolVar,x)}),value:Ft(a,s,{elements:s.args.slice()})})]}));v.each(function(e,t){var n=_[t];[].unshift.apply(n.orig,e),n.eliminated+=e.length}),[].push.apply(g,i?o.body.filter(function(e){if(!(e instanceof me))return!0;var t=Ft(AST_SymbolVar,Ri(e.name)),n=t.definition();return n.fixed=!1,n.orig.push(t),n.eliminated++,g.push(Ft(lt,e,{definitions:[Ft(pt,e,{name:t,value:Hn(e,!0)})]})),!1}):o.body);var b=Ft(m,s,{body:g});return n||(l&&Gn(b,function(e){var t=e.value;Sn(t)||(e.value=Ft(f,s,{expression:t}))}),g.push(Ft(Ie,s,{value:Et(t)?Ft(ft,s).transform(e):null}))),b}}}}}}}}function x(e,t){var n=t.definition();_[n.id]=n,v.add(n.id,e)}}),e(C,function(e,t,n,i,r){var s=this.consequent.try_inline(e,t,n,i,r),a=this.alternative.try_inline(e,t,n,i,r);if(s||a)return Ft(ce,this,{condition:this.condition,body:s||o(this.consequent),alternative:a||o(this.alternative)});function o(e){return n?Ft(Re,e,{body:e}):Ft(Ie,e,{value:e})}}),e(ie,function(e,t,n,i){var r=this.body.try_inline(e,t,!0,!0);r&&(this.body=r);var s=this.init;return s&&(s=s.try_inline(e,t,!0,i))?(this.init=null,s instanceof m?(s.body.push(this),s):Ft(m,s,{body:[s,this]})):r&&this}),e(re,function(e,n,i,r){var s=this.body.try_inline(e,n,!0,!0);s&&(this.body=s);var a=this.object;if(a instanceof Le){var o=t(e,n,!0,r,!1,a,1);if(o)return this.object=a.tail_node(),o.body.push(this),o}return s&&this}),e(ce,function(e,n,i,r){var s=this.body.try_inline(e,n,i,r);s&&(this.body=s);var a=this.alternative;a&&(a=a.try_inline(e,n,i,r))&&(this.alternative=a);var o=this.condition;if(o instanceof Le){var c=t(e,n,!0,r,!1,o,1);if(c)return this.condition=o.tail_node(),c.body.push(this),c}return(s||a)&&this}),e(le,function(e,t,n,i){var r=this.body.try_inline(e,t,!0,!0);if(r)return this.body=r,this}),e(he,function(e,t,n,i){var r=this.body.try_inline(e,t,n,i);if(r){if(this.body instanceof le&&r instanceof m){var s=r.body.pop();return this.body=s,r.body.push(this),r}return this.body=r,this}}),e(be,Rt),e(Ie,function(e,t,n,i){var r=this.value;return r&&r.try_inline(e,t,void 0,"try"===i)}),e(Le,function(e,n,i,r,s){return t(e,n,i,r,s,this)}),e(Re,function(e,t,n,i){for(var r=this.body;r instanceof ut;){var s=r.operator;if(unary_side_effects[s])break;if("void"==s)break;r=r.expression}return n||Sn(r)||(r=Ft(ut,this,{operator:"void",expression:r})),r.try_inline(e,t,n||!1,i)}),e(ut,function(e,t,n,i,r){var s=this,a=s.operator;if(!unary_side_effects[a]){n||"void"!=a||(n=!1);var o=s.expression.try_inline(e,t,n,i,r);if(o)return n||Gn(o,function(t){t.in_bool=!1;var n=t.value;"void"==a&&Sn(n)||(t.value=Ft(ut,s,{operator:a,expression:n||Ft(ft,t).transform(e)}))}),o}}),e(dt,function(e,n,i,r){var s=this.body.try_inline(e,n,i,r);s&&(this.body=s);var a=this.expression;if(a instanceof Le){var o=t(e,n,!0,r,!1,a,1);if(o)return this.expression=a.tail_node(),o.body.push(this),o}return s&&this}),e(mt,function(e,t,n,i){if(e.option("yields")&&this.nested){var r=this.expression;if("Call"==r.TYPE){var s=r.expression;switch(s.CTOR){case AST_AsyncGeneratorFunction:s=Ft(AST_AsyncFunction,s);break;case AST_GeneratorFunction:s=Ft(ae,s);break;default:return}return(r=r.clone()).expression=s,r.try_inline(e,t,n,i)}}})}(function(e,t){e.DEFMETHOD("try_inline",t)}),e(Ie,function(e,t){var n=e.value;return n&&t.option("side_effects")&&Sn(n,t)&&!Et(t.find_parent(Ne))&&(e.value=null),e})}(function(e,t){e.DEFMETHOD("optimize",function(e){if(this._optimized)return this;if(e.has_directive("use asm"))return this;var n=t(this,e);return n._optimized=!0,n})}),{Compressor:Qt}}),define("skylark-uglifyjs/sourcemap",["./utils"],function(e){"use strict";const{characters:t,HOP:n,Dictionary:i}=e;var r=t("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),s=r.reduce(function(e,t,n){return e[t]=n,e},Object.create(null));function a(e){var t="";e=Math.abs(e)<<1|e>>>31;do{var n=31&e;(e>>>=5)&&(n|=32),t+=r[n]}while(e);return t}function o(){var e=new i,t=[];return t.index=function(n){var i=e.get(n);return i>=0||(i=t.length,t.push(n),e.set(n,i)),i},t}return{SourceMap:function(e){var t,n=o(),r=e.includeSources&&new i,c=o(),u="";e.orig&&Object.keys(e.orig).forEach(function(t){var n=e.orig[t],i=[0,0,1,0,0];if(e.orig[t]={names:n.names,mappings:n.mappings.split(/;/).map(function(e){return i[0]=0,e.split(/,/).map(function(e){return i.slice(0,function(e,t){for(var n=0,i=0,r=0,a=0;r<t.length;r++){var o=s[t[r]];n+=(31&o)<<i,32&o?i+=5:(e[a++]+=1&n?2147483648|-(n>>1):n>>1,n=i=0)}return a}(i,e))})}),sources:n.sources},r&&n.sourcesContent)for(var a=0;a<n.sources.length;a++){var o=n.sourcesContent[a];o&&r.set(n.sources[a],o)}});var f=1,l=0,p=0,h=1,d=0,m=0;return{add:e.orig?function(t,n,i,r,s,a){var o=e.orig[t];if(o){var c,u=o.mappings[r-1];if(!u)return;for(var f=0;f<u.length;f++){var l=u[f][0];if(s>=l&&(c=u[f]),s<=l)break}!c||c.length<4?t=null:(t=o.sources[c[1]],r=c[2],s=c[3],c.length>4&&(a=o.names[c[4]]))}g(t,n,i,r,s,a)}:g,setSourceContent:r?function(e,t){r.has(e)||r.set(e,t)}:noop,toString:function(){return JSON.stringify({version:3,file:e.filename||void 0,sourceRoot:e.root||void 0,sources:n,sourcesContent:r?n.map(function(e){return r.get(e)||null}):void 0,names:c,mappings:u})}};function g(i,r,s,o,g,_){if(null!=t||null!=i){if(t=i,f<r){l=0;do{u+=";"}while(++f<r)}else u&&(u+=",");if(u+=a(s-l),l=s,null!=i){var v=n.index(i);if(u+=a(v-p),p=v,u+=a(o-h),h=o,u+=a(g-d),d=g,e.names&&null!=_){var y=c.index(_);u+=a(y-m),m=y}}}}}}}),define("skylark-uglifyjs/propmangle",["./utils","./ast","./scope"],function(e,t,n){"use strict";const{defaults:i,push_uniq:r,Dictionary:s}=e,{base54:a}=n,{AST_Binary:o,AST_Call:c,AST_ClassPrivateProperty:u,AST_Conditional:f,AST_Dot:l,AST_DotHash:p,AST_ObjectKeyVal:h,AST_ObjectProperty:d,AST_PrivateMethod:m,AST_PrivateGetter:g,AST_PrivateSetter:_,AST_PrivateIn:v,AST_Sequence:y,AST_String:b,AST_Sub:x,TreeWalker:S,_KEY:w,_MANGLEPROP:k,walk:A}=t;function T(){var e=new s;["NaN","null","true","false","Infinity","-Infinity","undefined"].forEach(n),["encodeURI","encodeURIComponent","escape","eval","decodeURI","decodeURIComponent","isFinite","isNaN","parseFloat","parseInt","unescape"].forEach(n);var t=Function("return this")();return["Array","ArrayBuffer","Atomics","BigInt","Boolean","console","DataView","Date","Error","Function","Int8Array","Intl","JSON","Map","Math","Number","Object","Promise","Proxy","Reflect","RegExp","Set","String","Symbol","WebAssembly"].forEach(function(e){n(e);var i=t[e];if(i&&(Object.getOwnPropertyNames(i).map(n),"function"==typeof i)){i.__proto__&&Object.getOwnPropertyNames(i.__proto__).map(n),i.prototype&&Object.getOwnPropertyNames(i.prototype).map(n);try{Object.getOwnPropertyNames(new i).map(n)}catch(e){try{Object.getOwnPropertyNames(i()).map(n)}catch(e){}}}}),(T=function(){return e.clone()})();function n(t){e.set(t,!0)}}function E(e,t){e instanceof f?(E(e.consequent,t),E(e.alternative,t)):e instanceof y?E(e.tail_node(),t):e instanceof b&&t(e.value)}return{mangle_properties:function(e,t){var n=(t=i(t,{builtins:!1,cache:null,debug:!1,domprops:!1,keep_quoted:!1,regex:null,reserved:null},!0)).builtins?new s:T();t.domprops||"undefined"==typeof domprops||domprops.forEach(function(e){n.set(e,!0)});Array.isArray(t.reserved)&&t.reserved.forEach(function(e){n.set(e,!0)});var r,c=-1;t.cache?(r=t.cache.props).each(function(e){n.set(e,!0)}):r=new s;var u,p=t.regex,h=!1!==t.debug;h&&(u=!0===t.debug?"":t.debug);var m=new s,g=n.clone();function _(e){return!g.has(e)&&!/^-?[0-9]+(\.[0-9]+)?(e[+-][0-9]+)?$/.test(e)}function v(e){return n.has(e)?(AST_Node.info("Preserving reserved property {this}",e),!1):p&&!p.test(e)?(AST_Node.info("Preserving excluded property {this}",e),!1):r.has(e)||m.has(e)}function w(e){_(e)&&m.set(e,!0),v(e)||g.set(e,!0)}function k(e){if(!v(e))return e;var t=r.get(e);if(!t){if(h){var n="_$"+e+"$"+u+"_";_(n)&&(t=n)}if(!t)do{t=a(++c)}while(!_(t));/^#/.test(e)&&(t="#"+t),r.set(e,t)}return AST_Node.info("Mapping property {name} to {mangled}",{mangled:t,name:e}),t}function A(e){e instanceof y?A(e.tail_node()):e instanceof b?e.value=k(e.value):e instanceof f&&(A(e.consequent),A(e.alternative))}e.walk(new S(function(e){if("Call"==e.TYPE){var t=e.expression;if(t instanceof l)switch(t.property){case"defineProperty":case"getOwnPropertyDescriptor":if(e.args.length<2)break;if(!((t=t.expression)instanceof AST_SymbolRef))break;if("Object"!=t.name)break;if(!t.definition().undeclared)break;E(e.args[1],w);break;case"hasOwnProperty":if(e.args.length<1)break;E(e.args[0],w)}}else e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof d?e.key instanceof AST_Node?E(e.key,w):w(e.key):e instanceof l?is_lhs(e,this.parent())&&w(e.property):e instanceof x&&is_lhs(e,this.parent())&&E(e.property,w)})),e.walk(new S(function(e){if(e instanceof o)"in"==e.operator&&A(e.left);else if("Call"==e.TYPE){var n=e.expression;if(n instanceof l)switch(n.property){case"defineProperty":case"getOwnPropertyDescriptor":if(e.args.length<2)break;if(!((n=n.expression)instanceof AST_SymbolRef))break;if("Object"!=n.name)break;if(!n.definition().undeclared)break;A(e.args[1]);break;case"hasOwnProperty":if(e.args.length<1)break;A(e.args[0])}}else e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof d?e.key instanceof AST_Node?A(e.key):e.key=k(e.key):e instanceof l?e.property=k(e.property):e instanceof x&&(t.keep_quoted||A(e.property))}))},reserve_quoted_keys:function(e,t){function n(e){r(t,e)}e.walk(new S(function(e){e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof d?e.key instanceof AST_Node?E(e.key,n):e.start&&e.start.quote&&n(e.key):e instanceof l?e.quoted&&n(e.property):e instanceof x&&E(e.property,n)}))}}}),define("skylark-uglifyjs/minify",["./utils","./ast","./parse","./output","./compress","./sourcemap","./propmangle"],function(e,t,n,i,r,s,a){"use strict";const{defaults:o,HOP:c}=e,{AST_Toplevel:u,AST_Node:f,walk:l,AST_Scope:p}=t,{parse:h}=n,{OutputStream:d}=i,{Compressor:m}=r,{SourceMap:g}=s,{mangle_properties:_,reserve_quoted_keys:v}=a;var y,b;function x(e,t){for(var n=t.end.comments_after,i=n.length;--i>=0;){var r=n[i];if("comment1"!=r.type)break;var s=/^# ([^\s=]+)=(\S+)\s*$/.exec(r.value);if(!s)break;if("sourceMappingURL"==s[1]){if(!(s=/^data:application\/json(;.*?)?;base64,([^,]+)$/.exec(s[2])))break;return y(s[2])}}f.warn("inline source map not found: {name}",{name:e})}function S(e){try{return JSON.parse(e)}catch(t){throw new Error("invalid input source map: "+e)}}function w(e,t,n){n.forEach(function(n){t[n]&&("object"!=typeof t[n]&&(t[n]={}),e in t[n]||(t[n][e]=t[e]))})}function k(e){e&&("props"in e?e.props instanceof Dictionary||(e.props=Dictionary.fromObject(e.props)):e.props=new Dictionary)}function A(e){return{props:e.props.toObject()}}return"undefined"==typeof Buffer?(y=atob,b=btoa):void 0===Buffer.alloc?(y=function(e){return new Buffer(e,"base64").toString()},b=function(e){return new Buffer(e).toString("base64")}):(y=function(e){return Buffer.from(e,"base64").toString()},b=function(e){return Buffer.from(e).toString("base64")}),{minify:function(e,t){try{(t=o(t,{annotations:void 0,compress:{},enclose:!1,expression:!1,ie:!1,ie8:!1,keep_fargs:!1,keep_fnames:!1,mangle:{},module:!1,nameCache:null,output:{},parse:{},rename:void 0,sourceMap:!1,timings:!1,toplevel:!(!t||!t.module),v8:!1,validate:!1,warnings:!1,webkit:!1,wrap:!1},!0)).validate&&f.enable_validation();var n,i=t.timings&&{start:Date.now()};void 0!==t.annotations&&w("annotations",t,["compress","output"]),t.expression&&w("expression",t,["compress","parse"]),t.ie8&&(t.ie=t.ie||t.ie8),t.ie&&w("ie",t,["compress","mangle","output","rename"]),t.keep_fargs&&w("keep_fargs",t,["compress","mangle","rename"]),t.keep_fnames&&w("keep_fnames",t,["compress","mangle","rename"]),t.module&&w("module",t,["compress","parse"]),t.toplevel&&w("toplevel",t,["compress","mangle","rename"]),t.v8&&w("v8",t,["mangle","output","rename"]),t.webkit&&w("webkit",t,["compress","mangle","output","rename"]),t.mangle&&(t.mangle=o(t.mangle,{cache:t.nameCache&&(t.nameCache.vars||{}),eval:!1,ie:!1,keep_fargs:!1,keep_fnames:!1,properties:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1},!0),t.mangle.properties&&("object"!=typeof t.mangle.properties&&(t.mangle.properties={}),t.mangle.properties.keep_quoted&&(n=t.mangle.properties.reserved,Array.isArray(n)||(n=[]),t.mangle.properties.reserved=n),!t.nameCache||"cache"in t.mangle.properties||(t.mangle.properties.cache=t.nameCache.props||{})),k(t.mangle.cache),k(t.mangle.properties.cache)),void 0===t.rename&&(t.rename=t.compress&&t.mangle),t.sourceMap&&(t.sourceMap=o(t.sourceMap,{content:null,filename:null,includeSources:!1,names:!0,root:null,url:null},!0));var r,s=[];if(t.warnings&&f.log_function(function(e){s.push(e)},"verbose"==t.warnings),i&&(i.parse=Date.now()),t.parse=t.parse||{},e instanceof f)r=e;else{"string"==typeof e&&(e=[e]),t.parse.toplevel=null;var a=t.sourceMap&&t.sourceMap.content;for(var l in"string"==typeof a&&"inline"!=a&&(a=S(a)),a&&(t.sourceMap.orig=Object.create(null)),e)if(c(e,l))if(t.parse.filename=l,t.parse.toplevel=r=h(e[l],t.parse),"inline"==a){var p=x(l,r);p&&(t.sourceMap.orig[l]=S(p))}else a&&(t.sourceMap.orig[l]=a)}t.parse.expression&&(r=r.wrap_expression()),n&&v(r,n),["enclose","wrap"].forEach(function(n){var i=t[n];if(i){var s=r.print_to_string().slice(0,-1);r=r[n](i),e[r.start.file]=r.print_to_string().replace(s,"")}}),t.validate&&r.validate_ast(),i&&(i.rename=Date.now()),t.rename&&(r.figure_out_scope(t.rename),r.expand_names(t.rename)),i&&(i.compress=Date.now()),t.compress&&(r=new m(t.compress).compress(r),t.validate&&r.validate_ast()),i&&(i.scope=Date.now()),t.mangle&&r.figure_out_scope(t.mangle),i&&(i.mangle=Date.now()),t.mangle&&(r.compute_char_frequency(t.mangle),r.mangle_names(t.mangle)),i&&(i.properties=Date.now()),n&&v(r,n),t.mangle&&t.mangle.properties&&_(r,t.mangle.properties),t.parse.expression&&(r=r.unwrap_expression()),i&&(i.output=Date.now());var y={},T=o(t.output,{ast:!1,code:!0});if(T.ast&&(y.ast=r),T.code){if(t.sourceMap&&(T.source_map=g(t.sourceMap),t.sourceMap.includeSources)){if(e instanceof u)throw new Error("original source content unavailable");for(var l in e)c(e,l)&&T.source_map.setSourceContent(l,e[l])}delete T.ast,delete T.code;var E=d(T);if(r.print(E),y.code=E.get(),t.sourceMap){y.map=T.source_map.toString();var C=t.sourceMap.url;C&&(y.code=y.code.replace(/\n\/\/# sourceMappingURL=\S+\s*$/,""),y.code+="inline"==C?"\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,"+b(y.map):"\n//# sourceMappingURL="+C)}}return t.nameCache&&t.mangle&&(t.mangle.cache&&(t.nameCache.vars=A(t.mangle.cache)),t.mangle.properties&&t.mangle.properties.cache&&(t.nameCache.props=A(t.mangle.properties.cache))),i&&(i.end=Date.now(),y.timings={parse:.001*(i.rename-i.parse),rename:.001*(i.compress-i.rename),compress:.001*(i.scope-i.compress),scope:.001*(i.mangle-i.scope),mangle:.001*(i.properties-i.mangle),properties:.001*(i.output-i.properties),output:.001*(i.end-i.output),total:.001*(i.end-i.start)}),s.length&&(y.warnings=s),y}catch(e){return{error:e}}finally{f.log_function(),f.disable_validation()}}}}),define("skylark-uglifyjs/main",["./minify"],function(e){return e}),define("skylark-uglifyjs",["skylark-uglifyjs/main"],function(e){return e}),define("skylark-rjs/uglifyjs",["skylark-uglifyjs"],function(e){return e}),define("skylark-sourcemap/util",[],function(){"use strict";var e=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,t=/^data:.+\,.+$/;function n(t){var n=t.match(e);return n?{scheme:n[1],auth:n[2],host:n[3],port:n[4],path:n[5]}:null}function i(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function r(e){var t=e,r=n(e);if(r){if(!r.path)return e;t=r.path}for(var s,o=a(t),c=t.split(/\/+/),u=0,f=c.length-1;f>=0;f--)"."===(s=c[f])?c.splice(f,1):".."===s?u++:u>0&&(""===s?(c.splice(f+1,u),u=0):(c.splice(f,2),u--));return""===(t=c.join("/"))&&(t=o?"/":"."),r?(r.path=t,i(r)):t}function s(e,s){""===e&&(e="."),""===s&&(s=".");var a=n(s),o=n(e);if(o&&(e=o.path||"/"),a&&!a.scheme)return o&&(a.scheme=o.scheme),i(a);if(a||s.match(t))return s;if(o&&!o.host&&!o.path)return o.host=s,i(o);var c="/"===s.charAt(0)?s:r(e.replace(/\/+$/,"")+"/"+s);return o?(o.path=c,i(o)):c}function a(t){return"/"===t.charAt(0)||e.test(t)}var o=!("__proto__"in Object.create(null));function c(e){return e}function u(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var n=t-10;n>=0;n--)if(36!==e.charCodeAt(n))return!1;return!0}function f(e,t){return e===t?0:null===e?1:null===t?-1:e>t?1:-1}return{toSetString:o?c:function(e){if(u(e))return"$"+e;return e},fromSetString:o?c:function(e){if(u(e))return e.slice(1);return e},compareByOriginalPositions:function(e,t,n){var i=f(e.source,t.source);if(0!==i)return i;if(0!=(i=e.originalLine-t.originalLine))return i;if(0!=(i=e.originalColumn-t.originalColumn)||n)return i;if(0!=(i=e.generatedColumn-t.generatedColumn))return i;if(0!=(i=e.generatedLine-t.generatedLine))return i;return f(e.name,t.name)},isAbsolute:a,compareByGeneratedPositionsDeflated:function(e,t,n){var i=e.generatedLine-t.generatedLine;if(0!==i)return i;if(0!=(i=e.generatedColumn-t.generatedColumn)||n)return i;if(0!==(i=f(e.source,t.source)))return i;if(0!=(i=e.originalLine-t.originalLine))return i;if(0!=(i=e.originalColumn-t.originalColumn))return i;return f(e.name,t.name)},compareByGeneratedPositionsInflated:function(e,t){var n=e.generatedLine-t.generatedLine;if(0!==n)return n;if(0!=(n=e.generatedColumn-t.generatedColumn))return n;if(0!==(n=f(e.source,t.source)))return n;if(0!=(n=e.originalLine-t.originalLine))return n;if(0!=(n=e.originalColumn-t.originalColumn))return n;return f(e.name,t.name)},parseSourceMapInput:function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},getArg:function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')},urlParse:n,urlGenerate:i,normalize:r,join:s,relative:function(e,t){""===e&&(e=".");e=e.replace(/\/$/,"");var n=0;for(;0!==t.indexOf(e+"/");){var i=e.lastIndexOf("/");if(i<0)return t;if((e=e.slice(0,i)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)},computeSourceURL:function(e,t,a){t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t);if(a){var o=n(a);if(!o)throw new Error("sourceMapURL could not be parsed");if(o.path){var c=o.path.lastIndexOf("/");c>=0&&(o.path=o.path.substring(0,c+1))}t=s(i(o),t)}return r(t)}}}),define("skylark-sourcemap/array-set",["./util"],function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="undefined"!=typeof Map;function i(){this._array=[],this._set=n?new Map:Object.create(null)}return i.fromArray=function(e,t){for(var n=new i,r=0,s=e.length;r<s;r++)n.add(e[r],t);return n},i.prototype.size=function(){return n?this._set.size:Object.getOwnPropertyNames(this._set).length},i.prototype.add=function(i,r){var s=n?i:e.toSetString(i),a=n?this.has(i):t.call(this._set,s),o=this._array.length;a&&!r||this._array.push(i),a||(n?this._set.set(i,o):this._set[s]=o)},i.prototype.has=function(i){if(n)return this._set.has(i);var r=e.toSetString(i);return t.call(this._set,r)},i.prototype.indexOf=function(i){if(n){var r=this._set.get(i);if(r>=0)return r}else{var s=e.toSetString(i);if(t.call(this._set,s))return this._set[s]}throw new Error('"'+i+'" is not in the set.')},i.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},i.prototype.toArray=function(){return this._array.slice()},i}),define("skylark-sourcemap/base64",[],function(){"use strict";var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return{encode:function(t){if(0<=t&&t<e.length)return e[t];throw new TypeError("Must be between 0 and 63: "+t)},decode:function(e){if(65<=e&&e<=90)return e-65;if(97<=e&&e<=122)return e-97+26;if(48<=e&&e<=57)return e-48+52;if(43==e)return 62;if(47==e)return 63;return-1}}}),define("skylark-sourcemap/base64-vlq",["./base64"],function(e){"use strict";return{encode:function(t){var n,i="",r=function(e){return e<0?1+(-e<<1):0+(e<<1)}(t);do{n=31&r,(r>>>=5)>0&&(n|=32),i+=e.encode(n)}while(r>0);return i},decode:function(t,n,i){var r,s,a=t.length,o=0,c=0;do{if(n>=a)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(s=e.decode(t.charCodeAt(n++))))throw new Error("Invalid base64 digit: "+t.charAt(n-1));r=!!(32&s),o+=(s&=31)<<c,c+=5}while(r);i.value=(u=o,f=u>>1,1==(1&u)?-f:f),i.rest=n;var u,f}}}),define("skylark-sourcemap/binary-search",[],function(){"use strict";const e=1,t=2;return{GREATEST_LOWER_BOUND:e,LEAST_UPPER_BOUND:t,search:function(n,i,r,s){if(0===i.length)return-1;var a=function e(n,i,r,s,a,o){var c=Math.floor((i-n)/2)+n;var u=a(r,s[c],!0);return 0===u?c:u>0?i-c>1?e(c,i,r,s,a,o):o==t?i<s.length?i:-1:c:c-n>1?e(n,c,r,s,a,o):o==t?c:n<0?-1:n}(-1,i.length,n,i,r,s||e);if(a<0)return-1;for(;a-1>=0&&0===r(i[a],i[a-1],!0);)--a;return a}}}),define("skylark-sourcemap/mapping-list",["./util"],function(e){"use strict";function t(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return t.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},t.prototype.add=function(t){var n,i,r,s,a,o;n=this._last,i=t,r=n.generatedLine,s=i.generatedLine,a=n.generatedColumn,o=i.generatedColumn,s>r||s==r&&o>=a||e.compareByGeneratedPositionsInflated(n,i)<=0?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))},t.prototype.toArray=function(){return this._sorted||(this._array.sort(e.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},t}),define("skylark-sourcemap/quick-sort",[],function(){"use strict";function e(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function t(n,i,r,s){if(r<s){var a=(l=r,p=s,Math.round(l+Math.random()*(p-l))),o=r-1;e(n,a,s);for(var c=n[s],u=r;u<s;u++)i(n[u],c)<=0&&e(n,o+=1,u);e(n,o+1,u);var f=o+1;t(n,i,r,f-1),t(n,i,f+1,s)}var l,p}return{quickSort:function(e,n){t(e,n,0,e.length-1)}}}),define("skylark-sourcemap/source-map-consumer",["./util","./binary-search","./array-set","./base64-vlq","./quick-sort"],function(e,t,n,i,r){"use strict";function s(t,n){var i=t;return"string"==typeof t&&(i=e.parseSourceMapInput(t)),null!=i.sections?new c(i,n):new a(i,n)}function a(t,i){var r=t;"string"==typeof t&&(r=e.parseSourceMapInput(t));var s=e.getArg(r,"version"),a=e.getArg(r,"sources"),o=e.getArg(r,"names",[]),c=e.getArg(r,"sourceRoot",null),u=e.getArg(r,"sourcesContent",null),f=e.getArg(r,"mappings"),l=e.getArg(r,"file",null);if(s!=this._version)throw new Error("Unsupported version: "+s);c&&(c=e.normalize(c)),a=a.map(String).map(e.normalize).map(function(t){return c&&e.isAbsolute(c)&&e.isAbsolute(t)?e.relative(c,t):t}),this._names=n.fromArray(o.map(String),!0),this._sources=n.fromArray(a,!0),this._absoluteSources=this._sources.toArray().map(function(t){return e.computeSourceURL(c,t,i)}),this.sourceRoot=c,this.sourcesContent=u,this._mappings=f,this._sourceMapURL=i,this.file=l}function o(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function c(t,i){var r=t;"string"==typeof t&&(r=e.parseSourceMapInput(t));var a=e.getArg(r,"version"),o=e.getArg(r,"sections");if(a!=this._version)throw new Error("Unsupported version: "+a);this._sources=new n,this._names=new n;var c={line:-1,column:0};this._sections=o.map(function(t){if(t.url)throw new Error("Support for url field in sections not implemented.");var n=e.getArg(t,"offset"),r=e.getArg(n,"line"),a=e.getArg(n,"column");if(r<c.line||r===c.line&&a<c.column)throw new Error("Section offsets must be ordered and non-overlapping.");return c=n,{generatedOffset:{generatedLine:r+1,generatedColumn:a+1},consumer:new s(e.getArg(t,"map"),i)}})}return s.fromSourceMap=function(e,t){return a.fromSourceMap(e,t)},s.prototype._version=3,s.prototype.__generatedMappings=null,Object.defineProperty(s.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),s.prototype.__originalMappings=null,Object.defineProperty(s.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),s.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return";"===n||","===n},s.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},s.GENERATED_ORDER=1,s.ORIGINAL_ORDER=2,s.GREATEST_LOWER_BOUND=1,s.LEAST_UPPER_BOUND=2,s.prototype.eachMapping=function(t,n,i){var r,a=n||null,o=i||s.GENERATED_ORDER;switch(o){case s.GENERATED_ORDER:r=this._generatedMappings;break;case s.ORIGINAL_ORDER:r=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var c=this.sourceRoot;r.map(function(t){var n=null===t.source?null:this._sources.at(t.source);return{source:n=e.computeSourceURL(c,n,this._sourceMapURL),generatedLine:t.generatedLine,generatedColumn:t.generatedColumn,originalLine:t.originalLine,originalColumn:t.originalColumn,name:null===t.name?null:this._names.at(t.name)}},this).forEach(t,a)},s.prototype.allGeneratedPositionsFor=function(n){var i=e.getArg(n,"line"),r={source:e.getArg(n,"source"),originalLine:i,originalColumn:e.getArg(n,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];var s=[],a=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,t.LEAST_UPPER_BOUND);if(a>=0){var o=this._originalMappings[a];if(void 0===n.column)for(var c=o.originalLine;o&&o.originalLine===c;)s.push({line:e.getArg(o,"generatedLine",null),column:e.getArg(o,"generatedColumn",null),lastColumn:e.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++a];else for(var u=o.originalColumn;o&&o.originalLine===i&&o.originalColumn==u;)s.push({line:e.getArg(o,"generatedLine",null),column:e.getArg(o,"generatedColumn",null),lastColumn:e.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++a]}return s},a.prototype=Object.create(s.prototype),a.prototype.consumer=s,a.prototype._findSourceIndex=function(t){var n,i=t;if(null!=this.sourceRoot&&(i=e.relative(this.sourceRoot,i)),this._sources.has(i))return this._sources.indexOf(i);for(n=0;n<this._absoluteSources.length;++n)if(this._absoluteSources[n]==t)return n;return-1},a.fromSourceMap=function(t,i){var s=Object.create(a.prototype),c=s._names=n.fromArray(t._names.toArray(),!0),u=s._sources=n.fromArray(t._sources.toArray(),!0);s.sourceRoot=t._sourceRoot,s.sourcesContent=t._generateSourcesContent(s._sources.toArray(),s.sourceRoot),s.file=t._file,s._sourceMapURL=i,s._absoluteSources=s._sources.toArray().map(function(t){return e.computeSourceURL(s.sourceRoot,t,i)});for(var f=t._mappings.toArray().slice(),l=s.__generatedMappings=[],p=s.__originalMappings=[],h=0,d=f.length;h<d;h++){var m=f[h],g=new o;g.generatedLine=m.generatedLine,g.generatedColumn=m.generatedColumn,m.source&&(g.source=u.indexOf(m.source),g.originalLine=m.originalLine,g.originalColumn=m.originalColumn,m.name&&(g.name=c.indexOf(m.name)),p.push(g)),l.push(g)}return r(s.__originalMappings,e.compareByOriginalPositions),s},a.prototype._version=3,Object.defineProperty(a.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),a.prototype._parseMappings=function(t,n){for(var s,a,c,u,f,l=1,p=0,h=0,d=0,m=0,g=0,_=t.length,v=0,y={},b={},x=[],S=[];v<_;)if(";"===t.charAt(v))l++,v++,p=0;else if(","===t.charAt(v))v++;else{for((s=new o).generatedLine=l,u=v;u<_&&!this._charIsMappingSeparator(t,u);u++);if(a=t.slice(v,u),c=y[a])v+=a.length;else{for(c=[];v<u;)i.decode(t,v,b),f=b.value,v=b.rest,c.push(f);if(2===c.length)throw new Error("Found a source, but no line and column");if(3===c.length)throw new Error("Found a source and line, but no column");y[a]=c}s.generatedColumn=p+c[0],p=s.generatedColumn,c.length>1&&(s.source=m+c[1],m+=c[1],s.originalLine=h+c[2],h=s.originalLine,s.originalLine+=1,s.originalColumn=d+c[3],d=s.originalColumn,c.length>4&&(s.name=g+c[4],g+=c[4])),S.push(s),"number"==typeof s.originalLine&&x.push(s)}r(S,e.compareByGeneratedPositionsDeflated),this.__generatedMappings=S,r(x,e.compareByOriginalPositions),this.__originalMappings=x},a.prototype._findMapping=function(e,n,i,r,s,a){if(e[i]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[i]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return t.search(e,n,s,a)},a.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},a.prototype.originalPositionFor=function(t){var n={generatedLine:e.getArg(t,"line"),generatedColumn:e.getArg(t,"column")},i=this._findMapping(n,this._generatedMappings,"generatedLine","generatedColumn",e.compareByGeneratedPositionsDeflated,e.getArg(t,"bias",s.GREATEST_LOWER_BOUND));if(i>=0){var r=this._generatedMappings[i];if(r.generatedLine===n.generatedLine){var a=e.getArg(r,"source",null);null!==a&&(a=this._sources.at(a),a=e.computeSourceURL(this.sourceRoot,a,this._sourceMapURL));var o=e.getArg(r,"name",null);return null!==o&&(o=this._names.at(o)),{source:a,line:e.getArg(r,"originalLine",null),column:e.getArg(r,"originalColumn",null),name:o}}}return{source:null,line:null,column:null,name:null}},a.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}))},a.prototype.sourceContentFor=function(t,n){if(!this.sourcesContent)return null;var i=this._findSourceIndex(t);if(i>=0)return this.sourcesContent[i];var r,s=t;if(null!=this.sourceRoot&&(s=e.relative(this.sourceRoot,s)),null!=this.sourceRoot&&(r=e.urlParse(this.sourceRoot))){var a=s.replace(/^file:\/\//,"");if("file"==r.scheme&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!r.path||"/"==r.path)&&this._sources.has("/"+s))return this.sourcesContent[this._sources.indexOf("/"+s)]}if(n)return null;throw new Error('"'+s+'" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(t){var n=e.getArg(t,"source");if((n=this._findSourceIndex(n))<0)return{line:null,column:null,lastColumn:null};var i={source:n,originalLine:e.getArg(t,"line"),originalColumn:e.getArg(t,"column")},r=this._findMapping(i,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,e.getArg(t,"bias",s.GREATEST_LOWER_BOUND));if(r>=0){var a=this._originalMappings[r];if(a.source===i.source)return{line:e.getArg(a,"generatedLine",null),column:e.getArg(a,"generatedColumn",null),lastColumn:e.getArg(a,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},c.prototype=Object.create(s.prototype),c.prototype.constructor=s,c.prototype._version=3,Object.defineProperty(c.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),c.prototype.originalPositionFor=function(n){var i={generatedLine:e.getArg(n,"line"),generatedColumn:e.getArg(n,"column")},r=t.search(i,this._sections,function(e,t){var n=e.generatedLine-t.generatedOffset.generatedLine;return n||e.generatedColumn-t.generatedOffset.generatedColumn}),s=this._sections[r];return s?s.consumer.originalPositionFor({line:i.generatedLine-(s.generatedOffset.generatedLine-1),column:i.generatedColumn-(s.generatedOffset.generatedLine===i.generatedLine?s.generatedOffset.generatedColumn-1:0),bias:n.bias}):{source:null,line:null,column:null,name:null}},c.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},c.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],r=i.consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},c.prototype.generatedPositionFor=function(t){for(var n=0;n<this._sections.length;n++){var i=this._sections[n];if(-1!==i.consumer._findSourceIndex(e.getArg(t,"source"))){var r=i.consumer.generatedPositionFor(t);if(r){var s={line:r.line+(i.generatedOffset.generatedLine-1),column:r.column+(i.generatedOffset.generatedLine===r.line?i.generatedOffset.generatedColumn-1:0)};return s}}}return{line:null,column:null}},c.prototype._parseMappings=function(t,n){this.__generatedMappings=[],this.__originalMappings=[];for(var i=0;i<this._sections.length;i++)for(var s=this._sections[i],a=s.consumer._generatedMappings,o=0;o<a.length;o++){var c=a[o],u=s.consumer._sources.at(c.source);u=e.computeSourceURL(s.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var f=null;c.name&&(f=s.consumer._names.at(c.name),this._names.add(f),f=this._names.indexOf(f));var l={source:u,generatedLine:c.generatedLine+(s.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(s.generatedOffset.generatedLine===c.generatedLine?s.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:f};this.__generatedMappings.push(l),"number"==typeof l.originalLine&&this.__originalMappings.push(l)}r(this.__generatedMappings,e.compareByGeneratedPositionsDeflated),r(this.__originalMappings,e.compareByOriginalPositions)},{SourceMapConsumer:s,BasicSourceMapConsumer:a,IndexedSourceMapConsumer:c}}),define("skylark-sourcemap/source-map-generator",["./base64-vlq","./util","./array-set","./mapping-list"],function(e,t,n,i){"use strict";function r(e){e||(e={}),this._file=t.getArg(e,"file",null),this._sourceRoot=t.getArg(e,"sourceRoot",null),this._skipValidation=t.getArg(e,"skipValidation",!1),this._sources=new n,this._names=new n,this._mappings=new i,this._sourcesContents=null}return r.prototype._version=3,r.fromSourceMap=function(e){var n=e.sourceRoot,i=new r({file:e.file,sourceRoot:n});return e.eachMapping(function(e){var r={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(r.source=e.source,null!=n&&(r.source=t.relative(n,r.source)),r.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(r.name=e.name)),i.addMapping(r)}),e.sources.forEach(function(r){var s=r;null!==n&&(s=t.relative(n,r)),i._sources.has(s)||i._sources.add(s);var a=e.sourceContentFor(r);null!=a&&i.setSourceContent(r,a)}),i},r.prototype.addMapping=function(e){var n=t.getArg(e,"generated"),i=t.getArg(e,"original",null),r=t.getArg(e,"source",null),s=t.getArg(e,"name",null);this._skipValidation||this._validateMapping(n,i,r,s),null!=r&&(r=String(r),this._sources.has(r)||this._sources.add(r)),null!=s&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:n.line,generatedColumn:n.column,originalLine:null!=i&&i.line,originalColumn:null!=i&&i.column,source:r,name:s})},r.prototype.setSourceContent=function(e,n){var i=e;null!=this._sourceRoot&&(i=t.relative(this._sourceRoot,i)),null!=n?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[t.toSetString(i)]=n):this._sourcesContents&&(delete this._sourcesContents[t.toSetString(i)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},r.prototype.applySourceMap=function(e,i,r){var s=i;if(null==i){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');s=e.file}var a=this._sourceRoot;null!=a&&(s=t.relative(a,s));var o=new n,c=new n;this._mappings.unsortedForEach(function(n){if(n.source===s&&null!=n.originalLine){var i=e.originalPositionFor({line:n.originalLine,column:n.originalColumn});null!=i.source&&(n.source=i.source,null!=r&&(n.source=t.join(r,n.source)),null!=a&&(n.source=t.relative(a,n.source)),n.originalLine=i.line,n.originalColumn=i.column,null!=i.name&&(n.name=i.name))}var u=n.source;null==u||o.has(u)||o.add(u);var f=n.name;null==f||c.has(f)||c.add(f)},this),this._sources=o,this._names=c,e.sources.forEach(function(n){var i=e.sourceContentFor(n);null!=i&&(null!=r&&(n=t.join(r,n)),null!=a&&(n=t.relative(a,n)),this.setSourceContent(n,i))},this)},r.prototype._validateMapping=function(e,t,n,i){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||n||i)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:i}))},r.prototype._serializeMappings=function(){for(var n,i,r,s,a=0,o=1,c=0,u=0,f=0,l=0,p="",h=this._mappings.toArray(),d=0,m=h.length;d<m;d++){if(i=h[d],n="",i.generatedLine!==o)for(a=0;i.generatedLine!==o;)n+=";",o++;else if(d>0){if(!t.compareByGeneratedPositionsInflated(i,h[d-1]))continue;n+=","}n+=e.encode(i.generatedColumn-a),a=i.generatedColumn,null!=i.source&&(s=this._sources.indexOf(i.source),n+=e.encode(s-l),l=s,n+=e.encode(i.originalLine-1-u),u=i.originalLine-1,n+=e.encode(i.originalColumn-c),c=i.originalColumn,null!=i.name&&(r=this._names.indexOf(i.name),n+=e.encode(r-f),f=r)),p+=n}return p},r.prototype._generateSourcesContent=function(e,n){return e.map(function(e){if(!this._sourcesContents)return null;null!=n&&(e=t.relative(n,e));var i=t.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)},r.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},r.prototype.toString=function(){return JSON.stringify(this.toJSON())},r}),define("skylark-sourcemap/source-node",["./source-map-generator","./util"],function(e,t){"use strict";var n=/(\r?\n)/,i="$$$isSourceNode$$$";function r(e,t,n,r,s){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==s?null:s,this[i]=!0,null!=r&&this.add(r)}return r.fromStringWithSourceMap=function(e,i,s){var a=new r,o=e.split(n),c=0,u=function(){var e=n(),t=n()||"";return e+t;function n(){return c<o.length?o[c++]:void 0}},f=1,l=0,p=null;return i.eachMapping(function(e){if(null!==p){if(!(f<e.generatedLine)){var t=o[c]||"",n=t.substr(0,e.generatedColumn-l);return o[c]=t.substr(e.generatedColumn-l),l=e.generatedColumn,h(p,n),void(p=e)}h(p,u()),f++,l=0}for(;f<e.generatedLine;)a.add(u()),f++;if(l<e.generatedColumn){var t=o[c]||"";a.add(t.substr(0,e.generatedColumn)),o[c]=t.substr(e.generatedColumn),l=e.generatedColumn}p=e},this),c<o.length&&(p&&h(p,u()),a.add(o.splice(c).join(""))),i.sources.forEach(function(e){var n=i.sourceContentFor(e);null!=n&&(null!=s&&(e=t.join(s,e)),a.setSourceContent(e,n))}),a;function h(e,n){if(null===e||void 0===e.source)a.add(n);else{var i=s?t.join(s,e.source):e.source;a.add(new r(e.originalLine,e.originalColumn,i,n,e.name))}}},r.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[i]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},r.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[i]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},r.prototype.walk=function(e){for(var t,n=0,r=this.children.length;n<r;n++)(t=this.children[n])[i]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},r.prototype.join=function(e){var t,n,i=this.children.length;if(i>0){for(t=[],n=0;n<i-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},r.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[i]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},r.prototype.setSourceContent=function(e,n){this.sourceContents[t.toSetString(e)]=n},r.prototype.walkSourceContents=function(e){for(var n=0,r=this.children.length;n<r;n++)this.children[n][i]&&this.children[n].walkSourceContents(e);for(var s=Object.keys(this.sourceContents),n=0,r=s.length;n<r;n++)e(t.fromSetString(s[n]),this.sourceContents[s[n]])},r.prototype.toString=function(){var e="";return this.walk(function(t){e+=t}),e},r.prototype.toStringWithSourceMap=function(t){var n={code:"",line:1,column:0},i=new e(t),r=!1,s=null,a=null,o=null,c=null;return this.walk(function(e,t){n.code+=e,null!==t.source&&null!==t.line&&null!==t.column?(s===t.source&&a===t.line&&o===t.column&&c===t.name||i.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:n.line,column:n.column},name:t.name}),s=t.source,a=t.line,o=t.column,c=t.name,r=!0):r&&(i.addMapping({generated:{line:n.line,column:n.column}}),s=null,r=!1);for(var u=0,f=e.length;u<f;u++)10===e.charCodeAt(u)?(n.line++,n.column=0,u+1===f?(s=null,r=!1):r&&i.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:n.line,column:n.column},name:t.name})):n.column++}),this.walkSourceContents(function(e,t){i.setSourceContent(e,t)}),{code:n.code,map:i}},r}),define("skylark-sourcemap/main",["./array-set","./base64-vlq","./binary-search","./mapping-list","./quick-sort","./source-map-consumer","./source-map-generator","./source-node","./util"],function(e,t,n,i,r,s,a,o,c){"use strict";return{ArraySet:e,base64VLQ:t,binarySearch:n,MappingList:i,quickSort:r,consumers:s,SourceMapGenerator:a,SourceNode:o,util:c}}),define("skylark-sourcemap",["skylark-sourcemap/main"],function(e){return e}),define("skylark-rjs/source-map",["skylark-sourcemap"],function(e){return e}),define("skylark-rjs/optimize",["./lang","./logger","./parse","./pragma","./uglifyjs","./source-map"],function(e,t,n,i,r,s){"use strict";var a,o=/\@import\s+(url\()?\s*([^);]+)\s*(\))?([\w, ]*)(;)?/gi,c=/\/\*[^\*]*@import[^\*]*\*\//g,u=/\url\(\s*([^\)]+)\s*\)?/g,f=/^\w+:/;s.SourceMapGenerator,s.SourceMapConsumer;function l(e){return"'"!==(e=e.replace(/\s+$/,"")).charAt(0)&&'"'!==e.charAt(0)||(e=e.substring(1,e.length-1)),e}function p(n,i,r,s){return r.replace(u,function(r,a){var o,c,u,p,h=l(a);for(h=h.replace(e.backSlashRegExp,"/"),o=h.charAt(0),c=f.test(h),"/"===o||"#"===o||c?c||t.trace(n+"\n  URL not a relative URL, skipping: "+a):a=s+i+h,u=a.split("/"),p=u.length-1;p>0;p--)"."===u[p]?u.splice(p,1):".."===u[p]&&0!==p&&".."!==u[p-1]&&(u.splice(p-1,2),p-=1);return"url("+u.join("/")+")"})}return a={jsFile:function(e,t,n,i,r){var s=i.env.fs;t||(t=s.readFile(e)),t=a.js(e,t,n,i,r),s.saveUtf8File(n,t)},js:function(e,r,s,o,c){var u,f,l=String(o.optimize).split("."),p=l[0],h="keepLines"===l[1],d="";if(o=o||{},r=i.process(e,r,o,"OnSave",c),p&&"none"!==p){if(!(u=a.optimizers[p]))throw new Error('optimizer with name of "'+p+'" not found for this environment');f=o[p]||{},o.generateSourceMaps&&(f.generateSourceMaps=!!o.generateSourceMaps,f._buildSourceMap=o._buildSourceMap);try{if(o.preserveLicenseComments)try{d=n.getLicenseComments(e,r)}catch(t){throw new Error("Cannot parse file: "+e+" for comments. Skipping it. Error is:\n"+t.toString())}o.generateSourceMaps&&d&&(f.preamble=d,d=""),r=d+u(e,r,s,h,f,o.env.fs),f._buildSourceMap&&f._buildSourceMap!==o._buildSourceMap&&(o._buildSourceMap=f._buildSourceMap)}catch(e){if(o.throwWhen&&o.throwWhen.optimize)throw e;t.error(e)}}else o._buildSourceMap&&(o._buildSourceMap=null);return r},cssFile:function(n,i,r){var s,a,u,f,h=r.env.fs,d=h.readFile(n),m=function n(i,r,s,a,u,f,h){i=i.replace(e.backSlashRegExp,"/");var d=i.lastIndexOf("/"),m=-1!==d?i.substring(0,d+1):"",g=[],_=[],v=h.env.fs;r=r.replace(c,"");s&&","!==s.charAt(s.length-1)&&(s+=",");r=r.replace(o,function(r,o,c,f,d){if(d&&"all"!==d.replace(/^\s\s*/,"").replace(/\s\s*$/,""))return _.push(i),r;if(c=l(c),s&&-1!==s.indexOf(c+","))return r;c=c.replace(e.backSlashRegExp,"/");try{var y,b,x,S="/"===c.charAt(0)?c:m+c,w=v.readFile(S);return u[S]?"":(u[S]=!0,x=n(S,w,s,a,u,!1,h),w=x.fileContents,x.importList.length&&g.push.apply(g,x.importList),x.skippedList.length&&_.push.apply(_,x.skippedList),y=c.lastIndexOf("/"),b=(b=-1!==y?c.substring(0,y+1):"").replace(/^\.\//,""),w=p(c,b,w,a),g.push(S),w)}catch(e){return t.warn(i+"\n  Cannot inline css import, skipping: "+c),r}});a&&f&&(r=p(i,"",r,a));return{importList:g,skippedList:_,fileContents:r}}(n,d,r.cssImportIgnore,r.cssPrefix,{},!0,r),g=m.skippedList.length?d:m.fileContents;m.skippedList.length&&t.warn("Cannot inline @imports for "+n+",\nthe following files had media queries in them:\n"+m.skippedList.join("\n"));try{if(-1===r.optimizeCss.indexOf(".keepComments"))for(s=0;-1!==(s=g.indexOf("/*",s));){if(-1===(a=g.indexOf("*/",s+2)))throw"Improper comment in CSS file: "+n;f=g.substring(s,a),!r.preserveLicenseComments||-1===f.indexOf("license")&&-1===f.indexOf("opyright")&&-1===f.indexOf("(c)")?(g=g.substring(0,s)+g.substring(a+2,g.length),s=0):s=a}g=-1===r.optimizeCss.indexOf(".keepLines")?(g=(g=(g=g.replace(/[\r\n]/g," ")).replace(/\s+/g," ")).replace(/\{\s/g,"{")).replace(/\s\}/g,"}"):(g=g.replace(/(\r\n)+/g,"\r\n")).replace(/(\n)+/g,"\n"),-1===r.optimizeCss.indexOf(".keepWhitespace")&&(g=(g=(g=(g=(g=(g=g.replace(/^[ \t]+/gm,"")).replace(/[ \t]+$/gm,"")).replace(/(;|:|\{|}|,)[ \t]+/g,"$1")).replace(/[ \t]+(\{)/g,"$1")).replace(/([ \t])+/g,"$1")).replace(/^[ \t]*[\r\n]/gm,""))}catch(e){g=d,t.error("Could not optimized CSS file: "+n+", error: "+e)}return h.saveUtf8File(i,g),u="\n"+i.replace(r.dir,"")+"\n----------------\n",m.importList.push(n),u+=m.importList.map(function(e){return e.replace(r.dir,"")}).join("\n"),{importList:m.importList,buildText:u+"\n"}},css:function(e,n){var i,r,s,o,c="",u=[],f=n.dir&&n.removeCombined,l=n.env.fs;if(-1!==n.optimizeCss.indexOf("standard")){if(o=l.getFilteredFileList(e,/\.css$/,!0))for(i=0;i<o.length;i++)r=o[i],t.trace("Optimizing ("+n.optimizeCss+") CSS file: "+r),s=a.cssFile(r,r,n),c+=s.buildText,f&&(s.importList.pop(),u=u.concat(s.importList));f&&u.forEach(function(e){l.exists(e)&&l.deleteFile(e)})}return c},optimizers:{uglify:function(n,i,s,a,o,c){var u,f,l,p={},h=s+".map",d=n&&n.split("/").pop();o=o||{},e.mixin(p,o,!0),o.preamble&&(p.output={preamble:o.preamble}),o.generateSourceMaps&&(s||o._buildSourceMap)&&(p.outSourceMap=d+".map",o._buildSourceMap?(f=JSON.parse(o._buildSourceMap),p.inSourceMap=f):c.exists(h)&&(p.inSourceMap=h,f=JSON.parse(c.readFile(h)))),t.trace("Uglify file: "+n);try{u=r.minify(i,p,d+".src.js"),p.outSourceMap&&u.map?(l=u.map,f||o._buildSourceMap||c.saveFile(s+".src.js",i),i=u.code,o._buildSourceMap?o._buildSourceMap=l:c.saveFile(s+".map",l)):i=u.code}catch(e){var m=e.toString(),g=/SyntaxError/.test(m);throw new Error("Cannot uglify file: "+n+". Skipping it. Error is:\n"+m+(g?"\n\nIf the source uses ES2015 or later syntax, please pass \"optimize: 'none'\" to r.js and use an ES2015+ compatible minifier after running r.js. The included UglifyJS only understands ES5 or earlier syntax.":""))}return i}}}}),define("skylark-rjs/transform",["./esprima","./parse","./logger","./lang"],function(e,t,n,i){"use strict";var r,s=/^([ \t]+)/,a=/\{[\r\n]+([ \t]+)/,o=/^[_A-Za-z]([A-Za-z\d_]*)$/,c={"\n":/\n/g,"\r\n":/\r\n/g};return r={toTransport:function(r,s,a,o,c,u){u=u||{};var f,l,p,h,d=0,m=!1,g=[],_=function(e){return u.useSourceUrl&&(e='eval("'+i.jsEscape(e)+"\\n//# sourceURL="+(0===a.indexOf("/")?"":"/")+a+'");\n'),e};try{f=e.parse(o,{loc:!0})}catch(e){return n.trace("toTransport skipping "+a+": "+e.toString()),o}return t.traverse(f,function(e){var i,s,o,c,u,f,l,p,_=!1;if("VariableDeclarator"===e.type&&e.id&&"define"===e.id.name&&"Identifier"===e.id.type&&!((l=e.init)&&l.callee&&"CallExpression"===l.callee.type&&l.callee.callee&&"Identifier"===l.callee.callee.type&&"require"===l.callee.callee.name&&l.callee.arguments&&1===l.callee.arguments.length&&"Literal"===l.callee.arguments[0].type&&l.callee.arguments[0].value&&-1!==l.callee.arguments[0].value.indexOf("amdefine")))return!1;if((_=r&&"CallExpression"===e.type&&e.callee&&e.callee.object&&"Identifier"===e.callee.object.type&&e.callee.object.name===r&&"Identifier"===e.callee.property.type&&"define"===e.callee.property.name)||t.isDefineNodeWithArgs(e)){if(!(i=e.arguments)||!i.length)return;if(s=i[0],o=s.loc,1===i.length)"Identifier"===s.type?(u=!0,f="empty"):t.isFnExpression(s)?(c=s,u=!0,f="scan"):"ObjectExpression"===s.type?(u=!0,f="skip"):"Literal"===s.type&&"number"==typeof s.value?(u=!0,f="skip"):"UnaryExpression"===s.type&&"-"===s.operator&&s.argument&&"Literal"===s.argument.type&&"number"==typeof s.argument.value?(u=!0,f="skip"):"MemberExpression"===s.type&&s.object&&s.property&&"Identifier"===s.property.type&&(u=!0,f="empty");else if("ArrayExpression"===s.type)u=!0,f="skip";else{if("Literal"!==s.type||"string"!=typeof s.value)return;u=!1,2===i.length&&t.isFnExpression(i[1])?(c=i[1],f="scan"):f="skip"}if((p={foundId:void 0,needsId:u,depAction:f,namespaceExists:_,node:e,defineLoc:e.loc,firstArgLoc:o,factoryNode:c,sourceUrlData:void 0}).needsId){if(h)return n.trace(a+" has more than one anonymous define. May be a built file from another build system like, Ender. Skipping normalization."),g=[],!1;h=p,g.push(p)}else"scan"===f&&((d+=1)>1?m||(g=h?[h]:[],m=!0):g.push(p))}}),g.length?(g.reverse(),l=o.split("\n"),p=function(e,t){var n=e.start.column,i=e.start.line-1,r=l[i];l[i]=r.substring(0,n)+t+r.substring(n,r.length)},g.forEach(function(e){var n,i="",a="";e.needsId&&s&&(i+="'"+s+"',"),"scan"===e.depAction&&(n=t.getAnonDepsFromNode(e.factoryNode),a=n.length?"["+n.map(function(e){return"'"+e+"'"})+"]":"[]",a+=",",e.factoryNode?p(e.factoryNode.loc,a):i+=a),i&&p(e.firstArgLoc,i),r&&!e.namespaceExists&&p(e.defineLoc,r+"."),c&&c(e)}),o=l.join("\n"),_(o)):_(o)},modifyConfig:function(e,n){var i=t.findConfig(e),s=i.config;return s&&(s=n(s))?r.serializeConfig(s,e,i.range[0],i.range[1],{quote:i.quote}):e},serializeConfig:function(e,t,n,i,o){var u,f,l,p,h="",d=t.substring(0,n),m=t.substring(n,i),g=-1===m.indexOf("\r")?"\n":"\r\n",_=d.lastIndexOf("\n");return-1===_&&(_=0),(f=s.exec(d.substring(_+1,n)))&&f[1]&&(h=f[1]),(f=a.exec(m))&&f[1]&&(u=f[1]),u=!u||u.length<h?"  ":u.substring(h.length),p=new RegExp("("+g+")"+u,"g"),l=function(e,t,n){var i=c[n];return e.replace(i,"$&"+t)}(l=r.objectToString(e,{indent:u,lineReturn:g,outDentRegExp:p,quote:o&&o.quote}),h,g),d+l+t.substring(i)},objectToString:function(e,t,n){var s,a,c,u=!0,f="",l=t.lineReturn,p=t.indent,h=t.outDentRegExp,d=t.quote||'"';return c=(n=n||"")+p,null===e?f="null":void 0===e?f="undefined":"number"==typeof e||"boolean"==typeof e?f=e:"string"==typeof e?f=d+i.jsEscape(e)+d:i.isArray(e)?(i.each(e,function(e,n){f+=(0!==n?","+l:"")+c+r.objectToString(e,t,c)}),s="[",a="]"):i.isFunction(e)||i.isRegExp(e)?f=e.toString().replace(h,"$1"):(i.eachProp(e,function(e,n){f+=(u?"":","+l)+c+(o.test(n)?n:d+i.jsEscape(n)+d)+": "+r.objectToString(e,t,c),u=!1}),s="{",a="}"),s&&(f=s+l+f+l+n+a),f}}}),define("skylark-rjs/commonJs",["./parse"],function(e){"use strict";var t={useLog:!0,convertDir:function(e,n,i){var r,s,a,o,c,u=/\.js$/;if(r=i.getFilteredFileList(e,/\w/,!0),e=e.replace(/\\/g,"/"),n=n.replace(/\\/g,"/"),"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),"/"===n.charAt(n.length-1)&&(n=n.substring(0,n.length-1)),r&&r.length)for(s=0;s<r.length;s++)a=r[s],o=a.replace(e,n),u.test(a)?(c=i.readFile(a),c=t.convert(a,c,config),i.saveUtf8File(o,c)):i.copyFile(a,o,!0);else t.useLog&&("convert"===e?console.log("\n\n"+t.convert(n,i.readFile(n),config)):console.log("No files to convert in directory: "+e))},convert:function(t,n){try{var i="",r=e.usesCommonJs(t,n);if(e.usesAmdOrRequireJs(t,n)||!r)return n;(r.dirname||r.filename)&&(i='var __filename = module.uri || "", __dirname = __filename.substring(0, __filename.lastIndexOf("/") + 1); '),n="define(function (require, exports, module) {"+i+n+"\n});\n"}catch(e){return console.log("commonJs.convert: COULD NOT CONVERT: "+t+", so skipping it. Error was: "+e),n}return n}};return t}),define("skylark-rjs/requirePatch",["./pragma","./parse","./lang","./logger","./commonJs","./prim"],function(pragma,parse,lang,logger,commonJs,prim){var allowRun=!0,hasProp=lang.hasProp,falseProp=lang.falseProp,getOwn=lang.getOwn,useStrictRegExp=/['"]use strict['"];/g,absoluteUrlRegExp=/^[\/\\]|^\w:/;return prim.hideResolutionConflict=!0,function(config){if(allowRun){allowRun=!1;var fs=config.env.fs,layer,pluginBuilderRegExp=/(["']?)pluginBuilder(["']?)\s*[=\:]\s*["']([^'"\s]+)["']/,oldNewContext=require.s.newContext,oldDef,exports,module;require._cacheReset=function(){require._cachedRawText={},require._cachedFileContents={},require._cachedDefinesRequireUrls={}},require._cacheReset(),require._isSupportedBuildUrl=function(e){return-1===e.indexOf("://")&&-1===e.indexOf("?")&&0!==e.indexOf("empty:")&&0!==e.indexOf("//")||(layer.ignoredUrls[e]||(-1===e.indexOf("empty:")&&logger.info("Cannot optimize network URL, skipping: "+e),layer.ignoredUrls[e]=!0),!1)},require.s.newContext=function(name){var context=oldNewContext(name),oldEnable=context.enable,moduleProto=context.Module.prototype,oldInit=moduleProto.init,oldCallPlugin=moduleProto.callPlugin;return"_"===name&&(context.nextTick=function(e){e()},context.needFullExec={},context.fullExec={},context.plugins={},context.buildShimExports={},context.makeShimExports=function(e){return context.config.wrapShim?function(){var t="return ";return e.exports&&-1===e.exports.indexOf(".")&&(t+="root."+e.exports+" = "),e.init&&(t+="("+e.init.toString().replace(useStrictRegExp,"")+".apply(this, arguments))"),e.init&&e.exports&&(t+=" || "),e.exports&&(t+=e.exports),t+=";"}:function(){return"(function (global) {\n    return function () {\n        var ret, fn;\n"+(e.init?"       fn = "+e.init.toString().replace(useStrictRegExp,"")+";\n        ret = fn.apply(global, arguments);\n":"")+(e.exports?"        return ret || global."+e.exports+";\n":"        return ret;\n")+"    };\n}(this))"}},context.enable=function(e,t){var n=e.id,i=t&&t.map.id,r=context.needFullExec,s=context.fullExec,a=getOwn(context.registry,n);return a&&!a.defined?i&&getOwn(r,i)&&(r[n]=e):(getOwn(r,n)&&falseProp(s,n)||i&&getOwn(r,i)&&falseProp(s,n))&&context.require.undef(n),oldEnable.apply(context,arguments)},context.load=function(moduleName,url){var contents,pluginBuilderMatch,builderName,shim,shimExports;0===url.indexOf("empty:")&&delete context.urlFetched[url],require._isSupportedBuildUrl(url)?(url=normalizeUrlWithBase(context,moduleName,url),layer.buildPathMap[moduleName]=url,layer.buildFileToModule[url]=moduleName,hasProp(context.plugins,moduleName)&&(context.needFullExec[moduleName]=!0),prim().start(function(){if(!hasProp(require._cachedFileContents,url)||!falseProp(context.needFullExec,moduleName)&&!getOwn(context.fullExec,moduleName))return require._cacheReadAsync(url,void 0,fs).then(function(e){contents=e,!context.config.cjsTranslate||context.config.shim&&lang.hasProp(context.config.shim,moduleName)||(contents=commonJs.convert(url,contents)),context.config.onBuildRead&&(contents=context.config.onBuildRead(moduleName,url,contents)),contents=pragma.process(url,contents,context.config,"OnExecute");try{!layer.existingRequireUrl&&parse.definesRequire(url,contents)&&(layer.existingRequireUrl=url,require._cachedDefinesRequireUrls[url]=!0)}catch(e){throw new Error("Parse error using esprima for file: "+url+"\n"+e)}}).then(function(){return hasProp(context.plugins,moduleName)&&(pluginBuilderMatch=pluginBuilderRegExp.exec(contents))?(builderName=context.makeModuleMap(pluginBuilderMatch[3],context.makeModuleMap(moduleName),null,!0).id,require._cacheReadAsync(context.nameToUrl(builderName),void 0,fs)):contents}).then(function(e){contents=e;try{falseProp(context.needFullExec,moduleName)&&(contents=parse(moduleName,url,contents,{insertNeedsDefine:!0,has:context.config.has,findNestedDependencies:context.config.findNestedDependencies}))}catch(e){throw new Error("Parse error using esprima for file: "+url+"\n"+e)}require._cachedFileContents[url]=contents});contents=require._cachedFileContents[url],!layer.existingRequireUrl&&require._cachedDefinesRequireUrls[url]&&(layer.existingRequireUrl=url)}).then(function(){contents&&eval(contents);try{getOwn(context.needFullExec,moduleName)&&(shim=getOwn(context.config.shim,moduleName),shim&&shim.exports&&(shimExports=eval(shim.exports),void 0!==shimExports&&(context.buildShimExports[moduleName]=shimExports))),context.completeLoad(moduleName)}catch(e){throw e.moduleTree||(e.moduleTree=[]),e.moduleTree.push(moduleName),e}}).then(null,function(e){throw e.fileName||(e.fileName=url),e}).end()):context.completeLoad(moduleName)},context.execCb=function(e,t,n,exports){var i=getOwn(layer.context.buildShimExports,e);return i||(t.__requireJsBuild||getOwn(layer.context.needFullExec,e)?t.apply(exports,n):void 0)},moduleProto.init=function(e){return context.needFullExec[this.map.id]&&lang.each(e,lang.bind(this,function(e){"string"==typeof e&&(e=context.makeModuleMap(e,this.map.isDefine?this.map:this.map.parentMap,!1,!0)),context.fullExec[e.id]||context.require.undef(e.id)})),oldInit.apply(this,arguments)},moduleProto.callPlugin=function(){var e=this.map,t=context.makeModuleMap(e.prefix),n=t.id,i=getOwn(context.registry,n);return context.plugins[n]=!0,context.needFullExec[n]=e,!falseProp(context.fullExec,n)||i&&!i.defined||context.require.undef(t.id),oldCallPlugin.apply(this,arguments)}),context},delete require.s.contexts._,require._buildReset=function(){var e=require.s.contexts._;return delete require.s.contexts._,require({}),layer=require._layer={buildPathMap:{},buildFileToModule:{},buildFilePaths:[],pathAdded:{},modulesWithNames:{},needsDefine:{},existingRequireUrl:"",ignoredUrls:{},context:require.s.contexts._},e},require._buildReset(),oldDef=define,define=function(e){return"string"==typeof e&&falseProp(layer.needsDefine,e)&&(layer.modulesWithNames[e]=!0),oldDef.apply(require,arguments)},define.amd=oldDef.amd,require._readFile=fs.readFile,require._fileExists=function(e){return fs.exists(e)},require.onResourceLoad=function(e,t){var n,i=t.id;e.plugins&&lang.hasProp(e.plugins,i)&&lang.eachProp(e.needFullExec,function(t,n){if(!0!==t&&t.prefix===i&&t.unnormalized){var r=e.makeModuleMap(t.originalName,t.parentMap);e.needFullExec[r.id]=r}}),e.needFullExec&&getOwn(e.needFullExec,i)&&(e.fullExec[i]=t),t.prefix?falseProp(layer.pathAdded,i)&&(layer.buildFilePaths.push(i),layer.buildPathMap[i]=i,layer.buildFileToModule[i]=i,layer.modulesWithNames[i]=!0,layer.pathAdded[i]=!0):t.url&&require._isSupportedBuildUrl(t.url)&&(n=normalizeUrlWithBase(e,i,t.url),!layer.pathAdded[n]&&getOwn(layer.buildPathMap,i)&&(layer.buildFilePaths.push(n),layer.pathAdded[n]=!0))},require.needsDefine=function(e){layer.needsDefine[e]=!0}}function normalizeUrlWithBase(e,t,n){return require.jsExtRegExp.test(t)&&!absoluteUrlRegExp.test(n)&&(n=(e.config.dir||e.config.dirBaseUrl)+n),n}}}),define("skylark-rjs/build",["./rjs","./lang","./prim","./logger","./parse","./optimize","./pragma","./transform","./requirePatch","./commonJs","./source-map"],function(require,lang,prim,logger,parse,optimize,pragma,transform,requirePatch,commonJs,sourceMap){"use strict";var build,SourceMapGenerator=sourceMap.SourceMapGenerator,hasProp=lang.hasProp,getOwn=lang.getOwn,falseProp=lang.falseProp,endsWithSemiColonRegExp=/;\s*$/,endsWithSlashRegExp=/[\/\\]$/,resourceIsModuleIdRegExp=/^[\w\/\\\.]+$/,deepCopyProps={layer:!0};function copyConfig(e){return lang.deeplikeCopy(e,deepCopyProps)}function makeBuildBaseConfig(e){return{appDir:"",pragmas:{},paths:{},optimize:"uglify",optimizeCss:"standard.keepLines.keepWhitespace",inlineText:!0,isBuild:!0,optimizeAllPluginResources:!1,findNestedDependencies:!1,preserveLicenseComments:!0,writeBuildTxt:!0,waitSeconds:30,dirExclusionRegExp:e.dirExclusionRegExp,_buildPathToModuleIndex:{}}}function addSemiColon(e,t){return t.skipSemiColonInsertion||endsWithSemiColonRegExp.test(e)?e:e+";"}function endsWithSlash(e){return"/"!==e.charAt(e.length-1)&&(e+="/"),e}function endsWithNewLine(e){return"\n"!==e.charAt(e.length-1)&&(e+="\n"),e}function makeWriteFile(e,t){function n(e,t){logger.trace("Saving plugin-optimized file: "+e),file.saveUtf8File(e,t)}return n.asModule=function(i,r,s){n(r,build.toTransport(e,i,r,s,t))},n}function appendToFileContents(e,t,n,i,module,r){var s,a,o,c,u,f,l,p;if(r){for(s=i.out?i.baseUrl:module&&module._buildPath?module._buildPath:"",1===(l=n.split("!")).length?a=build.makeRelativeFilePath(s,n):(c=l.shift(),o=l.join("!"),a=resourceIsModuleIdRegExp.test(o)?build.makeRelativeFilePath(s,require.toUrl(o))+"!"+c:n),u=e.split("\n").length-1,f=t.split("\n").length,p=1;p<=f;p+=1)r.addMapping({generated:{line:u+p,column:0},original:{line:p,column:0},source:a});r.setSourceContent(a,t)}return e+=t}function stringDotToObj(e,t,n){var i=t.split(".");i.forEach(function(t,r){r===i.length-1?e[t]=n:(falseProp(e,t)&&(e[t]={}),e=e[t])})}function mixConfig(e,t,n){var i,r,s,a;for(i in t)hasProp(t,i)&&(r=t[i],s=lang.isArray(r),"object"!=typeof r||!r||s||lang.isFunction(r)||lang.isRegExp(r)?s?n||(a=e[i],lang.isArray(a)?e[i]=a.concat(r):e[i]=r):e[i]=r:"map"===i?(e.map||(e.map={}),lang.deepMix(e.map,t.map)):e[i]=lang.mixin({},e[i],r,!0));lang.hasProp(e,"logLevel")&&logger.logLevel(e.logLevel)}function flattenWrapFile(e,t,n){var i=e.wrap,r=t+"File",s="__"+t+"Map",a=e.env.fs;if("string"!=typeof i[t]&&i[r])i[t]="","string"==typeof i[r]&&(i[r]=[i[r]]),i[s]=[],i[r].forEach(function(e){var r=build.makeAbsPath(e,n,a),o=endsWithNewLine(a.readFile(r));i[s].push(function(e,t,n){return appendToFileContents(e,o,r,t,null,n)}),i[t]+=o});else if(null===i[t]||void 0===i[t])i[t]="";else{if("string"!=typeof i[t])throw new Error("wrap."+t+" or wrap."+r+" malformed");i[t]=endsWithNewLine(i[t]),i[s]=[function(e,r,s){var o=build.makeAbsPath("config-wrap-"+t+"-default.js",n,a);return appendToFileContents(e,i[t],o,r,null,s)}]}}function normalizeWrapConfig(e,t){var n=e.env.fs;try{e.wrap&&(!0===e.wrap?e.wrap={start:"(function () {\n",end:"}());",__startMap:[function(e,i,r){return appendToFileContents(e,"(function () {\n",build.makeAbsPath("config-wrap-start-default.js",t,n),i,null,r)}],__endMap:[function(e,i,r){return appendToFileContents(e,"}());",build.makeAbsPath("config-wrap-end-default.js",t,n),i,null,r)}]}:(flattenWrapFile(e,"start",t),flattenWrapFile(e,"end",t)))}catch(e){throw new Error("Malformed wrap config: "+e.toString())}}return prim.nextTick=function(e){e()},require._cacheReadAsync=function(e,t,n){var i;return lang.hasProp(require._cachedRawText,e)?((i=prim()).resolve(require._cachedRawText[e]),i.promise):n.readFileAsync(e,t).then(function(t){return require._cachedRawText[e]=t,t})},build=function(e){var t,n,i,r,s,a,o,c,u,f=/( {4}at[^\n]+)\n/;return prim().start(function(){if(!e||lang.isArray(e)){if(!e||e.length<1)return void logger.error("build.js buildProfile.js\nwhere buildProfile.js is the name of the build file (see example.build.js for hints on how to make a build file).");-1===e[0].indexOf("=")&&(t=e[0],e.splice(0,1)),(n=build.convertArrayToObject(e)).buildFile=t}else n=e;return build._run(n)}).then(null,function(t){var n;if(i=t.toString(),a=t.moduleTree,(s=f.exec(i))&&(i+=i.substring(0,s.index+s[0].length+1)),a&&a.length>0){for(i+="\nIn module tree:\n",o=a.length-1;o>-1;o--)if(u=a[o]){for(c=a.length-o;c>-1;c--)i+="  ";i+=u+"\n"}logger.error(i)}throw r=t.stack,"string"==typeof e&&-1!==e.indexOf("stacktrace=true")?i+="\n"+r:!s&&r&&(s=f.exec(r))&&(i+="\n"+s[0]||""),(n=new Error(i)).originalError=t,n})},build._run=function(e){var t,n,i,r,s,a,o,c,u,f,l,p,h,d,m,g,_,v,y={},b="",x={};return prim().start(function(){var n;if(a=build.createConfig(e),i=a.paths,v=a.env.fs,requirePatch(a),a.dir&&!a.keepBuildDir&&v.exists(a.dir)&&v.deleteFile(a.dir),!a.out&&!a.cssIn)if(v.copyDir(a.appDir||a.baseUrl,a.dir,/\w/,!0),t={},a.appDir)for(n in i)hasProp(i,n)&&(t[n]=i[n].replace(a.appDir,a.dir));else for(n in i)hasProp(i,n)&&(0===i[n].indexOf(a.baseUrl)?t[n]=i[n].replace(a.baseUrl,a.dirBaseUrl):(t[n]="empty:"===i[n]?"empty:":n,0!==(c=i[n]).indexOf("/")&&-1===c.indexOf(":")&&(c=a.baseUrl+c),f=a.dirBaseUrl+t[n],"empty:"!==c&&(v.exists(c)&&v.isDirectory(c)?v.copyDir(c,f,/\w/,!0):(c+=".js",f+=".js",v.copyFile(c,f)))));require({baseUrl:a.baseUrl,paths:i,packagePaths:a.packagePaths,packages:a.packages}),u=require.s.contexts._,(o=a.modules)&&o.forEach(function(module){if(module.name&&(module._sourcePath=u.nameToUrl(module.name),!(v.exists(module._sourcePath)||module.create||-1!==module.name.indexOf("!")||a.rawText&&lang.hasProp(a.rawText,module.name))))throw new Error("ERROR: module path does not exist: "+module._sourcePath+" for module named: "+module.name+". Path is relative to: "+v.absPath("."))}),a.out?(require(a),a.cssIn||(a.modules[0]._buildPath="function"==typeof a.out?"FUNCTION":a.out)):a.cssIn||(s={baseUrl:a.dirBaseUrl,paths:t},lang.mixin(s,a),require(s),o&&o.forEach(function(module){if(module.name){if(module._buildPath=u.nameToUrl(module.name,null),module._buildPath===module._sourcePath&&!a.allowSourceOverwrites)throw new Error("Module ID '"+module.name+"' has a source path that is same as output path: "+module._sourcePath+". Stopping, config is malformed.");module.create||a.rawText&&lang.hasProp(a.rawText,module.name)||v.copyFile(module._sourcePath,module._buildPath)}})),a.optimizeCss&&"none"!==a.optimizeCss&&a.dir&&(b+=optimize.css(a.dir,a))}).then(function(){s=copyConfig(require.s.contexts._.config)}).then(function(){var e=[];if(o)return e=o.map(function(module,e){return function(){return a._buildPathToModuleIndex[v.normalize(module._buildPath)]=e,build.traceDependencies(module,a,s).then(function(e){module.layer=e})}}),prim.serial(e)}).then(function(){var e;if(o)return e=o.map(function(module){return function(){if(module.exclude)return module.excludeLayers=[],prim.serial(module.exclude.map(function(e,t){return function(){var n=build.findBuildModule(e,o);if(!n)return build.traceDependencies({name:e},a,s).then(function(e){module.excludeLayers[t]={layer:e}});module.excludeLayers[t]=n}}))}}),prim.serial(e)}).then(function(){if(o)return prim.serial(o.map(function(module){return function(){return module.exclude&&module.exclude.forEach(function(e,t){var n=module.excludeLayers[t].layer,i=n.buildFileToModule;n.buildFilePaths.forEach(function(e){build.removeModulePath(i[e],e,module.layer)})}),module.excludeShallow&&module.excludeShallow.forEach(function(e){var t=getOwn(module.layer.buildPathMap,e);t&&build.removeModulePath(e,t,module.layer)}),build.flattenModule(module,module.layer,a).then(function(e){var t,n;"FUNCTION"===module._buildPath?(module._buildText=e.text,module._buildSourceMap=e.sourceMap):(t=e.text,e.sourceMap&&(n=(n=module._buildPath.split("/")).pop(),t+="\n//# sourceMappingURL="+n+".map",v.saveUtf8File(module._buildPath+".map",e.sourceMap)),v.saveUtf8File(module._buildPath+"-temp",t)),b+=e.buildText})}}))}).then(function(){var e,t,i={},s=a.bundlesConfigOutFile;if(o&&(o.forEach(function(module){var e,t=module._buildPath;if("FUNCTION"!==t){if(v.exists(t)&&v.deleteFile(t),v.renameFile(t+"-temp",t),s){e=i[module.name]=[];var n=v.readFile(t),r={};r[module.name]=!0;var c=parse.getAllNamedDefines(n,r);e.push.apply(e,c)}a.removeCombined&&!a.out&&module.layer.buildFilePaths.forEach(function(e){var t=o.some(function(t){return t._buildPath===e}),n=build.makeRelativeFilePath(a.dir,e);v.exists(e)&&!t&&0!==n.indexOf("..")&&v.deleteFile(e)})}a.onModuleBundleComplete&&a.onModuleBundleComplete(module.onCompleteData)}),s)){var c=v.readFile(s);c=transform.modifyConfig(c,function(e){return e.bundles||(e.bundles={}),lang.eachProp(i,function(t,n){e.bundles[n]=t}),e}),v.saveUtf8File(s,c)}if(a.removeCombined&&!a.out&&a.dir&&v.deleteEmptyDirs(a.dir),a.out&&!a.cssIn)"FUNCTION"===(n=a.modules[0]._buildPath)?(t=a.modules[0]._buildSourceMap,a._buildSourceMap=t,a.modules[0]._buildText=optimize.js((a.modules[0].name||a.modules[0].include[0]||n)+".build.js",a.modules[0]._buildText,null,a),a._buildSourceMap&&a._buildSourceMap!==t&&(a.modules[0]._buildSourceMap=a._buildSourceMap,a._buildSourceMap=null)):optimize.jsFile(n,null,n,a);else if(!a.cssIn){for(e in v.getFilteredFileList(a.dir,/\.js$/,!0).forEach(function(t){var n,i,r;e=(e=t.replace(a.dir,"")).substring(0,e.length-3),((r=0===(r=getOwn(a._buildPathToModuleIndex,t))||r>0?r:-1)>-1||!a.skipDirOptimize||"all"===a.normalizeDirDefines||a.cjsTranslate)&&(_=v.readFile(t),!a.cjsTranslate||a.shim&&lang.hasProp(a.shim,e)||(_=commonJs.convert(t,_)),-1===r&&(a.onBuildRead&&(_=a.onBuildRead(e,t,_)),"all"===a.normalizeDirDefines&&(_=build.toTransport(a.namespace,null,t,_)),a.onBuildWrite&&(_=a.onBuildWrite(e,t,_))),i=r>-1?a.modules[r].override:null,n=i?build.createOverrideConfig(a,i):a,(r>-1||!a.skipDirOptimize)&&optimize.jsFile(t,_,t,n,x))}),h=require.s.contexts._,x)if(hasProp(x,e))for(p=h.makeModuleMap(e),d=x[e],r=0;r<d.length;r++){if(m=d[r],l=h.makeModuleMap(m,p),falseProp(h.plugins,l.prefix)){if(h.plugins[l.prefix]=!0,!v.exists(require.toUrl(l.prefix+".js")))continue;h.require([l.prefix]),l=h.makeModuleMap(m,p)}falseProp(y,l.id)&&((g=getOwn(h.defined,l.prefix))&&g.writeFile&&g.writeFile(l.prefix,l.name,require,makeWriteFile(a.namespace),h.config),y[l.id]=!0)}a.writeBuildTxt&&v.saveUtf8File(a.dir+"build.txt",b)}return a.cssIn&&(b+=optimize.cssFile(a.cssIn,a.out,a).buildText),"function"==typeof a.out&&a.out(a.modules[0]._buildText,a.modules[0]._buildSourceMap),b?(logger.info(b),b):""})},build.objProps={paths:!0,wrap:!0,pragmas:!0,pragmasOnSave:!0,has:!0,hasOnSave:!0,uglify:!0,uglify2:!0,closure:!0,map:!0,throwWhen:!0,rawText:!0},build.hasDotPropMatch=function(e){var t,n=e.indexOf(".");return-1!==n&&(t=e.substring(0,n),hasProp(build.objProps,t))},build.convertArrayToObject=function(e){var t,n,i,r={},s={include:!0,exclude:!0,excludeShallow:!0,insertRequire:!0,stubModules:!0,deps:!0,mainConfigFile:!0,"wrap.startFile":!0,"wrap.endFile":!0};for(t=0;t<e.length;t++)separatorI.ndex=e[t].indexOf("="),"true"===(i=e[t].substring(NaN,e[t].length))?i=!0:"false"===i&&(i=!1),n=e[t].substring(0,void 0),getOwn(s,n)&&(i=i.split(",")),build.hasDotPropMatch(n)?stringDotToObj(r,n,i):r[n]=i;return r},build.makeAbsPath=function(e,t,n){return t?(0!==e.indexOf("/")&&-1===e.indexOf(":")&&(e=t+("/"===t.charAt(t.length-1)?"":"/")+e,e=n.normalize(e)),e.replace(lang.backSlashRegExp,"/")):e},build.makeAbsObject=function(e,t,n,i){var r,s;if(t)for(r=0;r<e.length;r++)s=e[r],hasProp(t,s)&&"string"==typeof t[s]&&(t[s]=build.makeAbsPath(t[s],n,i))},build.makeAbsConfig=function(e,t,n){var i,r,s;for(i=["appDir","dir","baseUrl"],s=0;s<i.length;s++)getOwn(e,r=i[s])&&("baseUrl"===r?(e.originalBaseUrl=e.baseUrl,e.appDir?e.baseUrl=build.makeAbsPath(e.originalBaseUrl,e.appDir,n):e.baseUrl=build.makeAbsPath(e[r],t,n)):e[r]=build.makeAbsPath(e[r],t,n),e[r]=endsWithSlash(e[r]));build.makeAbsObject("stdout"===e.out?["cssIn"]:["out","cssIn"],e,t,n),build.makeAbsObject(["startFile","endFile"],e.wrap,t,n),build.makeAbsObject(["externExportsPath"],e.closure,t,n)},build.makeRelativeFilePath=function(e,t,n){var i,r,s,a,o,c,u=e.split("/"),f=endsWithSlashRegExp.test(t),l=[];for(t=n.normalize(t),f&&!endsWithSlashRegExp.test(t)&&(t+="/"),o=t.split("/"),c=o.pop(),u.pop(),a=u.length,i=0;i<a&&u[i]===o[i];i+=1);for(s=o.slice(i),r=a-i,i=0;i>-1&&i<r;i+=1)l.push("..");return l.join("/")+(l.length?"/":"")+s.join("/")+(s.length?"/":"")+c},build.nestedMix={paths:!0,has:!0,hasOnSave:!0,pragmas:!0,pragmasOnSave:!0},build.createConfig=function(cfg){var fs=cfg.env.fs,buildFileContents,buildFileConfig,mainConfig,mainConfigFile,mainConfigPath,buildFile,absFilePath,config={},buildBaseConfig=makeBuildBaseConfig(fs);if(absFilePath=fs.absPath("."),build.makeAbsConfig(cfg,absFilePath,fs),build.makeAbsConfig(buildBaseConfig,absFilePath,fs),lang.mixin(config,buildBaseConfig),lang.mixin(config,cfg,!0),lang.hasProp(config,"logLevel")&&logger.logLevel(config.logLevel),config.buildFile){if(buildFile=fs.absPath(config.buildFile),!fs.exists(buildFile))throw new Error("ERROR: build file does not exist: "+buildFile);absFilePath=config.baseUrl=fs.absPath(fs.parent(buildFile)),buildFileContents=fs.readFile(buildFile);try{buildFileContents=buildFileContents.replace(/\/\/\#[^\n\r]+[\n\r]*$/,"").trim().replace(/;$/,""),buildFileConfig=eval("("+buildFileContents+")"),build.makeAbsConfig(buildFileConfig,absFilePath,fs),mixConfig(config,buildFileConfig)}catch(e){throw new Error("Build file "+buildFile+" is malformed: "+e)}}if(mainConfigFile=config.mainConfigFile||buildFileConfig&&buildFileConfig.mainConfigFile,mainConfigFile&&("string"==typeof mainConfigFile&&(mainConfigFile=[mainConfigFile]),mainConfigFile.forEach(function(e){if(e=build.makeAbsPath(e,absFilePath,fs),!fs.exists(e))throw new Error(e+" does not exist.");try{mainConfig=parse.findConfig(fs.readFile(e)).config}catch(t){throw new Error("The config in mainConfigFile "+e+" cannot be used because it cannot be evaluated correctly while running in the optimizer. Try only using a config that is also valid JSON, or do not use mainConfigFile and instead copy the config values needed into a build file or command line arguments given to the optimizer.\nSource error from parsing: "+e+": "+t)}mainConfig&&(mainConfigPath=e.substring(0,e.lastIndexOf("/")),config.appDir&&!mainConfig.appDir&&(mainConfig.appDir=config.appDir),mainConfig.baseUrl||(mainConfig.baseUrl=mainConfigPath),build.makeAbsConfig(mainConfig,mainConfigPath,fs),mixConfig(config,mainConfig))})),buildFileConfig&&mixConfig(config,buildFileConfig,!0),mixConfig(config,cfg,!0),lang.eachProp(config.paths,function(e,t){if(lang.isArray(e))throw new Error("paths fallback not supported in optimizer. Please provide a build config path override for "+t);config.paths[t]=build.makeAbsPath(e,config.baseUrl,fs)}),hasProp(config,"baseUrl")){if(config.appDir){if(!config.originalBaseUrl)throw new Error("Please set a baseUrl in the build config");config.dirBaseUrl=build.makeAbsPath(config.originalBaseUrl,config.dir,fs)}else config.dirBaseUrl=config.dir||config.baseUrl;config.dirBaseUrl=endsWithSlash(config.dirBaseUrl)}if(config.bundlesConfigOutFile){if(!config.dir)throw new Error('bundlesConfigOutFile can only be used with optimizations that use "dir".');config.bundlesConfigOutFile=build.makeAbsPath(config.bundlesConfigOutFile,config.dir,fs)}if(config.main)throw new Error('"main" passed as an option, but the supported option is called "name".');if(config.out&&!config.name&&!config.modules&&!config.include&&!config.cssIn)throw new Error('Missing either a "name", "include" or "modules" option');if(config.cssIn){if(config.dir||config.appDir)throw new Error('cssIn is only for the output of single file CSS optimizations and is not compatible with "dir" or "appDir" configuration.');if(!config.out)throw new Error('"out" option missing.')}if(config.cssIn||config.baseUrl||(config.baseUrl="./"),!config.out&&!config.dir)throw new Error('Missing either an "out" or "dir" config value. If using "appDir" for a full project optimization, use "dir". If you want to optimize to one file, use "out".');if(config.appDir&&config.out)throw new Error('"appDir" is not compatible with "out". Use "dir" instead. appDir is used to copy whole projects, where "out" with "baseUrl" is used to just optimize to one file.');if(config.out&&config.dir)throw new Error('The "out" and "dir" options are incompatible. Use "out" if you are targeting a single file for optimization, and "dir" if you want the appDir or baseUrl directories optimized.');if(config.dir&&!config.allowSourceOverwrites&&(config.dir===config.baseUrl||config.dir===config.appDir||config.baseUrl&&0!==build.makeRelativeFilePath(config.dir,config.baseUrl,fs).indexOf("..")||config.appDir&&0!==build.makeRelativeFilePath(config.dir,config.appDir,fs).indexOf("..")))throw new Error('"dir" is set to a parent or same directory as "appDir" or "baseUrl". This can result in the deletion of source code. Stopping. If you want to allow possible overwriting of source code, set "allowSourceOverwrites" to true in the build config, but do so at your own risk. In that case, you may want to also set "keepBuildDir" to true.');if(config.insertRequire&&!lang.isArray(config.insertRequire))throw new Error("insertRequire should be a list of module IDs to insert in to a require([]) call.");if("uglify2"===config.optimize&&(config.optimize="uglify"),config.uglify2&&(config.uglify=config.uglify2,delete config.uglify2),config.generateSourceMaps){if(config.preserveLicenseComments&&"none"!==config.optimize&&"uglify"!==config.optimize)throw new Error("Cannot use preserveLicenseComments and generateSourceMaps together, unless optimize is set to 'uglify'. Either explicitly set preserveLicenseComments to false (default is true) or turn off generateSourceMaps. If you want source maps with license comments, see: http://requirejs.org/docs/errors.html#sourcemapcomments");if("none"!==config.optimize&&"closure"!==config.optimize&&"uglify"!==config.optimize)throw new Error('optimize: "'+config.optimize+'" does not support generateSourceMaps.')}if(!config.name&&!config.include||config.modules){if(config.modules&&config.out)throw new Error('If the "modules" option is used, then there should be a "dir" option set and "out" should not be used since "out" is only for single file optimization output.');if(config.modules&&config.name)throw new Error('"name" and "modules" options are incompatible. Either use "name" if doing a single file optimization, or "modules" if you want to target more than one file for optimization.')}else config.modules=[{name:config.name,out:config.out,create:config.create,include:config.include,exclude:config.exclude,excludeShallow:config.excludeShallow,insertRequire:config.insertRequire,stubModules:config.stubModules}],delete config.stubModules;if(config.out&&!config.cssIn&&(cfg.optimizeCss||(config.optimizeCss="none")),config.cssPrefix?config.cssPrefix=endsWithSlash(config.cssPrefix):config.cssPrefix="",config.modules&&config.modules.length&&config.modules.forEach(function(e){if(lang.isArray(e)||"string"==typeof e||!e)throw new Error("modules config item is malformed: it should be an object with a 'name' property.");config.stubModules&&(e.stubModules=config.stubModules.concat(e.stubModules||[])),e.stubModules&&(e.stubModules._byName={},e.stubModules.forEach(function(t){e.stubModules._byName[t]=!0})),"string"==typeof e.include&&(e.include=[e.include]),e.override&&normalizeWrapConfig(e.override,absFilePath)}),normalizeWrapConfig(config,absFilePath),config.context)throw new Error('The build argument "context" is not supported in a build. It should only be used in web pages.');return hasProp(config,"normalizeDirDefines")||("none"===config.optimize||config.skipDirOptimize?config.normalizeDirDefines="skip":config.normalizeDirDefines="all"),hasProp(config,"fileExclusionRegExp")?"string"==typeof config.fileExclusionRegExp?fs.exclusionRegExp=new RegExp(config.fileExclusionRegExp):fs.exclusionRegExp=config.fileExclusionRegExp:hasProp(config,"dirExclusionRegExp")&&(fs.exclusionRegExp=config.dirExclusionRegExp),config.deps&&(config._depsInclude=config.deps),delete config.deps,delete config.jQuery,delete config.enforceDefine,delete config.urlArgs,config},build.findBuildModule=function(e,t){var n,module;for(n=0;n<t.length;n++)if((module=t[n]).name===e)return module;return null},build.removeModulePath=function(module,e,t){var n=t.buildFilePaths.indexOf(e);-1!==n&&t.buildFilePaths.splice(n,1)},build.traceDependencies=function(module,e,t){var n,i,r,s,a,o={rhino:!0,node:!0,xpconnect:!0},c=prim();function u(t){var n=!1;if(o[e.env.name])try{build.checkForErrors(s,r)}catch(e){n=!0,c.reject(e)}n||c.resolve(t)}return require._buildReset(),r=require._layer,s=r.context,t&&require(copyConfig(t)),logger.trace("\nTracing dependencies for: "+(module.name||("function"==typeof module.out?"FUNCTION":module.out))),n=(n=e._depsInclude||[]).concat(module.name&&!module.create?[module.name]:[]),module.include&&(n=n.concat(module.include)),module.override&&(i=t?build.createOverrideConfig(t,module.override):copyConfig(module.override),require(i)),(a=require.s.contexts._.config.rawText)&&lang.eachProp(a,function(e,t){var n=require.toUrl(t)+".js";require._cachedRawText[n]=e}),c.reject.__requireJsBuild=!0,u.__requireJsBuild=!0,require(n,u,c.reject),o[e.env.name]&&build.checkForErrors(s,r),c.promise.then(function(){return module.override&&t&&require(copyConfig(t)),build.checkForErrors(s,r),r})},build.checkForErrors=function(e,t){var n,i,r,s,a,o,c="",u={},f=[],l=[],p={},h={},d=!1,m=!1,g=e.defined,_=e.registry;function v(e,t,n){t&&(n||l.push(e),p[t]?(d=!0,h[t]||(h[t]=[],h[t].push(p[t])),h[t].push(e)):n||(p[t]=e))}for(n in _)hasProp(_,n)&&0!==n.indexOf("_@r")&&(m=!0,r=getOwn(_,n),s=n.split("!"),a=s[0],-1===n.indexOf("_unnormalized")&&r&&r.enabled&&v(n,r.map.url),!hasProp(t.modulesWithNames,n)&&s.length>1&&(falseProp(u,a)&&f.push(a),(o=u[a])||(o=u[a]=[]),o.push(n+(r.error?": "+r.error:""))));if(m)for(n in g)hasProp(g,n)&&-1===n.indexOf("!")&&v(n,require.toUrl(n)+".js",!0);if(l.length||f.length){if(f.length&&(c+="Loader plugin"+(1===f.length?"":"s")+" did not call the load callback in the build:\n"+f.map(function(e){var t=u[e];return e+":\n  "+t.join("\n  ")}).join("\n")+"\n"),c+="Module loading did not complete for: "+l.join(", "),d)for(i in c+="\nThe following modules share the same URL. This could be a misconfiguration if that URL only has one anonymous module in it:",h)hasProp(h,i)&&(c+="\n"+i+": "+h[i].join(", "));throw new Error(c)}},build.createOverrideConfig=function(e,t){var n=copyConfig(e),i=copyConfig(t);return lang.eachProp(i,function(i,r){hasProp(build.objProps,r)?(n[r]={},lang.mixin(n[r],e[r],!0),lang.mixin(n[r],t[r],!0)):n[r]=t[r]}),n},build.flattenModule=function(module,e,t){var n,i,r,s="",a=t.env.fs;return prim().start(function(){var o,c,u,f,l,p,h,d,m,g,_,v,y=e.context,b=[],x={},S={};return module.override&&(t=build.createOverrideConfig(t,module.override)),g=t.namespace||"",_=g?g+".":"",v=module.stubModules&&module.stubModules._byName||{},module.onCompleteData={name:module.name,path:t.dir?module._buildPath.replace(t.dir,""):module._buildPath,included:[]},s+="\n"+module.onCompleteData.path+"\n----------------\n",e.existingRequireUrl&&-1!==(o=e.buildFilePaths.indexOf(e.existingRequireUrl))&&(e.buildFilePaths.splice(o,1),e.buildFilePaths.unshift(e.existingRequireUrl)),t.generateSourceMaps&&(r=t.dir||t.baseUrl,u="FUNCTION"===module._buildPath?(module.name||module.include[0]||"FUNCTION")+".build.js":t.out?module._buildPath.split("/").pop():module._buildPath.replace(r,""),i=new SourceMapGenerator({file:u})),lang.eachProp(e.context.config.pkgs,function(e,t){S[e]=t}),n="",t.wrap&&t.wrap.__startMap&&t.wrap.__startMap.forEach(function(e){n=e(n,t,i)}),prim.serial(e.buildFilePaths.map(function(r){return function(){var o="";return f=e.buildFileToModule[r],p=getOwn(S,f),prim().start(function(){return h=y.makeModuleMap(f),(d=h.prefix&&getOwn(y.defined,h.prefix))?(d.onLayerEnd&&falseProp(x,h.prefix)&&(b.push(d),x[h.prefix]=!0),void(d.write&&((m=function(e){o+="\n"+addSemiColon(e,t),t.onBuildWrite&&(o=t.onBuildWrite(f,r,o))}).asModule=function(n,i){o+="\n"+addSemiColon(build.toTransport(g,n,r,i,e,{useSourceUrl:e.context.config.useSourceUrl}),t),t.onBuildWrite&&(o=t.onBuildWrite(n,r,o))},d.write(h.prefix,h.name,m,{name:module.onCompleteData.name,path:module.onCompleteData.path})))):prim().start(function(){return hasProp(v,f)?hasProp(e.context.plugins,f)?'define({load: function(id){throw new Error("Dynamic load not allowed: " + id);}});':"define({});":require._cacheReadAsync(r,void 0,a)}).then(function(n){var i;c=n,!t.cjsTranslate||t.shim&&lang.hasProp(t.shim,f)||(c=commonJs.convert(r,c)),t.onBuildRead&&(c=t.onBuildRead(f,r,c)),p&&(i=p===parse.getNamedDefine(c)),g&&(c=pragma.namespace(c,g)),c=build.toTransport(g,f,r,c,e,{useSourceUrl:t.useSourceUrl}),p&&!i&&(c=addSemiColon(c,t)+"\n",c+=_+"define('"+p+"', ['"+f+"'], function (main) { return main; });\n"),t.onBuildWrite&&(c=t.onBuildWrite(f,r,c)),o+=addSemiColon(c,t)})}).then(function(){var a,c=r.replace(t.dir,"");module.onCompleteData.included.push(c),s+=c+"\n",f&&falseProp(e.modulesWithNames,f)&&!t.skipModuleInsertion&&((l=t.shim&&(getOwn(t.shim,f)||p&&getOwn(t.shim,p)))?(a=lang.isArray(l)?l:l.deps,t.wrapShim?o="(function(root) {\n"+_+'define("'+f+'", '+(a&&a.length?build.makeJsArrayString(a)+", ":"[], ")+"function() {\n  return (function() {\n"+o+"\n"+(l.exportsFn?l.exportsFn():"")+"\n  }).apply(root, arguments);\n});\n}(this));\n":o+="\n"+_+'define("'+f+'", '+(a&&a.length?build.makeJsArrayString(a)+", ":"")+(l.exportsFn?l.exportsFn():"function(){}")+");\n"):o+="\n"+_+'define("'+f+'", function(){});\n'),n=appendToFileContents(n,o+="\n",r,t,module,i)})}})).then(function(){b.length&&b.forEach(function(e,r){var s;"string"==typeof module.out?s=module.out:"string"==typeof module._buildPath&&(s=module._buildPath),e.onLayerEnd(function(e){n=appendToFileContents(n,"\n"+addSemiColon(e,t),"onLayerEnd"+r+".js",t,module,i)},{name:module.name,path:s})}),module.create&&(n=appendToFileContents(n,"\n"+_+'define("'+module.name+'", function(){});\n',"module-create.js",t,module,i)),module.insertRequire&&(n=appendToFileContents(n,"\n"+_+'require(["'+module.insertRequire.join('", "')+'"]);\n',"module-insertRequire.js",t,module,i))})}).then(function(){return t.wrap&&t.wrap.__endMap&&t.wrap.__endMap.forEach(function(e){n=e(n,t,i)}),{text:n,buildText:s,sourceMap:i?JSON.stringify(i.toJSON(),null,"  "):void 0}})},build.makeJsArrayString=function(e){return'["'+e.map(function(e){return lang.jsEscape(e)}).join('","')+'"]'},build.toTransport=function(e,t,n,i,r,s){var a=r&&r.context.config.baseUrl;return a&&(n=n.replace(a,"")),transform.toTransport(e,t,n,i,function(e){r&&(e.needsId||e.foundId===t)&&(r.modulesWithNames[t]=!0)},s)},require.build=build}),define("skylark-rjs/create-rjsapi",["./rjs"],function(e){return function(){e.optimize=function(t,n,i){e({context:"build"},["build","logger","env!env/quit"],function(r,s,a){t.logLevel=t.hasOwnProperty("logLevel")?t.logLevel:s.SILENT,e._buildReset&&(e._buildReset(),e._cacheReset());function o(t){if(e._buildReset&&(e._buildReset(),e._cacheReset()),t instanceof Error)throw t;return t}i=i||function(e){console.log(e),a(1)},r(t).then(o,o).then(n,i)})},e.tools={useLib:function(t,n){n||(n=t,t="uselib"),useLibLoaded[t]||(loadLib(),useLibLoaded[t]=!0);var i=e({context:t});i(["build"],function(){n(i)})}}}}),define("skylark-rjs/main",["./rjs","./build","./lang","./prim","./logger","./parse","./optimize","./pragma","./transform","./requirePatch","./commonJs","./source-map","./create-rjsapi"],function(e,t,n,i,r,s,a,o,c,u,f,l,p){"use strict";return e}),define("skylark-rjs",["skylark-rjs/main"],function(e){return e})}(define,require),!isAmd){var skylarkjs=require("skylark-langx-ns");isCmd?module.exports=skylarkjs:globals.skylarkjs=skylarkjs}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-rjs-all.js.map
